webpackJsonp([12],{110:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwConfSdk=void 0;var a=n(135),o=r(a),i=n(4),s=r(i),c=n(1753),u=n(1786),f=n(1804),l=n(1806),d=n(1812),p=n(1815),h=n(1817),m=n(1826);(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e})(m),t.HwConfSdk=function e(){(0,s.default)(this,e),(0,o.default)(this,(0,c.getConfApi)().getApiList()),(0,o.default)(this,(0,u.getBigWinConfApi)().getApiList()),(0,o.default)(this,(0,f.getDataConfApi)().getApiList()),(0,o.default)(this,(0,l.getConfLogicApi)().getApiList()),(0,o.default)(this,(0,d.getPairConfApi)().getApiList()),(0,o.default)(this,(0,p.getNativeWndApi)().getApiList()),(0,o.default)(this,(0,h.getDataConfLogicApi)().getApiList())}},131:function(e,t,n){e.exports={default:n(151),__esModule:!0}},132:function(e,t,n){e.exports=n(0)(45)},133:function(e,t,n){e.exports=n(0)(47)},135:function(e,t,n){e.exports=n(0)(562)},139:function(e,t,n){e.exports=n(0)(57)},140:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},141:function(e,t,n){e.exports=n(0)(238)},142:function(e,t,n){"use strict";t.__esModule=!0;var r=n(159),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}},144:function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return i(this,e,t,n)}function i(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?f(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return s(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}function u(e,t){if(s(t),e=a(e,t<0?0:0|h(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=a(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function l(e,t){var n=t.length<0?0:0|h(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=l(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|h(t.length);return e=a(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||K(t.length)?a(e,0):l(e,t);if("Buffer"===t.type&&Z(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function C(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,a);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,a){function o(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}var i=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}var u;if(a){var f=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,-1===f?0:u-f)){if(-1===f&&(f=u),u-f+1===c)return f*i}else-1!==f&&(u-=u-f),f=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var l=!0,d=0;d<c;d++)if(o(e,u+d)!==o(t,d)){l=!1;break}if(l)return u}return-1}function _(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}function I(e,t,n,r){return Y(G(t,e.length-n),e,n,r)}function b(e,t,n,r){return Y(j(t),e,n,r)}function N(e,t,n,r){return b(e,t,n,r)}function E(e,t,n,r){return Y(J(t),e,n,r)}function y(e,t,n,r){return Y(q(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?z.fromByteArray(e):z.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o=e[a],i=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s<=n){var c,u,f,l;switch(s){case 1:o<128&&(i=o);break;case 2:c=e[a+1],128==(192&c)&&(l=(31&o)<<6|63&c)>127&&(i=l);break;case 3:c=e[a+1],u=e[a+2],128==(192&c)&&128==(192&u)&&(l=(15&o)<<12|(63&c)<<6|63&u)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:c=e[a+1],u=e[a+2],f=e[a+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(l=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&f)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),a+=s}return A(r)}function A(e){var t=e.length;if(t<=X)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=X));return n}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=$(e[o]);return a}function R(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,a,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-n,2);a<o;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-n,4);a<o;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function U(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,a){return a||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,a){return a||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function V(e){if(e=H(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,a=null,o=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}function J(e){return z.toByteArray(V(e))}function Y(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function K(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var z=n(234),Q=n(235),Z=n(218);t.Buffer=o,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return i(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return c(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):g.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,a){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var i=a-r,s=n-t,c=Math.min(i,s),u=this.slice(r,a),f=e.slice(t,n),l=0;l<c;++l)if(u[l]!==f[l]){i=u[l],s=f[l];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return N(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var a=t-e;r=new o(a,void 0);for(var i=0;i<a;++i)r[i]=this[i+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},o.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,a=1,o=this[e+--r];r>0&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=o.isBuffer(e)?e:G(new o(e,r).toString()),c=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(154))},145:function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}var o=n(144),i=o.Buffer;i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=a),r(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},146:function(e,t,n){var r=n(10),a=n(8),o=n(148);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},147:function(e,t,n){e.exports={default:n(178),__esModule:!0}},148:function(e,t,n){e.exports=n(0)(59)},149:function(e,t,n){e.exports={default:n(168),__esModule:!0}},151:function(e,t,n){n(152),e.exports=n(8).Object.getPrototypeOf},152:function(e,t,n){var r=n(141),a=n(153);n(146)("getPrototypeOf",function(){return function(e){return a(r(e))}})},153:function(e,t,n){e.exports=n(0)(585)},154:function(e,t,n){e.exports=n(0)(86)},155:function(e,t,n){e.exports=n(0)(84)},157:function(e,t,n){e.exports=n(0)(196)},158:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(184),o=r(a),i=n(149),s=r(i);t.default=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=(0,s.default)(e);!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},159:function(e,t,n){e.exports={default:n(173),__esModule:!0}},164:function(e,t,n){e.exports=n(0)(80)},166:function(e,t,n){var r=n(15);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},168:function(e,t,n){n(23),n(22),e.exports=n(169)},169:function(e,t,n){var r=n(9),a=n(26);e.exports=n(8).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},172:function(e,t,n){e.exports={default:n(222),__esModule:!0}},173:function(e,t,n){n(22),n(174),e.exports=n(8).Array.from},174:function(e,t,n){"use strict";var r=n(11),a=n(10),o=n(141),i=n(31),s=n(32),c=n(27),u=n(175),f=n(26);a(a.S+a.F*!n(33)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,a,l,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=0,C=f(d);if(v&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==C||p==Array&&s(C))for(t=c(d.length),n=new p(t);t>g;g++)u(n,g,v?m(d[g],g):d[g]);else for(l=C.call(d),n=new p;!(a=l.next()).done;g++)u(n,g,v?i(l,m,[a.value,g],!0):a.value);return n.length=g,n}})},175:function(e,t,n){"use strict";var r=n(25),a=n(176);e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},1753:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfImpl=t.getConfApi=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(131),f=a(u),l=n(4),d=a(l),p=n(132),h=a(p),m=n(133),v=a(m),g=n(939),C=r(g),S=n(355),w=r(S),_=n(951),I=n(817),b=r(I),N=n(940),E=n(216),y=r(E),T=n(1785),O=a(T),A=coreLogger.getLogger("conf")("confImpl"),x=void 0,k=(t.getConfApi=function(){return isNullOrEmpty(x)&&(x=new k),x},t.ConfImpl=function(e){function t(){var e=this;(0,d.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return n.confctrlInit=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("confctrlInit"),e.next=3,n.unInit();case 3:return e.next=5,n.init();case 5:return e.next=7,w.confctrlInit();case 7:case"end":return e.stop()}},t,e)})),n.unInitConfCtrl=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("unInitConfCtrl"),e.next=3,n.unInit();case 3:case"end":return e.stop()}},t,e)})),n.createConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("createConf"),e.next=3,n.init();case 3:return e.next=5,C.createConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.p2pTransferConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("p2pTransferConf"),e.next=3,n.init();case 3:return e.next=5,C.p2pTransferConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.oneKeyEnterConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("oneKeyEnterConfService"),e.next=3,n.init();case 3:return e.next=5,C.oneKeyEnterConfService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterConfInConfListService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("enterConfInConfListService"),e.next=3,n.init();case 3:return e.next=5,C.enterConfInConfListService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterConfByIdOnlyService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("enterConfByIdOnlyService"),e.next=3,n.init();case 3:return e.next=5,C.enterConfByIdOnlyService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.rejectConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("rejectConfService"),e.next=3,n.init();case 3:return e.next=5,w.rejectConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.acceptConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("acceptConfService"),e.next=3,n.init();case 3:return e.next=5,w.acceptConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.upgradeConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("upgradeConf"),e.next=3,n.init();case 3:return e.next=5,w.upgradeConf();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)})),n.leaveConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("leaveConf"),b.terminateReCall(),e.next=4,n.init();case 4:return e.next=6,C.leaveConf();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},t,e)})),n.endConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("endConf"),b.terminateReCall(),e.next=4,n.init();case 4:return e.next=6,C.endConf();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},t,e)})),n.bookConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("bookConf"),e.next=3,n.init();case 3:return e.next=5,w.bookConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.cancelConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("cancelConfService"),e.next=3,n.init();case 3:return e.next=5,w.cancelConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getVMRListService=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("getVMRListService"),e.next=3,n.init();case 3:return e.next=5,w.getVRMList();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)})),n.getConfListService=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("getConfListService"),e.next=3,n.init();case 3:return e.next=5,w.getConfList();case 5:case"end":return e.stop()}},t,e)})),n.subscribeConfList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("subscribeConfListService"),e.next=3,n.init();case 3:return e.next=5,w.subscribeConfList();case 5:case"end":return e.stop()}},t,e)})),n.getConfInfoService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("getConfInfoService"),e.next=3,n.init();case 3:return e.next=5,w.getConfInfoService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.reInviteAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("reInviteAttendee"),e.next=3,n.init();case 3:return e.next=5,w.reInviteAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.addAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("addAttendee"),e.next=3,n.init();case 3:return e.next=5,w.addAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.hangupAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("hangupAttendeeService"),e.next=3,n.init();case 3:return e.next=5,w.hangupAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.callAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("callAttendee"),e.next=3,n.init();case 3:return e.next=5,w.callAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.removeAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("removeAttendeeService"),e.next=3,n.init();case 3:return e.next=5,w.removeAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.muteAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("muteAttendeeService"),e.next=3,n.init();case 3:return e.next=5,w.muteAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handupService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("handupService"),e.next=3,n.init();case 3:return e.next=5,w.handupService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.muteConf=function(){var t=(0,c.default)(i.default.mark(function t(r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("muteConf"),e.next=3,n.init();case 3:return e.next=5,w.muteConf(r,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.allowUnmuteConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("allowUnmuteConf"),e.next=3,n.init();case 3:return e.next=5,w.allowUnmuteConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.lockConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("lockConfService"),e.next=3,n.init();case 3:return e.next=5,w.lockConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.postponeConfSerivce=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("postponeConfSerivce"),e.next=3,n.init();case 3:return e.next=5,w.postponeConf(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.releaseChairman=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("releaseChairman"),e.next=3,n.init();case 3:return e.next=5,w.releaseChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.requestChairman=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("requestChairman"),e.next=3,n.init();case 3:return e.next=5,w.requestChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.transferChairmanService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("transferChairmanService"),e.next=3,n.init();case 3:return e.next=5,w.transferChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.changeNickName=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("changeNickName"),e.next=3,n.init();case 3:return e.next=5,w.changeNickName(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.broadcastAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("broadcastAttendeeService"),e.next=3,n.init();case 3:return e.next=5,w.broadcastAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.sendWatchSvcRequestService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("sendWatchSvcRequestService"),e.next=3,n.init();case 3:return e.next=5,w.sendWatchSvcRequest(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.confctrlWatchAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("confctrlWatchAttendee"),e.next=3,n.init();case 3:return e.next=5,w.confctrlWatchAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.changeActiveDirection=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("changeActiveDirection"),e.next=3,n.init();case 3:return e.next=5,w.changeActiveDirection(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.cloudRecordRequest=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("cloudRecordRequest"),e.next=3,n.init();case 3:return e.next=5,w.cloudRecordRequest(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.updateConfMemberList=function(e){w.updateConfMemberList(e)},n.changeConfSelfRole=function(e){w.changeConfSelfRole(e)},n.isInConf=function(){return w.isInConf()},n.isNeedUpdate2DataConf=function(){return w.isNeedUpdate2DataConf()},n.isConfChairMan=function(){return w.isConfChairMan()},n.getIsSmcFirstRequestCharimanRest=function(){return w.getIsSmcFirstRequestCharimanRest()},n.setIsSmcFirstRequestCharimanRest=function(e){w.setIsSmcFirstRequestCharimanRest(e)},n.getIsFirstEnterConf=function(){return w.getIsFirstEnterConf()},n.setIsFirstEnterConf=function(e){w.getIsFirstEnterConf(e)},n.getIsRecall=function(){return w.getIsRecall()},n.isMemberListNull=function(){return w.isMemberListNull()},n.getConfMemberListContent=function(){return w.getConfMemberListContent()},n.getSavedRecallInfo=function(){return w.getSavedRecallInfo()},n.getCurrentConfId=function(){return w.getCurrentConfId()},n.setIsAvcMultiViewBroadcast=function(e){w.setIsAvcMultiViewBroadcast(e)},n.getIsAvcMultiViewBroadcast=function(){return w.getIsAvcMultiViewBroadcast()},n.getIsVideoConf=function(){return w.isVideoConf()},n.getIsDataConf=function(){return w.isDataConf()},n.getIsSvcConf=function(){return w.isSvcConf()},n.getSsrcRange=function(){return w.getSsrcRange()},n.getInfoOfConf=function(e){return w.getInfoOfConf(e)},n.init=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.confctrlInitAtomic.wait();case 2:return A.info("confctrlInitAtomic.wait success"),e.next=5,C.setConfNotifyFuncAtomic.wait();case 5:A.info("setConfNotifyFuncAtomic.wait success");case 6:case"end":return e.stop()}},t,e)})),n.unInit=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.confctrlInitAtomic.reset();case 2:case"end":return e.stop()}},t,e)})),n.unSubscribeConfList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.unSubscribeConfList();case 2:case"end":return e.stop()}},t,e)})),n.isInReCall=function(){return b.isInReCall()},n.terminateReCall=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.terminateReCall();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.reCallStart=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.reCallStart(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.reCallEnterConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.reCallEnterConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getConfInfoMap=function(){return N.confInfoMap},n.confHandUp=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("confHandUp"),e.next=3,w.confHandUp(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getHandUpState=function(e){return w.getHandUpState(e)},n.showConfMemberList=function(){return w.showConfMemberList()},n.isSendScreenSharing=function(){return y.isSendScreenSharing()},n.isSendingWBSharing=function(){return y.isSendingWBSharing()},n.changeVmrInfo=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("changeVmrInfo"),e.next=3,w.changeVmrInfo(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n}return(0,v.default)(t,e),t}(O.default))},1754:function(e,t,n){n(1755);var r=n(8).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},1755:function(e,t,n){n(146)("getOwnPropertyNames",function(){return n(1756).f})},1756:function(e,t,n){e.exports=n(0)(596)},1757:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(69),o=r(a),i=n(4),s=r(i),c=n(5),u=r(c),f=coreLogger.getLogger("CONF")("logic/hiCarCallBack");if("android"===window.CLIENTCONFIG.PLATFORM){window.hicarHangup=function(){f.info("hicar: hicarHangup"),coreConf.actionLeaveConf()},window.hicarToggleMute=function(){f.info("hicar: hicarToggleMute"),!$getState().conf.isConfMicMute?document.querySelector('[data-testid="callMicBtn000123"]')&&document.querySelector('[data-testid="callMicBtn000123"]').click():document.querySelector('[data-testid="callMuteBtn000123"]')&&document.querySelector('[data-testid="callMuteBtn000123"]').click()},window.hicarJoinConf=function(e){f.info("hicar: hicarJoinConf",e),window["joinBtn"+e]&&window["joinBtn"+e]._btnOnClick()};(function(){function e(){(0,s.default)(this,e)}return(0,u.default)(e,null,[{key:"init",value:function(){coreCommon.registeModuleListener("pluginConfInfoNotify",e.pluginConfInfoNotify),coreCommon.registeModuleListener("pluginConfEndNotify",e.pluginConfEndNotify),coreCommon.registeModuleListener("pluginConfListNotify",e.pluginConfListNotify),coreCommon.registeModuleListener("pluginConfMuteNotify",e.pluginConfMuteNotify)}},{key:"pluginConfInfoNotify",value:function(e){f.info("hicar: pluginConfInfoNotify param "+e.guest_join_uri);var t=(0,o.default)({cmd:constant.Conf_NOTIFY_TYPE.CONF_START,result:0,data:e});window.webView.handleConfInfoFromJs(t)}},{key:"pluginConfEndNotify",value:function(){f.info("hicar: pluginConfEndNotify");var e=(0,o.default)({cmd:constant.Conf_NOTIFY_TYPE.CONF_END,result:0,data:{}});window.webView.handleConfInfoFromJs(e)}},{key:"pluginConfListNotify",value:function(e){f.info("hicar: pluginConfListNotify");var t=(0,o.default)({cmd:constant.Conf_NOTIFY_TYPE.CONF_LIST,result:0,data:e});window.webView.handleConfInfoFromJs(t)}},{key:"pluginConfMuteNotify",value:function(e){f.info("hicar: pluginConfMuteNotify");var t=(0,o.default)({cmd:constant.Conf_NOTIFY_TYPE.CONF_MUTE,result:0,data:e});window.webView.handleConfInfoFromJs(t)}}]),e})().init()}},1758:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(3),o=r(a),i=n(69),s=r(i),c=n(135),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=n(4),m=r(h),v=n(5),g=r(v),C=n(242),S=n(215),w=n(260),_=n(814),I=coreLogger.getLogger("conf")("logic/video/AVCNativeManager"),b=function(){function e(){(0,m.default)(this,e),this.needDestroy=!1,this.needDestroyBfcp=!1,this.needCreateRemoteWin=!1,this.needUpdateLocalWinCallId=!1,this.isInCreateBfcp=!1,this.callId=0,this.avcFrameHandles=0,this.localVideoHwnd=0,this.remoteVideoHwnd=0,this.avcBfcpHwnd=0}return(0,g.default)(e,[{key:"getAvcFrameHandles",value:function(){return this.avcFrameHandles}},{key:"getLocalVideoHwnd",value:function(){return this.localVideoHwnd}},{key:"getRemoteVideoHwnd",value:function(){return this.remoteVideoHwnd}},{key:"getAvcBfcpHwnd",value:function(){return this.avcBfcpHwnd}},{key:"initCallInterface",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n,r){var a,o,i,s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("initCallInterface callId = "+t+",mode = "+n+",version = "+r),e.next=3,C.NativeInterface.initNativeScreen(n,r,window.langcode);case 3:if(!((a=e.sent)>0)){e.next=33;break}if(!this.needDestroy){e.next=9;break}return I.info("initCallInterface needDestroy is true"),C.NativeInterface.uninitNativeScreen(a),e.abrupt("return",-1);case 9:if($getState().login.sipLoginOnly?delegate.winHide():delegate.winMinimize(),this.avcFrameHandles=a,I.info("this.avcFrameHandles= ",this.avcFrameHandles," ,AvcFrameHwnd= ",a),o=[{type:0}],0===n&&(o[0].remoteUser=$getState().call.userInfo.name),0!==(i=this.localVideoHwnd)||0===n){e.next=22;break}return e.next=18,C.NativeInterface.createWindows(a,1,0,o);case 18:s=e.sent,I.info("localWnd 41"+s+",this.needUpdateLocalWinCallId = "+this.needUpdateLocalWinCallId),i=s[0].hwnd,this.needUpdateLocalWinCallId&&this.updateLocalwindowCallId(this.callId);case 22:return this.localVideoHwnd=i,i>0&&(I.info("NativeInterface.setLocalWindow"),C.NativeInterface.setLocalWindow(t,i)),c=$getState().conf.isEnterDataConf,S.SvcAtdManager.reportIsDataConf(c,!0),this.updateCameraList(),this.initAvcParams(),this.needCreateRemoteWin&&this.initRemotWindow(this.callId),S.SvcAtdManager.setIsSupportChatNative(a),e.abrupt("return",0);case 33:return I.info("init AVC video native frame failed,please check!"),e.abrupt("return",-1);case 35:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateCameraList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=-1,n=$getState().call.cameraDevicesList,t=-1===a?$getState().setting.camIndex:a,r={},r=(0,u.default)(r,{camera_devices:{camIndex:t,cameraDevicesList:n}}),this.setAvcParam(r);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"initAvcParams",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o,i,c,f,d,p,h,m,v,g,C,S,b,N,E,y,T,O,A,x,k,M,R,L,D;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.getCameraDevices();case 2:return t=$getState().conf,n=t.confSubject,r=t.confServerId,a=t.vmrId,o=t.memberListInfo,isNullOrEmpty(a)||(r=a),w.ToolbarManager.setChairmanState(o,!0),isNullOrEmpty(n)&&(n=$getState().call.userInfo.name,isNullOrEmpty(n)&&(n=$getState().call.userInfo.account)),i={set_window_title:{title:n,confID:r}},c=$getState().conf.setPreviewsCount,c>0&&(i=(0,u.default)(i,{set_conf_userinfo:{count:c}})),i=(0,u.default)(i,{vmr_right:!!$getState().conf.showvmrornot}),f=$getState().conf,d=f.isConfMicMute,p=f.currentConfInfo,h=$getState().call,m=h.isOpenCamera,v=h.isMuteMic,g=h.isMuteSpk,C=h.cameraNum,S=h.cameraDevicesList,b=h.spkDevicesList,N=h.micDevicesList,E=$getState().setting,y=E.camIndex,T=E.spkIndex,O=E.micIndex,A=v||d?0:100,g=g?1:0,e.next=17,coreAccount.getLoginModel();case 17:return x=e.sent,i=(0,u.default)(i,{isSupportAS:x.isSupportAS?1:0}),i=(0,u.default)(i,{init_device_state:{isMuteSpk:g,mic_volume:A,camera_on:C>0?m:-1}}),i=(0,u.default)(i,{camera_devices:{camIndex:y,cameraDevicesList:S}}),i=(0,u.default)(i,{mic_devices:{micIndex:O,micDevicesList:N}}),i=(0,u.default)(i,{spk_devices:{spkIndex:T,spkDevicesList:b}}),i=(0,u.default)(i,{set_use_meeting:{use_meeting:window.CLIENTCONFIG.USE_MEETING}}),i=(0,u.default)(i,{general_pwd:p.general_pwd?p.general_pwd:null}),i=(0,u.default)(i,{is_free_user:$getState().login.isFreeUser}),i=(0,u.default)(i,{is_in_conf:""===$getState().conf.confHandle?0:1}),k=$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING,M=$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,k?i=(0,u.default)(i,{has_delete_member:0}):M&&(i=(0,u.default)(i,{has_delete_member:1})),R=$getState().myInfo.enableDoubleScreen,i=(0,u.default)(i,{enableDoubleScreen:R}),L=JSON.parse((0,s.default)(i)),void 0!==L.set_window_title&&(D=L.set_window_title.title,L.set_window_title.title=D?D.substr(0,1)+"***":""),L.general_pwd=L.general_pwd?"***":"null",I.info("AVC initAvcParams param = "+(0,s.default)(L)),_.EncoderAdpt.clear(),i=(0,u.default)(i,{calc_cpu_rate:{open:1,duration_ms:5e3}}),e.next=40,this.setAvcParam(i);case 40:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateLocalwindowCallId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("updateLocalwindowCallId",t),n=this.localVideoHwnd,n>0?(I.info("NativeInterface.setLocalWindow"),C.NativeInterface.setLocalWindow(t,n)):(this.needUpdateLocalWinCallId=!0,this.callId=t,I.info("updateLocalwindowCallId need wait local avc win create"));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"initRemotWindow",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("initRemotWindow",t),!(this.avcFrameHandles>0)){e.next=13;break}if(n=[{type:1}],0!==(r=this.remoteVideoHwnd)){e.next=10;break}return e.next=7,C.NativeInterface.createWindows(this.avcFrameHandles,1,0,n);case 7:a=e.sent,r=a[0].hwnd,I.info("remoteHwnd 69",r,a);case 10:r>0&&(this.remoteVideoHwnd=r,C.NativeInterface.setRemoteWindow(t,r)),e.next=16;break;case 13:this.needCreateRemoteWin=!0,this.callId=t,I.info("initRemotWindow need wait avc win create");case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"initBfcpWindow",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,f,d,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("initBfcpWindow"),!(this.avcBfcpHwnd>0)){e.next=4;break}return I.info("AVC bfcp native frame have already created return!"),e.abrupt("return");case 4:if(!this.isInCreateBfcp){e.next=7;break}return I.info("AVC bfcp native frame is in creating return!"),e.abrupt("return");case 7:return this.isInCreateBfcp=!0,r=constant.AVC_VIEW_MODE.BFCP_MODE,e.next=11,C.NativeInterface.initNativeScreen(r,p,window.langcode,!0);case 11:if(!((a=e.sent)>0)){e.next=30;break}if(this.avcBfcpHwnd=a,this.isInCreateBfcp=!1,!$getState().conf.isDataConfSharing){e.next=19;break}return I.info("isDataConfSharing is true  destroy bfcpfHwnd "),this.closeBfcpFrame(),e.abrupt("return");case 19:if(!this.needDestroyBfcp){e.next=23;break}return I.info("initBfcpWindow need destroy bfcpfHwnd"),this.closeBfcpFrame(),e.abrupt("return");case 23:return e.next=25,C.NativeInterface.createWindows(a,1,0,[{type:2}]);case 25:o=e.sent,o&&o.length>0&&(C.NativeInterface.setBFCPWindow(t,o[0].hwnd,n),i=$getState().conf,s=i.confSubject,c=i.confServerId,f=i.vmrId,isNullOrEmpty(f)||(c=f),d=(0,u.default)({},{set_window_title:{title:s,confID:c}}),C.NativeInterface.setParam(d,a),S.SvcAtdManager.setIsSupportChatNative(a)),(!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN||window.isHubEnv)&&this.switchVideoToMin(),e.next=31;break;case 30:I.error("init bfcp avc win fail");case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeBfcpFrame",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.avcBfcpHwnd>0?(I.info("closeBfcpFrame close bfcp avc win"),C.NativeInterface.uninitNativeScreen(this.avcBfcpHwnd,!0),this.avcBfcpHwnd=0,this.needDestroyBfcp=!1,this.isInCreateBfcp=!1):this.isInCreateBfcp&&(I.info("closeBfcpFrame need destory bfcp avc win after create"),this.needDestroyBfcp=!0);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"nativeNotifyUpdateBfcpFrameWnd",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.NativeInterface.setBFCPWindow($getState().call.callId,t,!1);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCallInterface",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.avcFrameHandles>0?(I.info("closeCallInterface close avc win"),appService.showMainWindow(!0),C.NativeInterface.uninitNativeScreen(this.avcFrameHandles),this.avcFrameHandles=0):(this.needDestroy=!0,I.info("closeCallInterface need destory avc win after create")),e.abrupt("return",0);case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"setAvcParam",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.avcFrameHandles>0&&t&&"{}"!==(0,s.default)(t)&&(I.info("NativeInterface.setParam is avcFrameHandles, avcFrameHandles"),C.NativeInterface.setParam(t,this.avcFrameHandles));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"setSubject",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("setSubject confSubject = "),n=$getState().conf,r=n.confServerId,a=n.vmrId,isNullOrEmpty(a)||(r=a),o=(0,u.default)({},{set_window_title:{title:t,confID:r}}),this.setAvcParam(o);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"setConfServerId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("setConfServerId confServerId = "+t),n=(0,u.default)({},{set_window_title:{title:$getState().conf.confSubject,confID:t}}),this.setAvcParam(n);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSwitchToVideo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===$getState().call.callId){e.next=3;break}return I.error("The callid is not find."),e.abrupt("return");case 3:return I.info("handleSwitchToVideo"),I.info("cwp init initCallInterface handleSwitchToVideo "),e.next=7,this.initCallInterface(t,1,1);case 7:return n=e.sent,this.initRemotWindow(t),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchVideoToMin",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return I.info("AVC video native frame no exist"),e.abrupt("return");case 3:if(I.info("switchVideoToMin in avc"),t=$getState().conf,n=t.isShowMinWin,r=t.svcMiniViewMode,!n){e.next=8;break}return window.isDataSharing&&(this.setViewMode(constant.AVC_VIEW_MODE.MIN_WIN_SINGLE),I.info("avc switchVideoToMin share owner is self,reSet layout = "+(constant.AVC_VIEW_MODE.MIN_WIN_SINGLE+256))),e.abrupt("return");case 8:0===r&&(r=constant.AVC_VIEW_MODE.MIN_WIN_SINGLE),this.setViewMode(r),I.info("changeIsShowMinWin true 3"),$dispatch(coreUi.changeIsShowMinWin(!0));case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchVideoToMain",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return I.info("AVC video native frame no exist"),e.abrupt("return");case 3:if(I.info("switchVideoToMain in avc"),t=$getState().conf.isShowMinWin){e.next=7;break}return e.abrupt("return");case 7:this.setViewMode(constant.AVC_VIEW_MODE.VIDEO_MODE),I.info("changeIsShowMinWin false 3"),$dispatch(coreUi.changeIsShowMinWin(!1));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchAudioToMain",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return I.info("AVC audio native frame no exist"),e.abrupt("return");case 3:if(I.info("switchAudioToMain in avc"),t=$getState().conf.isShowMinWin){e.next=7;break}return e.abrupt("return");case 7:this.setViewMode(constant.AVC_VIEW_MODE.AUDIO_MODE),I.info("changeIsShowMinWin false 3"),$dispatch(coreUi.changeIsShowMinWin(!1));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"setViewMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.avcFrameHandles,I.info("frameHwnd= ",n," ,hwnd= ",r," ,this.avcFrameHandles= ",this.avcFrameHandles),n>0&&(r=n),a=0,window.isDataSharing&&(a=256),r>0?(C.NativeInterface.setViewMode(r,t+a),[constant.AVC_VIEW_MODE.MIN_WIN_MIN,constant.AVC_VIEW_MODE.MIN_WIN_SINGLE,constant.AVC_VIEW_MODE.MIN_FLOAT_BIG_ONE].includes(t)&&$dispatch(coreUi.changeConfMiniViewMode(t))):I.info("video frame hwnd is 0,please check!");case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCPURate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.cpu&&(I.info("handleCPURate:",_.EncoderAdpt),_.EncoderAdpt.feed(t.cpu,t.version));case 1:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getPromise",value:function(){var e={};return e.promise=new o.default(function(t,n){e.resolve=t,e.reject=n}),e}}]),e}();t.default=b},1759:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i=n(1),s=r(i),c=n(2),u=r(c),f=n(69),l=r(f),d=n(4),p=r(d),h=n(5),m=r(h),v=coreLogger.getLogger("model")("model/nativeWndService/nativeWndService"),g=(o=a=function(){function e(){(0,p.default)(this,e)}return(0,m.default)(e,null,[{key:"handlePageSwitch",value:function(e){v.info("handlePageSwitch,",e.param),coreCommon.Observer.publish("handlePageSwitch",e.param)}},{key:"handleSharingAppEnded",value:function(){coreCommon.Observer.publish("OnSharingAppEnded")}},{key:"handleNotifyNativeDataRenderSize",value:function(e){v.info("handleNotifyNativeDataRenderSize,",e.param),coreCommon.Observer.publish("handleNativeDataRenderSize",e)}},{key:"handleNotifyStartShare",value:function(e){v.info("handleNotifyStartShare",e.param),coreCommon.Observer.publish("OnNativeUserStartDataShare",e)}},{key:"handleNotifyStopShare",value:function(e){v.info("handleNotifyStopShare",e.param),coreCommon.Observer.publish("OnNativeUserStopDataShare",e)}},{key:"handleLeaveConf",value:function(e){v.info("handleLeaveConf"),coreCommon.Observer.publish("OnNativeUserLeaveConf",e)}},{key:"handleEndConf",value:function(e){v.info("handleEndConf"),coreCommon.Observer.publish("OnNativeUserEndConf",e)}},{key:"handleNotifyRequestControl",value:function(e){v.info("handleNotifyRequestControl"),coreCommon.Observer.publish("onNativeNotifyRequestControl",e)}},{key:"handleNotifyReleaseControl",value:function(e){v.info("handleNotifyReleaseControl"),coreCommon.Observer.publish("onNativeNotifyReleaseControl",e)}},{key:"handleNotifyShowConfMember",value:function(e){v.info("handleNotifyShowConfMember"),coreCommon.Observer.publish("onNativeNotifyShowConfMember",e)}},{key:"handleNotifyAddConfMember",value:function(e){v.info("handleNotifyAddConfMember"),coreCommon.Observer.publish("onNativeNotifyAddConfMember",e)}},{key:"handleSetMic",value:function(e){v.info("handleSetMic"),coreCommon.Observer.publish("onNativeNotifySetMic",e)}},{key:"handleSetSpeaker",value:function(e){v.info("handleSetSpeaker"),coreCommon.Observer.publish("onNativeNotifySetSpeaker",e)}},{key:"handleDataFirstFrameRecv",value:function(e){v.info("handleDataFirstFrameRecv start"),coreCommon.Observer.publish("onNativeNotifyDataFirstFrameRecv",e)}},{key:"handleWatchNotify",value:function(e){v.info("handleWatchNotify,",e.param),coreCommon.Observer.publish("handleWatchNotify",e.param)}},{key:"handlePageSwitchNotify",value:function(e){v.info("handlePageSwitchNotify,",e.param),coreCommon.Observer.publish("handlePageSwitchNotify",e.param)}},{key:"handleModeSwitchNotify",value:function(e){v.info("handleModeSwitchNotify,",e.param),coreCommon.Observer.publish("handleModeSwitchNotify",e.param)}},{key:"handleSetMicVol",value:function(e){v.info("handleSetMicVol",e.param),coreCommon.Observer.publish("handleSetMicVol",e.param)}},{key:"handleSetSpkVol",value:function(e){v.info("handleSetSpkVol",e.param),coreCommon.Observer.publish("handleSetSpkVol",e.param)}},{key:"handleSetCamera",value:function(e){v.info("handleSetCamera",e.param),coreCommon.Observer.publish("handleSetCamera",e.param)}},{key:"handleDial",value:function(e){v.info("handleDial",e.param),coreCommon.Observer.publish("handleDial",e.param)}},{key:"handleChairman",value:function(e){v.info("handleChairman",e.param),coreCommon.Observer.publish("handleChairman",e.param)}},{key:"handleHangup",value:function(e){v.info("handleHangup",e.param),coreCommon.Observer.publish("handleHangup",e.param)}},{key:"handleAddMemberDialog",value:function(e){v.info("handleAddMemberDialog",e.param),coreCommon.Observer.publish("handleAddMemberDialog",e.param)}},{key:"handleAttendanceDialog",value:function(e){v.info("handleAttendanceDialog",e.param),coreCommon.Observer.publish("handleAttendanceDialog",e.param)}},{key:"handleShowQos",value:function(e){v.info("handleShowQos",e),coreCommon.Observer.publish("handleShowQos",e.param)}},{key:"handleShowClient",value:function(e){v.info("handleShowClient",e),coreCommon.Observer.publish("onNativeNotifyShowClient",e)}},{key:"handleNotifyPrepareShowRemoteControl",value:function(e){v.info("handleNotifyPrepareShowRemoteControl",e),coreCommon.Observer.publish("onNativeNotifyPrepareRemoteControl",e)}},{key:"handleNotifyChairmanRemoteControl",value:function(e){v.info("handleNotifyChairmanRemoteControl",e),coreCommon.Observer.publish("onNativeNotifyChairmanRemoteControl",e)}},{key:"handleNotifyDataShareQuality",value:function(e){v.info("handleNotifyDataShareQuality ",e),coreCommon.Observer.publish("onNativeNotifyDataShareQuality",e)}},{key:"handleQueryUserInfo",value:function(e){v.info("handleQueryUserInfo "+(0,l.default)(e)),coreCommon.Observer.publish("handleQueryUserInfo",e.param)}},{key:"handleConfCtrl",value:function(e){coreCommon.Observer.publish("handleConfCtrl",e.param)}},{key:"handleCPURate",value:function(e){v.info("handleCPURate "+(0,l.default)(e)),coreCommon.Observer.publish("handleCPURate",e.param)}},{key:"handleActiveBidirection",value:function(e){v.info("handleActiveBidirection "+(0,l.default)(e)),coreCommon.Observer.publish("handleActiveBidirection",e.param)}},{key:"handleRemoveVideo",value:function(e){v.info("handleRemoveVideo "+(0,l.default)(e)),coreCommon.Observer.publish("handleRemoveVideo",e.param)}},{key:"handleConfRecording",value:function(e){v.info("handleConfRecording "+(0,l.default)(e)),coreCommon.Observer.publish("handleConfRecording",e.param)}},{key:"handleProgramSharing",value:function(e){v.info("handleProgramSharing "+(0,l.default)(e)),coreCommon.Observer.publish("handleProgramSharing",e.param)}},{key:"handleNotifyDataIsBigHwnd",value:function(e){v.info("handleNotifyDataIsBigHwnd "+(0,l.default)(e)),coreCommon.Observer.publish("handleNotifyDataIsBigHwnd",e.param)}},{key:"handleNotifySharingMonitor",value:function(e){v.info("handleNotifySharingMonitor "+(0,l.default)(e)),coreCommon.Observer.publish("handleNotifySharingMonitor",e.param)}},{key:"handleShowVideoDevSettings",value:function(e){v.info("handleShowVideoDevSettings "+(0,l.default)(e)),coreCommon.Observer.publish("handleShowVideoDevSettings",e.param)}},{key:"handleMemberListMoving",value:function(e){v.info("handleMemberListMoving"),coreCommon.Observer.publish("handleMemberListMoving",e.param)}},{key:"handleMemberListFocus",value:function(e){v.info("handleMemberListFocus"),coreCommon.Observer.publish("handleMemberListFocus",e.param)}},{key:"handleMemberListWindowStatus",value:function(e){v.info("handleMemberListWindowStatus"),coreCommon.Observer.publish("handleMemberListWindowStatus",e.param)}},{key:"handleStartIMChat",value:function(e){v.info("handleStartIMChat"),coreCommon.Observer.publish("handleStartIMChat",e.param)}},{key:"handleUserNotActive",value:function(e){v.info("handleUserNotActive"),coreCommon.Observer.publish("handleUserNotActive",e.param)}},{key:"handleOperateBrowserHwnd",value:function(e){v.info("handleOperateBrowserHwnd"),coreCommon.Observer.publish("handleOperateBrowserHwnd",e.param)}},{key:"handleAlertBoxResult",value:function(e){v.info("handleAlertBoxResult"),coreCommon.Observer.publish("handleAlertBoxResult",e.param)}},{key:"handleStopWatchByNative",value:function(e){v.info("handleStopWatchByNative"),coreCommon.Observer.publish("handleStopWatchByNative",e.param)}},{key:"handleNativeUserClick",value:function(e){coreCommon.Observer.publish("handleNativeUserClick",e.param)}},{key:"handleMonitorNumber",value:function(e){coreCommon.Observer.publish("handleMonitorNumber",e.param)}},{key:"handleShareAudio",value:function(e){coreCommon.Observer.publish("handleShareAudio",e.param)}},{key:"handleNativeFeedback",value:function(e){coreCommon.Observer.publish("handleNativeFeedback",e.param)}},{key:"handleUpdateAuxHwnd",value:function(e){v.info("handleUpdateAuxHwnd "+(0,l.default)(e)),coreCommon.Observer.publish("handleUpdateAuxHwnd",e.param)}},{key:"handleUserCustomMenuClick",value:function(e){v.info("handleUserCustomMenuClick "+(0,l.default)(e)),coreCommon.dispatchModuleEvent("userCustomMenuClick",e.param)}}]),e}(),a.setNativeWndNotifyFunc=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:t=e.sent,t.setNotifyFunc(1,g.handleNotifyNativeDataRenderSize),t.setNotifyFunc(2,g.handleNotifyShowConfMember),t.setNotifyFunc(3,g.handleNotifyAddConfMember),t.setNotifyFunc(4,g.handleNotifyStartShare),t.setNotifyFunc(5,g.handleNotifyRequestControl),t.setNotifyFunc(6,g.handleNotifyReleaseControl),t.setNotifyFunc(9,g.handleLeaveConf),t.setNotifyFunc(10,g.handleEndConf),t.setNotifyFunc(11,g.handleSetMic),t.setNotifyFunc(12,g.handleSetSpeaker),t.setNotifyFunc(13,g.handleSharingAppEnded),t.setNotifyFunc(14,g.handleShowClient),t.setNotifyFunc(15,g.handleNotifyStopShare),t.setNotifyFunc(16,g.handleNotifyPrepareShowRemoteControl),t.setNotifyFunc(17,g.handleNotifyChairmanRemoteControl),t.setNotifyFunc(18,g.handleNotifyDataShareQuality),t.setNotifyFunc(19,g.handleDataFirstFrameRecv),t.setNotifyFunc(21,g.handleProgramSharing),t.setNotifyFunc(22,g.handleNotifyDataIsBigHwnd),t.setNotifyFunc(23,g.handleNotifySharingMonitor),t.setNotifyFunc(101,g.handleSetMicVol),t.setNotifyFunc(102,g.handleSetSpkVol),t.setNotifyFunc(103,g.handleSetCamera),t.setNotifyFunc(104,g.handleModeSwitchNotify),t.setNotifyFunc(105,g.handleDial),t.setNotifyFunc(106,g.handlePageSwitchNotify),t.setNotifyFunc(107,g.handleWatchNotify),t.setNotifyFunc(108,g.handleChairman),t.setNotifyFunc(109,g.handleHangup),t.setNotifyFunc(110,g.handleAddMemberDialog),t.setNotifyFunc(111,g.handleAttendanceDialog),t.setNotifyFunc(112,g.handleShowQos),t.setNotifyFunc(113,g.handleQueryUserInfo),t.setNotifyFunc(114,g.handleConfCtrl),t.setNotifyFunc(115,g.handleCPURate),t.setNotifyFunc(116,g.handleActiveBidirection),t.setNotifyFunc(117,g.handleRemoveVideo),t.setNotifyFunc(118,g.handleConfRecording),t.setNotifyFunc(119,g.handleShowVideoDevSettings),t.setNotifyFunc(120,g.handleUpdateAuxHwnd),t.setNotifyFunc(121,g.handleMemberListMoving),t.setNotifyFunc(122,g.handleMemberListFocus),t.setNotifyFunc(123,g.handleMemberListWindowStatus),t.setNotifyFunc(124,g.handleStartIMChat),t.setNotifyFunc(125,g.handleUserNotActive),t.setNotifyFunc(126,g.handleUserCustomMenuClick),t.setNotifyFunc(127,g.handleOperateBrowserHwnd),t.setNotifyFunc(128,g.handleAlertBoxResult),t.setNotifyFunc(129,g.handleStopWatchByNative),t.setNotifyFunc(130,g.handleNativeUserClick),t.setNotifyFunc(131,g.handleMonitorNumber),t.setNotifyFunc(132,g.handleShareAudio),t.setNotifyFunc(133,g.handleNativeFeedback);case 56:case"end":return e.stop()}},e,void 0)})),o);t.default=g},176:function(e,t,n){e.exports=n(0)(79)},1760:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(3),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),p=r(d),h=n(5),m=r(h),v=n(355),g=n(261),C=n(1762),S=r(C),w=n(592),_=n(1763),I=r(_),b=n(1765),N=r(b),E=coreLogger.getLogger("dataconf")("model"),y=function(){function e(){var t=this;(0,p.default)(this,e),this.setConfCtrlNotifyFunc=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getConfCtrlInstance();case 2:n=e.sent,n.setNotifyFunc(491593,t.handleGetDataConfResource);case 4:case"end":return e.stop()}},e,t)})),this.setDataConfNotifyFunc=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("set data confctrl service callback func"),!g.DFConfig.isPc){e.next=21;break}return e.next=4,coreTup.getdataConfInstance();case 4:n=e.sent,n.setNotifyFunc(40001001,t.handleJoinDataConfResult),n.setNotifyFunc(40001002,t.handleEndDataConfResult),n.setNotifyFunc(40001003,t.handleLeaveDataConfResult),n.setNotifyFunc(40001020,t.handlePingCompleteResult),n.setNotifyFunc(40001021,t.handlePingProgressResult),n.setNotifyFunc(40001109,t.handleUserEnterResult),n.setNotifyFunc(40001110,t.handleUserLeaveResult),n.setNotifyFunc(40000130,t.handleStarJoinConf),n.setNotifyFunc(40001010,t.handleFlowControlResult),n.setNotifyFunc(40001051,t.handleNetReportReportResult),n.setNotifyFunc(40001105,t.handleUserPresentChangeResult),n.setNotifyFunc(40001203,t.handleUserPhoneStatusResult),n.setNotifyFunc(40001229,t.handleOnConfMsgPhoneConfInfo),n.setNotifyFunc(40001062,t.handlePingCallback),n.setNotifyFunc(40001063,t.handleNewConfHandle),n.setNotifyFunc(40001233,t.handleNegoCapResult);case 21:case"end":return e.stop()}},e,t)})),this.joinDataConf=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n){e.next=2;break}return e.abrupt("return",s.default.reject("joinData params is null"));case 2:if((r=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.SMC_MEETING){e.next=37;break}return coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,params:[coreConf.getCurrentConfId()]}),e.next=7,coreAccount.getMyInfo();case 7:if(a=e.sent,o=a.bind_no||"",E.info("joinDataConf  start, bind_no is "+handlePhoneNumber(o)+",  sip_num is "+handlePhoneNumber(n.sip_num)),t.dataConfStatus=w.DCONF_STATUS.JOINING,t.confInfo=n,!g.DFConfig.userSipNumberRequestBigParams){e.next=18;break}return e.next=15,t.getSipNumber();case 15:o=e.sent,e.next=19;break;case 18:o=isNullOrEmpty(n.sip_num)?o:n.sip_num;case 19:return t.myBindNo=o,e.next=22,t.requestBigParams(n);case 22:if(null!==(i=e.sent)){e.next=26;break}return t.handleJoinDataFail(),e.abrupt("return");case 26:return t.trackerGetServerIp(i.param.conf_param.server_ip),e.next=29,t.buildJoinParams(i.param,n);case 29:return c=e.sent,t.bigParam=c,g.DFConfig.shouldSendServerInfoNotify()&&coreCommon.Observer.publish("OnMeetingHWsaveIpParam",{sbcIP:c.conf_param.sbc_server_address,msIP:c.conf_param.server_ip}),t.selfUserUri=c.conf_param.user_uri,e.next=35,t.startJoinDataConf(c);case 35:e.next=55;break;case 37:return E.info("joinDataConf OTHERS_MEETING"),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,params:[coreConf.getCurrentConfId()]}),e.next=41,coreAccount.getMyInfo();case 41:if(f=e.sent,l=f.bind_no||"",E.info("joinDataConf  start, bind_no is "+handlePhoneNumber(l)+",  sip_num is "+handlePhoneNumber(n.sip_num)),t.dataConfStatus=w.DCONF_STATUS.JOINING,t.confInfo=n,E.info("joinDataConf this.confInfo: "+t.confInfo),!g.DFConfig.userSipNumberRequestBigParams){e.next=53;break}return e.next=50,t.getSipNumber();case 50:l=e.sent,e.next=54;break;case 53:l=isNullOrEmpty(n.sip_num)?l:n.sip_num;case 54:t.myBindNo=l;case 55:E.info("start join data conf over");case 56:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleBigParamNotifyResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("HandleBigParamNotifyResult start,data : "),null!==n&&0===n.param.result){e.next=5;break}return E.info("handleBigParamNotifyResult fail!"),t.handleJoinDataFail(),e.abrupt("return");case 5:return r={},r.conf_param=n.param.conf_params,t.trackerGetServerIp(r.conf_param.server_ip),e.next=10,t.buildJoinParams(r,t.confInfo);case 10:return a=e.sent,t.bigParam=a,t.selfUserUri=a.conf_param.user_uri,e.next=15,t.startJoinDataConf(a);case 15:E.info("handleBigParamNotifyResult over");case 16:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.retryJoin=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataConfStatus===w.DCONF_STATUS.JOIN_FAIL){e.next=3;break}return E.info("retry join, status is not fail"),e.abrupt("return");case 3:if(!t.confInfo){e.next=8;break}return t.bigParamRequestCount=0,e.abrupt("return",t.joinDataConf(t.confInfo));case 8:E.info("retry join,confInfo is null");case 9:case"end":return e.stop()}},e,t)})),this.retryJoinOnStg=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("retry join on stg"),null!==t.bigParam&&null!==t.bigParam.conf_param){e.next=5;break}return E.info("retry join on stg fail,bigparam is null"),t.handleJoinDataFail(),e.abrupt("return");case 5:g.DFConfig.isMobile?t.bigParam.conf_param.firewallmode=g.DFConfig.firewallType:t.bigParam.firewallmode=g.DFConfig.firewallType,t.startJoinDataConf(t.bigParam);case 7:case"end":return e.stop()}},e,t)})),this.buildStgTunnelJoinData=(0,l.default)(u.default.mark(function e(){var n,r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("build stg tunnel for join data"),g.DFConfig.firewallType=w.DATA_FIREWALL_MODE.STG,e.next=4,coreAccount.getLoginModel();case 4:if(n=e.sent,r=n.stgAccount,a=n.stgUri,!coreCommon.checkStgUriExist(a)){e.next=26;break}return e.next=10,coreSecurity.getPasswordManager();case 10:return o=e.sent,e.next=13,o.getPassword("stgPassword");case 13:return i=e.sent,E.info("building stg tunnel"),e.next=17,coreAccount.buildStgTunnel({stgUri:a,stgAccount:r,stgPassword:i});case 17:if(s=e.sent,s.result){e.next=23;break}return e.next=21,t.handleJoinDataFail();case 21:e.next=24;break;case 23:t.retryJoinOnStg();case 24:e.next=27;break;case 26:t.handleJoinDataFail();case 27:case"end":return e.stop()}},e,t)})),this.trackerGetServerIp=function(e){g.DFConfig.supportBuried&&coreCommon.Observer.publish("OnGetServerIp",e)},this.buildJoinParams=function(){var e=(0,l.default)(u.default.mark(function e(n,r){var a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.DFConfig.isPc?(n.firewallmode=g.DFConfig.firewallType,n.servertype=g.DFConfig.serverType(),n.confparam_url=r.conf_uri,n.language="zh-CN",n.stgaddress=g.DFConfig.stgAddresslist,g.DFConfig.isPc?isNullOrEmpty(n.conf_param.data_codec_ver)||"1.0"===n.conf_param.data_codec_ver.toLowerCase()?n.conf_param.option=8388608:n.conf_param.option=8388736:n.conf_param.option=8388608,g.DFConfig.useSBC||(n.conf_param.sbc_server_address="")):(n.conf_param.firewallmode=g.DFConfig.firewallType,n.conf_param.bigParamServerAddress=r.conf_uri),a=S.default.cutstr(n.conf_param.conf_name,30),o=S.default.cutstr(n.conf_param.user_name,30),n.conf_param.conf_name=a,n.conf_param.user_name=o,isNullOrEmpty(n.conf_param.user_uri)&&(E.info("user_uri is empty,set myBindNo = "+t.myBindNo),n.conf_param.user_uri=t.myBindNo),n.conf_param.bind_number=n.conf_param.user_uri,t.userBindNum=n.conf_param.bind_number,i=n.conf_param.data_codec_ver,!t.shouldSetCodeccVersion(i)){e.next=15;break}return e.next=12,t.buildCodeccParams();case 12:s=e.sent,g.DFConfig.isPc?n.codec_param=s:n.conf_param.codec_param=s,E.info("set codec param: ",s);case 15:return E.info(" confinfonotify conf_param :  ",{sbc_server_address:n.conf_param.sbc_server_address,server_ip:n.conf_param.server_ip,firemode:g.DFConfig.firewallType,M:n.conf_param.M,T:n.conf_param.T}),e.abrupt("return",n);case 17:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.buildCodeccParams=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.assignBandwidthForData(t.call_id);case 2:return n=e.sent,e.abrupt("return",{encodeVerType:30,maxBitRate:n,maxDecodeSizeWidth:1920,maxDecodeSizeHeight:1080,maxDecodeFrameRate:g.DFConfig.decFr(),maxEncodeSizeWidth:1920,maxEncodeSizeHeight:1080,maxEncodeFrameRate:g.DFConfig.encFr()});case 4:case"end":return e.stop()}},e,t)})),this.shouldSetCodeccVersion=function(e){var n=!0;return g.DFConfig.isPc&&(isNullOrEmpty(e)?(E.info("data_codec_ver is null"),g.DFConfig.isWin||g.DFConfig.isMac?t.setDataCodeccVersion(5):(t.setDataCodeccVersion(0),n=!1)):(E.info("dataCodecVersion = "+e),"1.0"===e.toLowerCase()?t.setDataCodeccVersion(0):("3.0"===e.toLowerCase()||e.toLowerCase(),t.setDataCodeccVersion(5)))),n},this.requestBigParams=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestBigParamFromTup(n);case 2:if(r=e.sent,!(r.param&&r.param.conf_param&&r.param.conf_param.conf_id&&""!==r.param.conf_param.conf_id)){e.next=7;break}return e.abrupt("return",r);case 7:if(!(t.bigParamRequestCount>=5)){e.next=12;break}return E.info(" retryGetDataConfBigParams 5 times , stop retry"),e.abrupt("return",null);case 12:return e.next=14,t.requestBigParams(n);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.requestBigParamFromTup=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.bigParamRequestCount++,E.info("getDataConfBigParams start times = "+t.bigParamRequestCount),r={conf_id:n.conf_id,conf_url:n.conf_uri,mcu_addr:{server_addr:"",server_port:0},random:n.data_random,passcode:n.passcode,password:n.password,sip_num:t.myBindNo,type:n.getParamType||3},e.next=5,coreTup.getConfCtrlInstance();case 5:return a=e.sent,e.next=8,a.getDataConfBigParam(r);case 8:return o=e.sent,E.info("getDataConfBigParams end times = "+t.bigParamRequestCount),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getSipNumber=(0,l.default)(u.default.mark(function e(){var n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return n=e.sent,r=n.sipImpi,E.info("sipImpi = ",r),a=r,isNullOrEmpty(a)||-1!==(o=a.indexOf("@"))&&(a=a.slice(0,o)),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,t)})),this.requestWBToken=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.requestWBToken(n):E.info("requestWBToken shareservice is null");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.advancedSetting=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.advancedSetting(n,r):E.info("advancedSetting shareservice is null");case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.setCallId=function(e){E.info("setCallId = ",e),t.call_id=e},this.getSelfAudioNumber=function(){if(""===t.selfAudioNumber)for(var e=(0,v.getUpdatedParticipants)(),n=0;n<e.length;++n){var r=e[n];1===r.is_self&&(t.selfAudioNumber=r.number,E.info("getSelfAudioNumber : "+handlePhoneNumber(t.selfAudioNumber)))}return t.selfAudioNumber},this.getNegoBandwidth=function(){return t.negoBandwidth},this.setDataCodeccVersion=function(e){g.DFConfig.dataCodeccVersion=e,E.info("dataCodeccVersion = "+e)},this.getDataCodeccVersion=function(){return g.DFConfig.dataCodeccVersion},this.startJoinDataConf=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info(" startJoinDataConf"),t.dataConfStatus===w.DCONF_STATUS.JOINING){e.next=4;break}return E.info("current dataConfStatus is"+t.dataConfStatus+", no need join dataconf "),e.abrupt("return");case 4:if(!g.DFConfig.isMobile){e.next=8;break}window.mobileStartJoinDataConf((0,o.default)(n.conf_param)),e.next=23;break;case 8:return e.next=10,coreTup.getCallInstance();case 10:return r=e.sent,r.setStgTunnel(t.call_id,0),e.next=14,coreTup.getdataConfInstance();case 14:return a=e.sent,i="<UserInfo><UserType>2</UserType></UserInfo>",n.conf_param.user_info=i,n.conf_param.user_info_len=i.length,n.conf_param.call_id=t.call_id,e.next=21,a.startjoinconf(n);case 21:s=e.sent,0===s.param.result?E.info("start conf success"):(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[0]}),E.error("start conf failed"));case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setLeftConfCallback=function(e){t.leftDataConfCallback=e},this.getApplist=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.getApplist():E.error("get applist error:shareservice is null");case 1:case"end":return e.stop()}},e,t)})),this.setDataCodecVersion=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:if(r=e.sent,!(t.m_confHandle>0&&t.m_user_id>0)){e.next=11;break}return E.info("setDataCodecVersion, m_confhandle : "+t.m_confHandle),e.next=7,r.setDataCodecVersion(t.m_confHandle,n);case 7:a=e.sent,0!==a.param.result?E.info("setDataCodecVersion failed, result = ",a.result):E.info("setDataCodecVersion success, result = ",a.result),e.next=12;break;case 11:E.error("setDataCodecVersion failed, m_confhandle : "+t.m_confHandle);case 12:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getUserAltId=function(e){return t.memberService?t.memberService.getUserAltId(e):""},this.getMemberNameByUserId=function(e){return t.memberService?t.memberService.getMemberNameByUserId(e):""},this.getBindnoByUserid=function(e){return t.memberService?t.memberService.getBindnoByUserid(e):""},this.getDataShareOwnerBindno=function(){return t.shareService&&""!==t.shareService.shareOwnerUserId?t.getBindnoByUserid(t.shareService.shareOwnerUserId):t.shareService&&t.shareService.wbService&&t.shareService.wbService.m_ownerUserid>0?(E.info("this.shareService.wbService.m_ownerUserid = ",t.shareService.wbService.m_ownerUserid),t.getBindnoByUserid(t.shareService.wbService.m_ownerUserid)):""},this.changeRemoteControl2Other=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.m_confHandle||""===n||null===t.shareService){e.next=4;break}if(0===(r=Number(t.getUserAltId(n)))){e.next=4;break}return e.abrupt("return",t.shareService.changeRemoteControl2Other(r));case 4:return E.error("dataconf setRemoteControl2Other fail ,confhandle : "+t.m_confHandle),e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.delRemoteControlPrivilege=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&t.shareService?(E.error("dataconf delRemoteControlPrivilege success ,confhandle : "+t.m_confHandle),r=void 0,r=void 0===n||""===n?Number(t.m_user_id):Number(t.getUserAltId(n)),t.shareService.delRemoteControlPrivilege(r)):E.error("dataconf delRemoteControlPrivilege fail ");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.rejectRemoteControlPrivilege=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&""!==n&&t.shareService&&(r=Number(t.getUserAltId(n)),t.shareService.rejectRemoteControlPrivilege(r));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.requestRemoteControlPrivilege=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&t.shareService&&t.shareService.requestRemoteControlPrivilege();case 1:case"end":return e.stop()}},e,t)})),this.inputWndMsg=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i){var s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.m_confHandle){e.next=7;break}return e.next=3,coreTup.getdataConfInstance();case 3:return s=e.sent,e.next=6,s.asInputwndmsg(t.m_confHandle,n,r,a,o,i);case 6:c=e.sent;case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),this.leaveconf=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("dataconf leaveconf ,confhandle = "+t.m_confHandle),0===t.m_confHandle||0===t.m_confHandle){e.next=10;break}return E.info("leaveconf call id = ",t.call_id),t.stopStgTunnel(),t.shareService.isDataShareStarted=!1,e.next=7,coreTup.getdataConfInstance();case 7:return n=e.sent,e.next=10,n.leaveconf(t.m_confHandle);case 10:case"end":return e.stop()}},e,t)})),this.terminateconf=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("dataconf terminateconf ,confhandle = "+t.m_confHandle),0===t.m_confHandle||0===t.m_confHandle){e.next=13;break}return E.info("leaveconf call id = ",t.call_id),t.stopStgTunnel(),e.next=6,coreTup.getdataConfInstance();case 6:return n=e.sent,e.next=9,n.terminateconf(t.m_confHandle);case 9:return e.next=11,t.releaseConfHandle();case 11:E.info("leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 13:case"end":return e.stop()}},e,t)})),this.setDataShareCanvasSize=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.error("setDataShareCanvasSize ,confhandle = "+t.m_confHandle),0===t.m_confHandle){e.next=6;break}return e.next=4,coreTup.getdataConfInstance();case 4:r=e.sent,r.setDataShareScreenParam(t.m_confHandle,{width:n.width,height:n.height});case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.stopStgTunnel=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=3,coreTup.getCallInstance();case 3:n=e.sent,n.setStgTunnel(t.call_id,3);case 5:case"end":return e.stop()}},e,t)})),this.handleFlowControlResult=function(e){E.error("handleFlowControlResult start")},this.handleNetReportReportResult=function(e){E.info("handleNetReportReportResult start")},this.handleUserPresentChangeResult=function(e){E.info("handleUserPresentChangeResult start")},this.handleUserPhoneStatusResult=function(e){E.info("handleUserPhoneStatusResult start")},this.handleOnConfMsgPhoneConfInfo=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=2;break}return e.abrupt("return");case 2:if(E.info("handleOnConfMsgPhoneConfInfo data = ",n),!n||!n.param||void 0===n.param.auxtokenresult){e.next=9;break}if(1!==n.param.auxtokenresult){e.next=9;break}return e.next=7,coreTup.getdataConfInstance();case 7:r=e.sent,r.sendNotifyAllUsersCloseSharingTab(t.m_confHandle,t.m_user_id,23);case 9:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleNewConfHandle=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.param.value1||0!==n.param.value2){e.next=9;break}return E.error("new confhandle success, confhandle : ",n.param.value1),t.m_confHandle=n.param.value1,t.shareService=new I.default(t.m_confHandle,t.call_id),t.shareService.memberService=t.memberService,e.next=7,t.shareService.initShareService();case 7:e.next=10;break;case 9:E.error("new confhandle fail, errcode : ",n.param.value2);case 10:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("handleJoinDataConfResult start"),!n.param.confHandle||0!==n.param.value1){e.next=7;break}return t.m_confHandle=n.param.confHandle,e.next=5,t.shareService.loadShareComponent();case 5:e.next=10;break;case 7:E.error("handleJoinDataConfResult  joindataconf fail, errcode : "+n.param.value1+"confHandle : "+n.param.confHandle),t.m_confHandle=n.param.confHandle,t.handleJoinDataFail();case 10:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleEndDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("handleEndDataConfResult start"),!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=4;break}return E.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 4:t.isCascade?(E.info("PC cascade conf end data conf"),coreConf.actionLeaveConf()):t.beLeaveDataConf();case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleLeaveDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=3;break}return E.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 3:t.isCascade?(E.info("PC cascade conf leave data conf"),coreConf.actionLeaveConf()):(E.info("handleLeaveDataConfResult start"),t.beLeaveDataConf());case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.releaseConfHandle=(0,l.default)(u.default.mark(function e(){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.m_confHandle>0)){e.next=20;break}return E.info("releaseConfHandle start"),n=t.m_confHandle,t.m_confHandle=0,e.next=6,t.showNativeDataControl(!1);case 6:return e.next=8,t.closeNativeDataSharingWnd();case 8:return e.next=10,coreTup.getdataConfInstance();case 10:r=e.sent,r.releaseDataConfHandle(n),coreCommon.Observer.publish("OnReleaseHandle",{}),coreCommon.dispatchModuleEvent("pluginConfStateNotify",{state:constant.CLK_PLUGIN_CONFLIFECYCLE.END}),coreCommon.Observer.publish("onDataSharingStateChanged",!1),t.shareService=null,t.m_user_id=0,E.info("releaseConfHandle end"),e.next=21;break;case 20:E.info("releaseConfHandle: confHandle is null");case 21:case"end":return e.stop()}},e,t)})),this.getMyNumberfromContact=function(){for(var e=$getState(),t=e.conf.memberListInfo,n=0;n<t.length;n++)if(t[n].is_self)return t[n].number},this.getMyUserId=function(){return t.m_user_id},this.handlePingProgressResult=function(e){E.info("handlePingProgressResult start")},this.handleUserEnterResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return r=e.sent,e.next=5,coreAccount.getMyInfo();case 5:if(a=e.sent,o=r.sipAccount,i=a.bind_no,E.info("handleUserEnterResult start, sipAccount : "+handlePhoneNumber(o)+", useruri:"+handlePhoneNumber(n.param.user_alt_uri)+",userid:"+n.param.user_alt_id+",myBindNo:"+handlePhoneNumber(i)),!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=12;break}return E.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 12:s=!1,""===n.param.user_alt_uri||i!==n.param.user_alt_uri&&t.getSelfAudioNumber()!==n.param.user_alt_uri&&t.dataResourceUserNumber!==n.param.user_alt_uri&&t.selfUserUri!==n.param.user_alt_uri&&o!==n.param.user_alt_uri||(E.info("self enter"),0===t.m_user_id&&coreCommon.Observer.publish("handleSelfEnterResult",{}),t.m_user_id=n.param.user_alt_id,t.shareService.m_user_id=t.m_user_id,t.dataConfStatus=w.DCONF_STATUS.IN_CONF,s=!0,E.info("handleUserEnterResult setmyuserid : "+n.param.user_alt_id+",user_alt_uri : "+handlePhoneNumber(n.param.user_alt_uri))),t.memberService.addMember(n,s);case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleUserLeaveResult=function(e){if(E.info("handleUserLeaveResult start"),e.param.confHandle&&e.param.confHandle!==t.m_confHandle)return void E.error("confhandle is diff,old = "+t.m_confHandle+",new = "+e.param.confHandle);t.memberService.deleteMember(e),e.param.isSelf=e.param.user_alt_id===t.m_user_id,coreCommon.Observer.publish("dataUserleave",e)},this.handleNegoCapResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("onNegoCapResult data"+(0,o.default)(n)),t.negoBandwidth=n.param.capability.maxbitrate,window.CLIENTCONFIG.ISBIGWIN&&(r=n.param.capability.encodevertype,30===r?3===g.DFConfig.dataCodeccVersion?t.setDataCodeccVersion(3):t.setDataCodeccVersion(5):t.setDataCodeccVersion(0),E.info("use data codecc version ",g.DFConfig.dataCodeccVersion)),E.info("use bandwidth ",t.negoBandwidth);case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getDataConfResource=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f,l,d,p,h){var m,v,g;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m={conf_url:n,conf_id:r,nick_name:a,password:o,number:i,user_id:s,server_ip:c,pin_code:f,participant_id:l,server_type:d,language:p,data_site_bandwidth:h},E.info("getDataConfResource start, params : "),e.next=4,coreTup.getConfCtrlInstance();case 4:return v=e.sent,e.next=7,v.getDataConfResource(m);case 7:return g=e.sent,E.info("getDataConfResource end"),e.abrupt("return",g);case 10:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c,u,f,l,d){return e.apply(this,arguments)}}(),this.getDataConfBigParams=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c){var f,l,d,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:3;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f={conf_id:n,conf_url:r,mcu_addr:a,random:o,passcode:s,password:i,sip_num:c,type:p},E.info("getDataConfBigParams start"),e.next=4,coreTup.getConfCtrlInstance();case 4:return l=e.sent,e.next=7,l.getDataConfBigParam(f);case 7:return d=e.sent,E.info("getDataConfBigParams end"),e.abrupt("return",d);case 10:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),this.handleGetDataConfResource=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("handleGetDataConfResource start, new confparams  "),r=n.param.conf_params,a=null,r.ms_address&&(o=r.ms_address.split(":"),a=o.length>0?r.ms_address.split(":")[0]:r.ms_address),E.info("ms_address_without_port",a),E.info("handleGetDataConfResource sip number is :"+handlePhoneNumber(r.number)+", bind_no is :"+handlePhoneNumber(r.bind_number)),1===r.has_data_resource?(r.conf_id&&""!==r.conf_id&&"0"!==r.conf_id&&(t.bigParam.conf_param.conf_id=r.conf_id),t.bigParam.conf_param.M=r.M,t.bigParam.conf_param.T=r.T,r.user_id&&""!==r.user_id&&"0"!==r.user_id&&(t.bigParam.conf_param.user_id=r.user_id),isNullOrEmpty(r.number)||(t.bigParam.conf_param.user_uri=r.number),isNullOrEmpty(r.bind_number)||(t.bigParam.conf_param.bind_number=t.userBindNum),t.dataResourceUserNumber=r.number,t.bigParam.conf_param.server_ip=a,t.startJoinDataConf(t.bigParam),E.info("handleGetDataConfResource end , bigparam : ")):E.info("handleGetDataConfResource fail ");case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleServerTypeForGetResource=function(e,t){var n=g.DFConfig.firewallType===w.DATA_FIREWALL_MODE.STG?1:0;if(g.DFConfig.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING&&e&&t){var r=e.split(";");if(r.length>0)for(var a=0;a<r.length;a++)""!==r[a]&&t.split(":").length>0&&r[a].split(":").length>0&&t.split(":")[0]===r[a].split(":")[0]&&(n=1);n=g.DFConfig.firewallType===w.DATA_FIREWALL_MODE.STG?2:n}return n},this.handleBandwidthForGetResource=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!(g.DFConfig.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING||g.DFConfig.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING&&t.bigParam&&t.bigParam.conf_param&&t.bigParam.conf_param.server_data_cap)){e.next=5;break}return e.next=4,coreCall.assignBandwidthForData(t.call_id);case 4:n=e.sent;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e,t)})),this.handlePingCallback=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i,s,c,f,l,d,p,h,m,v,C,S,w;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("handlePingCallback data start"),!(r=n.param.dst_addr)||""===r){e.next=32;break}if(E.info("handlePingCallback param "),t.isCascade=!0,a=t.confInfo.conf_uri,o=a.indexOf("/",10),o>0&&(a=a.substr(0,o)),i=t.bigParam.conf_param,s=i.conf_id,c="1"===i.user_role?i.host_key:i.part_secure_conf_num,!g.DFConfig.shouldPasscodeBase64()){e.next=15;break}return e.next=14,coreSecurity.encode64(c);case 14:c=e.sent;case 15:return f=i.user_uri,l=i.user_name,d=r,p=i.user_id,h=i.pin_code,m=i.participant_id,v=i.sbc_server_address,C=0,S=t.handleServerTypeForGetResource(v,d),e.next=26,t.handleBandwidthForGetResource();case 26:return w=e.sent,e.next=29,t.getDataConfResource(a,s,l,c,f,p,d,h,m,S,C,w);case 29:E.info("handlePingCallback  getDataConfResource param =",{confUrl:a,confId:s,number:f,userId:p,serverIp:d,participantId:m,serverType:S,language:C,dataSiteBandwidth:w}),e.next=34;break;case 32:E.info("handlePingCallback data error, dst_addr is null stgaddr"),g.DFConfig.stgAddresslist.length>0?(E.info("handlePingCallback  Need2BuildStgTunnel"),t.buildStgTunnelJoinData()):(E.info("handlePingCallback stgaddrlist empty, joindata fail"),t.handleJoinDataFail());case 34:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataFail=function(){coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[0]}),t.releaseConfHandle(),g.DFConfig.isPc?coreCommon.Observer.publish("OnJoinDataConfFail"):coreCommon.Observer.publish("onMobileJoinDataFail"),t.dataConfStatus=w.DCONF_STATUS.JOIN_FAIL},this.setDataShareScreenGDIEXType=function(){null!==t.shareService&&t.shareService.setDataShareScreenGDIEXType()},this.setCloseShareDataOperate=function(e){if(null!==t.shareService)return t.shareService.setCloseShareDataOperate(e)},this.getCloseShareDataOperate=function(){if(null!==t.shareService)return t.shareService.getCloseShareDataOperate()},this.getStreamInfo=function(){if(null!==t.shareService)return t.shareService.getStreamInfo()},this.isInScreenSharing=function(){return null!==t.shareService&&t.shareService.isInScreenSharing()},this.isSendScreenSharing=function(){return null!==t.shareService&&t.shareService.isSendScreenSharing()},this.isSendingWBSharing=function(){return null!==t.shareService&&t.shareService.isSendingWBSharing()},this.resetConfSharingType=function(){if(null!==t.shareService)return t.shareService.resetConfSharingType()},this.setConfSharingType=function(e,n){if(null!==t.shareService)return t.shareService.setConfSharingType(e,n)},this.getDisplayInfo=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.getDisplayInfo());case 4:E.info("get display info share service is null");case 5:case"end":return e.stop()}},e,t)})),this.setDataConfShareRealRect=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.shareService&&(t.shareService.bigwinRealRectLeft=n,t.shareService.bigwinRealRectTop=r,t.shareService.bigwinRealRectRight=a,t.shareService.bigwinRealRectBottom=o);case 1:case"end":return e.stop()}},e,t)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),this.cancelSharingapp=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.cancelSharingapp(n));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setStart=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setStart());case 2:case"end":return e.stop()}},e,t)})),this.setAppShareScreenParam=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setAppShareScreenParam(n,r));case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.setSharingapp=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setSharingapp(n));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setDataShareScreenPicQuality=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=10;break}if(30!==n){e.next=6;break}return e.next=4,t.shareService.setDataShareScreenGDIEXType();case 4:e.next=8;break;case 6:return e.next=8,t.shareService.setDataShareScreenPicQuality(n);case 8:e.next=11;break;case 10:E.info("setDataShareScreenPicQuality failed,please check whether conf is dataConf!");case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.showNativeRemoteControl=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.showNativeRemoteControl(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.stopWBDoc=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.stopWBDoc();case 1:case"end":return e.stop()}},e,t)})),this.isInWBSharing=function(){return null!==t.shareService&&t.shareService.isInWBSharing()},this.isRecevingWBSharing=function(){return null!==t.shareService&&t.shareService.isRecevingWBSharing()},this.createWBNewDocAndPage=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.createWBNewDocAndPage());case 2:case"end":return e.stop()}},e,t)})),this.closeNativeDataSharingWnd=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.closeNativeDataSharingWnd());case 4:E.error("close data window error:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.createNativeDataSharingWnd=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f,l,d,p){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=6;break}return e.next=3,t.shareService.createNativeDataSharingWnd(n,r,a,o,i,s,c,f,l,d,p);case 3:return e.abrupt("return",e.sent);case 6:E.error("createNativeDataSharingWnd:share service is null");case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c,u,f,l){return e.apply(this,arguments)}}(),this.showNativeDataControl=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=6;break}return e.next=3,t.shareService.showNativeDataControl(n,r,a,o,i,s,c);case 3:return e.abrupt("return",e.sent);case 6:E.error("showNativeDataControl:share service is null");case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),this.getIsUsePrimarySize=function(){return null!==t.shareService&&t.shareService.isUsePrimarySize},this.changeIsUsePrimarySize=function(){null!==t.shareService&&(t.shareService.isUsePrimarySize=!t.shareService.isUsePrimarySize)},this.isRemoteControling=function(){return null!==t.shareService&&!0===t.shareService.isInRemoteControlling},this.isInShareAnnotation=function(){return null!==t.shareService&&!0===t.shareService.isInScreenShareAnnotation},this.getRemoteControlUserNum=function(){return t.shareService.remoteControlUserNum||""},this.isDataShareStarted=function(){return!!t.shareService&&t.shareService.isDataShareStarted},this.isReceivingDataShare=function(){return!!t.shareService&&t.shareService.isReceivingDataShare()},this.setDataNegoMaxCap=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f){var l,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:if(l=e.sent,!(t.m_confHandle>0&&t.m_user_id>0)){e.next=11;break}return E.info("setDataNegoMaxCap, m_confhandle : "+t.m_confHandle),e.next=7,l.setDataNegoMaxCap(t.m_confHandle,n,r,a,o,i,s,c,f);case 7:d=e.sent,0!==d.result?E.info("setDataNegoMaxCap failed, result = ",d.result):E.info("setDataNegoMaxCap success, result = ",d.result),e.next=12;break;case 11:E.error("setDataNegoMaxCap failed, m_confhandle : "+t.m_confHandle);case 12:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c){return e.apply(this,arguments)}}(),this.docShareCompLoadSucCallback=function(e){if(null===t.shareService||!(t.shareService.loadDocSharePromise instanceof s.default))return void E.info("data conf service init error");t.shareService.loadDocSharePromise.timeout(8e3,-1),t.shareService.loadDocSharePromise.then(function(t){E.info("docShareCompLoadSucCallback loadDocSharePromise success ",t),0===t&&e&&"function"==typeof e&&e()})},this.startShare=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.shareService.startShare(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isInSendDocSharing=function(){return!!t.shareService&&t.shareService.isInSendDocSharing()},this.isInReceiveDocSharing=function(){return null!==t.shareService&&t.shareService.isInReceiveDocSharing()},this.isRecevingSharing=function(){return null!==t.shareService&&t.shareService.isRecevingSharing()},this.stopDocSharing=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=5;break}return E.info("docshare stopDocSharing"),e.next=4,t.shareService.stopDocShare();case 4:t.resetConfSharingType();case 5:case"end":return e.stop()}},e,t)})),this.handleShareEnd=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.shareService?t.shareService.handleShareEnd(n):E.info("handle share end: share service is null");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setNativeDataControlStatus=function(e){t.shareService&&t.shareService.setNativeDataControlStatus(e)},this.isConfDataShareLoadSuccess=function(){return null!==t.shareService&&!0===t.shareService.hasLoadDataShareComp},this.getSharingType=function(){return null===t.shareService?(E.info("get sharing type shareService error"),-1):t.shareService.sharingType},this.stopShareScreen=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=3;break}return e.next=3,t.shareService.stopShareScreen();case 3:case"end":return e.stop()}},e,t)})),this.isConfDocShareLoadSuccess=function(){return null!==t.shareService&&t.shareService.loadDocSharePromise instanceof s.default&&"resolved"===t.shareService.loadDocSharePromise.status},this.getDocShareFilePath=function(){return t.shareService?t.shareService.docSharingFilePath:""},this.openDocShareFile=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:!window.CLIENTCONFIG.ISMOBILE&&t.shareService&&(E.info("openDocShareFile called"),t.shareService.openDocShareFile(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isJoiningDataConf=function(){return t.dataConfStatus===w.DCONF_STATUS.JOINING},this.isSelfJoinedDataConf=function(){return t.dataConfStatus===w.DCONF_STATUS.IN_CONF},this.isLeavingDataConf=function(){return t.dataConfStatus===w.DCONF_STATUS.LEAVING},this.getDataConfMemberList=function(){return t.memberService.dataUserList},this.leaveMobileDataConf=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(g.DFConfig.isMobile){E.info("leaveMobileDataConf android start"),e&&1===window.sipCreateLeaveConf?window.sipCreateLeaveConf=2:window.sipCreateLeaveConf=0;var n=$getState().call.callStatus;E.info("callStatus = "+n),"CALL_CONNECTED"===n&&coreConf.isInReCall()&&(E.info("DataConfService.leaveMobileDataConf(): SCREEN_ORIENTATION_PORTRAIT"),window.changeScreenOrientation(constant.SCREEN_ORIENTATION.SCREEN_ORIENTATION_PORTRAIT)),window.showWebView(),window.leaveMobileDataConf(e),coreCommon.Observer.publish("onMobileLeaveDataConf",{}),t.dataConfStatus=w.DCONF_STATUS.LEFT}},this.stopAllShare=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.DFConfig.whiteBoardShareEnable||!t.isInWBSharing()){e.next=4;break}return E.info("leaveDataConf stopWBDoc"),e.next=4,t.stopWBDoc();case 4:if(!g.DFConfig.isDocShareEnabled()||!t.isInSendDocSharing()){e.next=8;break}return E.info("leaveDataConf stopDocSharing"),e.next=8,t.stopDocSharing();case 8:if(!t.isInScreenSharing()||t.isReceivingDataShare()){e.next=13;break}return E.info("before stopShareScreen"),e.next=12,t.stopShareScreen();case 12:E.info("after stopShareScreen");case 13:case"end":return e.stop()}},e,t)})),this.leaveDataConf=function(){var e=(0,l.default)(u.default.mark(function e(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("leave data conf"),t.leaveMobileDataConf(n),e.next=4,t.stopAllShare();case 4:return e.next=6,t.leaveconf();case 6:return e.next=8,t.releaseConfHandle();case 8:E.info("leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 10:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),this.beLeaveDataConf=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("beLeaveDataConf type "),t.leaveMobileDataConf(),e.next=4,t.releaseConfHandle();case 4:E.info("be leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 6:case"end":return e.stop()}},e,t)})),this.handleNativeNotifyResetRenderRect=function(e){E.info("handleNativeNotifyResetRenderRect start"),t.shareService&&t.shareService.handleNativeNotifyResetRenderRect(e)},this.setDataConfParams=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("setDataConfParams,data ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.setDataConfParams(n);case 6:a=e.sent,E.info("setDataConfParams,ret = ",a);case 8:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isSelfSharing=function(){return t.shareService&&t.shareService.shareOwnerUserId===t.m_user_id},this.onMobileDataConfCallback=function(e){try{if(E.info("onMobileDataConfCallback receive : ",e.type),"joinDataResult"===e.type)E.info("publish onMobileJoinDataConf"),coreCommon.Observer.publish("onMobileJoinDataConf",{});else if("shareMemberChange"===e.type)E.info("shareMemberChange, userid : "+handlePhoneNumber(e.userid)),coreCommon.Observer.publish("onMobileShareUserIdChange",e.userid,e.username);else if("dataSharingFlag"===e.type)E.info("dataSharingFlag, flag : "+e.status),coreCommon.Observer.publish("onMobileSharingFlagChange",e.status);else if("regetbigparams"===e.type){E.info("regetbigparams, addr : "+e.bestaddr),coreCommon.Observer.publish("onMobileSharingFlagChange",e.bestaddr);var n={param:{dst_addr:""}};n.param={},n.param.dst_addr=e.bestaddr,"stgaddr"===e.bestaddr&&(n.param.dst_addr=t.bigParam.conf_param.stg_server_address),t.handlePingCallback(n)}else"onMobilePingCallback"===e.type?(E.info("onMobilePingCallback"),g.DFConfig.stgAddresslist&&g.DFConfig.stgAddresslist.length>0?(E.info("onMobilePingCallback  Need2BuildStgTunnel"),coreCommon.Observer.publish("OnNeed2BuildStgTunnel",{})):(E.info("onMobilePingCallback stgaddrlist empty, joindata fail"),coreCommon.Observer.publish("onMobileJoinDataFail",{}))):"joinDataFail"===e.type?(E.info("mobile joinDataFail"),coreCommon.Observer.publish("onMobileJoinDataFail",{})):"closecall"===e.type?(E.info("mobile onDataConfClosed leaveConf"),t.isCascade&&coreConf.actionLeaveConf(),g.DFConfig.shouldSendServerInfoNotify()&&coreCommon.Observer.publish("OnMeetingHWreCallTimeOut","call end by server abnormal hangup")):"confMsgOnPhoneEnterInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneEnterInd",e):"confMsgOnPhoneLeaveInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneLeaveInd",e):"confMsgOnPhoneCallAudioStatusInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneCallAudioStatusInd",e):"confMsgOnPhoneUriInd"===e.type&&coreCommon.Observer.publish("confMsgOnPhoneUriInd",e)}catch(e){E.error("onMobileDataConfCallback exception : ",e)}},this.changeShareMonitorType=function(e){t.shareService?t.shareService.shareMonitorType=e:E.error("changeShareMonitorType ,service is null")},this.setShareAppHwnd=function(e){E.info("set share app hwnd:"+e),t.shareService?t.shareService.shareAppHwnd=e:E.error("set share app error.service is null")},this.getShareAppHwnd=function(){return E.info("get share app hwnd"),t.shareService?t.shareService.shareAppHwnd:0},this.getShareAudio=function(){return E.info("get share audio"),!!t.shareService&&t.shareService.shareAudio},this.setShareAudio=function(e){E.info("set share audio:",e),t.shareService&&(t.shareService.shareAudio=e)},this.setOldShareAppHwnd=function(e){E.info("set old app hwnd:"+e),t.shareService?t.shareService.oldShareAppHwnd=e:E.error("set old app error.service is null")},this.getOldShareAppHwnd=function(){return E.info("get old app hwnd"),t.shareService?t.shareService.oldShareAppHwnd:0},this.setTransparentwindow=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.setTransparentwindow(n,r);case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.isRecevingAppshare=function(){return!!t.shareService&&t.shareService.isRecevingAppshare},this.setDataShareVersion=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.setDataShareVersion(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.bfcpWinAttach=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.bfcpWinAttach(n));case 4:E.info("attach:share service is null");case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.bfcpWinDetach=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.bfcpWinDetach());case 4:E.info("detach:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.showNativeShareSelectWnd=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.showNativeShareSelectWnd());case 4:E.info("showNativeShareSelectWnd:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.m_confHandle=0,this.m_user_id=0,this.selfAudioNumber="",this.dataResourceUserNumber="",this.call_id=0,this.isCascade=!1,this.negoBandwidth=0,this.confInfo={acTmpToken:"",conf_id:"",conf_uri:"",data_random:"",dateconf_uri:"",group_uri:"",is_svc_conf:1,media_type:0,password:"",subject:"",svc_lable:[],svc_lable_count:0,vmr_id:"",getParamType:3},this.confInfo=null,this.bigParam={conf_param:{M:1,T:1,access_code:"",cm_address:"",conf_id:"",conf_name:"",crypt_key:"",data_codec_bw:0,data_codec_ver:"",host_key:"",part_secure_conf_num:"",participant_id:"",pin_code:"",sbc_server_address:"",server_data_cap:"",server_ip:"",site_id:"",site_url:"",stg_server_address:"",user_id:"",user_name:"",user_role:8,user_uri:"",option:0,bind_number:""},firewallmode:3,servertype:3,confparam_url:"",language:"",stgaddress:"",codec_param:{encodeVerType:30,maxBitRate:2048,maxDecodeSizeWidth:1920,maxDecodeSizeHeight:1080,maxDecodeFrameRate:30,maxEncodeSizeWidth:1920,maxEncodeSizeHeight:1080,maxEncodeFrameRate:30}},this.bigParam=null,window.onMobileDataConfCallback=this.onMobileDataConfCallback,this.dataConfStatus=w.DCONF_STATUS.NONE,this.bigParamRequestCount=0,this.myBindNo="",this.selfUserUri="",this.userBindNum="",this.shareService=null,this.memberService=new N.default,this.leftDataConfCallback=null}return(0,m.default)(e,[{key:"closeWBTab",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareService){e.next=3;break}return e.next=3,this.shareService.closeWBTab();case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentStatusUpdate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:return n=e.sent,r="<root><component>"+t+"</component><index>"+this.m_user_id+"</index><sender>"+this.m_user_id+"</sender><status>1</status><src>2</src></root>",E.info("componentStatusUpdate ",r),e.next=7,n.confUpdateParam(this.m_confHandle,"uc_component_status_update",r);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateMemberName",value:function(e){this.memberService&&(E.info("memberService updateMemberName"),this.memberService.updateMemberName(e))}},{key:"updateDataShareOwner",value:function(e){this.memberService&&this.memberService.updateDataShareOwner(e)}},{key:"handlePingCompleteResult",value:function(e){E.info("handlePingCompleteResult start")}},{key:"handleStarJoinConf",value:function(e){E.info("handleStarJoinConf")}}]),e}();t.default=y},1761:function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},1762:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"cutstr",value:function(e,t){var n=0,r=0,a=String();r=e.length;for(var o=0;o<r;o++){var i=e.charAt(o);if(n++,escape(i).length>4&&n++,a=a.concat(i),n>=t)return a=a.concat("...")}if(n<t)return e}}]),e}();t.default=c},1763:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i,s=n(155),c=r(s),u=n(3),f=r(u),l=n(69),d=r(l),p=n(1),h=r(p),m=n(2),v=r(m),g=n(4),C=r(g),S=n(5),w=r(S),_=n(1764),I=r(_),b=n(259),N=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(b),n(215)),E=n(261),y=n(592),T=coreLogger.getLogger("dataconf")("model"),O=(o=a=function(){function e(t,n){(0,C.default)(this,e),i.call(this),this.m_confHandle=t,this.callId=n,this.m_user_id=0,this.loadDocSharePromise=new PromiseObject,this.hasLoadDataShareComp=!1,this.isInRemoteControlling=!1,this.isInScreenShareAnnotation=!1,this.isUnderRemoteControlling=!1,this.remoteControlUserNum="",this.shareOwnerUserId="",this.m_component=0,this.isDataShareStarted=!1,this.isUsePrimarySize=!1,this.m_dspageid=0,this.m_dsdocid=0,this.m_pagewidth=0,this.m_pageheight=0,this.docSharingDocID=0,this.wbService=null,this.isRecevingAppshare=!1,this.docSharingFilePath="",this.bigwinRealRectLeft=0,this.bigwinRealRectRight=0,this.bigwinRealRectTop=0,this.bigwinRealRectBottom=0,this.sharingType=constant.ConfSharingType.None,this.isStoppingSharing=!1,this.memberService=null,this.hasCloseShareDataOperate=!1,this.shareAudio=!1,this.shareMonitorType=0,this.oldShareAppHwnd=0,this.shareAppHwnd=0,this.isSupportShareStrategy=!1}return(0,w.default)(e,[{key:"isSendingWBSharing",value:function(){return this.isInWBSharing()&&this.wbService.m_ownerUserid===this.m_user_id}},{key:"isRecevingWBSharing",value:function(){return this.isInWBSharing()&&this.wbService.m_ownerUserid!==this.m_user_id}},{key:"isRecevingDocSharing",value:function(){return this.isInDocSharing()&&this.docSharingDocID!==this.m_dsdocid}},{key:"isRecevingScreenSharing",value:function(){return this.isInScreenSharing()&&this.shareOwnerUserId!==this.m_user_id}},{key:"isSendScreenSharing",value:function(){return this.isInScreenSharing()&&this.shareOwnerUserId===this.m_user_id}},{key:"isRecevingSharing",value:function(){return this.isRecevingWBSharing()||this.isRecevingDocSharing()||this.isRecevingScreenSharing()}},{key:"closeWBTab",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(h.default.mark(function e(){var t;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:return t=e.sent,e.next=5,t.sendNotifyAllUsersCloseSharingTab(this.m_confHandle,this.m_user_id,25);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"BeStopedWBDoc",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(h.default.mark(function e(){var t,n,r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.wbService){e.next=13;break}if(t=this.wbService,!0!==t.m_isChairman){e.next=11;break}return n=t.m_docid,r=t.m_confHandle,this.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!1}),e.next=9,I.default.deleteWBDoc(this.confHandle,n);case 9:e.next=13;break;case 11:this.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!1});case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"dealInviteUserWBSharing",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.info("be invited to start WB share"),coreCommon.Observer.publish("OnDealInviteUserWBSharing");case 2:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),i=function(){var e=this;this.initShareService=(0,v.default)(h.default.mark(function t(){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.registerTupNotify();case 2:case"end":return t.stop()}},t,e)})),this.registerTupNotify=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("[share] registerTupNotify"),t.next=3,coreTup.getdataConfInstance();case 3:n=t.sent,n.setNotifyFunc(40001009,e.handleLoadComponentResult),n.setNotifyFunc(40001031,e.loadComponentReturn),n.setNotifyFunc(40002111,e.onAsOnScreenData),n.setNotifyFunc(40002166,e.onAsScreenDataToBfcpData),n.setNotifyFunc(40002112,e.onAsOnScreenSizeChange),n.setNotifyFunc(40002115,e.onAsOnScreenKeyFrameRecv),n.setNotifyFunc(40001215,e.handledevcapable),n.setNotifyFunc(40001008,e.handleUserMessageUpdateResult),n.setNotifyFunc(40002167,e.handleApplistResult),n.setNotifyFunc(40002201,e.handleDocShareDocNew),n.setNotifyFunc(40002206,e.handleDsCurrentPage),n.setNotifyFunc(40002801,e.handleWBOnNewDoc),n.setNotifyFunc(40002802,e.handleWBOnDeleteDoc),n.setNotifyFunc(40002805,e.handleWBOnCurrentPageInd),n.setNotifyFunc(40002806,e.handleWBOnCurrentPage),n.setNotifyFunc(40002205,e.handleDsCurrentPageInd),n.setNotifyFunc(40003e3,e.handleOperateTokenResult),n.setNotifyFunc(40002121,e.onAsOnSharingState),n.setNotifyFunc(40002122,e.onAsOnSharingSession),n.setNotifyFunc(40002162,e.handleDisplayInfoResult),n.setNotifyFunc(40002163,e.handleDecodeBfcpSuccessInDataConf),n.setNotifyFunc(40002151,e.handleSharingUserDefineMsg),n.setNotifyFunc(40002123,e.handlePrivilegeState),n.setNotifyFunc(40003001,e.handleDataConfUTEvent);case 28:case"end":return t.stop()}},t,e)})),this.onAsOnScreenData=function(t){return t.param.confHandle&&t.param.confHandle!==e.m_confHandle?void T.error("confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle):e.isDataShareStarted?void coreCommon.Observer.publish("OnScreenData",t):void T.info("data share has stoped")},this.onAsScreenDataToBfcpData=function(t){return t.param.confHandle&&t.param.confHandle!==e.m_confHandle?void T.error("onAsScreenDataToBfcpData confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle):e.isDataShareStarted?void coreCommon.Observer.publish("OnScreenDataToBfcpData",t):void T.info("onAsScreenDataToBfcpData share has stoped")},this.onAsOnScreenSizeChange=function(t){if(t.param.confHandle&&t.param.confHandle!==e.m_confHandle)return void T.error("confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle);coreCommon.Observer.publish("OnSharingScreenSizeChange",t)},this.onAsOnScreenKeyFrameRecv=function(t){e.setDataConfParams({keyframerecv:1}),coreCommon.Observer.publish("onReceivedScreenKeyFrame",t),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_DESKTOP_SHARE_FIRST_FRAME,extraTrackKey:null,resultParams:[],isTrackTimeCosts:!0})},this.handledevcapable=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=JSON.parse((0,d.default)(n)),void 0!==r.param.m_phone_user_name&&(a=r.param.m_phone_user_name,r.param.m_phone_user_name=handlePhoneNumber(a)),r.param.m_binding_nid&&(o=r.param.m_binding_nid,r.param.m_binding_nid=handlePhoneNumber(o)),r.param.m_nDeviceID&&(i=r.param.m_nDeviceID,r.param.m_nDeviceID=handlePhoneNumber(i)),r.param.m_uri&&(s=r.param.m_uri,r.param.m_uri=handlePhoneNumber(s)),T.info("handledevcapable,data = ",r);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleUserMessageUpdateResult=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(T.info("handleUserMessageUpdateResult start",n),!n.param||"uc_component_status_update"!==n.param.msg_name){t.next=19;break}if(r=new DOMParser,!(a=n.param.msg)){t.next=19;break}if(o=r.parseFromString(a,"text/xml"),i=parseInt(o.getElementsByTagName("status")[0].childNodes[0].nodeValue),s=parseInt(o.getElementsByTagName("component")[0].childNodes[0].nodeValue),T.info("handleUserMessageUpdateResult status: "+i+" component: "+s),0!==i||0!==s){t.next=12;break}return T.info("webclient send 00,ignore"),t.abrupt("return");case 12:return t.next=14,coreTup.getNativeWindowInstance();case 14:c=t.sent,c.updateComponentStatus(s,i),e.m_component=s,u={component:s,status:i},coreCommon.Observer.publish("updateComponentStatus",u);case 19:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleApplistResult=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("applistResult",n);case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDocShareDocNew=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:T.info("DocShare handleDocShareDocNew ",n),coreCommon.Observer.publish("onMacRecvWhiteBoardOrDoc",{type:2}),e.docSharingDocID!==n.param.value1&&e.isExistAnySharing()&&coreCommon.Observer.publish("onCloseAllSharing",{});case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.isExistAnySharing=function(){return!0===e.isInWBSharing()||e.isInDocSharing()||e.isInScreenSharing()},this.isInWBSharing=function(){return null!==e.wbService&&(e.wbService.m_docid>0&&e.wbService.m_pageid>0&&e.wbService.m_ownerUserid>0)},this.isInDocSharing=function(){return e.m_dsdocid>0&&e.m_dspageid>0},this.isInScreenSharing=function(){return e.shareOwnerUserId>0&&!0===e.isDataShareStarted},this.isInSendDocSharing=function(){return T.info("isInSendDocSharing docSharingDocID = ",e.docSharingDocID),0!==e.docSharingDocID&&e.docSharingDocID===e.m_dsdocid},this.isInReceiveDocSharing=function(){return 0===e.docSharingDocID&&0!==e.m_dsdocid},this.handleDsCurrentPageInd=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(E.DFConfig.isDocShareEnabled()){t.next=3;break}return T.info("handleDsCurrentPageInd doc share unenable"),t.abrupt("return");case 3:if(T.info("handleDsCurrentPageInd: ",n),e.m_component===y.IID_COMPONENT.DS){t.next=6;break}return t.abrupt("return");case 6:if(!n.param){t.next=14;break}return t.next=9,coreTup.getdataConfInstance();case 9:if(r=t.sent,0===n.param.value1||0===n.param.value2){t.next=13;break}return t.next=13,r.dsSetCurrentPage(e.m_confHandle,y.IID_COMPONENT.DS,n.param.value1,n.param.value2,0);case 13:0===n.param.value1&&(e.m_dsdocid=0,e.m_dspageid=0,a={docid:0,pageid:0},coreCommon.Observer.publish("onShowNativeDSPage",a));case 14:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDsCurrentPage=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(E.DFConfig.isDocShareEnabled()){t.next=3;break}return T.info("handleDsCurrentPage doc share unenable"),t.abrupt("return");case 3:return T.info("handleDsCurrentPage: ",n),t.next=6,coreTup.getNativeWindowInstance();case 6:r=t.sent,r.setDsCurrentPage(n.param.confHandle,n.param.value1,n.param.value2),e.m_dsdocid=n.param.value1,e.m_dspageid=n.param.value2,a={docid:n.param.value1,pageid:n.param.value2,issender:e.m_dsdocid===e.docSharingDocID},coreCommon.Observer.publish("onShowNativeDSPage",a);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnNewDoc=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.info("handleWBOnNewDoc ",n);case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnDeleteDoc=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnCurrentPageInd=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(T.info("handleWBOnCurrentPageInd ",n),!(n.param.value1>0&&n.param.value2>0)){t.next=4;break}return t.next=4,e.setWBLocalCurrentPageLocal(n);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setWBLocalCurrentPageLocal=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.wbService){t.next=6;break}return T.info("setWBLocalCurrentPageLocal wbService not null"),e.wbService.m_docid=n.param.value1,e.wbService.m_pageid=n.param.value2,t.next=6,e.wbService.setWBLocalCurrentPageLocal();case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnCurrentPage=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:T.info("handleWBOnCurrentPage ",n),null!==e.wbService&&(e.wbService.m_isChairman?coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!0}):coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!0}));case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.stopWBDoc=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.wbService){t.next=16;break}if(!0!==e.wbService.m_isChairman){t.next=12;break}return n=e.wbService.m_docid,r=e.wbService.m_confHandle,e.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!1}),t.next=8,e.requestWBToken(!1);case 8:return t.next=10,I.default.deleteWBDoc(e.m_confHandle,n);case 10:t.next=14;break;case 12:e.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!1});case 14:coreCommon.Observer.publish("OnScreenSharingStateChange",0),e.shareAudio=!1;case 16:case"end":return t.stop()}},t,e)})),this.requestWBToken=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("requestWBTok isAdd ",n),t.next=3,coreTup.getdataConfInstance();case 3:return r=t.sent,t.next=6,r.asSetOperateToken(e.m_confHandle,e.m_user_id,!0===n?constant.DATA_CONF_SHARE_OPERATE_TYPE.ADD:constant.DATA_CONF_SHARE_OPERATE_TYPE.DELETE,constant.DATA_CONF_SHARE_TOKEN_TYPE.WHITE_BOARD_SHARE);case 6:a=t.sent,T.info("requestWBTok ret ",a);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.advancedSetting=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o,i,s,c;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,!0!==n){t.next=12;break}return T.info("advancedSetting setShareAudio true"),t.next=7,a.setShareAudio(e.m_confHandle,1);case 7:o=t.sent,e.shareAudio=!0,T.info("advancedSetting setShareAudio result:",(0,d.default)(o)),t.next=18;break;case 12:return T.info("advancedSetting setShareAudio false"),t.next=15,a.setShareAudio(e.m_confHandle,0);case 15:i=t.sent,e.shareAudio=!1,T.info("advancedSetting setShareAudio result:",(0,d.default)(i));case 18:if(1!==r){t.next=26;break}return T.info("advancedSetting setShareStrategy 1"),t.next=22,a.setShareStrategy(e.m_confHandle,1);case 22:s=t.sent,T.info("advancedSetting setShareStrategy result:",(0,d.default)(s)),t.next=31;break;case 26:return T.info("advancedSetting setShareStrategy 0"),t.next=29,a.setShareStrategy(e.m_confHandle,0);case 29:c=t.sent,T.info("advancedSetting setShareStrategy result:",(0,d.default)(c));case 31:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.componentStatusUpdate=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,a="<root><component>"+n+"</component><index>"+e.m_user_id+"</index><sender>"+e.m_user_id+"</sender><status>1</status><src>2</src></root>",T.info("componentStatusUpdate ",a),t.next=7,r.confUpdateParam(e.m_confHandle,"uc_component_status_update",a);case 7:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.resetConfSharingType=function(){e.sharingType=constant.ConfSharingType.None,e.docSharingFilePath=""},this.setConfSharingType=function(t,n){switch(T.info("setConfSharingType share type: "+t+"  file path: "+n),e.docSharingFilePath="",t){case 0:e.sharingType=constant.ConfSharingType.Program;break;case 1:e.sharingType=constant.ConfSharingType.Document,e.docSharingFilePath=n;break;case 2:e.sharingType=constant.ConfSharingType.Desktop;break;default:e.sharingType=constant.ConfSharingType.None}},this.getStreamInfo=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,r=null,!(e.m_user_id>0)){t.next=10;break}return t.next=7,n.getStreamInfo(e.m_confHandle);case 7:r=t.sent,t.next=11;break;case 10:T.error("getStreamInfo failed, confHandle : "+e.m_confHandle);case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}},t,e)})),this.asStart=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info(" asStart"),t.next=3,coreTup.getdataConfInstance();case 3:r=t.sent,r.asSetSharetype(e.m_confHandle,0),window.CLIENTCONFIG.ISBIGWIN&&e.bigwinRealRectBottom>0?(T.info("setDataShareRealRect start11"),r.setDataShareRealRect(e.m_confHandle,e.bigwinRealRectLeft,e.bigwinRealRectTop,e.bigwinRealRectRight,e.bigwinRealRectBottom)):T.info("setDataShareRealRect start11 error, bottom : "+e.bigwinRealRectBottom),e.setDataShareScreenGDIEXType(),r.setDataCodecVersion(e.m_confHandle,E.DFConfig.dataCodeccVersion),r.asStart(e.m_confHandle),coreCommon.Observer.publish("OnSharingSessionStart",n);case 10:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataShareScreenGDIEXType=(0,v.default)(h.default.mark(function t(){var n,r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.m_confHandle>0)){t.next=10;break}return t.next=3,coreTup.getdataConfInstance();case 3:return n=t.sent,r=E.DFConfig.captureType(),T.info("setDataShareScreenGDIEXType,type = "+r),t.next=8,n.setDataShareScreenCaptureType(e.m_confHandle,r);case 8:a=t.sent,T.info("setDataShareScreenGDIType,ret = ",a);case 10:case"end":return t.stop()}},t,e)})),this.setDataShareScreenPicQuality=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.m_confHandle>0)){t.next=6;break}return T.info("setDataShareScreenPicQuality success, val : "+n),t.next=4,coreTup.getdataConfInstance();case 4:r=t.sent,r.setDataShareScreenPicQuality(e.m_confHandle,n);case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.startShare=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=36;break}return t.next=6,e.componentStatusUpdate(constant.ConfSharingType.Desktop);case 6:return t.next=8,coreTup.getCallInstance();case 8:return a=t.sent,a.setStgTunnel(e.callId,1),e.setCloseShareDataOperate(!1),T.info("startShareScreen start, confHandle : "+e.m_confHandle+",m_user_id:"+e.m_user_id),t.next=14,r.setDataCodecVersion(e.m_confHandle,E.DFConfig.dataCodeccVersion);case 14:return t.next=16,r.asSetOperateToken(e.m_confHandle,e.m_user_id,constant.DATA_CONF_SHARE_OPERATE_TYPE.ADD,constant.DATA_CONF_SHARE_TOKEN_TYPE.SCREEN_SHARE);case 16:if(o=t.sent,T.info("asSetOperate done"),!o||!o.param||void 0===o.param.result){t.next=32;break}if(0!==o.param.result){t.next=23;break}T.info("asSetOperate sucess"),t.next=30;break;case 23:if(103!==o.param.result){t.next=29;break}return t.next=26,r.asSetOwner(1,e.m_confHandle,e.m_user_id);case 26:T.info("asSetOwner ret done"),t.next=30;break;case 29:T.info("asSetOperate result"+o.param.result);case 30:t.next=33;break;case 32:T.error("asSetOperate fail "+(0,d.default)(o));case 33:30===n?r.setDataShareScreenPicQuality(e.m_confHandle,n):r.setDataShareScreenCaptureType(e.m_confHandle,E.DFConfig.captureType()),t.next=38;break;case 36:coreCommon.Observer.publish("OnStartShareFailed"),T.error("startShareScreen failed, confHandle : "+e.m_confHandle+",m_user_id:"+e.m_user_id);case 38:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.stopShareScreen=(0,v.default)(h.default.mark(function t(){var n,r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:T.info("stopShareScreen isStoppingSharing = "+e.isStoppingSharing),n=0;case 2:if(!(e.isStoppingSharing&&n<10)){t.next=8;break}return t.next=5,sleep(300);case 5:n++,t.next=2;break;case 8:return e.isStoppingSharing=!0,t.next=11,coreTup.getdataConfInstance();case 11:if(r=t.sent,!(e.m_user_id>0)){t.next=48;break}if(T.info("stopShareScreen start, confHandle : "+e.m_confHandle),!0===window.isByShareState){t.next=21;break}return t.next=17,r.asStop(e.m_confHandle);case 17:return t.next=19,e.stopDocShare();case 19:t.next=23;break;case 21:window.isByShareState=!1,T.info("set by share state false");case 23:return t.next=25,r.asSetOperateToken(e.m_confHandle,e.m_user_id,constant.DATA_CONF_SHARE_OPERATE_TYPE.DELETE,constant.DATA_CONF_SHARE_TOKEN_TYPE.SCREEN_SHARE);case 25:if(a=t.sent,T.info("release asSetOperateTok done"),!a||!a.param){t.next=41;break}if(0!==a.param.result){t.next=32;break}T.error("asSetOperateTok success "),t.next=39;break;case 32:if(103!==a.param.result){t.next=38;break}return t.next=35,r.asSetOwner(0,e.m_confHandle,e.m_user_id);case 35:T.info("release asSetOwner ret done"),t.next=39;break;case 38:T.error("asSetOperateTok err ",a);case 39:t.next=42;break;case 41:T.error("asSetOperateTok fail ",a);case 42:return t.next=44,r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id);case 44:T.info("stopShareScreen operate over"),coreCommon.Observer.publish("onStopShareFinished"),t.next=50;break;case 48:window.isByShareState=!1,T.error("stopShareScreen failed, confHandle : "+e.m_confHandle);case 50:e.isStoppingSharing=!1,e.shareAudio=!1;case 52:case"end":return t.stop()}},t,e)})),this.setShareType=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return T.info("setShareType start, confHandle : "+e.m_confHandle+" type: "+n),t.next=7,r.asSetSharetype(e.m_confHandle,n);case 7:a=t.sent,0!==a.param.result?T.info("setShareType failed, result = ",a.param.result):(T.info("setShareType success, result = ",a.param.result),e.shareMonitorType=n),t.next=12;break;case 11:T.error("setShareType failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setSharingDisplay=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return T.info("setSharingDisplay, confHandle, "+e.m_confHandle+", display index = "+n),t.next=7,r.asSetSharingDisplay(e.m_confHandle,n);case 7:a=t.sent,0!==a.param.result?T.info("setSharingDisplay failed, result = ",a.param.result):T.info("setSharingDisplay success, result = ",a.param.result),t.next=12;break;case 11:T.error("setSharingDisplay failed, confHandle : "+e.m_confHandle+", display index = "+n);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setTransparentwindow=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return T.info("setTransparentwindow start, m_congetDisplayInfofhandle : "+e.m_confHandle),t.next=7,a.asSetTransparentwindow(e.m_confHandle,n,r);case 7:o=t.sent,0!==o.param.result?T.info("setTransparentwindow failed, res = ",o.param.result):T.info("setTransparentwindow success"),t.next=12;break;case 11:T.error("setTransparentwindow failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.setAppShareScreenParam=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,!(e.m_user_id>0)){t.next=11;break}return T.info("setAppShareScreenParam start, confHandle : "+e.m_confHandle),t.next=7,a.setAppShareScreenParam(e.m_confHandle,n,r);case 7:o=t.sent,0!==o.param.result?T.info("setAppShareScreenParam failed, result = ",o.param.result):T.info("setAppShareScreenParam success, result = ",o.param.result),t.next=12;break;case 11:T.error("setAppShareScreenParam failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.setDataShareVersion=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return T.info("setDataShareVersion, confHandle : "+e.m_confHandle),t.next=7,r.setDataShareVersion(e.m_confHandle,n);case 7:a=t.sent,0!==a.param.result?T.info("setDataShareVersion failed, result = ",a.param.result):T.info("setDataShareVersion success, result = ",a.param.result),t.next=12;break;case 11:T.error("setDataShareVersion failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.cancelSharingapp=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,T.info("cancelSharingapp start, confHandle : "+e.m_confHandle+",appwnd:"+n),t.next=6,r.asSetSharingapp(e.m_confHandle,n,0);case 6:a=t.sent,0!==a.param.result?T.info("cancelSharingapp failed, result = ",a.param.result):T.info("cancelSharingapp success, result = ",a.param.result);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setSharingapp=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,T.info("startShareScreen start, confHandle : "+e.m_confHandle+",appwnd:"+n),t.next=6,coreTup.getNativeWindowInstance();case 6:return a=t.sent,t.next=9,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:y.NATIVE_DATA_PARAMTYPE.SET_APP_BG_COLOR});case 9:return t.next=11,r.asSetSharingapp(e.m_confHandle,n,1);case 11:o=t.sent,0!==o.param.result?T.info("setSharingapp failed, result = ",o.param.result):T.info("setSharingapp success, result = ",o.param.result);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setStart=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,T.info("setStart start, confHandle : "+e.m_confHandle),e.setDataShareScreenGDIEXType(),t.next=7,n.asStart(e.m_confHandle);case 7:r=t.sent,0!==r.param.result?T.info("setStart failed, result = ",r.param.result):T.info("setStart success, result = ",r.param.result);case 9:case"end":return t.stop()}},t,e)})),this.setDataConfShareRealRect=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:n=t.sent,e.m_user_id>0&&(T.info("setDataConfShareRealRect, confHandle : "+e.m_confHandle),window.CLIENTCONFIG.ISBIGWIN&&e.bigwinRealRectBottom>0?(T.info("setDataConfShareRealRect start11"),n.setDataShareRealRect(e.m_confHandle,e.bigwinRealRectLeft,e.bigwinRealRectTop,e.bigwinRealRectRight,e.bigwinRealRectBottom)):T.info("setDataConfShareRealRect start11 error, bottom : "+e.bigwinRealRectBottom));case 4:case"end":return t.stop()}},t,e)})),this.handleOperateTokenResult=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u,l;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(T.info("[BOM][debug] data: ",n),2===n.param.msg_type&&1===n.param.token_type&&4294967293===n.param.user_id?(r={param:{user_alt_uri:n.param.user_id,user_alt_id:n.param.user_id,user_name:"BFCP_USER"}},e.memberService.addMember(r,!1),$dispatch(coreUi.changeShareCapShowNameTips(!1))):3===n.param.msg_type&&1===n.param.token_type&&4294967293===n.param.user_id?(a={param:{user_alt_id:n.param.user_id}},$dispatch(coreUi.changeShareCapShowNameTips(!0))):2===n.param.msg_type&&4294967293!==n.param.user_id&&$dispatch(coreUi.changeShareCapShowNameTips(!0)),T.info("[BOM} isShowNameTips = "+$getState().conf.isShowNameTips),1!==n.param.token_type||1!==n.param.msg_type||0===n.param.result){t.next=8;break}coreCommon.Observer.publish("onRequestOperateTokenFail"),T.info("request data tok failed, stop share"),t.next=70;break;case 8:if(0!==n.param.token_type||2!==n.param.msg_type||0!==n.param.user_type){t.next=14;break}T.info("recv bfcp data from dataConf, callid: ",e.callId),coreCommon.Observer.publish("BFCPDecodeSuc",e.callId,!0),e.handleDataToBfcpStart(),t.next=70;break;case 14:if(0!==n.param.token_type||3!==n.param.msg_type||0!==n.param.user_type){t.next=19;break}coreCommon.Observer.publish("BFCPDataStopRec",!0),e.handleDataToBfcpStop(),t.next=70;break;case 19:if(2!==n.param.token_type){t.next=70;break}if(1!==n.param.msg_type){t.next=24;break}0===n.param.result?(T.info("whiteboard tok request success"),e.createWBNewDocAndPage()):T.info("whiteboard tok request failed"),t.next=70;break;case 24:if(2!==n.param.msg_type||0!==n.param.result){t.next=59;break}if(!(n.param.user_id>0)){t.next=56;break}return T.info("whiteboard tok owner flag, userid :",n.param.user_id),t.next=29,e.stopDocShare();case 29:if(!e.isInScreenSharing()){t.next=36;break}return T.info("stop prev share when recv WB token"),o={},o.param={},o.param.value2=0,t.next=36,e.screenDataShareEnded(o);case 36:if(null!==e.wbService){t.next=48;break}if(coreCommon.Observer.publish("onDataSharingStateChanged",!0),n.param.user_id!==e.m_user_id){t.next=43;break}return t.next=41,e.createWBNewDocAndPage();case 41:t.next=48;break;case 43:T.info("whiteboard receive"),coreCommon.Observer.publish("onReceiveWhiteBoardShare"),e.wbService=new I.default,e.wbService.m_confHandle=e.m_confHandle,e.wbService.m_isChairman=!1;case 48:null!==e.wbService&&(e.wbService.m_ownerUserid=n.param.user_id,T.info("wbService m_ownerUserid ",e.wbService.m_ownerUserid)),i=null!==e.wbService?e.memberService.getMemberNameByUserId(e.wbService.m_ownerUserid):"",null!==e.wbService&&(s=e.memberService.getBindnoByUserid(e.wbService.m_ownerUserid),$dispatch(coreUi.changeSharePersonNum(s)),$dispatch(coreUi.changeSharePersonName(i))),coreCommon.Observer.publish("onMacRecvWhiteBoardOrDoc",{type:y.IID_COMPONENT.WB,name:i}),coreCommon.dispatchModuleEvent("pluginWhiteBoardSharingStateChangedNotify",!0),f.default.resolve().then((0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=null!==e.wbService?e.memberService.getBindnoByUserid(e.wbService.m_ownerUserid):"")){t.next=7;break}return t.next=5,coreContact.queryUserInfoByKeyWord({keyWord:n});case 5:r=t.sent,coreCommon.dispatchModuleEvent("pluginDataSharingPersonChangedNotify",{sharerName:i,shareAccount:r.show_account});case 7:case"end":return t.stop()}},t,e)}))),t.next=57;break;case 56:T.info("whiteboard tok owner flag fail,userid==0");case 57:t.next=70;break;case 59:if(3!==n.param.msg_type){t.next=70;break}if(T.info("whiteboard tok release "),null===e.wbService){t.next=70;break}return coreCommon.dispatchModuleEvent("pluginWhiteBoardSharingStateChangedNotify",!1),t.next=65,e.BeStopedWBDoc();case 65:coreCommon.Observer.publish("onDataSharingStateChanged",!1),$dispatch(coreUi.changeSharePersonNum("")),$dispatch(coreUi.changeSharePersonName("")),c=$getState().conf,u=c.svcViewMode,l=c.maxSizeForPage,u===constant.SVC_VIEW_MODE.DIVIDE_MODE&&coreCommon.isWin()&&l!==N.SvcAtdManager.getMaxSizeForPage(u)&&($dispatch(coreUi.changeMaxSizeForPage(N.SvcAtdManager.getMaxSizeForPage(u))),N.SvcAtdManager.RedrawVideoMain());case 70:T.info("receive operate result = "+n.param.result);case 71:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.createWBNewDocAndPage=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("createWBNewDocAndPage start"),t.next=3,e.prepareWBSharing();case 3:return t.next=5,new I.default;case 5:return e.wbService=t.sent,t.next=8,e.wbService.createWBNewDocAndPage(e.m_confHandle);case 8:return n=t.sent,!1===n&&(e.wbService=null),t.abrupt("return",n);case 11:case"end":return t.stop()}},t,e)})),this.prepareWBSharing=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,r="<LoadedCom><LoadedCom>512</LoadedCom></LoadedCom>",t.next=6,n.confUpdateParam(e.m_confHandle,"Param_UpdateLoadedCom",r);case 6:return t.next=8,e.componentStatusUpdate(constant.COMPONENT_IID.IID_COMPONENT_WB);case 8:case"end":return t.stop()}},t,e)})),this.prepareDocSharing=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,r="<LoadedCom><LoadedCom>1</LoadedCom></LoadedCom>",t.next=6,n.confUpdateParam(e.m_confHandle,"Param_UpdateLoadedCom",r);case 6:return t.next=8,e.componentStatusUpdate(constant.COMPONENT_IID.IID_COMPONENT_DS);case 8:case"end":return t.stop()}},t,e)})),this.setDocShareCurrentPage=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a){var o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n<0||r<0)){t.next=3;break}return T.info("DocShare set cur page param error!"),t.abrupt("return");case 3:return t.next=5,coreTup.getdataConfInstance();case 5:return o=t.sent,t.next=8,o.docShareGetPageIdByPageNo(e.m_confHandle,n,r);case 8:return i=t.sent,t.next=11,o.docShareSetCurPage(e.m_confHandle,n,i.param.pageNo,a?1:0);case 11:s=t.sent,T.info("tup_conf_ds_set_current_page res : ",s);case 13:case"end":return t.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.stopDocShare=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(T.info("stopDocShare start "),!(e.m_dsdocid>0)){t.next=16;break}if(!e.isInSendDocSharing()){t.next=11;break}return T.info("stopDocShare sender docshare"),t.next=6,coreTup.getdataConfInstance();case 6:return n=t.sent,t.next=9,n.docShareStop(e.m_confHandle,e.docSharingDocID);case 9:t.next=12;break;case 11:T.info("stopDocShare receiver docshare");case 12:e.docSharingDocID=0,e.m_dsdocid=0,r={docid:0,pageid:0},coreCommon.Observer.publish("onShowNativeDSPage",r);case 16:T.info("stopDocShare end");case 17:case"end":return t.stop()}},t,e)})),this.onAsOnSharingSession=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.param.confHandle||n.param.confHandle===e.m_confHandle){t.next=3;break}return T.error("confhandle is diff,old = "+e.m_confHandle+",new = "+n.param.confHandle),t.abrupt("return");case 3:if(T.info("onAsOnSharing[Session] , data : ",desensitive(n)),T.info("[BOM]onAsOnSharing[Session] this.m_user_id = "+e.m_user_id+", data.param.user_id = "+n.param.user_id),!n.param.user_id){t.next=41;break}return t.next=8,coreTup.getNativeWindowInstance();case 8:r=t.sent,r.updateComponentStatus(2,1),a=e.memberService.dataUserList,o="",i=0;case 13:if(!(i<a.length)){t.next=23;break}if(!a[i].user_id||a[i].user_id!==n.param.user_id){t.next=20;break}return o=a[i].user_num,s=n.param.user_id===e.m_user_id,e.shareOwnerUserId=n.param.user_id,coreCommon.Observer.publish("OnShareOwnerChange",{userNum:o,isSelf:s}),t.abrupt("break",23);case 20:i++,t.next=13;break;case 23:if(n.param.user_id!==e.m_user_id){t.next=39;break}if(!(e.shareAppHwnd>0)){t.next=32;break}T.info("onAsOnSharing[Session], setShareType and getApplist"),e.shareMonitorType=1,e.setShareType(1),e.getDisplayInfo(),e.getApplist(),t.next=37;break;case 32:return e.shareMonitorType=0,e.setShareType(0),e.getDisplayInfo(),t.next=37,e.asStart(n);case 37:t.next=41;break;case 39:coreCommon.Observer.publish("ChangeFirstActiveShareApp",!0),T.info("onAsOnSharing[Session] asstart fail");case 41:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.onAsOnSharingState=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.param.confHandle||n.param.confHandle===e.m_confHandle){t.next=3;break}return T.error("confhandle is diff,old = "+e.m_confHandle+",new = "+n.param.confHandle),t.abrupt("return");case 3:if(T.info("[BOM]onAsOnSharingState , data : ",n),r=1===n.param.annoForbidden,a=1===n.param.controlForbidden,0===E.DFConfig.dataCodeccVersion&&(a=!1,r=!1),$dispatch(coreUi.changeShareCapAnnoForbidden(r)),$dispatch(coreUi.changeShareCapControlForbidden(a)),1!==n.param.value2){t.next=46;break}if(T.info("[BOM]onAsOnSharingState 他人发起屏幕共享收到的通知"),T.info("isDataSharing false 7"),e.isRecevingAppshare=1===n.param.value1,0===n.param.value1?(T.info("[BOM]onAsOnSharingState 屏幕共享"),coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!1,type:"screenShare",state:1}),o=coreConf.getCurrentConfId(),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DESKTOP_SHARE_FIRST_FRAME,extraTrackKey:null,params:[o]})):1===n.param.value1&&(T.info("[BOM]onAsOnSharingState 程序共享"),coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!1,type:"docShare",state:1})),window.isDataSharing=!1,n.param.annostate!==y.IID_COMPONENT.WB||!0!==e.isDataShareStarted){t.next=22;break}return T.info("onAsOnSharingState annostate, receive annotation"),e.isInScreenShareAnnotation=!0,E.DFConfig.sendAnnotationEnable&&e.setDataConfParamsInQueue({annostate:1}),t.abrupt("return");case 22:if(0!==n.param.annostate||!0!==e.isDataShareStarted){t.next=27;break}return T.info("onAsOnSharingState annostate,annotation stop"),e.isInScreenShareAnnotation=!1,E.DFConfig.sendAnnotationEnable&&e.setDataConfParamsInQueue({annostate:0}),t.abrupt("return");case 27:return e.isDataShareStarted=!0,T.info("onAsOnSharingState , receive datashare"),t.next=31,coreTup.getCallInstance();case 31:if(i=t.sent,i.setStgTunnel(e.callId,2),null===e.wbService){t.next=36;break}return t.next=36,e.stopWBDoc();case 36:if(!e.isInSendDocSharing()&&!e.isInReceiveDocSharing()){t.next=40;break}return t.next=39,e.stopDocShare();case 39:e.resetConfSharingType();case 40:coreCommon.Observer.publish("OnShareingStart",n),coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),s=e.memberService.getMemberNameByUserId(e.shareOwnerUserId),coreCommon.Observer.publish("OnRemoteScreenShare",s),t.next=71;break;case 46:if(2!==n.param.value2){t.next=70;break}if(T.info("[BOM]onAsOnSharingState 本人发起桌面共享和程序共享"),0===n.param.value1?coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!0,type:"screenShare",state:1}):1===n.param.value1&&coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!0,type:"docShare",state:1}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),T.info("onAsOnSharingState , start datashare"),n.param.annostate!==y.IID_COMPONENT.WB||!0!==e.isDataShareStarted){t.next=58;break}return T.info("onAsOnSharingState , self receive annotation"),e.isInScreenShareAnnotation=!0,E.DFConfig.sendAnnotationEnable&&e.setDataConfParamsInQueue({annostate:1}),t.abrupt("return");case 58:if(0!==n.param.annostate||!0!==e.isDataShareStarted){t.next=63;break}return T.info("onAsOnSharingState , self stop annotation"),e.isInScreenShareAnnotation=!1,E.DFConfig.sendAnnotationEnable&&e.setDataConfParamsInQueue({annostate:0}),t.abrupt("return");case 63:e.isDataShareStarted=!0,T.info("isDataSharing true 4"),window.isDataSharing=!0,coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),coreCommon.Observer.publish("OnSshareScreenOper",0),t.next=71;break;case 70:0===n.param.value2?e.isInScreenSharing()?(T.info("[BOM]onAsOnSharingState screenDataShareEnded"),e.screenDataShareEnded(n)):T.info("onAsOnSharingState prepare stop,but not isInScreenSharing,isDataShareStarted:"+e.isDataShareStarted):T.error("sharing state error");case 71:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataConfParamsInQueue=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=coreCommon.TaskQueue.getInstance(E.DFConfig.moduleName),a=coreCommon.TaskOptions.defaultOptions(),a.proxy=e,r.addTask(e.setDataConfParams,a,null,n);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.screenDataShareEnded=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("onAsOnSharingState , stop datashare"),n.isself=e.m_user_id===e.shareOwnerUserId,e.isDataShareStarted=!1,e.isRecevingAppshare=!1,e.shareOwnerUserId="",window.isByShareState=!0,e.isInScreenShareAnnotation=!1,T.info("set by share state true"),coreCommon.Observer.publish("OnShareingEnd",n),r={isself:n.isself,type:0===n.param.value1?"screenShare":"docShare",state:0},coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",r),coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),t.next=14,coreTup.getdataConfInstance();case 14:a=t.sent,T.info("start notify all user close sharing tab"),a.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id),T.info("notify all user close sharing tab finished");case 18:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDataToBfcpStart=(0,v.default)(h.default.mark(function t(){var n,r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!E.DFConfig.supportDataToBfcp){t.next=15;break}return T.info("data to bfcp info"),n=!1,r="",coreCommon.Observer.publish("OnShareOwnerChange",{userNum:r,isSelf:n}),coreCommon.Observer.publish("ChangeFirstActiveShareApp",!0),t.next=8,coreTup.getCallInstance();case 8:a=t.sent,a.setStgTunnel(e.callId,2),e.isDataShareStarted=!0,coreCommon.Observer.publish("OnShareingStart","to bfcp"),coreCommon.Observer.publish("OnScreenSharingStateChange",1),o={param:{width:1920,height:1080}},coreCommon.Observer.publish("OnSharingScreenSizeChange",o);case 15:case"end":return t.stop()}},t,e)})),this.handleDataToBfcpStop=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!E.DFConfig.supportDataToBfcp){t.next=11;break}return T.info("bfcp toke release"),n={isself:!1},e.isDataShareStarted=!1,e.shareOwnerUserId="",coreCommon.Observer.publish("OnShareingEnd",n),coreCommon.Observer.publish("OnScreenSharingStateChange",0),t.next=9,coreTup.getdataConfInstance();case 9:r=t.sent,r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id);case 11:case"end":return t.stop()}},t,e)})),this.handleShareEnd=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(r=n===e.shareOwnerUserId)){t.next=4;break}return T.info("user not sharing, ignore share end request. user id = "+n),t.abrupt("return");case 4:a={isself:n===e.m_user_id,param:{value2:0}},e.isDataShareStarted=!1,e.shareOwnerUserId="",coreCommon.Observer.publish("OnShareingEnd",a),coreCommon.Observer.publish("OnScreenSharingStateChange",a.param.value2);case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleLoadComponentResult=function(e){0===e.param.result&&T.info("send load component success")},this.loadComponentReturn=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isSupportShareStrategy=!1,T.info("[BOM][share] loadComponentReturn "+(0,d.default)(n)),n.param.value2!==y.IID_COMPONENT.DS){t.next=11;break}return t.next=5,coreTup.getdataConfInstance();case 5:r=t.sent,r.dsSetBgcolor(4294967295,n.param.confHandle,1),r.dsSetDispmode(n.param.confHandle,1,0),r.dsSetCanvasSize(n.param.confHandle,1,1,{cx:1682,cy:961}),t.next=39;break;case 11:if(n.param.value2!==y.IID_COMPONENT.WB){t.next=29;break}return t.next=14,coreTup.getNativeWindowInstance();case 14:return a=t.sent,t.next=17,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:2});case 17:return t.next=19,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:5});case 19:return t.next=21,coreTup.getdataConfInstance();case 21:return o=t.sent,o.dsSetDispmode(n.param.confHandle,512,0),t.next=25,e.regCustomerType(e.m_confHandle,y.IID_COMPONENT.AS);case 25:return t.next=27,e.initAnnotationResource(e.m_confHandle,y.IID_COMPONENT.AS,window.VIDEO_DEFAULT_IMG);case 27:t.next=39;break;case 29:if(n.param.value2!==y.IID_COMPONENT.AS){t.next=39;break}return e.hasLoadDataShareComp=!0,e.setDataConfParams({dataConfHandle:e.m_confHandle}),T.info("datashare component load success"),coreCommon.Observer.publish("OnJoinDataConf",n),t.next=36,coreTup.getdataConfInstance();case 36:i=t.sent,i.setDynaicAnnoBackGroundParam(e.m_confHandle),2===n.param.data&&(T.info("isSupportShareStrategy true"),e.isSupportShareStrategy=!0,e.setDataConfParamsInQueue({isSupportShareStrategy:!0}));case 39:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.openDocShareFile=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof n&&""!==n){t.next=3;break}return T.info("DocShare openDocShareFile param error , ",void 0===n?"undefined":(0,c.default)(n),",filepath:",n),t.abrupt("return");case 3:return t.next=5,e.prepareDocSharing();case 5:return r=t.sent,T.info("DocShare openDocShareFile ret1 =",r),t.next=9,e.startDocSharing(n);case 9:return a=t.sent,T.info("DocShare openDocShareFile ret2 =",a),t.next=13,e.setDocShareCurrentPage(e.docSharingDocID,0,!0);case 13:o=t.sent,T.info("DocShare openDocShareFile ret3 =",o),e.isInScreenSharing()&&(T.info("sendStopScreenShareUserDefineMsg"),e.sendStopScreenShareUserDefineMsg()),e.isInWBSharing()&&(T.info("sendStopWhiteBoardUserDefineMsg"),e.sendStopWhiteBoardUserDefineMsg());case 17:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.startDocSharing=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof n&&""!==n){t.next=3;break}return T.info("open doc share file param error!"),t.abrupt("return");case 3:return t.next=5,coreTup.getdataConfInstance();case 5:return r=t.sent,t.next=8,r.docShareOpenFile(e.m_confHandle,n);case 8:a=t.sent,T.info("tup_conf_ds_open res : ",a),coreCommon.Observer.publish("docShareOpenResultNotify",a.param.result),e.docSharingDocID=a.param.docId,T.info(" set docSharingDocID = ",e.docSharingDocID);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDataConfUTEvent=function(e){T.info("handleDataConfUTEvent"),T.info("DataConfUTEvent: "+(0,d.default)(e));var t=e.param.track_log.split("||");coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_DATA_CONF_EVENT,params:[t[0],t[1],t[2]]})},this.handlePrivilegeState=function(t){if(T.info("handlePrivilegeState start ",t),t.param.confHandle&&t.param.confHandle!==e.m_confHandle)return void T.error("confhandle is error,old = "+e.m_confHandle+",new = "+t.param.confHandle);if(t.param.user_id&&1===t.param.value1){var n=function(){var n=e.memberService.dataUserList;e:for(var r=0;r<n.length;r++){var a=function(r){if(n[r].user_id&&n[r].user_num&&n[r].user_id===t.param.user_id){var a=e.memberService.getBindnoByUserid(e.shareOwnerUserId);return T.info("shareOwnerUserId = ",e.shareOwnerUserId),(T.info("my user id = ",e.m_user_id),T.info("currentDataMem[i].user_id = ",n[r].user_id),1===t.param.value2?f.default.resolve().then((0,v.default)(h.default.mark(function t(){var a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreContact.queryUserInfoByKeyWord({keyWord:n[r].user_num});case 2:a=e.sent,coreCommon.dispatchModuleEvent("pluginGetRemoteControlPrivilegeNotify",{userName:a.name,userAccount:a.show_account});case 4:case"end":return e.stop()}},t,e)}))):0===t.param.value2&&f.default.resolve().then((0,v.default)(h.default.mark(function t(){var a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreContact.queryUserInfoByKeyWord({keyWord:n[r].user_num});case 2:a=e.sent,coreCommon.dispatchModuleEvent("pluginDelRemoteControlPrivilegeNotify",{userName:a.name,userAccount:a.show_account});case 4:case"end":return e.stop()}},t,e)}))),e.m_user_id===t.param.user_id)?(0===t.param.value2?(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="",T.info("handlePrivilegeState getRemoteControlPrivilege1")):1===t.param.value2&&(coreCommon.Observer.publish("OnRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!0,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=n[r].user_num,T.info("handlePrivilegeState getRemoteControlPrivilege2 ")),{v:{v:void 0}}):e.shareOwnerUserId!==e.m_user_id?(!0===e.isInRemoteControlling&&1===t.param.value2&&(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=""),4===t.param.value2&&(coreCommon.Observer.publish("OnBeRejectedRemoteControlPrivilege",{usernum:n[r].user_num}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=""),"break"):(0===t.param.value2?(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:n[r].user_num,isself:!1}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="",T.info("handlePrivilegeState OnDelRemoteControlPrivilege3")):1===t.param.value2&&(coreCommon.Observer.publish("OnRemoteControlPrivilege",{usernum:n[r].user_num,isself:!1}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!0,e.remoteControlUserNum=n[r].user_num,T.info("handlePrivilegeState OnRemoteControlPrivilege4 ")),3===t.param.value2&&(coreCommon.Observer.publish("OnRequestRemoteControlPrivilege",{usernum:n[r].user_num}),T.info("handlePrivilegeState OnRequestRemoteControlPrivilege ")),"break")}}(r);switch(a){case"break":break e;default:if("object"===(void 0===a?"undefined":(0,c.default)(a)))return a.v}}}();if("object"===(void 0===n?"undefined":(0,c.default)(n)))return n.v}},this.handleDisplayInfoResult=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(T.info("handleDisplayInfoResult, data = ",n),r=0,a=1,o=0,i=n.param.value1,s=n.param.pdisplay_info,c=0;c<i;c++)0!==s[c].bPrimaryMonitor?r=s[c].dwIndex:a=s[c].dwIndex;T.info("shareMonitorType: "+e.shareMonitorType+" primaryMonitorIndex: "+r+" otherMonitorrIndex: "+a),1===e.shareMonitorType?o=r:(u=$getState().conf.monitorIndex,T.info("handleDisplayInfoResult: shareMonitorType = "+e.shareMonitorType+", monitorIndex = "+u),o=1===u?a:r),T.info("handleDisplayInfoResult- finally selectedIndex: "+o),e.setSharingDisplay(o);case 11:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDecodeBfcpSuccessInDataConf=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.info("handleDecodeBfcpSuccessInDataConf = ",n),E.DFConfig.supportDataToBfcp&&coreCommon.Observer.publish("OnSharingScreenSizeChange",n);case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.sendStopScreenShareUserDefineMsg=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("sendStopScreenShareUserDefineMsg start"),t.next=3,coreTup.getdataConfInstance();case 3:if(n=t.sent,isNullOrEmpty(e.shareOwnerUserId)){t.next=7;break}return t.next=7,n.asSendUserDataUInt(e.m_confHandle,constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP,e.shareOwnerUserId,e.m_user_id);case 7:case"end":return t.stop()}},t,e)})),this.sendStopWhiteBoardUserDefineMsg=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("sendStopWhiteBoardUserDefineMsg start"),t.next=3,coreTup.getdataConfInstance();case 3:if(n=t.sent,isNullOrEmpty(e.shareOwnerUserId)){t.next=7;break}return t.next=7,n.asSendUserDataUInt(e.m_confHandle,constant.UserDefineType.AS_NOTICE_SHARING_WB_USER_STOP_TAB,e.shareOwnerUserId,e.m_user_id);case 7:case"end":return t.stop()}},t,e)})),this.handleSharingUserDefineMsg=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:T.info("handleSharingUserDefineMsg, data = ",n),r=n.param.value1,a=n.param.userId,t.t0=r,t.next=t.t0===constant.UserDefineType.CONF_INVITE_USER_DATA_SHARING?6:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP?8:t.t0===constant.UserDefineType.CONF_END_INVITE_USER_DATA_SHARING?10:t.t0===constant.UserDefineType.AS_NOTICE_INVITE_USER_WB_SHARING?12:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP_ACK?14:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_WB_USER_STOP_TAB?15:19;break;case 6:return e.dealInviteUserDataSharing(a),t.abrupt("break",20);case 8:return e.stopShareScreen(),t.abrupt("break",20);case 10:return e.stopShareScreen(!0),t.abrupt("break",20);case 12:return e.dealInviteUserWBSharing(),t.abrupt("break",20);case 14:return t.abrupt("break",20);case 15:return T.info("whiteboard tok release "),e.stopWBDoc(),e.closeWBTab(),t.abrupt("break",20);case 19:return t.abrupt("break",20);case 20:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.dealInviteUserDataSharing=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:r=t.sent,r.asSendUserDataUInt(e.m_confHandle,6,n,e.m_user_id);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataShareRealRect=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a,o){var i;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("setDataShareRealRect  start"),t.next=3,coreTup.getdataConfInstance();case 3:return i=t.sent,t.next=6,i.setDataShareRealRect(e.m_confHandle,n,r,a,o);case 6:case"end":return t.stop()}},t,e)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),this.createNativeDataSharingWnd=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a,o,i,s,c,u,f,l,d){var p,m,v,g,C,S;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("createNativeDataSharingWnd  start1"),t.next=3,coreTup.getNativeWindowInstance();case 3:return p=t.sent,m=0,v=0,g=null!==e.wbService?e.memberService.getMemberNameByUserId(e.wbService.m_ownerUserid):s,null!==e.wbService?(m=null!==e.wbService?e.wbService.m_docid:0,v=null!==e.wbService?e.wbService.m_pageid:0):0!==e.m_dsdocid&&(m=e.m_dsdocid,v=e.m_dspageid,d=y.IID_COMPONENT.DS),C=0!==e.m_dsdocid&&e.m_dsdocid===e.docSharingDocID,S="2052"===window.langcode?window.CLIENTCONFIG.NEW_APP_CHINEASE_NAME:window.CLIENTCONFIG.NEW_APP_NAME,t.next=12,p.createDataConfFrameWnd(n,r,a,e.m_confHandle,g,o,i,c,window.langcode,window.CLIENTCONFIG.ISBIGWIN,u,f,e.m_user_id,l,d,m,v,C,e.isRecevingAppshare,S,$getState().conf.isAnnoForbidden,$getState().conf.isControlForbidden,$getState().conf.isShowNameTips);case 12:case"end":return t.stop()}},t,e)}));return function(e,n,r,a,o,i,s,c,u,f,l){return t.apply(this,arguments)}}(),this.closeNativeDataSharingWnd=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.DFConfig.isWinBase){e.next=5;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:n=e.sent,n.DestroyDataConfFrameWnd();case 5:case"end":return e.stop()}},t,e)})),this.setNativeDataControlStatus=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.DFConfig.isWinBase){e.next=5;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:r=e.sent,r.setDataConfRemoteControlStatus(n);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleNativeNotifyResetRenderRect=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("handleNativeNotifyResetRenderRect,data = ",n),t.next=3,coreTup.getdataConfInstance();case 3:r=t.sent,r.setDataShareScreenParam(e.m_confHandle,{width:n.param.width,height:n.param.height});case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setNativeBigwinOriginShowRect=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0&&r>0)){e.next=8;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:return a=e.sent,e.next=6,a.setBigwinOriginShowRect(n,r);case 6:o=e.sent,T.info("setNativeBigwinOriginShowRect,ret = ",o);case 8:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.showNativeDataControl=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a,o,i,s,c){var u,f,l,d,p;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=null===e.wbService?0:e.wbService.m_docid,f=null===e.wbService?0:e.wbService.m_pageid,l=e.sharingType===constant.ConfSharingType.Program,t.next=5,coreTup.getNativeWindowInstance();case 5:return d=t.sent,t.next=8,d.showNativeDataControl(e.m_confHandle,n,r,window.langcode,l,a,o,i,e.m_user_id,s,c,u,f);case 8:p=t.sent,T.info("showNativeDataControl,ret = ",p);case 10:case"end":return t.stop()}},t,e)}));return function(e,n,r,a,o,i,s){return t.apply(this,arguments)}}(),this.showNativeRemoteControl=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("showNativeRemoteControl,data "),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.showNativeRemoteControl(n);case 6:a=e.sent,T.info("showNativeRemoteControl,ret = ",a);case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.regCustomerType=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("regCustomerType start"),e.next=3,coreTup.getdataConfInstance();case 3:return a=e.sent,e.next=6,a.regCustomerType(n,r);case 6:o=e.sent,T.info("regCustomerType,ret = ",o);case 8:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.initAnnotationResource=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a){var o,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("initAnnotationResource start"),e.next=3,coreTup.getdataConfInstance();case 3:return o=e.sent,e.next=6,o.initAnnotationResource(n,r,a);case 6:i=e.sent,T.info("initAnnotationResource,ret = ",i);case 8:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.bfcpWinAttach=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return T.info("bfcpWinAttach, confHandle : "+e.m_confHandle),t.next=7,r.bfcpWinAttach(e.m_confHandle,n);case 7:a=t.sent,T.info("bfcpWinAttach result: ",a),t.next=12;break;case 11:T.error("bfcpWinAttach failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.bfcpWinDetach=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_user_id>0)){t.next=11;break}return T.info("bfcpWinDetach, confHandle : "+e.m_confHandle),t.next=7,n.bfcpWinDetach(e.m_confHandle);case 7:r=t.sent,0!==r.param.result?T.info("bfcpWinDetach failed, result = ",r.param.result):T.info("bfcpWinDetach success, result = ",r.result),t.next=12;break;case 11:T.error("bfcpWinDetach failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.changeRemoteControl2Other=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("dataconf setRemoteControl2Other success ,confhandle : "+e.m_confHandle+",useraltid : "+n),t.next=3,coreTup.getdataConfInstance();case 3:return r=t.sent,t.next=6,r.asSetPrivilege(e.m_confHandle,n,1,1);case 6:return coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_AWARD_PRIVILEGE]}),t.abrupt("return",!0);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.delRemoteControlPrivilege=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,t.next=5,r.asSetPrivilege(e.m_confHandle,n,1,0);case 5:n===e.m_user_id?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_RELEASE_PRIVILEGE]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_FETCH_BACK_PRIVILEGE]});case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.rejectRemoteControlPrivilege=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,t.next=5,r.asSetPrivilege(e.m_confHandle,n,1,4);case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.requestRemoteControlPrivilege=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_REQUEST_PRIVILEGE]}),t.next=3,coreTup.getdataConfInstance();case 3:return n=t.sent,t.next=6,n.asRequestPrivilege(e.m_confHandle,1);case 6:case"end":return t.stop()}},t,e)})),this.isReceivingDataShare=function(){return!0===e.isDataShareStarted&&e.m_user_id!==e.shareOwnerUserId},this.setDataConfParams=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("setDataConfParams,data ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.setDataConfParams(n);case 6:a=e.sent,T.info("setDataConfParams,ret = ",a);case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.loadShareComponent=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.info("handleJoinDataConfResult loadComponent start"),t.next=3,coreTup.getdataConfInstance(0);case 3:return n=t.sent,t.next=6,n.loadComponent(e.m_confHandle,y.IID_COMPONENT.DS|y.IID_COMPONENT.AS|y.IID_COMPONENT.WB);case 6:T.info("handleJoinDataConfResult loadComponent end");case 7:case"end":return t.stop()}},t,e)})),this.setCloseShareDataOperate=function(t){e.hasCloseShareDataOperate=t},this.getCloseShareDataOperate=function(){return e.hasCloseShareDataOperate},this.getDisplayInfo=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return T.info("getDisplayInfo, m_confhandle, "+e.m_confHandle),t.next=7,n.asGetDisplayInfo(e.m_confHandle);case 7:r=t.sent,0!==r.param.result?T.info("getDisplayInfo failed, result = ",r.param.result):T.info("getDisplayInfo success, result = ",r.param.result),t.next=12;break;case 11:T.error("getDisplayInfo failed, m_confhandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.getApplist=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return T.info("getApplist start, m_confhandle : "+e.m_confHandle),t.next=7,n.asGetApplist(e.m_confHandle);case 7:r=t.sent,0!==r.param.result?T.info("getApplist failed, result = ",r):T.info("getApplist success, result = ",r),t.next=12;break;case 11:T.error("getApplist failed, m_confhandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.showNativeShareSelectWnd=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("showNativeShareSelectWnd start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.showNativeShareSelectWnd();case 6:r=e.sent,T.info("showNativeShareSelectWnd,ret = ",r);case 8:case"end":return e.stop()}},t,e)}))},o);t.default=O},1764:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=coreLogger.getLogger("dataconf")("model"),p=(o=a=function e(){var t=this;(0,l.default)(this,e),this.createWBNewDocAndPage=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("createWBNewDocAndPage start"),t.m_confHandle=n,e.next=4,coreTup.getNativeWindowInstance();case 4:return r=e.sent,e.next=7,r.controlWhiteBoard({confhandle:t.m_confHandle,paramtype:0});case 7:if(a=e.sent,d.info("createWBNewDoc docRet",a),!(a.param.docid>0&&a.param.pageid)){e.next=19;break}return t.m_docid=a.param.docid,t.m_pageid=a.param.pageid,e.next=14,r.controlWhiteBoard({confhandle:t.m_confHandle,docid:t.m_docid,pageid:t.m_pageid,issync:!0,paramtype:1});case 14:return o=e.sent,t.m_isChairman=!0,e.abrupt("return",!0);case 19:return d.info("createWBNewDoc fail, ret : ",a.param.result),e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setWBLocalCurrentPageLocal=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("setWBLocalCurrentPageLocal start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.controlWhiteBoard({confhandle:t.m_confHandle,docid:t.m_docid,pageid:t.m_pageid,issync:!1,paramtype:1});case 6:r=e.sent,0!==r.param.result&&d.info("setWBLocalCurrentPageLocal fail, ret : ",r.param.result);case 8:case"end":return e.stop()}},e,t)})),this.m_docid=0,this.m_pageid=0,this.m_confHandle=0,this.m_isChairman=!1,this.m_ownerUserid=0},a.deleteWBDoc=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("deleteWBDoc start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.controlWhiteBoard({confhandle:t,docid:n,paramtype:4});case 6:a=e.sent,0!==a.param.result&&d.info("deleteWBDoc fail, ret : ",a.param.result);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),o);t.default=p},1765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function e(){var t=this;(0,a.default)(this,e),this.addMember=function(e,n){for(var r=t.dataUserList,a=!1,o=0;o<r.length;o++)if(r[o].user_id&&r[o].user_id===e.param.user_alt_id){a=!0;break}if(!a&&"phnagt"!==e.param.user_name&&0!==e.param.user_alt_id){var i={user_num:e.param.user_alt_uri,user_id:e.param.user_alt_id,user_name:e.param.user_name,is_self:n,is_share:!1,device_type:e.param.device_type};t.dataUserList.push(i)}},this.updateMemberName=function(e){Array.isArray(e)&&e.forEach(function(e){var n=t.dataUserList.findIndex(function(t){return t.user_num===e.user_num});~n&&t.dataUserList[n].user_name!==e.user_name&&(t.dataUserList[n].user_name=e.user_name)})},this.deleteMember=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e.param.user_alt_id){n.splice(r,1);break}},this.updateDataShareOwner=function(e){for(var n=0;n<t.dataUserList.length;n++)t.dataUserList[n].is_share=t.dataUserList[n].user_num===e},this.getBindnoByUserid=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e)return n[r].user_num.toString();return""},this.getMemberNameByUserId=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e)return n[r].user_name;return""},this.getUserAltId=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_num===e)return n[r].user_id.toString();return""},this.dataUserList=[]};t.default=o},1766:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(4),f=a(u),l=n(5),d=a(l),p=n(939),h=r(p),m=n(355),v=r(m),g=n(216),C=r(g),S=coreLogger.getLogger("reCallModel")("impl"),w=function(){function e(t,n){(0,f.default)(this,e),this.recallTimer=null,this.savedRecallInfo=t,this.reCallTerminateCallBack=n,this.savedRecallConfStateInfo=null}return(0,d.default)(e,[{key:"saveStateBeforeRecall",value:function(){var e=$getState().call,t=e.isMuteMic,n=e.isSpeaker,r=e.isMuteSpk,a=e.isOpenCamera,o=$getState().conf.isConfMicMute,i={isMuteMicRecall:t||o,isMuteSpkRecall:r,isSpeaker:n,isCloseCameraRecall:!a};this.savedRecallConfStateInfo=i}},{key:"startReCall",value:function(){coreCall.changeNoStreamEndcall(0),this.saveStateBeforeRecall(),$dispatch(coreUi.changeIsRecalling(!0));var e=6e4;window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&($dispatch(coreUi.createConfTipMsg([language.READY_TO_RECALL])),e=45e3);var t=this;if(this.recallTimer=setTimeout(function(){window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S.info("[IT-Meeting] recall more than 30s, stop recall and leave conf"):S.info("recall already keep more than 60s, leave conf"),t.reCallTerminateCallBack()},e),C.isSendScreenSharing()&&window.CLIENTCONFIG.ISWIN){$getState().login.sipLoginOnly?coreConf.getSvcAtdManager().alertBox("LOW_BW_END_SHARE",0,1):alert(language.LOW_BW_END_SHARE)}this.startReToConf()}},{key:"startReToConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("startReToConf"),t=!1,$getState().conf.isStartScreenShare&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(t=!0,window.sipCreateLeaveConf=1),e.next=5,h.leaveConf(t);case 5:S.info("leave conf suc"),$dispatch(coreUi.changeConfRole(0)),$dispatch(coreUi.clearEnterConfInfo()),$dispatch(coreUi.changesvcRecallorNot(!0)),$dispatch(coreUi.changeSvcNativeToJS({})),this.reCallEnterConf();case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallEnterConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t,n,r,a,o,s,c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,n=t.isSipRegSuc()){e.next=7;break}return S.error("reCallEnterConf,is not Registered, can not recall"),e.abrupt("return");case 7:return e.next=9,coreSecurity.decryptKMC(this.savedRecallInfo.conf_paswd);case 9:return r=e.sent,S.info("decryptKMC suc"),a=r&&r.param&&r.param.PlainText||"",o={isCloseCameraDe:this.savedRecallConfStateInfo.isCloseCameraRecall,isMuteMicDe:1===this.savedRecallConfStateInfo.isMuteMicRecall,isMuteSpkDe:this.savedRecallConfStateInfo.isMuteSpkRecall,speakerMode:this.savedRecallConfStateInfo.isSpeaker?1:0},s={confAcs:this.savedRecallInfo.access_code,confId:this.savedRecallInfo.confid,confPwd:a,isVideo:this.savedRecallInfo.isVideo,deviceSet:o,isVMR:this.savedRecallInfo.isVMR},e.next=16,h.oneKeyEnterConfService(s);case 16:c=e.sent,c?S.info("startReToConf suc"):(S.error("startReToConf fail, need to startReToConf again"),v.isInConf()||this.startReToConf());case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"terminateReCall",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("terminateReCall"),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallTerminate",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("reCallTerminate"),window.CLIENTCONFIG.ENABLE_IT_MEETING?window.itWeLinkNotifyCallEnded(0,language.THE_CALL_FAILED_CALL_ENDED):alert(language.THE_CALL_FAILED_CALL_ENDED),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(t="60s No Stream",coreConf.meetingHWreCallTimeOut(t)),coreConf.actionLeaveConf(),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallSucToStopReCall",value:function(){S.info("reCallSucToStopReCall"),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1))}}]),e}();t.default=w},1767:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.rejectConf=t.confIncoming=t.svcSeessionModify=t.confInfoNotify=t.changeIsSvcConf=t.handleJoinConf=t.callToConfFail=t.p2pToJoinConf=t.callToConfStart=t.accpetConfSuc=t.acceptConfStart=t.clearAfterConfEnd=t.closeInConfWindows=t.closeConfPage=t.showConfOutPage=t.closeLoadingPage=t.showLoadingPage=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(1768),u=r(c),f=coreLogger.getLogger("UIConf")("index"),l=null;t.showLoadingPage=function(){null===l?(f.info("showLoadingPage new confUICtrl"),l=new u.default,l.showLoadingPage()):f.error("showLoadingPage confUICtrl is exsit")},t.closeLoadingPage=function(){null===l?f.error("closeLoadingPage, confUICtrl is not exsit"):(l.closeLoadingPage(),f.info("closeLoadingPage, set confUICtrl null"),l=null)},t.showConfOutPage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";null===l?(f.info("showConfPage new confUICtrl"),l=new u.default,l.showConfOutPage(e,t,n,r)):f.error("showConfPage confUICtrl is exsit")},t.closeConfPage=function(e,t,n,r){l?l.closeConfPage(e,t,n,r):f.error("closeConfPage confUICtrl is no exsit")},t.closeInConfWindows=function(){l?l.closeInConfWindows():f.error("closeConfPage confUICtrl is no exsit")},t.clearAfterConfEnd=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l?(l.clearAfterConfEnd(e,t,n,r),f.info("clearAfterConfEnd set confUICtrl null"),l=null):f.error("clearAfterConfEnd confUICtrl is no exsit")},t.acceptConfStart=function(){l?l.acceptConfStart():f.error("acceptConfStart, confUICtrl is not exsit")},t.accpetConfSuc=function(){l?l.accpetConfSuc():f.error("accpetConfSuc, confUICtrl is not exsit")},t.callToConfStart=function(e){null===l?(f.info("callToConfStart new confUICtrl"),l=new u.default,l.callToConfStart(e)):f.error("callToConfStart confUICtrl is exsit")},t.p2pToJoinConf=function(){if(null===l){var e=-1!==$getState().call.callStatus.indexOf("VIDEO");f.info("p2pToJoinConf new confUICtrl, isVideo = "+e),l=new u.default(e),l.p2pToJoinConf()}else f.info("p2pToJoinConf confUICtrl is exsit, is active call to conf"),l.p2pToJoinConf()},t.callToConfFail=function(e){l?(l.callToConfFail(e),f.info("callToConfFail set confUICtrl null"),l=null):f.error("callToConfFail confUICtrl is no exsit")},t.handleJoinConf=function(){l?l.handleJoinConf():f.error("handleJoinConf confUICtrl is not exist")},t.changeIsSvcConf=function(){l?l.changeIsSvcConf():f.error("changeIsSvcConf confUICtrl is not exist")},t.confInfoNotify=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=5;break}return e.next=3,l.confInfoNotify();case 3:e.next=6;break;case 5:f.error("confInfoNotify confUICtrl is not exist");case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.svcSeessionModify=function(){l?l.svcSeessionModify():f.error("svcSeessionModify confUICtrl is not exist")},t.confIncoming=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=7;break}return f.info("confInComing new confUICtrl"),l=new u.default,e.next=5,l.confIncoming(t);case 5:e.next=8;break;case 7:f.error("confInComing confUICtrl is exsit");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.rejectConf=function(e){l?(l.rejectConf(e),f.info("reject conf set confUICtrl null"),l=null):f.error("reject conf confUICtrl is no exsit")}},1768:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(1769),p=r(d),h=n(1770),m=r(h),v=n(1771),g=r(v),C=n(1772),S=r(C),w=n(1773),_=r(w),I=n(1774),b=r(I),N=n(1775),E=r(N),y=n(1778),T=r(y),O=n(260),A=n(949),x=n(815),k=coreLogger.getLogger("UIConf")("impl"),M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,u.default)(this,e),this.myStatusCtrl=window.CLIENTCONFIG.USE_IM?new p.default:null,this.upgradeCtrl=new g.default,this.userTrack=window.CLIENTCONFIG.ISBIGWIN?new m.default:null,this.sipLoginOnlyCtrl=$getState().login.sipLoginOnly?new S.default:null,this.confTempCtrl=isNullOrEmpty($getState().conf.confTempAcsAccount)?null:new _.default,this.platformCtrl=window.CLIENTCONFIG.ISMOBILE?new T.default:window.CLIENTCONFIG.ISMAC?new b.default:new E.default,this.filename=window.CLIENTCONFIG.ISMOBILE?"":"tempFile.txt",this.isVideo=t}return(0,l.default)(e,[{key:"changeIsSvcConf",value:function(){k.info("changeIsSvcConf"),this.platformCtrl.changeIsSvcConf()}},{key:"confIncoming",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("confIncoming"),this.myStatusCtrl&&this.myStatusCtrl.changeInConf(),$dispatch(coreUi.clearCallInfo()),$dispatch(coreUi.changeCallStatus("CALL_INCOMING")),n={isShow:!0,isUpdateToVideo:!1,callerName:t.confSubject,callerDepartment:"",callerNumber:t.compereNumber,callId:t.confHandle,confId:t.confHandle,callAccount:"",isVideo:t.isVideo?1:0,mediaType:t.mediaType,callType:t.isVideo?1:0},""===n.callerName&&(n.callerName=n.callerNumber),this.platformCtrl.confIncoming(t.isVideo),coreUi.showCallNotify(n),coreUi.incommingRing("In",!0),e.next=11,coreCall.callPermissionCheck(1===n.callType,!1);case 11:window.requestPermissionPromise&&(window.requestPermissionPromise=null);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"showLoadingPage",value:function(){k.info("showLoadingPage"),this.setIsInConf(!0),$dispatch(coreUi.changeEnterConfState(!0))}},{key:"closeLoadingPage",value:function(){k.info("closeLoadingPage"),this.setIsInConf(!1),$dispatch(coreUi.changeEnterConfState(!1))}},{key:"showConfOutPage",value:function(e,t,n,r){k.info("showConfOutPage, isVideo = "+e+",isCreateConf = "+t+",confSubject isNullOrEmpty = "+isNullOrEmpty(n)+",confAcs isNullOrEmpty = "+isNullOrEmpty(r)),this.setIsInConf(!0),$dispatch(coreUi.changeEnterConfState(!0)),isNullOrEmpty(n)?($dispatch(coreUi.changeUserInfo({number:r})),$dispatch(coreUi.changeCallNum(r))):$dispatch(coreUi.changeConfSubject(n)),this.userTrack&&this.userTrack.init(),this.myStatusCtrl&&this.myStatusCtrl.changeInConf(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.goMainPage(),e?this.showVideoOutPage():this.showCallOutPage(),this.showConfOutTip(e,t)}},{key:"callToConfStart",value:function(e){k.info("callToConfStart, isVideoConf = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConf(),coreCall.changeScreenState("middle"),$dispatch(coreUi.changeMeetingType(!1)),e?$dispatch(coreUi.changeCallStatus("VIDEO_TRANSTO_CONF")):$dispatch(coreUi.changeCallStatus("CALL_TRANSTO_CONF"))}},{key:"p2pToJoinConf",value:function(){var e=coreConf.getIsVideoConf();k.info("p2pToJoinConf, isVideoConf = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConf(),coreCall.setTransferFlagHandle(!1,"confTransferToConf"),this.hideDataShareButton(),e?this.showVideoConnectedPage():this.showCallConnectedPage(),this.dealSvcMemberList()}},{key:"callToConfFail",value:function(e){k.info("callToConfFail, errorCode = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConfFail();var t=$getState().call.callStatus,n="CALL_CONNECTED";"VIDEO_TRANSTO_CONF"===t&&(k.info("conf create result: transto video conf"),n="VIDEO_CONNECTED"),k.info("changeCallStatus",n),$dispatch(coreUi.changeCallStatus(n)),this.platformCtrl.callToConfFail(e,n),$dispatch(coreUi.clearConfInfo()),coreCall.resumeScreenStateWhenCallOrConfEnd()}},{key:"acceptConfStart",value:function(e){k.info("acceptConfStart"),coreUi.stopRing(),coreCall.changeScreenState("middle"),this.platformCtrl.acceptConfStart(),$getState().common.isShowModal?coreUi.hideModal():$getState().common.isShowPop?window.hideAlert&&window.hideAlert():$getState().common.isShowNotifyModal&&$dispatch(coreUi.hideNotifyModal());var t=$getState().notify.callNotify;t.isShow=!1,t.isUpdateToVideo=!1,coreUi.showCallNotify(t),this.platformCtrl.acceptConfStart(e)}},{key:"accpetConfSuc",value:function(){k.info("accpetConfSuc"),this.setIsInConf(!0)}},{key:"rejectConf",value:function(e){if(k.info("rejectConf,confhandle = "+e),coreUi.closeCallNotify(e),coreUi.stopRing(),coreCall.getCallCount()<=0&&$dispatch(coreUi.changeCallStatus("")),this.myStatusCtrl&&this.myStatusCtrl.revert(),coreCall.getCallCount()>0)return void k.info("dealAfterReject has been calling");this.platformCtrl.rejectConf(),$dispatch(coreUi.clearConfInfo())}},{key:"confInfoNotify",value:function(){var e=coreConf.getIsVideoConf();k.info("confInfoNotify, isVideoConf = "+e),this.saveConfInfo(),this.platformCtrl.confInfoNotify()}},{key:"svcSeessionModify",value:function(){k.info("svcSeessionModify"),this.platformCtrl.svcSeessionModify()}},{key:"handleJoinConf",value:function(){var e=$getState().call.callStatus,t=coreConf.getIsVideoConf();k.info("handleJoinConf,isVideoConf = "+t+",callStatus  = "+e),coreCall.setTransferFlagHandle(!1,"confTransferToConf"),coreConf.getIsRecall()||this.startTime(),this.hideDataShareButton(),t?(this.showVideoConnectedPage(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.joinVideoConf()):(this.showCallConnectedPage(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.joinAudioConf()),this.stopRing(),this.closeConfNotify(),this.dealSvcMemberList()}},{key:"closeConfPage",value:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];k.info("closeConfPage, isUserActive = "+e+",isEndConf = "+t+",reasonCode = "+n+",exitTip = "+r),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.dragSetDisable(),coreAccount.getLoginModel().then(function(e){e.sipLoginOnly=!1}),this.myStatusCtrl&&this.myStatusCtrl.revert(),this.sipLoginOnlyCtrl?this.platformCtrl.closeConfPage(e,t,""):this.platformCtrl.closeConfPage(e,t,"main/conference"),this.clearConfOutTip(),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("")),$dispatch(coreUi.changeEnterConfState(!1));var o=this;setTimeout(function(){a&&o.platformCtrl.showExitConfTip(n,r)},500),"extra"===$getState().call.screenState&&(delegate.resumeShow(!1),delegate.winMinimize()),coreCall.resumeScreenStateWhenCallOrConfEnd();var i=$getState().conf.confHandle;coreUi.closeCallNotify(i),coreUi.stopRing(),$dispatch(coreUi.clearConfInfo())}},{key:"clearAfterConfEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];k.info("clearAfterConfEnd isUserActive = "+e+",isEndConf = "+t+",reason = "+n+",isCallEnded = "+r),this.userTrack&&this.userTrack.confEnd(e,n,r),this.sipLoginOnlyCtrl&&(window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.quitFromConfPlugin(),this.confTempCtrl?this.confTempCtrl.confEndLogout(e,t,n):this.sipLoginOnlyCtrl.confEndLogout(n)),this.platformCtrl.notifyPluginLogout(),e&&t&&this.recordConfErrorTip(),this.clearData(e),!this.sipLoginOnlyCtrl&&e&&t&&setTimeout(function(){coreConf.getConfList()},2e3),this.upgradeCtrl.checkAndStart()}},{key:"changeMediaType",value:function(e){k.info("changeMediaType ,old isVideo = "+this.isVideo+",new isVideo = "+e),$dispatch(coreUi.changeMeetingType(e)),this.isVideo&&!e&&(this.isVideo=!1,this.platformCtrl.changeVideoToAudio()),!this.isVideo&&e&&(this.isVideo=!0,this.platformCtrl.changeAudioToVideo())}},{key:"showCallOutPage",value:function(){k.info("showCallOutPage"),$dispatch(coreUi.changeCallToolBarShowStatus(!0)),$dispatch(coreUi.changeCallStatus("CALL_OUT")),this.changeMediaType(!1),this.platformCtrl.showCallOutPage()}},{key:"showVideoOutPage",value:function(){k.info("showVideoOutPage"),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_OUT")),this.changeMediaType(!0),this.platformCtrl.showVideoOutPage()}},{key:"showCallConnectedPage",value:function(){k.info("showCallConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!0)),$dispatch(coreUi.changeCallStatus("CALL_CONNECTED")),this.changeMediaType(!1),this.platformCtrl.showCallConnectedPage(),this.clearConfOutTip()}},{key:"showVideoConnectedPage",value:function(){k.info("showVideoConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),this.changeMediaType(!0),this.platformCtrl.showVideoConnectedPage(),this.clearConfOutTip()}},{key:"closeInConfWindows",value:function(){k.info("closeInConfWindows");var e=$getState(),t=e.selectContact.selectcontactisshow;coreUi.closeAudioSetting(),t&&coreUi.selectBoxCancelDataNWin(),$getState().conf.isShowMemberListNew&&$dispatch(coreUi.changeIsShowMemberListNew())}},{key:"clearConfOutTip",value:function(){k.info("clearConfOutTip"),$dispatch(coreUi.createConfTipMsg([]))}},{key:"hideDataShareButton",value:function(){k.info("hideDataShareButton isInDataConf = "+coreConf.getIsDataConf()+",deploymode = "+$getState().login.deployMode),coreConf.getIsDataConf()&&$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING&&(k.info("is dataconf hideDataShareButton true"),$dispatch(coreUi.hideDataShareButton(!0)))}},{key:"stopRing",value:function(){k.info("stopRing"),coreUi.stopRing()}},{key:"closeConfNotify",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_HANDLE);k.info("closeConfNotify hanlde = "+e),coreUi.closeCallNotify(e)}},{key:"dealSvcMemberList",value:function(){k.info("dealSvcMemberList"),this.platformCtrl.dealMemberList()}},{key:"showConfOutTip",value:function(e,t){k.info("showConfOutTip, isVideo = "+e+",isCreateConf = "+t);var n="";n=t?e?language.CREATE_CONFERENCE:language.CREATE_VIOCE_CONFERENCE:language.METTING,$dispatch(coreUi.createConfTipMsg([n]))}},{key:"clearData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];k.info("clearData, isUserActive = "+e),e&&(window.isUserActiveClose=!0),this.setIsInConf(!1),this.cancleConfMemberlistMessage(),O.ToolbarManager.clearParam(),this.clearRecordInfoHandle(),this.changeStatusOfConference(!0),this.recoredOldPwd(""),$dispatch(coreUi.changCurrentPageInfo({currentPage:0,totalPage:1})),$dispatch(coreUi.setDataSharingFlag(!1)),$dispatch(coreUi.clearPhoneAddrInfo()),$dispatch(coreUi.clearEnterConfInfo()),$dispatch(coreUi.clearBuriedData()),$dispatch(coreUi.clearCallInfo()),coreCall.resetCallInfo(),$dispatch(coreUi.clearConfInfo()),k.info("clearData, clearConfInfo"),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN),k.info("clearData, changeConfAcsState"),isNullOrEmpty(this.filename)||(k.info("clearData, this.filename not nullOrEmpty"),appService.deleteFile(window.LOG_PATH+"/"+this.filename)),this.clearTaskQueue()}},{key:"recordConfErrorTip",value:function(){var e=$getState().conf,t=e.isShowRecordType,n=e.scheduserName,r=e.haveRecorded;k.info("recordConfErrorTip,isShowRecordType:",t);var a=$getState().myInfo.name,o=null;""!==n&&1===t&&1===r?(a===n?o="VIEW_MEETING_RECORDINGS":a!==n&&(o="VIEW_THE_CONFERENCE_RECORDING_FILE"),this.showErrorMsgBox(o)):""===n&&1===t&&1===r&&(o="VIEW_MEETING_RECORDING_FILE_ADMIN",this.showErrorMsgBox(o))}},{key:"showErrorMsgBox",value:function(e){k.info("showErrorMsgBox,errorTitle:",e),this.platformCtrl.showErrorMsgBox(e)}},{key:"clearTaskQueue",value:function(){k.info("clearTaskQueue MODULE_CONFERENCE"),coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE").clear()}},{key:"setIsInConf",value:function(e){e?k.info("setIsInConf isInconf true, need grayed join or createconf button"):k.info("setIsInConf isInConf false, need active join or createconf button"),$dispatch(coreUi.changeIsShowJoinButton(!e))}},{key:"startTime",value:function(){var e=(new Date).getTime();return e=parseInt(e/1e3),k.info("call start time =",e),$dispatch(coreUi.changetime(e)),e}},{key:"saveConfInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.info("saveConfInfo"),t=$getState().conf.confSubject,n=$getState().conf.confIdInput,!t||!n){e.next=6;break}return e.next=6,(0,A.saveConfInfoToDb)(n,t);case 6:$dispatch(coreUi.changeConfIdInput(""));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearRecordInfoHandle",value:function(){k.info("clearRecordInfoHandle"),(0,x.clearRecordInfoLogic)()}},{key:"changeStatusOfConference",value:function(e){k.info("changeStatusOfConference, IsleaveConf = "+e),$dispatch(coreUi.changeStatusOfConf(e))}},{key:"recoredOldPwd",value:function(e){k.info("recoredOldPwd"),$dispatch(coreUi.recoredOldPassword(e))}},{key:"cancleConfMemberlistMessage",value:function(){k.info("cancleConfMemberlistMessage"),$getState().conf.showqusetchairman&&$dispatch(coreUi.showqusetchairman());var e=$getState().conf.showRepChairmanError;e&&(k.info("showRepChairmanErrorbool",e),$dispatch(coreUi.showRepChairmanError()))}}]),e}();t.default=M},1769:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("myStatusCtrl"),u=function(){function e(){(0,o.default)(this,e),this.isChangedInConf=!1,this.isReverted=!1,this.oldStatus=constant.ONLINE_STATUS.ONLINE,this.oldStatusDesc=""}return(0,s.default)(e,[{key:"changeInConf",value:function(){if(window.isOffline)return void c.info("changeInConf is offline, so return");if(this.isChangedInConf)return void c.info("already changedInConf,so return");this.isChangedInConf=!0;var e=$getState(),t=e.contactGroups.contact_status_map,n=e.myInfo,r=n.account,a=n.statusDesc;this.oldStatus=t[r]&&t[r].status,this.oldStatusDesc=a,c.info("enter conf saveOldStatus = "+this.oldStatus+",desc = "+this.oldStatusDesc+",changeInConf busy status = "+constant.ONLINE_STATUS.BUSY+",desc:","In meeting"),this.changeStatus(constant.ONLINE_STATUS.BUSY,"In meeting")}},{key:"callToConf",value:function(){return window.isOffline?void c.info("callToConf is offline, so return"):this.isChangedInConf?void c.info("already callToConf,so return"):(this.isChangedInConf=!0,this.oldStatus=$getState().call.oldStatus,this.oldStatusDesc=$getState().call.oldStatusDesc,c.info("callToConf saveOldStatus = "+this.oldStatus+",desc = "+this.oldStatusDesc+",callToConf busy status = "+constant.ONLINE_STATUS.BUSY+",desc:","In meeting"),void this.changeStatus(constant.ONLINE_STATUS.BUSY,"In meeting"))}},{key:"callToConfFail",value:function(){this.changeStatus(constant.ONLINE_STATUS.BUSY,"Calling")}},{key:"revert",value:function(){return window.isOffline?void c.info("revert is offline, so return"):this.isReverted?void c.info("already reverted, so return"):this.isChangedInConf?(this.isReverted=!0,c.info("leave conf restorestatus,status = "+this.oldStatus+",desc = "+this.oldStatusDesc),void(this.oldStatus!==constant.ONLINE_STATUS.OFFLINE&&this.changeStatus(this.oldStatus,this.oldStatusDesc))):void c.info("is not save status,no need to revert, so return")}},{key:"changeStatus",value:function(e,t){window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.webView&&(e===constant.ONLINE_STATUS.BUSY?window.webView.setTalkingState():window.webView.cancelTalkingState()),coreAccount.pushStatusToEServer({status:e,desc:t})}}]),e}();t.default=u},177:function(e,t,n){e.exports=n(0)(593)},1770:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(593),u=coreLogger.getLogger("UIConf")("UserTrack"),f=function(){function e(){(0,o.default)(this,e),this.inited=!1}return(0,s.default)(e,[{key:"init",value:function(){if(this.inited)return void u.warn("already inited,so return");coreConf.setServerIp(""),coreUi.showSearchPanel(!1),$dispatch(coreUi.changeHasSentState(!1)),this.inited=!0}},{key:"confEnd",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.CLIENTCONFIG.ENABLE_IT_MEETING&&(0,c.meetingHWLeaveConf)();var r=$getState().call.timer;if(window.CLIENTCONFIG.ISBIGWIN)if(n)coreConf.NotifyJoinConfFailedEx(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0)));else if(e){coreConf.buriedNormalEnd(0,!0,r)}else if(0===t){coreConf.buriedNormalEnd(1,!1,r)}else coreConf.buriedUnormalEnd(t,r)}}]),e}();t.default=f},1771:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("UIConf")("UpgradeCtrl"),p=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,[{key:"checkAndStart",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("checkAndStart"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,t.isPortalUpgrade?coreAccount.reStartUpgrade():(coreCwmp.checkUpdateConfig(),coreCwmp.restartUpgrade());case 5:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=p},1772:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("UIConf")("sipLoginOnlyCtrl"),p=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,[{key:"goMainPage",value:function(){d.info("goMainPage"),window.CLIENTCONFIG.ISMOBILE||window.goRoute("main")}},{key:"joinVideoConf",value:function(){d.info("sip only joinVideoConf"),window.CLIENTCONFIG.ISWIN&&(delegate.winHide(),appService.hideTrayClickShowMain())}},{key:"joinAudioConf",value:function(){d.info("joinAudioConf"),window.CLIENTCONFIG.ISWIN?(delegate.winHide(),appService.hideTrayClickShowMain()):appService.showMainWindow(!0)}},{key:"dragSetDisable",value:function(){d.info("confEnded siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable())}},{key:"dragSetEnable",value:function(){d.info("confEnded siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable())}},{key:"confEndLogout",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("confEndLogout"),e.next=3,coreAccount.clearResumeService();case 3:return e.next=5,coreAccount.stopResume("confEndLogout");case 5:return e.next=7,coreAccount.sipserverDeregister();case 7:return e.next=9,coreAccount.clearnsipinfo();case 9:if(t=$getState().conf.anonymousURLEnterConf,!window.CLIENTCONFIG.ISWIN||0!==r||!0!==t){e.next=15;break}return d.info("sipLoginOnlyCtrl confEndLogout exitApp"),$dispatch(coreUi.changeAnonymousURLEnterConf(!1)),appService.exitApp(!1),e.abrupt("return");case 15:if(!window.CLIENTCONFIG.ISMOBILE){e.next=19;break}setTimeout(function(){window.goRoute("loginCtn")},500),e.next=23;break;case 19:return e.next=21,coreAccount.deRegisterService();case 21:n=this,setTimeout(function(){window.goRoute("login"),n.dragSetEnable()},500);case 23:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=p},1773:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("confTempCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"confEndLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;c.info("confEndLogout,isUserActive = "+e+",isEndConf = "+t);var r=$getState().conf.anonymousURLEnterConf;window.CLIENTCONFIG.ISWIN&&0===n&&!0===r?(c.info("confTempCtrl confEndLogout exitApp"),$dispatch(coreUi.changeAnonymousURLEnterConf(!1)),coreAccount.logout({isBackLogin:!0,isKickout:!0}).then(function(){appService.exitApp(!1)})):e&&t?setTimeout(function(){coreAccount.logout({isBackLogin:!0,isKickout:!0})},3e3):coreAccount.logout({isBackLogin:!0,isKickout:!0})}}]),e}();t.default=u},1774:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(135),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(131),p=r(d),h=n(4),m=r(h),v=n(5),g=r(v),C=n(132),S=r(C),w=n(133),_=r(w),I=n(818),b=r(I),N=n(335),E=coreLogger.getLogger("UIConf")("macCtrl"),y=function(e){function t(){(0,m.default)(this,t);var e=(0,S.default)(this,(t.__proto__||(0,p.default)(t)).call(this));return e.isVideoOutPageExisted=!1,e}return(0,_.default)(t,e),(0,g.default)(t,[{key:"showVideoOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("showVideoOutPage"),this.isVideoOutPageExisted=!0,t=coreCall.getBigContainerSize(),t=coreCall.calcRealVideoSize({width:16,height:9},t),$dispatch(coreUi.changeBigWinStyle(t)),e.next=7,coreCall.setLocalVideoRender(t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeConfPage",value:function(){E.info("closeConfPage"),$dispatch(coreUi.changeShowPcConfInfoFlag(!1))}},{key:"showUnDecodeMask",value:function(){E.info("showUnDecodeMask");var e=this;this.timerNoDecodeSuc=setTimeout(function(){$dispatch(coreUi.setIsDecodeSuc()),clearTimeout(e.timerNoDecodeSuc)},3e3)}},{key:"showVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSvc=coreConf.getIsSvcConf(),E.info("showVideoConnectedPage isSvcConf = "+this.isSvc),!this.isSvc){e.next=7;break}return e.next=5,this.showSvcConfPage();case 5:e.next=9;break;case 7:return e.next=9,this.showAvcConfPage();case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"showAvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("showAvcConfPage in"),this.showUnDecodeMask(),!this.isVideoOutPageExisted){e.next=14;break}return t=coreCall.getBigContainerSize(),t=coreCall.calcRealVideoSize({width:16,height:9},t),$dispatch(coreUi.changeBigWinStyle(t)),e.next=8,coreCall.setRemoteVideoRender(t);case 8:return n={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(n)),e.next=12,coreCall.setVideoWH(!1,n);case 12:e.next=23;break;case 14:return r=coreCall.getBigContainerSize(),r=coreCall.calcRealVideoSize({width:16,height:9},r),$dispatch(coreUi.changeBigWinStyle(r)),e.next=19,coreCall.setRemoteVideoRender(r);case 19:return a={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(a)),e.next=23,coreCall.setLocalVideoRender(a);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"callToConfFail",value:function(e){E.info("callToConfFail errorTitle = "+e),coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e])}},{key:"changeIsSvcConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSvc){e.next=3;break}return E.info("changeIsSvcConf is already svc, so return"),e.abrupt("return");case 3:return E.info("changeIsSvcConf to svc"),this.isSvc=!0,e.next=7,this.showSvcConfPage();case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"showSvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("showSvcConfPage"),e.next=3,coreCall.closeAllSvcRemoteSocket();case 3:return e.next=5,coreCall.closeSvcDataSocket();case 5:$dispatch(coreUi.changeSvcOnLineAttendances([])),$dispatch(coreUi.changeSvcShowAttendances([])),$getState().conf.svcRecallorNot||N.SvcAttendanceManager.setSvcLocalRender();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r,a,i,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("svcSeessionModify"),t=coreConf.getSsrcRange(),e.next=4,coreCall.closeAllSvcRemoteSocket();case 4:n=(0,s.default)([],$getState().conf.svcShowAttendances),r=new Array,a=0;case 7:if(!(a<n.length)){e.next=17;break}if(1!==n[a].is_self){e.next=10;break}return e.abrupt("continue",14);case 10:for(i=t.max;r.indexOf(i)>=0;)i--;n[a].ssrc=i,r.push(i);case 14:a++,e.next=7;break;case 17:if(c=$getState().conf.svcBigPicInfo,c.hasOwnProperty("ssrc")&&(f=(0,s.default)([],c),f.ssrc=t.min,$dispatch(coreUi.changeSvcBigPicInfo(f))),E.info("handleSvcSeessionModify,newSsrcList is "+(0,o.default)(r)),$dispatch(coreUi.changeUsedSvcSSRCList(r)),$dispatch(coreUi.changeSvcShowAttendances(n)),!($getState().conf.svcOnLineAttendances.length>1)){e.next=25;break}return e.next=25,coreConf.getSvcAttendanceManager().sendWatchSvcRequest(n);case 25:return e.next=27,coreConf.getSvcAttendanceManager().setSvcVideoRender(n);case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"showErrorMsgBox",value:function(e){E.info("showErrorMsgBox, errorTitle = "+e),alert(language[e])}},{key:"showExitConfTip",value:function(e,t){if(E.info("showExitConfTip reasonCode = "+e+",errorTitle = "+t),0!==e){if(7===e)return;coreCommon.isNeedQuickFeedback(t)?window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):this.alterNotInConference(t)}}},{key:"alterNotInConference",value:function(e){var t=this,n=window.getRoute();E.info("alterNotInConference:",n),"main"===n?setTimeout(function(){t.alterNotInConference(e)},100):alert(e)}}]),t}(b.default);t.default=y},1775:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(135),u=r(c),f=n(2),l=r(f),d=n(131),p=r(d),h=n(4),m=r(h),v=n(5),g=r(v),C=n(132),S=r(C),w=n(133),_=r(w),I=n(259),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(I),N=n(260),E=n(215),y=n(1776),T=r(y),O=n(1777),A=r(O),x=n(818),k=r(x),M=n(299),R=coreLogger.getLogger("UIConf")("winCtrl"),L=function(e){function t(){(0,m.default)(this,t);var e=(0,S.default)(this,(t.__proto__||(0,p.default)(t)).call(this));return e.showVideoPreview=function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);R.info("showVideoPreview, call_id = "+handlePhoneNumber(e)),b.updateLocalwindowCallId(callId)},e.bigWinCtrl=window.CLIENTCONFIG.ISBIGWIN?new T.default:null,e.maxHubCtrl=window.isHubEnv?new A.default:null,e}return(0,_.default)(t,e),(0,g.default)(t,[{key:"registerNotify",value:function(){this.notifyIndex=coreCommon.Observer.subscribe("showVideoPreview",this.showVideoPreview)}},{key:"unRegisterNotify",value:function(){coreCommon.Observer.unsubscribeToken(this.notifyIndex)?R.info("unRegisterNotify success index = "+this.notifyIndex):R.error("unRegisterNotify fail index = "+this.notifyIndex)}},{key:"showVideoOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.bigWinCtrl){e.next=4;break}R.warn("showVideoOutPage no need for bigwin"),e.next=12;break;case 4:return R.info("showVideoOutPage"),t={set_window_title:{title:$getState().call.userInfo.name}},n=(0,u.default)({},t),n.set_window_title.title=handlePhoneNumber(n.set_window_title.title),r=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),R.info("showVideoOutPage init avc initCallInterface, call_id = "+r+"set_window_title = "+(0,s.default)(n)),e.next=12,b.initCallInterface(r,1,1);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"showCallOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.changeCallToolBarShowStatus(!1)),!this.bigWinCtrl){e.next=5;break}R.warn("showCallOutPage no need for bigwin"),e.next=13;break;case 5:return R.info("showCallOutPage"),t={set_window_title:{title:$getState().call.userInfo.name}},n=(0,u.default)({},t),n.set_window_title.title=handlePhoneNumber(n.set_window_title.title),R.info("showCallOutPage init avc initCallInterface, set_window_title = ",n),r=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),e.next=13,b.initCallInterface(r,0,1);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"showVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSvc=coreConf.getIsSvcConf(),R.info("showVideoConnectedPage isSvcConf = "+this.isSvc),!this.isSvc){e.next=6;break}this.showSvcConfPage(),e.next=8;break;case 6:return e.next=8,this.showAvcConfPage();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"showCallConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.changeCallToolBarShowStatus(!1)),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),R.info("showCallConnectedPage audio callId  = "+handlePhoneNumber(t)),!b.isAvcNativeExsit()){e.next=7;break}b.updateLocalwindowCallId(t),e.next=11;break;case 7:return window.isCreatingAVCFrame=!0,e.next=10,b.initCallInterface(t,constant.AVC_VIEW_MODE.AUDIO_MODE,constant.SVC_VERSION_FLAG.BASE);case 10:window.isCreatingAVCFrame=!1;case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"showAvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),R.info("showAvcConfPage avc callId  = "+handlePhoneNumber(t)),n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_SUBJECT),!b.isAvcNativeExsit()){e.next=10;break}b.updateLocalwindowCallId(t),b.setViewMode(constant.AVC_VIEW_MODE.VIDEO_MODE),b.setSubject(n),b.initRemotWindow(t),e.next=16;break;case 10:return window.isCreatingAVCFrame=!0,e.next=13,b.initCallInterface(t,constant.AVC_VIEW_MODE.VIDEO_MODE,constant.SVC_VERSION_FLAG.BASE);case 13:return e.next=15,coreConf.initRemotWindow(t);case 15:window.isCreatingAVCFrame=!1;case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"callToConfFail",value:function(e,t){N.ToolbarManager.setConfHandle(""),E.SvcAtdManager.isNativeUIExsit()?(R.info("callToConfFail handlePlatformMessageBox1 isVideo"),coreCommon.isNeedQuickFeedback(e)?E.SvcAtdManager.alertBox(e+language.FEEDBACK_MESSAGE_TIPS,2,0,"feedback",language.FEEDBACK):E.SvcAtdManager.alertBox(e,2)):(R.info("callToConfFail handlePlatformMessageBox2 "),coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e]))}},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreConf.getSsrcRange(),R.info("svcSeessionModify,ssrcRange min is "+t.min+",max is "+t.max),coreConf.getSvcAtdManager().handleSvcSsrcModify(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"showSvcConfPage",value:function(){this.confConnectedSvc();var e=this.getSvcViewMode(),t=this.getSvcVersionFlag(),n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);if(R.info("showSvcConfPage svcViewMode = "+e+",svcVersionFlag = "+t+"callId = "+handlePhoneNumber(n)),window.isCreatingAVCFrame)var r=0,a=setInterval(function(){window.isCreatingAVCFrame?++r>50&&(clearInterval(a),R.info("showSvcConfPage initVideoFrame in creatting AVCFrame time = "+100*r+",please check!!!"),E.SvcAtdManager.initVideoFrame(n,e,t)):(clearInterval(a),R.info("showSvcConfPage initVideoFrame after create AVCFrame time = "+100*r),E.SvcAtdManager.initVideoFrame(n,e,t))},100);else R.info("showSvcConfPage window.isCreatingAVCFrame = "+window.isCreatingAVCFrame),E.SvcAtdManager.initVideoFrame(n,e,t)}},{key:"changeIsSvcConf",value:function(){if(this.isSvc)return void R.info("changeIsSvcConf is already svc, so return");R.info("changeIsSvcConf to svc"),this.isSvc=!0,this.showSvcConfPage()}},{key:"changeVideoToAudio",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("changeVideoToAudio"),t=$getState().conf.isShowMemberListNew,t&&$dispatch(coreUi.changeIsShowMemberListNew()),E.SvcAtdManager.closeVideoFrame(),E.SvcAtdManager.closeBfcpFrame(),b.closeBfcpFrame(),e.next=8,b.setViewMode(constant.AVC_VIEW_MODE.AUDIO_MODE);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"confConnectedSvc",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.info("confConnectedSvc"),t=coreConf.getSsrcRange(),n={ssrc:t.min},$dispatch(coreUi.changeSvcBigPicInfo(n)),coreConf.getIsRecall()&&E.SvcAtdManager.handleSvcSsrcModify(t);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeConfPage",value:function(e,t){R.info("closeConfPage"),e||(0,M.notifyNativeLeaveConf)(),b.closeCallInterface(),E.SvcAtdManager.closeVideoFrame(),E.SvcAtdManager.closeBfcpFrame(),E.SvcAtdManager.clear(),this.bigWinCtrl&&this.bigWinCtrl.NotifyMyLeaveConf(0),this.maxHubCtrl&&this.maxHubCtrl.NotifyMyLeaveConf(0),$dispatch(coreUi.changeShowPcConfInfoFlag(!1))}},{key:"showExitConfTip",value:function(e,t){if(R.info("showExitConfTip reasonCode = "+e+",exitTip = "+t),0!==e){if(7===e)return;coreCommon.isNeedQuickFeedback(t)?window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):alert(t,2)}}},{key:"notifyPluginLogout",value:function(){R.info("notifyPluginLogout"),this.bigWinCtrl&&this.bigWinCtrl.commonLogOut()}},{key:"showErrorMsgBox",value:function(e){E.SvcAtdManager.isNativeUIExsit()?(R.info("showErrorMsgBox isNative"),E.SvcAtdManager.alertBox(e,2)):(R.info("showErrorMsgBox isJS"),alert(language[e]))}},{key:"dealMemberList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("dealMemberList"),this.bigWinCtrl){e.next=8;break}if(!((t=$getState().conf.memberListInfo)&&t.length>0)||coreConf.isMemberListNull()){e.next=8;break}return R.info("handleSvcAtdList in confConnected, memberNum = "+t.length),n=this.sortByTime(t),e.next=8,E.SvcAtdManager.handleSvcAtdList(n);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSvcViewMode",value:function(){return R.info("getSvcViewMode"),this.bigWinCtrl?constant.SVC_VIEW_MODE.DIVIDE_MODE:this.maxHubCtrl?constant.SVC_VIEW_MODE.DIVIDE_MODE:constant.SVC_VIEW_MODE.BIG_SMALL_MODE}},{key:"getSvcVersionFlag",value:function(){return R.info("getSvcVersionFlag"),this.bigWinCtrl?constant.SVC_VERSION_FLAG.BIG:(this.maxHubCtrl,constant.SVC_VERSION_FLAG.BASE)}},{key:"sortByTime",value:function(e){R.info("sortByTime");var t=$getState().conf.svcOnLineAttendances;if(0===t.length)return e;for(var n=new Array,r=new Array,a=0;a<t.length;a++){for(var o=t[a],i=0;i<e.length;i++){var s=e[i];s.number!==o.number||5!==s.state||this.isInArray3(n,o.number)||r.push(s)}n.push(o.number)}for(var c=0;c<e.length;c++){var u=e[c];5===u.state&&n.indexOf(u.number)<0&&(r.push(u),n.push(u.number))}for(var f=0;f<e.length;f++){var l=e[f];n.indexOf(l.number)<0&&(r.push(l),n.push(l.number))}return r}},{key:"isInArray3",value:function(e,t){if(R.info("isInArray3"),e.indexOf&&"function"==typeof e.indexOf){if(e.indexOf(t)>=0)return!0}return!1}}]),t}(k.default);t.default=L},1776:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(300),u=(coreLogger.getLogger("UIConf")("BigWinCtrl"),function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"NotifyMyLeaveConf",value:function(e){(0,c.NotifyMyLeaveConf)(e)}},{key:"commonLogOut",value:function(){window.bigWinCommonLogOut()}}]),e}());t.default=u},1777:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(300),u=coreLogger.getLogger("UIConf")("MaxHubCtrl"),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"NotifyMyLeaveConf",value:function(e){u.info("NotifyMyLeaveConf rst = "+e),(0,c.NotifyMyLeaveConf)(e)}}]),e}();t.default=f},1778:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(132),m=r(h),v=n(133),g=r(v),C=n(1779),S=r(C),w=n(818),_=r(w),I=coreLogger.getLogger("UIConf")("mobileCtrl"),b=function(e){function t(){(0,l.default)(this,t);var e=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.showVideoPreview=function(){var t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),n=coreConf.getIsSvcConf();I.info("showVideoPreview, call_id = "+handlePhoneNumber(t)+",isSvcConf = "+n),window.callStatusChangeNotify(t,"VIDEO_OUT",!1,!0,n,e.isPairConf)},e.iTMeetingCtrl=window.CLIENTCONFIG.ENABLE_IT_MEETING?new S.default:null,e.isPairConf=$getState().synergismInfo.inPairConf?1:0,e.isSvc=!1,e.notifyIndex="",e.registerNotify(),e}return(0,g.default)(t,e),(0,p.default)(t,[{key:"registerNotify",value:function(){this.notifyIndex=coreCommon.Observer.subscribe("showVideoPreview",this.showVideoPreview)}},{key:"unRegisterNotify",value:function(){coreCommon.Observer.unsubscribeToken(this.notifyIndex)?I.info("unRegisterNotify success index = "+this.notifyIndex):I.error("unRegisterNotify fail index = "+this.notifyIndex)}},{key:"showVideoOutPage",value:function(){I.info("showVideoOutPage"),this.goCallMainRoute()}},{key:"showCallOutPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),t=coreConf.getIsSvcConf();I.info("showCallOutPage, call_id = "+handlePhoneNumber(e)),window.callStatusChangeNotify(e,"CALL_OUT",!1,!0,t,this.isPairConf),this.goCallMainRoute()}},{key:"goCallMainRoute",value:function(){var e=window.getRoute();I.info("goCallMainRoute currentPage = "+e),"callMain"!==e&&"mConfMemberPage"!==e&&window.goRoute("callMain")}},{key:"callToConfFail",value:function(e,t){var n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);n||(n=$getState().call.callId);var r=coreConf.getIsSvcConf();I.info("callToConfFail errorTitle = "+e+",newCallStatus = "+t+",call_id = "+handlePhoneNumber(n)+",isSvcConf = "+r),this.iTMeetingCtrl&&(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?coreCall.endCallService(n):window.callOrConfEnded()),window.callStatusChangeNotify(n,t,!0,!0,r,this.isPairConf);var a=window.getRoute();"callMain"!==a&&"mConfMemberPage"!==a||(I.info("callToConfFail produceCallMemberList"),coreCall.produceCallMemberList()),window.isPluginEnv||window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.ToastNew(language.CONFERENCE_CREATE_FAILED,2):coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e])}},{key:"confIncoming",value:function(e){var t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),n=coreConf.getIsSvcConf();I.info("confIncoming isVideo = "+e+",call_id = "+handlePhoneNumber(t)+",isSvcConf = "+n),this.iTMeetingCtrl&&window.switchToFront(),window.webView&&(e&&window.webView.initCallVideo(),window.webView.setFrontToLock()),this.goCallMainRoute(),window.callStatusChangeNotify(t,"CALL_INCOMING",!0,!0,n,this.isPairConf)}},{key:"changeAudioToVideo",value:function(){I.info("changeAudioToVideo"),window.webView&&window.webView.initCallVideo()}},{key:"changeVideoToAudio",value:function(){I.info("changeVideoToAudio"),window.webView&&window.webView.unInitCallVideo()}},{key:"showCallConnectedPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),t=coreConf.getIsSvcConf();I.info("showCallConnectedPage call_id = "+handlePhoneNumber(e)+",isSvcConf = "+t),window.callStatusChangeNotify(e,"CALL_CONNECTED",!0,!0,t,this.isPairConf),window.isInFloatWinMode()?I.info("showCallConnectedPage in float win mode not go call main "):this.goCallMainRoute()}},{key:"showVideoConnectedPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);this.isSvc=coreConf.getIsSvcConf(),I.info("showVideoConnectedPage call_id = "+handlePhoneNumber(e)+",isSvcConf = "+this.isSvc),this.recordDeviceOrient(),window.isSvcToNative(this.isSvc,e,!1),window.callStatusChangeNotify(e,"VIDEO_CONNECTED",!1,!0,this.isSvc,this.isPairConf),window.isInFloatWinMode()?I.info("showVideoConnectedPage in float win mode not go call main "):this.goCallMainRoute()}},{key:"recordDeviceOrient",value:function(){if(coreConf.getIsSvcConf())return void I.info("recordDeviceOrient no need for svcconf, so return");coreConf.getIsRecall()||I.info("recordDeviceOrient no need for not in recall,so return"),I.info("recordDeviceOrient");var e=$getState().call.deviceOrient;$dispatch(coreUi.recordMobileOrientChange(e))}},{key:"changeIsSvcConf",value:function(){if(this.isSvc)return void I.info("changeIsSvcConf is already svc, so return");var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);I.info("changeIsSvcConf to svc, call_id = "+handlePhoneNumber(e)+",this.isSvc = "+this.isSvc),this.isSvc=!0,coreCommon.CameraControl.getInstance().changeMobileVideoRender(),window.isSvcToNative(this.isSvc,e,!0)}},{key:"confInfoNotify",value:function(){I.info("confInfoNotify"),this.iTMeetingCtrl&&this.iTMeetingCtrl.confInfoNotify()}},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.svcNativeToJS,I.info("svcSeessionModify =",t),isNullOrEmpty(t)?(n=$getState().conf.svcMobileConfHandles,!isNullOrEmpty(n.remoteLargeViewIdx)&&isNullOrEmpty(t)&&(I.info("SvcNativeToJS then handlessrc -1;"),coreConf.handleSSRCURL(-1))):window.multiStreamPageInfoChangeNotify(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptConfStart",value:function(e){I.info("acceptConfStart isVideoType =",e),window.webView&&1===e&&window.webView.initCallVideo()}},{key:"rejectConf",value:function(){I.info("rejectConf"),window.webView&&window.webView.releaseFrontToLock(),window.callOrConfEnded(),"callMain"===window.getRoute()&&(I.info("mobile end conf"),history.back())}},{key:"closeConfPage",value:function(e,t,n){var r=$getState().conf.isSvcConf?1:0,a=$getState().call.callId;I.info("closeConfPage isUserActive = "+e+",isEndConf = "+t+",isSvcConf = "+r+",call_id = "+handlePhoneNumber(a)+",backPage = "+n),window.callOrConfEnded();var o=$getState().call.callStatus;if("VIDEO_OUT"!==o&&"VIDEO_CONNECTED"!==o||window.callStatusChangeNotify(a,"VIDEO_END",!1,!0,r,this.isPairConf),this.iTMeetingCtrl)window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(t=!1),this.iTMeetingCtrl.closeConfPage(e,t);else{"loginCtn"!==window.getRoute()&&(isNullOrEmpty(n)||window.goRoute(n,!0))}this.unRegisterNotify()}},{key:"showExitConfTip",value:function(e,t){if(I.info("showExitConfTip reasonCode = "+e+",exitTip = "+t),this.iTMeetingCtrl)this.iTMeetingCtrl.showExitConfTip(e,t);else if(!window.isPluginEnv){if(7===e)return;0===e?window.ToastNew(t,2):coreCommon.isNeedQuickFeedback(t)?window.CLIENTCONFIG.ENABLE_IT_MEETING||window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):this.alterNotInCallMain(t)}}},{key:"notifyPluginLogout",value:function(){I.info("notifyPluginLogout"),this.iTMeetingCtrl&&this.iTMeetingCtrl.endConfLogout()}},{key:"showErrorMsgBox",value:function(e){I.info("showErrorMsgBox errorTitle = "+e),alert(language[e])}},{key:"alterNotInCallMain",value:function(e){var t=this,n=window.getRoute();I.info("alterNotInCallMain:",n),"callMain"===n?setTimeout(function(){t.alterNotInCallMain(e)},100):alert(e)}}]),t}(_.default);t.default=b},1779:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(1780),u=r(c),f=coreLogger.getLogger("UIConf")("ITMeetingCtrl"),l=function(){function e(){(0,o.default)(this,e),this.hWITMeeting=window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?new u.default:null,this.callOutTimer=0,this.isSwitchedToBackMode=!1}return(0,s.default)(e,[{key:"confInfoNotify",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_SERVER_ID);e&&(window.confConnectInfo?window.confConnectInfo[e]||(window.confConnectInfo[e]=1):(window.confConnectInfo={},window.confConnectInfo[e]=1)),f.info("confConnected is confid :"+e),this.hWITMeeting&&this.hWITMeeting.confInfoNotify()}},{key:"closeConfPage",value:function(e,t){if(f.info("closeConfPage isUserActive  = "+e+",isEndConf = "+t),this.hWITMeeting)window.changeScreenOrientation(constant.SCREEN_ORIENTATION.SCREEN_ORIENTATION_PORTRAIT),window.switchToBackMode(),this.isSwitchedToBackMode=!0;else{var n=!0;window.requestPermissionPromise&&(n=!1,window.requestPermissionPromise.resolve(!1)),window.goRoute("main/conference"),n&&(e&&t||!e)&&(window.switchToBackMode(),this.isSwitchedToBackMode=!0)}}},{key:"showExitConfTip",value:function(e,t){f.info("showExitConfTip reasonCode  = "+e+",exitTip = "+t),this.isSwitchedToBackMode?window.itWeLinkNotifyCallEnded(e,t):0===e?window.ToastNew(t,2):alert(t)}},{key:"endConfLogout",value:function(){f.info("endConfLogout"),this.hWITMeeting&&this.hWITMeeting.endConfLogout()}}]),e}();t.default=l},178:function(e,t,n){n(179),e.exports=n(8).Object.keys},1780:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("HWITMeetingCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"confInfoNotify",value:function(){c.info("confInfoNotify");$getState().call.callStatus,coreConf.getIsSvcConf()}},{key:"endConfLogout",value:function(){c.info("[IT-Meeting] leave conf, dologout"),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT)}}]),e}();t.default=u},1781:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.p2pTransToConfCreateGroup=t.confTransToConfRefreshRecent=t.acceptConfRefreshRecent=t.confInComingRefreshRecent=t.createConfToRefreshRecent=void 0;var a=n(135),o=r(a),i=n(142),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=coreLogger.getLogger("conf")("iMctrl"),p=(t.createConfToRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=3,p(t.group_id,!1,!0);case 3:e.next=7;break;case 5:return e.next=7,p(t.group_id,!1,!0);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confInComingRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("confInComingRefreshRecent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),e.next=4,p(t,!1,!0);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.acceptConfRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("acceptConfRefreshRecent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=5,p(t,!0,!0);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.confTransToConfRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("be trans to conf, refresh recent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),window.CLIENTCONFIG.ISMOBILE){e.next=7;break}return e.next=5,p(t,!0,!0,!0);case 5:e.next=9;break;case 7:return e.next=9,p(t,!1,!0,!0);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.p2pTransToConfCreateGroup=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a){var o,i,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=h(t,n,r,a),i=o.groupMemList,c=o.groupNumList,f=o.totalGroupList,l="",!window.CLIENTCONFIG.USE_IM){e.next=15;break}return e.next=5,m(i,f);case 5:if(l=e.sent,c&&c>0&&(d.info("add number to group"),coreGroup.addGroupPhoneMemberService({groupId:l,phoneList:[].concat((0,s.default)(c))})),!l){e.next=15;break}if(window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return e.next=11,p(l,!0,!0,!0);case 11:e.next=15;break;case 13:return e.next=15,p(l,!1,!0,!0);case 15:return e.abrupt("return",l);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("refresh recent by groupid: "+t),window.CLIENTCONFIG.USE_IM){e.next=3;break}return e.abrupt("return");case 3:if(!t){e.next=15;break}if(!r){e.next=12;break}return e.next=7,coreIm.createGroupConversation({group_id:t},!1,!0);case 7:a=e.sent,o=a.recent,i=a.group,coreIm.refreshRecentList(o),o.unread_num>0&&$dispatch(coreUi.changeHasUnreadMsg(!0));case 12:if(!n){e.next=15;break}return e.next=15,coreIm.openGroupConversationByConf({group_id:t},!1,!s);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),h=function(e,t,n,r){for(var a=[],i=[],s=[],c=0;c<e.length;c++)e[c].number===e[c].bind_no&&e[c].account!==n.account&&e[c].account!==t.account?a.push((0,o.default)({},e[c])):i.push({phone:e[c].number}),e[c].account!==n.account&&e[c].account!==t.account&&s.push((0,o.default)({},e[c]));if(n.bind_no===r){-1===a.findIndex(function(e){return e.account===n.account})&&a.push((0,o.default)({},n))}else i.push({phone:r});return s.push((0,o.default)({},n)),{groupMemList:a,groupNumList:i,totalGroupList:s}},m=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreGroup.createDiscussionGroup({list:t});case 2:if(!(n=e.sent)||!n.group_id){e.next=8;break}return d.info("p2p trans to conf create discuss group successed: ",n.group_id),e.abrupt("return",n.group_id);case 8:return d.info("p2p trans to conf create discuss group failed"),e.abrupt("return","");case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},1782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreLogger.getLogger("conf")("errorInConf");t.getCallEndedErrorTip=function(e,t){r.info("getCallEndedErrorTitle, reasonCode = "+e+",endcall_reason = "+t);return 404===e?language.ENTER_CONF_NO_FOUND:490===e?language.CONF_TIME_CONFLICT:4041===e?language.IT_CONF_NOT_STARTED:4042===e?language.IT_CONF_ENDED:403===e&&t.indexOf("PasswordError")>-1?language.CONF_PW_ERROR:t.indexOf("ConferenceIsLock")>-1?language.LANG_NATIVE_MEETING_LOCKED:t.indexOf("ServerError_allocate seat resource")>-1?language.CONF_RESOURCE_NULL:t.indexOf("11081006")>-1?language.PASSWORD_NOT_CORRECT:~t.indexOf("11076003")?language.CONFERENCE_MEMBER_RESOURCE_HAS_BEEN_RUN_OUT:~t.indexOf("15022001")?language.CORP_CONFERENCE_RESOURCE_HAS_BEEN_RUN_OUT:t.indexOf("11071058")>-1?language.VMR_MEETING_HAS_NOT_BEEN_HOLD_YET:language.ENTER_CONF_FAIL},t.getEnterConfByIdOnlyTip=function(e){r.info("getEnterConfByIdOnlyTip errorCode = "+e);return 11017===e?language.CONF_NOT_EXIST:-2===e?language.ENTER_CONF_FAIL:isNullOrEmpty(language[constant.AS_ERRORCODE_LOG_INFO[e]])?language.CONF_GET_AUTH_INFO_FAILED:language[constant.AS_ERRORCODE_LOG_INFO[e]]},t.getCreateConfFailTitle=function(e){r.info("getCreateConfFailTitle errorCode = "+e);return 285212898===e?language.CREATE_CONF_FAILED_REASON1:285212899===e?language.CREATE_CONF_FAILED_REASON2:285212900===e?language.CREATE_CONF_FAILED_REASON3:285212901===e?language.CREATE_CONF_FAILED_REASON4:3===e?language.CONFERENCE_CREATE_FAILED_BEACASE_OF_NETWORK:11047===e||11196===e?language.RECORDING_CONFERENCE_FUNCTION_IS_NOT_ENABLED:11085===e||11136===e||11071005===e?language.CONF_TIME_CONFLICT:795===e?language.INSUFFICIENT_RECORD_RESOURCES:50331819===e?language.RECORDING_VENUE_IS_NOT_INCLUDED:10001===e?language.CREATE_CONF_FAILED_NO_RECORD:isNullOrEmpty(language[constant.AS_ERRORCODE_LOG_INFO[e]])?language.CONFERENCE_CREATE_FAILED:language[constant.AS_ERRORCODE_LOG_INFO[e]]},t.CREATE_CONF_ERR={SUCCESS:{code:0,msg:"成功"},OUT_MEMBER_LIMIT:{code:4001,msg:"与会人数超过最大限制"},MEMBER_EMPTY:{code:4002,msg:"与会人数为空，不能创建会议"},MULTI_DEVICE_LOGIN:{code:4003,msg:"有其他设备登录该账户，不能创建/加入会议"},OFFLINE:{code:4004,msg:"离线状态，不能创建/加入会议"},SIP_FAIL:{code:4005,msg:"协议注册失败"},EXIST_CONF:{code:4006,msg:"已经存在一路会议，不能创建/加入"},EXIST_CALL:{code:4007,msg:"已经存在一路呼叫，不能创建/加入"},EXIST_SIM_CALL:{code:4008,msg:"正在通话中"},PERMSSION_REJECT:{code:4009,msg:"移动端没有权限不能创建会议"},NET_2G:{code:4010,msg:"2G网络下不支持视频通话"},USER_CANCEL:{code:4011,msg:"3g/4g下用户取消创建/加入会议"},NO_NICK_NAME:{code:4012,msg:"用户昵称为空"},ADDRESS_EMPTY:{code:4013,msg:"服务器地址为空"},PORT_EMPTY:{code:4014,msg:"服务器端口为空"}}},1783:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(2),u=r(c),f=n(3),l=r(f),d=n(4),p=r(d),h=n(5),m=r(h),v=n(950),g=r(v),C=coreLogger.getLogger("conf")("model/confutil"),S=function(){function e(){(0,p.default)(this,e)}return(0,m.default)(e,null,[{key:"getPromise",value:function(){var e={};return e.promise=new l.default(function(t,n){e.resolve=t,e.reject=n}),e}},{key:"oneKeyEnterConfTup",value:function(){function t(e,t,r,a){return n.apply(this,arguments)}var n=(0,u.default)(o.default.mark(function t(n,r,a,i){var c,u,f,l,d,p,h,m,v,S=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c={errorCode:-1,callId:""},C.info("one[Key]EnterConfTup isVideo: "+i),t.next=4,coreTup.getCallInstance();case 4:if(u=t.sent,!g.default.getInterfaceToOneKeyEnterConf()){t.next=13;break}return f={pstconfparam:{confid:r,access_code:n,conf_paswd:a},call_type:!1===i?0:1},t.next=9,u.oneKeyEnterConf(f);case 9:l=t.sent,l&&0===l.result?(c.errorCode=0,l&&l.param&&l.param.callID&&(c.callId=l.param.callID)):(l&&(c.errorCode=l.result),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),C.info("one[Key]EnterConf fail, res = "+(0,s.default)(l))),t.next=50;break;case 13:if(d=n+"*"+a+"#",S&&g.default.getDeployMode()===constant.MEETING_NET_TYPE.SMC_MEETING&&(d=n+r+"*"+a),p=e.getPromise(),u.setNotifyFunc(98308,function(e){p.resolve(e)}),h=e.getPromise(),u.setNotifyFunc(98306,function(e){h.resolve(e)}),m=null,!g.default.getInterfaceToStartVipCall()||!i){t.next=26;break}return t.next=23,u.startVipCall(d,i,this.callInfo.addrVip);case 23:m=t.sent,t.next=29;break;case 26:return t.next=28,u.startCall(d,i);case 28:m=t.sent;case 29:if(C.info("start call result = "+m.result),!m||0!==m.result){t.next=34;break}m.param&&(c.callId=m.param.call_id),t.next=37;break;case 34:return m&&(c.errorCode=m.result),u.setNotifyFunc(98308,null),t.abrupt("return",c);case 37:return t.next=39,h.promise;case 39:if(v=t.sent,C.info("CALL_E_EVT_CALL_STARTCALL_RESULT result = "+v.param.result),!v||!v.param||0!==v.param.result){t.next=48;break}return t.next=44,p.promise;case 44:c.errorCode=0,u.setNotifyFunc(98308,null),t.next=50;break;case 48:v&&v.param?c.errorCode=v.param.result:C.error("startCallResult fail ="+(0,s.default)(v)),u.setNotifyFunc(98308,null);case 50:return t.abrupt("return",c);case 51:case"end":return t.stop()}},t,this)}));return t}()}]),e}();t.default=S},1784:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("conf/svc")("model"),p=function(){function e(){(0,u.default)(this,e),this.ssrcRange={min:0,max:24},this.needChangeSSRC=!1,this.isInited=!1}return(0,l.default)(e,[{key:"getSsrcRange",value:function(){return this.ssrcRange}},{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInited){e.next=3;break}return d.info("already init,so return"),e.abrupt("return");case 3:return d.info("svc init,callId = "+handlePhoneNumber(t)),this.isInited=!0,this.callId=t,window.hasDealAttendeeUpdateEvent=0,e.next=9,this.changeBandMode();case 9:return e.next=11,this.setResolution();case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeBandMode",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return d.info("changeBandMode is no need for bigwin"),e.abrupt("return");case 3:return d.info("changeBandMode start"),e.next=6,coreCall.getBasicBandInfo(this.callId);case 6:t=e.sent,d.info("svcModeBand is ",t),t>0&&t<1024?($dispatch(coreUi.changeSvcBandMode(constant.SVC_BAND_MODE.LOW_BAND)),window.CLIENTCONFIG.ISWIN?$dispatch(coreUi.changeConfViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)):$dispatch(coreUi.changeConfViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE))):t<2048&&t>=1024&&($dispatch(coreUi.changeSvcBandMode(constant.SVC_BAND_MODE.MIDDLE_BAND)),$dispatch(coreUi.changeMaxSizeForPage(constant.SVC_MAX_SIZE_FOR_PAGE.LOW_BS_MAX_SIZE)));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"setResolution",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("svc setResolution start"),window.CLIENTCONFIG.ISMOBILE?coreConf.getSvcAttendanceManager().setMobileMaxEncodeResolution(this.callId):coreConf.getSvcAttendanceManager().setDesktopMaxEncodeResolution(),e.next=4,coreConf.getSvcAttendanceManager().setMaxWatchResolutionByLevelId(this.callId);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeSsrcRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.needChangeSSRC)return void d.info("already needChangeSSRC, so return");t&&(this.needChangeSSRC=!0);var n={min:0,max:24};if(isNullOrEmpty(e.svc_lable)||(n={min:e.svc_lable[0],max:e.svc_lable[1]}),isNullOrEmpty(e.svc_lables)||(n={min:e.svc_lables[0],max:e.svc_lables[1]}),n.min>=n.max){var r=n.max;n.max=n.min,n.min=r}d.info("ssrcRange min is "+n.min+",max is "+n.max),this.ssrcRange=n,coreCommon.Observer.publish("changeSsrcRange",n)}}]),e}();t.default=p},1785:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.confctrlInit=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.unInitConfCtrl=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.createConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.p2pTransferConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.oneKeyEnterConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterConfInConfListService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterConfByIdOnlyService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.rejectConfService=function(e){},r.acceptConfService=function(e){},r.upgradeConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.leaveConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.endConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.bookConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.cancelConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getVMRListService=function(){},r.getConfListService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.subscribeConfList=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getConfInfoService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.reInviteAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.addAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.hangupAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.callAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.removeAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.muteAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handupService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.muteConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.allowUnmuteConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.lockConfService=function(e){},r.postponeConfSerivce=function(e){},r.releaseChairman=function(e){},r.requestChairman=function(e){},r.transferChairmanService=function(e){},r.changeNickName=function(e){},r.broadcastAttendeeService=function(e){},r.sendWatchSvcRequestService=function(e){},r.confctrlWatchAttendee=function(e){},r.changeActiveDirection=function(e){},r.cloudRecordRequest=function(e){},r.updateConfMemberList=function(e){},r.changeConfSelfRole=function(e){},r.isInConf=function(){},r.isNeedUpdate2DataConf=function(){},r.isConfChairMan=function(){},r.getIsSmcFirstRequestCharimanRest=function(){},r.setIsSmcFirstRequestCharimanRest=function(e){},r.getIsFirstEnterConf=function(){},r.setIsFirstEnterConf=function(e){},r.getIsRecall=function(){},r.isMemberListNull=function(){},r.getConfMemberListContent=function(){},r.getSavedRecallInfo=function(){},r.getCurrentConfId=function(){},r.setIsAvcMultiViewBroadcast=function(e){},r.getIsAvcMultiViewBroadcast=function(){},r.getIsVideoConf=function(){},r.getIsDataConf=function(){},r.getIsSvcConf=function(){},r.getSsrcRange=function(){},r.getInfoOfConf=function(){},r.unSubscribeConfList=function(){},r.isInReCall=function(){},r.terminateReCall=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.reCallStart=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.reCallEnterConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getConfInfoMap=function(){},r.confHandUp=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getHandUpState=function(e){},r.showConfMemberList=function(){},r.isSendScreenSharing=function(){},r.isSendingWBSharing=function(){},r.changeVmrInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,m.default)(t,e),t}(coreCommon.Interface);t.default=v},1786:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.bigWinConfApiImpl=t.getBigWinConfApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(132),m=r(h),v=n(133),g=r(v),C=n(1787),S=r(C),w=n(952),_=n(953),I=n(631),b=r(I),N=n(300),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(N),y=n(819),T=n(955),O=n(956),A=coreLogger.getLogger("module")("conf"),x=window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN,k=void 0,M=(t.getBigWinConfApi=function(){return isNullOrEmpty(k)&&(k=new M),k},t.bigWinConfApiImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return n.initConf=(0,s.default)(o.default.mark(function t(){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=8;break}n.initBigwinWebSocket(),(0,w.initWebSocketAPI)(),(0,w.registerBigWinEvent)(),e.next=17;break;case 8:if(!window.isHubEnv){e.next=17;break}return A.info("It's maxhub environment, set isHubEnv=true"),r=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE+"_IWB",coreUt.utConfigAppId({configAppId:r}),(0,w.registerMaxhubEvent)(),a={pairCode:0,validTime:0,tmpKey:""},(0,_.creatQrCodeSvg)(a),e.next=17,(0,w.initWebSocketAPI)();case 17:case"end":return e.stop()}},t,e)})),n.NotifyLoginSuccess=function(){if(x)return E.NotifyLoginSuccess()},n.NotifyLoginFailed=function(e){if(x)return E.NotifyLoginFailed(e)},n.NotifyConfTermination=function(e){if(x)return E.NotifyConfTermination(e)},n.NotifyConfNoStart=function(e){if(x)return E.NotifyConfNoStart(e)},n.NotifyMyKickedOut=function(e){if(x)return E.NotifyMyKickedOut(e)},n.NotifyStartSharing=function(e,t){if(x)return E.NotifyStartSharing(e,t)},n.NotifyStopSharing=function(e,t){if(x)return E.NotifyStopSharing(e,t)},n.NotifyLocalStartSharing=function(e,t){if(x)return E.NotifyLocalStartSharing(e,t)},n.NotifyLocalStopSharing=function(e,t){if(x)return E.NotifyLocalStopSharing(e,t)},n.NotifyMyJoinConf=function(e,t){if(x)return E.NotifyMyJoinConf(e,t)},n.NotifyMyLeaveConf=function(e){if(x)return E.NotifyMyLeaveConf(e)},n.NotifyJoinConfFailed=function(e){if(x)return E.NotifyJoinConfFailed(e)},n.NotifyLocalMICStatus=function(e,t){if(x)return E.NotifyLocalMICStatus(e,t)},n.NotifyLocalSPKStatus=function(e,t){if(x)return E.NotifyLocalSPKStatus(e,t)},n.NotifyLocalMicVolue=function(e,t){if(x)return E.NotifyLocalMicVolue(e,t)},n.NotifyLocalSpkVolue=function(e,t){if(x)return E.NotifyLocalSpkVolue(e,t)},n.NotifyLocalMicPull=function(e,t,n){if(x)return E.NotifyLocalMicPull(e,t,n)},n.NotifyLocalSpkPull=function(e,t,n){if(x)return E.NotifyLocalSpkPull(e,t,n)},n.NotifyLocalCameraPull=function(e,t,n){if(x)return E.NotifyLocalCameraPull(e,t,n)},n.NotifyLocalCameraStatus=function(e,t){if(x)return E.NotifyLocalCameraStatus(e,t)},n.NotifySharingAppClouse=function(e,t){return E.NotifySharingAppClouse(e,t)},n.NotifyCameraListUpdate=function(e){if(x)return E.NotifyCameraListUpdate(e)},n.NotifyDeviceListReady=function(){return E.NotifyDeviceListReady()},n.NotifyJoinConfFailedEx=function(e){return E.NotifyJoinConfFailedEx(e)},n.NotifyLoginFailedEx=function(e){if(x)return E.NotifyLoginFailedEx(e)},n.NotifyAppStared=function(e){if(x)return E.NotifyAppStared(e)},n.NotifySharingType=function(e,t){if(x)return E.NotifySharingType(e,t)},n.NotifySipRegisterd=function(e){if(x)return E.NotifySipRegisterd(e)},n.NotifySkipLogin=function(e){if(x)return E.NotifySkipLogin(e)},n.NotifyShareResult=function(e,t,n){if(x)return E.NotifyShareResult(e,t,n)},n.NotifyGetUpdateFiles=function(e,t){if(x)return E.NotifyGetUpdateFiles(e,t)},n.setServerIp=function(e){if(x)return(0,y.setServerIp)(e)},n.buriedJoinConfFailed=function(){var t=(0,s.default)(o.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y.joinConfFailed)(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.buriedNormalEnd=function(e,t,n){if(x)return(0,T.normalEnd)(e,t,n)},n.buriedUnormalEnd=function(e,t){if(x)return(0,T.unnormalEnd)(e,t)},n.buriedStartRecordQos=function(){if(x)return(0,O.startRecordQos)()},n.buriedJoinConfSuccess=function(){var t=(0,s.default)(o.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4096,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y.joinConfSuccess)(n,r,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.buriedStartCalcCPUUsage=function(){if(x)return(0,y.startCalcCPUUsage)()},n.buriedShareScreenOper=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y.shareScreenOper)(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.buriedRemoteScreenShare=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y.remoteScreenShare)(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n}return(0,g.default)(t,e),(0,p.default)(t,[{key:"initBigwinWebSocket",value:function(){x&&(new b.default,coreSecurity.getHWTupSupport(),coreTup.getConfCtrlInstance(),coreTup.getToolInstance(),coreTup.getdataConfInstance(),coreTup.getNativeWindowInstance(),coreDb.queryLoginSetting({key:"init-query"}))}}]),t}(S.default))},1787:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.initConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.NotifyLoginSuccess=function(){},r.NotifyLoginFailed=function(e){},r.NotifyConfTermination=function(e){},r.NotifyConfNoStart=function(e){},r.NotifyMyKickedOut=function(e){},r.NotifyStartSharing=function(e,t){},r.NotifyStopSharing=function(e,t){},r.NotifyLocalStartSharing=function(e,t){},r.NotifyLocalStopSharing=function(e,t){},r.NotifyMyJoinConf=function(e,t){},r.NotifyMyLeaveConf=function(e){},r.NotifyJoinConfFailed=function(e){},r.NotifyLocalMICStatus=function(e,t){},r.NotifyLocalSPKStatus=function(e,t){},r.NotifyLocalMicVolue=function(e,t){},r.NotifyLocalSpkVolue=function(e,t){},r.NotifyLocalMicPull=function(e,t,n){},r.NotifyLocalSpkPull=function(e,t,n){},r.NotifyLocalCameraPull=function(e,t,n){},r.NotifyLocalCameraStatus=function(e,t){},r.NotifySharingAppClouse=function(e,t){},r.NotifyCameraListUpdate=function(e){},r.NotifyDeviceListReady=function(){},r.NotifyJoinConfFailedEx=function(e){},r.NotifyLoginFailedEx=function(e){},r.NotifyAppStared=function(e){},r.NotifySharingType=function(e,t){},r.NotifySipRegisterd=function(e){},r.NotifySkipLogin=function(e){},r.NotifyShareResult=function(e,t,n){},r.NotifyGetUpdateFiles=function(e,t){},r.setServerIp=function(e){},r.buriedJoinConfFailed=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.buriedNormalEnd=function(e,t,n){},r.buriedUnormalEnd=function(e,t){},r.buriedStartRecordQos=function(){},r.buriedJoinConfSuccess=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.buriedStartCalcCPUUsage=function(){},r.buriedShareScreenOper=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.buriedRemoteScreenShare=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,m.default)(t,e),t}(coreCommon.Interface);t.default=v},1788:function(e,t,n){"use strict";(function(t,r){function a(e,t){e="string"==typeof e?{ec_level:e}:e||{};var n={type:String(t||e.type||"png").toLowerCase()},r="png"==n.type?p:h;for(var a in r)n[a]=a in e?e[a]:r[a];return n}function o(e,n){n=a(n);var r=u(e,n.ec_level,n.parse_url),o=new c;switch(o._read=d,n.type){case"svg":case"pdf":case"eps":t.nextTick(function(){l[n.type](r,o,n.margin,n.size)});break;case"svgpath":t.nextTick(function(){var e=l.svg_object(r,n.margin,n.size);o.push(e.path),o.push(null)});break;case"png":default:t.nextTick(function(){var e=f.bitmap(r,n.size,n.margin);n.customize&&n.customize(e),f.png(e,o)})}return o}function i(e,t){t=a(t);var n,o=u(e,t.ec_level,t.parse_url),i=[];switch(t.type){case"svg":case"pdf":case"eps":l[t.type](o,i,t.margin,t.size),n=i.filter(Boolean).join("");break;case"png":default:var s=f.bitmap(o,t.size,t.margin);t.customize&&t.customize(s),f.png(s,i),n=r.concat(i.filter(Boolean))}return n}function s(e,t){t=a(t,"svg");var n=u(e,t.ec_level);return l.svg_object(n,t.margin)}var c=n(268).Readable,u=n(1789).QR,f=n(1793),l=n(1802),d=function(){},p={parse_url:!1,ec_level:"M",size:5,margin:4,customize:null},h={parse_url:!1,ec_level:"M",margin:1,size:0};e.exports={matrix:u,image:o,imageSync:i,svgObject:s}}).call(t,n(157),n(144).Buffer)},1789:function(e,t,n){"use strict";(function(t){function r(e){return JSON.parse(JSON.stringify(e))}function a(e,t){var n,a=1;for(e.data1?n=Math.ceil(e.data1.length/8):a=10;a<10;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}for(e.data10?n=Math.ceil(e.data10.length/8):a=27;a<27;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}for(n=Math.ceil(e.data27.length/8);a<41;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}throw new Error("Too much data")}function o(e,n){var r=new t(n.data_len);r.fill(0),e=n.version<10?e.data1:n.version<27?e.data10:e.data27;for(var a=e.length,o=0;o<a;o+=8){for(var i=0,s=0;s<8;s++)i=i<<1|(e[o+s]?1:0);r[o/8]=i}for(var u=236,o=Math.ceil((a+4)/8);o<r.length;o++)r[o]=u,u=236==u?17:236;var f=0;return n.blocks=n.blocks.map(function(e){var t=r.slice(f,f+e);return f+=e,n.ec.push(c(t,n.ec_len)),t}),n}function i(e,t,n){t=f.indexOf(t)>-1?t:"M";var r=s(e,n),i=o(r,a(r,t));return u.getMatrix(i)}var s=n(1790),c=n(1791),u=n(1792),f=["L","M","Q","H"],l=[[],[26,7,1,10,1,13,1,17,1],[44,10,1,16,1,22,1,28,1],[70,15,1,26,1,36,2,44,2],[100,20,1,36,2,52,2,64,4],[134,26,1,48,2,72,4,88,4],[172,36,2,64,4,96,4,112,4],[196,40,2,72,4,108,6,130,5],[242,48,2,88,4,132,6,156,6],[292,60,2,110,5,160,8,192,8],[346,72,4,130,5,192,8,224,8],[404,80,4,150,5,224,8,264,11],[466,96,4,176,8,260,10,308,11],[532,104,4,198,9,288,12,352,16],[581,120,4,216,9,320,16,384,16],[655,132,6,240,10,360,12,432,18],[733,144,6,280,10,408,17,480,16],[815,168,6,308,11,448,16,532,19],[901,180,6,338,13,504,18,588,21],[991,196,7,364,14,546,21,650,25],[1085,224,8,416,16,600,20,700,25],[1156,224,8,442,17,644,23,750,25],[1258,252,9,476,17,690,23,816,34],[1364,270,9,504,18,750,25,900,30],[1474,300,10,560,20,810,27,960,32],[1588,312,12,588,21,870,29,1050,35],[1706,336,12,644,23,952,34,1110,37],[1828,360,12,700,25,1020,34,1200,40],[1921,390,13,728,26,1050,35,1260,42],[2051,420,14,784,28,1140,38,1350,45],[2185,450,15,812,29,1200,40,1440,48],[2323,480,16,868,31,1290,43,1530,51],[2465,510,17,924,33,1350,45,1620,54],[2611,540,18,980,35,1440,48,1710,57],[2761,570,19,1036,37,1530,51,1800,60],[2876,570,19,1064,38,1590,53,1890,63],[3034,600,20,1120,40,1680,56,1980,66],[3196,630,21,1204,43,1770,59,2100,70],[3362,660,22,1260,45,1860,62,2220,74],[3532,720,24,1316,47,1950,65,2310,77],[3706,750,25,1372,49,2040,68,2430,81]];l=l.map(function(e,t){if(!t)return{};for(var n={},r=1;r<8;r+=2){for(var a=e[0]-e[r],o=e[r+1],i=f[r/2|0],s={version:t,ec_level:i,data_len:a,ec_len:e[r]/o,blocks:[],ec:[]},c=o,u=a;c>0;c--){var l=u/c|0;s.blocks.push(l),u-=l}n[i]=s}return n}),e.exports={QR:i,getTemplate:a,fillTemplate:o}}).call(t,n(144).Buffer)},179:function(e,t,n){var r=n(141),a=n(164);n(146)("keys",function(){return function(e){return a(r(e))}})},1790:function(e,t,n){"use strict";(function(t){function n(e,t,n){for(var r=1<<t-1;r;r>>>=1)e.push(r&n?1:0)}function r(e){for(var t=e.length,r=[],a=0;a<t;a++)n(r,8,e[a]);var o={},i=[0,1,0,0];if(n(i,16,t),o.data10=o.data27=i.concat(r),t<256){var i=[0,1,0,0];n(i,8,t),o.data1=i.concat(r)}return o}function a(e){for(var t=e.length,r=[],a=0;a<t;a+=2){var o=6,i=c[e[a]];e[a+1]&&(o=11,i=45*i+c[e[a+1]]),n(r,o,i)}var s={},u=[0,0,1,0];if(n(u,13,t),s.data27=u.concat(r),t<2048){var u=[0,0,1,0];n(u,11,t),s.data10=u.concat(r)}if(t<512){var u=[0,0,1,0];n(u,9,t),s.data1=u.concat(r)}return s}function o(e){for(var t=e.length,r=[],a=0;a<t;a+=3){var o=e.substr(a,3);n(r,Math.ceil(10*o.length/3),parseInt(o,10))}var i={},s=[0,0,0,1];if(n(s,14,t),i.data27=s.concat(r),t<4096){var s=[0,0,0,1];n(s,12,t),i.data10=s.concat(r)}if(t<1024){var s=[0,0,0,1];n(s,10,t),i.data1=s.concat(r)}return i}function i(e){var t=e.indexOf("/",8)+1||e.length,n=s(e.slice(0,t).toUpperCase(),!1);if(t>=e.length)return n;var r=s(e.slice(t),!1);return n.data27=n.data27.concat(r.data27),n.data10&&r.data10&&(n.data10=n.data10.concat(r.data10)),n.data1&&r.data1&&(n.data1=n.data1.concat(r.data1)),n}function s(e,n){var s,c=typeof e;if("string"==c||"number"==c)s=""+e,e=new t(s);else if(t.isBuffer(e))s=e.toString();else{if(!Array.isArray(e))throw new Error("Bad data");e=new t(e),s=e.toString()}if(/^[0-9]+$/.test(s)){if(e.length>7089)throw new Error("Too much data");return o(s)}if(/^[0-9A-Z \$%\*\+\.\/\:\-]+$/.test(s)){if(e.length>4296)throw new Error("Too much data");return a(s)}if(n&&/^https?:/i.test(s))return i(s);if(e.length>2953)throw new Error("Too much data");return r(e)}var c=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=n;return t}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");e.exports=s}).call(t,n(144).Buffer)},1791:function(e,t,n){"use strict";(function(t){function n(e){for(;e<0;)e+=255;for(;e>255;)e-=255;return o[e]}function r(e){if(e<1||e>255)throw Error("Bad log("+e+")");return i[e]}function a(e){if(u[e])return u[e];var t=a(e-1),o=[];o[0]=t[0];for(var i=1;i<=e;i++)o[i]=r(n(t[i])^n(t[i-1]+e-1));return u[e]=o,o}for(var o=[1],i=[],s=1;s<256;s++){var c=o[s-1]<<1;c>255&&(c^=285),o[s]=c}for(var s=0;s<255;s++)i[o[s]]=s;var u=[[0],[0,0],[0,25,1]];e.exports=function(e,o){e=[].slice.call(e);for(var i=a(o),s=0;s<o;s++)e.push(0);for(;e.length>o;)if(e[0]){for(var c=r(e[0]),s=0;s<=o;s++)e[s]=e[s]^n(i[s]+c);e.shift()}else e.shift();return new t(e)}}).call(t,n(144).Buffer)},1792:function(e,t,n){"use strict";(function(t){function n(e){var n=4*e+17,r=[],a=new t(n);a.fill(0),a=[].slice.call(a);for(var o=0;o<n;o++)r[o]=a.slice();return r}function r(e){for(var t=e.length,n=-3;n<=3;n++)for(var r=-3;r<=3;r++){var a=Math.max(n,r),o=Math.min(n,r),i=2==a&&o>=-2||-2==o&&a<=2?128:129;e[3+n][3+r]=i,e[3+n][t-4+r]=i,e[t-4+n][3+r]=i}for(var n=0;n<8;n++)e[7][n]=e[n][7]=e[7][t-n-1]=e[n][t-8]=e[t-8][n]=e[t-1-n][7]=128}function a(e){var t=e.length;if(t>21){var n=t-13,r=Math.round(n/Math.ceil(n/28));r%2&&r++;for(var a=[],o=n+6;o>10;o-=r)a.unshift(o);a.unshift(6);for(var i=0;i<a.length;i++)for(var s=0;s<a.length;s++){var c=a[i],u=a[s];if(!e[c][u])for(var f=-2;f<=2;f++)for(var l=-2;l<=2;l++){var d=Math.max(f,l),p=Math.min(f,l),h=1==d&&p>=-1||-1==p&&d<=1?128:129;e[c+f][u+l]=h}}}for(var i=8;i<t-8;i++)e[6][i]=e[i][6]=i%2?128:129}function o(e){for(var t=e.length,n=0;n<8;n++)6!=n&&(e[8][n]=e[n][8]=128),e[8][t-1-n]=128,e[t-1-n][8]=128;if(e[8][8]=128,e[t-8][8]=129,!(t<45))for(var n=t-11;n<t-8;n++)for(var r=0;r<6;r++)e[n][r]=e[r][n]=128}function i(e){function t(t){return 1&e[o][c+t]}function n(t){return 1&e[o+t][c]}for(var r=e.length,a=0,o=0;o<r;o++){for(var i=1&e[o][0],s=1,c=1;c<r;c++){var u=1&e[o][c];u!=i?(s>=5&&(a+=s-2),i=u,s=1):s++}s>=5&&(a+=s-2)}for(var c=0;c<r;c++){for(var i=1&e[0][c],s=1,o=1;o<r;o++){var u=1&e[o][c];u!=i?(s>=5&&(a+=s-2),i=u,s=1):s++}s>=5&&(a+=s-2)}for(var o=0;o<r-1;o++)for(var c=0;c<r-1;c++){var f=e[o][c]+e[o][c+1]+e[o+1][c]+e[o+1][c+1]&7;0!=f&&4!=f||(a+=3)}for(var o=0;o<r;o++)for(var c=0;c<r;c++)c<r-6&&t(0)&&!t(1)&&t(2)&&t(3)&&t(4)&&!t(5)&&t(6)&&(c>=4&&!(t(-4)||t(-3)||t(-2)||t(-1))&&(a+=40),c<r-10&&!(t(7)||t(8)||t(9)||t(10))&&(a+=40)),o<r-6&&n(0)&&!n(1)&&n(2)&&n(3)&&n(4)&&!n(5)&&n(6)&&(o>=4&&!(n(-4)||n(-3)||n(-2)||n(-1))&&(a+=40),o<r-10&&!(n(7)||n(8)||n(9)||n(10))&&(a+=40));for(var l=0,o=0;o<r;o++)for(var c=0;c<r;c++)1&e[o][c]&&l++;return a+=10*Math.floor(Math.abs(10-20*l/(r*r)))}function s(e){var t=n(e.version);r(t),a(t),o(t);for(var s=1/0,f=0,l=0;l<8;l++){u(t,e,l),c(t,e.ec_level,l);var d=i(t);d<s&&(s=d,f=l)}return u(t,e,f),c(t,e.ec_level,f),t.map(function(e){return e.map(function(e){return 1&e})})}var c=function(){for(var e=Array(32),t=Array(40),n=0;n<32;n++){for(var r=n<<10,a=5;a>0;a--)r>>>9+a&&(r^=1335<<a-1);e[n]=21522^(r|n<<10)}for(var o=7;o<=40;o++){for(var r=o<<12,a=6;a>0;a--)r>>>11+a&&(r^=7973<<a-1);t[o]=r|o<<12}var i={L:1,M:0,Q:3,H:2};return function(n,r,a){function o(e){return c>>e&1?129:128}for(var s=n.length,c=e[i[r]<<3|a],u=0;u<8;u++)n[8][s-1-u]=o(u),u<6&&(n[u][8]=o(u));for(var u=8;u<15;u++)n[s-15+u][8]=o(u),u>8&&(n[8][14-u]=o(u));n[7][8]=o(6),n[8][8]=o(7),n[8][7]=o(8);var f=t[(s-17)/4];if(f)for(var u=0;u<6;u++)for(var l=0;l<3;l++)n[s-11+l][u]=n[u][s-11+l]=function(e){return f>>e&1?129:128}(3*u+l)}}(),u=function(){var e=[function(e,t){return(e+t)%2==0},function(e,t){return e%2==0},function(e,t){return t%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return(e*t%3+(e+t)%2)%2==0}];return function(t,n,r){function a(e){for(var n=128;n;n>>=1){var r=!!(n&e);f(i,s)&&(r=!r),t[i][s]=r?1:0,o()}}function o(){do{if(s%2^s<6?u<0&&0==i||u>0&&i==c-1?(s--,u=-u):(s++,i+=u):s--,6==s&&s--,s<0)return!1}while(240&t[i][s]);return!0}var i,s,c=t.length,u=-1;i=s=c-1;for(var f=e[r],l=n.blocks[n.blocks.length-1].length,d=0;d<l;d++)for(var p=0;p<n.blocks.length;p++)n.blocks[p].length<=d||a(n.blocks[p][d]);l=n.ec_len;for(var d=0;d<l;d++)for(var p=0;p<n.ec.length;p++)a(n.ec[p][d]);if(s>-1)do{t[i][s]=f(i,s)?1:0}while(o())}}();e.exports={getMatrix:s,init:n,fillFinders:r,fillAlignAndTiming:a,fillStub:o,fillReserved:c,fillData:u,calculatePenalty:i}}).call(t,n(144).Buffer)},1793:function(e,t,n){"use strict";(function(t){function r(e,n){n.push(s);var r=t.concat([c]);r.writeUInt32BE(e.size,8),r.writeUInt32BE(e.size,12),r.writeUInt32BE(i(r.slice(4,-4)),21),n.push(r);var a=t.concat([u,o.deflateSync(e.data,{level:9}),new t(4)]);a.writeUInt32BE(a.length-12,0),a.writeUInt32BE(i(a.slice(4,-4)),a.length-4),n.push(a),n.push(f),n.push(null)}function a(e,n,r){var a=e.length,o=(a+2*r)*n,i=new t((o+1)*o);i.fill(255);for(var s=0;s<o;s++)i[s*(o+1)]=0;for(var s=0;s<a;s++)for(var c=0;c<a;c++)if(e[s][c]){var u=((r+s)*(o+1)+(r+c))*n+1;i.fill(0,u,u+n);for(var f=1;f<n;f++)i.copy(i,u+f*(o+1),u,u+n)}return{data:i,size:o}}var o=n(1794),i=n(1800),s=new t([137,80,78,71,13,10,26,10]),c=new t([0,0,0,13,73,72,68,82,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0]),u=new t([0,0,0,0,73,68,65,84]),f=new t([0,0,0,0,73,69,78,68,174,66,96,130]);e.exports={bitmap:a,png:r}}).call(t,n(144).Buffer)},1794:function(e,t,n){"use strict";(function(e){function r(e,t,n){function r(){for(var t;null!==(t=e.read());)i.push(t),s+=t.length;e.once("readable",r)}function a(t){e.removeListener("end",o),e.removeListener("readable",r),n(t)}function o(){var t,r=null;s>=_?r=new RangeError(I):t=v.concat(i,s),i=[],e.close(),n(r,t)}var i=[],s=0;e.on("error",a),e.on("end",o),e.end(t),r()}function a(e,t){if("string"==typeof t&&(t=v.from(t)),!v.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function o(e){if(!(this instanceof o))return new o(e);p.call(this,e,C.DEFLATE)}function i(e){if(!(this instanceof i))return new i(e);p.call(this,e,C.INFLATE)}function s(e){if(!(this instanceof s))return new s(e);p.call(this,e,C.GZIP)}function c(e){if(!(this instanceof c))return new c(e);p.call(this,e,C.GUNZIP)}function u(e){if(!(this instanceof u))return new u(e);p.call(this,e,C.DEFLATERAW)}function f(e){if(!(this instanceof f))return new f(e);p.call(this,e,C.INFLATERAW)}function l(e){if(!(this instanceof l))return new l(e);p.call(this,e,C.UNZIP)}function d(e){return e===C.Z_NO_FLUSH||e===C.Z_PARTIAL_FLUSH||e===C.Z_SYNC_FLUSH||e===C.Z_FULL_FLUSH||e===C.Z_FINISH||e===C.Z_BLOCK}function p(e,n){var r=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,g.call(this,e),e.flush&&!d(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!d(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||C.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:C.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!v.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new C.Zlib(n);var a=this;this._hadError=!1,this._handle.onerror=function(e,n){h(a),a._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],a.emit("error",r)};var o=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var i=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(i=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,o,e.memLevel||t.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=v.allocUnsafe(this._chunkSize),this._offset=0,this._level=o,this._strategy=i,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!r._handle},configurable:!0,enumerable:!0})}function h(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function m(e){e.emit("close")}var v=n(144).Buffer,g=n(268).Transform,C=n(1795),S=n(301),w=n(954).ok,_=n(144).kMaxLength,I="Cannot create final Buffer. It would be larger than 0x"+_.toString(16)+" bytes";C.Z_MIN_WINDOWBITS=8,C.Z_MAX_WINDOWBITS=15,C.Z_DEFAULT_WINDOWBITS=15,C.Z_MIN_CHUNK=64,C.Z_MAX_CHUNK=1/0,C.Z_DEFAULT_CHUNK=16384,C.Z_MIN_MEMLEVEL=1,C.Z_MAX_MEMLEVEL=9,C.Z_DEFAULT_MEMLEVEL=8,C.Z_MIN_LEVEL=-1,C.Z_MAX_LEVEL=9,C.Z_DEFAULT_LEVEL=C.Z_DEFAULT_COMPRESSION;for(var b=Object.keys(C),N=0;N<b.length;N++){var E=b[N];E.match(/^Z/)&&Object.defineProperty(t,E,{enumerable:!0,value:C[E],writable:!1})}for(var y={Z_OK:C.Z_OK,Z_STREAM_END:C.Z_STREAM_END,Z_NEED_DICT:C.Z_NEED_DICT,Z_ERRNO:C.Z_ERRNO,Z_STREAM_ERROR:C.Z_STREAM_ERROR,Z_DATA_ERROR:C.Z_DATA_ERROR,Z_MEM_ERROR:C.Z_MEM_ERROR,Z_BUF_ERROR:C.Z_BUF_ERROR,Z_VERSION_ERROR:C.Z_VERSION_ERROR},T=Object.keys(y),O=0;O<T.length;O++){var A=T[O];y[y[A]]=A}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(y),writable:!1}),t.Deflate=o,t.Inflate=i,t.Gzip=s,t.Gunzip=c,t.DeflateRaw=u,t.InflateRaw=f,t.Unzip=l,t.createDeflate=function(e){return new o(e)},t.createInflate=function(e){return new i(e)},t.createDeflateRaw=function(e){return new u(e)},t.createInflateRaw=function(e){return new f(e)},t.createGzip=function(e){return new s(e)},t.createGunzip=function(e){return new c(e)},t.createUnzip=function(e){return new l(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new o(t),e,n)},t.deflateSync=function(e,t){return a(new o(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new s(t),e,n)},t.gzipSync=function(e,t){return a(new s(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new u(t),e,n)},t.deflateRawSync=function(e,t){return a(new u(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new l(t),e,n)},t.unzipSync=function(e,t){return a(new l(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new i(t),e,n)},t.inflateSync=function(e,t){return a(new i(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new c(t),e,n)},t.gunzipSync=function(e,t){return a(new c(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new f(t),e,n)},t.inflateRawSync=function(e,t){return a(new f(t),e)},S.inherits(p,g),p.prototype.params=function(n,r,a){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(C.Z_SYNC_FLUSH,function(){w(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,a&&a())})}else e.nextTick(a)},p.prototype.reset=function(){return w(this._handle,"zlib binding closed"),this._handle.reset()},p.prototype._flush=function(e){this._transform(v.alloc(0),"",e)},p.prototype.flush=function(t,n){var r=this,a=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=C.Z_FULL_FLUSH),a.ended?n&&e.nextTick(n):a.ending?n&&this.once("end",n):a.needDrain?n&&this.once("drain",function(){return r.flush(t,n)}):(this._flushFlag=t,this.write(v.alloc(0),"",n))},p.prototype.close=function(t){h(this,t),e.nextTick(m,this)},p.prototype._transform=function(e,t,n){var r,a=this._writableState,o=a.ending||a.ended,i=o&&(!e||a.length===e.length);return null===e||v.isBuffer(e)?this._handle?(i?r=this._finishFlushFlag:(r=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||C.Z_NO_FLUSH)),void this._processChunk(e,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},p.prototype._processChunk=function(e,t,n){function r(u,d){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var p=o-d;if(w(p>=0,"have should not go down"),p>0){var h=s._buffer.slice(s._offset,s._offset+p);s._offset+=p,c?s.push(h):(f.push(h),l+=h.length)}if((0===d||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=v.allocUnsafe(s._chunkSize)),0===d){if(i+=a-u,a=u,!c)return!0;var m=s._handle.write(t,e,i,a,s._buffer,s._offset,s._chunkSize);return m.callback=r,void(m.buffer=e)}if(!c)return!1;n()}}var a=e&&e.length,o=this._chunkSize-this._offset,i=0,s=this,c="function"==typeof n;if(!c){var u,f=[],l=0;this.on("error",function(e){u=e}),w(this._handle,"zlib binding closed");do{var d=this._handle.writeSync(t,e,i,a,this._buffer,this._offset,o)}while(!this._hadError&&r(d[0],d[1]));if(this._hadError)throw u;if(l>=_)throw h(this),new RangeError(I);var p=v.concat(f,l);return h(this),p}w(this._handle,"zlib binding closed");var m=this._handle.write(t,e,i,a,this._buffer,this._offset,o);m.buffer=e,m.callback=r},S.inherits(o,p),S.inherits(i,p),S.inherits(s,p),S.inherits(c,p),S.inherits(u,p),S.inherits(f,p),S.inherits(l,p)}).call(t,n(157))},1795:function(e,t,n){"use strict";(function(e,r){function a(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}var o=n(954),i=n(1796),s=n(1797),c=n(1798),u=n(1799);for(var f in u)t[f]=u[f];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;a.prototype.close=function(){if(this.write_in_progress)return void(this.pending_close=!0);this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||c.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null},a.prototype.write=function(e,t,n,r,a,o,i){return this._write(!0,e,t,n,r,a,o,i)},a.prototype.writeSync=function(e,t,n,r,a,o,i){return this._write(!1,e,t,n,r,a,o,i)},a.prototype._write=function(n,a,i,s,c,u,f,l){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==t.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==i&&(i=e.alloc(0),c=0,s=0),this.strm.avail_in=c,this.strm.input=i,this.strm.next_in=s,this.strm.avail_out=l,this.strm.output=u,this.strm.next_out=f,this.flush=a,n){var d=this;return r.nextTick(function(){d._process(),d._after()}),this}if(this._process(),this._checkError())return this._afterSync()},a.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},a.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=c.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=c.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=c.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=c.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},a.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},a.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},a.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},a.prototype.init=function(e,n,r,a,i){o(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(e>=8&&e<=15,"invalid windowBits"),o(n>=-1&&n<=9,"invalid compression level"),o(r>=1&&r<=9,"invalid memlevel"),o(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,a,i),this._setDictionary()},a.prototype.params=function(){throw new Error("deflateParams Not supported")},a.prototype.reset=function(){this._reset(),this._setDictionary()},a.prototype._init=function(e,n,r,a,o){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=a,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new i,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},a.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},a.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=c.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=a}).call(t,n(144).Buffer,n(157))},1796:function(e,t,n){e.exports=n(0)(140)},1797:function(e,t,n){e.exports=n(0)(256)},1798:function(e,t,n){e.exports=n(0)(259)},1799:function(e,t,n){e.exports=n(0)(141)},1800:function(e,t,n){"use strict";(function(t,r){!function(){function a(e,t){for(var n=t.length,r=0;r<n;r++)e=i[255&(e^t[r])]^e>>>8;return e}function o(){for(var e=arguments.length,t=-1,n=0;n<e;n++)t=a(t,new r(arguments[n]));return t=(-1^t)>>>0}if("arm"===t.arch)return void(e.exports=n(1801));var i=[];!function(){for(var e=0;e<256;e++){for(var t=e,n=0;n<8;n++)1&t?t=3988292384^t>>>1:t>>>=1;i[e]=t>>>0}}(),e.exports=o}()}).call(t,n(157),n(144).Buffer)},1801:function(e,t,n){"use strict";(function(t){function n(e,t){for(var n=t.length,r=0;r<n;r++){var o=a[e[3]^t[r]];e[3]=o[3]^e[2],e[2]=o[2]^e[1],e[1]=o[1]^e[0],e[0]=o[0]}}function r(){var e=arguments.length,r=new t(4);r.fill(255);for(var a=0;a<e;a++)n(r,new t(arguments[a]));return r[0]=255^r[0],r[1]=255^r[1],r[2]=255^r[2],r[3]=255^r[3],r.readUInt32BE(0)}for(var a=[],o=0;o<256;o++){var i=a[o]=new t(4);i.writeUInt32BE(o,0);for(var s=0;s<8;s++){var c=1&i[0],u=1&i[1],f=1&i[2],l=1&i[3];i[0]=i[0]>>1^(l?237:0),i[1]=i[1]>>1^(l?184:0)^(c?128:0),i[2]=i[2]>>1^(l?131:0)^(u?128:0),i[3]=i[3]>>1^(l?32:0)^(f?128:0)}}e.exports=r}).call(t,n(144).Buffer)},1802:function(e,t,n){"use strict";function r(e){function t(t,n){return!(t<0||n<0||t>=r||n>=r)&&!!e[t][n]}function n(e,n,r){a[e][n]=1;var o=[];o.push(["M",n,e]);var i=e,s=n,c=0;do{switch(r){case"right":a[i][s]=1,t(i,s)?(a[i-1][s]=1,t(i-1,s)?(o.push(["h",c]),c=0,r="up"):(c++,s++)):(o.push(["h",c]),c=0,r="down");break;case"left":a[i-1][s-1]=1,t(i-1,s-1)?(a[i][s-1]=1,t(i,s-1)?(o.push(["h",-c]),c=0,r="down"):(c++,s--)):(o.push(["h",-c]),c=0,r="up");break;case"down":a[i][s-1]=1,t(i,s-1)?(a[i][s]=1,t(i,s)?(o.push(["v",c]),c=0,r="right"):(c++,i++)):(o.push(["v",c]),c=0,r="left");break;case"up":a[i-1][s]=1,t(i-1,s)?(a[i-1][s-1]=1,t(i-1,s-1)?(o.push(["v",-c]),c=0,r="left"):(c++,i--)):(o.push(["v",-c]),c=0,r="right")}}while(i!=e||s!=n);return o}for(var r=e.length,a=[],o=-1;o<=r;o++)a[o]=[];for(var i=[],o=0;o<r;o++)for(var s=0;s<r;s++)a[o][s]||(a[o][s]=1,t(o,s)?t(o-1,s)||i.push(n(o,s,"right")):t(o,s-1)&&i.push(n(o,s,"down")));return i}function a(e,t,n){r(e).forEach(function(e){for(var r="",a=0;a<e.length;a++){var o=e[a];switch(o[0]){case"M":r+="M"+(o[1]+n)+" "+(o[2]+n);break;default:r+=o.join("")}}r+="z",t.push(r)})}function o(e,t){var n=[];return a(e,n,t),{size:e.length+2*t,path:n.filter(Boolean).join("")}}function i(e,t,n,r){var o=e.length+2*n;if(t.push('<svg xmlns="http://www.w3.org/2000/svg" '),r>0){var i=o*r;t.push('width="'+i+'" height="'+i+'" ')}t.push('viewBox="0 0 '+o+" "+o+'">'),t.push('<path d="'),a(e,t,n),t.push('"/></svg>'),t.push(null)}function s(e,t,n){var a=e.length,o=9*(a+2*n);t.push(["%!PS-Adobe-3.0 EPSF-3.0","%%BoundingBox: 0 0 "+o+" "+o,"/h { 0 rlineto } bind def","/v { 0 exch neg rlineto } bind def","/M { neg "+(a+n)+" add moveto } bind def","/z { closepath } bind def","9 9 scale",""].join("\n")),r(e).forEach(function(e){for(var r="",a=0;a<e.length;a++){var o=e[a];switch(o[0]){case"M":r+=o[1]+n+" "+o[2]+" M ";break;default:r+=o[1]+" "+o[0]+" "}}r+="z\n",t.push(r)}),t.push("fill\n%%EOF\n"),t.push(null)}function c(e,t,n){var a=e.length,o=9*(a+2*n),i=["%PDF-1.0\n\n","1 0 obj << /Type /Catalog /Pages 2 0 R >> endobj\n","2 0 obj << /Type /Pages /Count 1 /Kids [ 3 0 R ] >> endobj\n"];i.push("3 0 obj << /Type /Page /Parent 2 0 R /Resources <<>> /Contents 4 0 R /MediaBox [ 0 0 "+o+" "+o+" ] >> endobj\n");var s="9 0 0 9 0 0 cm\n";s+=r(e).map(function(e){for(var t,r,o="",i=0;i<e.length;i++){var s=e[i];switch(s[0]){case"M":t=s[1]+n,r=a-s[2]+n,o+=t+" "+r+" m ";break;case"h":t+=s[1],o+=t+" "+r+" l ";break;case"v":r-=s[1],o+=t+" "+r+" l "}}return o+="h"}).join("\n"),s+="\nf\n",i.push("4 0 obj << /Length "+s.length+" >> stream\n"+s+"endstream\nendobj\n");for(var c="xref\n0 5\n0000000000 65535 f \n",u=1,f=i[0].length;u<5;u++)c+=("0000000000"+f).substr(-10)+" 00000 n \n",f+=i[u].length;i.push(c,"trailer << /Root 1 0 R /Size 5 >>\n","startxref\n"+f+"\n%%EOF\n"),t.push(i.join("")),t.push(null)}e.exports={svg:i,eps:s,pdf:c,svg_object:o}},1803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.cpuUsage=function(e){a(e,!1)},function(){return window.require("os").cpus()}),a=function(e,t){var n=o(),r=n.idle,a=n.total;setTimeout(function(){var n=o(),i=n.idle,s=n.total,c=i-r,u=s-a,f=c/u;e(!0===t?f:1-f)},1e3)},o=function(e){var t=r(),n=0,a=0,o=0,i=0,s=0;for(var c in t)t.hasOwnProperty(c)&&(n+=t[c].times.user,a+=t[c].times.nice,o+=t[c].times.sys,s+=t[c].times.irq,i+=t[c].times.idle);return{idle:i,total:n+a+o+i+s}}},1804:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dataConfApiImpl=t.getDataConfApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=n(1805),g=r(v),C=n(216),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(C),w=void 0,_=(t.getDataConfApi=function(){return isNullOrEmpty(w)&&(w=new _),w},t.dataConfApiImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return n.isInDataConf=function(){return S.isInDataConf()},n.setFireWallModeType=function(e){return S.setFireWallModeType(e)},n.reSetFireWallModeType=function(){return S.reSetFireWallModeType()},n.joinDataConf=function(){var t=(0,s.default)(o.default.mark(function t(n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.joinDataConf(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.isReceivingDataShare=function(){return S.isReceivingDataShare()},n.isRecevingAppshare=function(){return S.isRecevingAppshare()},n.isInReceiveDocSharing=function(){return S.isInReceiveDocSharing()},n.updateMemberName=function(e){return S.updateMemberName(e)},n.bfcpWinDetach=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.bfcpWinDetach();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.bfcpWinAttach=function(){var t=(0,s.default)(o.default.mark(function t(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.bfcpWinAttach(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getDataStreamInfo=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getDataStreamInfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getDataShareOwnerBindno=function(){return S.getDataShareOwnerBindno()},n.isInDataScreenOrWbSharing=function(){return S.isInDataScreenOrWbSharing()},n.isRemoteControling=function(){return S.isRemoteControling()},n.isInShareAnnotation=function(){return S.isInShareAnnotation()},n.getRemoteControlUserNum=function(){return S.getRemoteControlUserNum()},n.getDataConfMemberList=function(){return S.getDataConfMemberList()},n.stopShareScreen=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.stopShareScreen();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.requestRemoteControlPrivilege=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.requestRemoteControlPrivilege();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.delRemoteControlPrivilege=function(){var t=(0,s.default)(o.default.mark(function t(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.delRemoteControlPrivilege(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getIsUsePrimarySize=function(){return S.getIsUsePrimarySize()},n.isRecevingWBSharing=function(){return S.isRecevingWBSharing()},n.setDataConfParams=function(){var t=(0,s.default)(o.default.mark(function t(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.setDataConfParams(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getShareAudio=function(){return S.getShareAudio()},n}return(0,m.default)(t,e),t}(g.default))},1805:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.isInDataConf=function(){},r.setFireWallModeType=function(e){},r.reSetFireWallModeType=function(){},r.joinDataConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.isReceivingDataShare=function(){},r.isRecevingAppshare=function(){},r.isInReceiveDocSharing=function(){},r.updateMemberName=function(e){},r.bfcpWinDetach=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.bfcpWinAttach=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getDataStreamInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getDataShareOwnerBindno=function(){},r.isInDataScreenOrWbSharing=function(){},r.isRemoteControling=function(){},r.isInShareAnnotation=function(){},r.getRemoteControlUserNum=function(){},r.getDataConfMemberList=function(){},r.stopShareScreen=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.requestRemoteControlPrivilege=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.delRemoteControlPrivilege=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getIsUsePrimarySize=function(){},r.isRecevingWBSharing=function(){},r.setDataConfParams=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getShareAudio=function(){},a=n,(0,p.default)(r,a)}return(0,m.default)(t,e),t}(coreCommon.Interface);t.default=v},1806:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confLogicApiImpl=t.getConfLogicApi=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(131),f=a(u),l=n(4),d=a(l),p=n(132),h=a(p),m=n(133),v=a(m),g=n(1807),C=a(g),S=n(200),w=r(S),_=n(356),I=r(_),b=n(815),N=r(b),E=n(1808),y=r(E),T=n(335),O=r(T),A=n(259),x=r(A),k=n(949),M=n(1809),R=n(593),L=r(R),D=n(952),P=n(957),F=n(942),U=n(943),B=n(1810),W=a(B),V=n(242),H=n(215),$=n(260),G=void 0,j=(t.getConfLogicApi=function(){return isNullOrEmpty(j)&&(G=new j),G},t.confLogicApiImpl=function(e){function t(){var e=this;(0,d.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return n.saveTempMediaxInfo=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.saveTempMediaxInfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.actionLeaveConf=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.isPassivity,a=void 0!==r&&r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionLeaveConf(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.resumeDeviceInfo=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.resumeDeviceInfo)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.unregisterConfEvent=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.unregisterConfEvent());case 1:case"end":return e.stop()}},t,e)})),n.createTempMeetingOfAddMember=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createTempMeetingOfAddMember();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.p2pTransToConf=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.mediatype,a=void 0===r?constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE:r,o=n.hasSelectedMem,s=n.selectedMemList,c=void 0===s?[]:s,u=n.isAutoScreenShare;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.p2pTransToConf(a,o,c,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.actionAddAttendee=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.list,a=void 0===r?[]:r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionAddAttendee(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.actionReleaseChairman=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.chairmanNumber;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionReleaseChairman(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.updateMemberDetail=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.userInfo,a=n.callNo,o=n.name;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.updateMemberDetail(r,a,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.searchContact=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.callNo,a=n.name,o=n.isAnony;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.searchContact(r,a,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterTempConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterTempConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.actionShareClickByRecent=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionShareClickByRecent();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.createConfByTeamList=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createConfByTeamList(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),n.showConfInfo=function(e){return w.showConfInfo(e)},n.createTempTypeMeeting=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createTempTypeMeeting(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.toggleCreateVideoConf=function(e){return N.toggleCreateVideoConf(e)},n.toggleHostMeetDiff=function(e){return N.toggleHostMeetDiff(e)},n.hostMeetToJumpWebControl=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.confId,a=n.chairmanPas;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.hostMeetToJumpWebControl({confId:r,chairmanPas:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.resetJoinConfValue=function(){return N.resetJoinConfValue()},n.resetCreateConfValue=function(){return N.resetCreateConfValue()},n.changeStartTime=function(e){return N.changeStartTime(e)},n.resetBookConfValue=function(){return N.resetBookConfValue()},n.filterVmrConfListInfo=function(e){return N.filterVmrConfListInfo(e.vmrInfo,e.isSetRandom)},n.handleIpcRightMenuContent=function(e,t,n,r){return y.handleIpcRightMenuContent(e,t,n,r)},n.actionActiveDirection=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionActiveDirection(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.recordFlagIsFirstTimeRun=function(e){return w.recordFlagIsFirstTimeRun(e)},n.RecordIsIntoInterval=function(e){return w.RecordIsIntoInterval(e)},n.changeStatusOfConference=function(e){return w.changeStatusOfConference(e)},n.recordConferenceOldId=function(e){return w.recordConferenceOldId(e)},n.recordConferencePasswordDetail=function(e){return w.recordConferencePasswordDetail(e)},n.toggleShowConfInfoCard=function(e){return w.toggleShowConfInfoCard(e)},n.handleJoinTempConfNoNameWithConfId=function(){var t=(0,c.default)(i.default.mark(function t(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.handleJoinTempConfNoNameWithConfId(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.oneJoinVMR=function(e){return w.oneJoinVMR(e)},n.actionCallAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionCallAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionRemoveAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionRemoveAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionHangupAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionHangupAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionReInviteAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionReInviteAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionWatchAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionWatchAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleSvcLockWatch=function(e,t){return O.handleSvcLockWatch(e,t)},n.actionMuteConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionMuteConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionChangeAllowUnmute=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionChangeAllowUnmute(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionBroadcastAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionBroadcastAttendee(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.actionCallOtherNum=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionCallOtherNum(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterConfInConfList=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfInConfList(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.bookMeeting=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.bookMeeting(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.changeConfLen=function(e){return N.changeConfLen(e)},n.changeStartTimeMobile=function(e){return N.changeStartTimeMobile(e)},n.deleteClickParticipants=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.deleteClickParticipants(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.saveMettingTypeValue=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.saveMettingTypeValue(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.toggleChangeCamerState=function(){return w.toggleChangeCamerState()},n.toggleChangeMicState=function(){return w.toggleChangeMicState()},n.createAMeeting=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createAMeeting(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.showJoinMeetingBtn=function(){return w.showJoinMeetingBtn()},n.cancelConf=function(e){return w.cancelConf(e)},n.enterConfInConfInfo=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfInConfInfo(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.currentAccountIsRole=function(e,t){return N.currentAccountIsRole(e,t)},n.getAttendee=function(e){return N.getAttendee(e)},n.toggleSetUseFixedConfIDState=function(e){return w.toggleSetUseFixedConfIDState(e)},n.toggleIsReacrdSwitch=function(e){return N.toggleIsReacrdSwitch(e)},n.toggleCreateMeetingPassword=function(e){return N.toggleCreateMeetingPassword(e)},n.initCreateMettingContent=function(){return w.initCreateMettingContent()},n.delConfInfoFromDb=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.delConfInfoFromDb)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initMobileFirstAcceptShare=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.initMobileFirstAcceptShare();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.resetFirstAcceptShareFlag=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.resetFirstAcceptShareFlag(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.initMobileFirstInfoConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.initMobileFirstInfoConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.resetFirstInfoConferenceFlag=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.resetFirstInfoConferenceFlag(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleSvcClickJSPage=function(e){return O.handleSvcClickJSPage(e)},n.cloudRecordRequestFuc=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.cloudRecordRequestFuc(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.requestChairmanFuc=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.requestChairmanFuc();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.releaseChairmanFuc=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.releaseChairmanFuc(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.lockConfFuc=function(){return w.lockConfFuc()},n.unlockConfFuc=function(){return w.unlockConfFuc()},n.grabBfcpConfirm=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.grabBfcpConfirm(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionActiveDirectionForMobile=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionActiveDirectionForMobile();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.isHasRecordPermission=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return w.isHasRecordPermission(e)},n.formatConfId=function(e){return w.formatConfId(e)},n.acceptConf=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.acceptConf(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.rejectConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.rejectConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.maxhubSkipLogin=function(){return(0,D.maxhubSkipLogin)()},n.enterConfByIdOnly=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfByIdOnly();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.enterConfById=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfById();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.toggleChangeConfAcsNum=function(e){return w.toggleChangeConfAcsNum(e)},n.toggleChangeConfAcsId=function(e){return w.toggleChangeConfAcsId(e)},n.createMaxHubMeeting=function(){return w.createMaxHubMeeting()},n.toggleShowMemberList=function(e){return w.toggleShowMemberList(e)},n.upgrade2DataConfOrStartShare=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.upgrade2DataConfOrStartShare();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.changeTimeZone=function(e){return N.changeTimeZone(e)},n.setSmcFirstRequest=function(){return w.setSmcFirstRequest()},n.joinExperienceMeeting=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.joinExperienceMeeting)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.handleNotShowChairPas=function(e){return w.handleNotShowChairPas(e)},n.handleNotShowGeneralPas=function(e){return w.handleNotShowGeneralPas(e)},n.changeConfAttendeeInfo=function(e){return w.changeConfAttendeeInfo(e)},n.changeCurrentConfInfo=function(e){return w.changeCurrentConfInfo(e)},n.searchContactName=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.searchContactName(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleShowEndConf=function(e){return w.handleShowEndConf(e)},n.endCallAndLogout=function(){return w.endCallAndLogout()},n.actionEndConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionEndConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.actionCreateConf=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a,o,s,c){for(var u=arguments.length,f=Array(u>6?u-6:0),l=6;l<u;l++)f[l-6]=arguments[l];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionCreateConf.apply(w,[n,r,a,o,s,c].concat(f));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r,a,o,i){return t.apply(this,arguments)}}(),n.actionExportConfmember=function(){return w.actionExportConfmember()},n.transferChairman=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.transferChairman(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.compressRemoveAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.compressRemoveAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.compressreleasePreservate=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.compressreleasePreservate(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionRequestChairman=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionRequestChairman(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.actionChangeConfNickName=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionChangeConfNickName(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.firstOptionClick=function(e){return y.firstOptionClick(e)},n.memberItemHandleClick=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a,o,s){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.memberItemHandleClick(n,r,a,o,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r,a,o){return t.apply(this,arguments)}}(),n.changeMuteState=function(e,t,n,r){return y.changeMuteState(e,t,n,r)},n.actionMuteAllAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.isMute,a=n.isAllowUnmute;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionMuteAllAttendee(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleShowMemberList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return w.handleShowMemberList(e,t,n)},n.actionCreateConfByRecent=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionCreateConfByRecent(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setUnreadNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{account:"",group_id:""},t=arguments[1];return I.setUnreadNumber(e,t)},n.changeGroupId=function(e){return w.changeGroupId(e)},n.getExperienceConferenceInfo=function(e){return(0,P.getExperienceConferenceInfo)(e)},n.showOrDisabledBtn=function(){return w.showOrDisabledBtn()},n.getInitHistoryConfList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getInitHistoryConfList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.handleSmcEnterDataConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.handleSmcEnterDataConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getConfShareUrl=function(e){return(0,D.getConfShareUrl)(e)},n.enterConfByIdOnlyWithConfPas=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfByIdOnlyWithConfPas(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.resetDefaultValue=function(){return N.resetDefaultValue()},n.returnTimeCur=function(){return N.returnTimeCur()},n.getDefaultDate=function(){return N.getDefaultDate()},n.changeStartTimeMin=function(e){return N.changeStartTimeMin(e)},n.changeStartTimeHour=function(e){return N.changeStartTimeHour(e)},n.changeConfPage=function(e){return w.changeConfPage(e)},n.toggleConfOtherNumber=function(e){return w.toggleConfOtherNumber(e)},n.initBfcpWindow=function(){var t=(0,c.default)(i.default.mark(function t(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.initBfcpWindow(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.switchVideoToMain=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.switchVideoToMain();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.refreshShareSize=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.refreshShareSize)(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handup=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.handup(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.handleSSRCURL=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$getState().call.callId,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.handleSSRCURL(n,r,a,o,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionMuteAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionMuteAttendee(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),n.getVRMList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getVRMList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.NotifyCameraListUpdateEx=function(e){return(0,D.NotifyCameraListUpdateEx)(e)},n.updateCameraList=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.updateCameraList(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.searchMemberList=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.searchMemberList(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleMobileBfcpStatus=function(){return w.handleMobileBfcpStatus()},n.setConfServerId=function(e){return x.setConfServerId(e)},n.setSubject=function(e){return x.setSubject(e)},n.setViewMode=function(e,t){return x.setViewMode(e,t)},n.initRemotWindow=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.initRemotWindow(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.updateLocalwindowCallId=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.updateLocalwindowCallId(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.closeCallInterface=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.closeCallInterface();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.closeBfcpFrame=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.closeBfcpFrame();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getConfList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getConfList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initCallInterface=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.initCallInterface(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),n.handleIsShowJoinButton=function(e){return w.handleIsShowJoinButton(e)},n.getConfInfo=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getConfInfo(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.UportalTokenErr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return w.UportalTokenErr(e)},n.changeConfInfoCardState=function(e){return(0,k.changeConfInfoCardState)(e)},n.oneKeyEnterConf=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.oneKeyEnterConf(n,r,a,o,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),n.toggleChangeConfAcsPas=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.toggleChangeConfAcsPas(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getConfInfoFromDb=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.getConfInfoFromDb)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.gettempuserinfo=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.gettempuserinfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initConfctrl=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.initConfctrl();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.recordIsImGroupCreateConf=function(e){return w.recordIsImGroupCreateConf(e)},n.toggleIsBookSendEmail=function(e){return N.toggleIsBookSendEmail(e)},n.toggleIsBookSendSMS=function(e){return N.toggleIsBookSendSMS(e)},n.delConfRecord=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.delConfRecord(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.toggleSetIsBookSendEmail=function(e){return w.toggleSetIsBookSendEmail(e)},n.toggleSetIsBookSendSMS=function(e){return w.toggleSetIsBookSendSMS(e)},n.toggleSetCreateUseFixedConfIDState=function(e){return w.toggleSetCreateUseFixedConfIDState(e)},n.itmeetingCreateConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.itmeetingCreateConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.meetingHWspeakerOnOrOff=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.meetingHWspeakerOnOrOff(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.itmeetingJoinConf=function(){return L.itmeetingJoinConf()},n.itmeetingChairman=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.itmeetingChairman(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.meetingHWsetCaptureCamera=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.meetingHWsetCaptureCamera(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.meetingHWcameraOnOrOff=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.meetingHWcameraOnOrOff(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.itmeetingSmallWin=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.itmeetingSmallWin(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.meetingHWreCallTimeOut=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.meetingHWreCallTimeOut(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.firstQosReport=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.firstQosReport();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.itmeetingShareScreen=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.itmeetingShareScreen(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.itmeetingAcceptSharing=function(){return L.itmeetingAcceptSharing()},n.meetingHWmicrophoneOnOrOff=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.meetingHWmicrophoneOnOrOff(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.startCallFailed=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.startCallFailed(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.qosAlertSend=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.qosAlertSend();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.uportalLoginFailed=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.uportalLoginFailed(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.sipRegisterFailed=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.sipRegisterFailed(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.registerNativeWndEvent=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.registerNativeWndEvent)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.unregisterNativeWndEvent=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.unregisterNativeWndEvent)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getLinkJoinConfService=function(){return new W.default},n.getRegisterConfEventAtomic=function(){return w.registerConfEventAtomic},n.getSubScribeConfListAndInfoResAtomic=function(){return w.subScribeConfListAndInfoResAtomic},n.getVmrInfoToDbAtomic=function(){return w.getVmrInfoToDbAtomic},n.getAsInfoToDbAtomic=function(){return w.getAsInfoToDbAtomic},n.getNativeInterface=function(){return V.NativeInterface},n.getSvcAtdManager=function(){return H.SvcAtdManager},n.getSvcAttendanceManager=function(){return T.SvcAttendanceManager},n.getToolbarManager=function(){return $.ToolbarManager},n.getDecoderManager=function(){return H.DecoderManager},n.saveRandomPwdSelection=function(e){return N.saveRandomPwdSelection(e)},n}return(0,v.default)(t,e),t}(C.default))},1807:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=function(e){function t(){for(var e,n,r,a,i=this,c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return(0,l.default)(this,t),n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.saveTempMediaxInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.actionLeaveConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isPassivity;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.resumeDeviceInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.unregisterConfEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.createTempMeetingOfAddMember=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.p2pTransToConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mediatype;void 0===n&&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,t.hasSelectedMem,t.selectedMemList,t.isAutoScreenShare;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.actionAddAttendee=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.list;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.actionReleaseChairman=function(){var e=(0,s.default)(o.default.mark(function e(t){t.chairmanNumber;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.updateMemberDetail=function(){var e=(0,s.default)(o.default.mark(function e(t){t.userInfo,t.callNo,t.name;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.searchContact=function(){var e=(0,s.default)(o.default.mark(function e(t){t.callNo,t.name,t.isAnony;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterTempConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.actionShareClickByRecent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.createConfByTeamList=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.showConfInfo=function(e){},r.createTempTypeMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.toggleCreateVideoConf=function(e){},r.toggleHostMeetDiff=function(e){},r.hostMeetToJumpWebControl=function(){var e=(0,s.default)(o.default.mark(function e(t){t.confId,t.chairmanPas;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.resetJoinConfValue=function(){},r.resetCreateConfValue=function(){},r.changeStartTime=function(e){},r.resetBookConfValue=function(){},r.filterVmrConfListInfo=function(e){},r.handleIpcRightMenuContent=function(e,t,n,r){},r.actionActiveDirection=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.recordFlagIsFirstTimeRun=function(e){},r.RecordIsIntoInterval=function(e){},r.changeStatusOfConference=function(e){},r.recordConferenceOldId=function(e){},r.recordConferencePasswordDetail=function(e){},r.toggleShowConfInfoCard=function(e){},r.handleJoinTempConfNoNameWithConfId=function(){var e=(0,s.default)(o.default.mark(function e(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.oneJoinVMR=function(e){},r.actionCallAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionRemoveAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionHangupAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionReInviteAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionWatchAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleSvcLockWatch=function(e,t){},r.actionMuteConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionChangeAllowUnmute=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionBroadcastAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.actionCallOtherNum=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterConfInConfList=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.bookMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.changeConfLen=function(e){},r.changeStartTimeMobile=function(e){},r.deleteClickParticipants=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.saveMettingTypeValue=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.toggleChangeCamerState=function(){},r.toggleChangeMicState=function(){},r.createAMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.showJoinMeetingBtn=function(){},r.cancelConf=function(e){},r.enterConfInConfInfo=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.currentAccountIsRole=function(e,t){},r.getAttendee=function(e){},r.toggleSetUseFixedConfIDState=function(e){},r.toggleIsReacrdSwitch=function(e){},r.toggleCreateMeetingPassword=function(e){},r.initCreateMettingContent=function(){},r.delConfInfoFromDb=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initMobileFirstAcceptShare=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.resetFirstAcceptShareFlag=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.initMobileFirstInfoConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.resetFirstInfoConferenceFlag=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleSvcClickJSPage=function(e){},r.cloudRecordRequestFuc=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.requestChairmanFuc=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.releaseChairmanFuc=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.lockConfFuc=function(){},r.unlockConfFuc=function(){},r.grabBfcpConfirm=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionActiveDirectionForMobile=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.isHasRecordPermission=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},r.formatConfId=function(e){},r.acceptConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.rejectConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.maxhubSkipLogin=function(){},r.enterConfByIdOnly=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.enterConfById=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.toggleChangeConfAcsNum=function(e){},r.toggleChangeConfAcsId=function(e){},r.createMaxHubMeeting=function(){},r.toggleShowMemberList=function(e){},r.upgrade2DataConfOrStartShare=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.changeTimeZone=function(e){},r.setSmcFirstRequest=function(){},r.joinExperienceMeeting=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.handleNotShowChairPas=function(e){},r.handleNotShowGeneralPas=function(e){},r.changeConfAttendeeInfo=function(e){},r.changeCurrentConfInfo=function(e){},r.searchContactName=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleShowEndConf=function(e){},r.endCallAndLogout=function(){},r.actionEndConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.actionCreateConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a,s,c){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),r.actionExportConfmember=function(){},r.transferChairman=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.compressRemoveAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.compressreleasePreservate=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionRequestChairman=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.actionChangeConfNickName=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.firstOptionClick=function(e){},r.memberItemHandleClick=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a,s){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),r.changeMuteState=function(e,t,n,r){},r.actionMuteAllAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){t.isMute,t.isAllowUnmute;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleShowMemberList=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]},r.actionCreateConfByRecent=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setUnreadNumber=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]},r.changeGroupId=function(e){},r.getExperienceConferenceInfo=function(e){},r.showOrDisabledBtn=function(){},r.getInitHistoryConfList=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.handleSmcEnterDataConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getConfShareUrl=function(e){},r.enterConfByIdOnlyWithConfPas=function(){var e=(0,s.default)(o.default.mark(function e(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.resetDefaultValue=function(){},r.returnTimeCur=function(){},r.getDefaultDate=function(){},r.changeStartTimeMin=function(e){},r.changeStartTimeHour=function(e){},r.changeConfPage=function(e){},r.toggleConfOtherNumber=function(e){},r.initBfcpWindow=function(){var e=(0,s.default)(o.default.mark(function e(t,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.switchVideoToMain=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.refreshShareSize=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handup=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.handleSSRCURL=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:$getState().call.callId,arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionMuteAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.getVRMList=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.NotifyCameraListUpdateEx=function(e){},r.updateCameraList=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.searchMemberList=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleMobileBfcpStatus=function(){},r.setConfServerId=function(e){},r.setSubject=function(e){},r.setViewMode=function(e,t){},r.initRemotWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.updateLocalwindowCallId=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.closeCallInterface=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.closeBfcpFrame=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getConfList=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.handleIsShowJoinButton=function(e){},r.getConfInfo=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.UportalTokenErr=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},r.changeConfInfoCardState=function(e){},r.oneKeyEnterConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a){arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),r.toggleChangeConfAcsPas=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getConfInfoFromDb=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.gettempuserinfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initConfctrl=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.recordIsImGroupCreateConf=function(e){},r.toggleIsBookSendEmail=function(e){},r.toggleIsBookSendSMS=function(e){},r.delConfRecord=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.toggleSetIsBookSendEmail=function(e){},r.toggleSetIsBookSendSMS=function(e){},r.toggleSetCreateUseFixedConfIDState=function(e){},r.itmeetingCreateConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.meetingHWspeakerOnOrOff=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.itmeetingJoinConf=function(){},r.itmeetingChairman=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.meetingHWsetCaptureCamera=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.meetingHWcameraOnOrOff=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.itmeetingSmallWin=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.meetingHWreCallTimeOut=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.firstQosReport=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.itmeetingShareScreen=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.itmeetingAcceptSharing=function(){},r.meetingHWmicrophoneOnOrOff=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startCallFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.qosAlertSend=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.uportalLoginFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.sipRegisterFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.registerNativeWndEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.unregisterNativeWndEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getLinkJoinConfService=function(){},r.getRegisterConfEventAtomic=function(){},r.getSubScribeConfListAndInfoResAtomic=function(){},r.getVmrInfoToDbAtomic=function(){},r.getAsInfoToDbAtomic=function(){},r.getNativeInterface=function(){},r.getSvcAtdManager=function(){},r.getSvcAttendanceManager=function(){},r.getToolbarManager=function(){},r.getDecoderManager=function(){},r.saveRandomPwdSelection=function(e){},a=n,(0,p.default)(r,a)}return(0,m.default)(t,e),t}(coreCommon.Interface);t.default=v},1808:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeMuteState=t.firstOptionout=t.secondOptionClick=t.firstOptionClick=t.handleIpcRightMenuContent=t.actionConfMuteAttendee=t.memberItemHandleClick=void 0;var a=n(135),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(335),l=n(200),d=n(356),p=n(215),h=n(260),m=n(200),v=n(200),g=n(216),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g),S=coreLogger.getLogger("conf")("logic/conference/audio/confMemberNew/index.js"),w=(t.memberItemHandleClick=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o){var i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=1===n||r)){e.next=31;break}if(constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF!==t){e.next=20;break}if(a!==constant.MUTE_STATE.MUTE_STATE_TOMUTE&&a!==constant.MUTE_STATE.MUTE_STATE_TOUNMUTE){e.next=6;break}return S.info("is muting or unmuting, do nothing..."),e.abrupt("return");case 6:if(!r){e.next=17;break}if(c=C.getShareAudio(),a||!c){e.next=12;break}$dispatch(coreUi.showIpcMuteTipSharing(!0)),e.next=15;break;case 12:return p.SvcAtdManager.setMuteState(!0,!a),e.next=15,h.ToolbarManager.setValueZeroFunc();case 15:e.next=18;break;case 17:a?(S.info("userClick  click to cancel mute"),w(0,o,r)):(S.info("userClick  click to mute"),w(1,o,r));case 18:e.next=31;break;case 20:if(constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT!==t){e.next=25;break}S.info("click to reInvite: "+handlePhoneNumber(o)),(0,l.actionReInviteAttendee)(o),e.next=31;break;case 25:if(constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING!==t){e.next=30;break}return e.next=28,(0,l.actionRemoveAttendee)(o);case 28:e.next=31;break;case 30:S.info("not in conf state, no click func");case 31:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.actionConfMuteAttendee=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("userClick mute : attendee: "+handlePhoneNumber(n)+"isSelf: "+r+"isMute: "+t),a={isMute:t,attendee:n},e.next=4,coreConf.muteAttendeeService(a);case 4:if(!(o=e.sent)||0!==o.result){e.next=18;break}if(S.info("mute attendee success: "+handlePhoneNumber(n)),(0,d.setMemberToMuteState)(n,t),!r){e.next=16;break}if(!t){e.next=14;break}return e.next=12,$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE));case 12:e.next=16;break;case 14:return e.next=16,$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE));case 16:e.next=19;break;case 18:S.error("mute attendee failed: "+handlePhoneNumber(n));case 19:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}());t.handleIpcRightMenuContent=function(e,t,n,r){var a=coreCommon.isVideoConf(t.media_type),i={attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo,handState:t.hand_state},s={};if(t.is_self)s=n?{type:"isSvcConf_isSelf",selfRole:r,actionMuteAttendee:w,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch,pcHandup:coreCall.pcHandup}:{type:"isSelf",mediaType:t.media_type,selfRole:r,actionMuteAttendee:w,actionCallOtherNum:l.actionCallOtherNum,actionWatchAttendee:v.actionWatchAttendee};else{var c=$getState().conf.videoMultipicNum;t.userInfo===c?i={type:"multiPic"}:n&&r?s={type:"isSvcConf_compereToAttendee",participantId:t.participant_id,actionMuteAttendee:w,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch}:n&&!r?s={type:"isSvcConf_AttendeeToOthers",handleSvcLockWatch:f.handleSvcLockWatch}:n||!r&&!a||(s={type:"compereToAttendee",mediaType:t.media_type,participantId:t.participant_id,actionMuteAttendee:w,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionWatchAttendee:v.actionWatchAttendee,selfRole:r})}return i=(0,o.default)({},i,s),{type:constant.RIGHT_MENU_TYPE.CONF_MEMBERLIST,event:e,target:i}},t.firstOptionClick=function(e){var t=$getState().menu.rightMenuList[e.firstIndex].callback;void 0!=e.secondIndex&&(t=$getState().menu.rightMenuList[e.firstIndex].children[e.secondIndex].callback);var n=e.unClick,r=e.hasChildren;n||!r&&t&&t()},t.secondOptionClick=function(e){var t=+e.firstOption.charAt(11),n=$getState().menu.rightMenuList[t].children[e.secondIndex].callback,r=e.unClick,a=e.hasChildren;r||!a&&n&&n()},t.firstOptionout=function(e){var t=$getState().menu.rightMenuList[e.firstIndex].callback,n=e.unClick,r=e.hasChildren;n||$dispatch(coreUi.settogglechildrenoption()),!r&&t&&t()},t.changeMuteState=function(e,t,n,r){var a=e.filter(function(e){return e.number===n}),o=a[0].is_mute;if(r||1===t){if(o===constant.MUTE_STATE.MUTE_STATE_TOMUTE||o===constant.MUTE_STATE.MUTE_STATE_TOUNMUTE)return void S.info("is muting or unmuting, do nothing...");o?(S.info("userClick  click to cancel mute"),(0,m.actionMuteAttendee)(0,n,r)):(S.info("userClick  click to mute"),(0,m.actionMuteAttendee)(1,n,r))}}},1809:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.joinExperienceMeeting=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(957),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(200),l=coreLogger.getLogger("logic")("conference/audio/joinConference");t.joinExperienceMeeting=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isOffline){e.next=4;break}return window.ToastNew(language.OFFLINE_STATUS),l.info("joinExperienceMeeting offline not allowed use"),e.abrupt("return");case 4:if(t=$getState().conf.experienceConfId,!u.checkConferenceId(t)){e.next=8;break}return l.info("joinExperienceMeeting confId is null, so return"),e.abrupt("return");case 8:return l.info("joinExperienceMeeting start"),e.next=11,coreSecurity.getPasswordManager();case 11:return n=e.sent,e.next=14,n.getPassword("experienceConfPwd");case 14:return r=e.sent,l.info("joinExperienceMeeting get confPas suc"),a={confId:$getState().conf.experienceConfId,confPas:r,confSubject:language.EXPERIENCE_CONFERENCE},e.next=19,(0,f.enterConfByIdOnlyWithConfPas)(a);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},1810:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(1811),l=coreLogger.getLogger("CONF")("LINKJOIN"),d=null,p=function e(){var t=this;return(0,u.default)(this,e),this.init=function(){l.info("link join conf init"),window.handleJoinConfByLink=t.handleJoinConfByLink},this.handleConfUrl=function(){var e=(0,s.default)(o.default.mark(function e(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.info("handleConfUrl"),t.handleJoinConfByLink(n),navigator.splashscreen&&navigator.splashscreen.hide();case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinConfByLink=function(e){return isNullOrEmpty(e)?void l.error("handleConfUrl error: url is null"):(t.linkType=t.parseLinkTypeFromUrl(e),t.linkType===f.LINK_TYPE.NONE?(l.error("handleConfUrl error: unknow url page"),void t.resetData()):(t.shouldJoinConfByLink=!0,t.url=e,void(t.linkType===f.LINK_TYPE.LINK_JOIN?t.joinConfByLink():l.info("join conf by link:unknow link type"))))},this.joinConfByLink=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("joinConfByLink"),window.inAppBrowserRef&&window.inAppClosePage&&window.inAppClosePage(),e.next=4,coreAccount.getResumeEnable();case 4:n=e.sent,n?l.info("join conf by link now is login"+t.url):(l.info("join conf by link now is is logout or kickout "+t.url),t.actionJoinConfByLink());case 6:case"end":return e.stop()}},e,t)})),this.actionJoinConfByLink=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.closeOutSidePage(),window.hasLoadConfig){e.next=5;break}return l.info("has not loadconfig , do later :"+t.url),e.next=5,coreCommon.loadConfig();case 5:l.info("handleJoinTempConfNoName",t.url),n=coreCommon.getUrlVars(t.url),l.info("uriValues",n),t.updateLoginInfoWithUriValues(n),t.checkJoinConfByLink();case 10:case"end":return e.stop()}},e,t)})),this.resetData=function(){t.url=null,t.shouldJoinConfByLink=!1,t.linkType=f.LINK_TYPE.NONE},this.checkHasProvicyPageShow=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.localStorage.getItem("isFirstInstall"),window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===n||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return l.info("[checkProvicyPageShow] local has First install before license, enter conf after access license"),e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,t)})),this.checkHasInConfOrCall=function(){if(coreConf.isInConf()||coreCall.getCallCount()>0)return window.CLIENTCONFIG.ISMOBILE?alert(language.PREVENT_TWO_CALLS):window.Toast(language.PREVENT_TWO_CALLS,2,!1,"WhiteWarning"),!0},this.checkHasLocalLoginAccount=(0,s.default)(o.default.mark(function e(){var n,r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState(),r=n.login,a=r.account,i=r.serverAddress,s=r.serverPort,l.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+i+", serverPort: "+s),e.next=4,coreSecurity.getPasswordManager();case 4:return c=e.sent,e.next=7,c.getPassword("password");case 7:return u=e.sent,e.abrupt("return",!(isNullOrEmpty(a)||isNullOrEmpty(u)||isNullOrEmpty(i)||isNullOrEmpty(s)));case 9:case"end":return e.stop()}},e,t)})),this.checkJoinConfByLink=(0,s.default)(o.default.mark(function e(){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkHasProvicyPageShow();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return");case 4:if(!t.checkHasInConfOrCall()){e.next=7;break}return t.resetData(),e.abrupt("return");case 7:return e.next=9,t.checkHasLocalLoginAccount();case 9:if(!e.sent){e.next=31;break}if(!t.checkUportalIsLogining()){e.next=14;break}l.info("local has uportal, state: registering, enter conf later"),e.next=29;break;case 14:if(!t.checkHasUportalLogin()){e.next=28;break}if(!t.checkSipIsRegisting()){e.next=18;break}e.next=26;break;case 18:if(!t.checkHasSipRegisted()){e.next=26;break}return e.next=21,coreAccount.getLoginModel();case 21:n=e.sent,n.sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP,t.doJoinConf(!0),e.next=26;break;case 26:e.next=29;break;case 28:t.doJoinConf(!1);case 29:e.next=36;break;case 31:return e.next=33,coreAccount.isAccountAutoLogin();case 33:r=e.sent,a=window.stroage.isFastLogin(),a||r||t.doJoinConf(!1);case 36:case"end":return e.stop()}},e,t)})),this.doJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(n){var r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.linkType!==f.LINK_TYPE.LINK_JOIN){e.next=4;break}return e.next=3,coreAccount.setIsCACertCheckSupport({isSupportCACertCheck:!1});case 3:n?(r=coreCommon.getUrlVars(t.url),a={confId:r.conf_id,confPas:r.enter_code},i="false"!==r.open_camera,s="false"!==r.open_mic,!1===i&&coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),!1===s&&coreCommon.MicControl.getInstance().setIsMuteMicDe(),coreConf.enterConfByIdOnlyWithConfPas(a)):(window.CLIENTCONFIG.ISMOBILE?window.goRoute("noLoginJoinConference"):window.goRoute("login/noLoginJoinConference"),coreConf.handleJoinTempConfNoNameWithConfId());case 4:t.resetData();case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.checkHasUportalLogin=function(){var e=$getState(),t=e.login.uportalLoginState;return constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS===t},this.checkUportalIsLogining=function(){var e=$getState(),t=e.login.uportalLoginState;return constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING===t},this.checkHasSipRegisted=function(){var e=$getState(),t=e.login.sipRegisterState;return constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED===t},this.checkSipIsRegisting=function(){var e=$getState(),t=e.login.sipRegisterState;return constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING===t},this.updateLoginInfoWithUriValues=function(e){var t=decodeURIComponent(e.conf_id),n=decodeURIComponent(e.server_url),r=e.port,a=e.enter_code,o=decodeURIComponent(e.name),i="false"!==e.open_camera,s="false"!==e.open_mic;coreAccount.updateTempSipAccount(t),coreAccount.updateTempSipPwd({data:a}),coreAccount.updateTempSipNick({name:o}),coreAccount.setServerAddress({serverAddress:n,serverPort:r}),$dispatch(coreUi.setMicState(s)),$dispatch(coreUi.setCamerState(i))},this.closeOutSidePage=function(){window.setTimeout(function(){return window.dispatchEvent(new Event("closeOutSidePage"))},500),clearTimeout(window.openBrowerTimer)},this.parseLinkTypeFromUrl=function(e){if(-1!==e.indexOf("/page/link"))return f.LINK_TYPE.NO_NAME_JOIN;var t=coreCommon.getUrlVars(e);if(!isNullOrEmpty(t)){var n=t.page;return"joinTempConf"===n?f.LINK_TYPE.TEMP_JOIN:"joinConfByLink"===n?f.LINK_TYPE.LINK_JOIN:f.LINK_TYPE.NONE}},d||(d=this,this.url=null,this.linkType=f.LINK_TYPE.NONE,this.shouldJoinConfByLink=!1,this.init()),d};t.default=p},1811:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LINK_TYPE={NONE:0,NO_NAME_JOIN:1,TEMP_JOIN:2,LINK_JOIN:3}},1812:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairConfApiImpl=t.getPairConfApi=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(131),f=a(u),l=n(4),d=a(l),p=n(132),h=a(p),m=n(133),v=a(m),g=n(1813),C=a(g),S=n(948),w=r(S),_=n(953),I=r(_),b=n(944),N=r(b),E=n(1814),y=n(947),T=n(946),O=r(T),A=n(816),x=r(A),k=void 0,M=(t.getPairConfApi=function(){return isNullOrEmpty(k)&&(k=new M),k},t.pairConfApiImpl=function(e){function t(){var e=this;(0,d.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return n.endPairWithPeripherals=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.tips,a=void 0===r?"":r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.endPairWithPeripherals(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.serverCloseAllPair=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.serverCloseAllPair();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.uninitAsPairServer=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.uninitAsPairServer();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initAsPairServer=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.initAsPairServer();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initAsPairServer=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.initAsPairServer();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.handlePairClosed=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.tips,a=void 0===r?"":r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.handlePairClosed(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.initTupPairClient=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.initTupPairClient();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initTupPairServer=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.initTupPairServer();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.pairClosedNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.pairClosedNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairSubscribeNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.pairSubscribeNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairCallStateNotify=function(e){return N.pairCallStateNotify(e)},n.pairLinkageConfNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.pairLinkageConfNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairLinkageConfStateNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.pairLinkageConfStateNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairInviteJoinConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.pairInviteJoinConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.receivePairReqNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.receivePairReqNotify(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairedOrCanceledResultNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.pairedOrCanceledResultNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleServerUniversalInfoNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.handleServerUniversalInfoNotify)(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleClientUniversalInfoNotify=function(e){return(0,y.handleClientUniversalInfoNotify)(e)},n.startPairMeeting=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.startPairMeeting(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.closePair=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.closePair());case 1:case"end":return e.stop()}},t,e)})),n.startQRCodePair=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.pairCode,a=n.isForce,o=void 0!==a&&a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.startQRCodePair(r,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.sendJoinPairResult=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.id,a=n.result;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.sendJoinPairResult(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getPairConfPasResult=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getPairConfPasResult(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.requestPairCode=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.requestPairCode();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.endOldPairAndRepair=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.type,a=n.code,o=void 0===a?"":a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.endOldPairAndRepair(r,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.startManualPair=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.pairCode,a=n.isForce,o=void 0!==a&&a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.startManualPair(r,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.joinPairConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.joinPairConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.joinPairConfNoPas=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.joinPairConfNoPas(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.scanHardTerminalQRCode=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.scanHardTerminalQRCode(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.inviteHardTerminal=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.inviteHardTerminal(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.inviteHardTerminalNoPas=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.inviteHardTerminalNoPas(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.closeInviteHardTerminal=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.closeInviteHardTerminal();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n}return(0,v.default)(t,e),t}(C.default))},1813:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.endPairWithPeripherals=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.tips;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.serverCloseAllPair=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.uninitAsPairServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initAsPairServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initAsPairServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.handlePairClosed=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.tips;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.initTupPairClient=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initTupPairServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.pairClosedNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairSubscribeNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairCallStateNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairLinkageConfNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairLinkageConfStateNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairInviteJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.receivePairReqNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairedOrCanceledResultNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleServerUniversalInfoNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleClientUniversalInfoNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startPairMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.closePair=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.startQRCodePair=function(){var e=(0,s.default)(o.default.mark(function e(t){t.pairCode,t.isForce;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.sendJoinPairResult=function(){var e=(0,s.default)(o.default.mark(function e(t){t.id,t.result;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getPairConfPasResult=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.requestPairCode=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.endOldPairAndRepair=function(){var e=(0,s.default)(o.default.mark(function e(t){t.type,t.code;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startManualPair=function(){var e=(0,s.default)(o.default.mark(function e(t){t.pairCode,t.isForce;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.joinPairConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.joinPairConfNoPas=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.scanHardTerminalQRCode=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.inviteHardTerminal=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.inviteHardTerminalNoPas=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.closeInviteHardTerminal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),a=n,(0,p.default)(r,a)}return(0,m.default)(t,e),t}(coreCommon.Interface);t.default=v},1814:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleServerUniversalInfoNotify=void 0;var r=n(816),a=coreLogger.getLogger("logic")("synergism/server/info");t.handleServerUniversalInfoNotify=function(e){a.info("handleServerUniversalInfoNotify, param = ",e);var t=JSON.parse(e.info),n=t.command_seq,o=t.event_rsp;if(n)switch(n){case constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF:(0,r.receiveJoinPairConf)(e.id,t.param);break;default:a.info("unknow command, command_seq = ",n)}else o&&a.info("unknow event, event_rsp = ",o)}},1815:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.nativeWndApiImpl=t.getNativeWndApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=n(1816),g=r(v),C=n(299),S=void 0,w=(t.getNativeWndApi=function(){return isNullOrEmpty(S)&&(S=new w),S},t.nativeWndApiImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return n.changeNativeLangCode=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.langcode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.changeNativeLangCode)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setNativeWndLogPath=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.logpath;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.setNativeWndLogPath)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.notifyChangePassiveBidirectionStatus=function(){var t=(0,s.default)(o.default.mark(function t(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.notifyChangePassiveBidirectionStatus)(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.initTimer=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.isStartTimer,a=n.timeInterval;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.initTimer)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n}return(0,m.default)(t,e),t}(g.default))},1816:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.changeNativeLangCode=function(){var e=(0,s.default)(o.default.mark(function e(t){t.langcode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setNativeWndLogPath=function(){var e=(0,s.default)(o.default.mark(function e(t){t.logpath;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.notifyChangePassiveBidirectionStatus=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.initTimer=function(){var e=(0,s.default)(o.default.mark(function e(t){t.isStartTimer,t.timeInterval;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,m.default)(t,e),t}(coreCommon.Interface);t.default=v},1817:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dataConfLogcApiImpl=t.getDataConfLogicApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=n(1818),g=r(v),C=n(1819),S=r(C),w=null,_=(t.getDataConfLogicApi=function(){return isNullOrEmpty(w)&&(w=new _),w},t.dataConfLogcApiImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return n.rejectRemoteControl=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.userid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).rejectRemoteControl(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setRemoteControl2Other=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.userid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).setRemoteControl2Other(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.saveDesktopShareSettingLogic=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.isDesktopShareSet;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).saveDesktopShareSettingLogic(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setIsUsePrimarySize=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).setIsUsePrimarySize();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getDesktopShareInDbLogic=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).getDesktopShareInDbLogic();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.hidePickSharingWindow=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).hidePickSharingWindow();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.startAppSharingWindow=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.index;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).startAppSharingWindow(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.initializeDataConf=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).initializeDataConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.startShareScreen=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.default).startShareScreen();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n}return(0,m.default)(t,e),t}(g.default))},1818:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(131),u=r(c),f=n(4),l=r(f),d=n(132),p=r(d),h=n(133),m=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.rejectRemoteControl=function(){var e=(0,s.default)(o.default.mark(function e(t){t.userid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setRemoteControl2Other=function(){var e=(0,s.default)(o.default.mark(function e(t){t.userid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.saveDesktopShareSettingLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){t.isDesktopShareSet;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setIsUsePrimarySize=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getDesktopShareInDbLogic=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.hidePickSharingWindow=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.startAppSharingWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){t.index;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.initializeDataConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.startShareScreen=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),a=n,(0,p.default)(r,a)}return(0,m.default)(t,e),t}(coreCommon.Interface);t.default=v},1819:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(135),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(261),p=n(1820),h=r(p),m=n(1821),v=r(m),g=n(1822),C=r(g),S=n(1823),w=r(S),_=n(1824),I=r(_),b=n(1825),N=r(b),E=n(958),y=r(E),T=n(216),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(T),A=n(215),x=coreLogger.getLogger("dataconf")("logic"),k=null,M=function e(){var t=this;return(0,l.default)(this,e),this._instancePlatformImpl=function(){switch(x.info("dataconfmanager _instancePlatformImpl"),d.DFConfig.platform){case"win":var e=null;e=window.isHubEnv?new N.default:new y.default;var n=new h.default(e);t.platformCategory=new I.default(n),e.proxy=n,n.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"bigwin":var r=new w.default,a=new h.default(r);t.platformCategory=new I.default(a),r.proxy=a,a.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"mac":var o=new v.default;t.platformCategory=new I.default(o),o.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"ios":case"android":t.platformCategory=new C.default,t.platformCategory.proxy=t}},this.initializeDataConf=function(){t._instancePlatformImpl(),t.platformCategory.registerDataEvent();var e=new coreCommon.ObserverOpts(d.DFConfig.moduleName);e.target=t,coreCommon.Observer.subscribe("McuConfType",t.handleMcuConfType,e),coreCommon.Observer.subscribe("onDataSharingStateChanged",t.onDataSharingStateChanged,e)},this.handleMcuConfType=function(e){x.info("handleMcuConfType",e.param),e.param&&$dispatch(coreUi.changeIsSameGradeMcu(e.param.type))},this.handleJoinDataConfFail=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[0]}),e.next=3,coreCall.configMsDataConf(0);case 3:return e.next=5,coreCall.setCallReinvite();case 5:case"end":return e.stop()}},e,t)})),this.setRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.platformCategory.setRemoteControl2Other(n);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.rejectRemoteControl=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.platformCategory.rejectRemoteControl(n);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.startAppSharingWindow=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.platformCategory.startAppSharingWindow(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setIsUsePrimarySize=function(){t.platformCategory.setIsUsePrimarySize()},this.saveDesktopShareSettingLogic=function(){var e=(0,u.default)(s.default.mark(function e(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:constant.DESKTOP_SHARE_SETTING.IS_DEFAULT;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x.info("saveDesktopShareSetting","isDesktopShareSet:["+r+"]"),n=[{key:"desktopShareSet",value:r}],e.next=4,window.confirm(language.ARE_YOU_SURE_SAVE_DESKTOP_SHARING_SETTINGS,!0).then(function(e){x.info("userClick  saveDesktopShareSettingLogic"),t.compressSaveDesktopShareSet(e.ret,n);var r=$getState().conf.setShareQuality,a={};r=100===r?1:40===r?0:2,a=(0,o.default)(a,{share_quality:r}),x.info("saveDesktopShare",a),A.SvcAtdManager.setParam(a)});case 4:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),this.getDesktopShareInDbLogic=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x.info("getDesktopShareInDbLogic start"),e.next=4,coreDb.queryLoginSetting({key:"desktopShareSet"});case 4:return n=e.sent,x.info("queryDesktopShareInDb",n),n.value?$dispatch(coreUi.changeShareQuality(constant.DESKTOP_SHARE_SET_SIZE[n.value.toUpperCase()+"_SIZE"])):(r=constant.DESKTOP_SHARE_SETTING.IS_DEFAULT,$dispatch(coreUi.changeShareQuality(constant.DESKTOP_SHARE_SET_SIZE[r]))),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),x.error("getDesktopShareInDbLogic error",e.t0);case 13:case"end":return e.stop()}},e,t,[[0,10]])})),this.compressSaveDesktopShareSet=function(){var e=(0,u.default)(s.default.mark(function e(n,r){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=13;break}return x.info("compressSaveDesktopShareSet","nameArgs:["+r+"]"),a=$getState().conf.isShowDataControl,e.next=6,coreDb.saveLoginSetting(r);case 6:if(!(O.isInDataConf()&&O.isDataShareStarted()&&a)){e.next=12;break}return e.t0=O,e.next=10,t.getDesktopShareSize();case 10:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1);case 12:coreUi.hideModal();case 13:e.next=18;break;case 15:e.prev=15,e.t2=e.catch(0),x.error("compressSaveDesktopShareSet:",e.t2);case 18:case"end":return e.stop()}},e,t,[[0,15]])}));return function(t,n){return e.apply(this,arguments)}}(),this.getDesktopShareSize=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getDesktopShareInDbLogic();case 3:return n=e.sent,r=!isNullOrEmpty(n)&&n.value||constant.DESKTOP_SHARE_SETTING.IS_DEFAULT,x.info("getDesktopShareSize start desktopShareSet",r),e.abrupt("return",constant.DESKTOP_SHARE_SET_SIZE[r.toUpperCase()+"_SIZE"]);case 9:e.prev=9,e.t0=e.catch(0),x.error("getDesktopShareSize error",e.t0);case 12:case"end":return e.stop()}},e,t,[[0,9]])})),this.onDataSharingStateChanged=function(e){$dispatch(coreUi.setDataSharingFlag(e))},this.hidePickSharingWindow=function(){t.platformCategory.hidePickSharingWindow()},this.startShareScreen=function(){t.platformCategory.startShareScreen()},this.getNameFromMemberListByNum=function(e){for(var t=$getState(),n=t.conf.memberListInfo,r={},a=!1,o=0;o<n.length;o++)if(e===n[o].number||e===n[o].userInfo.bind_no)return r=n[o].userInfo,a=!0,x.info(" getNameFromMemberListByNum, isFound = ",a),r.name;return""},this.getNameFromMsMemberListByNum=function(e){for(var t=O.getDataConfMemberList(),n="",r=0;r<t.length;++r)if("number"==typeof t[r].number)t[r].number===e&&(n=t[r].userInfo.name);else if(t[r].user_num)t[r].user_num===e&&(n=t[r].user_name);else{var a=/:[\S]+\@/,o=a.exec(t[r].number),i=o[0].split("");i.pop(),i.shift();var s=i.join("");s===e&&(n=t[r].userInfo.name)}return n},k||(this.platformCategory=null,k=this),k};t.default=M},1820:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3),i=a(o),s=n(1),c=a(s),u=n(2),f=a(u),l=n(4),d=a(l),p=n(5),h=a(p),m=n(260),v=n(216),g=r(v),C=n(215),S=n(259),w=r(S),_=n(242),I=n(300),b=n(200),N=n(261),E=coreLogger.getLogger("dataconf")("logic"),y=function(){function e(t){var n=this;(0,d.default)(this,e),this.receiveSvcForOwnerChanged=Noop,this.stopSvcForOwnerChanged=Noop,this.showWinForSizeChange=Noop,this.addEventListenerForCtrlPrivilege=Noop,this.deleteEventListenerForCtrlPrivilege=Noop,this.handleApplistResult=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=$getState().conf.isFirstActiveAppShare,a=g.getShareAppHwnd(),E.info("handleApplistResult,setSharingapp,setStart,setHightlightShareWnd,shareAppHwnd = "+a+", isFirstActiveAppShare ="+r),n.featureImpl.handleApplistResult(t);case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.openShareScreen=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("  openShareScreen start"),$dispatch(coreUi.hideDataShareButton(!0)),e.t0=g,e.next=5,n.proxy.getDesktopShareSize();case 5:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1),n.featureImpl.openShareScreen();case 8:case"end":return e.stop()}},e,n)})),this.startDocShare=(0,f.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.getSharingType()!==constant.ConfSharingType.Document){e.next=7;break}return E.info("start openDocShareFile = ",g.getDocShareFilePath()),t=g.getDocShareFilePath(),e.next=5,n.stopCurrentSharing();case 5:g.configSharingParam(constant.ConfSharingType.Document,t),n.proxy.openDocShareFile(t);case 7:case"end":return e.stop()}},e,n)})),this.getUserSelectFileName=function(){var e=window.require("electron").remote.dialog;return E.info("getUserSelectFileName start"),new i.default(function(t,r){e.showOpenDialog({title:"Select a folder",properties:["openFile"],filters:[{name:"Text"}]},function(e){n.g_userSelfFile=e,t(1),E.info("getUserSelectFileName  selFiles =",e)})})},this.stopCurrentSharing=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.stopWBDoc();case 2:if(!g.isInSendDocSharing()&&!g.isInReceiveDocSharing()){e.next=6;break}return E.info("stopCurrentSharing stopDocSharing"),e.next=6,g.stopDocSharing();case 6:g.isInScreenSharing()&&(E.info("stopCurrentSharing stopShareScreen"),n.stopShareScreen());case 7:case"end":return e.stop()}},e,n)})),this.onJoinDataConfFail=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.featureImpl.onJoinDataConfFail();case 1:case"end":return e.stop()}},e,n)})),this.stopShareScreen=function(){n.proxy.stopShareScreen()},this.onStartDataShare=function(e){if(E.info("OnStartDataShare receive native click event, show app list ,changeIsShowMinWin false"),e.param&&3===e.param.shareType&&coreCommon.dispatchModuleEvent("pluginDataSharingHwndInfoNotify",{shareHwndTitle:e.param.shareHwndTitle}),!1===g.isSelfJoinedDataConf()){E.info("OnStartDataShare fail, not in dataconf");var t={dialog_type:1,content_id:"LANG_NATIVE_NOT_IN_DATACONF"};return void _.NativeInterface.showMessageBox(0,t)}$dispatch(coreUi.changeIsShowMinWin(!1)),n.shareFromNative=!0,n.proxy.startShareScreen(e)},this.onStartShareFailed=function(){g.setShareAppHwnd(0),g.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))},this.handleNativeUserStopDataShare=function(){g.isInWBSharing()?(E.info("handleNativeUserStopDataShare stopWBDoc"),coreCommon.dispatchModuleEvent("pluginWhiteBoardSharingStateChangedNotify",!1),g.stopWBDoc(),g.closeWBTab()):g.isDataShareStarted()?(E.info("handleNativeUserStopDataShare stopShareScreen"),n.stopShareScreen()):g.isInSendDocSharing()?(E.info("handleNativeUserStopDataShare stopDocSharing"),g.stopDocSharing(),window.isDataSharing=!1,n.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE)):E.info("handleNativeUserStopDataShare fail")},this.handleNativeUserLeaveConf=function(){E.info("  handleNativeUserLeaveConf start"),(0,b.actionLeaveConf)()},this.handleNativeUserEndConf=function(){E.info("  handleNativeUserEndConf start"),(0,b.actionEndConf)()},this.handleNativeNotifyRequestControl=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.requestRemoteControlPrivilege();case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyReleaseControl=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delRemoteControlPrivilege("");case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyShowConfMember=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,b.handleShowMemberList)();case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyAddConfMember=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreUi.initConfSelectBoxAddMember();case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifySetMic=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$getState().call.isMuteMic?coreCommon.MicControl.getInstance().muteMic(!1):coreCommon.MicControl.getInstance().muteMic(!0);case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifySetSpeaker=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$getState().call.isMuteSpk){e.next=5;break}return e.next=3,coreCommon.SpkControl.getInstance().muteSpk(!1);case 3:e.next=7;break;case 5:return e.next=7,coreCommon.SpkControl.getInstance().muteSpk(!0);case 7:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyDataFirstFrameRecv=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("handleNativeNotifyDataFirstFrameRecv start"),n.featureImpl.handleNativeNotifyDataFirstFrameRecv();case 2:case"end":return e.stop()}},e,n)})),this.onChangeFirstActiveShareApp=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changeFirstActiveShareApp(t));case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleNativeNotifyShowClient=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("handleNativeNotifyShowClient start"),win.isMinimized()?appService.showMainWindow(!0):delegate.winMinimize();case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyPrepareRemoteControl=(0,f.default)(c.default.mark(function e(){var t,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(E.info("handleNativeNotifyPrepareRemoteControl start"),t=g.getDataConfMemberList(),r=[],a=0;a<t.length;a++)t[a].is_self||1!==t[a].device_type||(o=t[a].user_num,i=g.getRemoteControlUserNum(),s=i!==o?0:1,r.push({username:t[a].user_name,bindnum:o.toString(),status:s}));r.length>0&&g.showNativeRemoteControl(r);case 5:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyChairmanRemoteControl=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("handleNativeNotifyChairmanRemoteControl data ",t),t.param.bindnumber&&(!0===t.param.isgrant?n.proxy.setRemoteControl2Other(t.param.bindnumber):g.delRemoteControlPrivilege(t.param.bindnumber));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleNativeNotifyDataShareQuality=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("handleNativeNotifyChairmanRemoteControl data ",t),$dispatch(coreUi.changeShareQuality(t.param.value)),r="",t.param.value===constant.DESKTOP_SHARE_SET_SIZE.DEFAULT_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_DEFAULT),t.param.value===constant.DESKTOP_SHARE_SET_SIZE.IMAGEQUALITY_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_IMAGEQUALITY),t.param.value===constant.DESKTOP_SHARE_SET_SIZE.DYNAMICEFFECT_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_DYNAMICEFFECT),a=[{key:"desktopShareSet",value:r}],e.next=9,coreDb.saveLoginSettings({args:a});case 9:E.info("nameArgs",a),t.param.value&&t.param.value>0&&t.param.value<101&&g.setDataShareScreenPicQuality(t.param.value);case 11:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handledocShareOpenResultNotify=function(e){E.info("handledocShareOpenResultNotify result : "+e),0!==e&&g.clearConfSharingType()},this.handleShowNativeDSPage=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("docshare handleShowNativeDSPage: ",t),0!==t.docid?(n.dataPicSize={width:894,height:562},n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL),!0===t.issender&&$dispatch(coreUi.hideDataShareButton(!0))):0===t.docid&&0===t.pageid&&(window.isDataSharing=!1,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),$dispatch(coreUi.hideDataShareButton(!1)));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleDocShareOnDocNewNotify=function(e){E.info("handleDocShareOnDocNewNotify receive other doc sharing: "+e),!0===e&&n.stopCurrentSharing()},this.handleShowNativeWBPageChairman=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("handleShowNativeWBPage start ",t),!0===t.isopen?(n.changeDataControlShowImpl(!0,512),$dispatch(coreUi.hideDataShareButton(!0))):(E.info("handleShowNativeWBPageChairman set isDataSharing false"),window.isDataSharing=!1,n.changeDataControlShowImpl(!1,512),$dispatch(coreUi.hideDataShareButton(!1)));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleShowNativeWBPageAttendee=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("handleShowNativeWBPageAttendee start",t),!0===t.isopen?n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL,512):(E.info("handleShowNativeWBPageAttendee set isDataSharing false"),window.isDataSharing=!1,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE,512));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.hidePickSharingWindow=function(){n.featureImpl.hidePickSharingWindow()},this.handleNativeDataRenderSize=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.handleNativeNotifyResetRenderRect(t);case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.fullScreenReceiveShare=function(){},this.handleReceiveScreenKeyFrame=function(e){n.featureImpl.handleReceiveScreenKeyFrame(e)},this.handleDataShareEnd=function(){n.featureImpl.handleDataShareEnd()},this.onRequestOperateTokenFail=function(){E.info("start share failed."),n.featureImpl.onRequestOperateTokenFail()},this.onReceiveWhiteBoardShare=(0,f.default)(c.default.mark(function e(){var t,r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("receive white board share event"),t=$getState().conf,r=t.bfcpFrameHwnd,a=t.isSvcConf,o=0,!a){e.next=7;break}o=r,e.next=10;break;case 7:return e.next=9,w.getAvcFrameHandles();case 9:o=e.sent;case 10:if(!(o>0)){e.next=15;break}return e.next=13,C.SvcAtdManager.closeBfcpFrame();case 13:return e.next=15,w.closeBfcpFrame();case 15:case"end":return e.stop()}},e,n)})),this.onSetSharingMonitor=function(e){E.info("onSetSharingMonitor index: ",e.index),$dispatch(coreUi.setMonitorIndex(e.index))},this.featureImpl=t,this.proxy=null,this.dataPicSize={},this.g_userSelfFile=[],this.stopDataShareTimer=0,this.shareFromNative=!1}return(0,h.default)(e,[{key:"setDataPicSize",value:function(e){this.dataPicSize=e}},{key:"registerDataEvent",value:function(){this.featureImpl.registerDataEvent();var e=new coreCommon.ObserverOpts(N.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e),coreCommon.Observer.subscribe("applistResult",this.handleApplistResult,e),coreCommon.Observer.subscribe("handleNativeDataRenderSize",this.handleNativeDataRenderSize,e),coreCommon.Observer.subscribe("OnNativeUserStartDataShare",this.onStartDataShare,e),coreCommon.Observer.subscribe("OnNativeUserStopDataShare",this.handleNativeUserStopDataShare,e),coreCommon.Observer.subscribe("OnNativeUserLeaveConf",this.handleNativeUserLeaveConf,e),coreCommon.Observer.subscribe("OnNativeUserEndConf",this.handleNativeUserEndConf,e),coreCommon.Observer.subscribe("onNativeNotifyRequestControl",this.handleNativeNotifyRequestControl,e),coreCommon.Observer.subscribe("onNativeNotifyReleaseControl",this.handleNativeNotifyReleaseControl,e),coreCommon.Observer.subscribe("onNativeNotifyShowConfMember",this.handleNativeNotifyShowConfMember,e),coreCommon.Observer.subscribe("onNativeNotifyAddConfMember",this.handleNativeNotifyAddConfMember,e),coreCommon.Observer.subscribe("onNativeNotifySetMic",this.handleNativeNotifySetMic,e),coreCommon.Observer.subscribe("onNativeNotifySetSpeaker",this.handleNativeNotifySetSpeaker,e),coreCommon.Observer.subscribe("onNativeNotifyDataFirstFrameRecv",this.handleNativeNotifyDataFirstFrameRecv,e),coreCommon.Observer.subscribe("ChangeFirstActiveShareApp",this.onChangeFirstActiveShareApp,e),coreCommon.Observer.subscribe("onNativeNotifyShowClient",this.handleNativeNotifyShowClient,e),coreCommon.Observer.subscribe("onNativeNotifyPrepareRemoteControl",this.handleNativeNotifyPrepareRemoteControl,e),coreCommon.Observer.subscribe("onNativeNotifyChairmanRemoteControl",this.handleNativeNotifyChairmanRemoteControl,e),coreCommon.Observer.subscribe("onNativeNotifyDataShareQuality",this.handleNativeNotifyDataShareQuality,e),coreCommon.Observer.subscribe("docShareOpenResultNotify",this.handledocShareOpenResultNotify,e),coreCommon.Observer.subscribe("onShowNativeDSPage",this.handleShowNativeDSPage,e),coreCommon.Observer.subscribe("onShowNativeWBPageChairman",this.handleShowNativeWBPageChairman,e),coreCommon.Observer.subscribe("onShowNativeWBPageAttendee",this.handleShowNativeWBPageAttendee,e),coreCommon.Observer.subscribe("onReceivedScreenKeyFrame",this.handleReceiveScreenKeyFrame,e),coreCommon.Observer.subscribe("OnStartShareFailed",this.onStartShareFailed,e),coreCommon.Observer.subscribe("onReceiveWhiteBoardShare",this.onReceiveWhiteBoardShare,e),coreCommon.Observer.subscribe("handleNotifySharingMonitor",this.onSetSharingMonitor,e)}},{key:"changeDataControlShowImpl",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,p,h,v;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||2,E.info("native changeDataControlShow, isShow : "+t),a=$getState().conf,o=a.memberListInfo,i=a.isSvcConf,s=a.isVideoConf,u=$getState().myInfo.enableDoubleScreen,f=$getState().conf.monitorNumber,!0===t?(m.ToolbarManager.initDeviceStates(),m.ToolbarManager.setChairmanState(o),(!u||f<=1)&&(i?C.SvcAtdManager.switchVideoToMin():w.switchVideoToMin())):i?C.SvcAtdManager.switchVideoToMain():s?w.switchVideoToMain():w.switchAudioToMain(),l=$getState().conf.setPreviewsCount>0?$getState().conf.setPreviewsCount:0,d=$getState().conf,p=d.confServerId,h=d.vmrId,v=isNullOrEmpty(h)?p:h,e.next=11,g.showNativeDataControl(t,!0,l,$getState().login.account,r,v);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearCanvas",value:function(){}},{key:"closeBfcpFrameForSharingSession",value:function(){this.featureImpl.closeBfcpFrameForSharingSession()}},{key:"closeAppShare",value:function(e){this.featureImpl.closeAppShare(e)}},{key:"doChangeDataConfShowMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,p,h,m,v,C,S,w,_,I,b,N,y,T,O,A,x;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("changeDataConfShowMode start, showMode = ",t),r=n||2,a=$getState().conf.sharePersonName,t!==constant.SHOW_DATACONF_MODE.SHOW_DATACONF_FULL&&t!==constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL){e.next=33;break}if(!(2===r&&this.dataPicSize&&this.dataPicSize.width||512===r)){e.next=30;break}return o=this.dataPicSize.width,i=this.dataPicSize.height,E.info("dataConfModel.createNativeDataSharingWnd start"),this.featureImpl.initDeviceStates(),this.featureImpl.clearBfcpTimer(),s=$getState().conf,u=s.confSubject,f=s.confServerId,l=s.vmrId,d=s.currentConfInfo,isNullOrEmpty(l)||(f=l),p=$getState().conf.setPreviewsCount>0?$getState().conf.setPreviewsCount:0,h=$getState().call,m=h.cameraDevicesList,v=h.spkDevicesList,C=h.micDevicesList,S=$getState().setting,w=S.camIndex,_=S.spkIndex,I=S.micIndex,b=d.general_pwd?d.general_pwd:null,N={spkIndex:_,spkDevicesList:v},y={micIndex:I,micDevicesList:C},T={camIndex:w,cameraDevicesList:m},O={spk_devices:N,mic_devices:y,camera_devices:T},e.next=22,g.createNativeDataSharingWnd(u,f,p,o,i,a,coreConf.isConfChairMan(),O,b,$getState().login.account,r);case 22:return e.next=24,coreAccount.getLoginModel();case 24:A=e.sent,x=A.sipLoginOnly,x?delegate.winHide():delegate.winMinimize(),this.featureImpl.handleBfcpForChangeMode(r,a),e.next=31;break;case 30:E.error("dataConfModel.createNativeDataSharingWnd fail");case 31:e.next=39;break;case 33:return setTimeout(function(){$getState().conf.isDataConfSharing||(coreCall.resetBFCStatus($getState().call.callId,1),E.info("changeDataConfShowMode isDataConfSharing is false,resetBFCStatus to 1"))},5e3),this.featureImpl.resumeVideoWhenDataEnd(),e.next=37,g.closeNativeDataSharingWnd();case 37:E.info("isDataSharing when close ",window.isDataSharing),this.featureImpl.handleCloseNativeDataWnd(r,a);case 39:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleBfcpWindow",value:function(e){var t=this;_.NativeInterface.setHightlightShareWnd(0,!1),E.info("test111, data.isself = "+e.isself),e.isself&&g.setShareAppHwnd(0),g.updateDataShareOwner(""),clearTimeout(window.clearSetBfcp);var n=$getState().conf.isSvcConf,r=function(){var e=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("init bfcp frame onDataShareEnd"),!n){e.next=6;break}return e.next=4,C.SvcAtdManager.initBfcpFrame($getState().call.callId,!1);case 4:e.next=7;break;case 6:w.initBfcpWindow($getState().call.callId,!1);case 7:(0,I.NotifyStartSharing)(0,""),E.info("notify to proxy bfcp is start");case 9:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}();window.isHubEnv||(window.clearSetBfcp=setTimeout(function(){$getState().call.iSreceivingBFCP&&!$getState().conf.isDataConfSharing&&r()},1500))}},{key:"onJoinDataConf",value:function(){C.SvcAtdManager.reportIsDataConf(!0),$dispatch(coreUi.hideDataShareButton(!0)),g.isConfDataShareSelfEntered()?(E.info(" onJoinDataConf self entered"),$dispatch(coreUi.hideDataShareButton(!1))):E.info(" onJoinDataConf self not entered")}},{key:"closeBfcpFrameForOwnerChanged",value:function(){this.featureImpl.closeBfcpFrameForOwnerChanged()}},{key:"resumeVideoWhenDataEnd",value:function(){this.featureImpl.resumeVideoWhenDataEnd()}},{key:"showStartConfirmWithCallback",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareFromNative){e.next=5;break}t(),this.shareFromNative=!1,e.next=11;break;case 5:if(!coreConf.isConfChairMan()){e.next=10;break}return e.next=8,window.confirm(language.LANG_NATIVE_CONFIRM_START_DATASHARE,!0).then(function(e){e.ret&&(E.info("userClick win startShareScreen confirm"),t())});case 8:e.next=11;break;case 10:window.Toast(language.LANG_NATIVE_DATA_CONF_SOMEONE_SHARE_RIGHTNOW,2,!1,"pcToast_center");case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"getApplist",value:function(){g.getApplist()}},{key:"showNativeShareSelectWnd",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.showNativeShareSelectWnd();case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"startAppSharingWindow",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,n,r,a){var o,i,s,u,f,l,d,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.advancedSetting(r,a),o="",i=constant.ConfSharingType.None,s=coreConf.getCurrentConfId(),0!==t){e.next=9;break}i=constant.ConfSharingType.Desktop,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,params:[s,i]}),e.next=35;break;case 9:if(1!==t){e.next=17;break}return coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,params:[i,1]}),g.setShareAppHwnd(0),window.isDataSharing=!0,g.createWBNewDocAndPage(),e.abrupt("return");case 17:if(!N.DFConfig.isDocShareEnabled()||2!==t){e.next=33;break}if(u=$getState().myInfo.bind_no,!(!0===g.isDataShareStarted()&&g.getDataShareOwner()!==u||g.isInSendDocSharing())){e.next=23;break}return e.next=22,window.confirm(language.CANNOT_SHARE_FILE,"LANG_NATIVE_CONFIRM_TITLE",!1);case 22:return e.abrupt("return");case 23:return i=constant.ConfSharingType.Document,coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,params:[i,1]}),e.next=27,this.getUserSelectFileName();case 27:if(""!==(o=this.g_userSelfFile.length>0&&this.g_userSelfFile[0].length>0?this.g_userSelfFile[0]:"")){e.next=31;break}return E.error("startAppSharingWindow, user not select doc share file"),e.abrupt("return");case 31:e.next=35;break;case 33:i=constant.ConfSharingType.Program,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,params:[s,i]});case 35:if(this.g_userSelfFile=[],E.info("docShareFilePath ",o),g.configSharingParam(i,o),i!==constant.ConfSharingType.Document){e.next=43;break}return E.info("startAppSharingWindow start docshare"),window.isDataSharing=!0,this.startDocShare(),e.abrupt("return");case 43:0!==t?n?g.setShareAppHwnd(n):(f=$getState(),l=f.conf.shareAppList,d=l[t],p=d.handler,g.setShareAppHwnd(p)):g.setShareAppHwnd(0),E.info("isDataSharing true 2"),window.isDataSharing=!0,this.openShareScreen();case 47:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.proxy.handleJoinDataConfFail();case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleWindowForStopShareScreen",value:function(){this.featureImpl.handleWindowForStopShareScreen()}},{key:"toggleShowDataControlMenu",value:function(e,t){this.proxy.toggleShowDataControlMenu(e,t)}},{key:"changeDataConfShowMode",value:function(e,t){this.proxy.changeDataConfShowMode(e,t)}}]),e}();t.default=y},1821:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(335),p=n(216),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),m=n(261),v=coreLogger.getLogger("dataconf")("logic"),g=function(){function e(){var t=this;(0,u.default)(this,e),this.onAsOnScreenData=function(e){if(!e.param.width||!e.param.height)return void v.error("screendata width = "+e.param.width+"height = "+e.param.height);window.tupVideo.getShareFrame(t.onFrameData,10004)},this.onAsOnOnScreenDataToBfcpData=function(e){t.onAsOnScreenData(e)},this.onFrameData=function(e,n,r){if(!t.yuvCanvas){var a=document.getElementById("screenCanvas");v.info("dataPicSize.width = "+t.dataPicSize.width+";dataPicSize.height = "+t.dataPicSize.height),t.yuvCanvas=new YUVCanvas({canvas:a,width:t.dataPicSize.width,height:t.dataPicSize.height})}if(t.yuvCanvas&&!t.yuvCanvas.isWebGL())return void window.log("<video>onFrameData, canvas is not support webgl");var o=document.getElementById("parentCanvasContainer");if(null===o)return void v.info("onFrameData parentCanvasContainer is null");var i=o.offsetWidth,s=o.offsetHeight,c=$getState().conf.shareScreenWH.lastheight,u=$getState().conf.shareScreenWH.lastwidth;if(c!==s||u!==i){v.info("onFrameData set style"),o.style.overflow=!0===h.getIsUsePrimarySize()?"auto":"inherit";var f=t.calcScreenSize(t.dataPicSize,{width:i,height:s}),l=document.getElementById("screenCanvas");if(null===l)return v.info("onFrameData screenCanvas is null, refresh data share mode."),void $dispatch(coreUi.showDataShareMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL));var d=document.getElementById("screenCanvasContainer");if(null===d)return void v.info("onFrameData screenCanvasContainer is null");d.style.width=f.width+"px",d.style.height=f.height+"px";var p=Math.max(Math.ceil((i-f.width)/2),0),m=Math.max(Math.ceil((s-f.height)/2),0);d.style.left=p+"px",d.style.top=m+"px";var g=document.createElement("canvas"),C=g.getContext("2d"),S=t.getPixelRatio(C);v.info("onFrameData ratio = ",S),l.width=f.width*S,l.height=f.height*S,$dispatch(coreUi.changeShareScreenWH({lastwidth:i,lastheight:s})),t.yuvCanvas.changeCanvasSize(f.width*S,f.height*S,l)}if(r&&e>0&&n>0&&r.length===e*n*1.5){var w=new Uint8Array(r),_=e*n,I=e/2*(n/2);t.yuvCanvas.drawNextOutputPicture({yData:w.subarray(0,_),uData:w.subarray(_,_+I),vData:w.subarray(_+I,_+I+I),yDataPerRow:e,yRowCnt:n,uDataPerRow:e/2,uRowCnt:n/2})}},this.calcScreenSize=function(e,t){if(!0===h.getIsUsePrimarySize())return e;var n={width:0,height:0};if(e&&t){var r=e.width/e.height,a=t.width,o=t.height,i=a/r,s=o*r,c=(o-i)/2,u=(a-s)/2;n=r>1&&c>0||r<1&&u<0?{width:a,height:Math.floor(i)}:{width:Math.ceil(s),height:o}}return t||v.warn("<video>containerSize is null"),n},this.getPixelRatio=function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},this.changeDataControlShowImpl=function(){var e=(0,s.default)(o.default.mark(function e(n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.showDataControl(n)),v.info("js changeDataControlShow, isShow : "+n);case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.doChangeDataConfShowMode=function(){var e=(0,s.default)(o.default.mark(function e(n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.info("changeDataConfShowMode start, showMode = ",n),$dispatch(coreUi.showDataShareMode(n));case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.closeBfcpFrameForSharingSession=Noop,this.closeAppShare=Noop,this.handleBfcpWindow=function(e){var n=$getState().conf,r=n.isSvcConf,a=n.svcShareData;r&&($dispatch(coreUi.hideDataShareButton(!1)),e.isself&&t.proxy.changeDataControlShow(!1),a.hasOwnProperty("ssrc")&&a.ssrc<0&&d.SvcAttendanceManager.stopSvcShareOrBfcp(),clearTimeout(t.clearSetBfcp),t.clearSetBfcp=setTimeout(function(){if($getState().call.iSreceivingBFCP){d.SvcAttendanceManager.receviceSvcShareOrBfcp(1,"");var e=coreCall.getBigContainerSize(),t=e.height-54-74;2===$getState().conf.svcViewMode&&(t=e.height),e={width:e.width,height:t},coreCall.setSvcBFCPVideoRender(e),$dispatch(coreUi.changeIsShowMainScreen(!1))}},1500))},this.onJoinDataConf=function(){$dispatch(coreUi.hideDataShareButton(!0)),h.isConfDataShareSelfEntered()?(v.info(" onJoinDataConf self entered"),$dispatch(coreUi.hideDataShareButton(!1))):v.info(" onJoinDataConf self not entered")},this.closeBfcpFrameForOwnerChanged=Noop,this.doMouseDown=function(e){v.info("doMouseDown param  ",e);var n=e.clientX,r=e.clientY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=void 0;1===e.which?i=1:3===e.which&&(i=3),v.info("doMouseDown param  msg:"+i),t.sendWndMouseMsg(e,i,o)},this.getPointOnCanvas=function(e,n,r){var a=e.getBoundingClientRect(),o=Math.floor(n-a.left),i=Math.floor(r-a.top);return o=t.dataPicSize.width/a.width*o,i=t.dataPicSize.height/a.height*i,{x:o,y:i}},this.sendWndMouseMsg=function(e,t,n){var r=0;!0===e.ctrlKey&&(r=8),!0===e.shitKey&&(r|=4);var a=n.x+256*n.y*256;a=Math.ceil(a),h.inputWndMsg(t,a,r,n.x,n.y)},this.doMouseMove=function(e){t.fireMouseMove(e)},this.doMouseUp=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=void 0;1===e.which?i=2:3===e.which&&(i=4),v.info("doMouseUp param  msg:"+i),t.sendWndMouseMsg(e,i,o)},this.doMouseDBClick=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r);v.info("doMouseDBClick param  msg:101"),t.sendWndMouseMsg(e,101,o)},this.fireMouseMove=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=0,s=0;0===e.button?s=1:1===e.button?s=16:2===e.button&&(s=2),!0===e.ctrlKey&&(s|=8),!0===e.shitKey&&(s|=4),i=n+256*r*256,h.inputWndMsg(5,i,s,o.x,o.y)},this.doKeyDown=function(e){var t=e.keyCode,n=t;v.info("doKeyDown start"),h.inputWndMsg(10,n,t,0,0)},this.doKeyUp=function(e){var t=e.keyCode,n=t;v.info("doKeyUp start"),h.inputWndMsg(11,n,t,0,0)},this.getApplist=Noop,this.openShareScreen=(0,s.default)(o.default.mark(function e(){var r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("  openShareScreen start"),$dispatch(coreUi.hideDataShareButton(!0)),e.t0=h,e.next=5,t.proxy.getDesktopShareSize();case 5:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1),r=window.require("electron").screen.getDisplayNearestPoint(window.require("electron").screen.getCursorScreenPoint()).workArea.width,a=new remote.BrowserWindow({frame:!1,show:!1,transparent:!1,width:0,height:0,skipTaskbar:!0,alwaysOnTop:!0}),window.require("electron").remote.getGlobal("remoteVars").contactGroups=$getState().contactGroups,i=n(239).format({protocol:"file",slashes:!0,pathname:n(624).join(window.__dirname,"data.html")}),a.loadURL(i),window.screenShareWin=a,s=r/2-300,c=new remote.BrowserWindow({frame:!1,show:!1,x:s,y:0,width:660,height:100,parent:a,transparent:!1,skipTaskbar:!0,alwaysOnTop:!0,fullscreen:!1,fullscreenable:!1,maximizable:!1}),u=n(239).format({protocol:"file",slashes:!0,pathname:n(624).join(window.__dirname,"shareControl.html")}),window.require("electron").remote.getGlobal("remoteVars").dataWin=c,c.loadURL(u),v.info("testwhite loadurl controlwin"),remote.ipcMain.on("toggle-menu-show-message",t.proxy.toggleShowDataControlMenu),c.once("ready-to-show",function(e){v.info("testwhite ready to show...");var t=$getState().conf.isShowDataControl;v.info("testwhite isShowDataControl = "+t),t&&c.show()}),c.setResizable(!1),t.changeDataControlShowImpl(!0);case 23:case"end":return e.stop()}},e,t)})),this.onJoinDataConfFail=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.proxy.handleJoinDataConfFail();case 2:n=$getState().conf.confHandle,isNullOrEmpty(n)||window.confirm(language.SHARING_JOINCONF_FAIL+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_DATA_CONF_ERROR,language.SHARING_JOINCONF_FAIL)});case 4:case"end":return e.stop()}},e,t)})),this.handleMacRecvWhiteBoardOrDoc=function(){var e=(0,s.default)(o.default.mark(function e(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.info("handleMacRecvWhiteBoardOrDoc start",n),$dispatch(coreUi.showDataTipsNotify(n,!0)),setTimeout(function(){$dispatch(coreUi.showDataTipsNotify({},!1))},5e3);case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onStartShareFailed=Noop,this.onRequestOperateTokenFail=function(){t.proxy.stopShareScreen()},this.fullScreenReceiveShare=function(){var e=$getState().call,t=e.isFullScreenReceiveShare,n=e.screenState,r=t||"full"===n;v.info(" onShareScreenSizeChange isFullScreenReceiveShare = "+t+" screenState = "+n),r&&(coreCall.changeFullScreenReceiveShare(!0),coreCall.toFullScreen())},this.handleDataShareEnd=function(){t.yuvCanvas=null},this.hidePickSharingWindow=Noop,this.yuvCanvas=null,this.dataPicSize={},this.clearSetBfcp=0,this.lastMoveTime=0,this.arrayMouseMoveEvent=[],this.proxy=null}return(0,l.default)(e,[{key:"setDataPicSize",value:function(e){this.dataPicSize=e}},{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(m.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnScreenData",this.onAsOnScreenData,e),coreCommon.Observer.subscribe("OnScreenDataToBfcpData",this.onAsOnOnScreenDataToBfcpData,e),coreCommon.Observer.subscribe("onMacRecvWhiteBoardOrDoc",this.handleMacRecvWhiteBoardOrDoc,e),coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e)}},{key:"receiveSvcForOwnerChanged",value:function(e){d.SvcAttendanceManager.receviceSvcShareOrBfcp(0,e),$dispatch(coreUi.changeIsShowMainScreen(!1))}},{key:"stopSvcForOwnerChanged",value:function(){coreCall.closeSvcDataSocket(),d.SvcAttendanceManager.stopSvcShareOrBfcp()}},{key:"showWinForSizeChange",value:function(){appService.showMainWindow(!0)}},{key:"addEventListenerForCtrlPrivilege",value:function(){var e=document.getElementById("screenCanvas");if(null===e)return void v.info(" OnGetRemoteControlPrivilege screenCanvas is null");e.addEventListener("mousedown",this.doMouseDown,!1),e.addEventListener("mousemove",this.doMouseMove,!1),e.addEventListener("mouseup",this.doMouseUp,!1),e.addEventListener("dblclick",this.doMouseDBClick,!1),window.addEventListener("keydown",this.doKeyDown,!0),window.addEventListener("keyup",this.doKeyUp,!0)}},{key:"deleteEventListenerForCtrlPrivilege",value:function(){var e=document.getElementById("screenCanvas");null!==e&&(e.removeEventListener("mousedown",this.doMouseDown,!1),e.removeEventListener("mousemove",this.doMouseMove,!1),e.removeEventListener("mouseup",this.doMouseUp,!1),e.removeEventListener("dblclick",this.doMouseDBClick,!1)),window.removeEventListener("keydown",this.doKeyDown,!0),window.removeEventListener("keyup",this.doKeyUp,!0)}},{key:"resumeVideoWhenDataEnd",value:function(){if($getState().conf.isSvcConf)return void v.info("is svcconf ,resumeVideoWhenDataEnd return");if("VIDEO_CONNECTED"===$getState().call.callStatus){v.info("<video>in data full,resumeVideoForDataEnd");var e=coreCall.getBigContainerSize(),t={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH};this.proxy.isVideoRemtoBig?(this.proxy.isVideoRemtoBig=!1,$dispatch(coreUi.changeBigSmallWin()),$dispatch(coreUi.changeSmallWinStyle(t)),coreCall.setLocalVideoRender(t),e=coreCall.calcRealVideoSize({width:$getState().call.smallWinStyle.width,height:$getState().call.smallWinStyle.height},e),$dispatch(coreUi.changeBigWinStyle(e)),coreCall.setVideoWH(!0,e)):(e=coreCall.calcRealVideoSize({width:16,height:9},e),$dispatch(coreUi.changeBigWinStyle(e)),coreCall.setLocalVideoRender(e))}}},{key:"showStartConfirmWithCallback",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!coreConf.isConfChairMan()){e.next=5;break}return e.next=3,window.confirm(language.LANG_NATIVE_CONFIRM_START_DATASHARE,!0).then(function(e){e.ret&&(v.info("userClick mac startShareScreen confirm"),t())});case 3:e.next=6;break;case 5:window.Toast(language.LANG_NATIVE_DATA_CONF_SOMEONE_SHARE_RIGHTNOW,2,!1,"pcToast_center");case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"startAppSharingWindow",value:function(e){var t=constant.ConfSharingType.Desktop;coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,params:[coreConf.getCurrentConfId(),t]}),h.configSharingParam(t,""),this.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),v.info("isDataSharing true 2"),window.isDataSharing=!0,this.openShareScreen()}},{key:"handleWindowForStopShareScreen",value:function(){win.restore(),"CALL_CONNECTED"===$getState().call.callStatus&&appService.showMainWindow(!0),coreCall.exitFullScreen(),remote.ipcMain.removeListener("toggle-menu-show-message",this.proxy.toggleShowDataControlMenu),$dispatch(coreUi.showDataConfCmdNotify({},!1))}}]),e}();t.default=g},1822:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=(n(356),n(593)),p=n(200),h=n(261),m=coreLogger.getLogger("dataconf")("logic"),v=function(){function e(){var t=this;(0,u.default)(this,e),this.mobileWhiteBoardStateChange=function(e){m.info("enter mobileWhiteBoardStateChange state: "+e),$dispatch(coreUi.changeStartWhiteBoard(1===e))},this.mobileScreenShareStateChange=function(e){m.info("enter mobileScreenShareStateChange state: "+e),t.isStartScreenShare=1===e,(t.isStartScreenShare||$getState().conf.isStartScreenShare)&&coreConf.itmeetingShareScreen(1===e),$dispatch(coreUi.changeStartScreenShare(1===e))},this.onMobileShareUserIdChange=function(){var e=(0,s.default)(o.default.mark(function e(n,r){var a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("onMobileShareUserIdChange, id=",handlePhoneNumber(n)),isNullOrEmpty(n)||t.isStartScreenShare||(m.info("showToast"),window.JSToNativeToast(2e3,language.DATA_CONFERENCE_READY_TO_SHARE)),$dispatch(coreUi.changeSharePersonNum(n)),a=$getState().myInfo.bind_no,n&&""!==n&&a&&n!==a&&coreConf.itmeetingAcceptSharing(),!n||""===n){e.next=11;break}if(i=coreCommon.convertHostNumber2Short(n),s=t.proxy.getNameFromMemberListByNum(i),isNullOrEmpty(s)){e.next=11;break}return t.notifyNativeScreenShareOwner(s),e.abrupt("return");case 11:if(!r||""===r){e.next=14;break}return t.notifyNativeScreenShareOwner(r),e.abrupt("return");case 14:t.notifyNativeScreenShareOwner("");case 15:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.notifyNativeScreenShareOwner=function(e){$dispatch(coreUi.changeSharePersonName(e)),window.notifyScreenShareOwner(e)},this.onMobileJoinDataConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.enterDataConf(!0)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&((0,d.meetingHWJoinConf)(),setTimeout(function(){(0,d.meetingHWsaveIpParam)("")},5e3)),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),2===window.sipCreateLeaveConf&&(window.onBeenVoip(language.RECALL_IN_SHARING),window.sipCreateLeaveConf=0);case 4:case"end":return e.stop()}},e,t)})),this.onMobileMeetingHwSaveIpParam=function(){var e=(0,s.default)(o.default.mark(function e(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.meetingHWsaveIpParam)(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onMobileLeaveDataConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.enterDataConf(!1)),$dispatch(coreUi.setDataSharingFlag(!1));case 2:case"end":return e.stop()}},e,t)})),this.onMobileDataSharingFlagChange=function(e){m.info("onMobileDataSharingFlagChange flag= "+e);var t=$getState().conf,n=t.firstsharingModalShow,r=t.firstInfoConfModalShow;$dispatch(coreUi.setDataSharingFlag(1===e)),$dispatch(coreUi.toggleIsMobileAcceptShareSuccess(1===e)),n&&0===e&&(0,p.resetFirstAcceptShareFlag)("isFirstAcceptShare"),1===e&&r&&(0,p.resetFirstInfoConferenceFlag)("isFirstInfoConf")},this.handleMobileJoinDataFail=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("handleMobileJoinDataFail"),t.proxy.handleJoinDataConfFail(),window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv||!coreConf.isInConf()||window.confirm(language.SHARING_JOINCONF_FAIL+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_DATA_CONF_ERROR,language.SHARING_JOINCONF_FAIL)});case 3:case"end":return e.stop()}},e,t)})),this.setRemoteControl2Other=Noop,this.rejectRemoteControl=Noop,this.setIsUsePrimarySize=Noop,this.proxy=null,this.isStartScreenShare=!1}return(0,l.default)(e,[{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(h.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("onMobileShareUserIdChange",this.onMobileShareUserIdChange,e),coreCommon.Observer.subscribe("onMobileJoinDataConf",this.onMobileJoinDataConf,e),coreCommon.Observer.subscribe("onMobileLeaveDataConf",this.onMobileLeaveDataConf,e),coreCommon.Observer.subscribe("onMobileSharingFlagChange",this.onMobileDataSharingFlagChange,e),coreCommon.Observer.subscribe("onMobileJoinDataFail",this.handleMobileJoinDataFail,e),coreCommon.Observer.subscribe("OnMeetingHWsaveIpParam",this.onMobileMeetingHwSaveIpParam,e),window.mobileWhiteBoardStateChange=this.mobileWhiteBoardStateChange,window.mobileScreenShareStateChange=this.mobileScreenShareStateChange}}]),e}();t.default=v},1823:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(215),m=n(200),v=n(216),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),C=n(299),S=n(242),w=n(631),_=r(w),I=n(261),b=coreLogger.getLogger("dataconf")("logic"),N=null,E=function(){function e(){var t=this;return(0,l.default)(this,e),this.onJoinDataConf=(0,u.default)(s.default.mark(function e(){var n,r,a,o,i,c,f,l,d,p;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().conf.isSvcConf||!window.bigConfIsVideo){e.next=8;break}return coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0))),n=$getState(),r=n.conf.confHandle,b.error("is not svc conf, leave conf, confHandle=",r),e.next=7,(0,m.actionLeaveConf)();case 7:return e.abrupt("return");case 8:return a=$getState().call.callId,e.next=11,coreCall.getBasicBandInfo(a);case 11:o=e.sent,b.info("Join Conference Success"),i=$getState().login,c=i.sipImpi,f=c,isNullOrEmpty(f)||-1!==(l=f.indexOf("@"))&&(f=f.slice(0,l)),coreConf.NotifyMyJoinConf(0,f),g.setDataShareVersion(1),coreConf.buriedStartCalcCPUUsage(),coreConf.buriedStartRecordQos(),coreConf.buriedJoinConfSuccess(o),d=function(){var e=(0,u.default)(s.default.mark(function e(){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.bfcpFrameHwnd,b.info("delayDispatchRecvBFCP "+window.delayDispatchRecvBFCP),n>0?(b.info("delay dispatch bfcp recv message, notify to proxy bfcp is start"),coreConf.NotifyStartSharing(0,""),window.delayDispatchRecvBFCP=!1):window.delayDispatchRecvBFCP=!1;case 3:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),p=$getState().conf.bfcpFrameHwnd,window.delayDispatchRecvBFCP&&p>0&&setTimeout(function(){d()},2e3);case 25:case"end":return e.stop()}},e,t)})),this.closeBfcpFrameForOwnerChanged=Noop,this.handleApplistResult=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i,c,u,f,l,d;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$getState().conf.isFirstActiveAppShare,a=g.getShareAppHwnd(),i=g.getOldShareAppHwnd(),b.info("handleApplistResult,data = ",n),0!==a){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,g.setDataConfShareRealRect();case 8:if(g.setSharingapp(a),b.info("clear bfcp clock"),clearTimeout(window.clearSetBfcp),!(a>0)){e.next=14;break}return e.next=14,S.NativeInterface.setHightlightShareWnd(a,!0);case 14:return g.setTransparentwindow(a,0),e.next=17,S.NativeInterface.getTransparentWindow(a);case 17:if(c=e.sent,b.info("getTransparentWindow retWindows : "+(0,o.default)(c)),0===c.result&&(u=c.param.hwndList)&&"Array"===u.constructor.name&&u.length>0)for(f=0;f<u.length;++f)u[f].hwnd>0&&g.setTransparentwindow(u[f].hwnd,1);g.setAppShareScreenParam(9,{width:3,height:0}),r?(l=$getState().call.callId,coreCall.setDataBandwidth(l,0,g.getDataNegoBandwidth()),d=g.getDataCodeccVersion(),b.info("codeccVersion = "+d),g.setDataCodecVersion(d),g.setStart(),g.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!1))):b.info("already sharing, just set new hwnd"),i>0&&i!==a&&g.cancelSharingapp(i);case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onShareScreenOper=function(e){var t=$getState().conf.sharePersonName;b.info("NotifyLocalStartSharing"),coreConf.NotifyLocalStartSharing(0,t),coreConf.buriedShareScreenOper(e)},this.onRemoteScreenShare=function(e){coreConf.buriedRemoteScreenShare(e)},this.onBigWinStartSharing=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("onBigWinStartSharing: ",(0,o.default)(n)),clearTimeout(window.clearSetBfcp),b.info("clear bfcp clock"),r=$getState().conf.confHandle,a=g.getShareAppHwnd(),""===r){e.next=14;break}return e.next=8,(0,C.getWndRect)(n.param.hWnd);case 8:i=e.sent,b.info("get wnd rect, wnd: "+n.param.hWnd+" ",{left:i.param.left,top:i.param.top,right:i.param.right,bottom:i.param.bottom}),i.param.right>0&&i.param.bottom>0&&g.setDataShareRealRect(i.param.left,i.param.top,i.param.right,i.param.bottom),a>0?(S.NativeInterface.setHightlightShareWnd(a,!1),n.param&&n.param.hWnd>0&&(g.setOldShareAppHwnd(a),g.setShareAppHwnd(n.param.hWnd),g.changeShareMonitorType(n.param.shareType),g.getDisplayInfo(),g.getApplist())):n.param&&n.param.hWnd>0&&($dispatch(coreUi.changeFirstActiveShareApp(!0)),g.setShareAppHwnd(n.param.hWnd),g.setOldShareAppHwnd(0),g.changeShareMonitorType(n.param.shareType),g.startShare(40)),e.next=15;break;case 14:b.error("onBigWin is not in conference, you can't share");case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinStopSharing=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("onBigWinStopSharing: ",(0,o.default)(n)),r=$getState(),a=r.conf.confHandle,i=g.getShareAppHwnd(),""!==a?(g.stopShareScreen(),S.NativeInterface.setHightlightShareWnd(i,!1),g.setShareAppHwnd(0),g.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))):b.error("onBigWin is not in conference, you can't stop share");case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinDataSharingHwnd=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={hWnd:851978},a=null,$getState().conf.isDataConfSharing||!$getState().call.iSreceivingBFCP){e.next=7;break}b.info("getBfcpFrameHwnd"),a=S.NativeInterface.getBfcpFrameHwnd(),e.next=11;break;case 7:return b.info("getDataConfFrameWnd"),e.next=10,S.NativeInterface.getDataConfFrameWnd();case 10:a=e.sent;case 11:return b.info("onBigWinGetSharingHwnd 2data:",a),a&&a.param&&a.param.frameHwnd?r.hWnd=a.param.frameHwnd:b.error("onBigWinGetSharingHwnd value undefined!"),o=null,e.next=16,new _.default;case 16:o=e.sent,o.postRpsParamMessage(n,r,0);case 18:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinSetRecvShareParam=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("OnBigWinSetRecvShareParam =:",(0,o.default)(n)),!n.param.width||!n.param.height){e.next=7;break}return e.next=4,coreAccount.set({key:"share-wnd-width",value:n.param.width,isPublic:!0});case 4:return e.next=6,coreAccount.set({key:"share-wnd-height",value:n.param.height,isPublic:!0});case 6:S.NativeInterface.setBigconfDataInitRect(n.param.width,n.param.height);case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinSharingUsername=function(e){var t=$getState().conf.sharePersonName;return!$getState().conf.isDataConfSharing&&$getState().call.iSreceivingBFCP&&(t=""),e.user_name=t,e},this.resumeVideoWhenDataEnd=function(){appService.hideWindow()},this.onRequestOperateTokenFail=function(){g.setShareAppHwnd(0),g.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0));var e=$getState().conf.bfcpFrameHwnd;b.info("isReceivingBFCP = "+$getState().call.iSreceivingBFCP+", bfcpFrameHwnd = "+e),$getState().call.iSreceivingBFCP&&e>0&&(b.info("onRequestOperateTokenFail init bfcp frame because request aux token failed"),coreConf.NotifyStartSharing(0,""))},this.handleReceiveScreenKeyFrame=function(){if(g.setShareAppHwnd(0),g.setOldShareAppHwnd(0),!t.hasReceiveShare){var e=$getState().conf.sharePersonName;b.info("onAsOnScreenFrameRecv, recv first frame, notify to proxy other share is start",e),coreConf.NotifyStartSharing(0,e),t.hasReceiveShare=!0}},this.handleDataShareEnd=function(){t.hasReceiveShare=!1},this.hidePickSharingWindow=function(){},this.switchVideoFloating=function(){},N||(this.hasRegistedBigObserver=!1,N=this),this.proxy=null,this.hasReceiveShare=!1,N}return(0,p.default)(e,[{key:"registerDataEvent",value:function(){b.info("registerBigWinEvent, BigwinObserver subscribe topics");var e=new coreCommon.ObserverOpts(I.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e),coreCommon.Observer.subscribe("OnGetServerIp",this.onGetServerIp,e),coreCommon.Observer.subscribe("OnSshareScreenOper",this.onShareScreenOper,e),coreCommon.Observer.subscribe("OnRemoteScreenShare",this.onRemoteScreenShare,e),this.hasRegistedBigObserver?b.info("big win observer has registed, ignore"):(coreCommon.BigwinObserver.subscribe("OnStartSharing",this.onBigWinStartSharing),coreCommon.BigwinObserver.subscribe("OnStopSharing",this.onBigWinStopSharing),coreCommon.BigwinObserver.subscribe("OnGetSharingUsername",this.onBigWinSharingUsername),coreCommon.BigwinObserver.subscribe("onBigWinDataSharingHwnd",this.onBigWinDataSharingHwnd),coreCommon.BigwinObserver.subscribe("OnSetRecvShareParam",this.onBigWinSetRecvShareParam),this.hasRegistedBigObserver=!0)}},{key:"closeBfcpFrameForSharingSession",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.SvcAtdManager.closeBfcpFrame();case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeAppShare",value:function(e){var t=$getState().conf.sharePersonName;t===$getState().myInfo.name||e.isself?(coreConf.NotifyLocalStopSharing(0,t),coreConf.buriedShareScreenOper(1),b.info("stop own sharing",t),g.getShareAppHwnd()>0&&(g.setShareAppHwnd(0),g.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))),coreCall.setDataBandwidth($getState().call.callId,2,g.getDataNegoBandwidth()),b.info("xxxxxxxxxxThis userStopsharing",t)):(coreConf.NotifyStopSharing(0,t),b.info("xxxxxxxxxxThat userStopsharing",t))}},{key:"clearBfcpTimer",value:function(){clearTimeout(window.clearSetBfcp),b.info("clear bfcp clock")}},{key:"initDeviceStates",value:function(){}},{key:"handleBfcpForChangeMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changeFirstActiveShareApp(!0)),r=$getState().conf.isFirstActiveAppShare,b.info("isFirstActiveAppShare = ",r),b.info("just recv data signal, create recv window, not notify to proxy"),512===t&&(b.info("compid is 512, recv WBPage"),coreConf.NotifyStartSharing(0,n));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,t){512===e&&(coreConf.NotifyStopSharing(0,t),b.info("compid is 512, xxxxxxxxxxThat userStopsharing",t))}},{key:"onJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0))),t=$getState(),n=t.conf.confHandle,r=t.call.callId,b.error("OnJoinDataConfFail, leave conf, confHandle=",n),e.next=6,(0,m.actionLeaveConf)();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"onGetServerIp",value:function(e){coreConf.setServerIp(e)}},{key:"handleWindowForStopShareScreen",value:function(){}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){g.setShareAppHwnd(0),g.setOldShareAppHwnd(0);var e=$getState().conf.sharePersonName;b.info("recv first frame, notify to proxy other share is start",e),coreConf.NotifyStartSharing(0,e)}}]),e}();t.default=E},1824:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(3),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(216),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),v=n(200),g=n(215),C=n(261),S=n(592),w=coreLogger.getLogger("dataconf")("logic"),_=function(){function e(t){var n=this;(0,l.default)(this,e),this.registerDataEvent=function(){n.platformImpl.registerDataEvent();var e=new coreCommon.ObserverOpts(C.DFConfig.moduleName);e.target=n,coreCommon.Observer.subscribe("OnShareingStart",n.onDataShareStart,e),coreCommon.Observer.subscribe("OnShareingEnd",n.onDataShareEnd,e),coreCommon.Observer.subscribe("dataUserEnter",n.onDataUserEnter,e),coreCommon.Observer.subscribe("dataUserleave",n.onDataUserLeave,e),coreCommon.Observer.subscribe("OnReleaseHandle",n.onDataConfReleaseHandle,e),coreCommon.Observer.subscribe("OnJoinDataConf",n.onJoinDataConf,e),coreCommon.Observer.subscribe("OnConfInfoNotify",n.onConfInfoNotify,e),coreCommon.Observer.subscribe("OnShareOwnerChange",n.onShareOwnerChange,e),coreCommon.Observer.subscribe("OnSharingScreenSizeChange",n.onShareScreenSizeChange,e),coreCommon.Observer.subscribe("OnSharingSessionStart",n.onSharingSessionStart,e),coreCommon.Observer.subscribe("OnRemoteControlPrivilege",n.onGetRemoteControlPrivilege,e),coreCommon.Observer.subscribe("OnDelRemoteControlPrivilege",n.onDeleteRemoteControlPrivilege,e),coreCommon.Observer.subscribe("OnRequestRemoteControlPrivilege",n.onRequestRemoteControlPrivilege,e),coreCommon.Observer.subscribe("OnBeRejectedRemoteControlPrivilege",n.OnBeRejectedRemoteControlPrivilege,e),coreCommon.Observer.subscribe("handleSelfEnterResult",n.handleSelfEnterResult,e),coreCommon.Observer.subscribe("OnScreenSharingStateChange",n.handleScreenSharingStateChange,e),coreCommon.Observer.subscribe("onRequestOperateTokenFail",n.onRequestOperateTokenFail,e),coreCommon.Observer.subscribe("onStopShareFinished",n.onStopShareFinished,e),coreCommon.Observer.subscribe("OnJoinDataConfFail",n.onJoinDataConfFail,e),coreCommon.Observer.subscribe("OnDealInviteUserWBSharing",n.handleInviteUserWBSharing,e),coreCommon.Observer.subscribe("OnStartShareFailed",n.onStartShareFailed,e)},this.onDataShareStart=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("  logic dataconfnotify other share start",t),n.platformImpl.closeBfcpFrameForSharingSession(),n.changeDataControlShow(!1),$dispatch(coreUi.showConfData(!0));case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onDataShareEnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.platformImpl.handleDataShareEnd(),!t.isself){e.next=7;break}return w.info("data.isself is true, stopShareScreen"),e.next=5,n.stopShareScreen();case 5:e.next=8;break;case 7:window.isByShareState=!1;case 8:n.platformImpl.closeAppShare(t),n.doExitFullScreen(),w.info(" logic dataconfnotify onDataShareEnd start bfcp state: "+$getState().call.iSreceivingBFCP),n.changeShowModeAndStatus(),n.platformImpl.handleBfcpWindow(t),r={lastheight:0,lastwidth:0},$dispatch(coreUi.changeShareScreenWH(r));case 15:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onDataUserLeave=function(e){w.info(" logic dataconfnotify onDataUserLeave start"),!0===e.param.isSelf&&(n.stopMyShare(),m.handleShareEnd(e.param.user_alt_id))},this.onDataConfReleaseHandle=function(){w.info(" logic dataconfnotify OnDataConfReleaseHandle start"),n.hidePickSharingWindow(),n.doExitFullScreen(),n.stopMyShare(),m.handleShareEnd(m.getMyUserId());var e={lastheight:0,lastwidth:0};$dispatch(coreUi.changeShareScreenWH(e))},this.onJoinDataConf=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,params:["onJoinDataConf"]}),w.info(" logic dataconfnotify onJoinDataConf start"),$dispatch(coreUi.enterDataConf(!0));case 3:case"end":return e.stop()}},e,n)})),this.changeDataControlShow=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.platformImpl.changeDataControlShowImpl(t,2);case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onConfInfoNotify=function(){w.info(" logic dataconfnotify OnConfInfoNotifytaConf start"),coreConf.isConfChairMan()&&m.getIsAutoStartScreenShare()&&coreUi.showConfTips("",constant.CONF_MSG_TYPE.TYPE_TOP_SHOW,language.ENTER_CONF_JOIN_IN_DATACONF),$dispatch(coreUi.hideDataShareButton(!0))},this.onShareOwnerChange=function(){var e=(0,u.default)(s.default.mark(function e(t){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("onShareOwnerChange,userNum = "+handlePhoneNumber(t.userNum)),n.platformImpl.closeBfcpFrameForOwnerChanged(),r=n.proxy.getNameFromMemberListByNum(t.userNum),isNullOrEmpty(r)&&(r=n.proxy.getNameFromMsMemberListByNum(t.userNum)),$dispatch(coreUi.changeSharePersonName(r)),$dispatch(coreUi.changeSharePersonNum(t.userNum)),o.default.resolve().then((0,u.default)(s.default.mark(function e(){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreContact.queryUserInfoByKeyWord({keyWord:t.userNum});case 2:a=e.sent,coreCommon.dispatchModuleEvent("pluginDataSharingPersonChangedNotify",{sharerName:r,shareAccount:a.show_account});case 4:case"end":return e.stop()}},e,n)}))),m.updateDataShareOwner(t.userNum),$dispatch(coreUi.changeIsSvcSelectMode(!1)),window.CLIENTCONFIG.ISWIN&&$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})),!1===t.isSelf?(window.Toast(language.DATA_CONFERENCE_READY_TO_SHARE,2,!1,"pcToast_center"),n.changeDataControlShow(!1),n.doSmallVideoWithData(),$getState().conf.isSvcConf&&(w.info("onShareOwnerChange,in svc mode, data.isSelf = "+t.isSelf),n.platformImpl.receiveSvcForOwnerChanged(r))):$getState().conf.isSvcConf&&(w.info("onShareOwnerChange,in svc mode,share is self"),n.platformImpl.stopSvcForOwnerChanged());case 11:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onShareScreenSizeChange=function(e){n.platformImpl.showWinForSizeChange(),n.updateDataPicSize(e),n.changeDataControlShow(!1),n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL),n.doSmallVideoWithData(),$dispatch(coreUi.hideDataShareButton(!1)),n.platformImpl.fullScreenReceiveShare()},this.onSharingSessionStart=function(e){w.info(" logic dataconfnotify OnSharing[Session]Start start",desensitive(e)),$dispatch(coreUi.hideDataShareButton(!0)),"full"===$getState().call.screenState&&coreCall.exitFullScreen(),delegate.winMinimize(),n.doSmallVideoWithDataCapture()},this.onGetRemoteControlPrivilege=function(e){var t=e.isself;if(t?(w.info(" OnGetRemoteControlPrivilege start is self"),n.platformImpl.addEventListenerForCtrlPrivilege(),m.setNativeDataControlStatus(1)):w.info(" OnGetRemoteControlPrivilege start not self"),e&&e.usernum){w.info(" OnGetRemoteControlPrivilege start notify");var r=n.getContactFromDataConfMemberList(e.usernum);if(r.type=t?"acceptPrivilege":"notifyGetPrivilege","mac"===window.CLIENTCONFIG.PLATFORM&&"acceptPrivilege"===r.type){var a=language.SHARING_ACCEPT_REMOTECONTROL,o=" "!==r.name?r.name:r.bind_no;a=a.replace("{0}",o),window.Toast(a,5)}else $dispatch(coreUi.showDataConfCmdNotify(r,!0)),setTimeout(function(){$dispatch(coreUi.showDataConfCmdNotify({},!1))},5e3)}else w.info(" OnGetRemoteControlPrivilege data is invalid")},this.onDeleteRemoteControlPrivilege=function(e){var t=e.isself;if(t?(w.info(" OnDeleteRemoteControlPrivilege start is self"),n.platformImpl.deleteEventListenerForCtrlPrivilege(),m.setNativeDataControlStatus(0)):w.info(" OnDeleteRemoteControlPrivilege start not self"),e&&e.usernum){var r=n.getContactFromDataConfMemberList(e.usernum);if(r.type=t?"rejectPrivilege":"notifyDelPrivilege","mac"===window.CLIENTCONFIG.PLATFORM&&"rejectPrivilege"===r.type){var a=language.SHARING_REJECT_REMOTECONTROL;window.Toast(a,5)}else $dispatch(coreUi.showDataConfCmdNotify(r,!0)),setTimeout(function(){$dispatch(coreUi.showDataConfCmdNotify({},!1))},5e3)}},this.onRequestRemoteControlPrivilege=function(e){if(w.info(" logic OnRequestRemoteControlPrivilege start",handlePhoneNumber(e.usernum)),e&&e.usernum){var t=n.getContactFromDataConfMemberList(e.usernum);t.type="requestPrivilege",$dispatch(coreUi.showDataConfCmdNotify(t,!0))}},this.OnBeRejectedRemoteControlPrivilege=function(e){if(w.info(" logic OnBeRejectedRemoteControlPrivilege start",handlePhoneNumber(e.usernum)),e&&e.usernum){var t=n.getContactFromDataConfMemberList(e.usernum);if(t.type="beRejectedPrivilege","mac"===window.CLIENTCONFIG.PLATFORM){var r=language.SHARING_BE_REJECT_REMOTECONTROL;window.Toast(r,5)}else $dispatch(coreUi.showDataConfCmdNotify(t,!0)),setTimeout(function(){$dispatch(coreUi.showDataConfCmdNotify({},!1))},5e3)}},this.handleSelfEnterResult=function(){coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,params:["handleSelfEnterResult"]}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),w.info(" logic dataconfnotify handleSelfEnterResult start"),!1===m.getIsAutoStartScreenShare()?m.isConfDataShareLoadSuccess()?(w.info(" handleSelfEnterResult not auto startshare, has load comp success"),$dispatch(coreUi.hideDataShareButton(!1))):w.info(" handleSelfEnterResult not auto startshare, hasnot load comp "):(m.setIsAutoStartScreenShare(!1),w.info("handleSelfEnterResult auto share start"),$dispatch(coreUi.hideDataShareButton(!0)),n.retryCheckCount=0,m.getSharingType()===constant.ConfSharingType.Document?n.checkStartDocumentSharing():n.checkStartShareScreen())},this.handleScreenSharingStateChange=function(e){w.info("debug info handleScreenSharingStateChange param: ",e,$getState().call.iSreceivingBFCP),n.dataSharingFlagTimerID>0&&(w.info("debug info handleScreenSharingStateChange clear timer"),clearTimeout(n.dataSharingFlagTimerID),n.dataSharingFlagTimerID=0),1===e?n.changeDataControlShow(!1):2===e&&n.changeDataControlShow(!window.CLIENTCONFIG.ISBIGWIN),1===e||2===e?($dispatch(coreUi.setDataSharingFlag(!0)),$dispatch(coreUi.changeReceiveBfcp(!0)),g.SvcAtdManager.setNativeSelectState()):n.dataSharingFlagTimerID=setTimeout(function(){w.info("debug info handleScreenSharingStateChange delay set false : "),$dispatch(coreUi.setDataSharingFlag(!1));var e=$getState().conf,t=e.svcViewMode,n=e.maxSizeForPage;t===constant.SVC_VIEW_MODE.DIVIDE_MODE&&window.CLIENTCONFIG.ISWIN&&n!==g.SvcAtdManager.getMaxSizeForPage(t)&&($dispatch(coreUi.changeMaxSizeForPage(g.SvcAtdManager.getMaxSizeForPage(t))),g.SvcAtdManager.RedrawVideoMain()),g.SvcAtdManager.setNativeSelectState()},500)},this.onJoinDataConfFail=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("OnJoinDataConfFail start"),$dispatch(coreUi.hideDataShareButton(!1)),n.platformImpl.onJoinDataConfFail(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleInviteUserWBSharing=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("handleInviteUserWBSharing start"),window.isDataSharing=!0,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),n.startAppSharingWindow(1);case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onStartShareFailed=function(){w.info("start share failed."),n.platformImpl.onStartShareFailed()},this.checkStartDocumentSharing=function(){m.isConfDocShareLoadSuccess()?(w.info("checkStartDocumentSharing start doc share directly"),n.openDocShareFile(m.getDocShareFilePath())):m.docShareCompLoadSucCallback(function(){n.openDocShareFile(m.getDocShareFilePath())})},this.startShareScreen=function(e){if(w.info("startShareScreen start"),coreConf.isNeedUpdate2DataConf())w.info("startShareScreen need update2DataConf"),m.setIsAutoStartScreenShare(!0),(0,v.upgradeAudioConf2Data)();else{var t=$getState().call.callId;coreCall.setDataBandwidth(t,0,m.getDataNegoBandwidth());var r=m.dataConfStatus();if(w.info("dataconfstatus is ",r),r===S.DCONF_STATUS.IN_CONF){var a=$getState().call;!0===m.isRecevingSharing()||a.iSreceivingBFCP?(w.info("startShareScreen someone sharing"),n.platformImpl.showStartConfirmWithCallback(function(){coreCall.exitFullScreen(),n.resumeVideoWhenDataEnd(),n.startShareScreenOrApp(e)})):(w.info("startShareScreen contend startshare "),n.startShareScreenOrApp(e))}else r===S.DCONF_STATUS.JOINING?w.info("startShareScreen fail, joining dataconf "):r===S.DCONF_STATUS.LEAVING||r===S.DCONF_STATUS.LEFT?w.info("startShareScreen fail, status is leaving"):r===S.DCONF_STATUS.JOIN_FAIL?(w.info("startShareScreen no join data conf "),m.retryJoinDataConf()):w.info("startShareScreen fail, status is null")}},this.openDocShareFile=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("openDocShareFile called"),m.openDocShareFile(t);case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.startShareScreenOrApp=function(e){w.info("start share screen or app , data = ",e),window.CLIENTCONFIG.ISWIN?e&&e.param&&n.startAppSharingWindow(e.param.shareType,e.param.shareHwnd,e.param.shareAudio,e.param.shareStrategy):C.DFConfig.isAppShareEnabled?n.platformImpl.getApplist():n.startAppSharingWindow(0)},this.startAppSharingWindow=function(){var e=(0,u.default)(s.default.mark(function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.platformImpl.startAppSharingWindow(t,r,a,o),n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);case 2:case"end":return e.stop()}},e,n)}));return function(t,n){return e.apply(this,arguments)}}(),this.handleJoinDataConfFail=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.proxy.handleJoinDataConfFail();case 1:case"end":return e.stop()}},e,n)})),this.toggleShowDataControlMenu=function(e,t){$dispatch(coreUi.showDataControlMenu(t))},this.rejectRemoteControl=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.showDataConfCmdNotify({},!1)),e.next=3,m.rejectRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.setRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.showDataConfCmdNotify({},!1)),e.next=3,m.changeRemoteControl2Other(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.setIsUsePrimarySize=function(){m.changeIsUsePrimarySize(),w.info("setIsUsePrimarySize, isUsePrimarySize="+m.getIsUsePrimarySize());var e={lastheight:0,lastwidth:0};$dispatch(coreUi.changeShareScreenWH(e))},this.hidePickSharingWindow=function(){n.platformImpl.hidePickSharingWindow()},this.getDesktopShareSize=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.proxy.getDesktopShareSize();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,n)})),this.doSmallVideoWithData=(0,u.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return appService.hideWindow(),e.abrupt("return");case 3:if(!$getState().conf.isSvcConf){e.next=6;break}return w.info("is svcconf,doSmallVideoWithData return"),e.abrupt("return");case 6:t=$getState().call,"VIDEO_CONNECTED"===t.callStatus&&(w.info("<video>in data full,doSmallVideoWithData"),"extra"===t.screenState?delegate.resumeShow(!0):"min"===t.screenState&&coreCall.changeScreenState("middle"),t.isRemoteBig&&(n.isVideoRemtoBig=!0,$dispatch(coreUi.changeBigSmallWin())),coreCall.closeLocalCanvasSocket(),r={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(r)),coreCall.setVideoWH(!0,r));case 8:case"end":return e.stop()}},e,n)})),this.onDataUserEnter=function(){},this.onRequestOperateTokenFail=function(){w.info("start share failed."),n.platformImpl.onRequestOperateTokenFail()},this.onStopShareFinished=function(){m.setShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))},this.proxy=null,this.platformImpl=t,this.isVideoRemtoBig=!1,this.dataPicSize={},this.retryCheckCount=0,this.dataSharingFlagTimerID=0}return(0,p.default)(e,[{key:"stopShareScreen",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.hideDataShareButton(!1)),w.info("isDataSharing false 2"),window.isDataSharing=!1,e.next=5,m.stopShareScreen();case 5:coreCall.setDataBandwidth($getState().call.callId,2,m.getDataNegoBandwidth()),this.changeDataControlShow(!1),this.platformImpl.handleWindowForStopShareScreen();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"doExitFullScreen",value:function(){window.CLIENTCONFIG.ISBIGWIN||coreCall.exitFullScreen()}},{key:"changeShowModeAndStatus",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),this.resumeVideoWhenDataEnd(),$dispatch(coreUi.showConfData(!1)),$dispatch(coreUi.changeSharePersonNum(""));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeDataConfShowMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("changeDataConfShowMode start, showMode = ",t),r=coreCommon.TaskQueue.getInstance("showModeTaskQueue"),a=coreCommon.TaskOptions.defaultOptions(),a.proxy=this.platformImpl,r.addTask(this.platformImpl.doChangeDataConfShowMode,a,null,t,n);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"resumeVideoWhenDataEnd",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.platformImpl.resumeVideoWhenDataEnd();case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"stopMyShare",value:function(){w.info(" LeaveDataConf stop my share"),$dispatch(coreUi.showConfData(!1)),this.changeDataControlShow(!1),w.info("test16666"),this.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);var e=$getState().common.modalContent;isNullOrEmpty(e)||"progressbar"===e.key||coreUi.hideModal(),window.CLIENTCONFIG.ISBIGWIN||appService.showMainWindow(!0),m.stopStgTunnel(),w.info("isDataSharing false 3"),window.isDataSharing=!1,$dispatch(coreUi.showDataConfCmdNotify({},!1))}},{key:"updateDataPicSize",value:function(e){this.dataPicSize={width:e.param.width,height:e.param.height},this.platformImpl.setDataPicSize(this.dataPicSize)}},{key:"doSmallVideoWithDataCapture",value:function(){if($getState().conf.isSvcConf)return void w.info("is svcconf or is mobile,doSmallVideoWithDataCapture return");var e=$getState().call;if("VIDEO_CONNECTED"===e.callStatus&&"min"!==e.screenState&&"extra"!==e.screenState){w.info("<video>in data capture,doSmallVideoWithData");var t={height:288,width:512};e.isRemoteBig?coreCall.setVideoWH(!0,t):coreCall.setVideoWH(!1,t)}}},{key:"getContactFromDataConfMemberList",value:function(e){for(var t=m.getDataConfMemberList(),n=0;n<t.length;n++)if(e===t[n].user_num)return{bind_no:t[n].user_num,name:t[n].user_name};return""}},{key:"checkStartShareScreen",value:function(){var e=this;if(m.isConfDataShareLoadSuccess())w.info(" checkStartShareScreen success"),m.setIsAutoStartScreenShare(!1),this.retryCheckCount=0,window.CLIENTCONFIG.ISWIN?(w.info("checkStartShareScreen showNativeShareSelectWnd()"),this.platformImpl.showNativeShareSelectWnd()):this.startShareScreen();else{if(++this.retryCheckCount>8)return void w.info(" checkStartShareScreen fail, no load datasharecomp,max checkcount 8 times");w.info(" checkStartShareScreen fail, no load datasharecomp,retry after 1000ms"),setTimeout(function(){e.checkStartShareScreen()},1e3)}}}]),e}();t.default=_},1825:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(69),i=a(o),s=n(1),c=a(s),u=n(2),f=a(u),l=n(131),d=a(l),p=n(4),h=a(p),m=n(5),v=a(m),g=n(132),C=a(g),S=n(231),w=a(S),_=n(133),I=a(_),b=n(300),N=n(958),E=a(N),y=n(216),T=r(y),O=n(242),A=n(261),x=n(215),k=n(259),M=r(k),R=coreLogger.getLogger("dataconf")("logic"),L=null,D=function(e){function t(){var e,n=this;(0,h.default)(this,t);var r=(0,C.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return r.handleApplistResult=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.dealMaxhubAppShare();case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.dealMaxhubAppShare=(0,f.default)(c.default.mark(function e(){var t,r,a,o,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf.isFirstActiveAppShare,r=T.getOldShareAppHwnd(),a=T.getShareAppHwnd(),R.info("dealMaxhubAppShare, isFirstActiveAppShare=",t+", shareAppHwnd=",a+", oldShareAppHwnd=",r),T.setAppShareScreenParam(9,{width:3,height:0}),!t){e.next=30;break}return R.info("dealMaxhubAppShare start first sharing"),$dispatch(coreUi.changeFirstActiveShareApp(!1)),T.setSharingapp(a),e.next=11,O.NativeInterface.getTransparentWindow(a);case 11:if(o=e.sent,R.info("getTransparentWindow : "+(0,i.default)(o)),0!==o.result){e.next=26;break}if(!((s=o.param.hwndList)&&"Array"===s.constructor.name&&s.length>0)){e.next=26;break}u=0;case 17:if(!(u<s.length)){e.next=26;break}if(!(s[u].hwnd>0)){e.next=23;break}return R.info("setTransparentwindow i = "+u+" start"),e.next=22,T.setTransparentwindow(s[u].hwnd,1);case 22:R.info("setTransparentwindow i = "+u+" end");case 23:++u,e.next=17;break;case 26:T.setDataCodecVersion(5),T.setStart(),e.next=33;break;case 30:T.setSharingapp(a),R.info("maxhub cancel old sharing, oldShareAppHwnd=",r),r>0&&r!==a&&T.cancelSharingapp(r);case 33:case"end":return e.stop()}},e,n)})),r.handleBfcpForChangeMode=function(){},r.onStartSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("onStartSharing: ",(0,i.default)(t)),T.isInDataConf()||coreConf.isConfChairMan()){e.next=6;break}return R.info("onStartSharing, maxhub not in data conference and not chairman, can not shart sharing"),a=1,(0,b.NotifyShareResult)(0,a,t.param.hWnd),e.abrupt("return");case 6:if(null===window.maxhubShareAppParam){e.next=11;break}return R.info("onStartSharing, maxhub last sharing not finish, can not shart new sharing"),o=2,(0,b.NotifyShareResult)(0,o,t.param.hWnd),e.abrupt("return");case 11:window.maxhubShareAppParam=t.param,r.startShareApp();case 13:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.onStopSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.info("onStopSharing: ",(0,i.default)(t)),r=$getState(),a=r.conf.confHandle,o=T.getShareAppHwnd(),""!==a?(T.stopShareScreen(),O.NativeInterface.setHightlightShareWnd(o,!1),T.setShareAppHwnd(0),T.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0)),R.info("isDataSharing false 5"),window.isDataSharing=!1):R.error("onStopSharing is not in conference");case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.startShareApp=(0,f.default)(c.default.mark(function e(){var t,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,a=T.isConfDataShareSelfEntered(),o=T.isConfDataShareLoadSuccess(),R.info("startShareApp start, isSelfEntered=",a+"，isShareLoadSuccess="+o),!a||!o){e.next=10;break}return R.info("startShareApp, start share"),e.next=8,r.startMaxhubAppSharing(window.maxhubShareAppParam);case 8:e.next=12;break;case 10:t=3,T.isInDataConf()?R.info("startShareApp, joining dataconf now, can not start sharing"):(R.info("startShareApp, not data conf, start retry join data conf"),T.retryJoinDataConf());case 12:window.isHubEnv&&((0,b.NotifyShareResult)(0,t,window.maxhubShareAppParam.hWnd),window.maxhubShareAppParam=null);case 13:case"end":return e.stop()}},e,n)})),r.startMaxhubAppSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("startMaxhubAppSharing, param:",t),!((a=T.getShareAppHwnd())===t.hWnd||t.hWnd<=0)){e.next=5;break}return R.info("startMaxhubAppSharing, param is invalid"),e.abrupt("return");case 5:if(!(a>0)){e.next=14;break}R.info("startMaxhubAppSharing, change sharing wnd, old wnd=",a+"new wnd=",t.hWnd),T.setOldShareAppHwnd(a),T.setShareAppHwnd(t.hWnd),T.changeShareMonitorType(t.shareType),T.getDisplayInfo(),T.getApplist(),e.next=27;break;case 14:return R.info("startMaxhubAppSharing, start new sharing, wnd=",t.hWnd),T.setOldShareAppHwnd(0),T.setShareAppHwnd(t.hWnd),coreCall.setDataBandwidth($getState().call.callId,0,T.getDataNegoBandwidth()),T.setDataShareVersion(1),$dispatch(coreUi.changeFirstActiveShareApp(!0)),T.changeShareMonitorType(t.shareType),R.info("startMaxhubAppSharing, isDataSharing true 3"),window.isDataSharing=!0,r.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),e.next=26,r.proxy.changeDataControlShowImpl(!0);case 26:T.startShare(40);case 27:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.switchVideoFloating=function(){$getState().conf.isSvcConf?x.SvcAtdManager.switchVideoToMin():M.switchVideoToMin()},r.resumeVideoWhenDataEnd=function(){var e=$getState().conf.isSvcConf;window.isDataSharing||(e?x.SvcAtdManager.switchVideoToMain():M.switchVideoToMain())},L||(r.hasRegistedBigObserver=!1,L=r),e=L,(0,C.default)(r,e)}return(0,I.default)(t,e),(0,v.default)(t,[{key:"registerDataEvent",value:function(){(0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"registerDataEvent",this).call(this);var e=new coreCommon.ObserverOpts(A.DFConfig.moduleName);e.target=this,this.hasRegistedBigObserver||(coreCommon.BigwinObserver.subscribe("OnStartSharing",this.onStartSharing,e),coreCommon.BigwinObserver.subscribe("OnStopSharing",this.onStopSharing,e),this.hasRegistedBigObserver=!0)}},{key:"closeAppShare",value:function(e){if((0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"closeAppShare",this).call(this,e),e.isself){T.getShareAppHwnd()>0&&(T.setShareAppHwnd(0),T.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))),(0,b.NotifyLocalStopSharing)(0,"")}}},{key:"clearBfcpTimer",value:function(){(0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"clearBfcpTimer",this).call(this),clearTimeout(window.clearSetBfcp),R.info("clear bfcp clock")}},{key:"changeShowMode",value:function(){function e(){return n.apply(this,arguments)}var n=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"changeShowMode",this).call(this);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,n){(0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"handleCloseNativeDataWnd",this).call(this,e,n)}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){}}]),t}(E.default);t.default=D},1826:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(1),o=r(a),i=n(2),s=r(i),c=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0===t.code&&"total"===t.event&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.getInitHistoryConfList();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();coreCommon.registeModuleListener("login",c)},184:function(e,t,n){e.exports={default:n(185),__esModule:!0}},185:function(e,t,n){n(23),n(22),e.exports=n(186)},186:function(e,t,n){var r=n(16),a=n(6)("iterator"),o=n(17);e.exports=n(8).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||o.hasOwnProperty(r(t))}},188:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),f.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||i.nextTick(o,this)}function o(e){e.end()}var i=n(233),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var c=n(213);c.inherits=n(140);var u=n(295),f=n(254);c.inherits(r,u);for(var l=s(f.prototype),d=0;d<l.length;d++){var p=l[d];r.prototype[p]||(r.prototype[p]=f.prototype[p])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},191:function(e,t,n){"use strict";var r=n(25).f,a=n(204),o=n(29),i=n(11),s=n(28),c=n(24),u=n(205),f=n(206),l=n(37),d=n(30),p=n(177).fastKey,h=n(166),m=d?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var f=e(function(e,r){s(e,f,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[u],e)});return o(f.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var a=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=a),a&&(a.p=o),n._f==r&&(n._f=a),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){h(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),d&&r(f.prototype,"size",{get:function(){return h(this,t)[m]}}),f},def:function(e,t,n){var r,a,o=v(e,t);return o?o.v=n:(e._l=o={i:a=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==a&&(e._i[a]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),l(t)}}},192:function(e,t,n){"use strict";var r=n(7),a=n(10),o=n(177),i=n(148),s=n(35),c=n(29),u=n(24),f=n(28),l=n(15),d=n(36),p=n(25).f,h=n(207)(0),m=n(30);e.exports=function(e,t,n,v,g,C){var S=r[e],w=S,_=g?"set":"add",I=w&&w.prototype,b={};return m&&"function"==typeof w&&(C||I.forEach&&!i(function(){(new w).entries().next()}))?(w=t(function(t,n){f(t,w,e,"_c"),t._c=new S,void 0!=n&&u(n,g,t[_],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in I&&(!C||"clear"!=e)&&s(w.prototype,e,function(n,r){if(f(this,w,e),!t&&C&&!l(n))return"get"==e&&void 0;var a=this._c[e](0===n?0:n,r);return t?this:a})}),C||p(w.prototype,"size",{get:function(){return this._c.size}})):(w=v.getConstructor(t,e,g,_),c(w.prototype,n),o.NEED=!0),d(w,e),b[e]=w,a(a.G+a.W+a.F,b),C||v.setStrong(w,e,g),w}},193:function(e,t,n){var r=n(16),a=n(212);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},194:function(e,t,n){"use strict";var r=n(10);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},195:function(e,t,n){"use strict";var r=n(10),a=n(12),o=n(11),i=n(24);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return a(this),t=void 0!==c,t&&a(c),void 0==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),i(e,!1,function(e){n.push(s(e,r++))})):i(e,!1,n.push,n),new this(n))}})}},200:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangeVmrInfoResult=t.hostMeetToJumpWebControl=void 0,t.recordIsImGroupCreateConf=t.formatConfId=t.addToAllConfInfo=t.initConfctrl=t.createCancelConfEvent=t.handleCancelConf=t.cancelConf=t.createConfByTeamList=t.cloudRecordRequestFuc=t.actionChangeConfNickName=t.requestChairmanFuc=t.releaseChairmanFuc=t.compressRemoveAttendee=t.compressreleasePreservate=t.unlockConfFuc=t.lockConfFuc=t.enterConfInConfList=t.oneKeyEnterConf=t.showConfInfo=t.RecordIsIntoInterval=t.recordFlagIsFirstTimeRun=t.recordConferenceOldId=t.recordConferencePasswordDetail=t.changeFlagClickJoinConfBtn=t.recoredOldPwd=t.changeStatusOfConference=t.createMaxHubMeeting=t.handleMobileBfcpStatus=t.AsErrorDeal=t.handleShowErrorMsgBox=t.setRecordStatusForNative=t.handleRecordVideoStatusChairmanIndResult=t.handleConfStateDirectBroadCastIndresult=t.handleVideoRecordResult=t.handleSetRecordVideoResult=t.actionCloudRecordRequest=t.clearRecordInfoHandle=t.getRecordStatus=t.isHasRecordPermission=t.setRecordScheduserName=t.actionActiveDirectionForMobile=t.actionActiveDirection=t.dealChangeDirectionResult=t.dealAudientResult=t.grabBfcpConfirm=t.initMobileFirstAcceptShare=t.resetFirstAcceptShareFlag=t.initMobileFirstInfoConf=t.resetFirstInfoConferenceFlag=t.dealInviteAttendeeResult=t.handlePlatformMessageBox=t.handleVideoWatchResMessageBox=t.handleVideoWatchRes=t.handleSvcConfWatchRet=t.clearPhoneContacts=t.showOrDisabledBtn=t.showJoinMeetingBtn=t.returnToConfWelPage=t.toggleShouldAutoEnterTempConf=t.toggleClearEnterTempConfInfo=t.toggleopenCamerState=t.toggleChangeCamerState=t.toggleChangeMicState=t.toggleSetCreateUseFixedConfIDState=t.toggleSetIsBookSendSMS=t.toggleSetIsBookSendEmail=t.toggleSetUseFixedConfIDState=t.toggleChangeConfAcsPas=t.toggleChangeConfAcsId=t.toggleChangeConfAcsNum=t.changeConfPage=t.gettempuserinfo=t.handleJoinTempConfNoNameWithConfId=t.enterTempConf=t.enterConfById=t.enterConfByIdOnly=t.enterConfByIdOnlyWithConfPas=t.oneKeyEnterPairConf=t.enterConfInConfInfo=t.changeBookConfSubject=t.changeHistoryAttendeeInfo=t.changeHistoryConfInfo=t.changeConfAttendeeInfo=t.changeCurrentConfInfo=t.oneJoinVMR=t.getAsInfoToDbAtomic=t.getVmrInfoToDbAtomic=t.getVRMList=t.saveTempMediaxInfo=t.handleConfInfo=t.handleConfMTnumber=t.handleConfInfostate=t.searchContactByInfo=t.getInitHistoryConfList=t.delConfRecord=t.getConfTimedec=t.handleConfList=t.saveMettingTypeValue=t.judgeCreateNewConf=t.initCreateMettingContent=void 0,t.createConfFromHistory=t.createTempTypeMeeting=t.createAMeetingFromHis=t.createAMeeting=t.deleteClickParticipants=t.filterDuplicateData=t.createTempMeetingOfAddMember=t.handleIsShowJoinButton=t.handleIsConfPwdInputShow=t.handleNotShowChairPas=t.handleNotShowGeneralPas=t.handleVMRConfResult=t.subScribeConfListAndInfoResAtomic=t.subScribeConfListAndInfoRes=t.getConfList=t.changeconfListInfo=t.actionExportConfmember=t.transferChairman=t.getConfInfo=t.p2pTransToConf=t.upgradeAudioConf2Data=t.upgrade2DataConfOrStartShare=t.handleShowEndConf=t.toggleConfOtherNumber=t.searchMemberList=t.unregisterConfEvent=t.handleSpeakerReport=t.endCallAndLogout=t.setUportalTokenRefreshTimer=t.UportalTokenErrAndLogout=t.UportalTokenErr=t.handleGetDataPostponeConf=t.handleSmcEnterDataConf=t.handleUportalTokenErr=t.handleNonChairCtrlcaps=t.checkUsersMobile=t.setMsg=t.handlepPrticipantsList=t.AutocallMobile=t.registerConfEventAtomic=t.handleBroadcaseResult=t.updateconfMsglList=t.updateconfRecallList=t.updateMemberStateInfo=t.toggleShowConfInfoCard=t.handleShowAudioSetting=t.handleShowMemberList=t.cancleConfMemberlistMessage=t.toggleShowMemberList=t.diableSpeakerIcon=t.confEnded=t.actionWatchAttendee=t.actionBroadcastAttendee=t.actionLeaveConf=t.handleClosePairConfPage=t.setSmcFirstRequest=t.doClearSipForSipLoginOnly=t.acceptConf=t.rejectConf=t.confIncoming=t.actionRemoveAttendee=t.actionCallAttendee=t.actionHangupAttendee=t.actionAddAttendee=t.actionCallOtherNum=t.confReqChangeNickNameResult=t.popupRequestChairmanInputBox=t.confEnterPwdToChairmanResultResult=t.handleReqChairmanResultRest=t.confReqChairmanResult=t.actionRequestChairman=t.confReleaseChairmanResult=t.actionReleaseChairman=t.actionReInviteAttendee=t.confBroadcastLocal=t.actionMuteAllAttendee=t.handup=t.actionChangeAllowUnmute=t.actionMuteConf=t.lockState=t.lockResult=t.hangupResult=t.handupResult=t.attendeeMuteResult=t.actionMuteAttendee=t.handlePairJoinConf=t.confInfoNotify=t.actionEndConf=t.handleUportalTokenError=t.actionCreateConf=t.actionShareClickByDetail=t.actionShareClickByRecent=t.actionCreateConfByDetail=t.actionCreateConfByRecent=t.handleBookConfResult=t.formatDateString=t.bookMeeting=t.changeGroupId=t.changeConfSearchTxt=t.toggleMemberListSearch=void 0;var o=n(149),i=a(o),s=n(147),c=a(s),u=n(69),f=a(u),l=n(142),d=a(l),p=n(135),h=a(p),m=n(1),v=a(m),g=n(3),C=a(g),S=n(139),w=a(S),_=n(2),I=a(_),b=(t.initConfctrl=function(){var e=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,J.info("[ confctrlInit ] start 1"),!t.useMetting){e.next=7;break}return e.next=7,coreConf.confctrlInit();case 7:J.info("[ confctrlInit ] end 2"),window.confCtrlLoaded=!0;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(299)),N=n(242),E=n(299),y=n(1757),T=(a(y),n(356)),O=n(335),A=n(215),x=n(259),k=r(x),M=n(943),R=n(593),L=n(815),D=n(260),P=n(944),F=n(946),U=n(816),B=n(817),W=r(B),V=n(1767),H=r(V),$=n(1781),G=r($),j=n(1782),q=r(j),J=coreLogger.getLogger("conf")("logic"),Y=null,K=new RegExp("^1[3|4|5|7|8|9][0-9]{9}$"),z="",Q=(t.toggleMemberListSearch=function(e){$dispatch(coreUi.changeMemberListSearch(e))},t.changeConfSearchTxt=function(e){$dispatch(coreUi.changeSearchText(e))},t.changeGroupId=function(e){$dispatch(coreUi.changeGroupId(e)),A.SvcAtdManager.setIsSupportChatNative()}),Z=(t.bookMeeting=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("make an appointment for a meeting"),n=$getState(),r=void 0,a=t.start_time,r=bt(n.selectBox.selectBox_saveSelectedList),o=n.common.groupName,i=n.myInfo,!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=18;break}if(!i.account){e.next=17;break}return e.next=11,window.getContactFromNet(i.account);case 11:s=e.sent,s.name&&(i.name=s.name),s.mobileCodeAll&&(c=s.mobileCodeAll.replaceAll("+86-",""),i.mobile=c),$dispatch(coreUi.updateMyInfo((0,w.default)({},i))),e.next=18;break;case 17:J.info("bookMeeting cannot have selfInfo account");case 18:if(r.push(i),u=Nn(r),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=41;break}if(window.confCtrlLoaded){e.next=41;break}return J.info("confCtrl is not loaded, please wait"),$dispatch(coreUi.changeEnterConfState(!0)),f=new C.default(function(e,t){var n=0,r=setInterval(function(){window.confCtrlLoaded?(e(0),clearInterval(r)):++n>8&&(t(-1),clearInterval(r))},500)}),l=-1,e.prev=26,e.next=29,f;case 29:l=e.sent,e.next=37;break;case 32:e.prev=32,e.t0=e.catch(26),J.error("confCtrl init timeout"),window.clickCreateWorking=!1,window.ToastNew(language.CONFERENCE_BOOK_FAILED,2);case 37:if($dispatch(coreUi.changeEnterConfState(!1)),0===l){e.next=41;break}return J.info("confCtrl init timeout"),e.abrupt("return");case 41:return Z(i,u,{group_id:""},t.mediaType,t.confSubject,a,t.conf_len,t.time_zone,t.recordType,t.vmrConfId),e.next=44,coreUi.hideModal();case 44:case"end":return e.stop()}},e,void 0,[[26,32]])}));return function(t){return e.apply(this,arguments)}}(),t.formatDateString=function(e){var t=new Date(e);return t.getHours()+language.HOUR+t.getMinutes()+language.MINUTE},function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a){for(var o=arguments.length,i=Array(o>4?o-4:0),s=4;s<o;s++)i[s-4]=arguments[s];var c,u,f,l,d,p,h,m,g,C,S,w,_,I,b,N,E,y,T;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.saveCalleeInfo({})),c=$getState().conf.isCreateMeetingPassword?0:1,u={bConf:!0,selfInfo:t,memberList:n,groupInfo:r,mediaType:a,noPassword:c,others:i},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=12;break}return e.next=6,coreUi.checkMobileMultiDevice(u);case 6:if(f=e.sent,l="bookMeeting"===window.getRoute()&&window.CLIENTCONFIG.ISMOBILE,!0!==f||l){e.next=12;break}return J.info("multi device logined, return"),window.clickCreateWorking=!1,e.abrupt("return");case 12:if(!(n.length>500)){e.next=18;break}return J.error("member number: "+n.length+"exceeds 500, can not book conf"),d=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("500"),window.clickCreateWorking=!1,alert(d),e.abrupt("return");case 18:if(!(n.length>=1)&&isNullOrEmpty(t.account)){e.next=62;break}if(J.info("book conf, member list count is "+n.length),p="",h="",m=0,g=0,C=0,S="",isNullOrEmpty(i)){e.next=50;break}if(p=i[0],h=i[1],m=i[2],g=i[3],C=i[4],S=i[5],w=constant.TIME_ZONE_FLAG[parseInt(g,10)-1],_=constant.TIME_ZONE_FLAG[getDefaultTimeZone(constant.TIME_ZONE_FLAG)-1],I=ee(getNowFormatDate(new Date),_),b=new Date(I.replace(/-/g,"/")).getTime()+36e5*w,N=new Date(h.replace(/-/g,"/")).getTime(),!(b-N>0)){e.next=42;break}return window.CLIENTCONFIG.ISMOBILE?window.alert(language.CONFERENCE_START_TIME_ERROR):alert(language.CONFERENCE_START_TIME_ERROR),window.clickCreateWorking=!1,e.abrupt("return");case 42:if(0!==m){e.next=47;break}return window.clickCreateWorking=!1,alert(language.CONFERENCE_DURATION_ERROR),window.clickCreateWorking=!1,e.abrupt("return");case 47:h=ee(h,w),e.next=52;break;case 50:window.clickCreateWorking=!1,J.error("start time is null, can not book conf");case 52:return E=coreCommon.isVideoConf(a),y=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,T={memberList:n,confSubject:p,groupUri:r?r.group_id:"",isMultiStream:E?y:0,mediaType:a,userType:2,compereNumber:t.bind_no,selfNumber:t.bind_no,start_time:h,conf_len:m,time_zone:g,noPassword:c,recordType:C,vmrConfId:S},J.info("actionBookConf isMultiStreamValue: "+y),e.next=58,Lt.wait();case 58:return e.next=60,coreConf.bookConf(T);case 60:e.next=64;break;case 62:window.clickCreateWorking=!1,J.error("member list is null");case 64:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}()),X=t.handleBookConfResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("UportalBookConfResult code=",t.param.ret),n=q.getCreateConfFailTitle(t.param.ret),0!==t.param.ret){e.next=8;break}return e.next=5,re();case 5:return e.abrupt("return");case 8:constant.MEDIA_X_ERROR_CODE.start_time_error===t.param.ret?window.alert(language.CONFERENCE_START_TIME_ERROR):11085===t.param.ret||11136===t.param.ret||11071005===t.param.ret?window.alert(language.CONF_TIME_CONFLICT):7===t.param.ret?(J.info("book conf failed,error code=",t.param.ret),ce(t.param.ret)):(J.info("book conf failed,error code=",t.param.ret),window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv?window.ToastNew(language.CONFERENCE_BOOK_FAILED,2):coreCommon.isNeedQuickFeedback(n)?window.confirm(n+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.BOOK_CONF_ERROR,language.CONFERENCE_BOOK_FAILED)}):11071060===t.param.ret?window.Toast(n,2):alert(n,2));case 9:window.clickCreateWorking=!1,r=0===t.param.ret,a=[],r?(a.push(1),o=t.param.conf_list_info.conf_id,isNullOrEmpty(o)?J.warn("bookconfid is empty!"):a.push(o)):a=[0,t.param.ret],coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BOOK,extraTrackKey:null,resultParams:a});case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ee=function(e,t){var n=e.substring(0,4),r=e.substring(5,7),a=e.substring(8,10),o=e.substring(11,13),i=e.substring(14,16),s=new Date(n,r-1,a,o,i),c=s.getTime()-60*t*60*1e3;return s.setTime(c),J.info(te(s)),te(s)},te=function(e){var t=new Date(e);return t.getFullYear()+"-"+ne(t.getMonth()+1)+"-"+ne(t.getDate())+" "+ne(t.getHours())+":"+ne(t.getMinutes())},ne=function(e){return e>9?e:"0"+e},re=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("dealBookConfSuc"),Mt(),window.CLIENTCONFIG.ISMOBILE?window.goRoute("main/conference"):coreConf.changeConfPage("MyConf"),window.ToastNew(language.CONFERENCE_BOOK_SUCCESS,2),coreConf.resetDefaultValue(),$dispatch(coreUi.changeBuriedMeetingName(""));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),ae=(t.actionCreateConfByRecent=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.myInfo,a=n.recent.currentRecentInfo,!coreIm.isGroup(a.chat_type)){e.next=17;break}return e.next=4,coreGroup.getMemberListByGroupIdInQueue(a.owner);case 4:return o=e.sent,e.next=7,coreAccount.getLoginModel();case 7:if(i=e.sent,i.isSupportAS){e.next=13;break}return s=o.getKeyArr("account"),e.next=12,coreContact.getContactListByAccountList(s);case 12:o=e.sent;case 13:c=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,oe(r,o,a.group,t,c),e.next=18;break;case 17:J.info("actionCreateConfByRecent 点对点会话不进行创建会议");case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionCreateConfByDetail=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("actionCreateConfByDetail, bFromSlider=",n),r=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,n?(a=$getState(),o=a.myInfo,i=a.contactGroups,s=i.sliderGroupMemerInfo,c=i.sliderGroupInfo,oe(o,s,c,t,r)):(u=$getState(),f=u.myInfo,l=u.contactGroups,d=l.groupMemberInfo,p=l.groupInfoNew,oe(f,d,p,t,r));case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionShareClickByRecent=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("actionShareClick"),t=$getState(),n=t.myInfo,r=t.recent,a=r.currentGroupMemberList,o=r.currentRecentInfo,coreIm.isGroup(o.chat_type)){e.next=7;break}if(J.info("点对点会话，先判断聊天者是不是有号码存在"),""!==o.contact.bind_no||""!==o.contact.short_phone){e.next=7;break}return alert(language.THE_CONTACT_HAS_NO_NUMBER),e.abrupt("return");case 7:if(i=a||[],s=void 0,!coreIm.isGroup(o.chat_type)){e.next=14;break}J.info("actionShareClickByRecent 群组会话"),s=o.group,e.next=19;break;case 14:return J.info("actionShareClickByRecent 点对点会话，先创建群组"),i.push(o.contact),e.next=18,coreGroup.createDiscussionGroup({list:i});case 18:s=e.sent;case 19:c=(0,h.default)({},n,{isAutoStartShare:!0}),u=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,oe(c,i,s,constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,u);case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.actionShareClickByDetail=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,p,m,g;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("actionShareClickByDetail "+t),n=$getState(),r=n.myInfo,a=n.contactGroups,o=a.sliderContactInfo,i=a.sliderGroupInfo,s=a.sliderGroupMemerInfo,c=a.contactInfo,u=a.groupMemberInfo,f=a.groupInfoNew,l=void 0,p=void 0,!t){e.next=15;break}if(l=s||[],p=i,0!==l.length){e.next=13;break}if(l=[].concat((0,d.default)(l)),l.push(o),!window.CLIENTCONFIG.USE_IM){e.next=13;break}return e.next=12,coreGroup.createDiscussionGroup({list:l});case 12:p=e.sent;case 13:e.next=23;break;case 15:if(l=u||[],p=f,0!==l.length){e.next=23;break}if(l[0]=c,!window.CLIENTCONFIG.USE_IM){e.next=23;break}return e.next=22,coreGroup.createDiscussionGroup({list:l});case 22:p=e.sent;case 23:m=(0,h.default)({},r,{isAutoStartShare:!0}),g=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,oe(m,l,p,constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,g);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.next=3,coreCall.callMultiTerminalCheck();case 3:if(n=e.sent,window.requestMultiTerminalPromise=null,!n){e.next=7;break}return e.abrupt("return",q.CREATE_CONF_ERR.MULTI_DEVICE_LOGIN);case 7:return e.next=9,coreCall.dealSipLoginCheck();case 9:window.requestSipLoginPromise=null;case 10:return e.next=12,coreAccount.getLoginModel();case 12:if(r=e.sent,!r.userSelectOffline||!window.CLIENTCONFIG.USE_IM){e.next=20;break}if(isNullOrEmpty($getState().conf.confTempAcsAccount)&&!$getState().login.sipLoginOnly){e.next=17;break}e.next=20;break;case 17:return J.error("checkBeforeEnterConf offline, can not create conf"),f&&window.ToastNew(language.CALL_FAILED_OFFLINE),e.abrupt("return",q.CREATE_CONF_ERR.OFFLINE);case 20:if(a=r.isSipRegSuc()){e.next=29;break}return J.error("sip register failed, can not create conf"),(!r.isMobile||r.isMobile&&!$getState().login.isMultiDeviceLogined)&&coreAccount.sipResume({message:"checkBeforeEnterConf"}),e.next=26,r.checkSipState();case 26:if(r.isSipRegSuc()){e.next=29;break}return window.CLIENTCONFIG.ENABLE_IT_MEETING||f&&window.confirm(language.THE_NETWORK_IS_ABNORMAL+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.SIP_NOT_REG_ERROR,language.THE_NETWORK_IS_ABNORMAL)}),e.abrupt("return",q.CREATE_CONF_ERR.SIP_FAIL);case 29:if(!coreConf.isInConf()&&!$getState().synergismInfo.inPairConf){e.next=33;break}return J.error("already exist conference, can not create conf"),f&&alert(language.PREVENT_TWO_CONFERENCE),e.abrupt("return",q.CREATE_CONF_ERR.EXIST_CONF);case 33:if(!(coreCall.getCallCount()>0)){e.next=37;break}return J.error("already exist call, can not create conf"),f&&alert(language.PREVENT_CONFERENCE_AFTER_CALL),e.abrupt("return",q.CREATE_CONF_ERR.EXIST_CALL);case 37:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=42;break}return e.next=41,window.isSimCardCall();case 41:e.t0=e.sent;case 42:if(!(o=e.t0)){e.next=47;break}return J.info("now is in sim card call cannot create conf"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.itWeLinkNotifyCallEnded(0,language.PLEASE_HANG_UP_CALL):f&&window.ToastNew(language.PLEASE_HANG_UP_CALL,2),e.abrupt("return",q.CREATE_CONF_ERR.EXIST_SIM_CALL);case 47:if(u){e.next=56;break}return e.next=50,coreCall.callPermissionCheck(t);case 50:if(i=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),J.info("isHavePerm: "+i),i){e.next=56;break}return J.info("mobile do not have permission cannnot create conf"),e.abrupt("return",q.CREATE_CONF_ERR.PERMSSION_REJECT);case 56:if(e.t1=!u,!e.t1){e.next=61;break}return e.next=60,coreCall.Call2GNet(t);case 60:e.t1=e.sent;case 61:if(!e.t1){e.next=64;break}return J.info("The network type is 2G. not support video conf "),e.abrupt("return",q.CREATE_CONF_ERR.NET_2G);case 64:if(s=!0,!t){e.next=70;break}if((!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.webView)&&window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=70;break}return e.next=69,coreCall.createVideoPreCheck();case 69:s=e.sent;case 70:if(s){e.next=77;break}return J.info("<video>mobile is 3G/4G,user cancel continue video conf"),c=window.getRoute(),J.info("current route is :",c),"callMain"===c&&(J.info("current route is callmain call history back"),history.back()),r.sipLoginOnly&&window.goRoute("loginCtn"),e.abrupt("return",q.CREATE_CONF_ERR.USER_CANCEL);case 77:return e.abrupt("return",q.CREATE_CONF_ERR.SUCCESS);case 78:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),oe=t.actionCreateConf=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a,o){for(var i=arguments.length,s=Array(i>6?i-6:0),c=6;c<i;c++)s[c-6]=arguments[c];var u,f,l,d,p,h,m,g,C,S,w,_,I,b,N,E,y,T=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=coreCommon.isVideoConf(a),f={bConf:!0,selfInfo:t,memberList:n,groupInfo:r,mediaType:a,noPassword:o,bVideo:u,others:s},!(f.memberList.length>400)){e.next=11;break}return J.error("member number: "+f.memberList.length+"exceeds 100, can not create conf"),l=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400"),window.clickCreateWorking=!1,T&&alert(l),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),window.clickCreateWorking=!1,e.abrupt("return",q.CREATE_CONF_ERR.OUT_MEMBER_LIMIT);case 11:if(!(n.length<1&&isNullOrEmpty(t.account))){e.next=16;break}return J.error("member list is null"),window.clickCreateWorking=!1,$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",q.CREATE_CONF_ERR.MEMBER_EMPTY);case 16:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=25;break}return e.next=19,coreUi.checkMobileMultiDevice(f);case 19:if(!(d=e.sent)){e.next=25;break}return window.clickCreateWorking=!1,J.info("multi device logined actionCreateConf"),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",q.CREATE_CONF_ERR.MULTI_DEVICE_LOGIN);case 25:return e.next=27,ae(u,!1,T);case 27:if(p=e.sent,0===p.code){e.next=34;break}return $dispatch(coreUi.changeEnterConfState(!1)),window.clickCreateWorking=!1,J.info("create conf, check enter conf fail "),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",p);case 34:return $dispatch(coreUi.saveCalleeInfo({})),J.info("create conf, member list count is "+n.length),G.createConfToRefreshRecent(r),h="",m=0,g=0,C="",isNullOrEmpty(s)||(h=s[0],m=s[1],g=s[2],C=s[3]),isNullOrEmpty(h)&&(h=t.name+language.CONFERENCE_SUBJECT_INFO),H.showConfOutPage(u,!0,h,""),S=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,w=t.bind_no,_={isCloseCameraDe:!$getState().conf.isOpenCameraDe,isMuteMicDe:!$getState().conf.isOpenMicDe},I={memberList:n,confSubject:h,groupUri:r?r.group_id:"",isMultiStream:u?S:0,mediaType:a,userType:2,compereNumber:w,selfNumber:w,isAutoScreenShare:t.isAutoStartShare,noPassword:o,recordType:g,deviceSet:_,vmrConfId:C},J.info("IS_MULTI_STREAM= "+S+",isVideoConf = "+u),ie()&&(I.mediaType=I.mediaType|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),b=coreCommon.isHuaweiCloud($getState().login.serverAddress),(b||window.CLIENTCONFIG.ENABLE_IT_MEETING)&&(I.mediaType=I.mediaType|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),J.info("create conf media type: "+I.mediaType),e.next=55,coreConf.createConf(I);case 55:if(N=e.sent,E=N.errorCode,$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),0!==E){e.next=66;break}return(0,L.resetDefaultValue)(),Mt(),In(constant.ONLINE_STATUS.BUSY),e.abrupt("return",q.CREATE_CONF_ERR.SUCCESS);case 66:return window.clickCreateWorking=!1,y=q.getCreateConfFailTitle(E),H.closeConfPage(!1,!1,E,y,T),H.clearAfterConfEnd(!1,!1),7===E&&(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():ce(E)),e.abrupt("return",{code:E,msg:y});case 72:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),ie=function(){return!0},se=function(e){var t=$getState(),n=t.myInfo,r=t.call.userInfo;if(1===e.length&&(e[0].number===n.bind_no||e[0].number===r.bind_no))return J.info("p2p trans to conf add caller or callee, return"),coreUi.hideModal(),!1;if(coreConf.isInConf()||$getState().synergismInfo.inPairConf)return J.error("already exist conference, can not create conf"),coreUi.hideModal(),alert(language.PREVENT_TWO_CONFERENCE),!1;if(e.length>399){J.error("member number: "+e.length+"exceeds 100, can not create conf");var a=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400");return alert(a),!1}var o=$getState().call.callStatus;return o!==constant.CALL_VIDEO_STATUS.CALL_OUT&&o!==constant.CALL_VIDEO_STATUS.VIDEO_OUT||(J.error("calling out, can not create conf"),!1)},ce=t.handleUportalTokenError=function(e){J.info("the erro of ute reason",e);var t={param:{result:parseInt(e)}};vt(t)},ue=(t.actionEndConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$getState().synergismInfo.inPairConf){e.next=4;break}return J.info("BLE: actionEndConf, start end pair meeting"),(0,P.pairStartEndMeeting)(!0),e.abrupt("return");case 4:return t=coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE_START_END"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask(H.closeConfPage,n,null,!0,!0,0,language.END_CONFERENCE),e.next=9,coreConf.endConf();case 9:window.CLIENTCONFIG.ISMOBILE||(J.info("close conf windows while action end conf"),t.addTask(H.closeInConfWindows,n)),In(constant.ONLINE_STATUS.ONLINE),t.addTask(H.clearAfterConfEnd,n,null,!0,!0,0);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState(),t=e.login.tempConfInfo;coreConf.getIsFirstEnterConf()&&3===parseInt(t.user_role)&&fr(),coreConf.setIsFirstEnterConf(!1)}),fe=t.confInfoNotify=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:H.confInfoNotify();case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),le=function(){H.svcSeessionModify()},de=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("handleConfConnected, isCallToConf = "+t),window.isHubEnv&&(sleep(1e3).then(function(){J.info("maxhub self close conf micmut 1000");var e=$getState().conf.isConfMicMute,t=$getState().conf.selfNum,n=$getState().myInfo.bind_no,r=isNullOrEmpty(t)?n:t;J.info("1000: isconfMicMut: "+e),e&&pe(!1,r,!0)}),sleep(3e3).then(function(){J.info("maxhub self close conf micmut 3000");var e=$getState().conf.isConfMicMute,t=$getState().conf.selfNum,n=$getState().myInfo.bind_no,r=isNullOrEmpty(t)?n:t;J.info("3000: isconfMicMut: "+e),e&&pe(!1,r,!0)})),coreCommon.dispatchModuleEvent("pluginConfStateNotify",{state:constant.CLK_PLUGIN_CONFLIFECYCLE.START}),In(constant.ONLINE_STATUS.BUSY),t?(H.p2pToJoinConf(),G.confTransToConfRefreshRecent()):H.handleJoinConf();case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),pe=(t.handlePairJoinConf=function(e){J.info("BLE: start handlePairJoinConf, mediaType=",e);var t=$getState().call.callStatus;if("VIDEO_CONNECTED"===t||"CALL_CONNECTED"===t)return void J.info("BLE: handlePairJoinConf has entered");It(),window.webView&&window.webView.setKeepScreenOn();var n=coreCommon.isVideoConf(e);J.info("BLE: handlePairJoinConf, isVideoConf=",n),n?($dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),$dispatch(coreUi.changeMeetingType(!0)),$dispatch(coreUi.changeCallToolBarShowStatus(!1))):($dispatch(coreUi.changeCallStatus("CALL_CONNECTED")),$dispatch(coreUi.changeMeetingType(!1)),$dispatch(coreUi.changeCallToolBarShowStatus(!0))),$dispatch(coreUi.clearEnterConfInfo())},t.actionMuteAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r){var a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={isMute:t,attendee:n},e.next=3,coreConf.muteAttendeeService(a);case 3:o=e.sent,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&r&&(0,R.meetingHWmicrophoneOnOrOff)(t),o&&0===o.result?(J.info("mute attendee success: "+handlePhoneNumber(n)),(0,T.setMemberToMuteState)(n,t),r&&(t?$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE)):($dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE)),"android"===window.CLIENTCONFIG.PLATFORM&&window.showMicMutTips("")),coreCommon.dispatchModuleEvent("pluginConfMuteNotify",t))):J.error("mute attendee failed: "+handlePhoneNumber(n));case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),he=t.attendeeMuteResult=function(e){if(0!==e.param.ret){var t=e.param.to_mute;if(void 0===t){var n=$getState(),r=n.conf.isConfMicMute;r===constant.MUTE_STATE.MUTE_STATE_TOMUTE?t=1:r===constant.MUTE_STATE.MUTE_STATE_TOUNMUTE&&(t=0)}(0,T.revertMemberToMuteState)(t),t?(J.info("mute failed"),$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_UNMUTE))):(J.info("unmute failed"),$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_MUTE)),10002===e.param.ret&&(window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.CALL_UNMUTE_FAIL_NORIGHT,2):($dispatch(coreUi.changeNotifyInfo(coreCall.setNotifyInfo(language.CALL_UNMUTE_FAIL_NORIGHT))),coreCall.showConfirmNotify(!0,3e3))))}},me=t.handupResult=function(e){0===e.param.ret?0===e.param.to_hangup?(J.info("unhand up success"),we(1),window.CLIENTCONFIG.ISWIN?A.SvcAtdManager.alertBox("HAND_DOWN_SUCCESSFULLY",1):window.ToastNew(language.HAND_DOWN_SUCCESSFULLY,2)):1===e.param.to_hangup&&(J.info("handup success"),Se(1),window.CLIENTCONFIG.ISWIN?A.SvcAtdManager.alertBox("HAND_UP_SUCCESSFULLY",1):window.Toast(language.HAND_UP_SUCCESSFULLY,2)):0===e.param.to_hangup?(J.info("unhandup failed!!!"),we(0),window.CLIENTCONFIG.ISWIN?A.SvcAtdManager.alertBox("HAND_DOWN_FAILURE",1):window.ToastNew(language.HAND_DOWN_FAILURE,2)):1===e.param.to_hangup&&(J.info("handup failed!!!"),Se(0),window.CLIENTCONFIG.ISWIN?A.SvcAtdManager.alertBox("HAND_UP_FAILURE",1):window.ToastNew(language.HAND_UP_FAILURE,2))},ve=t.hangupResult=function(e){0===e.param.ret?J.info("hangup success"):(J.info("handup error ",e.param.ret),window.ToastNew(language.FAILURE_TO_HANG_UP_THE_VENUE,2))},ge=t.lockResult=function(e){if($getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING)return void J.info("no need to parse lockResult: "+n);var t=e.param.lock_info.OperateType?1:0,n=null;t?e.param.ret||e.param.lock_info.Result?(n=language.LOCK_CONF_FAILURE,_e(0)):(n=language.LOCK_CONF_SUCCESSFULLY,_e(1),$dispatch(coreUi.changeConfIsLock(t))):e.param.ret||e.param.lock_info.Result?(n=language.UNLOCK_CONF_FAILURE,Ie(0)):(n=language.UNLOCK_CONF_SUCCESSFULLY,Ie(1),$dispatch(coreUi.changeConfIsLock(t))),J.info("lockResult: "+n),window.CLIENTCONFIG.ISMOBILE?window.JSToNativeToast(2e3,n):window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf?A.SvcAtdManager.alertBox(n,3):setTimeout(function(){window.Toast(n,3,!1,"pcToast","")},1e3)},Ce=t.lockState=function(e){if($getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING)return void J.info("no need to parse lockState: "+n);var t=e.param.is_lock,n=t?language.THE_MEETING_HAS_BEEN_LOCKED_DOWN:language.THE_MEETING_IS_NOT_LOCKED;t!==$getState().conf.isLock&&(J.info("lockState: "+n),be(t),$dispatch(coreUi.changeConfIsLock(t)),window.CLIENTCONFIG.ISMOBILE?window.JSToNativeToast(2e3,n):window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf?A.SvcAtdManager.alertBox(n,3):setTimeout(function(){window.Toast(n,3,!1,"pcToast","")},1e3))},Se=function(e){var t=$getState().conf.videoFrameHwnd;J.info("putUpToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{put_up_hand_result:n});(0,b.notifyPutHandup)(r)},we=function(e){var t=$getState().conf.videoFrameHwnd;J.info("putDownToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{put_down_hand_result:n});(0,b.notifyPutHandup)(r)},_e=function(e){var t=$getState().conf.videoFrameHwnd;J.info("lockResultToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{lock_result:n});(0,b.notifyLockConfResult)(r)},Ie=function(e){var t=$getState().conf.videoFrameHwnd;J.info("unlockResultToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{unlock_result:n});(0,b.notifyLockConfResult)(r)},be=function(e){var t=$getState().conf.videoFrameHwnd;J.info("lockStateToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{lock_state:n});(0,b.notifyLockConfState)(r)},Ne=t.actionMuteConf=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.CLIENTCONFIG.ISMOBILE&&(1===t?$dispatch(coreUi.changeConfAllMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE)):$dispatch(coreUi.changeConfAllMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE))),e.next=3,coreConf.muteConf(t,n);case 3:if(r=e.sent,a=r.errorCode,o=r.to_mute,0!==a){e.next=10;break}$dispatch(coreUi.changeConfAllMute(o)),e.next=17;break;case 10:if(J.error("mute conf failed ",o),i=o?0:1,$dispatch(coreUi.changeConfAllMute(i)),10!==a){e.next=16;break}return alert(language.VIDEO_MUTE_CONF_FAIL_WHEN_CONFPAGE_OPEN),e.abrupt("return");case 16:o?window.ToastNew(language.CONFERENCE_MUTE_ALL_FAILED,2):window.ToastNew(language.CONFERENCE_UNMUTE_ALL_FAILED,2);case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),Ee=(t.actionChangeAllowUnmute=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.isAllowUnmute,n=t?0:1,e.next=4,coreConf.allowUnmuteConf(n);case 4:r=e.sent,a=r.errorCode,0===a?J.info("change allow unmute succeed"):J.error("change allow unmute failed ",t);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handup=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={isHandup:t,attendee:n},e.next=3,coreConf.handupService(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionMuteAllAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=$getState(),a=r.conf&&r.conf.isConfAllMute,o=r.conf&&r.conf.memberListInfo,!isNullOrEmpty(o)){e.next=8;break}return J.info("actionMuteAllAttendee memberList empty"),Ne(t,n),e.abrupt("return");case 8:if(t!==constant.MUTE_STATE.MUTE_STATE_MUTE){e.next=16;break}if(J.info("userClick  actionMuteAllAttendee mute"),!window.isSupportiDo){e.next=13;break}return Ne(constant.MUTE_STATE.MUTE_STATE_MUTE,n),e.abrupt("return");case 13:a?o.forEach(function(e){1!==e.is_self&&e.is_mute===constant.MUTE_STATE.MUTE_STATE_UNMUTE&&e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT&&pe(!0,e.number,!1)}):Ne(constant.MUTE_STATE.MUTE_STATE_MUTE,n),e.next=28;break;case 16:if(t!==constant.MUTE_STATE.MUTE_STATE_UNMUTE){e.next=28;break}if(J.info("userClick  actionMuteAllAttendee unmute"),!window.isSupportiDo){e.next=21;break}return Ne(constant.MUTE_STATE.MUTE_STATE_UNMUTE,n),e.abrupt("return");case 21:if(!a){e.next=26;break}return e.next=24,Ne(constant.MUTE_STATE.MUTE_STATE_UNMUTE,n);case 24:e.next=28;break;case 26:return e.next=28,o.forEach(function(e){e.is_mute===constant.MUTE_STATE.MUTE_STATE_MUTE&&e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT&&pe(!1,e.number,e.is_self)});case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),J.error("actionMuteAllAttendee error try catch",{error:e.t0.toJSON()});case 33:case"end":return e.stop()}},e,void 0,[[0,30]])}));return function(t,n){return e.apply(this,arguments)}}(),t.confBroadcastLocal=function(e){var t=$getState().conf.isSvcConf;if($getState().conf.isVideoConf&&!t)return window.CLIENTCONFIG.ISWIN?ye(!!e.param.is_broadcast):($dispatch(coreUi.changeIsBroadcastLocal(!!e.param.is_broadcast)),void(window.CLIENTCONFIG.ISMOBILE&&window.JSToNativeToast(2e3,e.param.is_broadcast?language.LOCAL_BROADCASTING:language.CANCEL_BROADCASE)))}),ye=function(e){if(e){J.info("confBroadcastLocal: show");var t=$getState().conf.videoFrameHwnd,n=k.getAvcFrameHandles();if(window.CLIENTCONFIG.ISWIN){var r={frameHwnd:0!==t?t:n,dialog_type:1,content_id:"LOCAL_BROADCASTING"};(0,E.showMessageBox)(r)}}},Te=(t.actionReInviteAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],n.push(t),e.next=4,coreConf.reInviteAttendee(t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionReleaseChairman=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return J.error("chairmanNumber is null or undefined, can not releasechairman"),e.abrupt("return");case 3:return e.next=5,coreConf.releaseChairman(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Oe=t.confReleaseChairmanResult=function(e){if(0===e.param.ret){if(window.CLIENTCONFIG.ISMAC){var t=$getState().conf,n=t.isBigConf,r=t.svcShowPage;return n&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,null,!0),void(n&&0!==r&&O.SvcAttendanceManager.dealSvcPageSwitch(0))}$getState().conf.isBigConf?window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS_BIGCONF,2,!1,"big-conf-toast"):window.ToastNew(language.THE_CHAIRMAN_HAS_BEEN_RELEASED,2),window.isSupportiDo||$e()}else{if(window.CLIENTCONFIG.ISMAC)return;J.error("failed to release the chairman ",e.param.ret),window.ToastNew(language.FAILED_RELEASE_THE_CHAIR,2)}},Ae=t.actionRequestChairman=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(n)){e.next=3;break}return J.error("reqNumber is null or undefined, can not requestchairman"),e.abrupt("return");case 3:return r={chairmanPwd:t,reqNumber:n},e.next=6,coreConf.requestChairman(r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),xe=t.confReqChairmanResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("req chairman Result",t),window.isSupportiDo){e.next=4;break}return ke(t),e.abrupt("return");case 4:if(n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_EXITS,a=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR,o=$getState().conf.showRepChairmanError,i=$getState().conf.showqusetchairman,0!==t.param.ret){e.next=16;break}i&&$dispatch(coreUi.showqusetchairman()),o&&(J.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2),window.CLIENTCONFIG.ISMOBILE&&coreUi.setShowResetHideLogic(null),e.next=25;break;case 16:if(J.error("failed to request the chairman ",t.param.ret),!i){e.next=20;break}return o||(J.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),e.abrupt("return");case 20:return e.next=22,Le();case 22:s=e.sent,1107400===t.param.ret?t.param.ret=constant.REQUEST_CHAIRMAN.CHAIR_EXITS:18e6===t.param.ret&&(t.param.ret=constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR),(t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_EXITS||r)&&s?window.CLIENTCONFIG.ISMAC?window.confirm(language.CURRENT_CHAIRMAN_ALREADY):window.CLIENTCONFIG.ISWIN?A.SvcAtdManager.alertBox("NATIVE_CURRENT_CHAIRMAN_ALREADY",1):window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2):t.param.ret!==constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR&&!a||s?window.CLIENTCONFIG.ISMAC?window.confirm(language.APPLICATION_FAILED):window.CLIENTCONFIG.ISWIN?A.SvcAtdManager.alertBox("NATIVE_FAILED_APPLY_THE_CHAIR",1):window.ToastNew(language.APPLICATION_FAILED,2):Re();case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ke=t.handleReqChairmanResultRest=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("enter handleReqChairmanResultRest "),n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.NEED_PASSWORD,a=$getState().conf.showRepChairmanError,o=$getState().conf.showqusetchairman,0!==t.param.ret){e.next=12;break}o&&$dispatch(coreUi.showqusetchairman()),a&&(J.info("showRepChairmanErrorbool",a),$dispatch(coreUi.showRepChairmanError())),window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2),window.CLIENTCONFIG.ISMOBILE&&coreUi.setShowResetHideLogic(null),e.next=24;break;case 12:if(!r||!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=16;break}lr(),e.next=24;break;case 16:if(J.error("failed to request the chairman ",t.param.ret),!o){e.next=20;break}return a||(J.info("showRepChairmanErrorbool",a),$dispatch(coreUi.showRepChairmanError())),e.abrupt("return");case 20:return e.next=22,Le();case 22:i=e.sent,(10002===t.param.ret||r)&&i?window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2):10002!==t.param.ret&&!r||i?window.ToastNew(language.APPLICATION_FAILED,2):window.CLIENTCONFIG.ISMOBILE?window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD).then(function(e){if("callMain"===window.getRoute()){var t=$getState().common.showResetfuc;t&&t()}e.ret&&Pe()}):window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD,!0).then(De);case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Me=t.confEnterPwdToChairmanResultResult=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.error("smc failed to request the chairman first ",t.param),lr();case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Re=t.popupRequestChairmanInputBox=function(){J.info("popupRequestChairmanInputBox"),window.CLIENTCONFIG.ISMOBILE?(J.info("popupRequestChairmanInputBox: ISMOBILE"),window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD).then(function(e){if(e.ret)Pe();else{var t=$getState().common.showResetfuc;t&&t()}})):window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD,!0).then(De)},Le=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$getState().call.callStatus,n=$getState().conf,r=n.confHandle,a=n.memberListInfo,o=!1,isNullOrEmpty(r)||"VIDEO_CONNECTED"!==t&&"CALL_CONNECTED"!==t||isNullOrEmpty(a)||(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),J.error("isConfHasCharMain:",e.t0);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),De=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.ret)){e.next=5;break}return e.next=5,fr();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),J.error("againRequestPreservate:",e.t0);case 10:case"end":return e.stop()}},e,void 0,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fr();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),J.error("againCompressRequest:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),Fe=t.confReqChangeNickNameResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("changeNickName  result data = ",t),0===t.param.result?(n=$getState().conf,r=n.useNickNameAllConf,a=n.confNickName,r&&(J.info("changeNickName  save name to db"),coreAccount.saveNickName({data:a})),window.CLIENTCONFIG.ISMOBILE||$dispatch(coreUi.changeDialogWindowShow(!1))):window.CLIENTCONFIG.ISMOBILE?window.alert(language.MODIFY_ATTENDEE_NAME_ERROR_TIP):$dispatch(coreUi.changeModifyNickNameRequestStatus(!0));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.actionCallOtherNum=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.addAttendee(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionAddAttendee=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=void 0,n=window.CLIENTCONFIG.ISMOBILE?a:t.selectBox.selectBox_tempSelectedList,r=bt(n),e.next=6,coreConf.addAttendee(r);case 6:coreUi.hideModal();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.addAttendeeFromWelinkIT=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,m;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t,r=""!==$getState().conf.confHandle,a=$getState(),o=a.myInfo,i=[],s=[],c="ConCreateMeeting"===window.getRoute()||"ConMembers"===window.getRoute()||"bookMeeting"===window.getRoute(),J.info("addAttendeeFromWelinkIT isAddContact : "+c),u=0;u<n.length;u++)f=n[u],f.contactsId||f.contactId||(f.contactId=f.calleeNumber),l=f.contactId,d="",f.mobilePhones&&(d=f.mobilePhones.replace(/-/g,"").replace(/\s*/g,"")),f.calleeNumber&&(f.calleeNumber=f.calleeNumber.replace(/-/g,"").replace(/\s*/g,"")),p={account:l,name:f.name,mobile:d,number:f.calleeNumber,bind_no:f.calleeNumber,email:f.email,home_phone:"",office_phone:"",short_phone:"",other_phone:"",other_phone2:"",voip:"",ip_phone:"",q_pin_yin:f.name},o.account===l&&(o.bind_no=f.calleeNumber),i.push(p),c&&(J.info("addAttendeeFromWelinkIT add single contact"),h={account:l,avatarContent:f.name,avatarImg:"",avatarPosition:"",isExpanded:!0,isSelected:!0,itemName:f.calleeNumber===d?"mobile":"bind_no",itemType:"contact",name:f.name,email:f.email,number:f.calleeNumber,pushCount:1,qPinyin:"",status:1,numberInfo:{bind_no:{number:f.calleeNumber},mobile:{number:d},home_phone:{number:""},office_phone:{number:""},short_phone:{number:""},other_phone:{number:""},other_phone2:{number:""},voip:{number:f.mobileVoips},ip_phone:{number:""}}},s.push(h));if(!c){e.next=14;break}J.info("addAttendeeFromWelinkIT pure add person"),$dispatch(coreUi.changeTempSelectedListData(s)),Ft(),e.next=22;break;case 14:if(!r){e.next=21;break}return J.info("addAttendeeFromWelinkIT is in conf"),e.next=18,coreConf.addAttendee(i);case 18:coreUi.hideModal(),e.next=22;break;case 21:"CALL_CONNECTED"===$getState().call.callStatus||"VIDEO_CONNECTED"===$getState().call.callStatus?(Ot(constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,!0,i),J.info("addAttendeeFromWelinkIT p2pTransToConf")):(J.info("addAttendeeFromWelinkIT action create conf"),m=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,oe(o,i,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,m));case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var Ue=t.actionHangupAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.hangupAttendeeService(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Be=(t.actionCallAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.callAttendee(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionRemoveAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.removeAttendeeService(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),We=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(coreCall.getCallCount()>0)){e.next=3;break}return J.warn("already exist call, reject conf"),e.abrupt("return",!1);case 3:if(!W.isInReCall()){e.next=6;break}return J.warn("isInReCall, reject conf"),e.abrupt("return",!1);case 6:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=11;break}return e.next=10,window.isSimCardCall();case 10:e.t0=e.sent;case 11:if(!(n=e.t0)){e.next=15;break}return J.warn("isInSimCardCall, reject conf"),e.abrupt("return",!1);case 15:if(!window.CLIENTCONFIG.ISBIGWIN&&!window.isHubEnv){e.next=18;break}return J.warn("ISBIGWIN or isHubEnv, reject conf"),e.abrupt("return",!1);case 18:return J.info("checkCanIncomingConf yes"),e.abrupt("return",!0);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ve=t.confIncoming=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(t.isVideo);case 2:if(n=e.sent){e.next=6;break}return He(t.confHandle),e.abrupt("return");case 6:return J.info("confIncoming, confHandle = "+t.confHandle),e.next=9,H.confIncoming(t);case 9:if(coreCommon.dispatchModuleEvent("confIncomingShown",t),G.confInComingRefreshRecent(),In(constant.ONLINE_STATUS.BUSY),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=23;break}if(!t.isVideo){e.next=23;break}return e.next=16,coreCall.createVideoPreCheck();case 16:if(r=e.sent){e.next=23;break}if(J.info("userClick <video>mobile user 3/4G reject confincoming"),!t.confHandle){e.next=23;break}return J.info("confhangup,confhanled = "+t.confHandle),e.next=23,He(t.confHandle);case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),He=t.rejectConf=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreConf.rejectConfService(t),In(constant.ONLINE_STATUS.ONLINE),H.rejectConf(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$e=(t.acceptConf=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.isInConf()){e.next=5;break}return J.info("conf has ended, return"),window.ToastNew(language.END_CONFERENCE,2),H.rejectConf(t),e.abrupt("return");case 5:return e.next=7,coreCall.Call2GNet(!0);case 7:if(!e.sent){e.next=10;break}J.info("The network is 2G not support video conf"),n=0;case 10:return H.acceptConfStart(n),r={confHandle:t,isVideoType:n},e.next=14,coreConf.acceptConfService(r);case 14:a=e.sent,a&&0===a.result?(J.info("accept conf success"),J.info("isShowDevicesList: "+$getState().conf.isShowDevicesList),o=$getState().conf.isShowDevicesList,J.info("isShowDevicesList: "+o),o&&coreCommon.isWin()&&coreSetting.showDevicesListFunc(),H.accpetConfSuc(),In(constant.ONLINE_STATUS.BUSY)):(J.error("accept conf failed"),H.rejectConf(t),In(constant.ONLINE_STATUS.ONLINE)),G.acceptConfRefreshRecent();case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.doClearSipForSipLoginOnly=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.sipserverDeregister();case 2:return e.next=4,coreAccount.clearnsipinfo();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setSmcFirstRequest=function(){$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING||window.isSmcFirstRequest||coreConf.setIsSmcFirstRequestCharimanRest(!0)}),Ge=(t.handleClosePairConfPage=function(){if(J.info("BLE: start handleClosePairConfPage"),coreCall.resumeScreenStateWhenCallOrConfEnd(),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.clearConfInfo()),coreCommon.SpkControl.getInstance().setHandsFree(!1),W.terminateReCall(),Pt(!0),$dispatch(coreUi.changeCallStatus("")),$dispatch(coreUi.changeCallId("")),$dispatch(coreUi.clearCallInfo()),$dispatch(coreUi.clearPhoneAddrInfo()),H.closeConfPage(),window.CLIENTCONFIG.ISMOBILE){window.callOrConfEnded(),Yn();"callMain"===window.getRoute()&&(J.info("BLE: mobile return origin page"),history.back())}coreCwmp.checkUpdateConfig(),coreCwmp.restartUpgrade()},t.actionLeaveConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&"ios"===window.CLIENTCONFIG.PLATFORM&&window.iosLeaveConfDissmissDrawButton(),!$getState().synergismInfo.inPairConf){e.next=5;break}return J.info("BLE: actionLeaveConf, start leave pair meeting"),(0,P.pairStartEndMeeting)(!1),e.abrupt("return");case 5:return t=coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE_START_END"),n=coreCommon.TaskOptions.defaultOptions(),r=a?language.NO_MIC_TO_LEAVE_CONF:language.EXIT_CONFERENCE,t.addTask(H.closeConfPage,n,null,!0,!1,0,r),e.next=11,coreConf.leaveConf();case 11:window.CLIENTCONFIG.ISMOBILE||(J.info("close conf windows while action leave conf"),t.addTask(H.closeInConfWindows,n)),In(constant.ONLINE_STATUS.ONLINE),t.addTask(H.clearAfterConfEnd,n,null,!0,!1,0);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),je=(t.actionBroadcastAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("actionBroadcastAttendee，isBroadcast= "+t+",NNN="+n.substr(0,3)+"****"+n.substr(-3)),r=JSON.parse((0,f.default)($getState().conf.broadCastInfo)),void 0!==r.broadCastList&&(a="",o="",r.broadCastList.forEach(function(e){void 0!==e.name&&(a=e.name,e.name=handlePhoneNumber(a)),void 0!==e.number&&(o=e.number,e.number=handlePhoneNumber(o))})),J.info("actionBroadcastAttendee",r),i={isBroadcast:t,number:n},e.next=7,coreConf.broadcastAttendeeService(i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionWatchAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.confctrlWatchAttendee(t);case 2:n=e.sent,n&&0===n.result?(z=t,J.info("actionWatch attendee success: "+handlePhoneNumber(t))):J.error("actionWatch attendee failed: "+handlePhoneNumber(t));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confEnded=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("confEnded, reason is ",t.param.reason),n=language.END_CONFERENCE,window.CLIENTCONFIG.ENABLE_IT_MEETING&&(r=window.pcLoginState())&&(n=language.PC_ONLINE_EXIST_CONFERNECE),In(constant.ONLINE_STATUS.ONLINE),H.closeConfPage(!1,!0,0,n),window.CLIENTCONFIG.ISMOBILE||(J.info("close conf windows while ended conf"),H.closeInConfWindows()),H.clearAfterConfEnd(!1,!0,t.param.reason);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),qe=function(e){var t="";switch(e){case 0:t="[In Conf]";break;case 1:t="[Inviting]";break;case 2:t="[Entering conf]";break;default:t="[Hang Up]"}return t},Je=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="";if(n&&(r=",CONFCTRL_E_EVT_ATTENDEE_LIST_UPDATE_IND"),t&&!isNaN(t.length)&&t.length>0)for(var a=0;a<t.length;a++)r=n?r+","+(t[a].name?t[a].name.length<=2?t[a].name.substr(0,1)+"**":t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):"")+",number:"+handlePhoneNumber(t[a].number)+",hand_state = "+t[a].hand_state+",is_broadcast = "+t[a].is_broadcast+",is_mute = "+t[a].is_mute+",media_type = "+t[a].media_type+",role = "+t[a].role+",state = "+t[a].state+qe(t[a].state)+",is_self = "+t[a].is_self+",is_same_grade_mcu = "+t[a].is_same_grade_mcu:r+","+(t[a].name?t[a].name.length<=2?t[a].name.substr(0,1)+"**":t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):"")+",number:"+t[a].number.substr(0,3)+"****"+t[a].number.substr(-3);J.info(e,r)},Ye=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.svcOnLineAttendances,r=2===t,$dispatch(coreUi.changeIsBigConf(r)),window.CLIENTCONFIG.ISMOBILE?(J.info("notifyIsBigConfToNative isBigConf = "+t),r&&!coreConf.isConfChairMan()&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,!1,"big-conf-toast"),window.notifyIsBigConfToNative(t)):(A.SvcAtdManager.handleAtdlist(n),window.CLIENTCONFIG.ISWIN?A.SvcAtdManager.alertBox("NATIVE_ENTER_ACTIVE_CONF",1):window.CLIENTCONFIG.ISMAC&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,null,!0));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a,o,i,s){var c,u,f,l,d,p,m,g,C,S,w;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.isInConf()){e.next=3;break}return J.info("handleAttendeeListUpdate not in conf, so return"),e.abrupt("return");case 3:if(c=$getState().conf.videoWatchNum,""!==c&&(u=!1,t.forEach(function(e){if(e.number===c)return u=!0,void(0!==e.state&&$dispatch(coreUi.changeVideoWatchNum("")))}),u||$dispatch(coreUi.changeVideoWatchNum(""))),J.info("service to attendee,isAllowUnmute is",o),$dispatch(coreUi.changeConfAllowUnmute(o)),f={isAllowUnmute:1===o},l=t&&t.filter(function(e){return 1!==e.role&&1===e.hand_state}),void 0===l&&(l=[]),d=t&&t.filter(function(e){return 1===e.is_self}),f=(0,h.default)(f,{hands_up_info:{count:l.length,name:l.length>0?l[0].name:""},self_hands_up_state:void 0===d[0]?0:d[0].hand_state}),coreConf.getSvcAtdManager().setParam(f),!window.isSupportiDo){e.next=19;break}return J.info("window.isSupportiDo"),e.next=17,Qe(t,n,r,a,o,i,s);case 17:e.next=21;break;case 19:J.info("window.isSupportiDo else "),ze(t,n,r,a,o);case 21:p=$getState().conf.isVideoConf,p||window.CLIENTCONFIG.ISMOBILE||D.ToolbarManager.setAudioConfTip(t),m=$getState().conf.selfNum,g=$getState().myInfo.bind_no,C=$getState().call.isMuteMic,S=$getState().conf.isConfMicMute,w=isNullOrEmpty(m)?g:m,J.info("cwp add isMuteMic： "+C+" isConfMicMute: "+S),C&&S!==C&&(J.info("handleAttendeeListUpdate mute Attendee isMuteMic： "+C+" isConfMicMute: "+S),S||pe(!0,w,!0));case 30:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),ze=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a,o){var i,s,c,u,f,l,d,p,h;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r&&Je("Rest handle AttendeeList Update logic",t),J.info("isAllMute = "+a),i=$getState().conf,s=i.isSvcConf,c=i.isAudience,!(!t||!c&&t.length<=0)){e.next=6;break}return J.error("memberlist is null"),e.abrupt("return");case 6:if(n&&(s&&window.CLIENTCONFIG.ISWIN&&$getState().conf.confSubject!==n&&A.SvcAtdManager.setSubject(n),$dispatch(coreUi.changeConfSubject(n)),k.setSubject(n)),(0,T.dealItShortNumber)(t),!r){e.next=15;break}t&&t.length>1&&t.sort(T.attendeeSortFunc),$dispatch(coreUi.changeMemberListInfo(t)),(0,T.calcMemberCount)(t),isNullOrEmpty($getState().conf.searchText)||yt($getState().conf.searchText,t),e.next=42;break;case 15:return $dispatch(coreUi.changeConfAllMute(a)),$dispatch(coreUi.changeConfAllowUnmute(o)),e.next=19,(0,T.dealWithMemberListDataRest)(t);case 19:if(u=e.sent,f=u.currentMemberList,l=$getState().conf.isSvcConf,!f||!(f.length>1||l&&f.length>0)){e.next=33;break}if(!l){e.next=32;break}if(d=Xe(f),!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN){e.next=30;break}return e.next=28,A.SvcAtdManager.handleSvcAtdList(d);case 28:e.next=32;break;case 30:return e.next=32,O.SvcAttendanceManager.handleSvcAttendancesUpdateEvent(d);case 32:f.sort(T.attendeeSortFunc);case 33:f=Sr(f),wr(f),br(f),Ir(f),_r(f),coreConf.updateConfMemberList(f),$dispatch(coreUi.changeMemberListInfo(f)),(0,T.calcMemberCount)(f),isNullOrEmpty($getState().conf.searchText)||yt($getState().conf.searchText,f);case 42:p=$getState(),h=p.conf.searchText,h&&(J.info("update search result: "),yt(h)),D.ToolbarManager.setChairmanState(t),D.ToolbarManager.setMuteStateInAvc(t),ue();case 47:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a,o,i,s){var c,u,f,l,d,p,h,m,g,C,S,w,_,I,b,E,y,x;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length<21&&!r&&Je("iDo handle AttendeeList Update logic",t),t=(0,T.unique)(t),J.info("isAllMute = "+a),c=$getState().conf,u=c.isAudience,f=c.isSvcConf,!(!t||!u&&t.length<=0)){e.next=7;break}return J.error("memberlist is null"),e.abrupt("return");case 7:if(n&&(f&&window.CLIENTCONFIG.ISWIN&&$getState().conf.confSubject!==n&&A.SvcAtdManager.setSubject(n),J.info("ido attendee list confSubject = "+n.substr(0,1)+"***"),$dispatch(coreUi.changeConfSubject(n)),k.setSubject(n)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(0,T.dealItShortNumber)(t),!r){e.next=18;break}if(t&&t.length>1&&t.sort(T.attendeeSortFunc),$dispatch(coreUi.changeMemberListInfo(t)),(0,T.calcMemberCount)(t),isNullOrEmpty($getState().conf.searchText)){e.next=16;break}return e.next=16,yt($getState().conf.searchText,t);case 16:e.next=76;break;case 18:return $dispatch(coreUi.changeConfAllMute(a)),$dispatch(coreUi.changeConfAllowUnmute(o)),e.next=22,(0,T.dealWithMemberListDataiDo)(t);case 22:if(l=e.sent,window.CLIENTCONFIG.ISWIN&&qn(),!l||!(l.length>1||f&&l.length>0)){e.next=38;break}if(!f){e.next=36;break}if(J.info("00000 run into SvcConf"),d=Xe(l),!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN){e.next=33;break}return e.next=31,A.SvcAtdManager.handleSvcAtdList(d);case 31:e.next=36;break;case 33:return e.next=35,O.SvcAttendanceManager.handleSvcAttendancesUpdateEvent(d);case 35:J.info("handleSvcAttendancesUpdateEvent end");case 36:l.sort(T.attendeeSortFunc),J.info("currentMemberList sort end");case 38:return e.next=40,coreAccount.getLoginModel();case 40:if(p=e.sent,!p.isSupportAS){e.next=65;break}if(1!==(h=$getState().conf.selfRole)){e.next=56;break}return m=s||0,g=i||0,(0,L.isShowReacrdTypeLogic)(m),(0,L.isReacrdLogic)(g,m),g&&(0,L.haveRecordedLogic)(1),C={isReacrd:g,recordType:m,isHaveRecordPriviledge:Bn(m)},e.next=52,N.NativeInterface.setParam(C);case 52:S=e.sent,J.info("setParam, res = ",S),e.next=65;break;case 56:if(0!==h){e.next=65;break}return(0,L.isShowReacrdTypeLogic)(s),(0,L.isReacrdLogic)(i,s),w={isReacrd:i,recordType:s},J.info("setParam, data.param.isReacrd = ",i),e.next=63,N.NativeInterface.setParam(w);case 63:_=e.sent,J.info("setParam, res = ",_);case 65:if(l=Sr(l),wr(l),br(l),Ir(l),_r(l),coreConf.updateConfMemberList(l),$dispatch(coreUi.changeMemberListInfo(l)),(0,T.calcMemberCount)(l),isNullOrEmpty($getState().conf.searchText)){e.next=76;break}return e.next=76,yt($getState().conf.searchText,l);case 76:if(!window.CLIENTCONFIG.ISWIN&&!window.CLIENTCONFIG.ISBIGWIN){e.next=83;break}return e.next=79,D.ToolbarManager.setChairmanState(t);case 79:return I=$getState().conf,b=I.isBigConf,E=I.svcViewMode,y=I.svcOnLineAttendances,b&&(x=y.length,A.SvcAtdManager.setPageNum(E,x,!0)),e.next=83,D.ToolbarManager.setMuteStateInAvc(t);case 83:ue();case 84:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),Ze=function(e,t){if(e.indexOf&&"function"==typeof e.indexOf){if(e.indexOf(t)>=0)return!0}return!1},Xe=function(e){var t=$getState().conf.svcOnLineAttendances;if(0===t.length)return e;for(var n=new Array,r=new Array,a=0;a<t.length;a++){for(var o=t[a],i=0;i<e.length;i++){var s=e[i];s.number!==o.number||5!==s.state||Ze(n,o.number)||r.push(s)}n.push(o.number)}for(var c=0;c<e.length;c++){var u=e[c];5===u.state&&n.indexOf(u.number)<0&&(r.push(u),n.push(u.number))}for(var f=0;f<e.length;f++){var l=e[f];n.indexOf(l.number)<0&&(r.push(l),n.push(l.number))}return r},et=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,T.dealWithConfSpeakerList)(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("add contact to group from conf: "+n),n){e.next=4;break}return J.warn("group uri is not exit"),e.abrupt("return");case 4:return e.next=6,coreGroup.getGroupInfoFromDB(n);case 6:if(!(r=e.sent)||r.group_type!==constant.GROUP_TYPE.DISCUSS_GROUP){e.next=20;break}J.info("discuss group, deal add"),a=0;case 10:if(!(a<t.length)){e.next=18;break}return o=t[a].account,i={groupType:constant.GROUP_TYPE.DISCUSS_GROUP,groupId:n,account:o,groupName:r.name,displayName:r.name},e.next=15,coreGroup.addGroupMemberService(i);case 15:a++,e.next=10;break;case 18:e.next=21;break;case 20:J.error("not discuss group");case 21:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),nt=(t.diableSpeakerIcon=function(e){for(var t=$getState(),n=t.conf.confSpeaker,r=0;r<n.speaker.length;r++)if(e===n.speaker[r].number){n.speaker[r].isToMuted=!0;break}$dispatch(coreUi.updateConfSpeaker(n))},t.toggleShowMemberList=function(e){if($getState().conf.isShowMemberList&&e)return void J.info("now is showMemberList status,return");$dispatch(coreUi.changeIsShowMemberList(e))},t.cancleConfMemberlistMessage=function(){$getState().conf.showqusetchairman&&$dispatch(coreUi.showqusetchairman());var e=$getState().conf.showRepChairmanError;e&&(J.info("showRepChairmanErrorbool",e),$dispatch(coreUi.showRepChairmanError()))}),rt=(t.handleShowMemberList=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n=$getState(),r=n.conf.isShowMemberListNew;if(e){var a=e.x,o=e.y,i=e.w,s=e.h,c=e.isMove;$dispatch(coreUi.changeMemberListPosition(a,o,i,s)),$dispatch(coreUi.changeMemberListIsMove(c))}if($dispatch(coreUi.changeIsShowMemberListNew()),r){nt();var u={conf_member_list_off:1};N.NativeInterface.setParam(u)}if(t){var f={conf_member_list_off:0};N.NativeInterface.setParam(f)}},t.handleShowAudioSetting=function(e){e&&(J.info("change meeting frame center point position"),$dispatch(coreUi.changeMeetingFrameCenterPoint(e)))},t.toggleShowConfInfoCard=function(e){$dispatch(coreUi.changeIsShowConfInfo(e))},t.updateMemberStateInfo=function(e){J.info("寻呼AttendeeList updateMemberStateInfo"),$dispatch(coreUi.changeMemberStateInfo(e))}),at=t.updateconfRecallList=function(e){$dispatch(coreUi.changeconfRecallList(e))},ot=t.updateconfMsglList=function(e){$dispatch(coreUi.changeconfMsglList(e))},it=t.handleBroadcaseResult=function(e){0===e.param.operation_rsp_reason?coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,resultParams:[1]}):coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,resultParams:[0,e.param.operation_rsp_reason]});var t=$getState().conf.isBroadByChairman,n=void 0;n=t?language.BROADCAST_SUCCEED:language.CANCEL_BROADCAST_SUCCEED,J.info("handleBroadcaseResult ----\x3e "+e.param.operation_rsp_reason);var r=[n,language.BROADCAST_FAILED_FF,language.BROADCAST_FAILED_2,language.BROADCAST_FAILED_3,language.BROADCAST_FAILED_4,language.BROADCAST_FAILED_5,language.BROADCAST_FAILED_6,language.BROADCAST_FAILED_7,language.BROADCAST_FAILED_8,language.BROADCAST_FAILED_9,language.BROADCAST_FAILED_10,language.BROADCAST_FAILED_11,language.BROADCAST_FAILED_12,language.BROADCAST_FAILED_FF],a=r[e.param.operation_rsp_reason]||r[r.length-1];if(window.CLIENTCONFIG.ISMOBILE)window.Toast(a,3,!1,"request-chairman-toast-reset");else if(window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf){var o=$getState().conf.videoFrameHwnd,i=k.getAvcFrameHandles(),s={frameHwnd:0!==o?o:i,dialog_type:2,content:a};(0,E.showMessageBox)(s)}else setTimeout(function(){window.Toast(a,2,!1,"pcToast","")},3e3)},st=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("onMultiViewBroadcast"),A.SvcAtdManager.handleMultiViewBroadcast(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ct=function(){J.info("registerConfEvent, Observer subscribe topics"),window.addEventListener("sipRegisterSuc",wn),window.addEventListener("CloudLinkoffline",_n);var e=new coreCommon.ObserverOpts("MODULE_CONFERENCE_START_END");coreCommon.Observer.subscribe("ConfConnected",de,e),coreCommon.Observer.subscribe("ConfEnded",je,e),coreCommon.Observer.subscribe("ConfInfoNotify",fe,e),coreCommon.Observer.subscribe("IsBroadcastLocal",Ee),coreCommon.Observer.subscribe("MuteAttendeeResult",he),coreCommon.Observer.subscribe("lockResult",ge),coreCommon.Observer.subscribe("lockState",Ce),coreCommon.Observer.subscribe("handupResult",me),coreCommon.Observer.subscribe("ConfIncoming",Ve),coreCommon.Observer.subscribe("HandleSvcConfWatchRet",En),coreCommon.Observer.subscribe("handleVideoWatchRes",yn),coreCommon.Observer.subscribe("BroadcaseResult",it),coreCommon.Observer.subscribe("onMultiViewBroadcast",st),coreCommon.Observer.subscribe("hangupResult",ve);var t=new coreCommon.ObserverOpts("MODULE_CONFERENCE");return t.setQueueParams({delay:0,timeoutMs:5e3}),coreCommon.Observer.subscribe("AttendeeListUpdate",Ke,t),coreCommon.Observer.subscribe("BigConfInfoNotify",Ye),coreCommon.Observer.subscribe("AutocallMobile",ft),coreCommon.Observer.subscribe("ConfSpeakerNotify",et),coreCommon.Observer.subscribe("AddToGroupFromConf",tt),coreCommon.Observer.subscribe("ExceedGroupMemNum",Et),coreCommon.Observer.subscribe("TransToConfResult",At),coreCommon.Observer.subscribe("VMRConfResult",Dt),coreCommon.Observer.subscribe("ConfMTnumber",Xt),coreCommon.Observer.subscribe("SpeakerReport",_t),coreCommon.Observer.subscribe("UportalTokenErr",vt),coreCommon.Observer.subscribe("NonChairCtrlcaps",mt),coreCommon.Observer.subscribe("smcEnterDataConf",gt),coreCommon.Observer.subscribe("ReleaseChairmanResult",Oe),coreCommon.Observer.subscribe("ReqChairmanResult",xe),coreCommon.Observer.subscribe("GetDataPostponeConf",St),coreCommon.Observer.subscribe("EnterPwdToChairmanResult",Me),coreCommon.Observer.subscribe("inviteAttendeeResult",On),coreCommon.Observer.subscribe("transferChairman",rn),coreCommon.Observer.subscribe("callAttendeeResult",an),coreCommon.Observer.subscribe("OnMeetingHWreCallTimeOut",bn),coreCommon.Observer.subscribe("ReqChangeNickNameResult",Fe),coreCommon.Observer.subscribe("AudientResult",Dn),coreCommon.Observer.subscribe("ChangeDirectionResult",Pn),coreCommon.Observer.subscribe("setRecordVideoResult",Hn),coreCommon.Observer.subscribe("recordVideoResult",$n),coreCommon.Observer.subscribe("confStateDirectBroadCastIndresult",Gn),coreCommon.Observer.subscribe("recordVideoStatusChairmanIndResult",jn),coreCommon.Observer.subscribe("changeConfHanlde",zn),coreCommon.Observer.subscribe("changeConfSubject",Qn),coreCommon.Observer.subscribe("changeCallId",Zn),coreCommon.Observer.subscribe("changeConfRole",Xn),coreCommon.Observer.subscribe("changeConfServerId",er),coreCommon.Observer.subscribe("changeVmrId",tr),coreCommon.Observer.subscribe("changeIsSvcConf",nr,e),coreCommon.Observer.subscribe("changeSsrcRange",rr),coreCommon.Observer.subscribe("changeGroupUri",Q),coreCommon.Observer.subscribe("changeVmrInfoResult",Or),coreCommon.Observer.subscribe("confInfoNotifyIsNotVideoConf",ar),coreCommon.Observer.subscribe("CallEndedInConf",ir,e),coreCommon.Observer.subscribe("SvcSessionModify",le,e),Lt.wait(),coreCommon.ATOMIC_ACTION_RESULT.SUCCESS},ut=t.registerConfEventAtomic=new coreCommon.AtomicAction("registerConfEvent",ct),ft=t.AutocallMobile=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,m;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().call,r=n.callStatus,a=n.showCallToolBar,a&&""!==r){e.next=3;break}return e.abrupt("return");case 3:o=[],t.participants=lt(t.participants),i=0;case 6:if(!(i<t.participants.length)){e.next=25;break}if(s=t.participants[i],c=K.test(s.number),u=!1,s.state===s.oldState||c||!0===s.hasCallMobile||1===s.state){e.next=21;break}if(f=$getState().conf.confMsglList,s.hasCallMobile){e.next=19;break}return J.info("寻呼AttendeeList state="+s.state+",oldState="+s.oldState+",hasCallMobile="+s.hasCallMobile+",callnum="+handlePhoneNumber(s.number)+",hasTipMsg="+s.hasTipMsg),e.next=16,(0,T.searchContact)(s.number,s.name);case 16:if(l=e.sent,s.hasCallMobile=!0,l.length>0&&(d=l[0],p=ht(d),p.length>0))for(h=0;h<p.length;h++)m=$getState().conf.confRecallList,"mobile"===p[h].name&&m.indexOf(p[h].num)<0&&(d.number=p[h].num,u=!0,o.push(d),m=m+","+d.number,J.info("寻呼AttendeeList number=",handlePhoneNumber(d.number)),at(m),dt(s.name,s.state,c,u),f=f+","+s.number);case 19:f.indexOf(s.number)<0&&(dt(s.name,s.state,c,u),f=f+","+s.number),ot(f);case 21:s.oldState=s.state;case 22:i++,e.next=6;break;case 25:return e.next=27,rt(t.participants);case 27:return e.next=29,coreConf.addAttendee(o);case 29:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),lt=t.handlepPrticipantsList=function(e){for(var t=$getState().conf.memberStateInfo,n=0;n<e.length;n++)if(t.length>0)for(var r=0;r<t.length;r++){t[r];e[n].participant_id===t[r].participant_id&&(isNullOrEmpty(t[r].oldState)?e[n].oldState=-1:(e[n].oldState=t[r].oldState,e[n].hasCallMobile=t[r].hasCallMobile))}for(var a=0;a<e.length;a++)(K.test(e[a].number)||0===e[a].state||2===e[a].state||3===e[a].state||4===e[a].state||7===e[a].state)&&(e[a].hasCallMobile=!0);return rt(e),e},dt=function(e,t,n,r){t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER?!n&&r?pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!0):n?n&&pt(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!1):pt(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!1):t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED?!n&&r?pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!0):n?n&&pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!1):pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!1):t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_REJECT||t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_EXIST||t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY&&(!n&&r?pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!0):n?n&&pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!1):pt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!1))},pt=t.setMsg=function(e,t,n){var r="";if(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_EXIST===t?r=language.CONF_PART_STATUS_NO_EXIST:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY===t?r=language.CONF_PART_STATUS_BUSY:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER===t?r=language.CONF_PART_STATUS_NO_ANSWER:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_REJECT===t?r=language.CONF_PART_STATUS_REJECT:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED===t&&(r=language.CONF_PART_STATUS_CALL_FAILED.format(e)),n&&(r=r+", "+language.CALL_Mobile),""!==r){var a=$getState().call,o=a.callStatus;(a.showCallToolBar||"VIDEO_OUT"===o||"CALL_OUT"===o||"VIDEO_CONNECTED"===o||"CALL_CONNECTED"===o||"VIDEO_TRANSTO_CONF"===o||"CALL_TRANSTO_CONF"===o)&&(window.CLIENTCONFIG.ISMOBILE?window.ToastNew(r,2):coreUi.showConfTips(e,constant.CONF_MSG_TYPE.TYPE_OTHER_STATE,r))}},ht=t.checkUsersMobile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.CALL_CONST.CALL_NUM_LIST,n=[];return t.forEach(function(t){if(e[t]&&K.test(e[t])){var r={name:t,num:e[t]};n.push(r)}}),n},mt=t.handleNonChairCtrlcaps=function(e){J.info("handle Non Chair Ctrlcaps");var t=!e.param.nonchair_cap.event_type[5];J.info("showMuteStatus: "+t),$getState().conf.showMuteStatus!==t&&$dispatch(coreUi.changeShowMuteStatus(t))},vt=t.handleUportalTokenErr=function(e){J.info("handleUportal[Token]Err = "+(0,f.default)(e)),$getState().login.sipLoginOnly||!e||!e.param||e.param.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED&&e.param.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR||coreAccount.actionRefreshToken()},gt=t.handleSmcEnterDataConf=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("handleSmcEnterDataConf,conf[key] length = "+t.confKey.length),n={},n.conf_uri="https://"+$getState().login.smcUri,n.passcode=t.confKey,n.getParamType=1,n.media_type=t.mediaType,t.confToken&&""!==t.confToken&&"0"!==t.confToken?n.sip_num=t.confToken:n.sip_num=$getState().login.sipImpi,e.next=9,coreConf.joinDataConf(n,t.confCallId);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ct=function(e){return(Math.floor(e/60)?Math.floor(e/60)+language.HOUR:"")+(e%60?e%60+language.MINUTE:"")},St=t.handleGetDataPostponeConf=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{J.info("handleGetDataPostponeConf"),t&&t.param?(n=t.param,r=n.ret,a=$getState().conf,o=a.pastponeTime,i=a.isVideoConf,r===constant.MEDIA_X_ERROR_CODE.success?(J.info("userClick  handleGetDataPostponeConf "+language.MEETING_WILL_ENTENT.format(Ct(o))),window.CLIENTCONFIG.ISWIN?A.SvcAtdManager.alertBox(language.MEETING_WILL_ENTENT.format(Ct(o)),3):window.ToastNew(language.MEETING_WILL_ENTENT.format(Ct(o)),2),Mt()):(r===constant.MEDIA_X_ERROR_CODE.conference_time_out_max_time?window.CLIENTCONFIG.ISWIN&&i?A.SvcAtdManager.alertBox(language.MEETING_TIME_OUT_OF_MAX,3):window.ToastNew(language.MEETING_TIME_OUT_OF_MAX,2):window.CLIENTCONFIG.ISWIN&&i?A.SvcAtdManager.alertBox(language.PROLONGING_THE_FAILURE_OF_MEETING,3):window.ToastNew(language.PROLONGING_THE_FAILURE_OF_MEETING,2),J.error("handleGetDataPostponeConf 错误码："+t.param.ret,constant.MEDIA_X_ERROR_INFO[t.param.ret],o))):J.error("handleGetDataPostponeConf 结果异常")}catch(e){J.error("handleGetDataPostponeConf",e.toString())}case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),wt=(t.UportalTokenErr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=$getState().call,n=t.callStatus;if(!e&&(t.showCallToolBar||"VIDEO_OUT"===n||"CALL_OUT"===n||"VIDEO_CONNECTED"===n||"CALL_CONNECTED"===n||"VIDEO_TRANSTO_CONF"===n||"CALL_TRANSTO_CONF"===n))return J.info("UportalTokenErr,delay"),void coreAccount.getLoginModel().then(function(e){e.appstate===constant.APP_STATE.ONLINE&&$dispatch(coreUi.changeuportalTokenErr(!0))});J.info("UportalTokenErr"),wt()},t.UportalTokenErrAndLogout=function(){J.info("UportalTokenErrAndLogout"),coreAccount.getLoginModel().then(function(e){e.appstate===constant.APP_STATE.ONLINE&&(e.isResume&&(coreAccount.clearResumeService(),coreAccount.stopResume("UportalTokenErrAndLogout")),coreAccount.checkAndEndCall().then(function(){coreAccount.setOffline({}),window.endCallPromise&&(window.endCallPromise=null)}).then(function(){window.getRoute()&&!appService.isLoginPage()&&"login/joinConfSIPOnly"!==window.getRoute()&&"loginCtn"!==window.getRoute()&&alert(language.RENEW_EXPIRED_REMINDER).then(function(){coreAccount.logout({}).then(function(){Y&&clearTimeout(Y),Y=null,window.isRepeateCall=!1,J.info("logout success",window.isRepeateCall)})})}))})},t.setUportalTokenRefreshTimer=function(e){Y&&clearTimeout(Y),Y=setTimeout(function(){J.info("timeout not respond allows refresh again",e),window.isRepeateCall=!1},e)},t.endCallAndLogout=function(){coreAccount.checkAndEndCall().then(function(){$getState().login.sipLoginOnly||coreAccount.resume({message:"endCallAndLogout"})})}),_t=t.handleSpeakerReport=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("handleSpeakerReport",t.param.result);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),It=(t.unregisterConfEvent=function(){J.info(" execute unregisterConfEvent "),window.removeEventListener("sipRegisterSuc",wn),window.removeEventListener("CloudLinkoffline",_n)},function(){var e=(new Date).getTime();return e=parseInt(e/1e3),J.info("call start time =",e),$dispatch(coreUi.changetime(e)),e}),bt=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a={};if(r.item&&r.itemType&&"charItem"===r.itemType)a={account:"",name:r.item.displayName,mobile:Nt(r.item.number),number:Nt(r.item.number),email:r.item.email,bind_no:"",home_phone:"",office_phone:"",short_phone:"",other_phone:"",other_phone2:"",voip:"",ip_phone:"",q_pin_yin:r.item.pinyin,type:constant.ATTENDEE_TYPE.ATTENDEE_TYPE_OUTSIDE};else if(r.numberInfo)a={account:r.account,name:r.name,bind_no:r.numberInfo.bind_no.number,mobile:r.numberInfo.mobile.number,home_phone:r.numberInfo.home_phone.number,office_phone:r.numberInfo.office_phone.number,office_phone2:r.officephone2,short_phone:r.numberInfo.short_phone.number,other_phone:r.numberInfo.other_phone.number,other_phone2:r.numberInfo.other_phone2.number,voip:r.numberInfo.voip.number,ip_phone:r.numberInfo.ip_phone.number,number:r.number,email:r.email,q_pin_yin:r.qPinyin,type:isNullOrEmpty(r.officephone2)?constant.ATTENDEE_TYPE.ATTENDEE_TYPE_NORMAL:constant.ATTENDEE_TYPE.ATTENDEE_TYPE_TERMINAL},isNullOrEmpty(r.officephone2)?isNullOrEmpty(a.bind_no)||a.bind_no!==a.number?isNullOrEmpty(a.bind_no)||a.mobile!==a.number?a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_OUTSIDE:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_MOBILE:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_NORMAL:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_TERMINAL;else{var o=r.isFromDepartmentTree,i=r.callSelectInfo,s=void 0;if(o){var c=JSON.parse(i);s=r[c.selectType]}a={name:r.name,number:o?s:r.number}}t.push(a)}return t},Nt=function(e){var t="";return t=0===e.indexOf("+86")?e.substring(3,e.length):e,t.replace(/[^0-9]/gi,"")},Et=function(){J.warn("member number exceeds 100, can not add to group"),alert(language.CONFERENCE_ADDMEM_EXCEED_GROUP.format("100"))},yt=t.searchMemberList=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.conf.memberListInfo,a=(0,h.default)([],r),""!==f&&(a=(0,h.default)([],f)),""!==t.replace(/\s+/g,"")){e.next=7;break}return J.info("the first input can not enter a space"),$dispatch(coreUi.changeSearchText("")),e.abrupt("return");case 7:for(o=["name","q_pin_yin","number"],i=[],s=[],c=0;c<a.length;c++)u="",u=""===a[c].userInfo.q_pin_yin||null===a[c].userInfo.q_pin_yin||void 0===a[c].userInfo.q_pin_yin?window.pinyinUtil.getPinyin(a[c].userInfo.name.trim()):a[c].userInfo.q_pin_yin,i.push((0,h.default)({},a[c],{name:a[c].userInfo.name,q_pin_yin:u}));coreSearch.filterMatch({searchList:i,key:t,matchItem:o}).map(function(e){s.push(e.object)}),J.info("search conf member, result=",s.length),$dispatch(coreUi.changeSearchText(t)),$dispatch(coreUi.changeSearchMemberList(s));case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Tt=(t.toggleConfOtherNumber=function(e){$dispatch(coreUi.changeConfOtherNumber(e))},t.handleShowEndConf=function(e){$dispatch(coreUi.changeShowEndConf(e)),J.info("handleShowEndConf",e)},t.upgrade2DataConfOrStartShare=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==coreConf.isNeedUpdate2DataConf()){e.next=5;break}return e.next=3,Tt();case 3:e.next=7;break;case 5:return e.next=7,coreConf.startShareScreen();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.upgradeAudioConf2Data=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(t=coreConf.isInConf())){e.next=9;break}return J.info("upgradeAudioConf2Data, isInfConf = true"),$dispatch(coreUi.hideDataShareButton(!0)),!1===coreConf.isConfChairMan()&&(J.error("not chairman，can not upgrade conf"),n=$getState().conf.videoFrameHwnd,r=k.getAvcFrameHandles(),window.CLIENTCONFIG.ISWIN&&(a={frameHwnd:0!==n?n:r,dialog_type:1,content_id:"ATTENDEE_UPGRADE_DATA_NOTIFY"},(0,E.showMessageBox)(a))),e.next=7,coreConf.upgradeConf();case 7:e.next=11;break;case 9:return e.next=11,Ot(constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,!1,[],!0);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Ot=t.p2pTransToConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,m,g,C,S,w,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,I=arguments[1],b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],N=arguments[3];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("deal p2p trans to conf, add size: "),t=$getState(),n=t.myInfo,r=t.call,a=r.callId,o=r.callNum,i=r.userInfo,s=$getState(),c=void 0,c=s.selectBox.selectBox_tempSelectedList,se(c)){e.next=6;break}return e.abrupt("return");case 6:if(J.info("deal p2p trans to conf, callStatus: "+$getState().call.callStatus),"VIDEO_CONNECTED"===$getState().call.callStatus&&(J.info("video call trans to conf"),_|=constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),ie()&&(_|=constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),J.info("p2pTransToConf CreateDataConferenceFlag:"+ie()+",mediatype:"+_),coreUi.hideModal(),u=bt(c),!1===I&&(u.length=0),f=void 0,f=window.CLIENTCONFIG.ENABLE_IT_MEETING?xt(b,n,i,o):xt(u,n,i,o),f.length>=1){e.next=18;break}return J.error("add member list is null"),e.abrupt("return");case 18:return J.info("p2p trans to conf, member list count is "+f.length),e.next=21,G.p2pTransToConfCreateGroup(u,n,i,o);case 21:return l=e.sent,d=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,p=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,m={callId:a,memberList:f,confSubject:n.name+language.CONFERENCE_SUBJECT_INFO,groupUri:l,isMultiStream:"VIDEO_CONNECTED"===$getState().call.callStatus?d:0,mediaType:_,userType:2,compereNumber:n.bind_no,selfNumber:n.bind_no,selfInfo:(0,h.default)({},n),userInfo:(0,h.default)({},i,{number:o}),noPassword:p,isAutoScreenShare:void 0!==N&&N},g=(_&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)===constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,H.callToConfStart(g),J.info("p2pTransToConf isMultiStreamValue: "+d),e.next=30,coreConf.p2pTransferConf(m);case 30:C=e.sent,S=C.errorCode,0===S?Mt():(J.error("create conf failed"),w=q.getCreateConfFailTitle(S),H.callToConfFail(w),7===S&&(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():ce(S)));case 33:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),At=function(e){0!==e.param.ret?J.error("failed to trans to conf"):(coreCall.changeCallHoldStatusLogic(!1),coreCall.setTransferFlagHandle(!1,"handleTransToConfResult"),J.info("successed to trans to conf, handle: ",e.param.handle))},xt=function(e,t,n,r){for(var a=[],o=0;o<e.length;o++)e[o].number!==t.bind_no&&e[o].number!==r&&a.push((0,h.default)({},e[o]));return a.push((0,h.default)({},t,{number:t.bind_no})),n.name?a.push((0,h.default)({},n,{number:r})):a.push((0,h.default)({},n,{number:r,name:r})),a},kt=t.getConfInfo=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={page_index:1,page_size:100},e.next=3,Lt.wait();case 3:return r.sub_conf_id=n,r.conf_id=t,e.next=7,coreConf.getConfInfoService(r);case 7:J.info("getConfInfo . confId =",t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),Mt=(t.transferChairman=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().conf.confHandle,r={confHandle:n,attendeeInfo:t},e.next=4,coreConf.transferChairmanService(r);case 4:J.info("transferChairman . attendeeInfo =",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionExportConfmember=function(){J.info("userClick export member list btn");var e=void 0;e=coreConf.getConfMemberListContent(),window.LOG_PATH,appService.writeFile(window.LOG_PATH,"tempFile.txt",e).then(function(e){appService.openFileOrFolder(e)},function(e){J.info("write failed:"+e)})},t.changeconfListInfo=function(e){$dispatch(coreUi.changeconfList(e))},t.getConfList=function(){var e=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.pcLoginState()){e.next=3;break}if(!window.isOffline){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,coreAccount.getLoginModel();case 5:if(t=e.sent,!t.isSupportAS){e.next=9;break}return J.info("new conf as is not supported get confList"),e.abrupt("return");case 9:return J.info("get_conf_list"),e.next=12,Lt.wait();case 12:return e.next=14,coreConf.getConfListService();case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Rt=t.subScribeConfListAndInfoRes=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("subscribe getConfList ,getConfInfo,cancelConf res"),e.next=3,coreAccount.getLoginModel();case 3:return t=e.sent,n=t.isSupportAS,J.info("confctrlInit getConfList or subscribeConfList, isSupportAS = "+n),coreCommon.Observer.subscribe("ConfList",Vt),coreCommon.Observer.subscribe("ConfInfo",en),coreCommon.Observer.subscribe("cancelConf",hr),coreCommon.Observer.subscribe("UportalBookConfResult",X),n?coreConf.subscribeConfList():Mt(),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Lt=t.subScribeConfListAndInfoResAtomic=new coreCommon.AtomicAction("subScribeConfListAndInfoRes",Rt),Dt=t.handleVMRConfResult=function(e){var t=$getState().conf;t.curCreateConfIDItem;if(J.info("subscribe VMR Conf Result",e.result),0===e.result){var n=e.vmr_info.conference_right,r={key:"vmrInfo",value:(0,f.default)(e.vmr_info)};if(coreDb.saveUserConfig(r),0===n?$dispatch(coreUi.toggleConfRight(!1)):$dispatch(coreUi.toggleConfRight(!0)),J.info("conf right",n),$dispatch(coreUi.changeVMRResultcount(0)),""===e.vmr_info.conf_id&&0===e.vmr_info.spec_vmr_num)return $dispatch(coreUi.changehasVMRConfResult("NONE")),void $dispatch(coreUi.changeShowVMRorNot(!1));$dispatch(coreUi.changeShowVMRorNot(!0)),$dispatch(coreUi.changeVMRConfResult(e.vmr_info)),xr(e.vmr_info),Ar(e.vmr_info)}else t.vmrResultcount<5&&t.showvmrornot?$dispatch(coreUi.changeVMRResultcount(t.vmrResultcount+1)):$dispatch(coreUi.changeVMRResultcount(0)),$dispatch(coreUi.changehasVMRConfResult("FAILED"))},Pt=(t.handleNotShowGeneralPas=function(e){$dispatch(coreUi.changeNotShowGeneralPas(e)),J.info("changeNotShowGeneralPas = ",e)},t.handleNotShowChairPas=function(e){$dispatch(coreUi.changeNotShowChairPas(e)),J.info("changeNotShowChairPas = ",e)},t.handleIsConfPwdInputShow=function(e){$dispatch(coreUi.changeIsConfPwdInputShow(e)),J.info("changeIsConf[Pwd]InputShow = ",e)},t.handleIsShowJoinButton=function(e){J.info("changeIsShowJoinButton = "+e),$dispatch(coreUi.changeIsShowJoinButton(e))}),Ft=t.createTempMeetingOfAddMember=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("createTempMeetingOfAddMember add participants"),t=$getState(),n=t.selectBox.selectBox_saveSelectedList,r=t.selectBox.selectBox_tempSelectedList,a=t.selectBox.selectBox_savePhoneSelectedList,0!==a.length&&(a=Ut(a,n),r=r.concat(a)),$dispatch(coreUi.setSaveSelectedList(n.concat(r)));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Ut=t.filterDuplicateData=function(e,t){return e.filter(function(e){return-1===t.findIndex(function(t){return t.itemType&&"charItem"===t.itemType&&t.item.displayName===e.item.displayName&&t.item.id===e.item.id&&t.item.numberName===e.item.numberName&&t.item.number===e.item.number})})},Bt=(t.deleteClickParticipants=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("userClick  deleteClickParticipants delete participants"),n=$getState(),r=n.selectBox.selectBox_saveSelectedList,a=t.item&&t.itemType&&"charItem"===t.itemType,o=[],o=a?r.filter(function(e){return!e.item||e.item.id!==t.item.id&&e.item.displayName!==t.item.displayName}):r.filter(function(e){if(e.item)return!0;if(isNullOrEmpty(t.account))return e.number!==t.number||e.account!==t.account;if(t.account===e.account&&t.isFromDepartmentTree&&e.isFromDepartmentTree){var n=JSON.parse(e.callSelectInfo);return JSON.parse(t.callSelectInfo).selectType!==n.selectType}return e.number!==t.number}),i=n.common.groupName,s=n.myInfo,$dispatch(coreUi.setSaveSelectedList(o)),coreUi.hideModal();case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.selfInfo&&t.selfInfo.account)){e.next=8;break}return e.next=4,window.getContactFromNet(n);case 4:return r=e.sent,e.abrupt("return",r);case 8:J.info("createConf cannot have selfInfo account");case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Wt=(t.createAMeeting=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=6;break}return e.next=4,Bt(t);case 4:r=e.sent,isNullOrEmpty(r)||(r.name&&(t.selfInfo.name=r.name),a=$getState(),o=a.myInfo,r.mobileCodeAll&&(i=r.mobileCodeAll.replaceAll("+86-",""),o.mobile=i,t.selfInfo.mobile=i),$dispatch(coreUi.updateMyInfo((0,w.default)({},o))));case 6:(0,h.default)(n,t.selfInfo),s=bt(t.memberList),s.push(n),c=Nn(s),u=$getState().conf.isCreateMeetingPassword?0:1,oe(t.selfInfo,c,{group_id:""},t.mediaType,u,!0,t.confSubject,t.type,t.recordType,t.vmrConfId),coreUi.hideModal();case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createAMeetingFromHis=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},(0,h.default)(n,t),r=$getState().myInfo,window.CLIENTCONFIG.ENABLE_IT_MEETING&&r&&r.short_phone&&(J.info("debug info replace bind_no with short_phone"),r.bind_no=r.short_phone),a=n.memberList,a.push(r),o=Nn(a),i=isNullOrEmpty(n.general_pwd)?1:0,oe(n.selfInfo,o,{group_id:""},n.mediaType,i,!0,n.confSubject,n.type,n.recordType),coreUi.hideModal();case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createTempTypeMeeting=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("create  instant conference"),n=$getState(),r=void 0,r=bt(n.selectBox.selectBox_saveSelectedList),a=n.common.groupName,o=n.myInfo,r.push(o),i=Nn(r),s=n.conf.isCreateMeetingPassword?0:1,oe(o,i,{group_id:""},t.mediaType,s,!0,t.confSubject,t.type,t.recordType,t.vmrConfId),coreUi.hideModal();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createConfFromHistory=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n,a=$getState().myInfo,r.push(a),o=Nn(r),i=isNullOrEmpty(t.general_pwd)?1:0,s=7,oe(a,o,{group_id:""},t.media_type,i,!0,t.conf_subject,s,0),coreUi.hideModal();case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.initCreateMettingContent=function(){$dispatch(coreUi.meetingTypeValue(0))}),Vt=(t.judgeCreateNewConf=function(){if(coreCall.getCallCount()>0)return J.error("already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);Wt(),$dispatch(coreUi.changeCreatNewConfName("")),window.goRoute("ConCreateMeeting")},t.saveMettingTypeValue=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.meetingTypeValue(t));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfList=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,l,p,h,m,g,C,S,w;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.update_type,J.info("push conference list ,updateType",n),0===t.result){e.next=5;break}return J.info("subscribe conference list failed.result != 0"),e.abrupt("return");case 5:if(t.conf_list_info&&t.conf_list_info.length>0&&$dispatch(coreUi.changeConfPageShowType(!0)),0!==n&&void 0!==n){e.next=34;break}if(J.info("get_conf_list result ="+t.result+"length="+t.conf_count),r=$getState().conf.conflist,!(t.conf_count>0)){e.next=23;break}if((0,f.default)(r)!==(0,f.default)(t.conf_list_info)){e.next=12;break}return e.abrupt("return");case 12:for(a=[],o=$getState().conf.currentConfInfo,i=0;i<t.conf_list_info.length;i++)s=t.conf_list_info[i].start_time,t.conf_list_info[i].start_time=Ht(s),c=t.conf_list_info[i].end_time,t.conf_list_info[i].end_time=Ht(c),a.push(t.conf_list_info[i].conf_id);u=window.getRoute(),-1===a.indexOf(o.conf_id)&&(J.info("Conf:ID"+o.conf_id+" is over"),!window.CLIENTCONFIG.ISMOBILE&&$getState().conf.isShowPcConfInfo&&$dispatch(coreUi.changeShowPcConfInfoFlag(!1)),window.CLIENTCONFIG.ISMOBILE&&"mConferenceInfo"===u&&window.goRoute("main/conference")),t.conf_list_info.sort(Jt),$dispatch(coreUi.changeconfList(t.conf_list_info)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&$t(t.conf_list_info),Cr(),e.next=32;break;case 23:if(0!==t.conf_count){e.next=32;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&$t(t.conf_list_info),!isNullOrEmpty(r)){e.next=27;break}return e.abrupt("return");case 27:"Detail"===$getState().conf.curConfPage&&vn("Main"),$dispatch(coreUi.changeconfList([])),$dispatch(coreUi.changecurrentConfInfo([])),Cr(),J.info("subscribe conference list result.result = 0");case 32:e.next=48;break;case 34:J.info("get conf list add"+t.result+"length="+t.conf_count),l=$getState(),p=l.conf.conflist,h=[].concat((0,d.default)(p)),m=t.conf_list_info[0],g=Ht(m.start_time),C=Ht(m.end_time),m.start_time=g,m.end_time=C,S=m.conf_id,w=h.findIndex(function(e){return e.conf_id===S}),1===n?(-1===w?h.push(m):(h.splice(w,1),h.push(m)),h.sort(Jt)):2===n&&-1!==w&&h.splice(w,1),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&$t(h),$dispatch(coreUi.changeconfList(h)),Cr();case 48:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Ht=t.getConfTimedec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e.replace(/-/g,"/")),n=t.getTime(),r=6e4*t.getTimezoneOffset(),a=new Date(n-r).format("yyyy/MM/dd hh:mm");return J.info("timeResult",a),a},$t=(function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.conflist;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<a.length)){e.next=11;break}return n={account:a[t].scheduser_name},e.next=5,Qt(n);case 5:r=e.sent,J.info("searchContactByInfo success"),!1!==r&&(a[t].name=r[0].name,a[t].native_name=r[0].native_name);case 8:t++,e.next=1;break;case 11:$dispatch(coreUi.changeconfList(a));case 12:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,p,m,g,C,S,w,_,I,b,N,E,y,T;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.queryConfReady,r=$getState().conf.isEnableHistoryConfList,J.info("enableHistory in update history conf list",r),r){e.next=5;break}return e.abrupt("return");case 5:n||(J.info("querying db conf record"),$dispatch(coreUi.changeTempConfList(t))),a=$getState().conf.allConfList,o=a.filter(function(e){return!e.isInPast}),i=a.filter(function(e){return e.isInPast}),s=[],(0,h.default)(s,o),u=(0,h.default)({},t),f=0,l=0,d=25,J.info("update all conf list"),p=0;case 17:if(!(p<s.length)){e.next=50;break}s[p].isInPast=!0,e.t0=v.default.keys(u);case 20:if((e.t1=e.t0()).done){e.next=32;break}if(m=e.t1.value,!u[m]||u[m].conf_id!==s[p].conf_id){e.next=30;break}if(s[p].isInPast=!1,!Gt({oldconf:s[p],newconf:u[m]})){e.next=28;break}return jt({oldconf:s[p],newconf:u[m]}),e.next=28,Yt(s[p]);case 28:return u[m]=null,e.abrupt("break",32);case 30:e.next=20;break;case 32:if(!(!0===s[p].isInPast&&new Date(s[p].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=47;break}return e.next=35,Yt(s[p]);case 35:J.info("save conf record when conference end"),g=$getState().conf.allConfInfo,C=void 0,S=0;case 39:if(!(S<g.length)){e.next=46;break}if(g[S].conf_id!==s[p].conf_id){e.next=43;break}return C=g[S].confInfo,e.abrupt("break",46);case 43:S++,e.next=39;break;case 46:C&&C.conf_list_info&&C.conf_list_info.guest_join_uri&&(C.conf_list_info.guest_join_uri="",gr(C.conf_list_info,C.attendee));case 47:p++,e.next=17;break;case 50:w=[],_=0;case 52:if(!(_<s.length)){e.next=64;break}if(!(!1===s[_].isInPast||new Date(s[_].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=57;break}w.push(s[_]),e.next=61;break;case 57:return I={},I.confid=s[_].conf_id,e.next=61,coreDb.delcallrecord(I);case 61:_++,e.next=52;break;case 64:s=w;for(b in u)u[b]&&(u[b].isInPast=!1,N=new Date(u[b].start_time.replace(/-/g,"/")).valueOf(),E=new Date(u[b].end_time.replace(/-/g,"/")).valueOf(),u[b].starttime=N,u[b].duration=E-N,s.push(u[b]),kt(u[b].conf_id,u[b].cycle_conf_id));if(!((f=i.length+s.length-(0,c.default)(u).length-d)>0)){e.next=80;break}J.info("too many records, delete records count ",f),y=0;case 70:if(!(y<f)){e.next=79;break}return T={},T.confid=i[y].conf_id,J.info("db test del conf record"),e.next=76,coreDb.delcallrecord(T);case 76:y++,e.next=70;break;case 79:i.splice(0,f);case 80:s.push.apply(s,i),s=qt(s),$dispatch(coreUi.changeAllConfList(s));case 83:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Gt=function(e){var t=e.oldconf,n=e.newconf;return t.start_time!==n.start_time||t.end_time!==n.end_time||t.conf_subject!==n.conf_subject||t.media_type!==n.media_type},jt=function(e){var t=e.oldconf,n=e.newconf;t.conf_subject=n.conf_subject,t.start_time=n.start_time,t.end_time=n.end_time,t.starttime=new Date(n.start_time.replace(/-/g,"/")).valueOf(),t.endtime=new Date(n.end_time.replace(/-/g,"/")).valueOf(),t.duration=t.endtime-t.starttime,t.media_type=n.media_type},qt=function(e){J.info("sort all conf list by start time");var t=[];e.sort(Jt),J.info("sort all conf list by status");for(var n in e)!0===e[n].isInPast&&t.push(e[n]);for(var r in e)!1===e[r].isInPast&&t.push(e[r]);return t},Jt=function(e,t){return new Date(e.start_time.replace(/-/g,"/")).valueOf()-new Date(t.start_time.replace(/-/g,"/")).valueOf()},Yt=(t.delConfRecord=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.allConfList,r=[],(0,h.default)(r,n),isNullOrEmpty(r)){e.next=15;break}a=0;case 5:if(!(a<r.length)){e.next=15;break}if(t.conf_id!==r[a].conf_id){e.next=12;break}return J.info("del conf record, current conf count",r.length),r.splice(a,1),J.info("del conf record, new conf count",r.length),$dispatch(coreUi.changeAllConfList(r)),e.abrupt("break",15);case 12:a++,e.next=5;break;case 15:return o={confid:t.conf_id},e.next=18,coreDb.delcallrecord(o);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("save conference record after delete those with same conf id"),e.next=3,coreDb.delcallrecord({confid:t.conf_id});case 3:return n={},(0,h.default)(n,t),e.next=7,coreDb.saveConfRecord(n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Kt=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r={},a=0;a<t.length;a++)r.number=t[a].number,r.name=t[a].name,n.push(r),r={};return e.abrupt("return",(0,f.default)(n));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),zt=(t.getInitHistoryConfList=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.changeQueryConfReady(!1)),e.next=3,coreAccount.getLoginModel();case 3:return t=e.sent,n={starttime:9999999999999,limitcount:50},e.next=7,coreDb.queryAllConfRecord(n);case 7:r=e.sent,r.reverse(),J.info("db query all conf records count ",r.length),a=[],isNullOrEmpty(r)?J.info("db test no conf record"):(a=zt(r),window.CLIENTCONFIG.ENABLE_IT_MEETING&&t.isSupportAS&&vr(a),o=$getState().conf.conflist,a.push.apply(a,o),a=qt(a),$dispatch(coreUi.changeAllConfList(a))),$dispatch(coreUi.changeQueryConfReady(!0)),J.info("change query ready true"),i=[],(0,h.default)(i,$getState().conf.tempConfList),0!==i.length&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&$t(i);case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],o=isNullOrEmpty(a.exparams)?{}:JSON.parse(a.exparams),i=new Date(a.starttime).format("yyyy/MM/dd hh:mm"),s=new Date(a.starttime+a.duration).format("yyyy/MM/dd hh:mm");n.conf_id=a.confid,n.general_pwd=a.confpasscode,n.confmembers=isNullOrEmpty(a.confmembers)?{}:JSON.parse(a.confmembers),n.groupid=a.groupid,n.starttime=a.starttime,n.end_time=s,n.start_time=i,n.duration=a.duration,n.media_type=isNullOrEmpty(o.mtype)?0:parseInt(o.mtype),n.record_type=o.rtype?o.rtype:0,n.scheduser_name=o.sname,n.scheduser_number=o.snum,n.isInPast=o.past,n.conf_subject=o.subj,n.cycle_conf_id=o.ccid?o.ccid:"0",t.push(n),n={}}return t}),Qt=t.searchContactByInfo=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryContact(t);case 2:if(n=e.sent,r=!1,n&&n.length>0?(J.info("query from local success"),name&&name!==t.account&&(n=n.filter(function(e){return e.name===name})),n.length>1?n=[]:n.length<1&&(r=!0)):r=!0,!r){e.next=12;break}return J.info("can not find in local, query contact from server"),e.next=9,coreContact.searchServerContact({query_key:t.account});case 9:a=e.sent,a.serverContactResult=a.userInformationList,void 0===a?n=!1:a.serverContactResult&&(J.info("query contact from server success"),(0,h.default)(n,a.serverContactResult),name&&name!==t.account&&(n=n.filter(function(e){return e.name===name})),n.length>1&&(n=[]));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Zt=t.handleConfInfostate=function(e){$dispatch(coreUi.changeConfInfoState(e)),J.info("isConfInfostate =",e)},Xt=t.handleConfMTnumber=function(e){J.info("handleConfMTnumber = "+(0,f.default)(e));var t="M"+e.attendee_vc.mcu_num+"T0";$dispatch(coreUi.changevideoMultipicNum(t))},en=t.handleConfInfo=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,m,g,C;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("handleConfInfo,data.result = ",t.result),n=void 0,0!==t.result){e.next=37;break}return n&&clearInterval(n),A.SvcAtdManager.reportConfInfo(t.get_conf_info_result),r=isNullOrEmpty(t.get_conf_info_result.conf_list_info)?{}:t.get_conf_info_result.conf_list_info,$getState().conf.confServerId&&$getState().conf.confServerId===r.conf_id&&r.guest_join_uri&&coreCommon.dispatchModuleEvent("pluginConfInfoNotify",(0,w.default)({},r)),Kn(r),a=t.get_conf_info_result.conf_list_info,o=a.chairman_pwd,i=a.conf_id,s=a.vmr_id,(""===o||isNaN(o))&&(o=a.general_pwd),c=isNullOrEmpty(s)?i:s,u={pstconfparam:{confid:c,access_code:a.access_number,conf_paswd:o},call_type:1},f=a.media_type,l=coreCommon.isVideoConf(f),d=$getState(),p=d.conf,h=p.confServerId,m=p.vmrId,J.info("handleConfInfo，current confServerId is "+h+"getconfinfo return confid is "+i),h===i&&(g=a.general_pwd,g?window.CLIENTCONFIG.ISWIN&&N.NativeInterface.setParam({general_pwd:a.general_pwd,chairman_pwd:a.chairman_pwd,conf_pwd:o}):window.CLIENTCONFIG.ISWIN&&N.NativeInterface.setParam({general_pwd:"",chairman_pwd:a.chairman_pwd,conf_pwd:o})),fn(0===t.get_conf_info_result.num_of_addendee?[]:t.get_conf_info_result.attendee),J.info("conf info attendees count is :",t.get_conf_info_result.num_of_addendee),a.start_time=Ht(a.start_time),a.end_time=Ht(a.end_time),e.next=26,coreAccount.getLoginModel();case 26:C=e.sent,C.isSupportAS&&a.join_advance_time&&(a.join_advance_time=Ht(a.join_advance_time)),gr(a,t.get_conf_info_result.attendee),un(a),Zt("success"),$dispatch(coreUi.changehasConfInfo("yes")),Un(a.scheduser_name),window.lastSelectedId={confId:i,cycleId:a.cycle_conf_id},tn(t),e.next=39;break;case 37:nn(t),t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED&&t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT&&t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR||vt();case 39:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),tn=(function(){var e=(0,I.default)(v.default.mark(function e(t,n,r){var a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.access_number,t.start_time=Ht(t.start_time),(0,F.joinPairConf)(t);case 3:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.confServerId,r=3,t=setInterval((0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(n,"0");case 2:r--,0===r&&clearInterval(t);case 4:case"end":return e.stop()}},e,void 0)})),15e3);case 3:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get_conf_info_result.attendee,r=t.get_conf_info_result.conf_list_info.conf_id,isNullOrEmpty(n)){e.next=27;break}return J.info("the length of attendeeList is",n.length),a=[],(0,h.default)(a,$getState().conf.allConfList),e.next=8,Kt(n);case 8:o=e.sent,i=0;case 10:if(!(i<a.length)){e.next=27;break}if(a[i].conf_id!==r||isNullOrEmpty(o)||!isNullOrEmpty(a[i].confmembers)&&a[i].confmembers.length===o.length){e.next=24;break}if(!(s=$getState().conf.queryConfReady)){e.next=24;break}if(a[i].confmembers=o,$dispatch(coreUi.changeAllConfList(a)),J.info("change conf list when conf member updated, conf count ",a.length),!(new Date(a[i].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=23;break}return e.next=20,Yt(a[i]);case 20:J.info("save conf record when update conf info"),e.next=24;break;case 23:J.info("reject save conf record because of start time");case 24:i++,e.next=10;break;case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),nn=function(e){"success"!==$getState().conf.isConfInfostate&&Zt("fail");var t=$getState().conf.confSubject;J.info("subscribe conference info fail.data = ",e);var n={access_number:"",chair_join_uri:"",chairman_UUID:"",chairman_pwd:"",conf_id:"",conf_state:2,conf_subject:t||"",cycle_conf_id:"",enable_conf_sign_in:0,end_time:"",general_pwd:"",guest_UUID:"",guest_join_uri:"",join_advance_time:"",media_type:2,record_aux_stream:0,record_type:0,scheduser_name:"",scheduser_number:"",sign_in_time_before_conf:0,size:0,start_time:"",token:"",vmr_id:""};$getState().conf.isShowPcConfInfo&&$dispatch(coreUi.changeShowPcConfInfoFlag(!1)),un(n)},rn=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info(" dealTransferChairmanResult,data.param.ret = ",t.param.ret),n=0===t.param.ret?language.TRANSFER_CHAIRMAN_SUCCESS:language.TRANSFER_CHAIRMAN_FAILED,r=0===t.param.ret?"Right2":"",window.CLIENTCONFIG.ISWIN?coreConf.getSvcAtdManager().alertBox(n,3):window.Toast(n,2);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),an=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:A.SvcAtdManager.callAttendeeResult(t.param);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),on=t.saveTempMediaxInfo=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.tempMediaxAddress,r=t.tempMediaxPort,J.info("saveTempMediaxInfo: "+n+": "+r),a=[{key:"tempMediaxAddress",value:n},{key:"tempMediaxPort",value:r}],e.next=5,coreDb.saveLoginSettings({args:a});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),sn=(t.getVRMList=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,t.isSipRegSuc()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,coreConf.getVMRListService();case 7:n=e.sent,J.info("get getvmrlist = ",n);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("get As info from db"),e.next=3,coreDb.queryUserConfig({key:"asInfo"});case 3:if(t=e.sent,t.value){e.next=6;break}return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 6:return n=JSON.parse(t.value),J.info("query asInfo from db",n),e.next=10,coreAccount.getLoginModel();case 10:return r=e.sent,r.isSupportAS=n,e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),cn=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return J.info("getVmrInfoToDb is bigwin, return"),e.abrupt("return");case 3:return J.info("getVmrInfoToDb"),e.next=6,coreDb.queryUserConfig({key:"randomIdPwd"});case 6:return t=e.sent,t.value&&(J.info("query randomId**d from db is",t),n=JSON.parse(t.value),$dispatch(coreUi.changeCreateMeetingPassword(n))),e.next=10,coreDb.queryUserConfig({key:"vmrInfo"});case 10:if(r=e.sent,r.value){e.next=13;break}return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 13:if(a=JSON.parse(r.value),o=a.conference_right,J.info("query confRight from db",o),0===o?$dispatch(coreUi.toggleConfRight(!1)):$dispatch(coreUi.toggleConfRight(!0)),""!==a.conf_id){e.next=22;break}$dispatch(coreUi.changehasVMRConfResult("NONE")),$dispatch(coreUi.changeShowVMRorNot(!1)),e.next=30;break;case 22:return $dispatch(coreUi.changeVMRConfResult(a)),$dispatch(coreUi.changeShowVMRorNot(!0)),$dispatch(coreUi.changeCurConfIDItem({idType:1,vmrId:a.vmr_id,confId:a.conf_id,confSubject:"",maxParties:0,chairmanPwd:a.chairman_pwd,guestPwd:a.guest_pwd,name:a.name})),$dispatch(coreUi.setUseFixedConfIDState(!0)),e.next=28,coreDb.queryUserConfig({key:"curDBInfoForCreateConf"});case 28:i=e.sent,i.value&&(s=JSON.parse(i.value),isNullOrEmpty(s)?$dispatch(coreUi.changeCurCreateConfIDItem({idType:constant.AS_CONF_ID_TYPE_MAP.RANDOM_CONF_ID,confId:"",vmrId:"",confSubject:"",maxParties:0,chairmanPwd:"",guestPwd:"",name:""})):($dispatch(coreUi.changeCurCreateConfIDItem({idType:s.idType,vmrId:s.vmrId,confId:s.confId,confSubject:s.confSubject,maxParties:s.maxParties,chairmanPwd:s.chairmanPwd,guestPwd:s.guestPwd,name:s.name})),$dispatch(coreUi.setCreateUseFixedConfIDState(s.isCreateUseFixedConfID))));case 30:return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),un=(t.getVmrInfoToDbAtomic=new coreCommon.AtomicAction("getVmrInfoToDb",cn),t.getAsInfoToDbAtomic=new coreCommon.AtomicAction("getAsInfoToDb",sn),t.oneJoinVMR=function(e){J.info("enter conf one Key Enter vmr Conf");var t=e.access_number;if(coreCall.getCallCount()>0)return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),J.error("oneJoinVMR already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);or(t,e.conf_id,e.chairman_pwd,!0)},t.changeCurrentConfInfo=function(e){J.info("change Current Conference Info ."),$dispatch(coreUi.changecurrentConfInfo(e))}),fn=t.changeConfAttendeeInfo=function(e){J.info("change Current Conference Attendee Info."),$dispatch(coreUi.changecurrentConfAttendeeInfo(e))};t.changeHistoryConfInfo=function(e){J.info("change Current History Conference Info."),$dispatch(coreUi.changecurrentHistoryConfInfo(e))},t.changeHistoryAttendeeInfo=function(e){J.info("change history conf attendee info"),$dispatch(coreUi.changeHistoryAttendeeList(e))},t.changeBookConfSubject=function(e){J.info("change create conf subject"),$dispatch(coreUi.changeCreateConfSubject(e))},t.enterConfInConfInfo=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("enterConfInConfInfo"),""===c&&(J.warn("enterConfInConfInfo input is null, so get from ducks"),c=$getState().conf.currentConfInfo),t=c.conf_subject,$dispatch(coreUi.changeConfSubject(t)),k.setSubject(t),n=c.media_type,r=coreCommon.isVideoConf(n),a=c.chairman_pwd,(""===c.chairman_pwd||isNaN(c.chairman_pwd))&&(J.info("enterConfInConfInfo chair pwd is null"),a=c.general_pwd),o=$getState().login.isSupportAS,i=o?c.conf_id:isNullOrEmpty(c.vmr_id)?c.conf_id:c.vmr_id,J.info("enterConfInConfInfo conf_id: "+i),s=c.access_number,or(s,i,a,r);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.oneKeyEnterPairConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("oneKeyEnterPairConf"),""===o&&(o=$getState().conf.currentConfInfo),t=o.conf_subject,$dispatch(coreUi.changeConfSubject(t)),k.setSubject(t),e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=10;break}return e.next=9,window.isSimCardCall();case 9:e.t0=e.sent;case 10:if(!(n=e.t0)){e.next=16;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),J.error("oneKeyEnterPairConf already in sim card call, can not create conf"),alert(language.PLEASE_HANG_UP_CALL),e.abrupt("return");case 16:if(!coreConf.isInConf()){e.next=20;break}return J.error("oneKeyEnterPairConf already exist conference, can not create conf"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 20:return e.next=22,coreUi.checkMobileMultiDevice();case 22:if(!0!==(r=e.sent)){e.next=27;break}return J.info("multi device logined, return"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 27:if(!(coreCall.getCallCount()>0)){e.next=31;break}return J.error("oneKeyEnterPairConf already exist call, can not create conf"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 31:return J.info("oneKeyEnterPairConf,enter conf oneKeyEnterConf"),a=o.access_number,e.next=35,coreCall.pairCallOut(o,{number:a});case 35:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyWithConfPas=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("enterConfByIdWithConfPas"),e.next=3,ae(!0,!1,f);case 3:if(n=e.sent,0===n.code){e.next=10;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),J.error("enterConfByIdWithConfPas,resOfCheck is false"),e.abrupt("return",n);case 10:J.info("enterConfByIdWithConfPas,resOfCheck is true");case 11:return r=t.confSubject?t.confSubject:"",H.showConfOutPage(!0,!1,r,""),a=t.confId?t.confId:"",o=t.confPas?t.confPas:"",i={confId:a,confPas:o},e.next=18,coreConf.enterConfByIdOnlyService(i);case 18:if(s=e.sent,0===(c=s.errorCode)){e.next=31;break}return J.info("enterConfByIdWithConfPas fail, errorCode = "+c),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),u=q.getEnterConfByIdOnlyTip(c),H.closeConfPage(!1,!1,c,u),H.clearAfterConfEnd(!1,!1),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NOT_NEED),7===c&&ce(c),e.abrupt("return",{code:c,msg:u});case 31:return J.error("enterConfByIdWithConfPas suc"),e.abrupt("return",q.CREATE_CONF_ERR.SUCCESS);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnly=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=t.conf.confAcsId,J.info("enterConfByIdOnly"),e.next=5,ae(!0);case 5:if(r=e.sent,0===r.code){e.next=10;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),J.error("enterConfByIdOnly,resOfCheck is false"),e.abrupt("return",!1);case 10:return H.showLoadingPage(),a=n,o=!$getState().conf.isOpenCameraDe,i=!$getState().conf.isOpenMicDe,s={confId:a,confPas:"",deviceSet:{isCloseCameraDe:o,isMuteMicDe:i}},e.next=17,coreConf.enterConfByIdOnlyService(s);case 17:if(c=e.sent,u=c.errorCode,f=c.isNeedPwd,l=c.accessNum,0!==u){e.next=28;break}return H.closeLoadingPage(),H.showConfOutPage(!0,!1,"",l),In(constant.ONLINE_STATUS.BUSY),e.abrupt("return",!0);case 28:return H.closeLoadingPage(),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),f?(coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NEED),gn(l)):(coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NOT_NEED),11017===u&&Cn(""),7===u&&ce(u),d=q.getEnterConfByIdOnlyTip(u),coreCommon.isNeedQuickFeedback(d)?window.confirm(d+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,d)}):alert(d)),e.abrupt("return",!1);case 32:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterConfById=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.confAcsId,r=t.confAcsNum,a=n,$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=8;break}if(""!==$getState().conf.confAcsNum){e.next=8;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),window.ToastNew(language.ENTER_CONF_ACS_ID_NULL,2),J.info("enterConfById confAcs is null"),e.abrupt("return");case 8:return J.info("enterConfById get conf pwd"),e.next=11,coreSecurity.getPasswordManager();case 11:return o=e.sent,e.next=14,o.getPassword("cnfAcsPassword");case 14:i=e.sent,s=isNullOrEmpty(i)?"":i,J.info("enterConfById pre ok,then call out,change enter conf state true"),or(r,a,s,!0);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterTempConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("enterTempConf"),""!==$getState().conf.confTempAcsId){e.next=4;break}return alert(language.ENTER_CONF_ACS_ID_NULL),e.abrupt("return");case 4:if(""!==$getState().conf.confTempAcsNum){e.next=7;break}return alert(language.ENTER_CONF_ACS_ID_NULL),e.abrupt("return");case 7:if(""!==$getState().conf.confTempAcsPas){e.next=10;break}return alert(language.ENTER_CONF_ACS_PAS_TIPS),e.abrupt("return");case 10:if(""!==$getState().conf.confTempAcsAccount){e.next=13;break}return alert(language.ENTER_CONF_TEMP_ACS_ACCOUNT_NULL),e.abrupt("return");case 13:return e.next=15,coreSecurity.getPasswordManager();case 15:return t=e.sent,e.next=18,t.getPassword("password");case 18:if(""!==(n=e.sent)){e.next=22;break}return alert(language.ENTER_CONF_TEMP_ACS_PWD_NULL),e.abrupt("return");case 22:return r={confAcsId:$getState().conf.confTempAcsId,confAcsNum:$getState().conf.confTempAcsNum,confAcsPas:$getState().conf.confTempAcsPas},J.info("confAcsId :"+$getState().conf.confAcsId+",  confAcsNum:"+$getState().conf.confAcsNum+", confAcsPas: "+$getState().conf.confAcsPas+", tempConfdata :"+(0,f.default)(r)),$dispatch(coreUi.saveTempConfInfo(r)),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),e.next=29,coreAccount.login({isResume:!1,isTempLogin:!0});case 29:$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handleJoinTempConfNoNameWithConfId=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h,m,g,C,S,w,_,I,b,N,E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=t.login,r=n.tempMediaxAddress,a=n.tempMediaxPort,o=n.tempSipAccount,i=n.tempsipPassword,s=n.tempSipNick,J.info("handleJoinTempConfNoNameWithConfId tempMediaxAddress : "+r+", tempMediaxPort"+a),$dispatch(coreUi.changeAnonymousURLEnterConf(!1)),e.next=5,coreAccount.getLoginModel();case 5:if(c=e.sent,!c.isForceUpdate||!c.isPortalUpgrade||window.isPluginEnv){e.next=10;break}return J.info("need upgrade before no login conference"),coreAccount.showUpdateHintsOrBar(),e.abrupt("return");case 10:if(!isNullOrEmpty(s)){e.next=13;break}return E&&alert(language.NICKNAME_IS_REQUIRED),e.abrupt("return",q.CREATE_CONF_ERR.NO_NICK_NAME);case 13:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=18;break}return e.next=17,window.isSimCardCall();case 17:e.t0=e.sent;case 18:if(!(u=e.t0)){e.next=23;break}return J.info("handleJoinTempConfNoNameWithConfId now is in sim card call"),E&&alert(language.PLEASE_HANG_UP_CALL),e.abrupt("return",q.CREATE_CONF_ERR.EXIST_CALL);case 23:return e.next=25,coreCall.callPermissionCheck(!0);case 25:if(f=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),f){e.next=30;break}return J.info("handleJoinTempConfNoNameWithConfId do not have permission for call"),e.abrupt("return",q.CREATE_CONF_ERR.PERMSSION_REJECT);case 30:return e.next=32,coreCall.createVideoPreCheck();case 32:if(l=e.sent){e.next=36;break}return window.goRoute("main/conference"),e.abrupt("return",q.CREATE_CONF_ERR.USER_CANCEL);case 36:if($dispatch(coreUi.changeEnterConfState(!0)),isNullOrEmpty(window.socketCloseResumePromise)){e.next=41;break}return e.next=40,window.socketCloseResumePromise;case 40:window.socketCloseResumePromise=null;case 41:return e.next=43,coreTup.getUportalInstance();case 43:return d=e.sent,e.next=46,coreAccount.setLoginProxy(d);case 46:if(p=$getState().login.isSupportCACertCheck,h=window.EXEC_PATH,!p){e.next=58;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=54;break}return e.next=52,d.loginSetTlsParamsEx(h,1);case 52:e.next=56;break;case 54:return e.next=56,d.loginSetTlsParams(h,1);case 56:e.next=65;break;case 58:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=63;break}return e.next=61,d.loginSetTlsParamsEx(h,0);case 61:e.next=65;break;case 63:return e.next=65,d.loginSetTlsParams(h,0);case 65:return m=r,g=parseInt(a),C=0,S=o,6!==S.length&&(C=1),e.next=72,coreAccount.queryMediaXaddrFromServer({uportalService:d,is_cms_addr:C});case 72:if(w=e.sent,w&&0===w.result?(m=w.mediaxAddr,g=w.mediaxPort,C=w.isCmsAddr,J.info("handleJoinTempConfNoNameWithConfId queryMediaXaddrFromServer success mediaxAddr:",m,"mediaxPort:",g,"isCmsAddr:",C)):J.info("handleJoinTempConfNoNameWithConfId queryMediaXaddrFromServer failed"),!isNullOrEmpty(m)){e.next=77;break}return E&&alert(language.MAXHUB_LOGIN_INPUT_ADDRESS),e.abrupt("return",q.CREATE_CONF_ERR.ADDRESS_EMPTY);case 77:if(!isNullOrEmpty(g)){e.next=80;break}return E&&alert(language.PORT_EMPTY),e.abrupt("return",q.CREATE_CONF_ERR.PORT_EMPTY);case 80:return _=i,I=window.CLIENTCONFIG.ISMOBILE?1:0,b=1,coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreAccount.registerLoginEvent(),coreCall.registerCallEvent(),ut.wait(),coreCall.registerVideoEvent(),e.next=92,coreConf.initializeDataConf();case 92:return(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN)&&(0,M.registerNativeWndEvent)(),on(),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.next=97,coreAccount.getLocalDNSIp({domain:m});case 97:return N=e.sent,isNullOrEmpty(N)||(m=N),c.urlOfGetSipInfo=m,e.abrupt("return",d.getTempUserInfoFromConfinfo(m,g,S,_,I,b,C));case 101:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleItConfRecord=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.conflist,n=null,r=!1,a=0;case 4:if(!(a<t.length)){e.next=13;break}if(t[a].conf_id!==i){e.next=10;break}return n=t[a],J.info("handle it conf record find conf."),r=!0,e.abrupt("break",13);case 10:a++,e.next=4;break;case 13:r?(J.info("handle it conf record one key enter conf"),sr(n)):(J.info("handle it conf record create a new conf"),window.handleItJoinMeeting(o,"2"));case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.handleItJoinMeeting=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,n="1",t=h,n=m,J.info("handleItJoinMeeting, set isOffline false"),window.isOffline=!1,!t){e.next=38;break}r=[],a=0,o="",i=$getState(),s=i.myInfo,c=0;case 11:if(!(c<t.length)){e.next=36;break}if(u=t[c],u.calleeNumber=u.calleeNumber.replace(/-/g,"").replace(/\s*/g,""),u.contactsId||(u.contactsId=u.calleeNumber),f=u.contactsId,!(o.indexOf(f)>=0)){e.next=18;break}return e.abrupt("continue",33);case 18:l="",u.mobilePhones&&(l=u.mobilePhones.replace(/-/g,"").replace(/\s*/g,"")),r[a]={},o+=f,u.contactsId&&(r[a].account=u.contactsId),u.contactId&&(r[a].account=u.contactId),s.account||(d=appService.getItUserInfo(),s.account=d.contactsId),!s.account||s.account!==u.contactsId&&s.account!==u.contactId||u.name&&(J.info("getITMeeting username is "+u.name.substr(0,1)+"***"),s.name=u.name),r[a].mobile=l,r[a].number=u.calleeNumber,r[a].bind_no=u.calleeNumber,r[a].name=u.name,r[a].email=u.email,J.info("create a new conf. the urser number:"),a++;case 33:c++,e.next=11;break;case 36:p=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,"2"===n?oe(s,r,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,p):oe(s,r,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,p);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.updateItMeeting=function(e){coreAccount.getLoginModel().then(function(t){return t.set(e)})},window.handleJoinTempConfNoNamePreProcess=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.inAppBrowserRef&&window.inAppClosePage&&window.inAppClosePage(),e.next=3,coreAccount.getResumeEnable();case 3:if(n=e.sent){e.next=9;break}J.info("[handleJoinTempConfNoNamePreProcess] now is is logout or kickout "+t),window.handleJoinTempConfNoName(t),e.next=16;break;case 9:if(J.info("[handleJoinTempConfNoNamePreProcess] now is login"+t),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=15;break}return e.next=13,coreUi.checkMobileMultiDevice();case 13:r=e.sent,r&&J.info("multi device handleJoinTempConfNoNamePreProcess");case 15:window.enterNoNameConfUrl=t;case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.handleJoinTempConfNoName=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("[handleJoinTempConfNoName] fromScanQrcode :"+l),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,params:[l?constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_SCAN_TO_JOIN:constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_LINK]}),!coreCommon.isMobile()){e.next=10;break}return e.next=5,window.getCurrentNetWorkType();case 5:return e.next=7,coreCall.createVideoPreCheck();case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return");case 10:return window.setTimeout(function(){return window.dispatchEvent(new Event("closeOutSidePage"))},500),clearTimeout(window.openBrowerTimer),e.next=14,window.isAnonymous();case 14:if(r=e.sent,window.hasLoadConfig){e.next=20;break}if(-1==r||r){e.next=20;break}return window.handleJoinTempConfNoNameURL=t,J.info("[handleJoinTempConfNoName] has not loadconfig , do later :"+window.handleJoinTempConfNoNameURL),e.abrupt("return");case 20:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=28;break}return e.next=23,coreTup.getUportalInstance();case 23:return a=e.sent,e.next=26,coreAccount.setLoginProxy(a);case 26:e.next=29;break;case 28:t="cloudlinkpro://welinksoftclient/page/link?site_url="+t;case 29:return e.next=31,coreAccount.getNickName();case 31:return e.next=33,coreAccount.getLoginModel();case 33:if(o=e.sent,!window.CLIENTCONFIG.ENABLE_IT_MEETING||!r){e.next=39;break}if(!isNullOrEmpty(o.tempSipNick)){e.next=39;break}return e.next=38,window.getAnonymousUserName();case 38:o.tempSipNick=e.sent;case 39:if(J.info("handleJoinTempConfNoName",t),i=coreCommon.getUrlVars(t),J.info("uriValues",i),isNullOrEmpty(i.user_name)){e.next=45;break}return e.next=45,coreAccount.updateTempSipNick({name:decodeURI(i.user_name)});case 45:if(s={sipOnlyurlInfo:{site_url:isNullOrEmpty(i.site_url)?"":decodeURIComponent(i.site_url.trim()),random:isNullOrEmpty(i.random)?"":decodeURIComponent(i.random.trim()),chairman:isNullOrEmpty(i.chairman)?"":decodeURIComponent(i.chairman.trim()),topology:isNullOrEmpty(i.topology)?"":decodeURIComponent(i.topology.trim())}},c=/https:\/\/([^\/]+)\//g,u=null,(u=c.exec(s.sipOnlyurlInfo.site_url))&&!isNullOrEmpty(u)&&u.length>1&&(f=u[1].split(":"),f.length>1?(o.tempNoNameMediaxAddress=f[0],o.tempNoNameMediaxPort=f[1]):(o.tempNoNameMediaxAddress=f[0],o.tempNoNameMediaxPort="443")),J.info("urlInfo",s),o.set(s),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(-1==r||!r)){e.next=62;break}return coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreAccount.registerLoginEvent(),coreCall.registerCallEvent(),ut.wait(),coreCall.registerVideoEvent(),e.next=61,coreConf.initializeDataConf();case 61:(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN)&&(0,M.registerNativeWndEvent)();case 62:$dispatch(coreUi.changeAnonymousURLEnterConf(!1)),window.checkJoinTempConfNoName(t),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 66:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var ln=t.gettempuserinfo=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=5;break}return e.next=4,window.isSimCardCall();case 4:e.t0=e.sent;case 5:if(!(t=e.t0)){e.next=10;break}return alert(language.PLEASE_HANG_UP_CALL),J.info("gettempuserinfo now is in sim card call"),e.abrupt("return");case 10:if(window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=14;break}return e.next=13,window.isHavePermission("AUDIO_AND_CAMERA_PERMISSION");case 13:window.isHavePerm||(window.getRoute()&&"main/conference"!==window.getRoute()&&window.goRoute("main/conference"),window.switchToFront());case 14:return e.next=16,coreCall.callPermissionCheck(!0);case 16:if(n=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),n){e.next=21;break}return J.info("gettempuserinfo have no permission. "),e.abrupt("return");case 21:if($dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),r=window.CLIENTCONFIG.ISMOBILE?1:0,a=$getState().login,o=""===a.sipAccount?1:0,i=$getState().login,s=i.sipOnlyurlInfo.site_url,c=i.sipOnlyurlInfo.random,J.info("gettempuserinfo",s,c,r,o),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=46;break}return u=s.split("/")[2],u.indexOf(":")>0&&(u=u.split(":")[0]),f="",e.next=36,coreDb.queryLoginSetting({key:u});case 36:return l=e.sent,l&&l.value&&(f=l.value),isNullOrEmpty(f)||(s=s.replace(u,f)),J.info("gettempuserinfo real:",s),e.next=42,window.isAnonymous();case 42:d=e.sent,e.next=46;break;case 46:return e.next=48,coreTup.getUportalInstance();case 48:return p=e.sent,e.abrupt("return",p.gettempuserinfo(s,c,r,o));case 50:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.checkJoinTempConfNoName=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,m,g,C,S,w,_;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState(),r=n.login,a=r.account,o=r.serverAddress,i=r.serverPort,s=r.loginDisable,c=r.uportalLoginState,u=r.sipRegisterState,e.next=3,coreSecurity.getPasswordManager();case 3:return f=e.sent,e.next=6,f.getPassword("password");case 6:if(l=e.sent,J.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+o+", serverPort: "+i),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=14;break}if(d=window.localStorage.getItem("isFirstInstall"),window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===d){e.next=14;break}return J.info("[checkJoinTempConfNoName] local has First install before license, enter conf after access license"),window.enterNoNameConfUrl=t,e.abrupt("return");case 14:return p=coreCommon.getUrlVars(t),p.push("ASType"),p.ASType=~t.indexOf("mediax")?"":"CMS",h={sipOnlyurlInfo:{site_url:isNullOrEmpty(p.site_url)?"":decodeURIComponent(p.site_url.trim()),random:isNullOrEmpty(p.random)?"":decodeURIComponent(p.random.trim()),chairman:isNullOrEmpty(p.chairman)?"":decodeURIComponent(p.chairman.trim())}},e.next=20,coreAccount.isAccountAutoLogin();case 20:if(m=e.sent,g=!1,window.CLIENTCONFIG.ENABLE_IT_MEETING||(g=window.stroage.isFastLogin()),!(coreConf.isInConf()||coreCall.getCallCount()>0)){e.next=27;break}return window.CLIENTCONFIG.ISMOBILE?alert(language.PREVENT_TWO_CALLS):window.Toast(language.PREVENT_TWO_CALLS,2,!1,null,"WhiteWarning"),window.enterNoNameConfUrl=null,e.abrupt("return");case 27:return appService.showMainWindow(!0),e.next=30,window.isAnonymous();case 30:if(C=e.sent,(isNullOrEmpty(a)||isNullOrEmpty(l)||isNullOrEmpty(o)||isNullOrEmpty(i))&&(!window.CLIENTCONFIG.ENABLE_IT_MEETING||C)){e.next=87;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=53;break}if(S=window.SERVERCONFIG,J.info("[checkJoinTempConfNoName] Start , mode: [ HWUC "+S.HWUC+" ]"),S.HWUC!==constant.LOGIN_TYPE.BASE){e.next=52;break}if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING!==c){e.next=42;break}return J.info("[checkJoinTempConfNoName]local has uportal, state: registering, enter conf later"),window.enterNoNameConfUrl=t,e.abrupt("return");case 42:if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS!==c){e.next=46;break}J.info("[checkJoinTempConfNoName]local has uportal, state: registered"),e.next=50;break;case 46:return J.info("[checkJoinTempConfNoName]local has uportal, state: register failed"),J.info("[checkJoinTempConfNoName]local has not uportal, no sip"),dn(p),e.abrupt("return");case 50:e.next=53;break;case 52:S.HWUC,constant.LOGIN_TYPE.HWUC;case 53:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED!==u){e.next=64;break}return e.next=56,coreAccount.getLoginModel();case 56:return w=e.sent,w.sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP,J.info("[checkJoinTempConfNoName]local has sip, state: registered"),window.enterNoNameConfUrl=null,ln(),e.abrupt("return");case 64:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING!==u){e.next=70;break}return J.info("[checkJoinTempConfNoName]local has sip , state: registering"),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.enterNoNameConfUrl=null,ln()),e.abrupt("return");case 70:if(J.info("[checkJoinTempConfNoName]local has sip, state register failed"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=75;break}return window.enterNoNameConfUrl=null,ln(),e.abrupt("return");case 75:if(!window.isOffline){e.next=79;break}return alert(language.OFFLINE_STATUS),window.enterNoNameConfUrl=null,e.abrupt("return");case 79:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=84;break}return e.next=82,coreUi.checkMobileMultiDevice();case 82:_=e.sent,_&&J.info("multi device checkJoinTempConfNoName");case 84:window.enterNoNameConfUrl=t;case 85:e.next=102;break;case 87:e.next=93;break;case 93:if(!m){e.next=99;break}return J.info("[checkJoinTempConfNoName] pc auto login, enter conf after sip registered"),window.enterNoNameConfUrl=t,e.abrupt("return");case 99:J.info("[checkJoinTempConfNoName]local has not uportal, no sip"),dn(p),window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.switchToFront();case 102:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var dn=function(e){"1"!==(e.chairman&&decodeURIComponent(e.chairman.trim()))?($dispatch(coreUi.changeConfTempAcsNum("")),$dispatch(coreUi.changeConfTempAcsId("")),$dispatch(coreUi.changeConfTempAcsPas("")),$dispatch(coreUi.changeConfTempAcsNick("")),$dispatch(coreUi.changeConfTempAcsAccount("")),$dispatch(coreUi.changeConfTempAcsMemberTotal(0)),$dispatch(coreUi.changeConfTempAcsEndTime(0)),$dispatch(coreUi.changeAnonymousURLEnterConf(!0)),coreAccount.getLoginModel().then(function(e){e.sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_NO_UPORTAL_NO_SIP}),navigator.splashscreen&&navigator.splashscreen.hide(),isNullOrEmpty(e.user_name)||ln(),isNullOrEmpty(e.ASType)?window.CLIENTCONFIG.ISMOBILE?window.goRoute("mJoinConfSIPOnly"):window.goRoute("login/joinConfSIPOnly"):pn()):(window.clearDialogQueue&&window.clearDialogQueue(),alert(language.GET_SIP_FAILED_FOR_CHAIRMAN),window.CLIENTCONFIG.ENABLE_IT_MEETING&&setTimeout(function(){window.quitFromConfPlugin()},3e3))},pn=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("changeNickName  new AS don't goRoute JoinConfSIPOnly"),e.next=3,coreAccount.getNickName();case 3:return e.next=5,coreAccount.getLoginModel();case 5:t=e.sent,isNullOrEmpty(t.tempSipNick)&&(window.CLIENTCONFIG.ISMOBILE?t.tempSipNick=$getState().common.mobileInfo.name:(n=window.require("os").userInfo(),r=n.username,t.tempSipNick=r)),ln();case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleJoinTempConf=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn();case 2:if(n=e.sent,J.info("window.handleJoinTempConf should get temp usr :"+n),!n){e.next=10;break}if(r=$getState(),a=r.login.account,isNullOrEmpty(a)){e.next=10;break}return J.info("window.handleJoinTempConf, logout old im account"),e.next=10,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0);case 10:o=coreCommon.getUrlVars(t),i=o.site_address,s=o.confid,$dispatch(coreUi.changeConfTempAcsNum("")),$dispatch(coreUi.changeConfTempAcsId("")),$dispatch(coreUi.changeConfTempAcsPas("")),$dispatch(coreUi.changeConfTempAcsNick("")),$dispatch(coreUi.changeConfTempAcsAccount("")),$dispatch(coreUi.changeConfTempAcsMemberTotal(0)),$dispatch(coreUi.changeConfTempAcsEndTime(0)),n&&window.goRoute("mTempEnterConfPage"),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),c=!n,J.info(" getTempConfInfo: confId : "+s+", eccmAddress:"+i+", hasAccount: "+c),u="https://"+i+"/v1/jointmpconf/gettmpaccount",f='{"conferenceid":"'+s+'","hasaccount": '+(c?1:0)+"}",appService.doHttpsPost(u,f);case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var hn=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,n=$getState(),r=n.login,a=r.account,o=r.serverAddress,i=r.serverPort,s=r.loginDisable,c=r.uportalLoginState,u=r.sipRegisterState,e.next=4,coreSecurity.getPasswordManager();case 4:return f=e.sent,e.next=7,f.getPassword("password");case 7:if(l=e.sent,J.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+o+", serverPort: "+i),isNullOrEmpty(a)||isNullOrEmpty(o)||isNullOrEmpty(i)){e.next=45;break}if(d=window.SERVERCONFIG,J.info("checkShouldUseTempUsrForTempConf Start , mode: [ HWUC "+d.HWUC+" ]"),d.HWUC!==constant.LOGIN_TYPE.BASE){e.next=27;break}if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING!==c){e.next=19;break}return J.info("local has uportal, state: registering"),t=!0,e.abrupt("return",t);case 19:if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS!==c){e.next=23;break}J.info("local has uportal, state: registered"),e.next=25;break;case 23:return t=!0,e.abrupt("return",t);case 25:e.next=28;break;case 27:d.HWUC,constant.LOGIN_TYPE.HWUC;case 28:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED!==u){e.next=34;break}return J.info("local has sip, state: registered"),t=!1,e.abrupt("return",t);case 34:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING!==u){e.next=40;break}return J.info("local has sip , state: registering"),t=!1,e.abrupt("return",t);case 40:return J.info("local has sip, state register failed"),t=!0,e.abrupt("return",t);case 43:e.next=48;break;case 45:return J.info("local has not uportal, no sip"),t=!0,e.abrupt("return",t);case 48:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleDoHttpsPostResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===t&&(t=""),t=decodeURIComponent(t),n="";try{n=JSON.parse(t)}catch(e){n="",J.error("window.handleDoHttpsPostResult try catch error = "+(0,f.default)(e))}return e.next=6,hn();case 6:if(r=e.sent,isNullOrEmpty(n)){e.next=24;break}if(a=n.result,o=n.jointmpconfinfo,!isNullOrEmpty(a)){e.next=13;break}return alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),e.abrupt("return");case 13:if(0!==a.retCode&&isNullOrEmpty(o)){e.next=21;break}return e.next=16,mn(o,r);case 16:if(!1!==(i=e.sent)){e.next=19;break}return e.abrupt("return");case 19:e.next=22;break;case 21:14e3===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14000),r&&window.goRoute("loginCtn")):14001===a.retCode?(alert(language.END_CONFERENCE),r&&window.goRoute("loginCtn")):14002===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14002),r&&window.goRoute("loginCtn")):14003===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14003),r&&window.goRoute("loginCtn")):(alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),r&&window.goRoute("loginCtn"));case 22:e.next=28;break;case 24:alert(language.ENTER_CONF_TEMP_ACS_ERROR_NET_ERROR),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),r&&window.goRoute("loginCtn");case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var mn=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i,s,c;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),e.abrupt("return",!1);case 3:if(r=$getState(),a=r.login,o=a.account,i=a.serverAddress,s=a.serverPort,n){e.next=13;break}return $dispatch(coreUi.changeConfAcsNum(t.accessCode)),$dispatch(coreUi.changeConfAcsId(t.conferenceID)),e.next=9,Sn(t.conferencePWD);case 9:coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),window.goRoute("mEnterConfPage"),e.next=31;break;case 13:if($dispatch(coreUi.changeConfTempAcsNum(t.accessCode)),$dispatch(coreUi.changeConfTempAcsId(t.conferenceID)),$dispatch(coreUi.changeConfTempAcsPas(t.conferencePWD)),$dispatch(coreUi.changeConfTempAcsMemberTotal(isNullOrEmpty(t.total)?0:t.total)),$dispatch(coreUi.changeConfTempAcsEndTime(isNullOrEmpty(t.endTime)?0:t.endTime)),isNullOrEmpty(t.tmpUsrAccount)?$dispatch(coreUi.changeConfTempAcsAccount(o)):$dispatch(coreUi.changeConfTempAcsAccount(t.tmpUsrAccount)),!isNullOrEmpty(t.tmpUsrPWD)){e.next=22;break}e.next=27;break;case 22:return e.next=24,coreSecurity.getPasswordManager();case 24:return c=e.sent,e.next=27,c.setPassword("password",t.tmpUsrPWD);case 27:isNullOrEmpty(t.uportalAddress)?$dispatch(coreUi.changeTempAcsUportalAddress(i)):$dispatch(coreUi.changeTempAcsUportalAddress(t.uportalAddress)),isNullOrEmpty(t.uportalPort)?$dispatch(coreUi.changetempAcsUportalPort(s)):$dispatch(coreUi.changetempAcsUportalPort(t.uportalPort)),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 31:return e.abrupt("return",!0);case 32:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),vn=t.changeConfPage=function(e){if(J.info("userClick  create conf or join conf",e),window.CLIENTCONFIG.ENABLE_IT_MEETING&&"New"===e&&coreCall.getCallCount()>0)return J.error("already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);"Detail"!==e&&(window.lastSelectedId={confId:"",cycleId:""}),$dispatch(coreUi.changeCurConfPage(e))},gn=t.toggleChangeConfAcsNum=function(e){$dispatch(coreUi.changeConfAcsNum(e))},Cn=t.toggleChangeConfAcsId=function(e){$dispatch(coreUi.changeConfAcsId(e))},Sn=t.toggleChangeConfAcsPas=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return n=e.sent,e.next=5,n.setPassword("cnfAcsPassword",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),wn=(t.toggleSetUseFixedConfIDState=function(e){$dispatch(coreUi.setUseFixedConfIDState(e))},t.toggleSetIsBookSendEmail=function(e){$dispatch(coreUi.changeIsBookSendEmail(e))},t.toggleSetIsBookSendSMS=function(e){$dispatch(coreUi.changeIsBookSendSMS(e))},t.toggleSetCreateUseFixedConfIDState=function(e){$dispatch(coreUi.setCreateUseFixedConfIDState(e))},t.toggleChangeMicState=function(){$dispatch(coreUi.changeMicState())},t.toggleChangeCamerState=function(){$dispatch(coreUi.changeCamerState())},t.toggleopenCamerState=function(){$dispatch(coreUi.openCamerState())},t.toggleClearEnterTempConfInfo=function(){$dispatch(coreUi.clearEnterTempConfInfo())},t.toggleShouldAutoEnterTempConf=function(){$dispatch(coreUi.changeShouldAutoEnterTempConf())},t.returnToConfWelPage=function(){$dispatch(coreUi.changeCurConfPage("Main")),coreCall.setNoMoveTrue()},function(){var e=$getState(),t=e.call,n=t.savedCalleeInfo,r=t.tempConfInfo;isNullOrEmpty(n)?isNullOrEmpty(r)||(J.info(" handleSipRegSuc, CalloutForTempConf"),$dispatch(coreUi.saveTempConfInfo({})),coreCall.CalloutForTempConf(r.confAcsId,r.confAcsNum,r.confAcsPas),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(""))):n.bConf&&(J.info(" handleSipRegSuc, actionCreateConf"),oe.apply(void 0,[n.selfInfo,n.memberList,n.groupInfo,n.mediaType,n.noPassword,!0].concat((0,d.default)(n.others))))});window.unRegister=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.sipUseByOther=!0,!window.webView){e.next=13;break}if(J.info("it welink logout 1"),!window.webView.isItLogout()){e.next=9;break}return J.info("it welink logout."),e.next=7,coreAccount.endCurrentCall();case 7:e.next=13;break;case 9:if(!window.webView.isSimCardCall()||""===$getState().call.callId){e.next=13;break}return window.dontUnregister=!0,J.info("is sim card call no need unregister"),e.abrupt("return");case 13:window.dontUnregister=!1,coreAccount.sipserverDeregister(),J.info("unRegister, set isOffline true"),window.isOffline=!0,_n();case 18:case"end":return e.stop()}},e,void 0)}));var _n=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isOffline){e.next=27;break}if(t=!coreConf.isInConf(),n=coreCall.getCallCount()<=0,J.info("handleOfflineReLogin bNoConf: "+t+" bNoCall: "+n),!t||!n){e.next=7;break}return J.debug("handleOfflineReLogin, no conf or call exit, do nothing"),e.abrupt("return");case 7:if(r=$getState(),a=r.conf.confHandle,o=r.call.callId,t||""===a){e.next=17;break}if(J.info("handleOfflineReLogin, confHandle: "+a),i=coreConf.getSavedRecallInfo(),isNullOrEmpty(i)){e.next=15;break}return J.info("handleOfflineReLogin,recallOrHangup"),coreCall.recallOrHangup(i,!0,""),e.abrupt("return");case 15:return e.next=17,Ge();case 17:if(n=coreCall.getCallCount()<=0){e.next=27;break}if(s=coreConf.getSavedRecallInfo(),isNullOrEmpty(s)){e.next=23;break}return J.info("handleOfflineReLogin, recall not hangup call"),e.abrupt("return");case 23:J.info("handleOfflineReLogin, callId: "+o),o&&coreCall.endCallService(o),coreCall.endCall(o),coreCall.deleteCallObject(o);case 27:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),In=function(e,t){window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.webView&&(e===constant.ONLINE_STATUS.BUSY?window.webView.setTalkingState():window.webView.cancelTalkingState()),window.CLIENTCONFIG.USE_IM&&coreAccount.pushStatusToEServer({status:e,desc:t}))},bn=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(0,R.meetingHWreCallTimeOut)(t):(0,R.meetingHWLeaveConf)();case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Nn=(t.showJoinMeetingBtn=function(){var e=$getState().call,t=e.showCallToolBar,n=e.callStatus;return!$getState().conf.showJoinButton||!(!t&&"VIDEO_CONNECTED"!==n&&"VIDEO_OUT"!==n&&"CALL_OUT"!==n&&"CALL_CONNECTED"!==n||!coreConf.isInConf())&&(J.info("already exist conference, need to join the meeting button gray"),!0)},t.showOrDisabledBtn=function(){return!!$getState().conf.showJoinButton},function(e){if(0!==e.length){for(var t=[],n=0;n<e.length;n++)!function(n){var r=t.findIndex(function(t){return e[n].number?t.number===e[n].number:t.number===e[n].bind_no});-1===r?t.push(e[n]):!t[r].account&&e[n].account&&t.splice(r,1,e[n])}(n);return t}}),En=(t.clearPhoneContacts=function(){$dispatch(coreUi.clearPhoneAddrInfo())},t.handleSvcConfWatchRet=function(e){J.info("handleSvcConfWatchRet =",e);window.CLIENTCONFIG.ISMOBILE;e.param.ret}),yn=t.handleVideoWatchRes=function(e){0===e?(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,extraTrackKey:handlePhoneNumber(z),resultParams:[1],isTrackTimeCosts:!0}),J.info("video watch suc,watchNum = "+handlePhoneNumber(z)),$dispatch(coreUi.changeVideoWatchNum(z))):(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,isTrackTimeCosts:handlePhoneNumber(z),resultParams:[0,e]}),10===e?(J.error("video watch reason_code = 10,watchNum = "+handlePhoneNumber(z)),Tn(""===z?"NATIVE_VIDEO_CANCEL_WATCH_FAIL_WHEN_CONFPAGE_OPEN":"NATIVE_VIDEO_WATCH_FAIL_WHEN_CONFPAGE_OPEN")):(J.error("video watch reason_code = "+e+"watchNum = "+z),Tn(""===z?!$getState().conf.isSvcConf&&coreConf.getIsAvcMultiViewBroadcast()?"NATIVE_FAILURE_CANCEL_WATCH_MULTIVIEWBROADCAST":"NATIVE_VIDEO_CANCEL_WATCH_FAIL":!$getState().conf.isSvcConf&&coreConf.getIsAvcMultiViewBroadcast()?"NATIVE_FAILURE_WATCH_MULTIVIEWBROADCAST":"NATIVE_FAILURE_ERR_TUP")))},Tn=t.handleVideoWatchResMessageBox=function(e){if(J.info("reacrd handleShowErrorMsgBox errorTile:",e),!isNullOrEmpty(e)){var t=$getState().conf,n=t.confHandle,r=t.isVideoConf;window.CLIENTCONFIG.ISWIN&&r&&!isNullOrEmpty(n)?A.SvcAtdManager.alertBox(e,2):alert(language[e])}},On=(t.handlePlatformMessageBox=function(e){J.info("reacrd handleShowErrorMsgBox errorTile:",e),isNullOrEmpty(e)||(A.SvcAtdManager.isNativeUIExsit()?(J.info("handlePlatformMessageBox1 isVideo"),A.SvcAtdManager.alertBox(e,2)):(J.info("handlePlatformMessageBox2 "),alert(language[e])))},t.dealInviteAttendeeResult=function(e){$getState().synergismInfo.inPairConf&&(J.info("BLE: in pair conf, deal invite attendee result, data=",e),(0,P.pairInviteAttendeeNotify)(e.param));var t=void 0;t=0===e.param.ret?[1]:[0,e.param.ret],coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,resultParams:t})});t.resetFirstInfoConferenceFlag=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return n={key:"isFirstInfoConf",value:t.toString()},J.info("click the first info conference guide modal to"),e.next=6,coreDb.saveLoginSetting(n);case 6:$dispatch(coreUi.toggleFirstInfoConfModalShow(!1)),J.info("The isFirstInfoConf flag save success");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initMobileFirstInfoConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreDb.queryLoginSetting({key:"isFirstInfoConf"});case 4:t=e.sent,void 0===t.value||""===t.value?(J.info("isFirstInfoConf",t.value,!0),$dispatch(coreUi.toggleFirstInfoConfModalShow(!0))):(J.info("isFirstInfoConf",t.true,!1),$dispatch(coreUi.toggleFirstInfoConfModalShow(!1)));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetFirstAcceptShareFlag=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return n={key:"isFirstAcceptShare",value:t.toString()},J.info("click the first info conference guide modal to"),e.next=6,coreDb.saveLoginSetting(n);case 6:$dispatch(coreUi.toggleFirstsharingModalShow(!1)),J.info("The isFirstAcceptShare flag save success");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initMobileFirstAcceptShare=function(){var e=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreDb.queryLoginSetting({key:"isFirstAcceptShare"});case 4:t=e.sent,void 0===t.value||""===t.value?(J.info("isFirstAcceptShare",t.value,!0),$dispatch(coreUi.toggleFirstsharingModalShow(!0))):(J.info("isFirstAcceptShare",t.true,!1),$dispatch(coreUi.toggleFirstsharingModalShow(!1)));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.mobileSendBfcp=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:t=e.sent,n=t.startData($getState().call.callId),r=0,a=1,n.then(function(e){0===e.result?J.info("[bfcp] use tup send bfcp success"):J.info("[bfcp] use tup send bfcp failed")}).catch(function(e){J.info("[bfcp] startResult error",e)});case 6:case"end":return e.stop()}},e,void 0)})),window.mobileStopBfcp=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:t=e.sent,n=t.stopData($getState().call.callId),r=0,a=1,n.then(function(e){0===e.result?J.info("[bfcp] use tup stop bfcp success"):J.info("[bfcp] use tup stop bfcp failed")}).catch(function(e){J.info("[bfcp] stopResult error",e)});case 6:case"end":return e.stop()}},e,void 0)}));var An={uiFramesize:9,uiDecodeFrameSize:12},xn={uiFrameRate:3,uiMinFrameRate:1},kn={ulDataRate:150,ulMinDataRate:150,ulMaxDataRate:150,ulMaxBw:300},Mn={bArs:1,bArsCtrlBitRate:1,bArsCtrlFec:0,bArsCtrlFrameRate:1,bArsCtrlFrameSize:0},Rn={ulHdEncoder:0,ulHdDecoder:0},Ln={uiParamSetNumber:0,pstVideoH264QualityLevelParamSet:4};window.sendToTupConfig=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("set mobile bfcp config start"),e.next=3,coreTup.getCallInstance();case 3:t=e.sent,t.configToTupBfcp(285476352,An),t.configToTupBfcp(285477120,xn),t.configToTupBfcp(285476608,kn),t.configToTupBfcp(285344768,"106"),t.configToTupBfcp(285737472,0),t.configToTupBfcp(285738240,1),t.configToTupBfcp(285477632,Mn),t.configToTupBfcp(285281792,100),t.configToTupBfcp(285280768,5),t.configToTupBfcp(285476864,Rn),t.configToTupBfcp(285478656,Ln),J.info("set mobile bfcp config success");case 16:case"end":return e.stop()}},e,void 0)}));var Dn=(t.grabBfcpConfirm=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreConf.isConfChairMan()?(n=(0,w.default)({},t),window.confirm(language.OTHER_IS_SHARING_ISNOT_INSTEAD).then(function(e){if(e.ret){var t=$getState(),r=t.call,a=r.callStatus,o=r.isSwitchShareBfcp,i=t.conf.isEnterDataConf,s="VIDEO_OUT"===a||"VIDEO_CONNECTED"===a,c=o&&s;(!!window.CLIENTCONFIG.ENABLE_IT_MEETING||!c&&i)&&window.isMobileSupportScreenShare?window.startShareScreen():coreUi.showPopoverMenu(n,coreUi.popoverTypeMap.TYPE_VIDEO_SHARE,coreUi.videoShareClick),$dispatch(coreUi.changeShowBfcp(!0))}else $dispatch(coreUi.changeShowBfcp(!1))})):(J.info("grabBfcpConfirm but not chairman"),alert(language.LANG_NATIVE_DATA_CONF_SOMEONE_SHARE_RIGHTNOW));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealAudientResult=function(e){if(J.info("change Current Audient Status."),window.CLIENTCONFIG.ISMOBILE){var t=$getState().conf.isAudience;return J.info("audience, meeting is audience, "+t),void(!1===t&&($dispatch(coreUi.changeAudientStatus(!0)),coreCall.changeDirectionForMobile(!1)))}$getState().conf.isAudience||($dispatch(coreUi.changeBidirectionStatus(!1)),$dispatch(coreUi.toggleSmallSvcVisible(!1)),coreCommon.MicControl.getInstance().muteMic(!0),coreCommon.SpkControl.getInstance().muteSpk(!1),coreCommon.CameraControl.getInstance().switchCameraStateAction(!1)),$dispatch(coreUi.changeAudientStatus(!0)),window.CLIENTCONFIG.ISWIN&&(0,b.notifyChangeAudientStatus)(e)}),Pn=t.dealChangeDirectionResult=function(e){if(J.info("change Current direction result."),window.CLIENTCONFIG.ISMOBILE){var t=e.param.result;e.param.opration_type;if(J.info("audience, change direction result = ",t),0!==t){var n=$getState().call.isBidirection,r=$getState().call.isDirecResult;if(n===r||!r)return void J.info("audience jsNotify return, direction is isBidirection = ",n);var a=language.TALK_REQUEST_TOAST;window.confirm(a,{leftButton:language.LANG_NATIVE_CLOSE,rightButton:language.TALK_REQUEST_AGAIN}).then(function(e){e.ret?(J.info("audience request change direction again "),Fn()):J.info("audience close change direction")})}}else{var o=0;e&&e.param&&(o=e.param.result),o?J.info("user change direction failed: "+o):J.info("user change direction succeed."),$dispatch(coreUi.ChangeDirectionResult(o)),window.CLIENTCONFIG.ISWIN&&(0,b.notifyChangeActiveBidirectionStatus)(e)}},Fn=(t.actionActiveDirection=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("change Current Direction Status Active."),$dispatch(coreUi.ChangeDirectionResult(0)),e.next=4,coreConf.changeActiveDirection(t);case 4:if(!(n=e.sent)||0!==n.result){e.next=9;break}return e.abrupt("return",!0);case 9:return J.error("change Current Direction Status failed: "+n.result),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionActiveDirectionForMobile=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().call.isBidirection,J.info("audience , you want to change your direction,  isBidirection = "+t),e.next=4,coreConf.changeActiveDirection(!t);case 4:n=e.sent,0===n.result&&$dispatch(coreUi.changeAudienceDirecResult(!t)),J.error("audience , you want to change your direction,  result = "+n.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Un=t.setRecordScheduserName=function(e){$getState().call.callStatus===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED&&(J.info("reacrd set conf setRecordScheduserName"),(0,L.setRecordSchednameLogic)(e))},Bn=t.isHasRecordPermission=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";J.info("reacrd isHasRecordPermission [recordType:"+e+"]");var t=$getState().conf,n=t.confHandle,r=t.isShowRecordType,a=t.selfRole;""!==e&&(r=e);var o=$getState().call.callStatus,i=$getState().login.deployMode;return J.info("reacrd set determine if the meeting has permission to record [deployMode:"+i+"] [callStatus:"+o+"] [confHandle:"+n+"] [isShowRecordType:"+r+"] [selfRole:"+a+"]"),!isNullOrEmpty(n)&&1===a&&o===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED&&(1===r||2===r)},Wn=t.getRecordStatus=function(){var e=$getState().conf.isReacrd;return J.info("reacrd getRecordStatus [isReacrd:"+e+"]"),e},Vn=(t.clearRecordInfoHandle=function(){(0,L.clearRecordInfoLogic)()},t.actionCloudRecordRequest=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("reacrd actionCloudRecordRequest[2] messageId:",t,"switchType:",n),!isNullOrEmpty(n)){e.next=4;break}return J.error("switchType is null or undefined"),e.abrupt("return");case 4:return r={messageId:t,switchType:n},e.next=7,coreConf.cloudRecordRequest(r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),Hn=t.handleSetRecordVideoResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("reacrd handleSetRecordVideoResult[2] data:",(0,f.default)(t)),n=t.param.result,r=n.switch_type,a=n.reson,o=n.record_type,i=n.result,J.info("handleSetRecordVideoResult switch_type",r,"reson",a,"record_type",o,"result",i),0!==i){e.next=8;break}0===o&&1===r?(J.info("start reacrd success"),(0,L.isReacrdLogic)(r),(0,L.haveRecordedLogic)(1)):0===o&&0===r&&(J.info("stop reacrd success"),(0,L.isReacrdLogic)(r)),e.next=18;break;case 8:return J.error("start/stop reacrd failed ",a),s={isReacrd:0},J.info("setParam, switch_type = ",0),e.next=13,N.NativeInterface.setParam(s);case 13:c=e.sent,J.info("setParam, res = ",c),u=null,u=0===a?language.NO_RECORDING_PERMISSION:1===a?language.CONFERENCE_RECORDING_IS_NOT_SUPPORTED:2===a?language.CONFERENCE_LIVE_BROADCAST_IS_NOT_SUPPORTED:50331819===a?language.START_RECORDING_FAILED_BY_NO_SERVICE:language.START_PAUSE_RECORDING_FAILED,Jn(u);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$n=t.handleVideoRecordResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("reacrd handleVideoRecordResult[2] data:",(0,f.default)(t)),n=t.param,r=n.switch_type,a=n.result,J.info("handleVideoRecordResult switch_type",r,"result",a),o=$getState().conf.isShowRecordType,0!==a){e.next=9;break}1===r?(J.info("start reacrd success"),(0,L.isReacrdLogic)(r,o),(0,L.haveRecordedLogic)(1)):0===r&&(J.info("stop reacrd success"),(0,L.isReacrdLogic)(r,o)),e.next=18;break;case 9:return i={isReacrd:0},J.info("setParam, switch_type = ",0),e.next=13,N.NativeInterface.setParam(i);case 13:s=e.sent,J.info("setParam, res = ",s),c=null,c=11070003===a?language.SYSTEM_OPERATE_FAILED:11072021===a?language.CONFERENCE_RECORDING_RESOURCE_IS_NOT_ENOUGH:11072022===a?language.CONFERENCE_RECORDING_OPERATE_FAILED:11072023===a?language.CONFERENCE_RECORDING_NO_ATTENDE_IN:11072063===a?language.CONFERENCE_RECORDING_APPLY_RESOURCE:11072066===a?language.CONFERENCE_RECORDING_NOT_PURCHASE:11072067===a?language.CONFERENCE_RECORDING_NO_ENOUGH:15021001===a?language.CONFERENCE_RECORDING_MEDIA_RESOURCE_NOT_ENOUGH:language.START_PAUSE_RECORDING_FAILED,11072063!==a||window.CLIENTCONFIG.ISWIN?Jn(c):window.ToastNew(c);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Gn=t.handleConfStateDirectBroadCastIndresult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("reacrd handleConfStateDirectBroadCastIndresult[2] data:",(0,f.default)(t)),(0,L.isReacrdLogic)(t.param.is_record),n={isReacrd:t.param.is_record},J.info("setParam, data.param.isReacrd = ",t.param.is_record),e.next=6,N.NativeInterface.setParam(n);case 6:r=e.sent,J.info("setParam, res = ",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),jn=t.handleRecordVideoStatusChairmanIndResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("reacrd handleRecordVideoStatusChairmanIndResult[2] data:",(0,f.default)(t)),!t||!t.param){e.next=12;break}return n=t.param.result,r=n.bro_rec_status,a=n.sup_bro_record,o=a||0,i=r||0,(0,L.isShowReacrdTypeLogic)(o),(0,L.isReacrdLogic)(i),s={isReacrd:i,recordType:o,isHaveRecordPriviledge:Bn(o)},e.next=10,N.NativeInterface.setParam(s);case 10:c=e.sent,J.info("setParam, res = ",c);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),qn=t.setRecordStatusForNative=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("setRecordStatusForNative"),t={isReacrd:Wn(),recordType:$getState().conf.isShowRecordType,isHaveRecordPriviledge:Bn()},e.next=4,N.NativeInterface.setParam(t);case 4:n=e.sent,J.info("setRecordStatusForNative setParam, res = ",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Jn=t.handleShowErrorMsgBox=function(e){if(J.info("reacrd handleShowErrorMsgBox errorTile:",e),!isNullOrEmpty(e)){var t=$getState().conf,n=t.confHandle,r=t.isVideoConf;if(window.CLIENTCONFIG.ISWIN&&r&&!isNullOrEmpty(n)){var a=$getState().conf.videoFrameHwnd,o=k.getAvcFrameHandles(),i={frameHwnd:0!==a?a:o,dialog_type:1,content:e};(0,E.showMessageBox)(i)}else alert(e)}},Yn=(t.AsErrorDeal=function(e){var t=language[constant.AS_ERRORCODE_LOG_INFO[e]];J.error(" AsErrorDeal,errorCode "+e+"error msg "+t),alert(t||"unknow error")},t.handleMobileBfcpStatus=function(){J.info("[bfcp] handleMobileBfcpStatus"),$dispatch(coreUi.changeSendBfcp(!1)),$dispatch(coreUi.changeReceiveBfcp(!1))}),Kn=(t.createMaxHubMeeting=function(){J.info("maxhub create instant conference");var e=$getState(),t=parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.CreateDataConference"]),n=t?constant.CON_CREATE_MEETING_STATUS.DATA_MULTIMEDIA_TYPE:constant.CON_CREATE_MEETING_STATUS.VIDEO_TYPE;J.info("maxhub create data conference flag: ",t+", mediaType:",n);var r=e.myInfo,a=getContactName(e.myInfo),o=a+language.CONFERENCE_SUBJECT_INFO,i=bt(e.selectBox.selectBox_tempSelectedList);i.push(r);var s=Nn(i),c=e.conf.isReacrdSwitch&&2||0,u=constant.CONTACT_SELECT_DIALOG_TYPE.CONTACT_SELECT_DIALOG_TEMPMEETING;oe(r,s,{group_id:""},n,1,!0,o,u,c)},t.changeStatusOfConference=function(e){$dispatch(coreUi.changeStatusOfConf(e))},t.recoredOldPwd=function(e){$dispatch(coreUi.recoredOldPassword(e))},t.changeFlagClickJoinConfBtn=function(e){J.info("click join-conf btn to join conference"),$dispatch(coreUi.changeflagClickJoinConfBtn(e))},t.recordConferencePasswordDetail=function(e){J.info("record conference pwd"),e.conf_id===$getState().conf.confServerId&&$dispatch(coreUi.changeRecordConfPwdDetail(e))}),zn=(t.recordConferenceOldId=function(e){J.info("record conference recordConferenceOldId"),$dispatch(coreUi.changeRecordConferenceOldId(e))},t.recordFlagIsFirstTimeRun=function(e){J.info("record conference recordFlagIsFirstTimeRun"),$dispatch(coreUi.changeFlagIsFirstTimeRun(e))},t.RecordIsIntoInterval=function(e){J.info("record conference RecordIsIntoInterval"),$dispatch(coreUi.changeIsIntoInterval(e))},t.showConfInfo=function(e){var t=e.conf_id;window.lastSelectedId.confId;un(e),kt(t,e.cycle_conf_id),coreUi.changeIsShowCopyTip(!1),fn([])},function(e){J.info("handleChangeConfHanlde in logic,hanlde = "+e),$dispatch(coreUi.changeConfHandle(e)),D.ToolbarManager.setConfHandle(e)}),Qn=function(e){$dispatch(coreUi.changeConfSubject(e)),window.CLIENTCONFIG.ISWIN&&(k.setSubject(e),$getState().conf.isSvcConf&&A.SvcAtdManager.setSubject(e))},Zn=function(e){$dispatch(coreUi.changeCallId(e))},Xn=function(e){$dispatch(coreUi.changeConfRole(e))},er=function(e,t){$dispatch(coreUi.changeConfServerId(e)),A.SvcAtdManager.setConfServerId(isNullOrEmpty(t)?e:t),k.setConfServerId(isNullOrEmpty(t)?e:t)},tr=function(e){J.info("confInfoNotify vmrid is not empty. "),$dispatch(coreUi.changeVmrId(e))},nr=function(){J.info("handleChangeIsSvcConf true"),$dispatch(coreUi.changeIsSvcConf(!0)),H.changeIsSvcConf()},rr=function(e){J.info("handlechangeSsrcRange ssrcRange",e),$dispatch(coreUi.changeSSRCRange(e))},ar=function(){window.pairId&&0!==window.pairId&&(J.info("send maxhub pair join conf failed"),(0,U.sendJoinPairResult)(window.pairId,constant.PAIR_CONF_RESULT.INVALID)),J.info("maxhubCheckConfType, not video conf, end the conf in maxhub"),Ge(),alert(language.MAXHUB_INVALID_CONF)},or=t.oneKeyEnterConf=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a){var o,i,s,c,u,f,l,d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o={bConf:!0,bVideo:a,number:t,contactInfo:{number:t},enterConfParam:{pstconfparam:{confid:n,access_code:t,conf_paswd:r},call_type:1},isConsultTransfer:!1},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=9;break}return e.next=4,coreUi.checkMobileMultiDevice(o);case 4:if(!(i=e.sent)){e.next=9;break}return J.info("multi device logined oneKeyEnterConf"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 9:return e.next=11,ae(a);case 11:if(s=e.sent,0===s.code){e.next=15;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 15:return H.showConfOutPage(a,!1,"",t),$dispatch(coreUi.saveCalleeInfo({})),c=!1,u=!1,c=!$getState().conf.isOpenCameraDe,u=!$getState().conf.isOpenMicDe,f={confAcs:t,confId:n,confPwd:r,isVideo:a,deviceSet:{isCloseCameraDe:c,isMuteMicDe:u},isVMR:d},e.next=24,coreConf.oneKeyEnterConfService(f);case 24:if(l=e.sent,$dispatch(coreUi.changeEnterConfState(!1)),!l){e.next=31;break}return J.info("onekeyenterconf send to TUP suc"),e.abrupt("return",!0);case 31:return J.info("onekeyenterconf send to TUP fails"),H.closeConfPage(!1,!1,-2,language.ENTER_CONF_FAIL),H.clearAfterConfEnd(!1,!1),e.abrupt("return",!1);case 35:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),ir=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r){var a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("callEnded, callId: "+r+"reason_code is "+t),a=q.getCallEndedErrorTip(t,n),H.closeConfPage(!1,!0,t,a),H.clearAfterConfEnd(!1,!0,t,!0),coreCommon.dispatchModuleEvent("pluginConfEndNotify",{code:t,msg:a});case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),sr=t.enterConfInConfList=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,m=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(J.info("enterConfInConfList: isPairConf:"+m),""===t&&(t=$getState().conf.currentConfInfo),n=t.access_number,r=$getState().login.isSupportAS,a=r?t.conf_id:isNullOrEmpty(t.vmr_id)?t.conf_id:t.vmr_id,J.info("enterConfInConfList confid:"+a),o={number:n,conf_id:a,cycle_conf_id:t.cycle_conf_id},i=t.media_type,s=coreCommon.isVideoConf(i),c={pstconfparam:{confid:t.conf_id,access_code:t.access_number,conf_paswd:""},call_type:1},u={bConf:!0,bVideo:s,number:n,contactInfo:o,enterConfParam:c,isConsultTransfer:!1},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=19;break}return e.next=14,coreUi.checkMobileMultiDevice(u);case 14:if(!(f=e.sent)){e.next=19;break}return J.error("checkMultiDevice is false,cannot enterConfInConfList"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 19:return e.next=21,ae(s,m);case 21:if(l=e.sent,0===l.code){e.next=26;break}return J.error("resOfCheck is false,cannot enterConfInConfList"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 26:return d=t.conf_subject,H.showConfOutPage(s,!1,d,""),$dispatch(coreUi.saveCalleeInfo({})),J.info("enterConfInConfList,enter conf oneKeyEnterConf"),p={confId:o.conf_id,cycle_conf_id:o.cycle_conf_id},e.next=33,coreConf.enterConfInConfListService(p);case 33:if(h=e.sent){e.next=42;break}return J.error("enterConfInConfList fail"),H.closeConfPage(!1,!1,-2,language.ENTER_CONF_FAIL),H.clearAfterConfEnd(!1,!1),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 42:$dispatch(coreUi.changeEnterConfState(!1)),In(constant.ONLINE_STATUS.BUSY);case 44:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),cr=(t.lockConfFuc=function(){window.confirm(language.LOCK_CONFERENCE_PROMPT).then(function(e){e.ret&&(J.info("userClick lockConfFuc confirm"),coreConf.lockConfService(1))})},t.unlockConfFuc=function(){J.error("userClick unlockConfFuc"),coreConf.lockConfService(0)},function(e){var t=void 0,n=!0,r=!1,a=void 0;try{for(var o,s=(0,i.default)(e);!(n=(o=s.next()).done);n=!0){var c=o.value;if(c.is_self){t=c.number;break}}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return t}),ur=t.compressreleasePreservate=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=cr(t),e.next=4,Te(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),J.error("compressreleasePreservate:",e.t0);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),fr=(t.compressRemoveAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=-1,r=$getState().conf.memberListInfo,r.forEach(function(e){e.number===t&&(n=e.state)}),!(5===n||6===n&&window.isSupportiDo)){e.next=8;break}return e.next=6,Be(t);case 6:e.next=10;break;case 8:return e.next=10,Ue(t);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.releaseChairmanFuc=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm(language.MEETING_WILL_HAVE_NO_CHAIRMAN).then(function(e){e.ret&&(J.info("userClick  releaseChairmanFuc confirm"),ur(t))});case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestChairmanFuc=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=$getState().conf.memberListInfo,n=cr(t),(r=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=8;break}lr(),e.next=23;break;case 8:if(a=$getState().login.tempConfInfo,o=decodeURIComponent(escape(window.atob(a.chairman_pwd))),window.isSupportiDo){e.next=20;break}if(!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=17;break}return J.info("SMC first Rest"),e.next=15,Ae(o,n);case 15:e.next=18;break;case 17:lr();case 18:e.next=23;break;case 20:return J.info("SMC first iDo"),e.next=23,Ae(o,n);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),J.error("requestChairmanFuc",e.t0);case 28:case"end":return e.stop()}},e,void 0,[[0,25]])}));return function(){return e.apply(this,arguments)}}()),lr=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=$getState().conf.memberListInfo,n=$getState().login.deployMode,r=cr(t),window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISWIN?(a=$getState().conf.isShowMemberListNew,a?(o=$getState().conf.showqusetchairman)||$dispatch(coreUi.showqusetchairman()):window.CLIENTCONFIG.ISWIN?(coreUi.changeRightBtnDisabled(!0),window.notifyPrompt("",{isNotMessage:!0,placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(e){if(e.ret)pr(r,e.param.input_type_password),window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);else{var t=$getState().common.showResetfuc;t&&t(!1)}})):(coreUi.setMInputValueLogic(""),window.notifyPrompt(language.NATIVE_CHAIRMAN_PASSWORD,{placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"tel",className:"number-password-box m-dialog-prompt"}).then(function(e){if("callMain"===window.getRoute()){var t=$getState().common.showResetfuc;t&&t()}e.ret&&(J.info("userClick  confirmRequestPreservate"),dr(r,e.param.input_type_tel),window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1))}))):window.notifyPrompt("",{isNotMessage:!0,placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=5;break}return n=$getState().login.deployMode,e.next=4,Ae(t.param.input_type_password,r);case 4:window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}())}catch(e){J.error("reRequestChairman",e)}case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),dr=function(){var e=(0,I.default)(v.default.mark(function e(t,n){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae(n,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),J.error("compressRequestPreservate:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),pr=function(){var e=(0,I.default)(v.default.mark(function e(t,n){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae(n,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),J.error("requestPreservate:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}();t.actionChangeConfNickName=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$getState().conf.memberListInfo,a=cr(r),!isNullOrEmpty(a)){e.next=5;break}return J.error("changeNickName  reqNumber is null or undefined, can not change your nickname"),e.abrupt("return");case 5:return J.info("changeNickName  action change, UseNickNameAllConf = ",n),$dispatch(coreUi.changeUseNickNameAllConf(n)),$dispatch(coreUi.changeConfNickName(t)),o={nickName:t,reqNumber:a},e.next=11,coreConf.changeNickName(o);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.cloudRecordRequestFuc=function(){var e=(0,I.default)(v.default.mark(function e(t,n){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J.info("reacrd cloudRecordRequestFuc[1] messageId:",t,"switchType:",n),e.next=4,Vn(t,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),J.error("cloudRecordRequestFuc",e.t0);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}();window.stopRecallTimer=function(){W.terminateReCall()};var hr=(t.createConfByTeamList=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r){var a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$getState(),o=a.myInfo,oe(o,n,r,t,!1);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.cancelConf=function(e){window.confirm(language.CONFIRM_TO_CANCEL_THE_CONF).then(function(){var t=(0,I.default)(v.default.mark(function t(n){return v.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ret){t.next=7;break}return J.info("userClick confirmBtn to cancel the meeting"),t.next=4,Lt.wait();case 4:coreConf.cancelConfService(e),t.next=8;break;case 7:J.info("userClick cancelBtn to cancel the meeting");case 8:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}())},t.handleCancelConf=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:J.info("handle cancel conf result:",t.param.error_code),mr(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),mr=t.createCancelConfEvent=function(e){var t=new Event("cancelInfoResult");t.data={ret:e},window.dispatchEvent(t)},vr=function(e){for(var t=0;t<e.length;t++){var n={},r=[];n.enable_conf_sign_in=0,n.conf_subject=e[t].conf_subject,n.start_time=e[t].start_time,n.end_time=e[t].end_time,n.media_type=e[t].media_type,n.conf_id=e[t].conf_id,n.general_pwd="",n.guest_pwd="";for(var a=0;a<e[t].confmembers.length;a++){var o={};o.role=0,o.name=e[t].confmembers[a].name,o.number=e[t].confmembers[a].number,r[a]=o}gr(n,r),$dispatch(coreUi.changehasConfInfo("yes"))}},gr=t.addToAllConfInfo=function(e,t){J.info("add confInfo to AllConfInfo, confId = "+e.conf_id);var n=$getState().conf.allConfInfo,r=(0,h.default)([],n),a={};a.conf_list_info=e,a.attendee=t,r.push({conf_id:e.conf_id,confInfo:a}),$dispatch(coreUi.changeAllConfInfo(r))},Cr=function(){J.info("update AllConfInfo");var e=$getState().conf.isEnableHistoryConfList,t=[];t=e?$getState().conf.allConfList:$getState().conf.conflist;var n=$getState().conf.allConfInfo,r=(0,h.default)([],n),a=!0,o=!1,s=void 0;try{for(var c,u=(0,i.default)(n);!(a=(c=u.next()).done);a=!0){for(var f=c.value,l=!1,d=0;d<t.length;d++)if(f.conf_id===t[d].conf_id){l=!0;break}l||(J.info("delete confinfo in AllConfInfo, conf_id = "+f.conf_id),r.splice(f,1))}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}coreCommon.dispatchModuleEvent("pluginConfListNotify",t),$dispatch(coreUi.changeAllConfInfo(r))},Sr=(t.formatConfId=function(e){if(isNullOrEmpty(e))return"";for(var t=e.length,n="",r=0;r<t;r+=3){n+=e.substring(r,r+3)+" "}var a=n.split(" "),o=a[a.length-1].length;return o<1&&(n=n.substring(0,n.length-1-o),n+=a[a.length-1]),n},t.recordIsImGroupCreateConf=function(e){J.info("record conference recordIsImGroupCreateConf"),$dispatch(coreUi.changeIsImGroupCreateConf(e))},function(e){var t=[],n=e.filter(function(e){return 1===e.role}),r=e.filter(function(e){return 1===e.is_self}),a=e.filter(function(e){return 1===e.hand_state}),o=e.filter(function(e){return 1!==e.role&&1!==e.is_self&&1!==e.hand_state});return t=n.concat(r,a,o),t=(0,T.unique)(t)}),wr=function(e){var t=e.filter(function(e){return 1===e.role}),n=isNullOrEmpty(t)?0:t[0].is_self,r=e.filter(function(e){return 1===e.hand_state&&1!==e.role}),a=r.length;if(coreCommon.isMobile()){var o="",i="";J.info("HandUpTips to native,handUp attendees cont is:",a),1===a?(i=r[0].name,o=language.ONE_ATTENDEE_HAND_UP.format(i)):1<a&&(i=""+a,o=language.MORE_ATTENDEES_HAND_UP.format(i)),1===n?(J.info("handUp tip's length is",o.length),window.HandUpAttendeesToNative(o)):window.HandUpAttendeesToNative("")}J.info("current handUp attendees num is:",a),$dispatch(coreUi.changeHandUpAttendeesNum(a))},_r=function(e){if(window.CLIENTCONFIG.ISMAC){var t=$getState().conf,n=t.svcBigPicInfo,r=t.isSvcConf,a=t.svcViewMode,o=t.sharePersonNum;if(r&&1!==a&&2!==a){var i=void 0;if(n.hasOwnProperty("number")&&(J.info("svcBigPicInfo exists number property"),i=n.number),o&&(J.info("confinfo exists sharePersonNum"),i=o),!isNullOrEmpty(i)){J.info("updateNameToBigPicInfoForMac start get matchMember");var s=e.filter(function(e){return e.userInfo.number===i})[0];s&&(J.info("exists matchMember to update left-bottom name"),$dispatch(coreUi.changeSvcBigPicInfo((0,h.default)({},n,{name:s.userInfo.name}))))}}}},Ir=function(e){window.CLIENTCONFIG.ISMOBILE||coreConf.isInDataScreenOrWbSharing()&&(e=e.map(function(e){return{user_num:e.userInfo.number,user_name:e.userInfo.name}}),C.default.resolve().then(function(){J.info("updateNameToMemberService update memberList"),coreConf.updateMemberName(e)}).catch(function(){J.info("updateNameToMemberService error")}))},br=function(e){var t=$getState().conf,n=t.sharePersonNum,r=t.sharePersonName;if(!isNullOrEmpty(n)){var a=e.filter(function(e){return e.number===n||e.userInfo.bind_no===n});a.length>0&&a[0].userInfo.name!==r&&($dispatch(coreUi.changeSharePersonName(a[0].userInfo.name)),window.CLIENTCONFIG.ISMOBILE?window.notifyScreenShareOwner(a[0].userInfo.name):window.CLIENTCONFIG.ISWIN&&coreConf.setDataConfParams({shareOwnerName:a[0].userInfo.name}))}},Nr=function(e){var t=e.address,n=e.port,r=e.method,a=e.path,o=e.header,i=void 0===o?{}:o;return{url:"https://"+t+":"+n+"/"+a,type:r,header:(0,h.default)({},i),body:""}},Er=function(e,t){return{address:e,port:t,method:constant.REQUEST_TYPE.GET,header:{}}},yr=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a=t.basisObj,o=t.authToken,i=t.confId,s=t.chairmanPas;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,h.default)({},a,{path:"conferences/"+i+"/getRegionRandom",header:{password:s,Authorization:"Basic "+o}}),r=Nr(n),e.abrupt("return",coreHttp.sendSyncRequest(r).then(function(e){if(J.info("the getRegionRandom jk result:"+e.result),e&&e.param&&e.param.recv_body){var t=JSON.parse(e.param.recv_body);if(t.hasOwnProperty("returnCode")&&t.hasOwnProperty("returnDesc"))return J.info("the getRegionRandom jk has returncode:"+t.returnCode+" returnDesc:"+t.returnDesc),0===t.returnCode&&"Success"===t.returnDesc&&t.hasOwnProperty("data")?{regionIp:t.data.regionIP,uuid:t.data.uuid,message:"SUCCESS"}:{message:"FAIL",code:t.returnCode,codeKey:t.returnDesc};J.info("the getRegionRandom jk not has parame")}return J.info("the getRegionRandom jk not has recv_body param"),{}}));case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Tr=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a=t.basisObj,o=t.authToken;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,h.default)({},a,{path:"rest/usg/sso/v1/auth/skipnonce",method:constant.REQUEST_TYPE.POST,header:{Authorization:"Basic "+o}}),r=Nr(n),e.abrupt("return",coreHttp.sendSyncRequest(r).then(function(e){if(J.info("the getSkipnonce jk result:"+e.result),e&&e.param&&e.param.recv_body){var t=JSON.parse(e.param.recv_body);if(t.hasOwnProperty("returnCode")&&t.hasOwnProperty("returnMessage"))return J.info("the getSkipnonce jk has returncode:"+t.returnCode+" returnMessage:"+t.returnMessage),"000000000"===t.returnCode&&"Success"===t.returnMessage&&t.hasOwnProperty("data")?{nonce:t.data,message:"SUCCESS"}:{message:"FAIL",code:t.returnCode,codeKey:t.returnMessage};J.info("the getSkipnonce jk not has parame")}return J.info("the getSkipnonce jk not has recv_body param"),{}}));case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.hostMeetToJumpWebControl=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p=t.confId,h=t.chairmanPas;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.info("hostMeetToJumpWebControl start"),e.next=3,coreAccount.getLoginModel();case 3:return n=e.sent,r=n.authToken,a=n.serverUportalAddress,o=n.serverUportalPort,i=Er(a,o),e.next=10,yr({basisObj:i,authToken:r,confId:p,chairmanPas:h});case 10:return s=e.sent,e.next=13,Tr({basisObj:i,authToken:r});case 13:if(c=e.sent,!isNullOrEmpty(s)&&!isNullOrEmpty(c)){e.next=19;break}return J.info("request failed, no return value"),window.ToastNew(language.HOSTING_MEETING_FAILED,2),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HOST_MEET_TO_JUMP_WEB,params:[p,{},{}]}),e.abrupt("return",!1);case 19:if("SUCCESS"!==s.message||"SUCCESS"!==c.message){e.next=28;break}return J.info("request sucess, Jump link web control"),u="en-US",window.CLIENTCONFIG.DEFAULT_LANGUAGE===window.langcode.toString()&&(u="zh-CN"),f="https://"+s.regionIp+"/confportal/?language="+u+"#/conference/"+p+"/"+s.uuid+"?nonce="+c.nonce,appService.openUrl(f),window.ToastNew(language.HOSTING_MEETING_SUCCESS,2),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HOST_MEET_TO_JUMP_WEB,params:[p,s.message,c.message]}),e.abrupt("return",!0);case 28:if("FAIL"!==s.message){e.next=33;break}return l=constant.HOST_MEET_JUMP_ERROR_VALUE[s.code]||"HOSTING_MEETING_FAILED",window.ToastNew(language[l],2),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HOST_MEET_TO_JUMP_WEB,params:[p,s.message,s.code,c.message,c.code]}),e.abrupt("return",!1);case 33:if("FAIL"!==c.message){e.next=38;break}return d=constant.HOST_MEET_JUMP_ERROR_VALUE[c.code]||"HOSTING_MEETING_FAILED",window.ToastNew(language[d],2),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HOST_MEET_TO_JUMP_WEB,params:[p,s.message,s.code,c.message,c.code]}),e.abrupt("return",!1);case 38:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.showConfMemberPage=function(){J.info("go to mConfMemberPage"),window.goRoute("mConfMemberPage")};var Or=t.handleChangeVmrInfoResult=function(e){J.info("change guest**d result=",e.param.result),0===e.param.result?(J.info("change guest**d success"),window.Toast(language.CHANGE_GUEST_PWD_SUCCESS,2),coreConf.getVRMList()):(J.info("change guest**d failed"),alert(language.CHANGE_GUEST_PWD_FAILED))},Ar=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r={},a=coreConf.filterVmrConfListInfo({vmrInfo:t}),e.next=5,coreDb.queryUserConfig({key:"curDBInfoForCreateConf"});case 5:if(o=e.sent,!o.value){e.next=12;break}if(n=JSON.parse(o.value),!isNullOrEmpty(n)){e.next=10;break}return e.abrupt("return");case 10:e.next=14;break;case 12:i=a.filter(function(e){return e.confId===n.confId}),i.length>0&&(r=i[0],s={key:"curDBInfoForCreateConf",value:(0,f.default)({isCreateUseFixedConfID:n.isCreateUseFixedConfID,idType:r.idType,vmrId:r.vmrId,confId:r.confId,confSubject:n.confSubject,maxParties:n.maxParties,chairmanPwd:r.chairmanPwd,guestPwd:r.guestPwd,name:r.name})},coreDb.saveUserConfig(s));case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),xr=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState(),r=n.conf,a=r.curCreateConfIDItem,o=r.curConfIDItem,i=coreConf.filterVmrConfListInfo({vmrInfo:t}),s=i.filter(function(e){return e.confId===a.confId}),c=s.length>0&&s[0],""===o.confId?($dispatch(coreUi.setUseFixedConfIDState(!0)),$dispatch(coreUi.changeCurConfIDItem({idType:1,vmrId:t.vmr_id,confId:t.conf_id,confSubject:"",maxParties:0,chairmanPwd:t.chairman_pwd,guestPwd:t.guest_pwd,name:t.name}))):o.confId&&""!==o.confId&&(u=i.filter(function(e){return e.confId===o.confId}),f=u.length>0&&u[0],l=(0,w.default)({},(0,h.default)(o,{chairmanPwd:f.chairmanPwd,guestPwd:f.guestPwd,name:f.name})),$dispatch(coreUi.changeCurConfIDItem(l))),a.confId&&""!==a.confId&&(d=(0,w.default)({},(0,h.default)(a,{chairmanPwd:c.chairmanPwd,guestPwd:c.guestPwd,name:c.name})),$dispatch(coreUi.changeCurCreateConfIDItem(d))),(!c&&a.confId||c&&c.hasOwnProperty("vmrStatus")&&c.vmrStatus)&&(J.info("last vmr conf stoped"),$dispatch(coreUi.changeCurCreateConfIDItem({idType:constant.AS_CONF_ID_TYPE_MAP.RANDOM_CONF_ID,confId:"",vmrId:"",confSubject:"",maxParties:0,guestPwd:"",chairmanPwd:"",name:""})),$dispatch(coreUi.setCreateUseFixedConfIDState(!1)));case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},201:function(e,t,n){e.exports={default:n(273),__esModule:!0}},204:function(e,t,n){e.exports=n(0)(133)},205:function(e,t,n){e.exports=n(0)(241)},206:function(e,t,n){e.exports=n(0)(589)},207:function(e,t,n){var r=n(11),a=n(208),o=n(141),i=n(27),s=n(209);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,l=6==e,d=5==e||l,p=t||s;return function(t,s,h){for(var m,v,g=o(t),C=a(g),S=r(s,h,3),w=i(C.length),_=0,I=n?p(t,w):c?p(t,0):void 0;w>_;_++)if((d||_ in C)&&(m=C[_],v=S(m,_,g),e))if(n)I[_]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return _;case 2:I.push(m)}else if(f)return!1;return l?-1:u||f?f:I}}},208:function(e,t,n){e.exports=n(0)(236)},209:function(e,t,n){var r=n(210);e.exports=function(e,t){return new(r(e))(t)}},210:function(e,t,n){var r=n(15),a=n(211),o=n(6)("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},211:function(e,t,n){e.exports=n(0)(595)},212:function(e,t,n){var r=n(24);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},213:function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function r(e){return"boolean"==typeof e}function a(e){return null===e}function o(e){return null==e}function i(e){return"number"==typeof e}function s(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function u(e){return void 0===e}function f(e){return"[object RegExp]"===v(e)}function l(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===v(e)}function p(e){return"[object Error]"===v(e)||e instanceof Error}function h(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function v(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=a,t.isNullOrUndefined=o,t.isNumber=i,t.isString=s,t.isSymbol=c,t.isUndefined=u,t.isRegExp=f,t.isObject=l,t.isDate=d,t.isError=p,t.isFunction=h,t.isPrimitive=m,t.isBuffer=e.isBuffer}).call(t,n(144).Buffer)},215:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SvcAtdManager=t.WatchRequestManager=t.DecoderManager=t.HwndManager=t.SsrcManager=t.Atdlogger=void 0;var o,i,s,c,u,f,l,d,p,h,m=n(159),v=a(m),g=n(158),C=a(g),S=n(149),w=a(S),_=n(201),I=a(_),b=n(941),N=a(b),E=n(172),y=a(E),T=n(1),O=a(T),A=n(2),x=a(A),k=n(69),M=a(k),R=n(135),L=a(R),D=n(4),P=a(D),F=n(200),U=n(216),B=r(U),W=(n(335),n(242)),V=n(260),H=n(259),$=r(H),G=n(814),j=n(356),q=coreLogger.getLogger("conf")("logic/video/svcManager");window.refreshAtdlistTimer=null,window.haveCreateVideoFrame=!1;window.lockHandleAtdlist=!1,window.reportOnlineAtdNumTimer=null;var J=t.Atdlogger=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";if(t&&!isNaN(t.length))for(var a=0;a<t.length;a++)r=0===n?r+";name:"+(t[a]&&t[a].name?t[a].name.length>2?t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):t[a].name.substr(0,1)+"**":"")+",number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"")+",ssrc:"+(t[a]&&t[a].ssrc?t[a].ssrc:"")+",is_same_grade_mcu:"+(t[a]&&t[a].is_same_grade_mcu?t[a].is_same_grade_mcu:"")+",wnd_handle:"+(t[a]&&t[a].wnd_handle?t[a].wnd_handle:""):r+";name:"+(t[a]&&t[a].userInfo&&t[a].userInfo.name?t[a].userInfo.name.substr(0,1)+"**"+t[a].userInfo.name.substr(-1):"")+",number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"");q.info(e,r)},Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";if(t&&!isNaN(t.length))for(var a=0;a<t.length;a++)r=0===n?r+";number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"")+",ssrc:"+(t[a]&&t[a].ssrc?t[a].ssrc:"")+",width:"+t[a].width+",height:"+t[a].height:1===n?r+";render:"+t[a].render+",ssrc:"+(t[a]&&t[a].ssrc_id?t[a].ssrc_id:"")+",width:"+t[a].width+",height:"+t[a].height:r+";confName:"+(t[a]&&t[a].confName?t[a].confName.substr(0,1)+"**"+t[a].confName.substr(-1):"")+",hwnd:"+t[a].hwnd;q.info(e,r)},K=function(){var e=$getState().call.iSreceivingBFCP,t=$getState().conf,n=t.bfcpFrameHwnd,r=t.bfcpIsBigHwnd,a=t.dataIsBigHwnd;return q.info("iSreceivingBFCP = "+e+", bfcpFrameHwnd = "+n+", bfcpIsBigHwnd = "+r),q.info("isInDataScreenOrWbSharing  = "+coreConf.isInDataScreenOrWbSharing()+", dataIsBigHwnd = "+a),!0===e&&n>0&&r||!0===coreConf.isInDataScreenOrWbSharing()&&!0===a},z=t.SsrcManager=(i=o=function e(){(0,P.default)(this,e)},o.addSvcSSRC=function(e){var t=$getState().conf.usedSsrcList,n=(0,L.default)([],t);return n.push(e),$dispatch(coreUi.changeUsedSvcSSRCList(n)),q.info("used ssrc list is "+(0,M.default)(n)),e},o.removeSvcSSRC=function(e){if(q.info("removeSSRC: "+e,e),-1===e)return!1;var t=$getState().conf.usedSsrcList,n=(0,L.default)([],t),r=n.indexOf(e);return-1===r?(q.info("unexpected removeSSRC",n,e),!1):(n.splice(r,1),$dispatch(coreUi.changeUsedSvcSSRCList(n)),!0)},o.clearAllSvcSSRC=function(){q.info("clearAllSvcSSRC"),$dispatch(coreUi.changeUsedSvcSSRCList([]))},o.assignSsrc=function(e){var t=$getState().conf,n=t.ssrcRange,r=t.usedSsrcList,a=constant.SVC_SSRC_FLAG.LOCAL_SSRC;if(0===e.is_self){for(a=n.max;r.indexOf(a)>=0;)a--;if(a<n.min)return q.info("assignSsrc ssrc "+a+" is not include in ssrcRange "+n.min+"-"+n.max),null}return z.addSvcSSRC(a),a},o.updateAllSsrcOfAtds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];z.clearAllSvcSSRC();for(var t=0;t<e.length;t++){var n=z.assignSsrc(e[t]);e[t].ssrc=n}return J("updateAllSsrcOfAtds,new svcAtd is",e),e},i),Q=t.HwndManager=(c=s=function e(){(0,P.default)(this,e)},s.createHwndsByType=function(){var e=(0,x.default)(O.default.mark(function e(t,n,r){var a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createHwndsByType start, count = "+t+", hwnd = "+n),!(t<=0)){e.next=3;break}return e.abrupt("return");case 3:return a=$getState().conf.videoFrameHwnd,e.next=6,W.NativeInterface.createWindows(a,t,n,r);case 6:return o=e.sent,Q.handleChangeSvcWndHandles(o),q.info("createHwndsByType end,hwndList = "+(0,M.default)(o)),e.abrupt("return",o);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),s.createHwnds=function(){var e=(0,x.default)(O.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createHwnds start, count = "+o+", hwnd = "+i),!(o<=0)){e.next=3;break}return e.abrupt("return");case 3:for(t=$getState().conf.videoFrameHwnd,n=new Array,r=0;r<o;r++)n.push({type:constant.SVC_HWND_TYPE.SMALL_VIDEO});return e.next=8,W.NativeInterface.createWindows(t,o,i,n);case 8:return a=e.sent,Q.handleChangeSvcWndHandles(a),q.info("createHwnds end,hwndList = "+(0,M.default)(a)),e.abrupt("return",a);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.createBigHwnds=function(){var e=(0,x.default)(O.default.mark(function e(){var t,n,r,a,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createBigHwnds start, count = "+i+", hwnd = "+s),t=$getState().conf,n=t.videoFrameHwnd,r=t.svcWndHandles,!window.haveCreateBigWnd){e.next=4;break}return e.abrupt("return");case 4:return window.haveCreateBigWnd=!0,a=[{type:constant.SVC_HWND_TYPE.BIG_VIDEO}],r&&r.length>0&&(s=r[0].hwnd),e.next=9,W.NativeInterface.createWindows(n,i,s,a);case 9:return o=e.sent,Q.handleChangeSvcWndHandles(o),o&&o[0].type===constant.SVC_HWND_TYPE.BIG_VIDEO?($dispatch(coreUi.changeBigHwnd(o[0].hwnd)),window.haveCreateBigWnd=!1):(q.info("big hwnd create failed"),window.haveCreateBigWnd=!1),q.info("createBigHwnds end,hwndList = "+(0,M.default)(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.updateHwnds=function(){var e=(0,x.default)(O.default.mark(function e(t,n){var r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("updateHwnds start, deleteHwnds = "+(0,M.default)(t)+",create = "+(0,M.default)(n)),r=$getState().conf.videoFrameHwnd,e.next=4,W.NativeInterface.updateWindows(r,t,n);case 4:return a=e.sent,Q.handleChangeSvcWndHandles(a),q.info("updateHwnds end,hwndList = "+(0,M.default)(a)),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),s.destoryHwnds=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("destoryHwnds: "+t),0!==t.length){e.next=3;break}return e.abrupt("return");case 3:return n=$getState().conf.videoFrameHwnd,e.next=6,W.NativeInterface.destoryWindows(n,t);case 6:return r=e.sent,Q.handleChangeSvcWndHandles(r),q.info("destoryHwnds end: hwndList = "+(0,M.default)(r)),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),s.clearAllHwnds=function(){var e=(0,x.default)(O.default.mark(function e(){var t,n,r,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.videoFrameHwnd,n=Q.getAllHwnds(a),e.next=4,W.NativeInterface.destoryWindows(t,n);case 4:return r=e.sent,Q.handleChangeSvcWndHandles(r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.getAllHwnds=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=$getState().conf,n=t.svcWndHandles,r=t.svcViewMode,a=t.maxSizeForPage;if(!n)return q.info("svcWndHandles is null"),new Array;for(var o=new Array,i=0;i<n.length;i++)if(e)o.push(n[i].hwnd),$dispatch(coreUi.changeBigHwnd(0));else{if(1===n[i].type)continue;o.push(n[i].hwnd)}return r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.minModeKeepWndNum>0&&o.splice(a-ee.minModeKeepWndNum),q.info("getAllHwnds,wndhandles = ",o),o},s.handleChangeSvcWndHandles=function(e){$dispatch(coreUi.changeSvcWndHandles(e))},c),Z=t.DecoderManager=(f=u=function e(){(0,P.default)(this,e)},u.createAllWndDecoders=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.svcViewMode,r=$getState().call.callId,(a=Z.createDecoderListFactory(n,t))&&0!==a.length){e.next=6;break}return q.info("videoWindowList is nulll or zero!"),e.abrupt("return");case 6:return Y("createAllWndDecoders videoWindowList is",a,1),e.next=9,coreCall.setAllSvcVideoWindows(a.length,r,a);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),u.createDecoderListFactory=function(e,t){var n=new Array;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n=Z.createBigSmallDecoderList(e,t);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n=Z.createDivideDecoderList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:n=Z.createPicInPicDecoderList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:n=Z.createMinSingleDecoderList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:n=Z.createMinVerticalDecoderList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:n=Z.createMinSingleDecoderList(e);break;default:q.info("SvcViewMode is error,please check!")}return n},u.createBigSmallDecoderList=function(e,t){if(!t)return void q.info("svcShowAttendances is null");var n=Z.createSmallWndDecoders(t),r=Z.createBigWndDecoders(e);return r&&r.length>0&&n.splice(0,0,r[0]),n},u.createDivideDecoderList=function(e){return e?Z.createSmallWndDecoders(e):void q.info("svcShowAttendances is null!")},u.createPicInPicDecoderList=function(e){var t=new Array;return K()||(t=Z.createBigWndDecoders(e)),t},u.createMinSingleDecoderList=function(e){return Z.createBigWndDecoders(e)},u.createMinVerticalDecoderList=function(e){return e?Z.createSmallWndDecoders(e):void q.info("svcShowAttendances is null!")},u.closeAllWndDecoders=(0,x.default)(O.default.mark(function e(){var t;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("closeAllWndDecoders"),t=[{render:0,ssrc_id:0,width:0,height:0}],e.next=4,coreCall.setAllSvcVideoWindows(t.length,$getState().call.callId,t);case 4:case"end":return e.stop()}},e,void 0)})),u.createBigWndDecoders=function(e){q.info("createBigWndDecoders start");var t=$getState().conf,n=(t.svcBigPicInfo,t.ssrcRange),r=t.bigHwnd,a=t.svcDesktopSpeakerBigMaxLook,o=t.svcMaxWatchResolution,i=t.svcOnLineAttendances,s=(t.isSvcSelectMode,constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720);window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(s=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360),e===constant.SVC_VIEW_MODE.MIN_WIN_MIN||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT?s=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90):e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE?s=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180):e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE&&(s=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),isNullOrEmpty(a)||0===a.width||0===a.height||(s=X.getRealResolution(s,a),q.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchRatio= ",s)),s=X.getRealResolution(s,o),q.info("bigWatchRatio.width:"+s.width+",bigWatchRatio.height:"+s.height+", svcViewMode = "+e);var c=new Array,u=n.min,f=r;i.length<=1&&(f=0);var l=$getState().conf.isStopSvcSelect;q.info("createBigWndDecoders isStopSvcSelect:",l," checkIsNeedBigWatch():",K());var d=void 0;return d=l||K()?Z.windowTemplate(f,0,0,0):Z.windowTemplate(f,u,s.width,s.height),q.info("createBigWndDecoders videoWindow:",d),c.push(d),q.info("createBigWndDecoders end,bigWndDecoders = "+(0,M.default)(c)),c},u.createSmallWndDecoders=function(e){q.info("createSmallWndDecoders start");for(var t=($getState().conf.svcWndHandles,new Array),n=X.getSvcWatchRatio(),r=0;r<e.length;r++)if(!(1===e[r].is_self||e[r].ssrc<0)){var a=$getState().conf.isStopSvcSelect;q.info("createSmallWndDecoders isStopSvcSelect:"+a);var o=Z.windowTemplate(e[r].wnd_handle,0,0,0);a||(o=Z.windowTemplate(e[r].wnd_handle,e[r].ssrc,n.width,n.height)),q.info("createSmallWndDecoders videoWindow:",o),t.push(o)}return q.info("createSmallWndDecoders end,smallWndDecoders = "+(0,M.default)(t)),t},u.windowTemplate=function(e,t,n,r){return{render:e,ssrc_id:t,width:n,height:r}},f),X=t.WatchRequestManager=(d=l=function e(){(0,P.default)(this,e)},l.getSvcWatchRatio=function(){var e=$getState().conf,t=e.svcShowAttendances,n=e.svcViewMode,r=e.isSvcBroadcastMode,a=e.audioVideoNum,o=window.CLIENTCONFIG.ISBIGWIN?a.video-1:t.length-1;window.CLIENTCONFIG.ISBIGWIN&&r&&(o=1);var i=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90);if(n===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL)i=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);else if(n===constant.SVC_VIEW_MODE.DIVIDE_MODE){if(1===o)i=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720,window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(i=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);else if(o>=2&&o<=6){i=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);var s=$getState().conf.svcDesktopDivideModeMaxLook2_6;i=X.getRealResolution(i,s)}else if(o>=7&&o<=16){i=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var c=$getState().conf.svcDesktopDivideModeMaxLook7_16;i=X.getRealResolution(i,c)}else if(o>16){i=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var u=$getState().conf.svcDesktopDivideModeMaxLook17_24;i=X.getRealResolution(i,u)}}else if(n===constant.SVC_VIEW_MODE.BIG_SMALL_MODE){i=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var f=$getState().conf.svcDesktopSpeakerModeSmallMaxLook;i=X.getRealResolution(i,f)}q.info("svcWatchRatio.width:"+i.width+",svcWatchRatio.height:"+i.height+", svcViewMode = "+n);var l=$getState().conf.svcMaxWatchResolution;return i=X.getRealResolution(i,l)},l.getRealResolution=function(e,t){var n=e;return!isNullOrEmpty(t)&&(t.width>0||t.height>0)&&n.width>t.width&&n.height>t.height&&(n.width=t.width,n.height=t.height,q.info("[getRealResolution]Svc_Esight_Config Destop esightConfigRes is worked,watchSize= ",n)),n},l.sendSvcWatchRequest=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i,s;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee.getSelfNumber(),r=$getState().conf,a=r.svcViewMode,o=r.isStopSvcSelect,Y("sendSvcWatchRequest svcViewMode is",a),i=X.createWatchListFactory(a,t,o),Y("sendSvcWatchRequest watchAttendees is",i,0),s={attendeeList:i,selfNum:n},e.next=8,coreConf.sendWatchSvcRequestService(s);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),l.createWatchListFactory=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Array;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:q.info("go into constant.SVC_VIEW_MODE.BIG_SMALL_MODE!"),r=X.createBigSmallWatchList(e,t);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:q.info("go into constant.SVC_VIEW_MODE.DIVIDE_MODE!"),r=X.createDivideWatchList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:q.info("go into constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE!"),r=X.createPicInPicWatchList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:q.info("go into constant.SVC_VIEW_MODE.MIN_WIN_SINGLE!"),r=X.createMinSingleWatchList(e,n);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:q.info("go into constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL!"),r=X.createMinVerticalWatchList(t,n);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:q.info("go into constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE!"),r=X.createMinSingleWatchList(e,n);break;case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:q.info("go into constant.SVC_VIEW_MODE.MIN_WIM_FLOAT!"),r=X.createMinSingleWatchList(e,n);break;default:q.info("SvcViewMode is Error,please check!")}return r},l.createBigSmallWatchList=function(e,t){if(!t)return void q.info("createBigSmallWatchList,svcShowAttendances is null!");var n=X.createSmallWatchList(t),r=new Array;return K()||(r=X.createBigWatchList(e)),r&&r.length>0&&n.splice(0,0,r[0]),n},l.createDivideWatchList=function(e){return e?X.createSmallWatchList(e):void q.info("createDivideWatchList,svcShowAttendances is null!")},l.createPicInPicWatchList=function(e){var t=new Array;if(K()){var n=X.watchTemplate("",0,0,0);t.push(n)}else t=X.createBigWatchList(e);return t},l.createMinSingleWatchList=function(e,t){return X.createBigWatchList(e,t)},l.createMinVerticalWatchList=function(e,t){return e?X.createSmallWatchList(e,t):void q.info("createMinVerticalWatchList,svcShowAttendances is null!")},l.createBigWatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q.info("createBigWatchList");var n=$getState().conf,r=n.svcOnLineAttendances,a=n.svcBigPicInfo,o=n.ssrcRange,i=n.isSvcSelectMode,s=n.svcDesktopSpeakerBigMaxLook,c=n.svcMaxWatchResolution,u=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720);window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(u=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),e===constant.SVC_VIEW_MODE.MIN_WIN_MIN||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT?u=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90):e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE?u=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180):e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE&&(u=(0,L.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),isNullOrEmpty(s)||0===s.width||0===s.height||(u=X.getRealResolution(u,s),q.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchRatio= ",u)),u=X.getRealResolution(u,c),q.info("bigWatchRatio.width:"+u.width+",bigWatchRatio.height:"+u.height+", svcViewMode = "+e+",isStopSvcSelect:"+t);var f=new Array,l="",d=o.min;if(e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&2===r.length){for(var p=0;p<r.length;p++)if(1!==r[p].is_self){l=r[p].number;break}}else i&&a&&(l=a.number);var h=X.watchTemplate("",0,0,0);return t||(h=X.watchTemplate(l,d,u.width,u.height)),f.push(h),f},l.createSmallWatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q.info("createSmallWatchList");var n=$getState().conf,r=n.isSameGradeMcu,a=n.isBigConf,o=n.svcShowPage,i=n.isSvcMultiViewBroadcast,s=n.broadcastIsMultiview,c=new Array,u=X.getSvcWatchRatio();if(t){var f=X.watchTemplate("",0,0,0);c.push(f)}else for(var l=0;l<e.length;l++)if(!(1===e[l].is_self||e[l].ssrc<0)){var d=e[l].number;0===r&&0===e[l].is_same_grade_mcu&&0===e[l].is_broadcast&&(d="M255T0");var p=X.watchTemplate("",0,0,0);t||(p=X.watchTemplate(d,e[l].ssrc,u.width,u.height)),c.push(p)}if(q.info(" createSmallWatchList isStopSvcSelect:",t),i&&window.CLIENTCONFIG.ISBIGWIN&&s)q.info("isSvcMultiViewBroadcast = "+i),$dispatch(coreUi.changeBroadcastIsMultiView(!1));else if(a&&0===o)for(var h=0;h<c.length;h++)c[h].number="";return c},l.watchTemplate=function(e,t,n,r){return{number:e,ssrc:t,width:n,height:r}},d),ee=t.SvcAtdManager=(h=p=function e(){(0,P.default)(this,e)},p.addAudioNum=0,p.addVideoNum=0,p.showAtdListChanged=!1,p.aDeleteHwnds=new Array,p.iAddCount=0,p.highlightWnd=0,p.speaker="",p.bcHwnd=!1,p.init=!1,p.memberlistArray=new Array,p.muteInfo=new y.default,p.handInfo=new y.default,p.nameInfo=new y.default,p.localMicStates={},p.serialConfFirstIndex=-1,p.minModeKeepWndNum=0,p.oldSingleState=new y.default,p.userCameraStu=!0,p.conf_info={},p.isBfcpFromData=!1,p.isBfcpFromData=!1,p.rateCalc={preRate:1,curRate:0,cnt:3},p.handleSvcAtdList=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleSvcAtdList start"),n=$getState().conf,r=n.isBigConf,a=n.svcActiveAttendances,ee.memberlistArray.push(t),!refreshAtdlistTimer){e.next=6;break}return q.info("refreshAtdlistTimer is not null!"),e.abrupt("return");case 6:refreshAtdlistTimer=setInterval(function(){if(!ee.memberlistArray||0===ee.memberlistArray.length)return clearInterval(refreshAtdlistTimer),refreshAtdlistTimer=null,void q.info("clear refreshAtdlistTimer!");if($getState().conf.videoFrameHwnd<=0||window.lockHandleAtdlist)return void q.info("refreshAtdlistTimer videoFrameHwnd:",$getState().conf.videoFrameHwnd,"window.lockHandleAtdlist:",window.lockHandleAtdlist);var e=ee.memberlistArray[ee.memberlistArray.length-1];ee.memberlistArray=new Array;var t=ee.getOnLineAttendances(e);if(r&&a&&a.length>0){var n=sortPreAndOrigiArray(a,t);$dispatch(coreUi.changeSvcOnLineAttendances(n))}else $dispatch(coreUi.changeSvcOnLineAttendances(t));var o=$getState().conf.isSvcMultiViewBroadcast;if(!window.CLIENTCONFIG.ISBIGWIN||!o){var i=$getState().conf.svcOnLineAttendances;Y("onLineAttendances watchAttendees is",i,0),ee.handleAtdlist(i)}},500);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleAtdlist=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,m,v,g,C,S,w,_,I,b,N,E,y,T,A,x,k,M;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleAtdlist start"),ee.showAtdListChanged=!1,ee.aDeleteHwnds=new Array,ee.iAddCount=0,ee.addAudioNum=0,ee.addVideoNum=0,ee.bcHwnd=null,ee.init=!1,ee.muteInfo.clear(),ee.handInfo.clear(),ee.nameInfo.clear(),n={},r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcViewMode,i=r.svcShowAttendances,s=r.isSvcSelectMode,c=r.svcRecallorNot,u=r.isBigConf,f=r.svcSelectWatchInfo,l=r.svcBandMode,void 0!==t&&0!==t.length){e.next=16;break}return q.info("onLineAttendances length is zero,please check."),e.abrupt("return");case 16:for(d=t.length,window.CLIENTCONFIG.ISBIGWIN||(window.isHubEnv?t.length<2&&(o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||o===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)?(q.info("maxhub attendances only one, change viewMode to divide mode!"),ee.switchViewMode(constant.SVC_VIEW_MODE.DIVIDE_MODE,!0),ee.init=!0):t.length>=2&&l===constant.SVC_BAND_MODE.LOW_BAND&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE)&&(q.info("maxhub low bandwidth, change viewMode to PIP mode"),ee.switchViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,!0)):t.length<2&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)?(q.info("change viewMode to big small mode!"),ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0),ee.init=!0):t.length>=2&&l===constant.SVC_BAND_MODE.LOW_BAND&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE)&&ee.switchViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,!0)),p=d;p--;)ee.muteInfo.set(t[p].number,{is_mute:t[p].is_mute}),ee.handInfo.set(t[p].number,{hand_state:1===t[p].role?0:t[p].hand_state}),ee.nameInfo.set(t[p].number,{name:t[p].name});if(s&&f.number&&""!==f.number&&((h=ee.isSvcOnlineAttendance(f.number))||ee.handleCancelWatch()),!(m=ee.handleBroadcastInfo(t))||!$getState().conf.isSvcBroadcastMode){e.next=26;break}return e.next=24,ee.handleJoinBroadCast();case 24:e.next=27;break;case 26:m&&ee.handleCancelBroadCast();case 27:if(o!==constant.SVC_VIEW_MODE.MIN_WIN_MIN&&o!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE&&o!==constant.SVC_VIEW_MODE.MIN_WIM_FLOAT&&o!==constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE){e.next=30;break}return 1===t.length&&2===a.length||2===t.length&&1===a.length?ee.handleWatchAndDecoder([]):q.info("no need to deal in svcViewMode = "+o),e.abrupt("return");case 30:return o=$getState().conf.svcViewMode,e.next=33,ee.createAtdsFactory(t,o);case 33:if(v=e.sent,ee.setWindowName(v),!ee.showAtdListChanged&&!c){e.next=42;break}return e.next=38,ee.handleHwndAndAtds(v,ee.aDeleteHwnds,ee.iAddCount,ee.bcHwnd,ee.init);case 38:g=e.sent,ee.handleWatchAndDecoder(g),ee.setWindowName(g),$dispatch(coreUi.changesvcRecallorNot(!1));case 42:for(C=v.length;C--;)ee.muteInfo.set(v[C].number,(0,L.default)({},ee.muteInfo.get(v[C].number),{wnd_handle:v[C].wnd_handle})),ee.handInfo.set(v[C].number,(0,L.default)({},ee.handInfo.get(v[C].number),{wnd_handle:v[C].wnd_handle})),ee.nameInfo.set(v[C].number,(0,L.default)({},ee.nameInfo.get(v[C].number),{wnd_handle:v[C].wnd_handle}));S=$getState().conf,w=S.videoFrameHwnd,_=S.bigHwnd,I=S.isSvcBroadcastMode,b=S.svcShowPage,N=S.isMinWin,m&&I?(E=ee.getShowBoradcastParam(1),n=(0,L.default)(n,E),s&&(y=ee.getCancelWatchParam(0),n=(0,L.default)(n,y))):m&&(T=ee.getShowBoradcastParam(0),n=(0,L.default)(n,T)),N||ee.setAvailableMode(!1,t,I),A=-1,x=0,k=t.length;case 48:if(!(x<k)){e.next=55;break}if(1!==t[x].is_self){e.next=52;break}return A=t[x].role,e.abrupt("break",55);case 52:x++,e.next=48;break;case 55:M=!1,1!==A&&u&&(q.info("The Conf is big conf, and selfrole is not chair"),M=!0,0!==b&&(b=0,ee.handlePageSwitch(b))),n=(0,L.default)(n,{large_scale_conf:M}),n=(0,L.default)(n,{set_conf_userinfo:{videoCount:a.length}}),ee.setNativeSelectState(),ee.setPageNum(o,d),ee.setParam(n),window.CLIENTCONFIG.ISBIGWIN?ee.setBigMuteState(!1,v):ee.setMuteState(),window.CLIENTCONFIG.ISWIN&&ee.setHandState(),J("handleAtdlist end"),ee.serialConfFirstIndex=-1;case 66:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.setNativeSelectState=function(){var e=$getState().conf,t=e.isSvcBroadcastMode,n=e.selfRole,r=e.isDataConfSharing,a=$getState().call.iSreceivingBFCP,o={};!t||a||r||n?(o=(0,L.default)(o,{isBroadCast:!1}),ee.setParam(o)):(o=(0,L.default)(o,{isBroadCast:!0}),ee.setParam(o))},p.getSelfNumber=function(){for(var e="",t=$getState().conf.svcOnLineAttendances,n=0;n<t.length;n++)if(t[n].is_self){e=t[n].number;break}return e},p.isSvcOnlineAttendance=function(e){if(void 0===e||""===e)return q.error("targetNumber is empty."),!1;var t=$getState().conf,n=t.isSameGradeMcu,r=t.svcOnLineAttendances,a=t.serialMcuMemberList;if(void 0===r||r.length<=0)return q.error("onlineAttendance is empty."),!1;for(var o=0;o<r.length;o++)if(r[o].number===e)return!0;if(!n)return!1;if(void 0===a||a.length<=0)return q.error("serialMcuMemberList is empty."),!1;for(var i=0;i<a.length;i++)if(a[i].number===e)return!0;return!1},p.getOnLineAttendances=function(e){for(var t=$getState().conf.isSameGradeMcu,n=new Array,r=new Array,a=!1,o=!1,i=new Array,s={userInfo:{name:""},number:"M255T0",is_self:0,is_broadcast:0,is_same_grade_mcu:0},c=0;c<e.length;c++){var u=ee.isVideoMember(e[c]);if(5===e[c].state&&u){if(window.CLIENTCONFIG.ISBIGWIN&&0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self&&ee.serialConfFirstIndex<0&&(ee.serialConfFirstIndex=c),window.CLIENTCONFIG.ISWIN&&0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self){o=!0,i.push({number:e[c].number,is_self:e[c].is_self,is_broadcast:e[c].is_broadcast});continue}1===e[c].is_self?(a=!0,n.unshift(e[c])):n.push(e[c])}else if(window.CLIENTCONFIG.ISBIGWIN&&5===e[c].state){if(0===t&&0===e[c].is_same_grade_mcu)continue;r.push(e[c])}}return $dispatch(coreUi.changeSerialMemberList(i)),window.CLIENTCONFIG.ISWIN&&o&&n.splice(1,0,s),n.push.apply(n,r),a||(n=new Array),J("getOnLineAttendances end,onLineAttendances:",n,1),q.info("getOnLineAttendances end serialMcuMemberList",i),n},p.isVideoMember=function(e){return 0!=(e.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)},p.createAtdsFactory=function(){var e=(0,x.default)(O.default.mark(function e(t,n){var r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new Array,e.t0=n,e.next=e.t0===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?4:e.t0===constant.SVC_VIEW_MODE.DIVIDE_MODE?6:e.t0===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?8:e.t0===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?10:12;break;case 4:return r=ee.createBigSmallAtdList(t),e.abrupt("break",13);case 6:return r=ee.createDivideAtdList(t),e.abrupt("break",13);case 8:return r=ee.createPicInPicAtdList(t),e.abrupt("break",13);case 10:return r=ee.createMinVerticalAtdList(t),e.abrupt("break",13);case 12:q.info("svcViewMode is "+n+",no need to deal");case 13:for(a=ee.nameInfo,o=0;o<r.length;o++)a.get(r[o].number)&&(r[o].name=a.get(r[o].number).name);if(r&&r.length>0&&$dispatch(coreUi.changeSvcShowAttendances(r)),i=$getState().conf.svcBigPicInfo,!i.hasOwnProperty("name")||!i.hasOwnProperty("number")){e.next=27;break}o=0;case 19:if(!(o<t.length)){e.next=26;break}if(t[o].number!==i.number){e.next=23;break}return i.name=t[o].name,e.abrupt("break",26);case 23:++o,e.next=19;break;case 26:$dispatch(coreUi.changeSvcBigPicInfo(i));case 27:return e.abrupt("return",r);case 28:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.createBigSmallAtdList=function(e){q.info("createBigSmallAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createBigSmallAtd(e,r);return a.length<1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createBigSmallAtd(e,a)),q.info("createBigSmallAtdList end"),a},p.getInsertBeforeHwnd=function(e){for(var t=0,n=e?e.length:0,r=0;r<n;r++)if(3===e[r].type){t=e[r].hwnd;break}return t},p.constructBigConfPropList=function(e,t){var n=(new Array,ee.constructVideoPropList(e)),r=ee.constructAudioPropList(t);return n.concat(r)},p.constructVideoPropList=function(e){for(var t=new Array,n=0;n<e;n++)t.push({type:constant.SVC_HWND_TYPE.SMALL_VIDEO});return t},p.constructAudioPropList=function(e){for(var t=new Array,n=0;n<e;n++)t.push({type:constant.SVC_HWND_TYPE.AUDIO});return t},p.createDivideAtdList=function(e){q.info("createDivideAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createDivideAtd(e,r);return a.length<=1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createDivideAtd(e,a)),q.info("createDivideAtdList end"),a},p.createPicInPicAtdList=function(e){q.info("createPicInPicAtdList start");var t=$getState().conf.svcShowAttendances;return ee.addLocalAtd(e,t),q.info("createPicInPicAtdList end"),t},p.createMinVerticalAtdList=function(e){q.info("createMinVerticalAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createMinVerticalAtd(e,r);return a.length<=1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createMinVerticalAtd(e,a)),q.info("createMinVerticalAtdList end"),a},p.handleWatchAndDecoder=function(e){var t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcViewMode,a=(t.isSvcSelectMode,t.svcBigPicInfo,t.bigHwnd),o=t.isSvcMultiViewBroadcast,i=$getState().call.callId;n.length>1||o?X.sendSvcWatchRequest(e):r!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE&&r!==constant.SVC_VIEW_MODE.MIN_WIM_FLOAT&&r!==constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE||W.NativeInterface.setLocalWindow(i,a),Z.createAllWndDecoders(e);for(var s=0;s<e.length;s++)if(1===e[s].is_self){e[s].wnd_handle>0?W.NativeInterface.setLocalWindow(i,e[s].wnd_handle):q.info("local wnd_handle is ",e[s].wnd_handle);break}},p.handleHwndAndAtds=function(){var e=(0,x.default)(O.default.mark(function e(t,n,r,a){var o,i,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleHwndAndAtds start"),t&&0!==t.length){e.next=4;break}return q.info("handleHwndAndAtds svcShowAttendances is zero"),e.abrupt("return");case 4:return e.next=6,ee.handleHwnds(t,n,r,ee.addVideoNum,ee.addAudioNum,a,s);case 6:return o=e.sent,i=ee.bindAtdsAndWnds(t,o),e.abrupt("return",i&&i.length>0?i:[]);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),p.handleHwnds=function(){var e=(0,x.default)(O.default.mark(function e(t,n,r,a,o,i){var s,c,u,f,l,d,p,h,m,v,g,C,S=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleHwnds,dHwnds = "+n+",aHwnds = "+r+",videoNum = "+a+",audioNum = "+o+",bHwnd = "+i+",init = "+S),s=$getState().conf,c=s.svcViewMode,u=s.bigHwnd,f=s.svcWndHandles,l=s.svcOnLineAttendances,d=s.isSvcMultiViewBroadcast,p=f,h=null,!S){e.next=15;break}return m=Q.getAllHwnds(),v=!0,1===l.length&&(v=!1),h=window.CLIENTCONFIG.ISBIGWIN&&!d?ee.constructBigConfPropList(a,o):ee.constructPropList(c,t,v),e.next=11,Q.updateHwnds(m,{propList:h});case 11:p=e.sent,ee.setBigHwnd(c,p),e.next=51;break;case 15:if(1===l.length&&u>0&&(n.push(u),$dispatch(coreUi.changeBigHwnd(0))),!(n.length>0)){e.next=20;break}return e.next=19,Q.destoryHwnds(n);case 19:p=e.sent;case 20:if(!(l.length>1)||c!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&c!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||0!==u){e.next=24;break}return e.next=23,Q.createBigHwnds(1,0);case 23:p=e.sent;case 24:if(!i){e.next=36;break}if(q.info("FFFF handleHwnds bHwnd = "+i),!p||1!==p.length){e.next=32;break}return e.next=29,Q.createHwnds(1,0);case 29:p=e.sent,e.next=36;break;case 32:if(!(p&&p.length>=2)){e.next=36;break}return e.next=35,Q.createHwnds(1,p[1].hwnd);case 35:p=e.sent;case 36:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=47;break}if(q.info("handleHwnds,videoNum = "+a+" audioNum = "+o),g=ee.constructBigConfPropList(a,o),C=0,a>0&&(C=ee.getInsertBeforeHwnd(p)),!(r>0)){e.next=45;break}return e.next=44,Q.createHwndsByType(g.length,C,g);case 44:p=e.sent;case 45:e.next=51;break;case 47:if(!(r>0)){e.next=51;break}return e.next=50,Q.createHwnds(r,0);case 50:p=e.sent;case 51:return e.abrupt("return",p);case 52:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),p.bindAtdsAndWnds=function(e,t){if(q.info("bindAtdsAndWnds"),!t||0===t.length)return void q.info("bindAtdsAndWnds hwndlist length is zero");var n=$getState().conf,r=(n.isSvcShareMode,n.svcShowPage,n.svcViewMode),a=n.svcOnLineAttendances;t=ee.checkHwndList(t,r,e);for(var o=0;o<e.length;o++)r===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?t&&o+1<t.length?e[o].wnd_handle=t[o+1].hwnd:1===a.length&&1===t.length?e[o].wnd_handle=t[0].hwnd:q.info("BIG_SMALL_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.DIVIDE_MODE?t&&o<t.length?e[o].wnd_handle=t[o].hwnd:q.info("DIVIDE_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?t&&o+1<t.length?e[o].wnd_handle=t[o+1].hwnd:q.info("PIC_IN_PIC_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(t&&o<t.length?e[o].wnd_handle=t[o].hwnd:q.info("MIN_WIN_VERTICAL : window handle create failed ,please check!"));return J("bindAtdsAndWnds end,svcShowAttendances:",e),$dispatch(coreUi.changeSvcShowAttendances(e)),e},p.checkHwndList=function(e,t,n){var r=$getState().conf,a=r.svcShowPage,o=r.isSvcShareMode,i=(r.videoFrameHwnd,0);if(t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?0===a&&o?e.length>n.length+2&&(i=e.length-n.length-2):e.length>n.length+1&&(i=e.length-n.length-1):t===constant.SVC_VIEW_MODE.DIVIDE_MODE?e.length>n.length&&(i=e.length-n.length):t===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?e.length>n.length+1&&(i=e.length-n.length-1):t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&e.length>n.length&&(i=e.length-n.length),i>0){for(var s=e.splice(e.length-i,i),c=[],u=0;u<s.length;u++)c.push(s[u].hwnd);q.info("checkHwndList, delete extra windows = "+(0,M.default)(c)),Q.destoryHwnds(c)}return e},p.initShowAtds=function(e){var t=$getState().conf,n=t.svcShowPage,r=t.svcViewMode,a=t.maxSizeForPage,o=ee.getCanUseAtdsPos(),i=new Array;i=e.slice(o);var s=new Array,c=a;switch(r){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:e.length<2?ee.addLocalAtd(e,s):ee.addOnlineAtds(i,s,c);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n>0&&ee.addLocalAtd(e,s),ee.addOnlineAtds(i,s,c);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:ee.addLocalAtd(e,s);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:ee.initVerticalShowAtds(e,s)}return J("initShowAtds end,newSvcShowAtds:",s),s},p.initVerticalShowAtds=function(e,t){if(0===e.length)return void(t=[]);var n=$getState().conf,r=n.svcShowPage,a=n.maxSizeForPage,o="",i=[];ee.minModeKeepWndNum=0;for(var s=0;s<e.length;s++)-1===o.indexOf(e[s].number)&&(o=o+e[s].number+",",i.push(e[s]));var c=$getState().conf.svcPageNum,u=r*a,f=u+a,l=i.length-u;if(l<a){f=u+l;for(var d=u;d<f;d++){var p=ee.createAtdInfo(i[d]);t.push(p)}if(i.length<a||1===c)return;var h=a-l;f=u,u-=h,ee.minModeKeepWndNum=f-u}for(var m=u;m<f;m++){var v=ee.createAtdInfo(i[m]);t.push(v)}},p.createBigSmallAtd=function(e,t){J("createBigSmallAtd start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=(n.svcViewMode,n.isSvcBroadcastMode,n.isSvcShareMode),o=n.maxSizeForPage,i=ee.getCanUseAtdsPos(),s=new Array;s=e.slice(i);var c=new Array;c=ee.deleteLeaveAtds(t,s),0===r&&ee.addLocalAtd(e,c);var u=a&&0===r?o-1:o;return ee.addOnlineAtds(s,c,u),J("createBigSmallAtd end,svcShowAttendances:",c),c},p.createDivideAtd=function(e,t){J("createDivideAtd start,svcShowAttendances:",t);var n=$getState().conf,r=(n.svcShowPage,n.svcViewMode,n.isSvcBroadcastMode),a=n.maxSizeForPage,o=new Array;if(window.CLIENTCONFIG.ISBIGWIN&&r)ee.addBroadCastAtd(e,o);else{var i=ee.getCanUseAtdsPos(),s=new Array;s=e.slice(i),o=ee.deleteLeaveAtds(t,e),ee.addLocalAtd(e,o),ee.addOnlineAtds(s,o,a),window.CLIENTCONFIG.ISBIGWIN&&ee.updataIsMuteStu(ee.muteInfo,o)}return o},p.createMinVerticalAtd=function(e,t){J("createMinVerticalAtd start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=(n.svcViewMode,n.isSvcBroadcastMode,n.maxSizeForPage),o=ee.getCanUseAtdsPos(),i=new Array;i=e.slice(o);var s=new Array;if(s=ee.deleteLeaveAtds(t,e),0===r)if(ee.addLocalAtd(e,s),0===s.length)ee.iAddCount++;else for(var c=0;c<s.length;c++)1===s[c].is_self&&0===ee.iAddCount&&ee.iAddCount++;return ee.addOnlineAtds(i,s,a),J("createMinVerticalAtd end,svcShowAttendances:",s),s},p.deleteLeaveAtds=function(e,t){var n=$getState().conf,r=n.isSameGradeMcu,a=n.audioVideoNum,o=n.serialMcuMemberList,i=(0,L.default)({},a),s=e.filter(function(e){var n=!1;if(window.CLIENTCONFIG.ISBIGWIN&&0===r&&0===e.is_self&&0===e.is_same_grade_mcu)ee.serialConfFirstIndex>=0?(n=!0,ee.isInShowAtds(e,t)||(ee.showAtdListChanged=!0)):(z.removeSvcSSRC(e.ssrc)&&i.video--,$dispatch(coreUi.changeHaveAddSerialConf(!1)),ee.showAtdListChanged=!0,z.removeSvcSSRC(e.ssrc),ee.aDeleteHwnds.push(e.wnd_handle));else{if(window.CLIENTCONFIG.ISWIN&&0===r&&0===e.is_same_grade_mcu)return o.length>0?(ee.checkSerialConf(e.number)||(ee.showAtdListChanged=!0),n=!0):(ee.showAtdListChanged=!0,z.removeSvcSSRC(e.ssrc),ee.aDeleteHwnds.push(e.wnd_handle)),n;ee.isInShowAtds(e,t)?n=!0:(ee.showAtdListChanged=!0,ee.aDeleteHwnds.push(e.wnd_handle),ee.isVideoMember(e)?z.removeSvcSSRC(e.ssrc)&&i.video--:i.audio--)}return n});return $dispatch(coreUi.changeAudioVideoNum(i)),q.info("deleteLeaveAtds end SvcAtdManager.aDeleteHwnds = "+(0,M.default)(ee.aDeleteHwnds)),J("deleteLeaveAtds end,svcShowAttendances:",s),s},p.addLocalAtd=function(e,t){q.info("addLocalAtd start");for(var n=$getState().conf,r=(n.isSvcShareMode,n.isSvcBroadcastMode),a=n.svcWndHandles,o=n.audioVideoNum,i=(0,L.default)({},o),s=!1,c=0;c<t.length;c++)if(1===t[c].is_self){s=!0;break}if(!s)for(var u=0;u<e.length;u++)if(1===e[u].is_self){var f=ee.createAtdInfo(e[u]);if(f){ee.showAtdListChanged=!0,i.video++;if(a&&a.length>0)if(ee.init&&!r)ee.addVideoNum++,ee.iAddCount++;else{var l=a.filter(function(e){return 0===e.type&&-1===ee.aDeleteHwnds.indexOf(e.hwnd)});l&&l.length>0?(f.wnd_handle=l[0].hwnd,q.info("Local is not in showAtd,need to create as wnd_handle = "+f.wnd_handle)):(ee.addVideoNum++,ee.iAddCount++,q.info("Local is not in showAtd,need to create a new window"))}else q.info("svcWndHandles length is "+a+",need to create in pos = 0,it is wrong!");t.splice(0,0,f),$dispatch(coreUi.changeAudioVideoNum(i))}break}},p.addBroadCastAtd=function(e,t){q.info("addBroadCastAtd start");for(var n=$getState().conf,r=n.svcBroadcastData,a=n.ssrcRange,o=null,i=0;i<e.length;i++)if(r.number===e[i].number){o=e[i];break}if(o){var s=ee.createAtdInfo(o);s&&(window.CLIENTCONFIG.ISBIGWIN&&(s.ssrc=a.min+1),t.push(s),ee.bcHwnd=!0,q.info("addBroadCastAtd broadcast is not in showAtd,need to create")),ee.showAtdListChanged=!0}else q.info("addBroadCastAtd can not find broadcastAtd, please check")},p.receviceShareOrBfcp=function(){var e=(0,x.default)(O.default.mark(function e(){var t,n,r,a,o,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("receviceShareOrBfcp"),t=$getState().conf,n=t.svcViewMode,r=t.svcOnLineAttendances,a=t.svcShowAttendances,o=t.svcShowPage,i=t.maxSizeForPage,s=0===u?constant.SVC_SSRC_FLAG.SHARE_SSRC:constant.SVC_SSRC_FLAG.BFCP_SSRC,$dispatch(coreUi.changeIsSvcShareMode(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcShareData({ssrc:s,name:f})),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:s,name:f})),n!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=14;break}return window.lockHandleAtdlist=!0,e.next=11,ee.reInitAtdAndWindow(n);case 11:window.lockHandleAtdlist=!1,e.next=28;break;case 14:if(n!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=27;break}if(0!==o){e.next=24;break}if(i!==a.length){e.next=23;break}return c=new Array,c.push(a[i-1].wnd_handle),e.next=21,Q.destoryHwnds(c);case 21:z.removeSvcSSRC(a[i-1].ssrc),a.splice(i-1,1);case 23:Q.createShareOrBfcpHwnds(1,0);case 24:ee.setBFCPBigWnd(),e.next=28;break;case 27:ee.setBFCPBigWnd();case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p.stopShareOrBfcp=function(){var e=(0,x.default)(O.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("stopShareOrBfcp");case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p.setBFCPBigWnd=(0,x.default)(O.default.mark(function e(){var t;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.bigHwnd,t>0?W.NativeInterface.setBFCPWindow($getState().call.callId,t,!1):q.info("bigHwnd is 0");case 2:case"end":return e.stop()}},e,void 0)})),p.addOnlineAtds=function(e,t,n){var r=$getState().conf,a=r.isSameGradeMcu,o=r.haveAddSerialConf,i=r.audioVideoNum,s=r.svcViewMode,c=(0,L.default)({},i);c.video<=0&&(q.info("unexpected tmpAudioVideoNum.video",c.video),c.video=1);q.info("addOnlineAtds canUseAtd length= ",void 0===e?"undefined":e.length),q.info("addOnlineAtds showAtd length= ",void 0===t?"undefined":t.length);for(var u=0;u<e.length;u++)if(!window.CLIENTCONFIG.ISBIGWIN||0!==a||!o||0!==e[u].is_same_grade_mcu){var f=ee.isInShowAtds(e[u],t);if(t.length>=n){if(ee.isVideoMember(t[n-1])||!ee.isVideoMember(e[u]))break;if(f)continue;ee.aDeleteHwnds.push(t[n-1].wnd_handle),t.pop(),c.audio--}if(q.info("addOnlineAtds flag= ",f),!f){var l=ee.createAtdInfo(e[u]);l||s!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&s!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL||(q.info("addOnlineAtds fail, mode = "+s+", svcAtds = "+(0,M.default)(t)),t=z.updateAllSsrcOfAtds(t),l=ee.createAtdInfo(e[u]),q.info("addOnlineAtds updateAllSsrcOfAtds svcAtds = "+(0,M.default)(t))),q.info("addOnlineAtds attendance is not object: ",void 0===l),l&&(ee.showAtdListChanged=!0,q.info("cwp add attendance "),ee.isVideoMember(l)?(c.video++,t.splice(c.video-1,0,l),ee.addVideoNum++,ee.iAddCount++):(c.audio++,t.push(l),ee.addAudioNum++,ee.iAddCount++)),l&&0===l.is_same_grade_mcu&&(o=!0,$dispatch(coreUi.changeHaveAddSerialConf(!0)))}}$dispatch(coreUi.changeAudioVideoNum(c))},p.isInShowAtds=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,r=0;r<t.length;r++)if(t[r].number===e.number&&(1===e.is_self||t[r].media_type===e.media_type)){n=!0;break}return n},p.handleBroadcastInfo=function(e){for(var t=$getState().conf,n=t.isSvcBroadcastMode,r=t.svcBroadcastData,a=t.ssrcRange,o=t.isSvcMultiViewBroadcast,i=(t.svcViewMode,!1),s=!1,c=0;c<e.length;c++){if(window.CLIENTCONFIG.ISWIN&&!o&&r.number!==e[c].number&&1===e[c].is_broadcast){var u=language.SVC_BROAD_CAST.format(e[c].userInfo.name);ee.alertBox(u,3)}if(1===e[c].is_broadcast){if(!o&&(0,N.default)(r).length>0&&r.number===e[c].number)q.info("The broadcast is same");else if(1!==e[c].is_self){i=!0;var f={name:e[c].userInfo.name,number:e[c].number,is_self:e[c].is_self,ssrc:a.min};$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(f)),q.info("Entry broadcast mode,broadcast is "+f.number.substr(0,3)+"****"+f.number.substr(-3))}else if(1===e[c].is_self){var l={name:e[c].userInfo.name,number:e[c].number,is_self:e[c].is_self,ssrc:a.min};$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(l))}s=!0;break}}return!s&&n&&(i=!0,$dispatch(coreUi.changeIsSvcBroadcastMode(!1)),$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!1)),$dispatch(coreUi.changeBroadcastIsMultiView(!1)),$dispatch(coreUi.changeSvcBroadcastData({})),0===$getState().conf.selfRole&&(window.CLIENTCONFIG.ISWIN?ee.alertBox(language.BROADCAST_CANCELLED_BY_CHAIRMAN,3):window.Toast(language.BROADCAST_CANCELLED_BY_CHAIRMAN,2)),q.info("Cancel broadcast mode")),i},p.handleJoinBroadCast=(0,x.default)(O.default.mark(function e(){var t,n,r,a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleJoinBroadCast start"),t=$getState().conf,n=t.isSvcSelectMode,r=t.svcViewMode,a=t.svcBroadcastData,o=t.svcBigPicInfo,r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=8;break}n&&($dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))),$dispatch(coreUi.changeSvcBigPicInfo(a)),ee.showAtdListChanged=!0,e.next=22;break;case 8:if(r!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=21;break}if(ee.init=!0,!window.CLIENTCONFIG.ISBIGWIN){e.next=17;break}$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeAudioVideoNum({video:0,audio:0})),e.next=19;break;case 17:return e.next=19,ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0);case 19:e.next=22;break;case 21:r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.handleModeSwitch(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE);case 22:q.info("handleJoinBroadCast end");case 23:case"end":return e.stop()}},e,void 0)})),p.handleCancelBroadCast=function(){if(window.CLIENTCONFIG.ISBIGWIN)ee.init=!0,$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeHaveAddSerialConf(!1)),$dispatch(coreUi.changeAudioVideoNum({video:0,audio:0}));else{var e=$getState().conf,t=e.svcShowAttendances,n=e.isSvcBroadcastMode;if(e.svcViewMode!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||n||ee.handleModeSwitch(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),0===t.length)return}},p.initVideoFrame=function(){var e=(0,x.default)(O.default.mark(function e(t,n,r){var a,o,i,s,c,u,f,l,d,p,h,m,v,g,C,S,w,_,I,b,N,E,y,T,A,x,k,R,D,P,F,U,B,H,G,j,J,Y,K,z,Z,X,te,ne;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!($getState().conf.videoFrameHwnd>0||window.haveCreateVideoFrame)){e.next=3;break}return q.info("video native frame have already created!"),e.abrupt("return");case 3:if(a=0,window.haveCreateVideoFrame=!0,window.lockHandleAtdlist=!0,q.info("begin init video native frame!"),!($.getAvcFrameHandles()>0)){e.next=14;break}a=$.getAvcFrameHandles(),$dispatch(coreUi.changeVideoFrameHwnd(a)),window.isHubEnv?ee.switchViewMode(constant.SVC_VIEW_MODE.DIVIDE_MODE):ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),q.info("switchViewMode avc trans to svc but use avc winwhnd"),e.next=18;break;case 14:return ee.switchViewMode(n,!1),e.next=17,W.NativeInterface.initNativeScreen(n,r,window.langcode,!1);case 17:a=e.sent;case 18:if(!a){e.next=96;break}if(window.haveCreateVideoFrame=!1,$dispatch(coreUi.changeVideoFrameHwnd(a)),o=$.getRemoteVideoHwnd(),i=$.getLocalVideoHwnd(),$.setAvcNullForSvc(),s=[],o>0&&s.push(o),i>0&&s.push(i),!(s.length>0)){e.next=40;break}return q.info("initVideoFrame destroy AVCVideoHwnd list = "+(0,M.default)(s)),e.next=31,W.NativeInterface.destoryWindows(a,s);case 31:if(!((c=e.sent)&&c.length>0)){e.next=40;break}for(u=[],f=0,l=0;l<c.length;l++)1===c[l].type&&(0===f?$dispatch(coreUi.changeBigHwnd(c[l].hwnd)):u.push(c[l].hwnd),f++);if(!(u.length>0)){e.next=39;break}return e.next=38,W.NativeInterface.destoryWindows(a,u);case 38:c=e.sent;case 39:c&&c.length>0&&Q.handleChangeSvcWndHandles(c);case 40:if(d=$getState().conf,p=d.isSupportAS,h=d.svcWndHandles,m=d.svcRecallorNot,v=d.confSubject,g=d.isEnterDataConf,C=d.currentConfInfo,S=d.confServerId,w=d.vmrId,_=d.isSrtp,I=d.isConfMicMute,b=d.memberListInfo,N=d.setPreviewsCount,E=$getState().call,y=E.isOpenCamera,T=E.isMuteMic,A=E.isMuteSpk,x=E.cameraNum,k=E.cameraDevicesList,R=E.spkDevicesList,D=E.micDevicesList,P=$getState().setting,F=P.camIndex,U=P.spkIndex,B=P.micIndex,!(h&&h.length>0&&m)){e.next=48;break}W.NativeInterface.setLocalWindow(t,h[0].hwnd),q.info("initVideoFrame svcRecallorNot is true, svcWndHandles = "+(0,M.default)(h)),e.next=51;break;case 48:return e.next=50,Q.createHwnds(1,0);case 50:h=e.sent;case 51:return window.lockHandleAtdlist=!1,ee.userCameraStu||(ee.userCameraStu=!0,y=!1,V.ToolbarManager.setCameraStu({state:0})),q.info("initVideoFrame isOpenCamera = "+y),H=T||I?0:100,A=A?1:0,G=_?1:0,ee.isDataConf=g,V.ToolbarManager.setChairmanState(b,!0),j={},isNullOrEmpty(w)||(S=w),S>0?j=(0,L.default)({},{set_window_title:{title:v,confID:S}}):(J=0,Y=setInterval(function(){J++;var e=$getState().conf,t=e.confSubject,n=e.confServerId,r=e.vmrId;isNullOrEmpty(r)||(n=r),n>0?(clearInterval(Y),ee.setConfServerId(n,t)):J>=10&&clearInterval(Y)},500)),e.next=64,coreAccount.getLoginModel();case 64:K=e.sent,j=(0,L.default)(j,{isSupportAS:K.isSupportAS?1:0}),j=(0,L.default)(j,{init_state:{encrypt:G}}),j=(0,L.default)(j,{init_device_state:{isMuteSpk:A,mic_volume:H,camera_on:x>0?y:-1}}),j=(0,L.default)(j,{camera_devices:{camIndex:F,cameraDevicesList:k}}),j=(0,L.default)(j,{mic_devices:{micIndex:B,micDevicesList:D}}),j=(0,L.default)(j,{spk_devices:{spkIndex:U,spkDevicesList:R}}),j=(0,L.default)(j,{general_pwd:C.general_pwd?C.general_pwd:null}),N>0&&(j=(0,L.default)(j,{set_conf_userinfo:{count:N}})),j=(0,L.default)(j,{has_data_ability:{is_data_conf:ee.isDataConf?1:0}}),j=(0,L.default)(j,{is_free_user:$getState().login.isFreeUser}),j=(0,L.default)(j,{is_in_conf:""===$getState().conf.confHandle?0:1}),z=$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING,Z=$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,z?j=(0,L.default)(j,{has_delete_member:0}):Z&&(j=(0,L.default)(j,{has_delete_member:1})),X=$getState().myInfo.enableDoubleScreen,j=(0,L.default)(j,{enableDoubleScreen:X}),q.info("nableDoubleScreen: "+X),void 0!==X?coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_CONF_ENABLE_DOUBLE_SCREEN,params:[X.toString(),1]}):coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_CONF_ENABLE_DOUBLE_SCREEN,params:[X.toString(),0]}),te=JSON.parse((0,M.default)(j)),void 0!==te.set_window_title&&(ne=te.set_window_title.title,te.set_window_title.title=ne?ne.substr(0,1)+"***":""),te.general_pwd=te.general_pwd?"***":"null",q.info("SVC initVideoFrame initParam param = "+(0,M.default)(te)),ee.setParam(j),ee.switchCPURateCalc(!0),ee.rateCalc={preRate:1,curRate:0,cnt:3},coreUi.getConfGuestLink(),ee.oldSingleState.clear(),ee.conf_info={},ee.confMemNum=-1,e.next=99;break;case 96:window.haveCreateVideoFrame=!1,window.lockHandleAtdlist=!1,q.info("init video native frame failed,please check!");case 99:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),p.closeVideoFrame=(0,x.default)(O.default.mark(function e(){var t,n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ee.isDataConf=-1,ee.confMemNum=-1,t=$getState().conf.videoFrameHwnd,n=B.getShareAppHwnd(),n>0&&(q.info("closeVideoFrame shareAppHwnd :",n),W.NativeInterface.setHightlightShareWnd(n,!1)),t>0&&(ee.switchCPURateCalc(!1),ee.rateCalc={preRate:1,curRate:0,cnt:3},ee.conf_info={},W.NativeInterface.uninitNativeScreen(t,!1),$dispatch(coreUi.changeVideoFrameHwnd(0)),ee.highlightWnd=0,ee.speaker=""),window.CLIENTCONFIG.ISBIGWIN||coreUi.selectBoxCancelDataNWin();case 7:case"end":return e.stop()}},e,void 0)})),p.sendWatchWithBfcp=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("sendWatchWithBfcp start"),n=$getState().conf,r=n.isSvcConf,a=n.svcShowAttendances,o=n.svcViewMode,"VIDEO_CONNECTED"!==(i=$getState().call.callStatus)||!r||!window.CLIENTCONFIG.ISWIN||o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=13;break}if(q.info("sendWatchWithBfcp bfcpIsBigHwnd:"+$getState().conf.bfcpIsBigHwnd+", isBigwnd:"+t),$getState().conf.bfcpIsBigHwnd===t){e.next=8;break}return e.next=8,coreCall.setBfcpIsBigWnd($getState().call.callId,t);case 8:return $dispatch(coreUi.changeBfcpIsBigHwnd(t)),e.next=11,X.sendSvcWatchRequest(a);case 11:return e.next=13,Z.createAllWndDecoders(a);case 13:q.info("sendWatchWithBfcp end");case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.sendWatchWithData=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("sendWatchWithData start"),$dispatch(coreUi.changeDataIsBigHwnd(t)),n=$getState().conf,r=n.isSvcConf,a=n.svcShowAttendances,o=n.svcViewMode,"VIDEO_CONNECTED"!==(i=$getState().call.callStatus)||!r||!window.CLIENTCONFIG.ISWIN||o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=12;break}return q.info("sendWatchWithData dataIsBigHwnd:"+t),e.next=8,coreCall.setBfcpIsBigWnd($getState().call.callId,t);case 8:return e.next=10,X.sendSvcWatchRequest(a);case 10:return e.next=12,Z.createAllWndDecoders(a);case 12:q.info("sendWatchWithData end");case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.sendWatchStopOrRecovery=function(){var e=(0,x.default)(O.default.mark(function e(t){var n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("sendWatchStopOrRecovery start,param: ",t),$dispatch(coreUi.changeIsStopSvcWatch(t.isStop)),!1!==t.setValueOnly){e.next=9;break}return q.info("sendWatchStopOrRecovery start/recovery watch"),n=$getState().conf.svcShowAttendances,e.next=7,X.sendSvcWatchRequest(n);case 7:return e.next=9,Z.createAllWndDecoders(n);case 9:q.info("sendWatchStopOrRecovery end");case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.initBfcpFrame=function(){var e=(0,x.default)(O.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p,h;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=$getState().conf.bfcpFrameHwnd)>0)){e.next=4;break}return q.info("bfcp native frame have already created!"),e.abrupt("return");case 4:return q.info("begin init bfcp native frame!"),a=!1,window.CLIENTCONFIG.ISBIGWIN&&(a=!0),ee.isBfcpFromData=n,o=ee.getModeAndVersion(a,!0),i=o.mode,s=o.version,e.next=11,W.NativeInterface.initNativeScreen(i,s,window.langcode,!0);case 11:if(!(c=e.sent)){e.next=25;break}if($dispatch(coreUi.changeBfcpFrameHwnd(c)),!$getState().conf.isDataConfSharing){e.next=19;break}return q.info("isDataConfSharing is true  destroy bfcpfHwnd "),e.next=18,ee.closeBfcpFrame();case 18:return e.abrupt("return");case 19:return e.next=21,W.NativeInterface.createWindows(c,1,0,[{type:2}]);case 21:return u=e.sent,u&&u.length>0&&(W.NativeInterface.setBFCPWindow(t,u[0].hwnd,n),f=$getState().conf,l=f.confSubject,d=f.confServerId,p=f.vmrId,isNullOrEmpty(p)||(d=p),h=(0,L.default)({},{set_window_title:{title:l,confID:d}}),W.NativeInterface.setParam(h,c),ee.setIsSupportChatNative(c),window.isHubEnv&&ee.switchVideoToMin()),e.next=25,ee.sendWatchWithBfcp(!0);case 25:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.closeBfcpFrame=(0,x.default)(O.default.mark(function e(){var t;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.bfcpFrameHwnd,t>0&&(W.NativeInterface.uninitNativeScreen(t,!0),$dispatch(coreUi.changeBfcpFrameHwnd(0))),e.next=4,ee.sendWatchWithBfcp(!1);case 4:case"end":return e.stop()}},e,void 0)})),p.nativeNotifyUpdateBfcpFrameWnd=function(){var e=(0,x.default)(O.default.mark(function e(t,n){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.NativeInterface.setBFCPWindow($getState().call.callId,t,ee.isBfcpFromData),$dispatch(coreUi.changeBfcpFrameHwnd(t)),e.next=4,ee.sendWatchWithBfcp(n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.nativeNotifyUpdateDataIsBigHwnd=function(){var e=(0,x.default)(O.default.mark(function e(t){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.sendWatchWithData(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.nativeNotifyIsStopWatchSvc=function(){var e=(0,x.default)(O.default.mark(function e(t){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.sendWatchStopOrRecovery(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.switchVideoToMin=(0,x.default)(O.default.mark(function e(){var t,n,r,a,o,i,s;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("switchVideoToMin"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isShowMinWin,a=t.svcMiniViewMode,o=t.svcViewMode,!r){e.next=6;break}return q.info("switchVideoToMin isShowMinWin is true"),window.isDataSharing&&(ee.setViewMode(o),q.info("switchVideoToMin share owner is self,reSet layout = "+(o+256))),e.abrupt("return");case 6:return window.lockHandleAtdlist=!0,i=new I.default([constant.SVC_VIEW_MODE.BIG_SMALL_MODE,constant.SVC_VIEW_MODE.DIVIDE_MODE,constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,constant.SVC_VIEW_MODE.MIN_WIM_FLOAT]),i.has(o)?$dispatch(coreUi.changePreConfViewMode(o)):$dispatch(coreUi.changePreConfViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE)),0===a&&(a=window.isHubEnv?constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),ee.setViewMode(a),q.info("changeIsShowMinWin true 5"),$dispatch(coreUi.changeIsShowMinWin(!0)),ee.switchViewMode(a,!1),s=new Array,s.push(constant.SVC_VIEW_MODE.MIN_WIN_MIN),s.push(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE),s.push(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),s.push(constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE),s.push(constant.SVC_VIEW_MODE.MIN_WIM_FLOAT),$dispatch(coreUi.changeCurrentLayout(s)),e.next=23,ee.reInitAtdAndWindow(a,!0);case 23:ee.setPageNum(a,n.length),window.lockHandleAtdlist=!1;case 25:case"end":return e.stop()}},e,void 0)})),p.RedrawVideoMain=(0,x.default)(O.default.mark(function e(){var t,n,r,a,o,i,s,c;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("RedrawVideoMain"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcViewMode,a=t.svcShowPage,o=t.maxSizeForPage,i=a,window.lockHandleAtdlist=!0,s=n.length,c=ee.getPageNum(r,s),!(s<o)){e.next=10;break}return q.info("RedrawVideoMain, onLineNum = "+s+", maxSizeForPage = "+o),window.lockHandleAtdlist=!1,e.abrupt("return");case 10:if(!(c<=a)){e.next=18;break}return i=c-1,q.info("RedrawVideoMain,pageNum is less than svcShowPage,pageNum = "+c+",showPage = "+a),ee.handlePageSwitch(i),$dispatch(coreUi.changeSvcShowPage(i)),ee.setPageNum(a,s),window.lockHandleAtdlist=!1,e.abrupt("return");case 18:window.lockHandleAtdlist=!1,ee.handleAtdlist(n);case 20:case"end":return e.stop()}},e,void 0)})),p.switchVideoToMain=(0,x.default)(O.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("switchVideoToMain"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isSvcBroadcastMode,a=t.svcViewMode,o=t.isShowMinWin,i=t.svcPreViewMode,o){e.next=4;break}return e.abrupt("return");case 4:if(window.lockHandleAtdlist=!0,s=i||constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!window.isHubEnv){e.next=10;break}s=constant.SVC_VIEW_MODE.DIVIDE_MODE,e.next=14;break;case 10:return c=$getState().conf.isSvcSelectMode,u={isSvcSelectMode:c},e.next=14,ee.setParam(u);case 14:return ee.setViewMode(s),q.info("changeIsShowMinWin false 5"),$dispatch(coreUi.changeIsShowMinWin(!1)),e.next=19,ee.switchViewMode(s,!1);case 19:return ee.setAvailableMode(!1,n,r),e.next=22,ee.reInitAtdAndWindow(s,!0);case 22:ee.setPageNum(s,n.length),window.lockHandleAtdlist=!1;case 24:case"end":return e.stop()}},e,void 0)})),p.handleSpeakerNotify=function(e){var t=$getState().conf,n=t.confSpeaker,r=t.svcShowAttendances,a=(t.videoFrameHwnd,t.svcViewMode),o={};if(e&&ee.speaker!==e&&(o=(0,L.default)(o,{set_speaker:{name:e,icon:""}}),ee.speaker=e),a!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){var i=0;if(n&&n.speaker.length>0)for(var s=n.speaker[0].number,c=0;c<r.length;c++)if(s===r[c].number){i=r[c].wnd_handle;break}ee.highlightWnd!==i&&(o=(0,L.default)(o,{highlight_cell:{hwnd:i,show:1}}),ee.highlightWnd=i)}ee.setParam(o)},p.setWindowName=function(e){var t=$getState().conf,n=t.svcViewMode,r=(t.svcShowPage,t.svcWndHandles),a=t.svcBigPicInfo,o=t.videoFrameHwnd,i=t.bigHwnd;if(r&&e&&0!==r.length){for(var s=new Array,c=0;c<e.length;c++){var u={hwnd:e[c].wnd_handle,confName:e[c].name};1===e[c].is_self&&(u.confName=e[c].name+"("+language.ME+")"),s.push(u)}if((n===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||n===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||n===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||n===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT||n===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE)&&a&&i>0){var f={hwnd:i,confName:a.name};1===a.is_self&&(f.confName=a.name+"("+language.ME+")"),s.splice(0,0,f)}Y("window and name list is",s,2),W.NativeInterface.setWindowsName(o,s)}},p.setPageNum=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$getState().conf,a=r.svcShowPage,o=r.videoFrameHwnd,i=r.svcPageNum,s=1;e!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE&&t>0&&(s=ee.getPageNum(e,t)),(i!==s||n)&&(W.NativeInterface.setPageNum(o,a+1,s),$dispatch(coreUi.changeSvcPageNum(s)),q.info("setPageNum, onLineCount = "+t+", viewMode = "+e+",svcShowPage = "+a+",pageNum = "+s))},p.setParam=function(e){if(window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISBIGWIN){var t=ee.getVideoFramHwnd();e&&"{}"!==(0,M.default)(e)?W.NativeInterface.setParam(e,t):window.CLIENTCONFIG.ISWIN&&B.setDataConfParams(e)}},p.setConfUserInfo=function(e){if($getState().conf.setPreviewsCount!==e){$dispatch(coreUi.reportSetPreviewsCount(e));var t=(0,L.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}},p.setSignal=function(e){var t=(0,L.default)({},{set_signal:{level:e}});ee.setParam(t)},p.setSubject=function(e){var t=$getState().conf,n=t.confServerId,r=t.vmrId;isNullOrEmpty(r)||(n=r);var a=(0,L.default)({},{set_window_title:{title:e,confID:n}});ee.setParam(a)},p.setConfServerId=function(e,t){q.info("setConfServerId confServerId = "+e+" confSubject = ");var n=(0,L.default)({},{set_window_title:{title:t,confID:e}});ee.setParam(n)},p.reportOnlineAtdNum=function(e){if(ee.getVideoFramHwnd()){if(e>0&&e!==ee.confMemNum){ee.confMemNum=e;var t=(0,L.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}}else if(reportOnlineAtdNumTimer&&clearInterval(reportOnlineAtdNumTimer),e>0){var n=0;reportOnlineAtdNumTimer=setInterval(function(e){if(ee.getVideoFramHwnd()){clearInterval(reportOnlineAtdNumTimer),ee.confMemNum=e;var t=(0,L.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}else++n>15&&clearInterval(reportOnlineAtdNumTimer)},1e3)}},p.reportIsDataConf=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ee.getVideoFramHwnd()>0&&(e!==ee.isDataConf||t)){ee.isDataConf=e;var n={has_data_ability:{is_data_conf:e?1:0}};ee.setParam(n)}},p.getVideoFramHwnd=function(){var e=$getState().conf.videoFrameHwnd;return 0!==e||$getState().conf.isSvcConf||(e=$.getAvcFrameHandles()),e},p.reportConfInfo=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.conf_list_info){e.next=17;break}if(n=t.conf_list_info,r=n.conf_subject,a=(0,F.getConfTimedec)(n.start_time),o=n.scheduser_name,i=isNullOrEmpty(n.vmr_id)?n.conf_id:n.vmr_id,s=n.guest_join_uri,c=(0,F.getConfTimedec)(n.end_time),u={title:r,start_time:a,end_time:c,creator:o,id:i,link:s},$getState().conf.isVideoConf&&(0,M.default)(ee.conf_info)===(0,M.default)(u)){e.next=17;break}if(ee.conf_info=u,f="",!coreCommon.isWin()){e.next=16;break}return e.next=15,coreCommon.getQrcodeBase64(s);case 15:f=e.sent;case 16:window.CLIENTCONFIG.ISWIN&&$getState().conf.confServerId&&$getState().conf.confServerId===n.conf_id&&ee.setParam({conf_info:u,qrcodeBase64:f});case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.reportQos=function(e){var t=ee.getVideoFramHwnd(),n=(0,L.default)({},{QOS:e});t>0&&n&&W.NativeInterface.reportQos(t,n)},p.reportSingleState=function(e){var t=[],n=ee.oldSingleState,r=!0,a=!1,o=void 0;try{for(var i,s=(0,w.default)(e);!(r=(i=s.next()).done);r=!0){var c=(0,C.default)(i.value,2),u=c[0],f=c[1];n.has(u)&&n.get(u)===f||t.push({hwnd:u,state:f})}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}if(q.info("reportSingleState oldSingleState = "+(0,M.default)(ee.oldSingleState)+" VideoSingalState = "+(0,M.default)(e)+" newSingleState = "+(0,M.default)(t)+" "),ee.oldSingleState=e,0!==t.length){var l=$getState().conf.videoFrameHwnd,d=(0,L.default)({},{VideoSingalState:t});l>0&&d&&W.NativeInterface.setParam(d,l)}},p.getShowBoradcastParam=function(e){var t=$getState().conf.bigHwnd,n={},r={cellHwnd:t,show:e};return n.show_broadcast=r,n},p.getCancelWatchParam=function(e){var t={},n={show:e};return t.cancel_watch_icon=n,t},p.getAvailableModeParam=function(e,t){if(!e||0===e.length)return null;var n=$getState().conf,r=(n.videoFrameHwnd,n.currentLayout),a={},o=new Array;if(1===e.length?o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE):2===e.length||t?(o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),o.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)):(o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),o.push(constant.SVC_VIEW_MODE.DIVIDE_MODE),o.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)),(0,M.default)(r)!==(0,M.default)(o)){$dispatch(coreUi.changeCurrentLayout(o));var i={layouts:o};return a.set_available_layout=i,a}return null},p.getPageNumParam=function(e,t,n){q.info(" onLineCount = "+t+", viewMode = "+e+", svcShowPage = "+n);var r=$getState().conf.svcPageNum,a=1;if(e!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE&&t>0&&(a=ee.getPageNum(e,t)),r!==a){$dispatch(coreUi.changeSvcPageNum(a));var o={pos:n,count:a},i=[];return i.set_page_num=o,q.info("svcPageNum = "+r+",pageNum = "+a),i}return null},p.getWindowTextParam=function(e){if(e&&0!==e.length){for(var t=new Array,n={},r=$getState().conf,a=r.svcViewMode,o=r.svcBigPicInfo,i=r.bigHwnd,s=0;s<e.length;s++){var c={hwnd:e[s].wnd_handle,confName:e[s].name};t.push(c)}if((a===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||a===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)&&o){var u={hwnd:i,confName:o.name};t.splice(0,0,u)}return n.confInfo=t,q.info("window and name list is "+(0,M.default)(t)),n}},p.setAvailableMode=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){var n=$getState().conf,r=n.videoFrameHwnd,a=n.svcBandMode,o=n.currentLayout,i=new Array;window.CLIENTCONFIG.ISBIGWIN?i.push(constant.SVC_VIEW_MODE.DIVIDE_MODE):e?(i.push(constant.SVC_VIEW_MODE.MIN_WIN_MIN),i.push(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE),i.push(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),i.push(constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE),i.push(constant.SVC_VIEW_MODE.MIN_WIM_FLOAT)):1===t.length?i.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE):a===constant.SVC_BAND_MODE.LOW_BAND?i.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE):(i.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),i.push(constant.SVC_VIEW_MODE.DIVIDE_MODE),i.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)),(0,M.default)(o)!==(0,M.default)(i)&&r&&(W.NativeInterface.setAvailableLayout(r,i.length,i),$dispatch(coreUi.changeCurrentLayout(i)))}},p.setViewMode=function(e,t){var n=$getState().conf.videoFrameHwnd,r=n;t>0&&(r=t);var a=0;window.isDataSharing&&(a=256,q.info("setViewMode is specialMode "+(e+a).toString(16))),n>0?W.NativeInterface.setViewMode(r,e+a):q.info("video frame hwnd is 0,please check!")},p.handlePageSwitch=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.lockHandleAtdlist=!0,n=$getState().conf,r=n.svcViewMode,a=n.svcOnLineAttendances,o=n.usedSsrcList,i=a.length,!((s=ee.getPageNum(r,i))<t)){e.next=8;break}return window.lockHandleAtdlist=!1,q.info("handlePageSwitch,pageNum is less than showPage,pageNum = "+s+",showPage = "+t),e.abrupt("return");case 8:return $dispatch(coreUi.changeSvcShowPage(t)),c=[],$dispatch(coreUi.changeSvcShowAttendances([])),r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?$dispatch(coreUi.changeUsedSvcSSRCList([])):c=o.concat([]),e.next=14,ee.reInitAtdAndWindow(r,!1);case 14:r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL||(u=$getState().conf.usedSsrcList,f=u.filter(function(e){return-1===c.indexOf(e)}),$dispatch(coreUi.changeUsedSvcSSRCList(f)),q.info("handlePageSwitch svcViewMode = "+(0,M.default)(r)+" oldSSRCList = "+(0,M.default)(c)+" newUsedSsrcList = "+(0,M.default)(f))),window.lockHandleAtdlist=!1;case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleModeSwitch=function(){var e=(0,x.default)(O.default.mark(function e(t,n){var r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleModeSwitch,viewMode = "+t),r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcViewMode,i=r.videoFrameHwnd,n||(n=i),o!==t&&n===i){e.next=5;break}return e.abrupt("return");case 5:return window.lockHandleAtdlist=!0,e.next=8,ee.switchViewMode(t,!0,n);case 8:return e.next=10,ee.reInitAtdAndWindow(t);case 10:ee.setPageNum(t,a.length),window.lockHandleAtdlist=!1;case 12:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.handleWatch=function(){var e=(0,x.default)(O.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p,h,m,v;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleWatch,viewMode = "+t+"}"),r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcShowAttendances,i=r.videoFrameHwnd,s=r.isSvcBroadcastMode,c=r.isSvcSelectMode,u=r.isMinWin,f=r.bigHwnd,l=r.ssrcRange,d={},!c&&s&&(p=ee.getShowBoradcastParam(0),d=(0,L.default)(d,p)),n.ssrc||(n.ssrc=l.min),$dispatch(coreUi.changeSvcBigPicInfo(n)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcControlMode(1)),h=(0,L.default)({},n),$dispatch(coreUi.changeSvcSelectWatchInfo(h)),t!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=18;break}X.sendSvcWatchRequest(o),Z.createAllWndDecoders(o),ee.setWindowName(o),m=$getState().conf.isSvcSelectMode,d=(0,L.default)(d,{isSvcSelectMode:m}),e.next=41;break;case 18:if(t!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=25;break}X.sendSvcWatchRequest(o),Z.createAllWndDecoders(o),ee.setWindowName(o),v=$getState().conf.isSvcSelectMode,e.next=41;break;case 25:if(t!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=34;break}return window.lockHandleAtdlist=!0,e.next=29,ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0);case 29:return e.next=31,ee.reInitAtdAndWindow(constant.SVC_VIEW_MODE.BIG_SMALL_MODE);case 31:window.lockHandleAtdlist=!1,e.next=41;break;case 34:if(t!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL){e.next=41;break}return window.lockHandleAtdlist=!0,e.next=38,ee.switchViewMode(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE,!0);case 38:return e.next=40,ee.reInitAtdAndWindow(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE);case 40:window.lockHandleAtdlist=!1;case 41:u||ee.setAvailableMode(!1,a,s),ee.setParam(d);case 43:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.handleCancelWatch=function(){q.info("handleCancelWatch");var e=$getState().conf,t=e.svcShowAttendances,n=e.svcOnLineAttendances,r=e.isSvcBroadcastMode,a=e.svcBigPicInfo,o={};if(r){var i=ee.getShowBoradcastParam(1);o=(0,L.default)(o,i)}var s={ssrc:a.ssrc,is_self:0};1===a.is_self&&(s.is_self=1),$dispatch(coreUi.changeSvcBigPicInfo(s)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})),X.sendSvcWatchRequest(t);var c=$getState().conf,u=c.isSvcSelectMode;c.svcViewMode===constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&(o=(0,L.default)(o,{isSvcSelectMode:u})),ee.setAvailableMode(!1,n,r),ee.setParam(o)},p.reInitAtdAndWindow=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("reInitAtdAndWindow"),n=$getState().conf,r=n.svcShowPage,a=n.svcOnLineAttendances,o=n.isSvcShareMode,i=n.svcWndHandles,s=new Array,c=new Array,u=null,ee.aDeleteHwnds=Q.getAllHwnds(l),s=ee.initShowAtds(a),c=ee.constructPropList(t,s,l),!(t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.minModeKeepWndNum>0)){e.next=19;break}return ee.minModeKeepWndNum=0,e.next=12,Q.destoryHwnds(ee.aDeleteHwnds);case 12:return u=e.sent,f=u?u[0].hwnd:0,e.next=16,Q.createHwnds(ee.aDeleteHwnds.length,f);case 16:u=e.sent,e.next=22;break;case 19:return e.next=21,Q.updateHwnds(ee.aDeleteHwnds,{propList:c});case 21:u=e.sent;case 22:if(u&&0!==u.length){e.next=25;break}return q.info("reInitAtdAndWindow, hwndlist is null or zero,please check!"),e.abrupt("return");case 25:ee.setBigHwnd(t,u),ee.bindAtdsAndWnds(s,u),ee.handleWatchAndDecoder(s),ee.setWindowName(s),ee.setMuteState(),ee.setHandState();case 31:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.setBigHwnd=function(e,t){if(t&&0!==t.length&&(e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||e===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT||e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE))for(var n=0;n<t.length;n++)if(1===t[n].type){$dispatch(coreUi.changeBigHwnd(t[n].hwnd));break}},p.constructPropList=function(e,t,n){var r=new Array,a=null,o=$getState().conf.svcOnLineAttendances;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n&&o.length>1&&(r=ee.constructBigPropList()),a=ee.constructSmallPropList(t),r=r.concat(a);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:r=ee.constructSmallPropList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:r=ee.constructBigPropList(),a=ee.constructSmallPropList(t),r=r.concat(a);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:r=ee.constructBigPropList();break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:r=ee.constructSmallPropList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:r=ee.constructBigPropList()}return r},p.constructBigPropList=function(){var e=new Array;return e.push({type:constant.SVC_HWND_TYPE.BIG_VIDEO}),e},p.constructSmallPropList=function(e){for(var t=new Array,n={type:constant.SVC_HWND_TYPE.SMALL_VIDEO},r=0;r<e.length;r++)t.push(n);return t},p.switchViewMode=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=arguments[2];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcViewMode,a=n.svcOnLineAttendances,o=n.svcBandMode,r===t){e.next=21;break}if(a.length>=2&&o===constant.SVC_BAND_MODE.LOW_BAND&&(t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||t===constant.SVC_VIEW_MODE.DIVIDE_MODE)&&(t=constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(t)),$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeBigHwnd(0)),!u){e.next=11;break}return e.next=11,ee.setViewMode(t,f);case 11:if(t!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=16;break}return i=$getState().conf.isSvcSelectMode,s={isSvcSelectMode:i},e.next=16,ee.setParam(s);case 16:c=new I.default([constant.SVC_VIEW_MODE.MIN_WIN_MIN,constant.SVC_VIEW_MODE.MIN_WIN_SINGLE,constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL,constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE]),c.has(t)?(q.info("changeIsShowMinWin true 6"),$dispatch(coreUi.changeIsShowMinWin(!0)),$dispatch(coreUi.changeConfMiniViewMode(t))):(q.info("changeIsShowMinWin false 7"),$dispatch(coreUi.changeIsShowMinWin(!1))),window.CLIENTCONFIG.ISBIGWIN?$dispatch(coreUi.changeMaxSizeForPage(constant.SVC_MAX_SIZE_FOR_PAGE.BIGWIN_DV_MAX_SIZE)):$dispatch(coreUi.changeMaxSizeForPage(ee.getMaxSizeForPage(t))),e.next=22;break;case 21:q.info("viewMode is same,no need to change!");case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.createAtdInfo=function(e){if(e||e instanceof Object&&!Array.isArray(e)){var t=-1,n=$getState().conf.isSameGradeMcu;if(ee.isVideoMember(e)?t=z.assignSsrc(e):window.CLIENTCONFIG.ISWIN&&0===n&&0===e.is_same_grade_mcu&&(t=z.assignSsrc(e)),!t)return null;return{name:e.userInfo.name,number:e.number,is_self:e.is_self,is_broadcast:e.is_broadcast,is_same_grade_mcu:e.is_same_grade_mcu,media_type:e.media_type,wnd_handle:-1,ssrc:t}}},p.updataIsMuteStu=function(e,t){if(t&&!(t.length<1)&&e)for(var n=0;n<t.length;n++){var r=t[n].number;if(1===t[n].is_self){var a=$getState().call.micValue;ee.localMicStates.wndHand=t[n].wnd_handle,ee.localMicStates.isMicMute=e.get(r).is_mute,t[n].is_mute=1===e.get(r).is_mute||0===a?1:0}else!e.has(r)||void 0!==t[n].is_mute&&t[n].is_mute===e.get(r).is_mute||(t[n].is_mute=e.get(r).is_mute)}},p.setBigMuteState=function(e,t){var n=$getState().conf.videoFrameHwnd,r=[];if(e){var a=$getState().call.micValue,o=1===ee.localMicStates.isMicMute||0===a?1:0,i={hwnd:ee.localMicStates.wndHand,is_mute:o};r.push(i)}else if(t)for(var s=0,c=t.length;s<c;s++){var u={hwnd:t[s].wnd_handle,is_mute:t[s].is_mute};r.push(u)}q.info("setBigMuteState muteState is "+(0,M.default)(r)),W.NativeInterface.setParam({muteState:r},n)},p.getCanUseAtdsPos=function(){var e=$getState().conf,t=e.svcViewMode,n=e.svcShowPage,r=(e.isSvcShareMode,e.maxSizeForPage),a=0;return t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?a=n*r:t===constant.SVC_VIEW_MODE.DIVIDE_MODE&&n>0&&(a=n*(r-1)+1),a},p.getMaxSizeForPage=function(e){var t=$getState().conf.svcBandMode,n=0;return e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?n=t===constant.SVC_BAND_MODE.MIDDLE_BAND?constant.SVC_MAX_SIZE_FOR_PAGE.LOW_BS_MAX_SIZE:constant.SVC_MAX_SIZE_FOR_PAGE.BS_MAX_SIZE:e===constant.SVC_VIEW_MODE.DIVIDE_MODE?(t===constant.SVC_BAND_MODE.MIDDLE_BAND?n=constant.SVC_MAX_SIZE_FOR_PAGE.LOW_DV_MAX_SIZE:(n=constant.SVC_MAX_SIZE_FOR_PAGE.DV_MAX_SIZE,window.CLIENTCONFIG.ISBIGWIN&&(n=constant.SVC_MAX_SIZE_FOR_PAGE.BIGWIN_DV_MAX_SIZE)),window.CLIENTCONFIG.ISWIN&&($getState().call.iSreceivingBFCP||coreConf.isReceivingDataShare()||coreConf.isRecevingAppshare()||coreConf.isInReceiveDocSharing()||coreConf.isRecevingWBSharing())&&(n-=1),q.info("maxSizeForPage maxSize:",n)):e===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?n=constant.SVC_MAX_SIZE_FOR_PAGE.PIP_MAX_SIZE:e===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(n=constant.SVC_MAX_SIZE_FOR_PAGE.MIN_WIN_VERTICAL_SIZE),n},p.getPageNum=function(e,t){var n=1,r=$getState().conf,a=r.isSvcShareMode,o=r.maxSizeForPage;return e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?n=a?Math.ceil((t+1)/o):Math.ceil(t/o):e===constant.SVC_VIEW_MODE.DIVIDE_MODE?n=Math.ceil((t-1)/(o-1)):e===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(n=Math.ceil(t/o)),n},p.getAttendeeByHwnd=function(e){var t=$getState().conf,n=t.svcShowAttendances,r=(t.isSvcShareMode,t.svcShowPage,t.svcShareData,t.svcWndHandles,null);return r=n.find(function(t){return t.wnd_handle===e}),q.info("getAttendeeByHwnd"),r},p.getAtdFullInfoByHwnd=function(e){var t=ee.getAttendeeByHwnd(e),n=null;if(t)for(var r=t.number,a=$getState().conf.memberListInfo,o=a.length;o--;)if(r===a[o].number){n=a[o];break}return n},p.getConfNameBySsrc=function(e){for(var t="",n=$getState().conf,r=n.svcShowAttendances,a=n.svcBigPicInfo,o=n.svcViewMode,i=0;i<r.length;i++)if(e===r[i].ssrc){t=r[i].name;break}return o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||a&&e===a.ssrc&&(t=a.name),t},p.getConfhwndBySsrc=function(e){for(var t=0,n=$getState().conf,r=n.svcShowAttendances,a=n.svcBigPicInfo,o=n.svcViewMode,i=0;i<r.length;i++)if(e===r[i].ssrc){t=r[i].wnd_handle;break}return o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||a&&e===a.ssrc&&(t=a.wnd_handle),t},p.getModeAndVersion=function(e,t){var n={mode:3,version:0};return e?(n.mode=constant.SVC_VIEW_MODE.DIVIDE_MODE,n.version=constant.SVC_VERSION_FLAG.BIG):t?(n.mode=constant.SVC_VIEW_MODE.BFCP_MODE,n.version=constant.SVC_VERSION_FLAG.BASE):(n.mode=constant.SVC_VIEW_MODE.BIG_SMALL_MODE,n.version=constant.SVC_VERSION_FLAG.BASE),n},p.handleSvcSsrcModify=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i,s;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleSvcSsrcModify"),n=$getState().conf,r=n.svcOnLineAttendances,a=n.svcShowAttendances,o=n.svcBigPicInfo,i=z.updateAllSsrcOfAtds(a),$dispatch(coreUi.changeSvcShowAttendances(i)),!window.CLIENTCONFIG.ISBIGWIN&&o.hasOwnProperty("ssrc")&&(s=(0,L.default)([],o),s.ssrc=t.min,z.addSvcSSRC(t.min),$dispatch(coreUi.changeSvcBigPicInfo(s))),!(r.length>1)){e.next=10;break}return e.next=8,X.sendSvcWatchRequest(i);case 8:return e.next=10,Z.createAllWndDecoders(i);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleMultiViewBroadcast=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleMultiViewBroadcast start param = "+(0,M.default)(t)),$getState().conf.isSvcConf){e.next=16;break}if(-1!==t){e.next=8;break}$dispatch(coreUi.changevideoBroadcastNum("")),coreConf.setIsAvcMultiViewBroadcast(!1),0===$getState().conf.selfRole&&(window.CLIENTCONFIG.ISWIN?ee.alertBox(language.BROADCAST_CANCELLED_BY_CHAIRMAN,3):window.Toast(language.BROADCAST_CANCELLED_BY_CHAIRMAN,2)),e.next=15;break;case 8:if(null!==(n=t&&t.attendee_vc?t.attendee_vc:null)){e.next=12;break}return q.info("handleMultiViewBroadcast param.attendee_vc is null, please check!!!"),e.abrupt("return");case 12:r="M"+n.mcu_num+"T"+n.terminal_num,$dispatch(coreUi.changevideoBroadcastNum(r)),coreConf.setIsAvcMultiViewBroadcast(!0);case 15:return e.abrupt("return");case 16:if(!window.CLIENTCONFIG.ISWIN){e.next=19;break}return q.info("NO NEED TO handleMultiViewBroadcast"),e.abrupt("return");case 19:if(-1!==t){e.next=24;break}$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!1)),$dispatch(coreUi.changeBroadcastIsMultiView(!1)),e.next=33;break;case 24:if(null!==(a=t&&t.attendee_vc?t.attendee_vc:null)){e.next=28;break}return q.info("handleMultiViewBroadcast param.attendee_vc is null, please check!!!"),e.abrupt("return");case 28:o="M"+a.mcu_num+"T"+a.terminal_num,0===a.terminal_num&&$dispatch(coreUi.changeBroadcastIsMultiView(!0)),i={userInfo:{name:language.MULTI_VIEW_BROADCAST_NAME},name:language.MULTI_VIEW_BROADCAST_NAME,media_type:3,number:o,is_mute:0,role:0,state:5,is_self:0,is_broadcast:1},$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!0)),ee.handleAtdlist([i,{}]);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.reportSRTPStatus=function(){var e=$getState().conf,t=(e.videoFrameHwnd,e.isSrtp),n=t?1:0,r={};r.init_state={encrypt:n},q.info("init_state "+(0,M.default)(r)),ee.setParam(r)},p.setHandState=function(){var e=$getState().conf.svcShowAttendances;if(e&&0!==e.length){for(var t=ee.handInfo,n=[],r=0;r<e.length;++r){var a={hand_state:t.get(e[r].number)?t.get(e[r].number).hand_state:0,hwnd:e[r].wnd_handle};n.push(a)}var o=ee.getVideoFramHwnd(),i={handsUpState:n};i&&W.NativeInterface.setParam(i,o)}},p.setMuteState=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1],n=$getState().conf,r=n.svcShowAttendances,a=(n.svcOnLineAttendances,n.isSvcConf);if(!a||r&&0!==r.length){var o=ee.getVideoFramHwnd(),i=($getState().call.isMuteMic,ee.muteInfo),s=[],c={mic_volume:-1},u={};if(a){if(e&&void 0!==t){for(var f=0,l=r.length;f<l;f++)if(1===r[f].is_self){r[f].is_mute=t?1:0;var d={hwnd:r[f].wnd_handle,is_mute:t?1:0};c.mic_volume=t?0:100,s.push(d)}}else for(var p=0,h=r.length;p<h;p++){var m={},v=r[p].number;i.has(v)&&(void 0!==r[p].is_mute&&r[p].is_mute===i.get(v).is_mute&&r[p].wnd_handle===i.get(v).wnd_handle||(r[p].is_mute=i.get(v).is_mute,m={hwnd:r[p].wnd_handle,is_mute:r[p].is_mute},s.push(m),1===r[p].is_self&&(c.mic_volume=1===r[p].is_mute?0:100)))}q.info("setMuteState muteState is "+(0,M.default)(s)),s.length>0&&(u=(0,L.default)({},u,{muteState:s}),$dispatch(coreUi.changeSvcShowAttendances(r))),-1!==c.mic_volume&&(u=(0,L.default)({},u,{init_device_state:c}))}else{var g=$.getLocalVideoHwnd(),C={hwnd:g,is_mute:t?1:0};c.mic_volume=t?0:100,s.push(C),u=(0,L.default)({},{muteState:s},{init_device_state:c})}u&&W.NativeInterface.setParam(u,o)}},p.checkSerialConf=function(e){for(var t=!1,n=$getState().conf.serialMcuMemberList,r=0;r<n.length;r++)if(n[r].number===e){t=!0;break}return t},p.getUserInfoByHwnd=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,m,g,C,S,w,_,b,N;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new I.default,r={},a=null,o=null,i=-1,s=0,!(t>0)){e.next=17;break}if(o=ee.getAtdFullInfoByHwnd(t),s=o.hand_state,a=o.userInfo,!isNullOrEmpty(a.account)||!isNullOrEmpty(a.contact_id)){e.next=14;break}return c=a.number,u=a.name,e.next=12,(0,j.searchContact)(c,u);case 12:f=e.sent,f&&1<=f.length&&(q.info("search userInfo when first right click success!"),a=(0,L.default)({},f[0]),(0,j.updateMemberDetail)(a,c,u));case 14:i=o.number,e.next=18;break;case 17:0===t&&(a=$getState().myInfo,i=a.bind_no);case 18:if(a){for(l=["mobile","home_phone","office_phone","short_phone","ip_phone","other_phone","other_phone2"],d=l.length;d--;)p=l[d],a[p]&&a[p]!==i&&n.add(a[p]);r={hwnd:t,usernum:(0,v.default)(n)},t>0&&o&&(h=o.is_broadcast,m=o.is_self,g=o.is_mute,C=o.role,S=1===h?0:1===m?1:2,w=$getState().conf.transferChairman,r=(0,L.default)({},r,{type:S,isSelf:m,broadcast:h,isMute:g,isChairman:C,transferChairman:w}))}else r={hwnd:t,error:2};r=(0,L.default)({},r,{hand_state:s}),_=$getState().conf.videoFrameHwnd,b=r.usernum.map(function(e){return handlePhoneNumber(e)}),N=(0,L.default)({},r,{usernum:b}),q.info("getUserInfoByHwnd query_user_info_result is "+(0,M.default)(N)),W.NativeInterface.reportUserInfo(_,{query_user_info_result:r});case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.callOtherNum=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("callOtherNum start"),""===t.usernum){e.next=15;break}if(n=$getState().conf.memberListInfo,r=null,t.hwnd>0)r=ee.getAttendeeByHwnd(t.hwnd);else for(a=0;a<n.length;a++)1===n[a].is_self&&(r=n[a]);if(!r){e.next=14;break}return q.info("callOtherNum name = "+handlePhoneNumber(r.name)),r=(0,L.default)({},r,{number:t.usernum}),o=[],o.push(r),e.next=12,(0,F.actionCallOtherNum)(o);case 12:e.next=15;break;case 14:q.info("callOtherNum faild! number = "+handlePhoneNumber(t.usernum));case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.callAttendeeResult=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse((0,M.default)(t)),void 0!==n.number&&(r=n.number,n.number=handlePhoneNumber(r)),q.info("callAttendeeResult",(0,M.default)(n)),t.ret&&(q.info("callAttendeeResult tip start"),a=language.LANG_NATIVE_INVITE_FAILED,o=language.LANG_NATIVE_BEING_BUSY_INVITE_FAILED,t.userInfo&&t.userInfo.name?(a=a.replace("%s",t.userInfo.name),o=o.replace("%s",t.userInfo.name)):(a=a.replace("%s",""),o=o.replace("%s","")),4===t.reason?("win"===window.CLIENTCONFIG.PLATFORM&&ee.alertBox(o,3),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(o,4,!1,"pcToast",""),window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(o,2)):(t.reason,"win"===window.CLIENTCONFIG.PLATFORM&&ee.alertBox(a,3),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(a,4,!1,"pcToast",""),window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(a,2)));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.muteAttendee=function(){var e=(0,x.default)(O.default.mark(function e(t){var n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.hwnd>0)){e.next=5;break}if(!(n=ee.getAttendeeByHwnd(t.hwnd))){e.next=5;break}return e.next=5,(0,F.actionMuteAttendee)(t.isMute,n.number,n.isSelf);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.removeAttendee=function(){var e=(0,x.default)(O.default.mark(function e(t){var n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("svcmanager remove attendee ",t),!(t.hwnd>0)){e.next=6;break}if(!(n=ee.getAttendeeByHwnd(t.hwnd))){e.next=6;break}return e.next=6,(0,F.actionRemoveAttendee)(n.number);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.lockConf=function(){var e=(0,x.default)(O.default.mark(function e(t){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("svcmanager lock conf",t),e.next=3,coreCall.mlockConf(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handup=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("svcmanager hand up",t),n=$getState().myInfo.bind_no,t.hwnd>0&&(r=ee.getAttendeeByHwnd(t.hwnd))&&(n=r.number),a=1===t.hand_state?0:1,coreConf.confHandUp({toHandUp:a,attendeeInfo:n});case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.hangupAttendee=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.hwnd)>0)){e.next=26;break}if(r=ee.getAtdFullInfoByHwnd(n),q.info("hangupAttendee hwnd = "+n+", attendee = "+r),!r){e.next=26;break}if(a=r.number,o=r.state,i=r.participant_id,window.isSupportiDo){e.next=18;break}if(!i||i===a){e.next=13;break}return q.info("REST right menu actionHangupAttendee, hangup attendee: ",handlePhoneNumber(a)),e.next=11,(0,F.actionHangupAttendee)(a);case 11:e.next=16;break;case 13:return q.info("REST right menu actionRemoveAttendee, remove attendee: ",handlePhoneNumber(a)),e.next=16,(0,F.actionRemoveAttendee)(a);case 16:e.next=26;break;case 18:if(q.info("iDo right menu operatorHangupAttendee, hangup attendee: ",handlePhoneNumber(a)),5!==o){e.next=24;break}return e.next=22,(0,F.actionHangupAttendee)(a);case 22:e.next=26;break;case 24:return e.next=26,(0,F.actionRemoveAttendee)(a);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.transferChairman=function(){var e=(0,x.default)(O.default.mark(function e(t){var n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=$getState().conf.transferChairman)){e.next=4;break}return e.next=4,n(t.usernum);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.broadcastAttendee=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.hwnd)>0)){e.next=7;break}if(!(r=ee.getAtdFullInfoByHwnd(n))){e.next=7;break}return a=1===r.is_broadcast?0:1,e.next=7,(0,F.actionBroadcastAttendee)(a,r.number);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleConfCtrl=function(){var e=(0,x.default)(O.default.mark(function e(t){var n,r;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,M.default)(t),r=t.action,e.t0=r,e.next="mute"===e.t0?5:"broadcast"===e.t0?8:"hangup"===e.t0?11:"set_chairman"===e.t0?14:"request_chairman"===e.t0?17:"release_chairman"===e.t0?20:"call"===e.t0?23:"delete"===e.t0?26:"lock"===e.t0?29:"unlock"===e.t0?32:"put_up_hands"===e.t0?35:"put_down_hands"===e.t0?38:"extend_meeting"===e.t0?41:44;break;case 5:return e.next=7,ee.muteAttendee(t);case 7:return e.abrupt("break",45);case 8:return e.next=10,ee.broadcastAttendee(t);case 10:return e.abrupt("break",45);case 11:return e.next=13,ee.hangupAttendee(t);case 13:return e.abrupt("break",45);case 14:return e.next=16,ee.transferChairman(t);case 16:return e.abrupt("break",45);case 17:return e.next=19,V.ToolbarManager.applyOrReleasechairman({applyStu:1,pwd:t.pwd});case 19:return e.abrupt("break",45);case 20:return e.next=22,V.ToolbarManager.applyOrReleasechairman({applyStu:0});case 22:return e.abrupt("break",45);case 23:return e.next=25,ee.callOtherNum(t);case 25:return e.abrupt("break",45);case 26:return e.next=28,ee.removeAttendee(t);case 28:return e.abrupt("break",45);case 29:return e.next=31,ee.lockConf(t);case 31:return e.abrupt("break",45);case 32:return e.next=34,ee.lockConf(t);case 34:return e.abrupt("break",45);case 35:return e.next=37,ee.handup(t);case 37:return e.abrupt("break",45);case 38:return e.next=40,ee.handup(t);case 40:return e.abrupt("break",45);case 41:return e.next=43,V.ToolbarManager.postponeConf(t);case 43:return e.abrupt("break",45);case 44:q.info("handleConfCtrl cmd not match! pleace check");case 45:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.isNativeUIExsit=function(){var e=$getState().conf.videoFrameHwnd;return 0!==e||$getState().conf.isSvcConf||(e=$.getAvcFrameHandles()),0!==e},p.alertBox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4e3,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(e){var s=$getState().conf.videoFrameHwnd;0!==s||$getState().conf.isSvcConf||(s=$.getAvcFrameHandles());var c={dialog_type:1&t,button_count:0==(4&t)?2:1};2==(2&t)?c.content=e:c.content_id=e,c.isForceOnNativeWnd=n,c.dialogID=r,c.confirmBtnText=a,c.showTime=o,c.toastLevel=i,c&&W.NativeInterface.showMessageBox(s,c)}},p.destroyNativeWin=function(){W.NativeInterface.destroyNativeWin()},p.removeShowAttendances=function(e){var t=$getState().conf.svcShowAttendances;if(q.info("removeShowAttendances: "+e,e),!isNullOrEmpty(e)){for(var n=-1,r=0;r<t.length;r++)t[r].name===e.name&&(n=r);q.info("removeShowAttendances pos: "+n);var a=(0,L.default)([],t);-1!==n&&(a.splice(n,1),$dispatch(coreUi.changeSvcShowAttendances(a)))}},p.destroyLastNativeWin=(0,x.default)(O.default.mark(function e(){var t,n,r,a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("destroyLastNativeWin"),t=$getState().conf,n=t.svcShowAttendances,r=t.maxSizeForPage,a=t.svcWndHandles,q.info("maxSizeForPage is "+r+", svcShowAttendances.length is "+n.length),!(r<=n.length)){e.next=11;break}return o=new Array,o.push(n[n.length-1].wnd_handle),e.next=8,Q.destoryHwnds(o);case 8:z.removeSvcSSRC(n[n.length-1].ssrc),n.splice(n.length-1,1),$dispatch(coreUi.changeSvcShowAttendances(svcShowAttendancesList));case 11:case"end":return e.stop()}},e,void 0)})),p.switchCPURateCalc=function(e){e=!0===e?1:0;var t=$getState().conf.videoFrameHwnd,n={open:e,duration_ms:5e3};G.EncoderAdpt.clear(),ee.setParam({calc_cpu_rate:n,frameHwnd:t})},p.handleCPURate=function(e){e&&e.cpu&&(q.info("SVC handleCPURate",G.EncoderAdpt),G.EncoderAdpt.feed(e.cpu,e.version))},p.clear=function(){ee.memberlistArray=new Array},p.setIsSupportChatNative=function(e){var t=$getState().call.userInfo,n=$getState().conf.groupId,r=!1;isNullOrEmpty(n)||(r=!0),t&&!isNullOrEmpty(t.account)&&(r=!0),coreAccount.getLoginModel().then(function(t){t.useIM||(r=!1);var n=(0,L.default)({},{isSupportChat:r});W.NativeInterface.setParam(n,e)})},h)},216:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showNativeShareSelectWnd=t.bfcpWinDetach=t.bfcpWinAttach=t.isRecevingAppshare=t.getOldShareAppHwnd=t.setOldShareAppHwnd=t.setShareAudio=t.getShareAudio=t.getShareAppHwnd=t.setShareAppHwnd=t.changeShareMonitorType=t.dataConfStatus=t.confInfoNotifyParamsExist=t.getCloseShareDataOperate=t.setCloseShareDataOperate=t.getDataStreamInfo=t.isSendingWBSharing=t.isSendScreenSharing=t.isInScreenSharing=t.clearConfSharingType=t.setDataShareVersion=t.beLeaveDataConf=t.leaveDataConf=t.setDataConfParams=t.getDisplayInfo=t.setDataConfShareRealRect=t.setDataShareRealRect=t.inputWndMsg=t.cancelSharingapp=t.setTransparentwindow=t.setStart=t.setAppShareScreenParam=t.setSharingapp=t.handleNativeNotifyResetRenderRect=t.setDataShareScreenPicQuality=t.showNativeRemoteControl=t.stopWBDoc=t.closeWBTab=t.isRecevingWBSharing=t.isInWBSharing=t.configSharingParam=t.advancedSetting=t.createWBNewDocAndPage=t.getApplist=t.closeNativeDataSharingWnd=t.createNativeDataSharingWnd=t.showNativeDataControl=t.getIsUsePrimarySize=t.changeIsUsePrimarySize=t.isInShareAnnotation=t.isRemoteControling=t.getRemoteControlUserNum=t.changeRemoteControl2Other=t.delRemoteControlPrivilege=t.rejectRemoteControlPrivilege=t.requestRemoteControlPrivilege=t.openDocShareFile=t.isConfDataShareSelfEntered=t.getDataShareOwner=t.setDataCodecVersion=t.getDataCodeccVersion=t.getDataNegoBandwidth=t.docShareCompLoadSucCallback=t.getDocShareFilePath=t.isConfDocShareLoadSuccess=t.stopStgTunnel=t.stopShareScreen=t.getSharingType=t.isConfDataShareLoadSuccess=t.setNativeDataControlStatus=t.setIsAutoStartScreenShare=t.getIsAutoStartScreenShare=t.getMyUserId=t.handleShareEnd=t.isInReceiveDocSharing=t.stopDocSharing=t.isInSendDocSharing=t.startShare=t.isInDataScreenOrWbSharing=t.isDataShareStarted=t.updateDataShareOwner=t.getDataShareOwnerBindno=t.isRecevingSharing=t.isReceivingDataShare=t.updateMemberName=t.getDataConfMemberList=t.reSetFireWallModeType=t.setFireWallModeType=t.getFireWallModeType=t.isJoiningDataConf=t.isSelfJoinedDataConf=t.isInDataConf=t.terminateconf=t.handleBigParamNotifyResult=t.retryJoinDataConf=t.joinDataConf=t.initDataConf=void 0;var a=n(3),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(1760),l=r(f),d=n(355),p=n(261),h=n(592),m=coreLogger.getLogger("dataConf")("model"),v=null,g=!1,C=null,S=(t.initDataConf=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.DFConfig.deployMode=t,p.DFConfig.firewallType=n,p.DFConfig.stgAddresslist=r,e.next=5,coreTup.getdataConfInstance();case 5:a=e.sent,o={log_path:window.LOG_PATH+p.DFConfig.pathSeparator+"dataconf"+p.DFConfig.pathSeparator,temp_path:window.APP_DATA_PATH+p.DFConfig.pathSeparator,dev_type:p.DFConfig.devType},C=o,a.init(o);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.joinDataConf=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info(" joinDataConf start "),null===v){e.next=6;break}if(m.info("join data conf already exist"),!(w()||_()||S())){e.next=6;break}return m.info("joining data abort,status is "+v.dataConfStatus),e.abrupt("return");case 6:return m.info(" joinDataConf start uninit"),e.next=9,coreTup.getdataConfInstance();case 9:return r=e.sent,r.uninit(),m.info(" joinDataConf start init"),r.init(C),m.info(" joinDataConf end init"),v=new l.default,v.setCallId(n),v.setLeftConfCallback(I),e.next=19,v.setDataConfNotifyFunc();case 19:return e.next=21,v.setConfCtrlNotifyFunc();case 21:return e.next=23,v.joinDataConf(t);case 23:m.info(" joinDataConf end");case 24:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.retryJoinDataConf=function(){return m.info("retryJoinDataConf"),null===v?void m.info("retry join fail,service not exist"):v.retryJoin()},t.handleBigParamNotifyResult=function(e){return m.info("handleBigParamNotifyResult start"),null===v?void m.info("retry join fail,service not exist"):v.handleBigParamNotifyResult(e)},t.terminateconf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==v){e.next=3;break}return m.info("terninate conf service is null"),e.abrupt("return");case 3:return e.next=5,v.terminateconf();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInDataConf=function(){return null!==v},t.isSelfJoinedDataConf=function(){return v&&v.isSelfJoinedDataConf()}),w=t.isJoiningDataConf=function(){return v&&v.isJoiningDataConf()},_=function(){return v&&v.isLeavingDataConf()},I=(t.getFireWallModeType=function(){return p.DFConfig.firewallType},t.setFireWallModeType=function(e){m.info("setFireWallModeType : "+e+", 0:stg,1:svn,2:sbc"),p.DFConfig.firewallType=e},t.reSetFireWallModeType=function(){m.info("reSetFireWallModeType  NULL "),p.DFConfig.firewallType=h.DATA_FIREWALL_MODE.NULL},t.getDataConfMemberList=function(){return null===v?(m.info("getDataConfMemberList: service is null"),[]):v.getDataConfMemberList()},t.updateMemberName=function(e){if(null===v)return void m.info("updateMemberName: service is null");v.updateMemberName(e)},t.isReceivingDataShare=function(){return null===v?(m.info("isReceivingDataShare: service is null"),!1):v.isReceivingDataShare()},t.isRecevingSharing=function(){return null===v?(m.info("isRecevingSharing: service is null"),!1):v.isRecevingSharing()},t.getDataShareOwnerBindno=function(){return null===v?"":v.getDataShareOwnerBindno()},t.updateDataShareOwner=function(e){if(null!==v)return v.updateDataShareOwner(e);m.info("updateDataShareOwner: service is null")},t.isDataShareStarted=function(){return null===v?(m.info("isDataShareStarted: service is null"),!1):v.isDataShareStarted()},t.isInDataScreenOrWbSharing=function(){return null===v?(m.info("isDataShareStarted: service is null"),!1):v.isDataShareStarted()||v.isInWBSharing()},t.startShare=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==v){e.next=3;break}return m.info("startShare: service is null"),e.abrupt("return",o.default.reject(new Error("service is null")));case 3:return e.abrupt("return",v.startShare(t));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.isInSendDocSharing=function(){return null!==v&&v.isInSendDocSharing()},t.stopDocSharing=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=2;break}return e.abrupt("return",v.stopDocSharing());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInReceiveDocSharing=function(){return null!==v&&v.isInReceiveDocSharing()},t.handleShareEnd=function(e){v?v.handleShareEnd(e):m.info("handleShareEnd: service is null")},t.getMyUserId=function(){return null!==v?v.getMyUserId():""},t.getIsAutoStartScreenShare=function(){return g},t.setIsAutoStartScreenShare=function(e){m.info("setIsAutoStartScreenShare isAutoStart : ",e),g=e},t.setNativeDataControlStatus=function(e){if(v)return v.setNativeDataControlStatus(e)},t.isConfDataShareLoadSuccess=function(){return null!==v&&v.isConfDataShareLoadSuccess()},t.getSharingType=function(){return null===v?(m.info("get sharing type dataConfService error"),-1):v.getSharingType()},t.stopShareScreen=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==v){e.next=3;break}return m.info("stopShareScreen service is null"),e.abrupt("return",o.default.reject(new Error("service is null")));case 3:return e.next=5,v.stopShareScreen();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.stopStgTunnel=function(){null!==v&&v.stopStgTunnel()},function(){null!==v&&(m.info("releaseDataconf dataConfService is null"),v=null,(0,p.resetConfig)())});t.isConfDocShareLoadSuccess=function(){return!!v&&v.isConfDocShareLoadSuccess()},t.getDocShareFilePath=function(){return null===v?(m.info("get doc share file path confService error"),""):v.getDocShareFilePath()},t.docShareCompLoadSucCallback=function(e){v&&v.docShareCompLoadSucCallback(e)},t.getDataNegoBandwidth=function(){return v?v.getNegoBandwidth():0},t.getDataCodeccVersion=function(){return v?v.getDataCodeccVersion():0},t.setDataCodecVersion=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setDataCodecVersion(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getDataShareOwner=function(){return null!==v?v.getDataShareOwnerBindno():""},t.isConfDataShareSelfEntered=function(){return null!==v&&v.m_user_id>0},t.openDocShareFile=function(e){v&&(m.info("openDocShareFile called"),v.openDocShareFile(e))},t.requestRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.requestRemoteControlPrivilege();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.rejectRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.rejectRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.delRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.delRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v&&v.changeRemoteControl2Other(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getRemoteControlUserNum=function(){return v?v.getRemoteControlUserNum():""},t.isRemoteControling=function(){return null!==v&&v.isRemoteControling()},t.isInShareAnnotation=function(){return null!==v&&v.isInShareAnnotation()},t.changeIsUsePrimarySize=function(){null!==v&&(v.isUsePrimarySize=!v.isUsePrimarySize)},t.getIsUsePrimarySize=function(){return null!==v&&v.isUsePrimarySize},t.showNativeDataControl=function(e,t,n,r,a,o){v&&v.showNativeDataControl(e,e?o:"0",(0,d.isConfChairMan)(),t,n,r,a)},t.createNativeDataSharingWnd=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o,i,c,u,f,l,d){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,v.createNativeDataSharingWnd(t,n,r,a,o,i,c,u,f,l,d);case 3:e.next=6;break;case 5:m.info("create native data win, dataConfService is null");case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s,c,u,f,l){return e.apply(this,arguments)}}(),t.closeNativeDataSharingWnd=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.closeNativeDataSharingWnd();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getApplist=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.getApplist();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createWBNewDocAndPage=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=3;break}return e.next=3,v.requestWBToken(!0);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.advancedSetting=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=3;break}return e.next=3,v.advancedSetting(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.configSharingParam=function(e,t){if(null===v)return void m.info("config sharing param confService error");v.setConfSharingType(e,t)},t.isInWBSharing=function(){return null!==v&&v.isInWBSharing()},t.isRecevingWBSharing=function(){return null!==v&&v.isRecevingWBSharing()},t.closeWBTab=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=3;break}return e.next=3,v.closeWBTab();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.stopWBDoc=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=3;break}return e.next=3,v.stopWBDoc();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showNativeRemoteControl=function(e){v&&v.showNativeRemoteControl(e)},t.setDataShareScreenPicQuality=function(e){v&&v.setDataShareScreenPicQuality(e)},t.handleNativeNotifyResetRenderRect=function(e){m.info("handleNativeNotifyResetRenderRect start"),v&&v.handleNativeNotifyResetRenderRect(e)},t.setSharingapp=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setSharingapp(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setAppShareScreenParam=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setAppShareScreenParam(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setStart=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setStart();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setTransparentwindow=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setTransparentwindow(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.cancelSharingapp=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.cancelSharingapp(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.inputWndMsg=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.inputWndMsg(t,n,r,a,o);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.setDataShareRealRect=function(e,t,n,r){v?(m.info(" setDataShareRealRect set rect"),v.setDataConfShareRealRect(e,t,n,r)):m.info(" setDataShareRealRect dataConfService null")},t.setDataConfShareRealRect=function(){v&&v.setDataConfShareRealRect()},t.getDisplayInfo=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.getDisplayInfo();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setDataConfParams=function(e){v&&v.setDataConfParams(e)},t.leaveDataConf=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,v.leaveDataConf(t);case 3:e.next=6;break;case 5:m.info("leaveDataConf:service is null");case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.beLeaveDataConf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("beLeaveDataConf type "),v&&v.beLeaveDataConf();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setDataShareVersion=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setDataShareVersion(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.clearConfSharingType=function(){v&&v.resetConfSharingType()},t.isInScreenSharing=function(){return null!==v&&v.isInScreenSharing()},t.isSendScreenSharing=function(){return null!==v&&v.isSendScreenSharing()},t.isSendingWBSharing=function(){return null!==v&&v.isSendingWBSharing()},t.getDataStreamInfo=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.next=3,v.getStreamInfo();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setCloseShareDataOperate=function(e){if(v)return v.setCloseShareDataOperate(e)},t.getCloseShareDataOperate=function(){return null!==v&&v.getCloseShareDataOperate()},t.confInfoNotifyParamsExist=function(){return v&&v.confInfo},t.dataConfStatus=function(){return v?(m.info("dataConfStatus is ",v.dataConfStatus),v.dataConfStatus):(m.info("dataConfService is null"),h.DCONF_STATUS.NONE)},t.changeShareMonitorType=function(e){v&&v.changeShareMonitorType(e)},t.setShareAppHwnd=function(e){v?v.setShareAppHwnd(e):m.error("set share app error.data service is null")},t.getShareAppHwnd=function(){return m.info("get share app hwnd"),v?v.getShareAppHwnd():0},t.getShareAudio=function(){return m.info("get share audio"),!!v&&v.getShareAudio()},t.setShareAudio=function(e){return m.info("set share audio:",e),!!v&&v.setShareAudio(e)},t.setOldShareAppHwnd=function(e){v?v.setOldShareAppHwnd(e):m.error("set old app error.service is null")},t.getOldShareAppHwnd=function(){return v?v.getOldShareAppHwnd():0},t.isRecevingAppshare=function(){return!!v&&v.isRecevingAppshare()},t.bfcpWinAttach=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.abrupt("return",v.bfcpWinAttach(t));case 4:m.info("attach:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bfcpWinDetach=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.abrupt("return",v.bfcpWinDetach());case 4:m.info("detach:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showNativeShareSelectWnd=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.abrupt("return",v.showNativeShareSelectWnd());case 4:m.info("showNativeShareSelectWnd:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},218:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},222:function(e,t,n){n(34),n(22),n(23),n(223),n(224),n(225),n(226),e.exports=n(8).Map},223:function(e,t,n){"use strict";var r=n(191),a=n(166);e.exports=n(192)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(a(this,"Map"),0===e?0:e,t)}},r,!0)},224:function(e,t,n){var r=n(10);r(r.P+r.R,"Map",{toJSON:n(193)("Map")})},225:function(e,t,n){n(194)("Map")},226:function(e,t,n){n(195)("Map")},231:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(131),o=r(a),i=n(315),s=r(i);t.default=function e(t,n,r){null===t&&(t=Function.prototype);var a=(0,s.default)(t,n);if(void 0===a){var i=(0,o.default)(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var c=a.get;if(void 0!==c)return c.call(r)}},232:function(e,t,n){e.exports=n(0)(43)},233:function(e,t,n){"use strict";(function(t){function n(e,n,r,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,a)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(t,n(157))},234:function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function a(e){var t=r(e),n=t[0],a=t[1];return 3*(n+a)/4-a}function o(e,t,n){return 3*(t+n)/4-n}function i(e){for(var t,n=r(e),a=n[0],i=n[1],s=new d(o(e,a,i)),c=0,u=i>0?a-4:a,f=0;f<u;f+=4)t=l[e.charCodeAt(f)]<<18|l[e.charCodeAt(f+1)]<<12|l[e.charCodeAt(f+2)]<<6|l[e.charCodeAt(f+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===i&&(t=l[e.charCodeAt(f)]<<2|l[e.charCodeAt(f+1)]>>4,s[c++]=255&t),1===i&&(t=l[e.charCodeAt(f)]<<10|l[e.charCodeAt(f+1)]<<4|l[e.charCodeAt(f+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s}function s(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function c(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(s(r));return a.join("")}function u(e){for(var t,n=e.length,r=n%3,a=[],o=0,i=n-r;o<i;o+=16383)a.push(c(e,o,o+16383>i?i:o+16383));return 1===r?(t=e[n-1],a.push(f[t>>2]+f[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),a.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=u;for(var f=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,m=p.length;h<m;++h)f[h]=p[h],l[p.charCodeAt(h)]=h;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},235:function(e,t){t.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,c=(1<<s)-1,u=c>>1,f=-7,l=n?a-1:0,d=n?-1:1,p=e[t+l];for(l+=d,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=d,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=r;f>0;i=256*i+e[t+l],l+=d,f-=8);if(0===o)o=1-u;else{if(o===c)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,r),o-=u}return(p?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,s,c,u=8*o-a-1,f=(1<<u)-1,l=f>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=f):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),t+=i+l>=1?d/c:d*Math.pow(2,1-l),t*c>=2&&(i++,c/=2),i+l>=f?(s=0,i=f):i+l>=1?(s=(t*c-1)*Math.pow(2,a),i+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,a),i=0));a>=8;e[n+p]=255&s,p+=h,s/=256,a-=8);for(i=i<<a|s,u+=a;u>0;e[n+p]=255&i,p+=h,i/=256,u-=8);e[n+p-h]|=128*m}},239:function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,n){if(e&&u.isObject(e)&&e instanceof r)return e;var a=new r;return a.parse(e,t,n),a}function o(e){return u.isString(e)&&(e=a(e)),e instanceof r?e.format():r.prototype.format.call(e)}function i(e,t){return a(e,!1,!0).resolve(t)}function s(e,t){return e?a(e,!1,!0).resolveObject(t):t}var c=n(532),u=n(533);t.parse=a,t.resolve=i,t.resolveObject=s,t.format=o,t.Url=r;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(h),v=["%","/","?",";","#"].concat(m),g=["/","?","#"],C=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},I={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(534);r.prototype.parse=function(e,t,n){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),a=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(a),i=/\\/g;o[0]=o[0].replace(i,"/"),e=o.join(a);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var l=d.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=f.exec(s);if(p){p=p[0];var h=p.toLowerCase();this.protocol=h,s=s.substr(p.length)}if(n||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var N="//"===s.substr(0,2);!N||p&&_[p]||(s=s.substr(2),this.slashes=!0)}if(!_[p]&&(N||p&&!I[p])){for(var E=-1,y=0;y<g.length;y++){var T=s.indexOf(g[y]);-1!==T&&(-1===E||T<E)&&(E=T)}var O,A;A=-1===E?s.lastIndexOf("@"):s.lastIndexOf("@",E),-1!==A&&(O=s.slice(0,A),s=s.slice(A+1),this.auth=decodeURIComponent(O)),E=-1;for(var y=0;y<v.length;y++){var T=s.indexOf(v[y]);-1!==T&&(-1===E||T<E)&&(E=T)}-1===E&&(E=s.length),this.host=s.slice(0,E),s=s.slice(E),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var k=this.hostname.split(/\./),y=0,M=k.length;y<M;y++){var R=k[y];if(R&&!R.match(C)){for(var L="",D=0,P=R.length;D<P;D++)R.charCodeAt(D)>127?L+="x":L+=R[D];if(!L.match(C)){var F=k.slice(0,y),U=k.slice(y+1),B=R.match(S);B&&(F.push(B[1]),U.unshift(B[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=c.toASCII(this.hostname));var W=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+W,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[h])for(var y=0,M=m.length;y<M;y++){var H=m[y];if(-1!==s.indexOf(H)){var $=encodeURIComponent(H);$===H&&($=escape(H)),s=s.split(H).join($)}}var G=s.indexOf("#");-1!==G&&(this.hash=s.substr(G),s=s.slice(0,G));var j=s.indexOf("?");if(-1!==j?(this.search=s.substr(j),this.query=s.substr(j+1),t&&(this.query=b.parse(this.query)),s=s.slice(0,j)):t&&(this.search="",this.query={}),s&&(this.pathname=s),I[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var W=this.pathname||"",q=this.search||"";this.path=W+q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var i=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||I[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+a+n+i+r},r.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,a=Object.keys(this),o=0;o<a.length;o++){var i=a[o];n[i]=this[i]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),c=0;c<s.length;c++){var f=s[c];"protocol"!==f&&(n[f]=e[f])}return I[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!I[e.protocol]){for(var l=Object.keys(e),d=0;d<l.length;d++){var p=l[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||_[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),C=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=C||g||n.host&&e.pathname,w=S,b=n.pathname&&n.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],N=n.protocol&&!I[n.protocol];if(N&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),S=S&&(""===h[0]||""===b[0])),C)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,b=h;else if(h.length)b||(b=[]),b.pop(),b=b.concat(h),n.search=e.search,n.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(N){n.hostname=n.host=b.shift();var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return n.search=e.search,n.query=e.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var y=b.slice(-1)[0],T=(n.host||e.host||b.length>1)&&("."===y||".."===y)||""===y,O=0,A=b.length;A>=0;A--)y=b[A],"."===y?b.splice(A,1):".."===y?(b.splice(A,1),O++):O&&(b.splice(A,1),O--);if(!S&&!w)for(;O--;O)b.unshift("..");!S||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),T&&"/"!==b.join("/").substr(-1)&&b.push("");var x=""===b[0]||b[0]&&"/"===b[0].charAt(0);if(N){n.hostname=n.host=x?"":b.length?b.shift():"";var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return S=S||n.host&&b.length,S&&!x&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},242:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NativeInterface=void 0;var a,o,i=n(135),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),p=r(d),h=n(299),m=(n(200),n(215)),v=coreLogger.getLogger("conf")("logic/nnativeWnd/NativeInterface"),g=(t.NativeInterface=(o=a=function e(){(0,p.default)(this,e)},a.setLocalWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("setLocalWindow callid = "+t+",wndHandle = "+n+",index = "+o),r=null,r=0===o?[{video_wnd_type:1,render:n,displaytype:1,startimage:""}]:[{video_wnd_type:1,render:n,displaytype:1,index:o,startimage:""}],e.next=5,coreCall.setVideoWindow(1,t,r);case 5:return a=e.sent,0!==a.result?v.info("Set local window failed, result = ",a.result):v.info("Set local window success, result = ",a.result),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setBFCPWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("setBFCPWindow callid="+t+",wndHandle="+n+",isData2Bfcp="+r),r){e.next=10;break}return a=[{video_wnd_type:3,render:n,displaytype:1,startimage:""}],e.next=5,coreCall.setVideoWindow(1,t,a);case 5:return o=e.sent,0!==o.result?v.info("Set bfcp window failed, result = ",o.result):v.info("Set bfcp window success, result = ",o.result),e.abrupt("return",o);case 10:return e.next=12,coreConf.bfcpWinAttach(n);case 12:return i=e.sent,v.info("attach win for data result: ",i),e.abrupt("return",i);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.setRemoteWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("setRemoteWindow callid="+t+",wndHandle="+n),r=[{video_wnd_type:0,render:n,displaytype:1,startimage:""}],e.next=4,coreCall.setVideoWindow(1,t,r);case 4:return a=e.sent,0!==a.result?v.info("setRemoteWindow failed, result = ",a.result):v.info("setRemoteWindow success, result = ",a.result),e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.initNativeScreen=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!!window.isHubEnv&&window.isHubEnv,v.info("initNativeScreen viewMode = "+t+", version = "+n+", isMaxHub = "+a),o=window.CLIENTCONFIG.NEW_APP_NAME,i=$getState().login.sipLoginOnly,v.info("initNativeScreen sipLoginOnly = "+i),e.next=7,(0,h.initNativeScreen)(t,n,r,a,c,o,i);case 7:if(s=e.sent,0===s.result){e.next=13;break}return v.info("Init native screen failed, result = ",s.result),e.abrupt("return",null);case 13:return v.info("Init native screen success, result = ",s.result),e.abrupt("return",s.param.frameHwnd);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.uninitNativeScreen=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.uninitNativeScreen)(t,r);case 2:return n=e.sent,0!==n.result?v.info("Uninit native screen failed, result = ",n.result):v.info("Uninit native screen success, result = ",n.result),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.initTimer=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.initTimer)(t,n);case 2:return r=e.sent,0!==r.result?v.info("init timer failed, result = ",r.result):v.info("init timer success, result = ",r.result),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.createWindows=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.createWindows)(t,r,a,o);case 2:if(n=e.sent,v.info("createWindows res = ",n),0===n.result){e.next=9;break}return v.info("Create windows failed, result = ",n.result),e.abrupt("return",null);case 9:return v.info("Create windows success, result = ",n.result),e.abrupt("return",n.param.hwndList);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.updateWindows=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.updateWindows)(t,n,r);case 2:if(a=e.sent,v.info("updateWindows, res = ",a),0===a.result){e.next=9;break}return v.info("Update windows failed, result = ",a.result),e.abrupt("return",null);case 9:return v.info("Update windows success, result = ",a.result),e.abrupt("return",a.param.hwndList);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.destoryWindows=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.destoryWindows)(t,n);case 2:if(r=e.sent,v.info("destoryWindows, res = ",r),0===r.result){e.next=9;break}return v.info("Destroy windows failed, result = ",r.result),e.abrupt("return",null);case 9:if(v.info("Destroy windows success, result = ",r.result),!r.param||!r.param.hwndList){e.next=14;break}return e.abrupt("return",r.param.hwndList);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setWindowHighlight=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setWindowHighlight)(t,n);case 2:return r=e.sent,v.info("setWindowHighlight, res = ",r),0!==r.result?v.info("Set window highlight failed, result = ",r.result):v.info("Set window highlight success, result = ",r.result),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setWindowsName=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setWindowsName)(t,n);case 2:return r=e.sent,v.info("setWindowsName, res = ",r),0!==r.result?v.info("Set windows name failed, result = ",r.result):v.info("Set windows name success, result = ",r.result),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setViewMode=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setViewMode)(t,n);case 2:return r=e.sent,v.info("setViewMode, res = ",r),0!==r.result?v.info("Set view mode failed, result = ",r.result):(v.info("Set view mode success, result = ",r.result),a=$getState().conf,o=a.svcPreViewMode,i=a.svcOnLineAttendances,s=o||constant.SVC_VIEW_MODE.BIG_SMALL_MODE,m.SvcAtdManager.setPageNum(s,i.length)),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setPageNum=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setPageNum)(t,n,r);case 2:return a=e.sent,v.info("setPageNum, res = ",a),0!==a.result?v.info("set page num failed, result = ",a.result):v.info("set page num success, result = ",a.result),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.getFrameHwnd=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.videoFrameHwnd,n={},n.param={},n.param.frameHwnd=t,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)})),a.getBfcpFrameHwnd=function(){var e=$getState().conf.bfcpFrameHwnd,t={};return t.param={},t.param.frameHwnd=e,t},a.setHightlightShareWnd=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setHightlightShareWnd)(t,n);case 2:if(r=e.sent,v.info("setHightlightShareWnd, res = ",r),0===r.result){e.next=9;break}return v.info("Set hightlight shareWnd failed, result = ",r.result),e.abrupt("return",null);case 9:return v.info("Set hightlight shareWnd success, result = ",r.result),e.abrupt("return",r.param.hwnd);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.getWindowIcon=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getWinIcon)(t);case 2:return n=e.sent,v.info("get Window Icon, res = ",n),0!==n.result?v.info("get Window Icon failed"):v.info("get Window Icon success, result = ",n.result),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getTransparentWindow=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getTransparentWindow)(t);case 2:return n=e.sent,v.info("getTransparentWindow, res = ",n),0!==n.result?v.info("Get Transparent Window hwnd failed, result = ",n.result):v.info("Get Transparent Window hwnd success, result = ",n.result),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getDataConfFrameWnd=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getDataConfFrameWnd)();case 2:return t=e.sent,v.info("getDataConfFrameWnd, res = ",t),0!==t.result?v.info("Get dataconfframe hwnd failed, result = ",t.result):v.info("Get dataconfframe hwnd success, result = ",t.result),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,void 0)})),a.setAvailableLayout=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setAvailableLayout)(t,n,r);case 2:return a=e.sent,v.info("setAvailableLayout, res = ",a),0!==a.result?v.info("set available layout failed, result = ",a.result):v.info("set available layout success, result = ",a.result),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.setBigconfDataInitRect=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setBigconfDataInitRect)(t,n);case 2:r=e.sent,v.info("setBigconfDataInitRect, res = ",r),0!==r.result?v.info("setBigconfDataInitRect failed, result = ",r.result):v.info("setBigconfDataInitRect success, result = ",r.result);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setParam=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,r=(0,s.default)({},t),r=(0,s.default)(r,{frameHwnd:n,isHaveSharePriviledge:g(),isSvcConf:$getState().conf.isSvcConf}),e.next=5,(0,h.setParam)(r);case 5:a=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.reportQos=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.reportQos)(a);case 4:o=e.sent,v.info("reportQos, res = ",o),0!==o.result?v.info("report qos failed, result = ",o.result):v.info("report qos success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.reportUserInfo=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.reportUserInfo)(a);case 4:o=e.sent,v.info("reportUserInfo, res = ",o),0!==o.result?v.info("reportUserInfo failed, result = ",o.result):v.info("reportUserInfo success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.showMessageBox=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.showMessageBox)(a);case 4:o=e.sent,v.info("showMessageBox, res = ",o),0!==o.result?v.info("showMessageBox failed, result = ",o.result):v.info("showMessageBox success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.destroyNativeWin=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.destroyNativeWin)();case 2:t=e.sent,v.info("destroyNativeWin, res = ",t),0!==t.result?v.info("destroyNativeWin failed, result = ",t.result):v.info("destroyNativeWin success, result = ",t.result);case 5:case"end":return e.stop()}},e,void 0)})),a.notifyGetWinSystemFonts=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.notifyGetWinSystemFonts)();case 2:if(t=e.sent,0===t.result){e.next=7;break}v.info("notifyGetWinSystemFonts failed, result = ",t.result),e.next=9;break;case 7:return v.info("notifyGetWinSystemFonts success, total = ",t.param.fontlist?t.param.fontlist.length:"no fontlist"),e.abrupt("return",t.param.fontlist||[]);case 9:case"end":return e.stop()}},e,void 0)})),a.notifyGetSystemInfo=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.notifyGetSystemInfo)();case 2:if(t=e.sent,v.info("notifyGetSystemInfo, res = ",t),0===t.result){e.next=8;break}v.info("notifyGetSystemInfo failed, result = ",t.result),e.next=9;break;case 8:return e.abrupt("return",t.param);case 9:case"end":return e.stop()}},e,void 0)})),a.setCustomMenu=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setCustomMenu)(t);case 2:if(n=e.sent,v.info("setCustomMenu, res = ",n),0===n.result){e.next=8;break}v.info("setCustomMenu failed, result = ",n.result),e.next=9;break;case 8:return e.abrupt("return",n.param);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o),function(){var e=$getState().conf.hasConFRight,t=$getState().conf.confHandle,n=!0;return""===t&&!1===e&&(n=!1),v.info("initNativeScreen isHaveSharePriviledge = "+n),n})},252:function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(n=this._events[e],i(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),a=u.length,c=0;c<a;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(a=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),a||(a=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var a=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,a,i,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=i;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},253:function(e,t,n){t=e.exports=n(295),t.Stream=t,t.Readable=t,t.Writable=n(254),t.Duplex=n(188),t.Transform=n(298),t.PassThrough=n(558)},254:function(e,t,n){"use strict";(function(t,r,a){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){T(t,e)}}function i(e){return L.from(e)}function s(e){return L.isBuffer(e)||e instanceof D}function c(){}function u(e,t){A=A||n(188),e=e||{};var r=t instanceof A;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,i=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){C(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function f(e){if(A=A||n(188),!(F.call(f,this)||this instanceof A))return new f(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),R.call(this)}function l(e,t){var n=new Error("write after end");e.emit("error",n),O.nextTick(t,n)}function d(e,t,n,r){var a=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),O.nextTick(r,o),a=!1),a}function p(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=L.from(t,n)),t}function h(e,t,n,r,a,o){if(!n){var i=p(t,r,a);r!==i&&(n=!0,a="buffer",r=i)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,s,r,a,o);return c}function m(e,t,n,r,a,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function v(e,t,n,r,a){--t.pendingcb,n?(O.nextTick(a,r),O.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(a(r),e._writableState.errorEmitted=!0,e.emit("error",r),E(e,t))}function g(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function C(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if(g(n),t)v(e,n,r,t,a);else{var o=I(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||_(e,n),r?x(S,e,n,o,a):S(e,n,o,a)}}function S(e,t,n,r){n||w(e,t),t.pendingcb--,r(),E(e,t)}function w(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var s=0,c=!0;n;)a[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;a.allBuffers=c,m(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,f=n.encoding,l=n.callback;if(m(e,t,!1,t.objectMode?1:u.length,u,f,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),E(e,t)})}function N(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,O.nextTick(b,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function E(e,t){var n=I(t);return n&&(N(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function y(e,t,n){t.ending=!0,E(e,t),n&&(t.finished?O.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function T(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var O=n(233);e.exports=f;var A,x=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:O.nextTick;f.WritableState=u;var k=n(213);k.inherits=n(140);var M={deprecate:n(557)},R=n(296),L=n(145).Buffer,D=a.Uint8Array||function(){},P=n(297);k.inherits(f,R),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:M.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var F;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!F.call(this,e)||this===f&&(e&&e._writableState instanceof u)}})):F=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(e,t,n){var r=this._writableState,a=!1,o=!r.objectMode&&s(e);return o&&!L.isBuffer(e)&&(e=i(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=c),r.ended?l(this,n):(o||d(this,r,e,n))&&(r.pendingcb++,a=h(this,r,o,e,t,n)),a},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||y(this,r,n)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=P.destroy,f.prototype._undestroy=P.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(157),n(555).setImmediate,n(154))},259:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCPURate=t.getAvcBfcpHwnd=t.getRemoteVideoHwnd=t.getLocalVideoHwnd=t.getAvcFrameHandles=t.setAvcNullForSvc=t.isAvcNativeExsit=t.setViewMode=t.switchAudioToMain=t.switchVideoToMain=t.switchVideoToMin=t.handleSwitchToVideo=t.setConfServerId=t.setSubject=t.closeCallInterface=t.nativeNotifyUpdateBfcpFrameWnd=t.closeBfcpFrame=t.initBfcpWindow=t.initRemotWindow=t.updateLocalwindowCallId=t.updateCameraList=t.initCallInterface=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(1758),u=r(c),f=coreLogger.getLogger("conf")("logic/video/AVCNativeService"),l=null;t.initCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=8;break}return l=new u.default,e.next=4,l.initCallInterface(t,n,r);case 4:a=e.sent,0===a?f.info("initCallInterface int avc win suc"):(f.error("initCallInterface int avc win fail"),l=null),e.next=9;break;case 8:f.warn("initCallInterface avc win is exist");case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.updateCameraList=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("updateCameraList avc win no exist"),e.abrupt("return");case 5:l.updateCameraList(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateLocalwindowCallId=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("updateLocalwindowCallId avc win no exist"),e.abrupt("return");case 5:l.updateLocalwindowCallId(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initRemotWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("initRemotWindow avc win no exist"),e.abrupt("return");case 5:l.initRemotWindow(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initBfcpWindow=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===l&&(f.warn("initBfcpWindow avc win no exist"),l=new u.default),l.initBfcpWindow(t,n,r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.closeBfcpFrame=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeBfcpFrame avc win no exist"),e.abrupt("return");case 5:l.closeBfcpFrame();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.nativeNotifyUpdateBfcpFrameWnd=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeBfcpFrame avc win no exist"),e.abrupt("return");case 5:l.nativeNotifyUpdateBfcpFrameWnd(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.closeCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeCallInterface avc win no exist"),e.abrupt("return");case 5:return l.closeBfcpFrame(),e.next=8,l.closeCallInterface();case 8:t=e.sent,0===t?(f.info("closeCallInterface avc win suc"),l=null):f.error("closeCallInterface avc win fail");case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setSubject=function(e){if(null===l)return void f.warn("setSubject avc win no exist");l.setSubject(e)},t.setConfServerId=function(e){if(null===l)return void f.warn("setSubject avc win no exist");l.setConfServerId(e)},t.handleSwitchToVideo=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=8;break}return l=new u.default,e.next=4,l.handleSwitchToVideo(t);case 4:n=e.sent,0===n?f.info("handleSwitchToVideo int avc win suc"):(f.error("handleSwitchToVideo int avc win fail"),l=null),e.next=9;break;case 8:f.warn("handleSwitchToVideo avc win is exist");case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.switchVideoToMin=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchVideoToMin avc win no exist"),e.abrupt("return");case 5:l.switchVideoToMin();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.switchVideoToMain=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchVideoToMain avc win no exist"),e.abrupt("return");case 5:l.switchVideoToMain();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.switchAudioToMain=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchAudioToMain avc win no exist"),e.abrupt("return");case 5:l.switchAudioToMain();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setViewMode=function(e,t){null===l?f.warn("setViewMode avc win no exist"):l.setViewMode(e,t)},t.isAvcNativeExsit=function(){return!(null===l)},t.setAvcNullForSvc=function(){l=null,f.info("setAvcNullForSvc")},t.getAvcFrameHandles=function(){return null===l?0:l.getAvcFrameHandles()},t.getLocalVideoHwnd=function(){return null===l?0:l.getLocalVideoHwnd()},t.getRemoteVideoHwnd=function(){return null===l?0:l.getRemoteVideoHwnd()},t.getAvcBfcpHwnd=function(){return null===l?0:l.getAvcBfcpHwnd()},t.handleCPURate=function(e){return null===l?0:l.handleCPURate(e)}},260:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarManager=void 0;for(var a,o,i=n(149),s=r(i),c=n(135),u=r(c),f=n(1),l=r(f),d=n(69),p=r(d),h=n(2),m=r(h),v=n(4),g=r(v),C=n(5),S=r(C),w=n(200),_=(n(299),n(242)),I=n(215),b=n(259),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(b),E=n(814),y=constant.KEYPAD_CONST,T=(y.BTN_HIGH_LIGHT_TIME,y.ON_HOLD_TIME_STAMP,y.KEY_AUDIO_LIST),O=y.KEY_AUDIO_SRC,A=T.length,x=[],k=0;k<A;k++){var M=new Audio;M.src=O+T[k],M.preload="auto",x.push(M)}for(var R=0;R<A;R++){var L=new Audio;L.src=O+T[R],L.preload="auto",x.push(L)}var D=coreLogger.getLogger("conf")("logic/video/toolbarmanager"),P=t.ToolbarManager=(o=a=function(){function e(){(0,g.default)(this,e)}return(0,S.default)(e,null,[{key:"playDialAudio",value:function(e){var t=void 0;if(12===e&&(e=0),window.webView)window.webView.playRing(e+".wav",0);else if(this[e]?(t=x[Number(e)+A],this[e]=!1):(t=x[e],this[e]=!0),coreCommon.isMobile()){var n=new Media(O+T[Number(e)],function(){window.log("audio load success.")},function(){window.log("audio load failed.")});n.play()}else t&&(t.currentTime=0,t.play())}}]),e}(),a.rpChairman={stu:-1,time:Date.now(),timer:-1},a.selfMuteState=-1,a.clearParam=function(){clearTimeout(P.rpChairman.timer),P.rpChairman={stu:-1,time:Date.now(),timer:-1},P.selfMuteState=-1},a.setMicVol=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.index>=0&&(D.info("userClick to set mic device, index=",t.index),coreSetting.setAndSaveMicDevice(t.index)),t.isMute>=0&&(D.info("setMicVolNotify, param = "+(0,p.default)(t)),n=1===t.isMute,r=$getState().conf,a=r.isConfMicMute,o=r.isAllowUnmute,i=r.selfRole,s=r.isConfAllMute,c=$getState().login.isSupportAS,1===a&&0===i&&0===o&&c?(D.info("unAllow unmute self mic"),coreConf.getSvcAtdManager().alertBox("NOT_ALLOW_UNMUTE_YOURSELF_TIPS",0,0,"handsup",language.PUT_UP_HANDS),I.SvcAtdManager.setMuteState(!0,n)):P.setValueZeroFunc());case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setSpkVol=function(){var e=(0,m.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.index>=0&&(D.info("userClick to set spk device, index=",t.index),coreSetting.setAndSaveSpkDevice(t.index)),!(t.isMute>=0)){e.next=9;break}if(!$getState().call.isMuteSpk){e.next=7;break}return e.next=5,coreCommon.SpkControl.getInstance().muteSpk(!1);case 5:e.next=9;break;case 7:return e.next=9,coreCommon.SpkControl.getInstance().muteSpk(!0);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMicState=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),(window.CLIENTCONFIG.ISWIN||n>0)&&(D.info("setMicState = "+t),r=(0,u.default)({frameHwnd:n},{set_mic_state:t}),D.info("setMicState "+(0,p.default)(r)),_.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setSpkSate=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),(window.CLIENTCONFIG.ISWIN||n>0)&&(D.info("setSpkSate = "+t),r=(0,u.default)({frameHwnd:n},{set_spk_state:t}),D.info("setSpkSate "+(0,p.default)(r)),_.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setConfHandle=function(e){var t=0;if($getState().conf.videoFrameHwnd>0&&(t=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(t=N.getAvcFrameHandles()),t>0){var n=(0,u.default)({frameHwnd:t},{is_in_conf:""===e?0:1},{isSMCMeeting:$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING});D.info("setConfhanlde "+(0,p.default)(n)),_.NativeInterface.setParam(n)}else D.warn("setConfhanlde fail cause of  videoWnd = "+t)},a.setCameraState=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),n>0&&(D.info("setCameraState = "+t),r=(0,u.default)({frameHwnd:n},{set_camera_state:t}),D.info("setCameraState "+(0,p.default)(r)),_.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setValueZeroFunc=(0,m.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("userClick  mic mute btn"),t=$getState().myInfo.bind_no,n=$getState().conf,r=n.confHandle,a=n.isConfMicMute,o=n.selfNum,i=$getState().call,s=i.micValue,c=i.isMuteMic,""===r){e.next=24;break}if(!(a>1)){e.next=6;break}return D.info("middle mute state, do nothing..."),e.abrupt("return");case 6:if(D.info("userClick mute btn, change mute state: "+o+" bindNum: "+t),u=isNullOrEmpty(o)?t:o,0!==s){e.next=13;break}D.info("userClick mute btn, value is 0"),a&&(0,w.actionMuteAttendee)(!1,u,!0),e.next=22;break;case 13:if(D.info("userClick mute btn, change mute state: ",a),!c||a){e.next=17;break}return coreCommon.MicControl.getInstance().muteMic(!1),e.abrupt("return");case 17:if(!isNullOrEmpty(o)||c){e.next=20;break}return coreCommon.MicControl.getInstance().muteMic(!0),e.abrupt("return");case 20:c&&coreCommon.MicControl.getInstance().muteMic(!1),(0,w.actionMuteAttendee)(!a,u,!0);case 22:e.next=26;break;case 24:D.info("call mute self mic"),c?coreCommon.MicControl.getInstance().muteMic(!1):coreCommon.MicControl.getInstance().muteMic(!0);case 26:case"end":return e.stop()}},e,void 0)})),a.dialClk=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("dialClk, param = "+(0,p.default)(t)),n=void 0,r=t.num,a=$getState().call.callId,coreCall.actionDialDTMF(a,r),r<10?n=r:"*"===r?n=10:"#"===r?n=11:"+"===r&&(n=0),P.playDialAudio(n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.postponeConf=function(){var e=(0,m.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.updatePastponeTime(t.timeout)),coreConf.postponeConfSerivce(t.timeout);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.removeVideo=(0,m.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("removeVideo start"),t=$getState().call.callId,t?(coreCall.removeVideo(t),appService.showMainWindow(!0)):D.info("removeVideo callId is null, please check");case 3:case"end":return e.stop()}},e,void 0)})),a.setCameraStu=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a,o,i,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("setCameraStu, param = "+(0,p.default)(t)),!(t.index>=0)){e.next=7;break}return D.info("userClick to set cam device, index=",t.index),e.next=5,coreSetting.setAndSaveCamDevice(t.index);case 5:coreCommon.CameraControl.getInstance().switchCameraStateAction(!0),E.EncoderAdpt.onNotifyCameraStatus(!0);case 7:if(void 0===t.state){e.next=19;break}if(n=$getState().call,r=n.callStatus,a=n.cameraIsDisabled,D.info("userClick openCamera,callStatus = "+r),!(o=!("VIDEO_OUT"!==r&&!a))){e.next=15;break}return e.abrupt("return");case 15:coreCommon.CameraControl.getInstance().switchCameraStateAction(t.state),E.EncoderAdpt.onNotifyCameraStatus(t.state),i=window.CLIENTCONFIG.ISMOBILE?$getState().call.currentCamera:$getState().setting.camIndex,$getState().call.cameraDevicesList.length>0&&(s=$getState().call.cameraDevicesList[i],coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_CAMERA,params:[s.name,t.state?1:0]}));case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.applyOrReleasechairman=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("applyOrReleasechairman, param = "+(0,p.default)(t)),n=$getState().conf.memberListInfo,r=P.getSelfOfNumber(n),t.applyStu!==constant.TOOLBAR_EVENT_TYPE.CHAIRMAN.RELEASE){e.next=8;break}return e.next=6,(0,w.actionReleaseChairman)(r);case 6:e.next=28;break;case 8:if(t.applyStu!==constant.TOOLBAR_EVENT_TYPE.CHAIRMAN.REQUEST){e.next=28;break}if(e.prev=9,a=t.pwd+"",(o=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=16;break}P.reRequestChairman(a,r),e.next=23;break;case 16:if(!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=22;break}return D.info("SMC first "),e.next=20,(0,w.actionRequestChairman)("",r);case 20:e.next=23;break;case 22:P.reRequestChairman(a,r);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),D.error("requestChairmanFuc",e.t0);case 28:case"end":return e.stop()}},e,void 0,[[9,25]])}));return function(t){return e.apply(this,arguments)}}(),a.reRequestChairman=function(){var e=(0,m.default)(l.default.mark(function e(t,n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("reRequestChairman by [pwd]"),r=$getState().login.deployMode,e.next=4,(0,w.actionRequestChairman)(t,n);case 4:r===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.getSelfOfNumber=function(e){var t=void 0,n=!0,r=!1,a=void 0;try{for(var o,i=(0,s.default)(e);!(n=(o=i.next()).done);n=!0){var c=o.value;if(1===c.is_self){t=c.number;break}}}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}return t},a.handleReleaseChairmanResNotify=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("handleReleaseChairmanResNotify result = "+t.param),n=t.param.ret,r={state:0,result:n},a=$getState().conf.isBigConf,0===n?(window.CLIENTCONFIG.ISWIN?a?(I.SvcAtdManager.handleCancelWatch(),I.SvcAtdManager.alertBox("NATIVE_RELEASE_CHAIR_ENTER_ACTIVE_CONF",1)):I.SvcAtdManager.alertBox("NATIVE_SUCCESSFULLY_RELEASED_RIGHTS",1):window.CLIENTCONFIG.ISMOBILE?$getState().conf.isBigConf?window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS_BIGCONF,2,!1,"big-conf-toast"):window.ToastNew(language.SUCCESSFULLY_RELEASED_RIGHTS,2):window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS,5,!1,"pcToast",""),(0,w.setSmcFirstRequest)()):(D.error("failed to release the chairman ",n),window.CLIENTCONFIG.ISWIN?I.SvcAtdManager.alertBox("NATIVE_FAILED_RELEASE_THE_CHAIR",1):window.CLIENTCONFIG.ISMOBILE?alert(language.FAILED_RELEASE_THE_CHAIR):window.Toast(language.FAILED_RELEASE_THE_CHAIR,5,!1,"pcToast",""));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleRequestChairmanResNotify=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("handleRequestChairmanResNotify result = "+(0,p.default)(t.param)),n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.NEED_PASSWORD,a=t.param.ret,o=$getState().conf.showRepChairmanError,i=$getState().conf.showqusetchairman,0===a?(i&&$dispatch(coreUi.showqusetchairman()),o&&(D.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),window.CLIENTCONFIG.ISWIN?I.SvcAtdManager.alertBox("NATIVE_SUCCESSFULLY_APPLIED_CHAIR",1):window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2):window.Toast(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,5,!1,"pcToast","")):r&&coreConf.getIsSmcFirstRequestCharimanRest()?(coreConf.setIsSmcFirstRequestCharimanRest(!1),$dispatch(coreUi.showqusetchairman())):(D.error("failed to request the chairman ",a),window.CLIENTCONFIG.ISWIN?5===a&&I.SvcAtdManager.alertBox("IDS_TEXT_APPLY_CHAIRMAN_FAIL"):window.CLIENTCONFIG.ISMOBILE?window.CLIENTCONFIG.ENABLE_IT_MEETING?(0,w.popupRequestChairmanInputBox)():alert(language.APPLICATION_FAILED):window.Toast(language.APPLICATION_FAILED,5,!1,"pcToast",""),o||(D.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())));case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.isConfHasCharMain=(0,m.default)(l.default.mark(function e(){var t,n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$getState().call.callStatus,n=$getState().conf,r=n.confHandle,a=n.memberListInfo,o=!1,isNullOrEmpty(r)||"VIDEO_CONNECTED"!==t&&"CALL_CONNECTED"!==t||isNullOrEmpty(a)||(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),D.error("isConfHasCharMain:",e.t0);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])})),a.initDeviceStates=(0,m.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,f,d;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().call,n=t.isOpenCamera,r=t.cameraNum,a=$getState().conf.isConfMicMute,o=$getState().call,i=o.isMuteMic,s=o.isMuteSpk,c={isMuteSpk:s?1:0,mic_volume:a||i?0:100,camera_on:r>0?n:-1},f=$getState().conf.videoFrameHwnd,d=(0,u.default)({frameHwnd:f},{init_device_state:c}),D.info("initDeviceStates "+(0,p.default)(d)),_.NativeInterface.setParam(d);case 6:case"end":return e.stop()}},e,void 0)})),a.changeCameraStates=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={camera_on:t?1:0},r=$getState().conf.videoFrameHwnd,a=(0,u.default)({frameHwnd:r},{init_device_state:n}),D.info("changeCameraStates "+(0,p.default)(a)),_.NativeInterface.setParam(a);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setChairmanState=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return P.rpChairman.stu=-1,e.abrupt("return");case 3:if(n=I.SvcAtdManager.getVideoFramHwnd(),!$getState().conf.isVideoConf){e.next=23;break}r=-1,a=0,o=t.length;case 7:if(!(a<o)){e.next=14;break}if(1!==t[a].is_self){e.next=11;break}return r=t[a].role,e.abrupt("break",14);case 11:a++,e.next=7;break;case 14:if(-1!==r){e.next=17;break}return D.info("reportChairmanState not find self!!!"),e.abrupt("return");case 17:i=function(e){var t={state:e},r=(0,u.default)({frameHwnd:n},{set_chairman_state:t},{isSMCMeeting:$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING});D.info("reportChairmanState "+(0,p.default)(r)),_.NativeInterface.setParam(r)},s=Date.now()-P.rpChairman.time,D.info("amIChairman = "+r),P.rpChairman.stu!==r||s>5e3?(P.rpChairman.stu=r,P.rpChairman.time=Date.now(),clearTimeout(P.rpChairman.timer),D.info("reportChairmanState 111 tic = "+s),i(r)):s<5e3&&(clearTimeout(P.rpChairman.timer),P.rpChairman.timer=setTimeout(function(){P.rpChairman.stu=r,P.rpChairman.time=Date.now(),D.info("reportChairmanState 222"),i(r),clearTimeout(P.rpChairman.timer)},5e3-s)),e.next=24;break;case 23:window.CLIENTCONFIG.ISWIN&&(D.info("reportChairmanState for audio"),_.NativeInterface.setParam({set_chairman_state:{state:$getState().conf.selfRole}}));case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setAudioConfTip=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=coreCommon.getMembersNameTitle(t),r=(0,u.default)({audioConfTip:n}),D.debug("setAudioConfTip "+(0,p.default)(r)),_.NativeInterface.setParam(r);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMuteStateInAvc=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISWIN){e.next=14;break}n=-1,r=0,a=t.length;case 3:if(!(r<a)){e.next=10;break}if(1!==t[r].is_self){e.next=7;break}return n=t[r].is_mute?0:1,e.abrupt("break",10);case 7:r++,e.next=3;break;case 10:if(-1!==n){e.next=12;break}return e.abrupt("return");case 12:D.info("amIMute = "+n),P.selfMuteState!=n&&(P.selfMuteState=n,D.info("reportSelfMuteState "+(0,p.default)(n)),P.setMicState(n));case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangup=function(){var e=(0,m.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("hangup, param = "+(0,p.default)(t)),e.t0=t.leaveOption,e.next=e.t0===constant.TOOLBAR_EVENT_TYPE.HANGUP.LEAVECONF?4:e.t0===constant.TOOLBAR_EVENT_TYPE.HANGUP.DISSOLUTIONCONF?4:7;break;case 4:return(0,w.setSmcFirstRequest)(),P.hangupEndCurrentCall(t.leaveOption),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangupEndCurrentCall=function(){var e=(0,m.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().login.sipLoginOnly&&(D.info("hangupEndCurrentCall siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable())),n=$getState(),r=n.conf,a=r.confHandle,o=r.selfRole,i=n.call.callId,P.clearParam(),coreConf.isInConf()){e.next=9;break}return D.info("ConfrimNotify end call, callId=",i),e.next=7,coreCall.callHangup(i);case 7:e.next=18;break;case 9:if(!o||1!==t){e.next=15;break}return D.info("ConfrimNotify end conf, confHandle=",a),e.next=13,(0,w.actionEndConf)();case 13:e.next=18;break;case 15:return D.info("ConfrimNotify leave conf, confHandle=",a),e.next=18,(0,w.actionLeaveConf)();case 18:I.SvcAtdManager.destroyNativeWin();case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangupExitBtnClk=(0,m.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=t.call,r=n.callStatus,a=n.callId,o=t.conf,i=o.confHandle,s=o.selfRole,c=o.uportalTokenErr,u=t.login.sipLoginOnly,D.info("userClick HangUpBtn,confhandle = "+i+",selfRole = "+s+",callStatus = "+r+",uportal[Token]Err = "+desensitive(c)+",sipLoginOnly = "+u),!c||u){e.next=6;break}return(0,w.endCallAndLogout)(),e.abrupt("return");case 6:if(1!==s){e.next=10;break}"VIDEO_CONNECTED"!==r&&"CALL_CONNECTED"!==r||(0,w.handleShowEndConf)(!0),e.next=17;break;case 10:if(coreConf.isInConf()){e.next=15;break}return e.next=13,coreCall.callHangup(a);case 13:e.next=17;break;case 15:return e.next=17,window.confirm(language.CHOSE_LEAVE_CONF).then(function(){var e=(0,m.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=6;break}return e.next=3,(0,w.actionLeaveConf)();case 3:case 6:return e.abrupt("return");case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}},e,void 0)})),a.hangupConfirm=function(){var e=(0,m.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o)},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetConfig=t.DFConfig=void 0;var r,a,o=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(592),c=coreLogger.getLogger("dataconf")("config"),u=t.DFConfig=(a=r=function e(){(0,i.default)(this,e)},r.platform=s.DFPLATFORM.platform,r.isWin=s.DFPLATFORM.isWin,r.isBigWin=s.DFPLATFORM.isWin,r.isMobile=s.DFPLATFORM.isMobile,r.isPc=s.DFPLATFORM.isPc,r.isMac=s.DFPLATFORM.isMac,r.isWinBase=s.DFPLATFORM.isWinBase,r.moduleName="DataConf",r.isAppShareEnabled=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin,r.pathSeparator=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin?"\\":"/",r.supportBuried=s.DFPLATFORM.isBigWin,r.userSipNumberRequestBigParams=s.DFPLATFORM.isMobile&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||s.DFPLATFORM.isBigWin,r.useSBC=!s.DFPLATFORM.isBigWin,r.decFr=function(){return s.DFPLATFORM.isMobile||2===window.cpu_core_num&&2===window.cpu_proc_num?3:30},r.encFr=function(){return 2===window.cpu_core_num&&2===window.cpu_proc_num?3:30},r.isDocShareEnabled=function(){var e=void 0!==window.enableDocShare?parseInt(window.enableDocShare,10):0;return c.info("openDocShareFlag  enableDocShare : "+window.enableDocShare),!isNullOrEmpty(e)&&1===e},r.whiteBoardShareEnable=s.DFPLATFORM.isWin,r.serverType=function(){return u.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING?1:3},r.shouldSendServerInfoNotify=function(){return window.CLIENTCONFIG.ENABLE_IT_MEETING},r.shouldPasscodeBase64=function(){return u.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING},r.captureType=function(){return s.DFPLATFORM.isMac?4:0===n(1761).release().indexOf("10")?3:0},r.sendAnnotationEnable=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin,r.supportDataToBfcp=s.DFPLATFORM.isMac,r.deployMode=constant.MEETING_NET_TYPE.MEDIAX_MEETING,r.firewallType=window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?s.DATA_FIREWALL_MODE.SBC:s.DATA_FIREWALL_MODE.NULL,r.stgAddresslist="",r.devType=s.DFPLATFORM.isBigWin?11:1,r.dataCodeccVersion=5,a);t.resetConfig=function(){c.info("resetConfig start"),u.dataCodeccVersion=5,u.devType=s.DFPLATFORM.isBigWin?11:1}},268:function(e,t,n){function r(){a.call(this)}e.exports=r;var a=n(252).EventEmitter;n(140)(r,a),r.Readable=n(253),r.Writable=n(559),r.Duplex=n(560),r.Transform=n(561),r.PassThrough=n(562),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function o(){f||(f=!0,e.end())}function i(){f||(f=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===a.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",o),u.removeListener("close",i),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(u.on("end",o),u.on("close",i));var f=!1;return u.on("error",s),e.on("error",s),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e}},269:function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=r(e);if("string"!=typeof t&&(C.isEncoding===S||!S(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=a(e);var t;switch(this.encoding){case"utf16le":this.text=d,this.end=p,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=h,this.end=m,t=3;break;default:return this.write=v,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=C.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var a=i(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=i(t[r]))>=0?(a>0&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=i(t[r]),a>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0)}function c(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function u(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function d(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var C=n(145).Buffer,S=C.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=l,o.prototype.text=f,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},273:function(e,t,n){n(34),n(22),n(23),n(274),n(275),n(276),n(277),e.exports=n(8).Set},274:function(e,t,n){"use strict";var r=n(191),a=n(166);e.exports=n(192)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(a(this,"Set"),e=0===e?0:e,e)}},r)},275:function(e,t,n){var r=n(10);r(r.P+r.R,"Set",{toJSON:n(193)("Set")})},276:function(e,t,n){n(194)("Set")},277:function(e,t,n){n(195)("Set")},282:function(e,t,n){e.exports=n(0)(89)},295:function(e,t,n){"use strict";(function(t,r){function a(e){return F.from(e)}function o(e){return F.isBuffer(e)||e instanceof U}function i(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?L(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){R=R||n(188),e=e||{};var r=t instanceof R;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new $,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(H||(H=n(269).StringDecoder),this.decoder=new H(e.encoding),this.encoding=e.encoding)}function c(e){if(R=R||n(188),!(this instanceof c))return new c(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),P.call(this)}function u(e,t,n,r,o){var i=e._readableState;if(null===t)i.reading=!1,m(e,i);else{var s;o||(s=l(i,t)),s?e.emit("error",s):i.objectMode||t&&t.length>0?("string"==typeof t||i.objectMode||Object.getPrototypeOf(t)===F.prototype||(t=a(t)),r?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):f(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?f(e,i,t,!1):C(e,i)):f(e,i,t,!1))):r||(i.reading=!1)}return d(i)}function f(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&v(e)),C(e,t)}function l(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function p(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function h(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function m(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,v(e)}}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(V("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?M.nextTick(g,e):g(e))}function g(e){V("emit readable"),e.emit("readable"),N(e)}function C(e,t){t.readingMore||(t.readingMore=!0,M.nextTick(S,e,t))}function S(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(V("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function w(e){return function(){var t=e._readableState;V("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&D(e,"data")&&(t.flowing=!0,N(e))}}function _(e){V("readable nexttick read 0"),e.read(0)}function I(e,t){t.resumeScheduled||(t.resumeScheduled=!0,M.nextTick(b,e,t))}function b(e,t){t.reading||(V("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(V("flow",t.flowing);t.flowing&&null!==e.read(););}function E(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=y(e,t.buffer,t.decoder),n}function y(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?T(e,t):O(e,t),r}function T(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var o=n.data,i=e>o.length?o.length:e;if(i===o.length?a+=o:a+=o.slice(0,e),0===(e-=i)){i===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(i));break}++r}return t.length-=r,a}function O(e,t){var n=F.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,i),0===(e-=i)){i===o.length?(++a,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(i));break}++a}return t.length-=a,n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,M.nextTick(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function k(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var M=n(233);e.exports=c;var R,L=n(218);c.ReadableState=s;var D=(n(252).EventEmitter,function(e,t){return e.listeners(t).length}),P=n(296),F=n(145).Buffer,U=t.Uint8Array||function(){},B=n(213);B.inherits=n(140);var W=n(552),V=void 0;V=W&&W.debuglog?W.debuglog("stream"):function(){};var H,$=n(553),G=n(297);B.inherits(c,P);var j=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),c.prototype.destroy=G.destroy,c.prototype._undestroy=G.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e)},c.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=F.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},c.prototype.unshift=function(e){return u(this,e,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(e){return H||(H=n(269).StringDecoder),this._readableState.decoder=new H(e),this._readableState.encoding=e,this};var q=8388608;c.prototype.read=function(e){V("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return V("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):v(this),null;if(0===(e=h(e,t))&&t.ended)return 0===t.length&&A(this),null;var r=t.needReadable;V("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,V("length less than watermark",r)),t.ended||t.reading?(r=!1,V("reading or ended",r)):r&&(V("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=h(n,t)));var a;return a=e>0?E(e,t):null,null===a?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==a&&this.emit("data",a),a},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(e,t){function n(e,t){V("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function a(){V("onend"),e.end()}function o(){V("cleanup"),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("drain",v),e.removeListener("error",c),e.removeListener("unpipe",n),d.removeListener("end",a),d.removeListener("end",l),d.removeListener("data",s),g=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){V("ondata"),C=!1,!1!==e.write(t)||C||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==k(p.pipes,e))&&!g&&(V("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,C=!0),d.pause())}function c(t){V("onerror",t),l(),e.removeListener("error",c),0===D(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",f),l()}function f(){V("onfinish"),e.removeListener("close",u),l()}function l(){V("unpipe"),d.unpipe(e)}var d=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,V("pipe count=%d opts=%j",p.pipesCount,t);var h=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,m=h?a:l;p.endEmitted?M.nextTick(m):d.once("end",m),e.on("unpipe",n);var v=w(d);e.on("drain",v);var g=!1,C=!1;return d.on("data",s),i(e,"error",c),e.once("close",u),e.once("finish",f),e.emit("pipe",d),p.flowing||(V("pipe resume"),d.resume()),e},c.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)r[o].emit("unpipe",this,n);return this}var i=k(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},c.prototype.on=function(e,t){var n=P.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&v(this):M.nextTick(_,this))}return n},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var e=this._readableState;return e.flowing||(V("resume"),e.flowing=!0,I(this,e)),this},c.prototype.pause=function(){return V("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(V("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(V("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(a){if(V("wrapped data"),n.decoder&&(a=n.decoder.write(a)),(!n.objectMode||null!==a&&void 0!==a)&&(n.objectMode||a&&a.length)){t.push(a)||(r=!0,e.pause())}});for(var a in e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var o=0;o<j.length;o++)e.on(j[o],this.emit.bind(this,j[o]));return this._read=function(t){V("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),c._fromList=E}).call(t,n(154),n(157))},296:function(e,t,n){e.exports=n(252).EventEmitter},297:function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var i=n(233);e.exports={destroy:r,undestroy:a}},298:function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);s.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){i(e,t,n)}):i(this,null,null)}function i(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=a;var s=n(188),c=n(213);c.inherits=n(140),c.inherits(a,s),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},299:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setCustomMenu=t.setNativeWndLogPath=t.changeNativeLangCode=t.notifyGetSystemInfo=t.notifyGetWinSystemFonts=t.notifyChangePassiveBidirectionStatus=t.notifyChangeActiveBidirectionStatus=t.notifyChangeAudientStatus=t.destroyNativeWin=t.showMessageBox=t.notifyPutHandup=t.notifyLockConfState=t.notifyLockConfResult=t.reportUserInfo=t.setBigconfDataInitRect=t.setParam=t.getWinIcon=t.notifyNativeLeaveConf=t.getWndRect=t.reportQos=t.reportChairmanStu=t.setAvailableLayout=t.getDataConfFrameWnd=t.getTransparentWindow=t.setHightlightShareWnd=t.getFrameHwnd=t.setPageNum=t.setViewMode=t.setWindowsName=t.setWindowHighlight=t.destoryWindows=t.updateWindows=t.createWindows=t.initTimer=t.uninitNativeScreen=t.initNativeScreen=void 0;var a=n(135),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(242),l=(r(f),n(200),coreLogger.getLogger("model")("model/nativewndService/index"));t.initNativeScreen=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o,i,c){var u,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return u=e.sent,e.next=5,u.initNativeScreen(t,n,r,a,o,i,c);case 5:return f=e.sent,e.abrupt("return",f);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),t.uninitNativeScreen=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.uninitNativeScreen(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.initTimer=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("wh_initTimer::",t,"  ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.initTimer(t,n);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.createWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a){var o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return o=e.sent,e.next=5,o.createWindows(t,n,r,a);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.updateWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.updateWindows(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.destoryWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.destoryWindows(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setWindowHighlight=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setWindowHighlight(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setWindowsName=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setWindowsName(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setViewMode=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setViewMode(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setPageNum=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.setPageNum(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.getFrameHwnd=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.getFrameHwnd();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setHightlightShareWnd=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setHightlightShareWnd(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getTransparentWindow=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getTransparentWindow(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getDataConfFrameWnd=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.getDataConfFrameWnd();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setAvailableLayout=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.setAvailableLayout(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.reportChairmanStu=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.reportChairmanStu(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.reportQos=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.reportQos(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getWndRect=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getWndRect(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyNativeLeaveConf=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyLeaveConf();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getWinIcon=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getWindowIcon(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setParam=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.default)({},t),n=(0,o.default)(n,{isSvcConf:$getState().conf.isSvcConf}),e.next=4,coreTup.getNativeWindowInstance();case 4:return r=e.sent,e.next=7,r.setParam(n);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setBigconfDataInitRect=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setBigconfDataInitRect(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.reportUserInfo=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().conf.memberListInfo,r=t.query_user_info_result.usernum,a=r.map(function(e){var t=-1,r=n.some(function(t){return t.number.replace("+86","")===e.replace("+86","")&&1===t.state}),a=n.some(function(t){return t.number.replace("+86","")===e.replace("+86","")&&5===t.state});return r&&(t=1),a&&(t=5),{number:e,state:t}}),t.query_user_info_result.usernum=a,e.next=6,coreTup.getNativeWindowInstance();case 6:return o=e.sent,e.next=9,o.reportUserInfo(t);case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyLockConfResult=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyLockConfResult(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyLockConfState=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyLockConfState(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyPutHandup=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyPutHandup(t);case 5:r=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.showMessageBox=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.showMessageBox(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.destroyNativeWin=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.destroyNativeWin();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.notifyChangeAudientStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangeAudientStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyChangeActiveBidirectionStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangeActiveBidirectionStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyChangePassiveBidirectionStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangePassiveBidirectionStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyGetWinSystemFonts=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyGetWinSystemFonts();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.notifyGetSystemInfo=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyGetSystemInfo();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.changeNativeLangCode=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("changeNativeLangCode start "),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.changeNativeLangCode(t);case 6:return r=e.sent,l.info("changeNativeLangCode end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setNativeWndLogPath=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("setNativeWndLogPath start "),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.setNativeWndLogPath(t);case 6:return r=e.sent,l.info("setNativeWndLogPath end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setCustomMenu=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("setCustomMenu start ",t),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.setCustomMenu(t);case 6:return r=e.sent,l.info("setCustomMenu end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},300:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyGetUpdateFiles=t.NotifyShareResult=t.NotifySkipLogin=t.NotifySipRegisterd=t.NotifySharingType=t.NotifyAppStared=t.NotifyLoginFailedEx=t.NotifyJoinConfFailedEx=t.NotifyDeviceListReady=t.NotifyCameraListUpdate=t.NotifySharingAppClouse=t.NotifyLocalCameraStatus=t.NotifyLocalCameraPull=t.NotifyLocalSpkPull=t.NotifyLocalMicPull=t.NotifyLocalSpkVolue=t.NotifyLocalMicVolue=t.NotifyLocalSPKStatus=t.NotifyLocalMICStatus=t.NotifyJoinConfFailed=t.NotifyMyLeaveConf=t.NotifyMyJoinConf=t.NotifyLocalStopSharing=t.NotifyLocalStartSharing=t.NotifyStopSharing=t.NotifyStartSharing=t.NotifyMyKickedOut=t.NotifyConfNoStart=t.NotifyConfTermination=t.NotifyLoginFailed=t.NotifyLoginSuccess=t.initMaxhubAPI=t.initBigWinAPI=t.clkAPIWebSocket=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(69),u=r(c),f=n(631),l=r(f),d=coreLogger.getLogger("api")("clkapi"),p=t.clkAPIWebSocket=null,h=function(e){var t=e.cmd;if(null!==p)switch(t){case 1601:d.info("CloudLink Login message"),coreCommon.BigwinObserver.publish("OnRunCloudLink",e),p.postRpsMessage(e,0);break;case 1621:coreCommon.BigwinObserver.publish("OnReloginCloudLink",e),p.postRpsMessage(e,0),d.info("CloudLink Relogin message");break;case 1602:d.info("Stop cloudlink message: ",e),coreCommon.BigwinObserver.publish("OnStopCloudLink",e),p.postRpsMessage(e,0);break;case 1603:d.info("Join conference message"),coreCommon.BigwinObserver.publish("OnJoinConference",e),p.postRpsMessage(e,0);break;case 1604:d.info("Leave conference message: ",e),coreCommon.BigwinObserver.publish("OnLeaveConference",e),p.postRpsMessage(e,0);break;case 1605:d.info("Start sharing message: ",e),coreCommon.BigwinObserver.publish("OnStartSharing",e),p.postRpsMessage(e,0);break;case 1606:d.info("Stop sharing message: ",e),coreCommon.BigwinObserver.publish("OnStopSharing",e),p.postRpsMessage(e,0);break;case 1607:var n={hWnd:851978};p.postRpsParamMessage(e,n,0);break;case 1608:p.postRpsMessage(e,0);break;case 1609:var r={user_name:""};coreCommon.BigwinObserver.publish("OnGetSharingUsername",r),d.info("sharing User name is: ",r.user_name),p.postRpsParamMessage(e,r,0);break;case 1610:d.info("ctrl local camera message: ",e),coreCommon.BigwinObserver.publish("OnCtrlLocalCamera",e),p.postRpsMessage(e,0);break;case 1611:coreCommon.BigwinObserver.publish("onBigWinVideoHwnd",e);break;case 1612:case 1613:p.postRpsMessage(e,0);break;case 1614:coreCommon.BigwinObserver.publish("OnSetMicValue",e),p.postRpsMessage(e,0);break;case 1615:coreCommon.BigwinObserver.publish("OnSetSpkValue",e),p.postRpsMessage(e,0);break;case 1616:var a={device_type:e.param.device_type,device_list:[]};coreCommon.BigwinObserver.publish("ongetDeviceList",e,a),p.postRpsParamMessage(e,a,0);break;case 1617:coreCommon.BigwinObserver.publish("OnSetDevice",e),p.postRpsMessage(e,0);break;case 1618:coreCommon.BigwinObserver.publish("onBigWinDataSharingHwnd",e);break;case 1619:var o={vol:""};coreCommon.BigwinObserver.publish("ongetMicValue",o),d.info("getMicValue ="+(0,u.default)(o)),p.postRpsParamMessage(e,o,0);break;case 1620:var i={vol:""};coreCommon.BigwinObserver.publish("ongetSpkValue",i),d.info("getMicValue ="+(0,u.default)(i)),p.postRpsParamMessage(e,i,0);break;case 1622:d.info("CloudLink SET RECV SHARE PARAM message: ",(0,u.default)(e)),coreCommon.BigwinObserver.publish("OnSetRecvShareParam",e),p.postRpsMessage(e,0);break;default:d.error("can not support cmd ",(0,u.default)(e))}},m=(t.initBigWinAPI=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:t.clkAPIWebSocket=p=e.sent,null!==p?(p.setCmdFunc(1601,h),p.setCmdFunc(1602,h),p.setCmdFunc(1603,h),p.setCmdFunc(1604,h),p.setCmdFunc(1605,h),p.setCmdFunc(1606,h),p.setCmdFunc(1607,h),p.setCmdFunc(1608,h),p.setCmdFunc(1609,h),p.setCmdFunc(1610,h),p.setCmdFunc(1611,h),p.setCmdFunc(1612,h),p.setCmdFunc(1613,h),p.setCmdFunc(1614,h),p.setCmdFunc(1615,h),p.setCmdFunc(1616,h),p.setCmdFunc(1617,h),p.setCmdFunc(1618,h),p.setCmdFunc(1619,h),p.setCmdFunc(1620,h),p.setCmdFunc(1621,h),p.setCmdFunc(1622,h),d.info("initBigWinAPI : Create WebSocket success.")):d.info("initBigWinAPI : Create WebSocket failed.");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=e.cmd;if(null!==p)switch(t){case 1601:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_RUN_CLOUDLINK"),coreCommon.BigwinObserver.publish("OnRunCloudLink",e),p.postRpsMessage(e,0);break;case 1604:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_LEAVE_CONFERENCE"),coreCommon.BigwinObserver.publish("OnLeaveConference",e),p.postRpsMessage(e,0);break;case 1623:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_LOGOUT"),coreCommon.BigwinObserver.publish("OnLogout",e),p.postRpsMessage(e,0);break;case 1624:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_CHANGE_LANGUAGE"),coreCommon.BigwinObserver.publish("OnChangeLanguage",e),p.postRpsMessage(e,0);break;case 1625:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_GET_MAIN_WND"),coreCommon.BigwinObserver.publish("OnGetMainWnd",e);break;case 1626:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_SHOW_OR_HIDE_MAIN_WND"),coreCommon.BigwinObserver.publish("OnShowOrHideMainWnd",e),p.postRpsMessage(e,0);break;case 1605:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_START_SHARING"),coreCommon.BigwinObserver.publish("OnStartSharing",e),p.postRpsMessage(e,0);break;case 1606:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_STOP_SHARING"),coreCommon.BigwinObserver.publish("OnStopSharing",e),p.postRpsMessage(e,0);break;case 1602:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_STOP_CLOUDLINK"),coreCommon.BigwinObserver.publish("OnStopCloudLink",e),p.postRpsMessage(e,0);break;case 1627:coreCommon.BigwinObserver.publish("OnEncryptValue",e);break;case 1628:coreCommon.BigwinObserver.publish("OnDecryptValue",e);break;case 1629:coreCommon.BigwinObserver.publish("OnCleanValue",e);break;case 1630:coreCommon.BigwinObserver.publish("OnWorkplaceLogin",e),p.postRpsMessage(e,0);break;default:d.error("can not support cmd ",(0,u.default)(e))}}),v=(t.initMaxhubAPI=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:t.clkAPIWebSocket=p=e.sent,null!==p?(p.setCmdFunc(1601,m),p.setCmdFunc(1604,m),p.setCmdFunc(1623,m),p.setCmdFunc(1624,m),p.setCmdFunc(1625,m),p.setCmdFunc(1626,m),p.setCmdFunc(1605,m),p.setCmdFunc(1606,m),p.setCmdFunc(1602,m),p.setCmdFunc(1627,m),p.setCmdFunc(1628,m),p.setCmdFunc(1629,m),p.setCmdFunc(1630,m),d.info("initMaxHubAPI : Create WebSocket success.")):d.info("initMaxHubAPI : Create WebSocket failed.");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.NotifyLoginSuccess=function(){var e={description:"NotifyLoginSuccess",nty:1701,result:0};null!==p&&(d.info("clk_NotifyLoginSuccess ",(0,u.default)(e)),p.postNotifyMessage(e))},t.NotifyLoginFailed=function(e){var t={description:"NotifyLoginFailed",nty:1702,result:e};null!==p&&(d.info("clk_NotifyLoginFailed ",(0,u.default)(t)),p.postNotifyMessage(t))}),g=(t.NotifyConfTermination=function(e){var t={description:"NotifyConfTermination",nty:1703,result:e};null!==p&&(d.info("clk_NotifyConfTermination ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyConfNoStart=function(e){var t={description:"NotifyConfNoStart",nty:1704,result:e};null!==p&&(d.info("clk_NotifyConfNoStart ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyMyKickedOut=function(e){var t={description:"NotifyMyKickedOut",nty:1705,result:e};null!==p&&(d.info("clk_NotifyMyKickedOut ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyStartSharing=function(e,t){var n={description:"NotifyStartSharing",nty:1706,result:e,param:{user_name:t}};null!==p&&(d.info("clk_NotifyStartSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyStopSharing=function(e,t){var n={description:"NotifyStopSharing",nty:1707,result:e,param:{user_name:t}};null!==p&&(d.info("clk_NotifyStopSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalStartSharing=function(e,t){var n={description:"NotifyLocalStartSharing",nty:1708,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifyLocalStartSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalStopSharing=function(e,t){var n={description:"NotifyLocalStopSharing",nty:1709,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifyLocalStopSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyMyJoinConf=function(e,t){var n={description:"NotifyMyJoinConf",nty:1710,result:e,param:{sip_number:t}};null!==p&&(d.info("clk_NotifyMyJoinConf ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyMyLeaveConf=function(e){var t={description:"NotifyMyLeaveConf",nty:1711,result:e};null!==p&&(d.info("clk_NotifyMyLeaveConf ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyJoinConfFailed=function(e){var t={description:"NotifyJoinConfFailed",nty:1712,result:e};null!==p&&(d.info("clk_NotifyJoinConfFailed ",(0,u.default)(t)),p.postNotifyMessage(t))});t.NotifyLocalMICStatus=function(e,t){var n={description:"NotifyLocalMICStatus",nty:1713,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalMICStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalSPKStatus=function(e,t){var n={description:"NotifyLocalSPKStatus",nty:1714,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalSPKStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalMicVolue=function(e,t){var n={description:"NotifyLocalMicVolue",nty:1715,result:e,param:{vol:t}};null!==p&&(d.info("clk_NotifyLocalMicVolue ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalSpkVolue=function(e,t){var n={description:"NotifyLocalSpkVolue",nty:1716,result:e,param:{vol:t}};null!==p&&(d.info("clk_NotifyLocalSpkVolue ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalMicPull=function(e,t,n){var r={description:"NotifyLocalMicPull",nty:1717,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalMicPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalSpkPull=function(e,t,n){var r={description:"NotifyLocalSpkPull",nty:1718,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalSpkPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalCameraPull=function(e,t,n){var r={description:"NotifyLocalCameraPull",nty:1719,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalCameraPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalCameraStatus=function(e,t){var n={description:"NotifyLocalCameraStatus",nty:1720,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalCameraStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifySharingAppClouse=function(e,t){var n={description:"NotifyLocalCameraPull",nty:1721,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifySharingAppClouse ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyCameraListUpdate=function(e){var t={description:"NotifyCameraListUpdate",nty:1722,result:e};null!==p&&(d.info("clk_NotifyCameraListUpdate ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyDeviceListReady=function(){var e={description:"NotifyDeviceListReady",nty:1723,result:0};null!==p&&(d.info("clk_NotifyDeviceListReady ",(0,u.default)(e)),p.postNotifyMessage(e))},t.NotifyJoinConfFailedEx=function(e){g(e),window.anonymousJoinConf&&window.bigWinCommonLogOut()},t.NotifyLoginFailedEx=function(e){v(e),window.anonymousJoinConf&&window.bigWinCommonLogOut()},t.NotifyAppStared=function(e){var t={description:"NotifyAppStared",nty:1724,result:e};d.info("NotifyAppStared: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifySharingType=function(e,t){var n={description:"NotifySharingType",nty:1725,result:e,param:{type:t}};d.info("NotifySharingType: ",(0,u.default)(n)),null!==p&&p.postNotifyMessage(n)},t.NotifySipRegisterd=function(e){var t={description:"NotifySipRegisterd",nty:1726,result:e,param:{ip:$getState().login.serverAddress,account:$getState().login.displayAccount}};d.info("NotifySipRegisterd: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifySkipLogin=function(e){var t={description:"NotifySkipLogin",nty:1727,result:e};d.info("NotifySkipLogin: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifyShareResult=function(e,t,n){var r={description:"NotifyShareResult",nty:1728,result:e,param:{param1:t,param2:n}};d.info("NotifyShareResult: ",(0,u.default)(r)),null!==p&&p.postNotifyMessage(r)},t.NotifyGetUpdateFiles=function(e,t){var n={description:"NotifyGetUpdateFiles",nty:1729,result:e,param:{paramStr:t}};d.info("NotifyGetUpdateFiles: ",(0,u.default)(n)),null!==p&&p.postNotifyMessage(n)}},301:function(e,t,n){(function(e,r){function a(e,n){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,e,r.depth)}function o(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function i(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,r){if(e.customInspect&&n&&y(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return S(a)||(a=c(e,a,r)),a}var o=u(e,n);if(o)return o;var i=Object.keys(n),m=s(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(n)),E(n)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(n);if(0===i.length){if(y(n)){var v=n.name?": "+n.name:"";return e.stylize("[Function"+v+"]","special")}if(I(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(N(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return f(n)}var g="",C=!1,w=["{","}"];if(h(n)&&(C=!0,w=["[","]"]),y(n)){g=" [Function"+(n.name?": "+n.name:"")+"]"}if(I(n)&&(g=" "+RegExp.prototype.toString.call(n)),N(n)&&(g=" "+Date.prototype.toUTCString.call(n)),E(n)&&(g=" "+f(n)),0===i.length&&(!C||0==n.length))return w[0]+g+w[1];if(r<0)return I(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var _;return _=C?l(e,n,r,m,i):i.map(function(t){return d(e,n,r,m,t,C)}),e.seen.pop(),p(_,g,w)}function u(e,t){if(_(t))return e.stylize("undefined","undefined");if(S(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return C(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,a){for(var o=[],i=0,s=t.length;i<s;++i)k(t,String(i))?o.push(d(e,t,n,r,String(i),!0)):o.push("");return a.forEach(function(a){a.match(/^\d+$/)||o.push(d(e,t,n,r,a,!0))}),o}function d(e,t,n,r,a,o){var i,s,u;if(u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),k(r,a)||(i="["+a+"]"),s||(e.seen.indexOf(u.value)<0?(s=v(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),_(i)){if(o&&a.match(/^\d+$/))return s;i=JSON.stringify(""+a),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+s}function p(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function v(e){return null===e}function g(e){return null==e}function C(e){return"number"==typeof e}function S(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function I(e){return b(e)&&"[object RegExp]"===O(e)}function b(e){return"object"==typeof e&&null!==e}function N(e){return b(e)&&"[object Date]"===O(e)}function E(e){return b(e)&&("[object Error]"===O(e)||e instanceof Error)}function y(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function O(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}function x(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;t.format=function(e){if(!S(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,i=String(e).replace(M,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])v(s)||!b(s)?i+=" "+s:i+=" "+a(s);return i},t.deprecate=function(n,a){function o(){if(!i){if(r.throwDeprecation)throw new Error(a);r.traceDeprecation?console.trace(a):console.error(a),i=!0}return n.apply(this,arguments)}if(_(e.process))return function(){return t.deprecate(n,a).apply(this,arguments)};if(!0===r.noDeprecation)return n;var i=!1;return o};var R,L={};t.debuglog=function(e){if(_(R)&&(R=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=r.pid;L[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else L[e]=function(){};return L[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=m,t.isNull=v,t.isNullOrUndefined=g,t.isNumber=C,t.isString=S,t.isSymbol=w,t.isUndefined=_,t.isRegExp=I,t.isObject=b,t.isDate=N,t.isError=E,t.isFunction=y,t.isPrimitive=T,t.isBuffer=n(336);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",x(),t.format.apply(t,arguments))},t.inherits=n(140),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(154),n(157))},315:function(e,t,n){e.exports={default:n(316),__esModule:!0}},316:function(e,t,n){n(317);var r=n(8).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},317:function(e,t,n){var r=n(232),a=n(318).f;n(146)("getOwnPropertyDescriptor",function(){return function(e,t){return a(r(e),t)}})},318:function(e,t,n){e.exports=n(0)(244)},335:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SvcAttendanceManager=t.dealWithWatchConfList=t.handleSvcShowAttChangeMobile=t.handleSvcShowAttChange=t.handleSvcClickJSPage=t.handleSvcWatchChange=t.handleSvcLockWatch=t.handleSSRCURL=t.loggerPrintSSRC=t.loggerPrint=void 0;var a,o,i=n(941),s=r(i),c=n(4),u=r(c),f=n(135),l=r(f),d=n(69),p=r(d),h=n(1),m=r(h),v=n(2),g=r(v),C=n(942),S=coreLogger.getLogger("conf")("logic/video/svcAttendanceManager");window.hasDealAttendeeUpdateEvent=0,window.isChangeOfBroadcast=!1;window.multiStreamPageInfoChangeNotify=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,v,g,C,w,I,N,E,y,O,A,x,k,M,R,L,D;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("NativeToJS select watch case multiStreamMode="+t.multiStreamMode+",pageNo="+t.pageNo+",LargeVedioStatus="+t.LargeVedioStatus+",broadcastBeforeStatus="+t.broadcastBeforeStatus+",focusVedio="+handlePhoneNumber(t.focusVedio)),$dispatch(coreUi.changeSvcNativeToJS(t)),n=$getState().conf,r=n.svcMobileConfHandles,a=n.svcRecallorNot,o=n.ssrcRange,i=n.svcOnLineAttendances,s=n.svcSelfNumber,c=n.svcBandMode,u=n.svcMobileHandleNum,f=n.svcMaxWatchResolution,!a){e.next=6;break}return S.info("No Need send watch request"),e.abrupt("return");case 6:if(l=!1,d=$getState().call.callId,2!==t.multiStreamMode){e.next=16;break}return p=[{number:"",ssrc:0,width:0,height:0}],S.info("dataMode,setAllSvcVideoWindows,multiStreamMode=2, stop watch muiltivideo."),-2===t.pageNo&&(p[0].number="",p[0].ssrc=o.min,p[0].width=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360.width,p[0].height=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360.height,S.info("is in background, sendWatchRequest")),h={attendeeList:p,selfNum:s},e.next=15,coreConf.sendWatchSvcRequestService(h);case 15:return e.abrupt("return");case 16:return isNullOrEmpty(t.focusVedio)||1!==t.LargeVedioStatus||($dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:t.focusVedio}))),0===t.LargeVedioStatus&&($dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))),2===t.LargeVedioStatus&&(l=!0,1===t.broadcastBeforeStatus&&($dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})))),v={callid:d,infoid:0},e.next=22,coreTup.getCallInstance();case 22:return g=e.sent,e.next=25,g.getBasicCallInfo(v);case 25:if(C=e.sent,w=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,I=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,S.info("is support hd-encoder(0:NO, 1: YES) ",C.param.call_info.svc_is_support_hd_encoder),0===C.param.call_info.svc_is_support_hd_encoder?(w=$getState().conf.svcMobileSpeakerModeMaxLook,I=$getState().conf.svcMobileDivideModeMaxLook):(w=$getState().conf.svcHighPerformanceMobileSpeakerModeMaxLook,I=$getState().conf.svcHighPerformanceMobileDivideModeMaxLook),N=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,isNullOrEmpty(f)||(N.width=f.width,N.height=f.height),S.info("Nego level-id limit max resolution:",N),0!==t.multiStreamMode){e.next=53;break}return S.info("MaxSpeakerMode, eSight load max resolution= ",w),isNullOrEmpty(w)||(N=T.getRealResolution(N,w)),E=c<2?constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,S.info("Nego Bandwidth limit max resolution:",E),isNullOrEmpty(E)||(N=T.getRealResolution(N,E)),S.info("send request watch resolution:",N),y={render:r.remoteLargeViewIdx,ssrc_id:o.min,width:N.width,height:N.height,bSharpness:window.CLIENTCONFIG.SVC_SHARPENING_SWITCH?1:0},O=new Array,O.push(y),e.next=45,b(i[0],0,N,1,l,t.focusVedio);case 45:if(A=e.sent,S.info("handleSvcWatchChang result",A.result),0!==A.result){e.next=51;break}return e.next=50,coreCall.setAllSvcVideoWindows(1,d,O);case 50:$dispatch(coreUi.changeOldDidivePagerNo(0));case 51:e.next=83;break;case 53:if(1!==t.multiStreamMode){e.next=83;break}if(S.info("divideMode, eSight load max resolution= ",I),isNullOrEmpty(I)||(N=T.getRealResolution(N,I)),x=c<2?constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,S.info("Nego Bandwidth limit max resolution:",x),isNullOrEmpty(x)||(N=T.getRealResolution(N,x)),S.info("send request watch resolution:",N),k=window.CLIENTCONFIG.SVC_WINDOW_MAX_DIVIDE_NUM_PHONE,u&&(k=u),S.info("modelength",k),i=i.slice(1),M=t.pageNo,R=M%2,L=M%2,M===$getState().conf.svcOldDidivePagerNo?(R=3,$dispatch(coreUi.changeOldDidivePagerNo(0))):$dispatch(coreUi.changeOldDidivePagerNo(M)),!(M>=1)){e.next=83;break}if(D="",!(i.length>=M*k+1)){e.next=78;break}return D=i.slice((M-1)*k,M*k),e.next=74,b(D,1,N,R,!1,"",M);case 74:return e.next=76,_(D.length,d,N,R,L);case 76:e.next=83;break;case 78:return D=i.slice((M-1)*k),e.next=81,b(D,1,N,R,!1,"",M);case 81:return e.next=83,_(D.length,d,N,R,L);case 83:$dispatch(coreUi.changeConfViewMode(t.multiStreamMode)),$dispatch(coreUi.changeSvcShowPage(t.pageNo));case 85:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var w=t.loggerPrint=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a="";if(t&&!isNaN(t.length)&&t.length>0)for(var o=0;o<t.length;o++)!0===n?a=a+";name:"+(t[o].name?t[o].name.substr(0,1)+"**"+t[o].name.substr(-1):"")+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):!1===n?a=a+";number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):"PC"===n?a=a+";name:"+(t[o].name?t[o].name.substr(0,1)+"**"+t[o].name.substr(-1):"")+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):"SSRC"===n&&(a=a+";ssrc:"+t[o].ssrc+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):"")+",width="+t[o].width+",height="+t[o].height);S.info(e,a,r)};t.loggerPrintSSRC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="";if(t&&!isNaN(t.length)&&t.length>0){for(var a=0;a<t.length;a++)isNullOrEmpty(t[a].number)||(t[a].number=handlePhoneNumber(t[a].number));r=(0,p.default)(t)}S.info(e+r+n)};window.removeSvcVideoWindows=(0,g.default)(m.default.mark(function e(){var t,n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("svcCloseOrResumeCameta"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,g.default)(m.default.mark(function e(){var t,n,r,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.svcVideoWindows,r=t.isSvcConf,a=$getState().call.callId,S.info("window.removeSvcVideoWindows"),!r){e.next=12;break}if(!(n.windowArray&&n.windowArray.length>=1)){e.next=12;break}o=0;case 6:if(!(o<n.windowArray.length)){e.next=12;break}return e.next=9,coreCall.removeSvcVideoWindow(a,0,n.windowArray[o].ssrc_id,!0);case 9:o++,e.next=6;break;case 12:case"end":return e.stop()}},e,void 0)})),n,null);case 3:case"end":return e.stop()}},e,void 0)})),window.reSetSvcVideoWindows=(0,g.default)(m.default.mark(function e(){var t,n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("svcCloseOrResumeCameta"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.svcVideoWindows,r=t.isSvcConf,a=$getState().call,o=a.callId,i=a.currentCamera,S.info("window.reSetSvcVideoWindows"),!r){e.next=20;break}if(window.CLIENTCONFIG.ISMOBILE,!0){e.next=16;break}if(s=$getState().call,c=s.isOpenCamera,u=s.currentCallId,f=s.isOpenCameraDe,S.info("Camera isOpenCamera = "+c),!c){e.next=13;break}return e.next=10,coreCall.setVideoIndex(i);case 10:S.info("Camera isOpenCamera = "+c+",callId = "+u+" isOpenCameraDe = "+f),e.next=14;break;case 13:S.info("Camera isOpenCamera = "+c+",callId = "+u+" isOpenCameraDe = "+f);case 14:e.next=20;break;case 16:return e.next=18,coreCall.setVideoIndex(i);case 18:return e.next=20,coreCall.setAllSvcVideoWindows(n.count,o,n.windowArray);case 20:case"end":return e.stop()}},e,void 0)})),n,null);case 3:case"end":return e.stop()}},e,void 0)}));var _=t.handleSSRCURL=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,v,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$getState().call.callId,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,_=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("addSvcVideoWindow start",t),n=new Array,r=$getState().conf,a=r.svcMobileConfHandles,o=r.usedSsrcList,i=r.svcBandMode,s=r.ssrcRange,c=s.min+1,-1===t)u=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,S.info("NumLength = -1 init ,lookRatio = ",u),0!==u.width&&0!==u.height||(S.info("NumLength = -1 lookRatio width or height is 0"),u={width:640,height:360}),f={render:a.remoteLargeViewIdx,ssrc_id:$getState().conf.ssrcRange.min,width:u.width,height:u.height,bSharpness:window.CLIENTCONFIG.SVC_SHARPENING_SWITCH?1:0},n.push(f);else for(l=1===_?0:3,d=0,1===w?d=0:0===w?d=3:3===w&&(d=6),p=s.min+t+d,p>s.max&&(d=0),0!==C.width&&0!==C.height||(S.info("lookRatio width or height is 0"),C={width:320,height:180}),h=0;h<t;h++)v={render:a.remoteViewIdx[h+l],ssrc_id:c+h+d,width:C.width,height:C.height,bSharpness:0},n.push(v);return e.next=7,coreCall.setAllSvcVideoWindows(n.length,g,n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=t.handleSvcLockWatch=function(e,t){S.info("handleSvcLockWatch",e,t.number?t.number.substr(0,3)+"****"+t.number.substr(-3):"");var n=$getState().conf.isBigConf,r=coreConf.isConfChairMan();if(n&&!r)return void S.info("handleSvcLockWatch in bigConf not ChairMan can not lockWatch");var a={mode:e,watchInfo:t};$dispatch(coreUi.changeSvcControlMode(e));var o=(0,l.default)({},t);$dispatch(coreUi.changeSvcSelectWatchInfo(o)),1===e?$dispatch(coreUi.changeIsSvcSelectMode(!0)):$dispatch(coreUi.changeIsSvcSelectMode(!1)),window.CLIENTCONFIG.ISMOBILE&&window.SvcLockWatch(a)},b=t.handleSvcWatchChange=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,v,g,C,_,I,b,y,T,O,A,x,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,L=arguments.length>4&&void 0!==arguments[4]&&arguments[4],D=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:0);return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Array,r=$getState().conf,a=r.svcSelectWatchInfo,o=r.svcControlMode,i=r.svcViewMode,s=r.ssrcRange,c=r.usedSsrcList,u=r.broadCastInfo,f=r.svcSelfNumber,l=r.svcOnLineAttendances,d=r.isSameGradeMcu,p=null,0!==k){e.next=9;break}if(1!==o||L){if(h="",0===d&&l.length>1){for(v=0,g=0;g<l.length;g++)1===l[g].is_same_grade_mcu&&v++;1===v&&(h="M255T0",S.info("numberT enter"))}p={number:h,ssrc:s.min,width:M.width,height:M.height},L?S.info("sendWatchSvcRequest broad"):S.info("sendWatchSvcRequest spk")}else p={number:a.number,ssrc:s.min,width:M.width,height:M.height},S.info("sendWatchSvcRequest lock watch");n.push(p),E([]),e.next=28;break;case 9:if(1!==k){e.next=28;break}for(C=0,1===R?C=0:0===R?C=3:3===R&&(C=6),_=s.min+t.length+C,_>s.max&&(C=0),I="",b=$getState().conf.isBigConf,y=0;y<t.length;y++)I=1===D&&b?"":t[y].number,p={number:I,ssrc:s.min+1+y+C,width:M.width,height:M.height},n.push(p);T=!1,O=0;case 19:if(!(O<n.length)){e.next=26;break}if(1!==R&&3!==R||"M255T0"!==n[O].number){e.next=23;break}return T=!0,e.abrupt("break",26);case 23:O++,e.next=19;break;case 26:E(T?n:[]),S.info("sendWatchSvcRequest average");case 28:return w("sendWatchSvcRequest parameter：watchAttendees=",n,!1,f.substr(0,3)+"****"+f.substr(-3)),A={attendeeList:n,selfNum:f},e.next=32,coreConf.sendWatchSvcRequestService(A);case 32:return x=e.sent,0===x.result&&N(n),e.abrupt("return",x);case 35:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),N=(t.handleSvcClickJSPage=function(e){window.SvcClickJSPageNum(e)},t.handleSvcShowAttChange=function(e){$dispatch(coreUi.changeSvcShowAttendances(e))}),E=t.handleSvcShowAttChangeMobile=function(e){$dispatch(coreUi.changeSvcShowAttendancesMobile(e))},y=t.dealWithWatchConfList=function(){var e=constant.ACTIVE_USER.MOBILE,t=$getState().conf.svcOnLineAttendances;if(0===t.length)return void S.info("currentOnLineAttendances is empty return");var n=$getState().conf.svcActiveAttendances;S.info("dealWithWatchConfList  before currentOnLineAttendances  ",t.length);var r=[];0===n.length?r=(0,l.default)([],t):(r=sortPreAndOrigiArray(n,t),n=[]),n=r.length>e?(0,l.default)([],r.slice(0,e)):(0,l.default)([],r);for(var a=0;a<r.length;a++){var o=r[a];if(1===o.is_self){r.splice(a,1),r.unshift(o);break}}$dispatch(coreUi.changeSvcOnLineAttendances(r)),$dispatch(coreUi.changeSvcActiveAttendances(n)),S.info("dealWithWatchConfList  after currentOnLineAttendances  ",$getState().conf.svcOnLineAttendances.length)},T=t.SvcAttendanceManager=(o=a=function e(){(0,u.default)(this,e)},a.handleSvcAttendancesUpdateEvent=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("start handle svc Attendances update event",t.length),n=$getState().conf,r=n.ssrcRange,a=n.svcBigPicInfo,0!==window.hasDealAttendeeUpdateEvent||a.hasOwnProperty("ssrc")||(S.info("start handle svc Attendances handleSvcWatchIndNotify is not received!"),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:r.min}))),window.hasDealAttendeeUpdateEvent=1,window.isChangeOfBroadcast=!1,e.next=7,T.dealSvcAttendanceList(t);case 7:if(!(o=e.sent)||window.CLIENTCONFIG.ISMOBILE){e.next=18;break}if(S.info("svcShowAttendances is changed!"),i=$getState().conf,s=i.svcShowAttendances,c=i.svcViewMode,u=i.ssrcRange,f=i.svcBigPicInfo,l=i.svcOnLineAttendances,1===c&&(T.handleDivideModeWinSize(),T.dealDivideCanvasSize()),!(l.length>1)){e.next=15;break}return e.next=15,T.sendWatchSvcRequest(s);case 15:return e.next=17,T.setSvcVideoRender(s,"true");case 17:T.calcBigCanvasRatio();case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleSvcModeSwitch=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("Switch to svcViewMode:"+p+",maxSizeForPage:"+h),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isSvcShareMode,a=t.svcBigPicInfo,$dispatch(coreUi.changeConfViewMode(p)),1!==p&&(o=T.calcCanvas16And9Size(),$dispatch(coreUi.changeBigWinStyle(o)),S.info("changeBigWinStyle, canvasSize is ",o)),e.next=6,coreCall.closeAllSvcRemoteSocket();case 6:if($dispatch(coreUi.changeMaxSizeForPage(h)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeUsedSvcSSRCList([])),0!==p&&1!==p){e.next=20;break}return T.initSvcShowAttendances(n,h),1===p&&(T.handleDivideModeWinSize(),T.dealDivideCanvasSize()),i=$getState().conf.svcShowAttendances,e.next=15,T.sendWatchSvcRequest(i);case 15:return e.next=17,T.setSvcVideoRender(i);case 17:r&&0===p&&-3===a.ssrc&&(s=coreCall.getBigContainerSize(),s={width:s.width,height:s.height-54},coreCall.setSvcBFCPVideoRender(s)),e.next=38;break;case 20:c=null,u=new Array,f=0;case 23:if(!(f<n.length)){e.next=30;break}if(1!==n[f].is_self){e.next=27;break}return c=n[f],e.abrupt("break",30);case 27:f++,e.next=23;break;case 30:return l=T.constructSvcShowAttendanceInfo(c),l&&u.push(l),N(u),r&&-3===a.ssrc&&(d=coreCall.getBigContainerSize(),d={width:d.width,height:d.height-54},coreCall.setSvcBFCPVideoRender(d)),e.next=36,T.sendWatchSvcRequest(u);case 36:return e.next=38,T.setSvcVideoRender([]);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleSvcSelect=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,d,p,h,v,g;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("Select attendance name:,viewMode = "+n),r=$getState().conf,a=r.svcOnLineAttendances,o=r.ssrcRange,i=r.isSvcShareMode,s=r.svcShowPage,c=r.svcBandMode,u=r.svcBigPicInfo,f={number:t.number,is_mute:t.is_mute,name:t.name},d=(0,l.default)({},t),d.ssrc=o.min,0!==n){e.next=20;break}return u.hasOwnProperty("ssrc")&&-3===u.ssrc&&coreCall.resetBFCStatus($getState().call.callId,0),$dispatch(coreUi.changeIsShowMainScreen(!0)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcBigPicInfo(d)),$dispatch(coreUi.changeSvcSelectWatchInfo(f)),!i||0!==s||-3!==u.ssrc&&-2!==u.ssrc||(N([]),$dispatch(coreUi.changeUsedSvcSSRCList([])),T.initSvcShowAttendances(a,$getState().conf.maxSizeForPage)),p=$getState().conf.svcShowAttendances,e.next=16,T.sendWatchSvcRequest(p);case 16:return e.next=18,T.setSvcVideoRender(p);case 18:e.next=41;break;case 20:return e.next=22,coreCall.closeAllSvcRemoteSocket();case 22:return h=new Array,h.push(o.min),v=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===c&&(v=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeMaxSizeForPage(v)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeSvcBigPicInfo(d)),N([]),$dispatch(coreUi.changeUsedSvcSSRCList(h)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcSelectWatchInfo(f)),T.initSvcShowAttendances(a,v),g=$getState().conf.svcShowAttendances,e.next=39,T.sendWatchSvcRequest(g);case 39:return e.next=41,T.setSvcVideoRender(g);case 41:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.handleSvcShareClick=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShareData;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("handleSvcShareClick :svcBroadcastData:",s),t=$getState().conf,n=t.ssrcRange,r=t.svcOnLineAttendances,a=t.maxSizeForPage,o=t.shareScreenWH,$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeSvcBigPicInfo(s)),$dispatch(coreUi.changeUsedSvcSSRCList([])),T.initSvcShowAttendances(r,a),e.next=8,T.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 8:return e.next=10,T.setSvcVideoRender($getState().conf.svcShowAttendances);case 10:i={lastheight:o.lastheight+1,lastwidth:o.lastwidth+1},$dispatch(coreUi.changeShareScreenWH(i)),$dispatch(coreUi.changeIsShowMainScreen(!1));case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleSvcBFCClick=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf,n=t.ssrcRange,r=t.isSvcShareMode,a=t.svcBigPicInfo,o=t.svcShareData,i=t.svcOnLineAttendances,s=t.maxSizeForPage,c=t.svcViewMode,S.info("handleSvcBFCClick :svcBroadcastData:",o),$dispatch(coreUi.changeSvcBigPicInfo(o)),coreCall.resetBFCStatus($getState().call.callId,1),e.next=6,coreCall.closeSvcRemoteSocket(n.min);case 6:return $dispatch(coreUi.changeIsShowMainScreen(!1)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeUsedSvcSSRCList([])),T.initSvcShowAttendances(i,s),e.next=12,T.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 12:return e.next=14,T.setSvcVideoRender($getState().conf.svcShowAttendances);case 14:r&&(0,C.refreshShareSize)(a.ssrc);case 15:case"end":return e.stop()}},e,void 0)})),a.stopSvcShareOrBfcp=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("stopSvcShareOrBfcp"),t=$getState().conf,n=t.svcBigPicInfo,r=t.svcViewMode,a=t.svcShowPage,o=t.maxSizeForPage,i=t.ssrcRange,s=t.svcOnLineAttendances,c=t.isSvcShareMode,u=t.svcShareData,f=t.isShowMainScreen,!c){e.next=10;break}return $dispatch(coreUi.changeIsSvcShareMode(!1)),$dispatch(coreUi.changeSvcShareData({})),f?0===r&&0===a&&(S.info("stopSvcShareOrBfcp no need switch to video!"),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeSvcShowAttendances([])),T.initSvcShowAttendances(s,o)):(S.info("stopSvcShareOrBfcp need switch to video!"),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:i.min,name:""})),$dispatch(coreUi.changeSvcControlMode(0)),l=T.getBigCanvasSize(),$dispatch(coreUi.changeBigWinStyle(l)),S.info("stopSvcShareOrBfcp reset big containerSize is "+(0,p.default)(l)),$dispatch(coreUi.changeIsShowMainScreen(!0))),e.next=8,T.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 8:return e.next=10,T.setSvcVideoRender($getState().conf.svcShowAttendances);case 10:case"end":return e.stop()}},e,void 0)})),a.receviceSvcShareOrBfcp=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("receviceSvcShareOrBfcp"),t=$getState().conf,n=t.svcViewMode,r=t.svcShowAttendances,a=t.svcOnLineAttendances,o=t.svcBandMode,i=t.ssrcRange,1===n&&(s=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===o&&(s=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeMaxSizeForPage(s)),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeSvcShowAttendances([])),T.initSvcShowAttendances(a,s),r=$getState().conf.svcShowAttendances),$dispatch(coreUi.changeIsShowMainScreen(!1)),$dispatch(coreUi.changeIsSvcShareMode(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(1)),c=0===u?-2:-3,$dispatch(coreUi.changeSvcShareData({ssrc:c,name:f})),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:c,name:f})),e.next=12,coreCall.closeSvcRemoteSocket(i.min);case 12:return e.next=14,T.sendWatchSvcRequest(r);case 14:return e.next=16,T.setSvcVideoRender(r);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.resizeBfcWindow=function(){S.info("resizeBfcWindow");var e=$getState().conf.svcViewMode,t=coreCall.getBigContainerSize(),n=t.height-54;2===e&&(n=t.height),t={width:t.width,height:n},coreCall.setSvcBFCPVideoRender(t)},a.resizeBigSvcWindow=function(){S.info("resizeBigSvcWindow");var e=$getState().conf,t=e.ssrcRange;e.isSvcShareMode,e.svcOnLineAttendances;if(coreCall.getSvcRender(t.min)){var n=T.calcBigCanvasRatio();$dispatch(coreUi.changeBigWinStyle(n));var r=t.min+"_frame_share";S.info("resizeBigSvcWindow,bigCanvasSize is ",n),coreCall.setSvcRemoteVideoRender(t.min,r,n)}},a.resizeLocalBigWindow=function(){S.info("resizeBigSvcWindow");var e=$getState().conf;e.ssrcRange,e.isSvcShareMode,e.svcOnLineAttendances;if(coreCall.getSvcRender(-1)){var t=T.calcBigCanvasRatio();$dispatch(coreUi.changeBigWinStyle(t)),S.info("resizeBigSvcWindow,bigCanvasSize is ",t),coreCall.setSvcLocalVideoRender(t)}},a.changeSvcWindowSize=function(e,t){if(-1===e)coreCall.setSvcLocalVideoRender(t);else{var n=e+"_frame_share";coreCall.setSvcRemoteVideoRender(e,n,t)}},a.handleSvcSpeakerNotify=function(){for(var e=$getState().conf,t=e.confSpeaker,n=e.svcShowAttendances,r=(0,l.default)([],n),a=0;a<r.length;a++)r[a].is_speaker=!1;var o=!1;if(t.speaker.length>0)for(var i=t.speaker[0].number,s=0;s<r.length;s++)if(i===r[s].number){r[s].is_speaker=!0,o=!0;break}o&&N(r)},a.dealSvcAttendanceList=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,v,g,C,_,b,N,E,O,A,x,k,M,R;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("dealSvcAttendanceList start"),n=$getState().conf,r=n.svcControlMode,a=n.svcSelectWatchInfo,o=n.broadCastInfo,i=n.isSvcConf,s=n.svcOnLineAttendances,c=n.svcRecallorNot,u=n.serialMcuMemberList,f=n.isSameGradeMcu,l=n.svcViewMode,d=n.svcOldDidivePagerNo,h=n.isBigConf,v=n.svcActiveAttendances,g=T.getOnLineAttendances(t),h&&v&&v.length>0?(C=sortPreAndOrigiArray(v,g),$dispatch(coreUi.changeSvcOnLineAttendances(C))):$dispatch(coreUi.changeSvcOnLineAttendances(g)),"NOSelfNOWatch"!==(g=$getState().conf.svcOnLineAttendances)){e.next=7;break}return e.abrupt("return");case 7:if(_=new Array,b="",N="",window.CLIENTCONFIG.ISMOBILE)for(1===r&&(0,p.default)(g).indexOf(a.number)<0&&I(0,{number:a.number}),o.isBroadCast&&(0,p.default)(g).indexOf(o.broadCastList[0].number)<0&&(E={isBroadCast:!1,broadCastList:[]},$dispatch(coreUi.changeBroadCastInfo(E))),O=0;O<g.length;O++)b={name:g[O].name,number:g[O].number,role:g[O].role,is_mute:g[O].is_mute,is_self:g[O].is_self,is_same_grade_mcu:g[O].is_same_grade_mcu,hand_state:g[O].hand_state},N=N+","+g[O].number,_.push(b);else _=g;if($dispatch(coreUi.changeSvcOnLineAttendances(_)),!window.CLIENTCONFIG.ISMOBILE||!i){e.next=23;break}return A=$getState().conf.isBigConf,A&&(y(),_=$getState().conf.svcOnLineAttendances),c&&(w("recall updateVideoView",_),window.updateVideoView(_,!0),$dispatch(coreUi.changesvcRecallorNot(!1))),x=$getState().conf,k=!T.checkSerialConf(x),k&&$dispatch(coreUi.changeOldDidivePagerNo(1)),M={multiStreamMode:1,pageNo:1,LargeVedioStatus:-1,broadcastBeforeStatus:0,focusVedio:""},k&&0===f&&"0"!==x&&1===d&&1===l&&(S.info("send grade watch info"),window.multiStreamPageInfoChangeNotify(M),$dispatch(coreUi.changeMobileSerialNumber("0"))),(0,p.default)(_)!==(0,p.default)(s)&&(w("updateVideoView01",_),window.updateVideoView(_,!1)),e.abrupt("return");case 23:return e.next=25,T.handlePCSvcBroadcast(g);case 25:return R=e.sent,e.abrupt("return",R);case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handlePCSvcBroadcast=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,T.dealSvcBroadcastUpdate(t),0!==t.length){e.next=5;break}return S.info("onLineAttendances length is zero,please check."),e.abrupt("return",n);case 5:if(r=$getState().conf.svcViewMode,1===r&&t.length<3&&(a=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===$getState().conf.svcBandMode&&(a=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeMaxSizeForPage(a))),o=$getState().conf,i=o.svcShowAttendances,s=o.maxSizeForPage,c=o.svcViewMode,2!==c){e.next=24;break}u=null,f=new Array,l=0;case 12:if(!(l<t.length)){e.next=19;break}if(1!==t[l].is_self){e.next=16;break}return u=t[l],e.abrupt("break",19);case 16:l++,e.next=12;break;case 19:d=T.constructSvcShowAttendanceInfo(u),d&&f.push(d),N(f),e.next=25;break;case 24:1===c?0===i.length?($dispatch(coreUi.changeSvcShowPage(0)),n=T.initSvcShowAttendances(t,s)):n=T.updateDivideShowAttendances(t,i):0===c&&(0===i.length?($dispatch(coreUi.changeSvcShowPage(0)),n=T.initSvcShowAttendances(t,s)):n=T.updateBigSmallShowAttendances(t,i));case 25:return window.isChangeOfBroadcast&&(n=!0),e.abrupt("return",n);case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.dealSvcPageSwitch=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h,v,g,w,_,I,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShowPage;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(S.info("dealSvcPageSwitch svcShowPage : "+b),$dispatch(coreUi.changeSvcShowPage(b)),t=$getState().conf,n=t.svcShowAttendances,r=t.svcViewMode,a=t.maxSizeForPage,o=t.svcOnLineAttendances,i=t.svcBigPicInfo,s=t.isSvcShareMode,c=t.svcShareData,u=new Array,f=T.getCanUseAttendancesPos(r,b,a,s),l=new Array,d=f;d<o.length;d++)l.push(o[d]);p=0;case 8:if(!(p<n.length)){e.next=15;break}return h=n[p].ssrc,e.next=12,coreCall.closeSvcRemoteSocket(h);case 12:p++,e.next=8;break;case 15:for(0!==r&&$dispatch(coreUi.changeUsedSvcSSRCList([])),v=a,0===r&&0===b?s&&-2!==i.ssrc&&-3!==i.ssrc&&(v-=1):1===r&&b>0&&(u.push(n[0]),v-=1),g=Math.min(v,l.length),w=0;w<g;w++)(_=T.constructSvcShowAttendanceInfo(l[w]))&&u.push(_);if(0===r)for(I=0;I<n.length;I++)T.removeSvcSSRC(n[I].ssrc);return N(u),1===r&&(T.handleDivideModeWinSize(),T.dealDivideCanvasSize()),0!==b||1!==n.length||!s||-2!==i.ssrc&&-3!==i.ssrc||(0,C.refreshShareSize)(i.ssrc),e.next=26,T.sendWatchSvcRequest(u);case 26:return e.next=28,T.setSvcVideoRender(u,"true","true");case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.initSvcShowAttendances=function(e,t){S.info("initSvcShowAttendances start");var n=$getState().conf,r=n.isSvcShareMode,a=n.svcBigPicInfo,o=new Array,i=!1;r&&-2!==a.ssrc&&-3!==a.ssrc&&(t-=1);for(var s=Math.min(t,e.length),c=0;c<s;c++){var u=T.constructSvcShowAttendanceInfo(e[c]);u&&o.push(u),i=!0}return N(o),w("initSvcShowAttendances end,newSvcShowAttendances:",o),i},a.updateBigSmallShowAttendances=function(e,t){w("updateBigSmallShowAttendances start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcViewMode,a=n.maxSizeForPage,o=n.svcShowPage,i=n.svcBigPicInfo,s=(n.isSvcBroadcastMode,n.svcBroadcastData,n.isSvcShareMode),c=!1,u=T.getCanUseAttendancesPos(r,o,a,s),f=(0,l.default)([],t),d=new Array,p=0;if(0===o){s&&-2!==i.ssrc&&-3!==i.ssrc&&(a-=1);if(1!==f[0].is_self&&1===e[0].is_self){w("updateBigSmallShowAttendances: add local attendance to svcShowAttendance",[e[0]],!1);var h=T.constructSvcShowAttendanceInfo(e[0]);f.splice(0,0,h),c=!0}for(var m=0;m<1;m++)d.push(f[m]);p=1}for(var v=T.getCanUseAttendances(u,e,f),g=p;g<f.length;g++){var _=$getState().conf,I=_.isSameGradeMcu,b=_.serialMcuMemberList;if(0===I&&0===f[g].is_same_grade_mcu){T.checkSerialConf(f[g].number)||(c=!0),b.length>0?d.push(f[g]):(!1,T.removeSvcSSRC(f[g].ssrc),c=!0)}else if(T.isOnline(f[g]))w("updateBigSmallShowAttendances:push old inline",[f[g]],!1),d.push(f[g]);else if(v.length>0){S.info("updateBigSmallShowAttendances:update old offline "+f[g].number.substr(0,3)+"****"+f[g].number.substr(-3)+" to inline "+v[0].number.substr(0,3)+"****"+v[0].number.substr(-3));var E=T.updateSvcShowAttendanceInfo(f[g],v[0]);d.push(E),v.splice(0,1),c=!0}else T.removeSvcSSRC(f[g].ssrc),c=!0}for(var y=0;y<v.length;y++)if(d.length<a){var O=T.constructSvcShowAttendanceInfo(v[y]);O&&(d.push(O),c=!0)}for(;d.length>a;)T.removeSvcSSRC(d[d.length-1].ssrc),d.pop(),c=!0;return 0!==d.length?N(d):($dispatch(coreUi.changeSvcShowPage(0)),T.initSvcShowAttendances(e,a),s&&(0,C.refreshShareSize)(i.ssrc)),w("updateBigSmallShowAttendances end,newSvcAttendancesTemp:",d),c},a.addRemoveBroadcast=function(e,t,n,r){S.info("addRemoveBroadcast",e);var a=!1;if(e){if(1!==n[0].is_broadcast||1===n[0].is_self){w("addRemoveBroadcast: add broadcast to svsShowAttendance",[r[0]],"PC");var o=T.constructSvcShowAttendanceInfo(r[0]);n.splice(0,0,o),a=!0}else if(n[0].number!==t.number){w("addRemoveBroadcast: update broadcast to attendance",[r[0]],"PC");var i=T.updateSvcShowAttendanceInfo(n[0],r[0]);n[0]=i,a=!0}}else 1===n[0].is_broadcast&&0===n[0].is_self&&(w("addRemoveBroadcast: delete broadcast from svsShowAttendance",[n[0]]),T.removeSvcSSRC(n[0].ssrc),n.splice(0,1),a=!0);return a},a.updateDivideShowAttendances=function(e,t){w("updateDivideShowAttendances start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=n.maxSizeForPage,o=n.svcViewMode,i=!1,s=(0,l.default)([],t),c=T.getCanUseAttendancesPos(o,r,a),u=T.getCanUseAttendances(c,e,t),f=new Array;if(e.length>0&&1===e[0].is_self&&T.isInSvcShowAttendances(e[0])<0){var d=T.constructSvcShowAttendanceInfo(e[0]);d&&f.push(d),i=!0}for(var p=0;p<s.length;p++){var h=(s[p].number,$getState().conf),m=h.isSameGradeMcu,v=h.serialMcuMemberList;if(0===m&&0===s[p].is_same_grade_mcu){T.checkSerialConf(s[p].number)||(i=!0),v.length>0?f.push(s[p]):(!1,T.removeSvcSSRC(s[p].ssrc),i=!0)}else if(T.isOnline(s[p]))w("updateDivideShowAttendances:push old inline",[s[p]],!1),f.push(s[p]);else if(u.length>0){S.info("updateDivideShowAttendances:update old offline "+handlePhoneNumber(s[p].number)+" to inline "+handlePhoneNumber(u[0].number));var g=T.updateSvcShowAttendanceInfo(s[p],u[0]);f.push(g),u.splice(0,1),i=!0}else T.removeSvcSSRC(s[p].ssrc),i=!0}for(var C=0;C<u.length&&f.length<a;C++){var _=T.constructSvcShowAttendanceInfo(u[C]);_&&(f.push(_),i=!0)}for(;f.length>a;)T.removeSvcSSRC(f[f.length-1].ssrc),f.pop(),i=!0;return f.length>1?N(f):($dispatch(coreUi.changeSvcShowPage(0)),T.initSvcShowAttendances(e,a)),w("updateDivideShowAttendances end --- newSvcAttendancesTemp:",f),i},a.setSvcVideoRender=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,v,g,C,w,_,I,b,N,E,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true",O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcViewMode,a=n.svcBigPicInfo,o=n.svcDivideWinSize,i=n.ssrcRange,s=n.svcRenders,c=n.isSvcShareMode,u=n.svcShareData,f=n.svcOnLineAttendances,l=n.isOppsite,d=n.isShowMainScreen,S.info("setSvcVideoRender start, svcViewMode="+r+", old svcRenders length is "+s.length+",divisize w="+o.width+",h="+o.height),h=new Array,v={width:127,height:70},g=coreCall.getBigContainerSize(),0===r||2===r?g=T.calcBigCanvasRatio():1===r&&(v=T.handleRealCanvasSize(o.width,o.height)),C=void 0,(2!==r||!l)&&a.hasOwnProperty("ssrc")||"false"!==O){e.next=13;break}return e.next=10,coreCall.setSvcLocalVideoRender(g);case 10:C=e.sent,e.next=16;break;case 13:return e.next=15,coreCall.setSvcLocalVideoRender(v);case 15:C=e.sent;case 16:if(w={render:C,ssrc:-1},C&&(S.info("[SVC TupRender2]setSvcVideoRender,renderURI = local_frame_share "),h.push(w)),!(f.length>=2)){e.next=37;break}if(2!==f.length||c){e.next=23;break}S.info("no need set small render"),e.next=37;break;case 23:_=0;case 24:if(!(_<t.length)){e.next=37;break}if(1!==t[_].is_self){e.next=27;break}return e.abrupt("continue",34);case 27:return I=t[_].ssrc,b=t[_].ssrc+"_frame_share",1===r&&t[_].svcDivideCanvasSize&&0!==t[_].svcDivideCanvasSize.width&&0!==t[_].svcDivideCanvasSize.height&&(v=t[_].svcDivideCanvasSize),e.next=32,coreCall.setSvcRemoteVideoRender(I,b,v);case 32:C=e.sent,C&&(S.info("[SVC TupRender2]setSvcVideoRender,renderURI = "+b+",newRenderSize is "+(0,p.default)(v)),w={render:C,ssrc:t[_].ssrc},h.push(w));case 34:_++,e.next=24;break;case 37:if(0!==r&&2!==r||"NoBig"===y){e.next=50;break}if(N=i.min,E=i.min+"_frame_share",2!==r||!l){e.next=46;break}return e.next=43,coreCall.setSvcRemoteVideoRender(N,E,v);case 43:C=e.sent,e.next=49;break;case 46:return e.next=48,coreCall.setSvcRemoteVideoRender(N,E,g);case 48:C=e.sent;case 49:C&&(S.info("[SVC TupRender2]setSvcVideoRender,renderURI = "+E+",newRenderSize is "+(0,p.default)(g)),w={render:C,ssrc:N},h.push(w));case 50:if(d||!c||!u.hasOwnProperty("ssrc")||-3!==u.ssrc||"false"!==O){e.next=53;break}return e.next=53,coreCall.setSvcBFCPVideoRender(g);case 53:T.clearOldRenders(s,h),"true"===y&&h.length!==s.length&&coreCall.svcRedistributeVideoTmmbr($getState().call.callId),S.info("setSvcVideoRender end,new svcRenders.length ="+h.length+",flag="+y);case 56:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.clearOldRenders=function(){var e=(0,g.default)(m.default.mark(function e(t,n){var r,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("clearOldRenders start,oldRenders length = "+t.length+",newRenders length = "+n.length),r=0;case 2:if(!(r<t.length)){e.next=19;break}a=!1,o=0;case 5:if(!(o<n.length)){e.next=12;break}if(t[r].ssrc!==n[o].ssrc){e.next=9;break}return a=!0,e.abrupt("break",12);case 9:o++,e.next=5;break;case 12:if(a){e.next=16;break}return S.info("clearOldRenders, close ssrc is "+t[r].ssrc),e.next=16,coreCall.closeSvcRemoteSocket(t[r].ssrc);case 16:r++,e.next=2;break;case 19:$dispatch(coreUi.changeSvcRenders(n));case 20:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setSvcLocalRender=(0,g.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("setSvcLocalRender start"),t=new Array,n=T.calcBigCanvasRatio(),$dispatch(coreUi.changeBigWinStyle(n)),e.next=6,coreCall.setSvcLocalVideoRender(n);case 6:r=e.sent,r&&(a={render:r,ssrc:-1},S.info("setSvcLocalRender,setSvcLocalVideoRender,renderURI = local_frame_share"),t.push(a),$dispatch(coreUi.changeSvcRenders(t))),S.info("setSvcLocalRender end");case 9:case"end":return e.stop()}},e,void 0)})),a.setDesktopMaxEncodeResolution=(0,g.default)(m.default.mark(function e(){var t,n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf.svcDesktopMaxEncode,!(isNullOrEmpty(t)||0===t.width&&0===t.height)){e.next=3;break}return e.abrupt("return");case 3:return"win"!==window.CLIENTCONFIG.PLATFORM&&"mac"!==window.CLIENTCONFIG.PLATFORM||(window.cpus&&window.cpus>=4?(1===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS||0===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS&&t.width>=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720.width)&&(t=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720),S.info("Svc_Esight_Config_CPUS")):(1===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS||0===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS&&t.width>=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_540.width)&&(t=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_540),S.info("Svc_Esight_Config_CPUS"))),n={svc_max_enc_res:{width:t.width,height:t.height}},S.info("Svc_Esight_Config setDesktopMaxEncodeResolution start, media= ",n),e.next=8,coreTup.getCallInstance();case 8:return r=e.sent,e.next=11,r.configSvcEncodeParam(n);case 11:case"end":return e.stop()}},e,void 0)})),a.setMobileMaxEncodeResolution=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s,c,u;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcMobileMaxSoftEncode,a=n.svcMobileMaxHardEncode,!isNullOrEmpty(r)&&0!==r.width&&0!==r.height||!isNullOrEmpty(a)&&0!==a.width&&0!==a.height){e.next=4;break}return S.info("Svc_Esight_Config setMobileMaxEncodeResolution return"),e.abrupt("return");case 4:return o={callid:t,infoid:0},e.next=7,coreTup.getCallInstance();case 7:return i=e.sent,e.next=10,i.getBasicCallInfo(o);case 10:if(s=e.sent,0!==s.result){e.next=15;break}S.info("Svc_Esight_Config setMobileMaxEncodeResolution getBasicCallInfo success"),e.next=17;break;case 15:return S.info("Svc_Esight_Config setMobileMaxEncodeResolution getBasicCallInfo failed"),e.abrupt("return");case 17:if(c=void 0,0===s.param.call_info.svc_is_support_hd_encoder?(c=$getState().conf.svcMobileMaxSoftEncode,S.info("Svc_Esight_Config setMobileMaxEncodeResolution soft maxEncode= ",c)):(c=$getState().conf.svcMobileMaxHardEncode,S.info("Svc_Esight_Config setMobileMaxEncodeResolution hard maxEncode= ",c)),!(isNullOrEmpty(c)||0===c.width&&0===c.height)){e.next=21;break}return e.abrupt("return");case 21:return u={svc_max_enc_res:{width:c.width,height:c.height}},S.info("Svc_Esight_Config setMobileMaxEncodeResolution start"),e.next=25,i.configSvcEncodeParam(u);case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMaxWatchResolutionByLevelId=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={callid:t,infoid:2},r=void 0,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=11;break}return e.next=5,coreTup.getCallInstance();case 5:return a=e.sent,e.next=8,a.getBasicCallInfo(n);case 8:r=e.sent,e.next=14;break;case 11:return e.next=13,coreCall.getBasicCallInfoNew(n);case 13:r=e.sent;case 14:if(0!==r.result){e.next=18;break}S.info("Svc_Esight_Config setMaxWatchResolutionByLevelId getBasicCallInfo success"),e.next=20;break;case 18:return S.info("Svc_Esight_Config setMaxWatchResolutionByLevelId getBasicCallInfo failed"),e.abrupt("return");case 20:o=r.param.tx_main_video.width,i=r.param.tx_main_video.height,s={width:0,height:0},1280===o&&720===i?(s.width=1280,s.height=720):704===o&&576===i?(s.width=640,s.height=360):S.error("level-id info acheived is error"),0!==s.width&&0!==s.height&&$dispatch(coreUi.changeSvcMaxWatchResolution(s)),S.info("Svc_Esight_Config setMaxWatchResolutionByLevelId maxWatchResolution",s);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.sendWatchSvcRequest=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,v,g,C,_,I,b,N,E,y,O,A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShowAttendances;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new Array,n={},r=$getState().conf,a=r.svcBigPicInfo,o=r.svcViewMode,i=r.ssrcRange,s=r.usedSsrcList,c=r.svcOnLineAttendances,u=r.svcControlMode,f=r.isSvcShareMode,d=r.isBigConf,p=r.svcShowPage,h=r.isSameGradeMcu,v=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720),g=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180),C=c.length>0?c[0].number:"0",_=0;case 7:if(!(_<c.length)){e.next=14;break}if(!c[_].is_self){e.next=11;break}return C=c[_].number,e.abrupt("break",14);case 11:_++,e.next=7;break;case 14:if(I=$getState().conf.svcDesktopSpeakerBigMaxLook,b=$getState().conf.svcMaxWatchResolution,isNullOrEmpty(I)||0===I.width||0===I.height||(v.width=I.width,v.height=I.height,S.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchAttendeeSize= ",v)),v=T.getRealResolution(v,b),g=T.getSmallWatchAttendeeSize(),N=null,0!==o&&2!==o||(S.info("sendWatchSvcRequest,add bigPic watch attendance start"),E="",1===u?a.ssrc>0?(T.isOnline(a)||T.checkSerialConf(a.number)?E=a.number:($dispatch(coreUi.changeSvcBigPicInfo({ssrc:i.min})),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeIsSvcSelectMode(!1))),2!==c.length||f||($dispatch(coreUi.changeIsSvcSelectMode(!1)),E=""),N={number:E,ssrc:i.min,width:v.width,height:v.height},t.push(N),S.info("sendWatchSvcRequest,add bigPic watch attendance "+E.substr(0,3)+"****"+E.substr(-3))):-2!==a.ssrc&&-3!==a.ssrc||(N={number:E,ssrc:0,width:v.width,height:v.height},t.push(N),S.info("sendWatchSvcRequest,add share watch attendance "+E.substr(0,3)+"****"+E.substr(-3))):(N={number:E,ssrc:i.min,width:v.width,height:v.height},t.push(N),S.info("sendWatchSvcRequest,add bigPic watch attendance "+E.substr(0,3)+"****"+E.substr(-3)))),!(c.length>=2)){e.next=35;break}if(2!==c.length||f){e.next=26;break}S.info("no need send small watch request"),e.next=35;break;case 26:y=0;case 27:if(!(y<A.length)){e.next=35;break}if(1!==A[y].is_self){e.next=30;break}return e.abrupt("continue",32);case 30:0===h&&0===A[y].is_same_grade_mcu?N={number:"M255T0",ssrc:A[y].ssrc,width:g.width,height:g.height}:(d&&0===p&&(A[y].number=""),N={number:A[y].number,ssrc:A[y].ssrc,width:g.width,height:g.height}),t.push(N);case 32:y++,e.next=27;break;case 35:w("sendWatchSvcRequest watchAttendees is ",t,"SSRC"),O={attendeeList:t,selfNum:C},coreConf.sendWatchSvcRequestService(O);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleWinResize=function(){var e=(0,g.default)(m.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("handleWinResize"),t=$getState().conf.svcShowAttendances,1===n&&(T.handleDivideModeWinSize(),T.dealDivideCanvasSize(),T.setSvcVideoRender(t));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.dealDivideCanvasSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;S.info("dealDivideCanvasSize");for(var t=T.calcCanvas16And9Size(e,constant.VIDEO_SIZE_BITE.SIZE_16_B_9),n=T.calcCanvas16And9Size(e,constant.VIDEO_SIZE_BITE.SIZE_9_B_16),r=$getState().conf.svcShowAttendances,a=0;a<r.length;a++)r[a].svcDivideCanvasSize&&r[a].svcDivideCanvasSize.width<r[a].svcDivideCanvasSize.height?r[a].svcDivideCanvasSize=n:r[a].svcDivideCanvasSize=t;N(r)},a.handleRealCanvasSize=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9;S.info("handleRealCanvasSize",e,t);var a=e,o=t,i=n,s=r,c=e/i,u=t/s,f={width:0,height:0};return c>u?(a=Math.floor(i*u),f={width:a,height:t}):(o=Math.floor(s*c),f={width:e,height:o}),f},a.getBigCanvasSize=function(){S.info("getBigCanvasSize");var e=$getState().conf,t=e.isSvcShareMode,n=e.svcOnLineAttendances,r=e.svcViewMode,a=coreCall.getBigContainerSize();return 0===r?t?n.length<=1?a.height=a.height-54:a.height=a.height-54-74:n.length<=2?a.height=a.height-54:a.height=a.height-54-74:2===r&&(a.height=a.height-54),a},a.calcBigCanvasRatio=function(){S.info("calcBigCanvasRatio");var e=$getState().conf,t=(e.isSvcShareMode,e.svcOnLineAttendances,e.svcViewMode,$getState().call.bigWinStyle),n=T.getBigCanvasSize();return n=t.width<t.height?T.handleRealCanvasSize(n.width,n.height,constant.VIDEO_SIZE_BITE.SIZE_9_B_16.width,constant.VIDEO_SIZE_BITE.SIZE_9_B_16.height):T.handleRealCanvasSize(n.width,n.height),$dispatch(coreUi.changeBigWinStyle(n)),n},a.calcCanvas16And9Size=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.VIDEO_SIZE_BITE.SIZE_16_B_9;S.info("calcCanvas16And9Size");var n=$getState().conf,r=n.svcDivideWinSize,a=n.svcViewMode,o=0,i=0;if(1===a)o=r.width,i=r.height;else{var s=T.getBigCanvasSize();o=s.width,i=s.height}var c=o,u=i,f=t.width,l=t.height;e&&0!==e.width&&0!==e.height&&(f=e.width,l=e.height);var d=T.handleRealCanvasSize(c,u,f,l);return d.width-=2,d.height-=2,d},a.handleDivideModeCanvasSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;S.info("handleDivideModeCanvasSize,originalWidth is "+t+",originalHeight is "+n);var r=$getState().conf.svcDivideWinSize,a=r.width,o=r.height,i=a,s=o,c=a/t,u=o/n,f={width:0,height:0};c>u?(i=Math.floor(t*u),f={width:i,height:o}):(s=Math.floor(n*c),f={width:a,height:s}),f.width-=2,f.height-=2;for(var l=$getState().conf.svcShowAttendances,d=0;d<l.length;d++)if(l[d].ssrc===e){l[d].svcDivideCanvasSize=f;var p=l[d].ssrc+"_frame_share";coreCall.setSvcRemoteVideoRender(l[d].ssrc,p,f);break}N(l)},a.handleDivideModeWinSize=function(){S.info("handleDivideModeWinSize");var e=$getState().conf.svcShowAttendances,t=coreCall.getBigContainerSize(),n={width:0,height:0};t={width:t.width,height:t.height-54-50},e.length>20?(n.width=Math.floor(t.width/5),n.height=Math.floor(t.height/5)):e.length>16?(n.width=Math.floor(t.width/5),n.height=Math.floor(t.height/4)):e.length>12?(n.width=Math.floor(t.width/4),n.height=Math.floor(t.height/4)):e.length>9?(n.width=Math.floor(t.width/4),n.height=Math.floor(t.height/3)):e.length>6?(n.width=Math.floor(t.width/3),n.height=Math.floor(t.height/3)):e.length>4?(n.width=Math.floor(t.width/3),n.height=Math.floor(t.height/2)):e.length>2?(n.width=Math.floor(t.width/2),n.height=Math.floor(t.height/2)):2===e.length&&(n.width=Math.floor(t.width/2),n.height=Math.floor(t.height)),$dispatch(coreUi.changeDivideWinSize(n))},a.constructSvcShowAttendanceInfo=function(e){if(S.info("constructSvcShowAttendanceInfo attendance number is "+e.number.substr(0,3)+"****"+e.number.substr(-3)),e){var t=$getState().conf,n=t.ssrcRange,r=t.usedSsrcList,a=-1;if(0===e.is_self){for(a=n.max;r.indexOf(a)>=0;)a--;if(a<n.min)return S.info("constructSvcShowAttendanceInfo ssrc "+a+" is not include in ssrcRange "+n.min+"-"+n.max),null;T.addSvcSSRC(a)}return{name:e.name,number:e.number,is_self:e.is_self,is_speaker:e.is_speaker,role:e.role,is_broadcast:e.is_broadcast,is_same_grade_mcu:e.is_same_grade_mcu,ssrc:a}}},a.updateSvcShowAttendanceInfo=function(e,t){var n="name:"+t.name.substr(0,1)+"**"+t.name.substr(-1)+",number:"+t.number.substr(0,3)+"****"+t.number.substr(-3);S.info("updateSvcShowAttendanceInfo oldAttendance:"+e.number.substr(0,3)+"****"+e.number.substr(-3)+", newAttendance:"+n);var r=(0,l.default)({},e);return r.name=t.name,r.number=t.number,r.is_self=t.is_self,r.role=t.role,r.is_same_grade_mcu=t.is_same_grade_mcu,r},a.getOnLineAttendances=function(e){for(var t=$getState().conf.isSameGradeMcu,n=new Array,r=$getState().conf.svcShowAttendances,a=!1,o=!1,i=new Array,s={name:"",number:"M255T0",is_self:0,is_broadcast:0,is_same_grade_mcu:0,role:0},c=0;c<e.length;c++){var u=0!=(e[c].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[c].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(5===e[c].state&&u){if(0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self){1===e[c].is_broadcast&&(s.is_broadcast=1,s.number=e[c].number),o=!0,i.push({number:e[c].number,is_mute:e[c].is_mute});continue}1===e[c].is_self?(a=!0,window.CLIENTCONFIG.ISMOBILE&&$dispatch(coreUi.changeSvcSelfNumber(e[c].number)),$dispatch(coreUi.changeSvcSelfName(e[c].name)),n.splice(0,0,e[c])):5===e[c].state&&u&&n.push(e[c])}for(var f=0;f<r.length;f++)r[f].number===e[c].number&&r[f].name!==e[c].name&&e[c].name&&(r[f].name=e[c].name)}return o?($dispatch(coreUi.changeSerialMemberList(i)),n.splice(1,0,s)):$dispatch(coreUi.changeSerialMemberList([])),N(r),w("getOnLineAttendances end,onLineAttendances:",n,"PC"),a?n:"NOSelfNOWatch"},a.dealSvcBroadcastUpdate=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i,c,u,f,l,d,p;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("dealSvcBroadcastUpdate start"),n=$getState().conf,r=n.isSvcBroadcastMode,a=n.svcBroadcastData,o=n.svcBigPicInfo,i=n.ssrcRange,c=n.svcViewMode,u=n.svcBandMode,0!==t.length){e.next=4;break}return e.abrupt("return");case 4:f=!1,l=0;case 6:if(!(l<t.length)){e.next=15;break}if(f=1===t[l].is_broadcast&&1!==t[l].is_self){e.next=10;break}return e.abrupt("continue",12);case 10:return(0,s.default)(a).length>0&&a.number===t[l].number?S.info("dealSvcBroadcastUpdate: the broadcast is the same"):(S.info("dealSvcBroadcastUpdate: control mode to broadcast mode"),d={name:t[l].name,number:t[l].number,is_self:t[l].is_self,is_speaker:t[l].is_speaker,role:t[l].role,ssrc:i.min,is_same_grade_mcu:t[l].is_same_grade_mcu},o.hasOwnProperty("ssrc")&&-3===o.ssrc&&coreCall.resetBFCStatus($getState().call.callId,0),$dispatch(coreUi.changeIsShowMainScreen(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(d)),$dispatch(coreUi.changeSvcBigPicInfo(d)),$dispatch(coreUi.changeSvcControlMode(0)),1===c&&(S.info("dealSvcBroadcastUpdate: switch control mode to broadcast mode and switch layout mode to BigAndSmall mode"),p=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===u&&(p=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeMaxSizeForPage(p)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(0))),window.isChangeOfBroadcast=!0),e.abrupt("break",15);case 12:l++,e.next=6;break;case 15:!f&&r&&(o.number===a.number&&(S.info("dealSvcBroadcastUpdate: control mode to mute mode"),$dispatch(coreUi.changeSvcControlMode(0))),S.info("dealSvcBroadcastUpdate: cancel broadcast mode"),$dispatch(coreUi.changeIsSvcBroadcastMode(!1)),$dispatch(coreUi.changeSvcBroadcastData({})),window.isChangeOfBroadcast=!0);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.isOnline=function(e){for(var t=$getState().conf.svcOnLineAttendances,n=!1,r=e.number,a=0;a<t.length;a++)if(r===t[a].number){n=!0;break}return n},a.isInSvcShowAttendances=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=$getState().conf.svcShowAttendances;t.length>0&&(n=t);for(var r=-1,a=0;a<n.length;a++){e.number;if(0===$getState().conf.isSameGradeMcu&&0===e.is_same_grade_mcu&&"M255T0",n[a].number===e.number){r=a;break}}return r},a.getCanUseAttendancesPos=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];S.info("getCanUseAttendancesPos maxSizeForPage:"+n+",isSvcShareMode:"+r);var a=0,o=$getState().conf.svcBigPicInfo;return 1===e?t>0&&(a=t*(n-1)+1):0===e&&(a=r&&o.hasOwnProperty("ssrc")&&-2!==o.ssrc&&-3!==o.ssrc?Math.max(0,t*n-1):t*n),a},a.getCanUseAttendances=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];S.info("getCanUseAttendances startPos:"+e);for(var r=!1,a=$getState().conf.isSameGradeMcu,o=0;o<n.length;o++)if(0===a&&0===n[o].is_same_grade_mcu){r=!0;break}for(var i=new Array,s=e;s<t.length;s++)r&&0===t[s].is_same_grade_mcu||0===t[s].is_self&&T.isInSvcShowAttendances(t[s],n)<0&&i.push(t[s]);return w("getCanUseAttendances end,canUseOnLineAttendances:",i,"PC"),i},a.addSvcSSRC=function(e){S.info("addSSRC: "+e,e);var t=$getState().conf.usedSsrcList,n=(0,l.default)([],t);n.push(e),$dispatch(coreUi.changeUsedSvcSSRCList(n))},a.removeSvcSSRC=function(){var e=(0,g.default)(m.default.mark(function e(t){var n,r,a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("removeSSRC: "+t,t),-1!==t){e.next=3;break}return e.abrupt("return");case 3:n=$getState().conf,r=n.usedSsrcList,a=n.svcRenders,o=(0,l.default)([],r),i=o.indexOf(t),o.splice(i,1),$dispatch(coreUi.changeUsedSvcSSRCList(o));case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getSmallWatchAttendeeSize=function(){S.info("getSmallWatchAttendeeSize");var e=$getState().conf,t=e.svcShowAttendances,n=e.svcViewMode,r=t.length-1,a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);if(1===n)if(r>=2&&r<=6){a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);var o=$getState().conf.svcDesktopDivideModeMaxLook2_6;a=T.getRealResolution(a,o)}else if(r>=7&&r<=16){a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var i=$getState().conf.svcDesktopDivideModeMaxLook7_16;a=T.getRealResolution(a,i)}else{a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var s=$getState().conf.svcDesktopDivideModeMaxLook17_24;a=T.getRealResolution(a,s)}else{var c=$getState().conf.svcDesktopSpeakerModeSmallMaxLook;a=T.getRealResolution(a,c)}var u=$getState().conf.svcMaxWatchResolution;return a=T.getRealResolution(a,u)},a.getRealResolution=function(e,t){var n=e;return!isNullOrEmpty(t)&&(t.width>0||t.height>0)&&n.width>t.width&&n.height>t.height&&(n.width=t.width,n.height=t.height,S.info("[getRealResolution]Svc_Esight_Config Destop esightConfigRes is worked,watchSize= ",n)),n},a.checkSerialConf=function(e){for(var t=!1,n=$getState().conf.serialMcuMemberList,r=0;r<n.length;r++)if(n[r].number===e){t=!0;break}return t},o)},336:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},355:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=0===e.param.ret;return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_EXTEND,extraTrackKey:null,resultParams:t?[1]:[0,e.param.ret]}),g.handleGetDataPostponeConf(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.changeVmrInfo=t.showConfMemberList=t.getHandUpState=t.confHandUp=t.isMemberListNull=t.isUserEndConf=t.getInfoOfConf=t.getSsrcRange=t.isSvcConf=t.isDataConf=t.isVideoConf=t.getIsAvcMultiViewBroadcast=t.setIsAvcMultiViewBroadcast=t.getCurrentConfId=t.getSavedRecallInfo=t.getUpdatedParticipants=t.getIsRecall=t.setIsFirstEnterConf=t.getIsFirstEnterConf=t.setIsSmcFirstRequestCharimanRest=t.getIsSmcFirstRequestCharimanRest=t.cloudRecordRequest=t.changeActiveDirection=t.confctrlWatchAttendee=t.sendWatchSvcRequest=t.updateConfMemberList=t.handleTransToConfResult=t.handleSvcSeessionModify=t.handleCallEndedPostConf=t.handleConfEnded=t.broadcastAttendee=t.leaveConf=t.getConfMemberListContent=t.acceptConf=t.rejectConf=t.enterConfByIdOnlyService=t.enterConfInConfListService=t.oneKeyEnterConfService=t.handleConfBeTransferToConf=t.handleConfIncoming=t.handleBigParamResultNotify=t.handleConfInfoNotify=t.handleConfConnected=t.handleGetConfInfoRes=t.getConfInfoService=t.transferChairman=t.cancelConf=t.unSubscribeConfList=t.subscribeConfList=t.getConfList=t.getVRMList=t.setConfNotifyFunc=t.changeConfSelfRole=t.changeNickName=t.requestChairman=t.releaseChairman=t.handupService=t.postponeConf=t.lockConf=t.allowUnmuteConf=t.muteConf=t.muteAttendee=t.removeAttendee=t.callAttendee=t.hangupAttendee=t.addAttendee=t.reInviteAttendee=t.endConf=t.p2pTransferConf=t.isConfChairMan=t.isNeedUpdate2DataConf=t.isInConf=t.upgradeConf=t.createConf=t.confctrlInit=t.bookConf=void 0;var i=n(69),s=a(i),c=n(1),u=a(c),f=n(2),l=a(f),d=n(940),p=a(d),h=n(299),m=n(951),v=n(200),g=r(v),C=n(259),S=r(C),w=n(216),_=r(w),I=coreLogger.getLogger("confModel")("index"),b=null,N=constant.MEETING_NET_TYPE.MEDIAX_MEETING,E=null,y=(t.bookConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p.default(t,!1),e.next=3,n.bookConf(t.confSubject,t.groupUri,t.isMultiStream,t.mediaType,t.userType,t.start_time,t.conf_len,t.time_zone,t.noPassword,t.vmrConfId);case 3:return r=e.sent,n=null,I.info("bookConf,set confService null"),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confctrlInit=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:t=e.sent,n=t.isSupportAS,I.info("confctrlInit getConfList or subscribeConfList, isSupportAS = "+n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===b){e.next=3;break}return I.error("conf service is not null"),e.abrupt("return");case 3:return b=new p.default(t),e.next=6,b.createConf(t.confSubject,t.groupUri,t.isMultiStream,t.mediaType,t.userType,t.noPassword,t.deviceSet,t.vmrConfId);case 6:return n=e.sent,r=n.errorCode,0!==r&&(b=null,I.error("createConf fail ,set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.upgradeConf=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.error("upgradeConf start"),null!==b){e.next=4;break}return I.error("no conf service exist，can not upgradeConf"),e.abrupt("return");case 4:return _.setIsAutoStartScreenShare(!0),e.next=7,b.upgradeConf();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInConf=function(){return!(null===b)},t.isNeedUpdate2DataConf=function(){return null===b||null!==b&&!_.confInfoNotifyParamsExist()&&b.confInfo.mediaType<=16},t.isConfChairMan=function(){return null!==b&&1===b.confInfo.confRole},t.p2pTransferConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===b){e.next=3;break}return I.error("conf service is not null"),e.abrupt("return");case 3:return b=new p.default(t),void 0!==t.isAutoScreenShare?_.setIsAutoStartScreenShare(t.isAutoScreenShare):_.setIsAutoStartScreenShare(!1),e.next=7,b.p2pTransferConf(t);case 7:return n=e.sent,r=n.errorCode,0!==r&&(I.error("confService.p2pTransferConf fail,set confService null"),b=null),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endConf=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("endConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.endConf();case 5:return t=e.sent,I.info("endConf set confService null, res = "+t),b=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reInviteAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("reInviteAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.reInviteAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.addAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("addAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.addAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.hangupAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("hangupAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.hangupAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.callAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("callAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.callAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.removeAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("removeAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.removeAttendee(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.muteAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("muteAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.muteAttendee(t.isMute,t.attendee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.muteConf=function(){var e=(0,l.default)(u.default.mark(function e(t,n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("muteConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.muteConf(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.allowUnmuteConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("allowUnmuteConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.allowUnmuteConf(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.lockConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("lockConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.lockConf(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.postponeConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("postponeconf no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.postponeConf(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handupService=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("handupService no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.handup(t.isHandup,t.attendee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.releaseChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("releaseChairman no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.releaseChairman(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("requestChairman no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.requestChairman(t.chairmanPwd,t.reqNumber);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeNickName=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("changeNickName no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.changeNickName(t.nickName,t.reqNumber);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeConfSelfRole=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==b&&(I.info("changeConfSelfRole "+t),b.confInfo.confRole=t,window.CLIENTCONFIG.ISMOBILE&&(I.info("notifyIsSelfChairManToNative "+t),window.notifyIsSelfChairManToNative(t)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setConfNotifyFunc=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("set confctrl service callback func"),e.next=3,coreTup.getConfCtrlInstance();case 3:t=e.sent,t.setMultiNotifyFunc(491564,$),t.setNotifyFunc(491525,j),t.setNotifyFunc(491577,q),t.setNotifyFunc(491538,K),t.setNotifyFunc(491545,Y),t.setNotifyFunc(491556,z),t.setNotifyFunc(491544,ie),t.setNotifyFunc(491563,V),t.setNotifyFunc(491600,H),t.setNotifyFunc(491566,G),t.setNotifyFunc(491580,B),t.setNotifyFunc(491595,U),t.setNotifyFunc(491552,Z),t.setNotifyFunc(491553,Q),t.setNotifyFunc(491611,ee),t.setNotifyFunc(491554,o),t.setNotifyFunc(491578,te),t.setNotifyFunc(491567,P),t.setNotifyFunc(491579,F),t.setNotifyFunc(491535,ne),t.setNotifyFunc(491531,R),t.setNotifyFunc(491529,X),t.setNotifyFunc(491548,L),t.setNotifyFunc(491598,M),t.setNotifyFunc(491533,se),t.setNotifyFunc(491534,ce),t.setNotifyFunc(491599,D),t.setNotifyFunc(491562,re),t.setNotifyFunc(491557,oe),t.setNotifyFunc(491550,k),t.setNotifyFunc(491582,y),t.setNotifyFunc(491581,x),t.setNotifyFunc(491588,ue),t.setNotifyFunc(491570,le),t.setNotifyFunc(491589,de),t.setNotifyFunc(491603,J),t.setNotifyFunc(491601,A),t.setNotifyFunc(491571,he),t.setNotifyFunc(491609,pe),t.setNotifyFunc(491610,fe),t.setNotifyFunc(491551,ae),t.setNotifyFunc(491614,W);case 46:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){coreCommon.Observer.publish("AudientResult",e)}),T=function(e){for(var t=0,n=0,r=0;r<e.length;r++)t=e.charCodeAt(r),10===t?n+=2:t<127?n+=1:t>=128&&t<=2047?n+=2:t>=2048&&t<=65535&&(n+=3);return n},O=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().myInfo,r=n.account,a=n.name,I.info("confSignRequest attendee",t.substr(0,3)+"**"+t.substr(5,t.length)),I.info("confSignRequest account",r.substr(0,3)+"**"+r.substr(5,r.length)),I.info("confSignRequest name",a.substr(0,3)+"**"+a.substr(5,a.length)),o=parseInt((new Date).getTime()/1e3),I.info("confSignRequest date",o),e.next=8,b.confSignRequest(t,r,T(r),a,T(a),o);case 8:i=e.sent,I.info("confSignRequest",i),i&&0===i.result?window.CLIENTCONFIG.ISMOBILE?(I.info("mobile sign success"),setTimeout(function(){$dispatch(coreUi.createConfTipMsg([language.SIGNSUCCESS]))},3e3)):(I.info("window sign success"),s=$getState().conf.videoFrameHwnd,c=S.getAvcFrameHandles(),window.CLIENTCONFIG.ISWIN&&(f={frameHwnd:0!==s?s:c,dialog_type:1,content_id:"SIGNSUCCESS"},setTimeout(function(){(0,h.showMessageBox)(f)},3e3)),"mac"===window.CLIENTCONFIG.PLATFORM&&setTimeout(function(){window.Toast(language.SIGNSUCCESS,2,!1,"pcToast","")},3e3)):I.info("confSignRequest failed",i.result);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("confSignRequest data ",t),n=t.param.event_info,r=[],0===n.event_type&&0===n.open_switch&&(E=setInterval(function(){if(r=$getState().conf.memberListInfo,r.length>0)for(var e in r)if(r[e].is_self){O(r[e].number),clearInterval(E);break}},1e3));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),x=function(e){coreCommon.Observer.publish("ChangeDirectionResult",e)},k=function(e){var t=JSON.parse((0,s.default)(e));if(void 0!==t.param.number){var n="";n=t.param.number,t.param.number=handlePhoneNumber(n)}if(I.info("呼叫其他号码结果",t),b&&e.param&&e.param.reason){var r=b.localRemoveAttendee(e.param.number);r&&r.userInfo&&(e.param.userInfo=r.userInfo)}coreCommon.Observer.publish("callAttendeeResult",e)},M=function(e){coreCommon.Observer.publish("McuConfType",e)},R=function(e){coreCommon.Observer.publish("BroadcaseResult",e)},L=function(e){coreCommon.Observer.publish("inviteAttendeeResult",e)},D=function(e){coreCommon.Observer.publish("transferChairman",e)},P=function(e){coreCommon.Observer.publish("UportalBookConfResult",e)},F=function(e){coreCommon.Observer.publish("handleSvcWatchInd",e.param)},U=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("NonChairCtrlcaps",t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("handleSpeakerReport",t),7!==t.param.result&&115!==t.param.result||window.isSupportiDo||coreCommon.Observer.publish("UportalTokenErr",t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),W=function(e){coreCommon.Observer.publish("changeVmrInfoResult",e)},V=(t.getVRMList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreTup.getConfCtrlInstance();case 4:return t=e.sent,e.next=7,coreAccount.getLoginModel();case 7:return n=e.sent,r=n.serverUportalAddress,a=n.serverUportalPort,e.next=12,t.getVRMList(r,a);case 12:o=e.sent,o&&0===o.result?I.info("get vmr list success"):I.info("get vmr list failed, result = "+o.result);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!((n=t.sipLoginOnly)||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.CLIENTCONFIG.ISBIGWIN)){e.next=7;break}return I.info("get conflist is it smc metting or bigwin or sipLoginOnly, return."),e.abrupt("return");case 7:return I.info("get conflist"),r={account_id:$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING?"":$getState().myInfo.account,conf_right:2,include_end:0,page_index:1,page_size:20},e.next=11,coreTup.getConfCtrlInstance();case 11:a=e.sent,a.getConfList(r);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.subscribeConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!(n=t.sipLoginOnly)&&!window.CLIENTCONFIG.ISBIGWIN){e.next=7;break}return I.warn("subscribeConfList is sipLoginOnly or bigwin, so return"),e.abrupt("return");case 7:return I.info("subscribe conf list ,as"),e.next=10,coreTup.getConfCtrlInstance();case 10:r=e.sent,r.subscribeConfList();case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.unSubscribeConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!(n=t.sipLoginOnly)&&!window.CLIENTCONFIG.ISBIGWIN){e.next=7;break}return I.warn("unSubscribeConfList is sipLoginOnly or bigwin, so return"),e.abrupt("return");case 7:return I.info("unsubscribe conf list ,as"),e.next=10,coreTup.getConfCtrlInstance();case 10:r=e.sent,r.unSubscribeConfList();case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.cancelConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("cancel the meeting,[coreConf]"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.cancelConf(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.transferChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("transfer chairman"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.transferChairman(t.confHandle,t.attendeeInfo);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getConfInfoService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("get confInfo"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.getConfInfo(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if(I.info("handleGetConfListRes: "+e.param.result),e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR)return void(window.CLIENTCONFIG.ENABLE_IT_MEETING&&e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED?window.refreshImToken():coreCommon.Observer.publish("UportalTokenErr",e));coreCommon.Observer.publish("ConfList",e.param)}),H=function(e){0!=e.param.result&&I.info("subscribe ConfList fail,error code= ",e.param.result)},$=t.handleGetConfInfoRes=function(e){if(I.info("handleGetConfInfoRes",e.param.result),e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR)return void coreCommon.Observer.publish("UportalTokenErr",e);if(coreCommon.Observer.publish("ConfInfo",e.param),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){var t=e.param?e.param.get_conf_info_result:null,n=t?t.conf_list_info:null;if(n&&n.guest_join_uri&&I.info("handleGetConfInfoRes has guest_join_uri = "+handlePhoneNumber(n.guest_join_uri)),n&&n.chairman_pwd&&I.info("handleGetConfInfoRes has chairman_pwd is "+n.chairman_pwd.substr(0,1)+"****"),t&&t.num_of_addendee>0){for(var r=t.attendee,a="",o=0;o<r.length;o++)a=a+r[o].name.substr(0,1)+"**"+r[o].name.substr(-1)+", ";I.info("handleGetConfInfoRes has attendee_name = "+a)}}(constant.PAIR_STATE.PAIR_SUCCESS===$getState().synergismInfo.pairState||$getState().synergismInfo.isInviteHardTerminal)&&(I.info("confinfo end"),coreConf.getPairConfPasResult(e.param))},G=function(e){if(I.info("handleVMRConfResult: "+e.param.result),7===e.param.result)return window.CLIENTCONFIG.ENABLE_IT_MEETING?void 0:void coreCommon.Observer.publish("UportalTokenErr",e);coreCommon.Observer.publish("VMRConfResult",e.param)},j=function(e){b&&b.handleConfMTnumber(e)},q=(t.handleConfConnected=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=5;break}return e.next=3,b.handleConfConnected(t);case 3:e.next=11;break;case 5:if(I.error("confService is null, handleConfConnected"),!(t&&t.param&&t.param.handle)){e.next=11;break}return e.next=9,coreTup.getConfCtrlInstance();case 9:n=e.sent,n.leaveConf(t.param.handle);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if($getState().synergismInfo.inPairConf)return I.info("in pair conf, start handleConfRightResult"),void coreCommon.Observer.publish("pairInviteJoinConf",e);b&&b.handleConfRightResult(e)}),J=(t.handleConfInfoNotify=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info(" confinfonotify."),!b){e.next=6;break}return e.next=4,b.handleConfInfoNotify(t);case 4:e.next=12;break;case 6:if(I.info(" confinfonotify confservice is null"),!(t&&t.param&&t.param.handle)){e.next=12;break}return e.next=10,coreTup.getConfCtrlInstance();case 10:n=e.sent,n.leaveConf(t.param.handle);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleBigParamResultNotify=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info(" confinfonotify."),!b){e.next=6;break}return e.next=4,_.handleBigParamNotifyResult(t);case 4:e.next=7;break;case 6:I.error("handleHangUpAttendResult,confService is null");case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("enter handleBigConfInfo"),b&&t.param&&t.param.type&&(I.info(" handleBigConfInfo data.param.type = "+t.param.type),b.handleBigConfInfo(t.param.type));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Y=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.isSameGradeMcu,a=n.isSvcConf,o=n.isAudience,0!==t.param.conf_status.num_of_participant||!a&&0!==r&&o){e.next=4;break}return I.info("don't attendeeListUpdate, isSvcConf = "+a+", isSameGradeMcu = "+r+", isAudience = "+o),e.abrupt("return");case 4:if(7!==t.param.result){e.next=9;break}if(I.error("CONFCTRL_E_EVT_ATTENDEE_LIST_UPDATE_IND,error result = 7"),window.isSupportiDo){e.next=9;break}return coreCommon.Observer.publish("UportalTokenErr",t),e.abrupt("return");case 9:if(!b||!b.isFirstGetMemberList||N!==constant.MEETING_NET_TYPE.SMC_MEETING){e.next=20;break}if(!t||0==(t.param.conf_status.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA)){e.next=14;break}b.isFirstGetMemberList=!1,e.next=20;break;case 14:if(!window.CLIENTCONFIG.ISBIGWIN||window.isSupportiDo){e.next=20;break}return coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreCommon.BigwinObserver.publish("OnJoinConfFailed"),coreCommon.BigwinObserver.publish("OnChangeHasSent",!0)),I.error("is Not DataConf, leave conf, confHandle=",confHandle),e.next=20,(0,v.actionLeaveConf)();case 20:b&&b.handleConfAttendeeListUpdate(t);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),K=function(e){b&&b.handleConfBroadCastLocal(e)},z=function(e){b&&b.handleMuteAttendeeResult(e)},Q=function(e){b&&b.handleReleaseChairmanResult(e)},Z=function(e){b&&b.handleReqChairmanResult(e)},X=function(e){b&&b.handleEnterPwdToChairmanResult(e)},ee=function(e){b&&(I.info("changeNickName  receive result"),b.handleChangeNickNameResult(e))},te=(t.handleConfIncoming=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.confctrlInitAtomic.wait();case 2:if(null===b){e.next=11;break}if(I.error("already has conf, reject it"),!(t&&t.param&&t.param.handle)){e.next=10;break}return e.next=7,coreTup.getConfCtrlInstance();case 7:return n=e.sent,e.next=10,n.rejectConf(t.param.handle);case 10:return e.abrupt("return");case 11:return e.next=13,coreAccount.getLoginModel();case 13:r=e.sent,a=r.deployMode,a===constant.MEETING_NET_TYPE.SMC_MEETING?(I.info("conf incoming, handle = "+t.param.handle+", caller is "+handlePhoneNumber(t.param.conf_incoming_ind.number)+", mediaType is "+t.param.conf_incoming_ind.media_type),o={passcode:t.param.conf_incoming_ind.conf_id,confId:t.param.handle,callId:t.param.call_id,confSubject:t.param.conf_incoming_ind.subject,groupUri:t.param.conf_incoming_ind.group_uri,compereNumber:t.param.conf_incoming_ind.number,mediaType:t.param.conf_incoming_ind.media_type},b=new p.default(o)):b=new p.default,i=b.handleConfIncoming(t),i||(b=null,I.error("handleConfIncoming error, set confService null"));case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfBeTransferToConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("CONFCTRL_E_EVT_BE_TRANS_TO_CONF_IND,call transfer to conf, handle = "+t.param.handle+", mediaType is "+t.param.conf_info.media_type),null!==b){e.next=12;break}if(!(coreCall.getCallCount()>1||coreCall.getCallCount()<1)){e.next=10;break}if(I.warn("more than one call or no call, can not transfer to conf,getCallCount = "+coreCall.getCallCount()),!(t&&t.param&&t.param.handle)){e.next=9;break}return e.next=7,coreTup.getConfCtrlInstance();case 7:n=e.sent,n.leaveConf(t.param.handle);case 9:return e.abrupt("return");case 10:b=new p.default(null),b.setIsCallTransToConfTrue();case 12:return e.next=14,b.handleConfBeTransferToConf(t);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.oneKeyEnterConfService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.confctrlInitAtomic.wait();case 2:if(null===b){e.next=6;break}return I.error("conf service is not null in oneKeyEnterConfService"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 6:return b=new p.default(null),e.next=9,b.oneKeyEnterConf(t.confAcs,t.confId,t.confPwd,t.isVideo,t.deviceSet,t.isVMR);case 9:return n=e.sent,n||(b=null,I.error("oneKeyEnterConfService res = "+(0,s.default)(n)+"set confService null")),e.abrupt("return",n);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfInConfListService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===b){e.next=3;break}return I.error("conf service is not null in enterConfInConfList"),e.abrupt("return",!1);case 3:return b=new p.default(null),e.next=6,b.enterConfInConfList(t.confId,t.cycle_conf_id);case 6:return n=e.sent,n||(b=null,I.error("enterConfInConfListService fail,set confService null")),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===b){e.next=3;break}return I.error("conf service is not null in enterConfByIdOnlyService"),e.abrupt("return",!1);case 3:return b=new p.default(null),e.next=6,b.enterConfByIdOnly(t.confId,t.confPas,t.deviceSet);case 6:return n=e.sent,r=n.errorCode,0!==r&&(b=null,I.error("enterConfByIdOnlyService fail,set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.rejectConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("rejectConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.rejectConf(t);case 5:if(!(n=e.sent)||0!==n.result){e.next=12;break}return I.info("reject conf success,set confservice null"),b=null,e.abrupt("return",!0);case 12:return b=null,I.info("reject conf failed,set confservice null"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.acceptConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("acceptConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.acceptConf(t.confHandle,t.isVideoType);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getConfMemberListContent=function(){return null===b?void I.error("getConfMemberListContent no conf service exist"):b.getConfMemberListContent()},t.leaveConf=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("leaveConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.leaveConf(n);case 5:return t=e.sent,t&&0===t.result?(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_LEAVE,params:[1]}),coreConf.getConfInfoFromDb(),I.info("leave conf success,set confservice null")):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_LEAVE,params:[0,t.result]}),I.info("leave conf failed,set confservice null")),b=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.broadcastAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("broadcastAttendee no conf service exist"),e.abrupt("return");case 3:return $dispatch(coreUi.changeIsBroadByChairman(t.isBroadcast)),I.info("broadcastAttendee,isBroadcast is "+t.isBroadcast+",number is "+handlePhoneNumber(t.number)),e.next=7,b.broadcastAttendee(t.isBroadcast,t.number);case 7:if(!(n=e.sent)||0!==n.result){e.next=13;break}return I.info("broadcastAttendee success"),e.abrupt("return",n);case 13:return I.info("broadcastAttendee failed"),e.abrupt("return");case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfEnded=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.info("handleConfEnded confservice is null"),e.abrupt("return");case 3:return e.next=5,b.handleConfEnded(t);case 5:n=e.sent,n&&(_.beLeaveDataConf(),b=null,I.info("handleConfEnded,set confservice null"),coreConf.getConfInfoFromDb());case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleCallEndedPostConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=5;break}return e.next=3,b.handleCallEndedForOneKeyEnterConf(t);case 3:n=e.sent,n?(b=null,I.info("handleCallEndedPostConf,set confservice null")):I.warn("handleCallEndedPostConf callid is differ, no need to deal");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleSvcSeessionModify=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("handleSvcSeessionModify no conf service exist"),e.abrupt("return");case 3:b.handleSvcSeessionModify(t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){coreCommon.Observer.publish("HandleSvcConfWatchRet",e)}),ne=function(e){b?b.handleVideoWatchResult(e):I.error("handleVideoWatchResult,confService is null")},re=function(e){b?b.handleLockConfResult(e):I.error("handleLockConfResult,confService is null")},ae=function(e){b?b.handleHangUpAttendResult(e):I.error("handleHangUpAttendResult,confService is null")},oe=function(e){b?b.handleHandupAttendeeResult(e):I.error("handleHandupAttendeeResult,confService is null")},ie=function(e){if(7===e.param.result&&!window.isSupportiDo)return void coreCommon.Observer.publish("UportalTokenErr",e);b&&b.handleConfSpeakerNotify(e)},se=(t.handleTransToConfResult=function(e){b&&b.handleTransToConfResult(e)},t.updateConfMemberList=function(e){b&&b.updateConfMemberList(e)},t.sendWatchSvcRequest=function(e){if(b)return b.sendWatchSvcRequest(e.attendeeList,e.selfNum);I.info("sendWatchSvcRequest confService is null,selfNum="+handlePhoneNumber(e.selfNum))},t.confctrlWatchAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("confctrlWatchAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.confctrlWatchAttendee(t);case 5:if(n=e.sent,r=me(),!n||0!==n.result){e.next=13;break}return coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,extraTrackKey:t,params:[r,handlePhoneNumber(t)]}),I.info("confctrlWatchAttendee success"),e.abrupt("return",n);case 13:return a=[r,handlePhoneNumber(t),0],n&&a.push(n.result),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,params:a}),I.info("confctrlWatchAttendee failed"),e.abrupt("return");case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){I.info("handleMultiViewBroadcast start"),coreCommon.Observer.publish("onMultiViewBroadcast",e.param)}),ce=function(e){I.info("handleCancelMultiViewBroadcast start"),coreCommon.Observer.publish("onMultiViewBroadcast",-1)},ue=(t.changeActiveDirection=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("changeActiveDirection no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.changeActiveDirection(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cloudRecordRequest=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=3;break}return I.error("cloudRecordRequest no conf service exist"),e.abrupt("return");case 3:return e.next=5,b.cloudRecordRequest(t.messageId,t.switchType);case 5:if(n=e.sent,I.info("reacrd cloudRecordRequest[3] res:",(0,s.default)(n)),!n||0!==n.result){e.next=12;break}return I.info("reacrd success"),e.abrupt("return",n);case 12:I.info("reacrd failed",n.rsp),g.handleShowErrorMsgBox(language.START_PAUSE_RECORDING_FAILED);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){I.info("reacrd start/stop reacrd result [1]",(0,s.default)(e)),coreCommon.Observer.publish("setRecordVideoResult",e)}),fe=function(e){I.info("reacrd start/stop reacrd result [1]",(0,s.default)(e)),coreCommon.Observer.publish("recordVideoResult",e)},le=function(e){I.info("reacrd handleConfStateDirectBroadCastIndresult [1]",(0,s.default)(e)),coreCommon.Observer.publish("confStateDirectBroadCastIndresult",e)},de=function(e){I.info("reacrd handleRecordVideoStatusChairmanIndResult [1]",(0,s.default)(e)),coreCommon.Observer.publish("recordVideoStatusChairmanIndResult",e)},pe=function(e){coreCommon.Observer.publish("cancelConf",e)},he=(t.getIsSmcFirstRequestCharimanRest=function(){return null!==b&&b.getIsSmcFirstRequestCharimanRest()},t.setIsSmcFirstRequestCharimanRest=function(e){null!==b?b.setIsSmcFirstRequestCharimanRest(e):I.error("setIsSmcFirstRequestCharimanRest conservice is null")},t.getIsFirstEnterConf=function(){return null!==b&&b.getIsFirstEnterConf()},t.setIsFirstEnterConf=function(e){null!==b?b.setIsFirstEnterConf(e):I.error("setIsFirstEnterConf conservice is null")},t.getIsRecall=function(){return null!==b&&b.getIsRecall()},t.getUpdatedParticipants=function(){if(null!==b)return b.getUpdatedParticipants()},t.getSavedRecallInfo=function(){return null===b?"":b.getSavedRecallInfo()},function(e){b?b.handleConfstateLock(e):I.error("handleConfstateLock, confService is null")}),me=t.getCurrentConfId=function(){if(null===b)return"";var e=b.getCurrentConfId();return isNullOrEmpty(e)&&(e=""),e};t.setIsAvcMultiViewBroadcast=function(e){if(null===b)return void I.error("confctrlWatchAttendee no conf service exist");b.setIsAvcMultiViewBroadcast(e)},t.getIsAvcMultiViewBroadcast=function(){return null!==b&&b.getIsAvcMultiViewBroadcast()},t.isVideoConf=function(){return!!b&&b.isVideoConf()},t.isDataConf=function(){return!!b&&b.isDataConf()},t.isSvcConf=function(){return!!b&&b.getIsSvc()},t.getSsrcRange=function(){return b?b.getSsrcRange():{}},t.getInfoOfConf=function(e){return b?b.getConfInfo(e):null},t.isUserEndConf=function(){return!!b&&b.isUserEndConf()},t.isMemberListNull=function(){return!b||b.isMemberListNull()},t.confHandUp=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toHandUp,r=t.attendeeInfo,I.info("confHandUp,toHandUp is :",n),e.next=4,b.confHandUp(n,r);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getHandUpState=function(e){var t=$getState(),n=t.conf.memberListInfo,r=n.filter(function(t){return t.number===e}),a=0;return isNullOrEmpty(r)||(a=r[0].hand_state),a},t.showConfMemberList=function(){I.info("userClick  showshow conf member list btn");var e=$getState(),t=e.conf.isShowMemberListNew;window.isUserActiveClose=!!t;var n=win.getBounds(),r=n.x,a=n.y,o=n.width,i={x:parseInt(r+o),y:a};coreConf.handleShowMemberList(i)},t.changeVmrInfo=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p.default(t,!1),I.info("change vmr info,vmr conf id is :",t.vmrId),e.next=4,n.changeVmrInfo(t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},356:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dealWithSipNumber=t.setUnreadNumber=t.handleChangeBroadCastInfo=t.revertMemberToMuteState=t.setMemberToMuteState=t.calcMemberCount=t.dealWithConfSpeakerList=t.searchContactName=t.searchContact=t.updateMemberDetail=t.searchMemberDetail=t.attendeeSortFunc=t.unique=t.svcConfAttendeeSortFunc=t.dealWithMemberListDataRest=t.dealWithMemberListDataiDo=t.dealItShortNumber=void 0;var a=n(142),o=r(a),i=n(69),s=r(i),c=n(135),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=n(335),m=n(215),v=n(200),g=n(242),C=coreLogger.getLogger("conf")("logic/memberlist"),S=t.dealItShortNumber=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=34;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=3;break}return e.abrupt("return");case 3:for(r=$getState().myInfo,a={},o=0;o<t.length;o++)i="",t[o].userInfo&&(i=t[o].userInfo.account),t[o].number&&t[o].number.indexOf("@")>0&&(t[o].number=t[o].number.split("@")[0]),i&&t[o].userInfo.espacenumber&&t[o].userInfo.short_phone&&t[o].userInfo.espacenumber!==t[o].userInfo.short_phone&&t[o].number===t[o].userInfo.espacenumber&&(a[i]||(a[i]={},a[i].userInfo=t[o].userInfo));if(!n){e.next=18;break}e.t0=l.default.keys(a);case 8:if((e.t1=e.t0()).done){e.next=16;break}if(s=e.t1.value,a[s].userInfo.short_phone!==n.number){e.next=14;break}return C.info("data conf list -+--------already have this memeber:"+handlePhoneNumber(n.number)),n="",e.abrupt("return",!1);case 14:e.next=8;break;case 16:e.next=33;break;case 18:e.t2=l.default.keys(a);case 19:if((e.t3=e.t2()).done){e.next=33;break}c=e.t3.value,u=0;case 22:if(!(u<t.length)){e.next=31;break}if(t[u].number!==a[c].userInfo.short_phone){e.next=28;break}return a[c].userInfo.name=t[u].name,C.info("data+--------- findX---"+handlePhoneNumber(t[u].number)),t.splice(u,1),e.abrupt("break",31);case 28:u++,e.next=22;break;case 31:e.next=19;break;case 33:C.info("data conf list-+---------"+t.length);case 34:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),w=(t.dealWithMemberListDataiDo=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.default)([],$getState().conf.memberListInfo),r=$getState().conf.selfRole,a=w(t,n),o=a.enterMemberNames,i=a.leaveMemberNames,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealWithMemberListDataRest=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,p,h,m;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.default)([],$getState().conf.memberListInfo),r=$getState().conf.selfRole,a=_(t,n),o=a.enterMemberNames,i=a.leaveMemberNames,s=t.filter(function(e){return!n.some(function(t){return t.number===e.number})}),c=!1,0===n.length&&s.length>0&&!r&&(c=!0),e.next=8,I(s,n);case 8:return f=e.sent,d=f.addMemberNames,window.CLIENTCONFIG.ENABLE_IT_MEETING&&S(n),p=d?d.substring(0,d.length-1):"",h=o?o.substring(0,o.length-1):"",m=i?i.substring(0,i.length-1):"",N(c,p,h,m),e.abrupt("return",{currentMemberList:n});case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e,t){for(var n=$getState().conf.selfRole,r=($getState().login.sipLoginOnly,new Array),a=!1,o=$getState().conf.isConfMicMute,i=e?e.length:0,s=0;s<i;++s){if(e[s].is_self){$dispatch(coreUi.changeSelfNumInconf(e[s].number)),$dispatch(coreUi.changeConfMicMute(e[s].is_mute)),1===e[s].role&&1!==n?($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1)):1===n&&1!==e[s].role&&($dispatch(coreUi.changeConfRole(0)),coreConf.changeConfSelfRole(0));var c=e[s].is_mute?language.YOU_HAVE_BEEN_MUTED:language.YOU_HAVE_BEEN_UNMUTED,u=e[s].is_mute?"YOU_HAVE_BEEN_MUTED":"YOU_HAVE_BEEN_UNMUTED";o===e[s].is_mute||0===o&&0===e[s].is_mute||("win"===window.CLIENTCONFIG.PLATFORM?g.NativeInterface.showMessageBox(0,{dialog_type:1,content_id:u,isOverRide:0}):window.CLIENTCONFIG.ISMOBILE&&!window.isShowMicMutips?window.JSToNativeToast(5e3,c,0,"center"):"mac"===window.CLIENTCONFIG.PLATFORM&&window.ToastNew(c,5))}e[s].is_mute&&(e[s].is_speaking=!1,e[s].speak_valume=0);var f=b(e[s].state);e[s].state=f;for(var l=0;l<t.length;l++){t[l];e[s].number===t[l].number&&(!0,t[l].userInfo.name=e[s].name,e[s].userInfo=t[l].userInfo)}if(isNullOrEmpty(e[s].userInfo)){var d={name:e[s].name,number:e[s].number,account:void 0,email:"",sms:""};window.CLIENTCONFIG.ENABLE_IT_MEETING&&x(e[s].number,e[s].name),e[s].userInfo=d}var p=0!=(e[s].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[s].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(1===e[s].is_broadcast&&p){var h={name:e[s].name,number:e[s].number,is_speaker:e[s].is_speaking,role:e[s].role,is_mute:e[s].is_mute,is_self:e[s].is_self};r.push(h),a=!0,!1===$getState().conf.broadCastInfo.isBroadCast&&$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))}}window.CLIENTCONFIG.ENABLE_IT_MEETING&&(S(e),$getState().login.isSupportAS||function(){for(var n=/^\+(86|991)/,r=0;r<t.length;r++){(function(r){var a=t[r]&&t[r].number?t[r].number:"";if(""===a)return"continue";a=a.replace(n,""),!e.some(function(e){var t=e&&e.number?e.number:"";return""!==(t=t.replace(n,""))&&t===a})&&(t[r].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,e.push(t[r]))})(r)}}());var m={isBroadCast:a,broadCastList:r};return C.info("isBroadCast ido =",a),P(m),{enterMemberNames:"",leaveMemberNames:"",memberList:e}}),_=function(e,t){for(var n=$getState().conf.selfRole,r=($getState().login.sipLoginOnly,""),a="",o=new Array,i=!1,s=!1,c=t?t.length:0,u=$getState().conf.isConfMicMute,f=0;f<c;++f){var l=0,d=e?e.length:0;s=!1;for(var p=0;p<d;++p){if(t[f].number===e[p].number){s=!0;var h=b(e[p].state);t[f].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||h!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||e[p].is_self||(C.info("member entry: ",handlePhoneNumber(t[f].number)),r+=t[f].userInfo.name+","),t[f].hand_state=e[p].hand_state,t[f].is_deaf=e[p].is_deaf,t[f].is_mute=e[p].is_mute,t[f].media_type=e[p].media_type,t[f].role=e[p].role,t[f].state=h,t[f].is_self=e[p].is_self,t[f].participant_id=e[p].participant_id,t[f].is_broadcast=e[p].is_broadcast,t[f].userInfo.name=e[p].name;var m=0!=(e[p].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[p].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(1===e[p].is_broadcast&&m){var v={name:e[p].name,number:e[p].number,is_speaker:e[p].is_speaking,role:e[p].role,is_mute:e[p].is_mute,is_self:e[p].is_self};o.push(v),i=!0}if(e[p].is_self){$dispatch(coreUi.changeSelfNumInconf(e[p].number)),$dispatch(coreUi.changeConfMicMute(e[p].is_mute)),1===e[p].role&&1!==n?($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1)):1===n&&1!==e[p].role&&($dispatch(coreUi.changeConfRole(0)),coreConf.changeConfSelfRole(0));var S=e[f].is_mute?language.YOU_HAVE_BEEN_MUTED:language.YOU_HAVE_BEEN_UNMUTED,w=e[f].is_mute?"YOU_HAVE_BEEN_MUTED":"YOU_HAVE_BEEN_UNMUTED";u===e[f].is_mute||0===u&&0===e[f].is_mute||("win"===window.CLIENTCONFIG.PLATFORM?g.NativeInterface.showMessageBox(0,{dialog_type:1,content_id:w,isOverRide:0}):window.CLIENTCONFIG.ISMOBILE&&!window.isShowMicMutips?window.JSToNativeToast(5e3,S):"mac"===window.CLIENTCONFIG.PLATFORM&&window.ToastNew(S,5))}e[p].is_mute&&(t[f].is_speaking=!1,t[f].speak_valume=0);break}l++}l>=d&&(t[f].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&(C.info("member leave: ",handlePhoneNumber(t[f].number)),a+=t[f].userInfo.name+","),t[f].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,t[f].is_speaking=!1,t[f].speak_valume=0,s=!0),!1===s&&(t[f].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,t[f].is_speaking=!1,t[f].speak_valume=0)}var _={isBroadCast:i,broadCastList:o};return C.info("isBroadCast= rest ",i),P(_),{enterMemberNames:r,leaveMemberNames:a}},I=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,c,u,f,d,p;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",a=$getState().conf.selfRole,t)for(o=0;o<t.length;++o)C.info("member added: ",handlePhoneNumber(t[o].number)),t[o].is_self&&($dispatch(coreUi.changeConfMicMute(t[o].is_mute)),1===t[o].role&&1!==a&&($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1))),i={name:t[o].name,account:void 0,email:"",sms:""},x(t[o].number,t[o].name),c=b(t[o].state),c!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||t[o].is_self||(r+=i.name+","),u={name:t[o].name,number:t[o].number,userInfo:i,role:t[o].role,is_mute:t[o].is_mute,is_deaf:t[o].is_deaf,state:c,hand_state:t[o].hand_state,media_type:t[o].media_type,is_self:t[o].is_self,is_speaking:!1,speak_volume:0,participant_id:t[o].participant_id,is_broadcast:0},S(n,u)&&(C.info("data conf list add------------"+handlePhoneNumber(u.number)),n.push(u)),t[o].is_self&&$dispatch(coreUi.changeConfMicMute(t[o].is_mute));if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(f=$getState().conf.confServerId,window.confConnectInfo&&f&&1===window.confConnectInfo[f])){for(window.confConnectInfo[f]=2,d=[],p=0;p<n.length;p++)d[p]={},d[p].contactsId=n[p].userInfo.account,d[p].calleeNumber=n[p].number,d[p].displayName=n[p].name,n[p].userInfo.name&&(d[p].displayName=n[p].userInfo.name),C.info("data conf list add------------"+handlePhoneNumber(d[p].displayName));window.confRecordNotify(f,$getState().conf.confSubject,"","",(0,s.default)(d))}return e.abrupt("return",{addMemberNames:r});case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),b=function(e){return 0===e?constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF:1===e||2===e?constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING:constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT},N=function(e,t,n,r){var a="",i=$getState(),s=i.conf.msgList,c=[].concat((0,o.default)(s));e&&t?(a={attendees:t,type:constant.CONF_MSG_TYPE.TYPE_IN_CONFERENCE},c.find(function(e){return e.type===a.type})?C.info("repeat msg, ignor..."):(E(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(language.YOU_JOIN_CONFERENCE,2,null,!1))):t&&(C.info("new add member: ",handlePhoneNumber(t)),a={attendees:t,type:constant.CONF_MSG_TYPE.TYPE_ENTER_CONFERENCE},c.find(function(e){return e.type===a.type})?C.info("repeat new add msg, ignor..."):(E(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(t+language.JOINED_MEETING,2,null,!1))),n&&(a={attendees:n,type:constant.CONF_MSG_TYPE.TYPE_ENTER_CONFERENCE},E(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(n+language.JOINED_MEETING,2,null,!1)),r&&(a={attendees:r,type:constant.CONF_MSG_TYPE.TYPE_LEAVE_CONFERENCE},E(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(r+language.LEAVE_CONFERENCE,2,null,!1)),$dispatch(coreUi.updateConfMessage(c))},E=function(e,t){t.length>=3&&t.shift(),t.push(e)},y=(t.svcConfAttendeeSortFunc=function(e,t){var n=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;e.userInfo.q_pin_yin&&t.userInfo.q_pin_yin;return e.is_self<t.is_self?1:n&&e.state>t.state?1:-1},t.unique=function(e){var t={};return e.reduce(function(e,n){return t[n.number]||(t[n.number]=e.push(n)),e},[])},t.attendeeSortFunc=function(e,t){var n=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,r=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING;e.userInfo.q_pin_yin&&t.userInfo.q_pin_yin;return e.role>t.role?-1:e.role<t.role?1:e.is_self>t.is_self?-1:e.is_self<t.is_self?1:n&&e.state>t.state?1:n&&e.state<t.state?-1:r&&e.state<t.state?1:r&&e.state>t.state?-1:T(e,t)},function(e){var t="";try{e&&e.charCodeAt(0)<122&&e.charCodeAt(0)>48&&(t=e)}catch(e){C.error("checkPinYin error =",e)}return t}),T=function(e,t){var n=e.userInfo.name.charCodeAt(0)<122&&e.userInfo.name.charCodeAt(0)>48,r=t.userInfo.name.charCodeAt(0)<122&&t.userInfo.name.charCodeAt(0)>48;if(n>r)return-1;if(n<r)return 1;if(n)return O(e.userInfo.name,t.userInfo.name);var a=window.CLIENTCONFIG.ENABLE_IT_MEETING,o=a?y(e.userInfo.q_pin_yin):e.userInfo.q_pin_yin,i=a?y(t.userInfo.q_pin_yin):t.userInfo.q_pin_yin;return A(e.userInfo.name,t.userInfo.name,o,i)},O=function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n>r?1:n<r?-1:0},A=function(e,t,n,r){n||(n=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.pinyinUtil.getNamePinyin(e):window.pinyinUtil.getPinyin(e)),r||(r=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.pinyinUtil.getNamePinyin(t):window.pinyinUtil.getPinyin(t));var a=n&&r;return a&&n>r?1:a&&n<r?-1:e>t?-1:e<t?1:0},x=t.searchMemberDetail=function(e,t){var n=void 0;M(e,t).then(function(r){r&&1<=r.length&&(n=(0,u.default)({},r[0]),k(n,e,t))})},k=t.updateMemberDetail=function(e,t,n){var r=[].concat((0,o.default)($getState().conf.memberListInfo)),a=r.findIndex(function(e){return e.number!==e.name&&e.number===t&&(""===n||""!==n&&e.name===n)});-1!==a?(C.info("update userInfo after find: "+handlePhoneNumber(t)),(0,u.default)(r[a],{userInfo:e}),$dispatch(coreUi.changeMemberListInfo(r)),coreConf.updateConfMemberList(r),isNullOrEmpty($getState().conf.searchText)||(0,v.searchMemberList)($getState().conf.searchText,r)):C.info("can not find member in memberlist"+handlePhoneNumber(t))},M=t.searchContact=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,f,d,p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.split("@")[0].replace("sip:",""),C.info("query contact from local by number: "+handlePhoneNumber(t)),e.next=4,coreDb.queryContactByNumberAccurate(t);case 4:if(r=e.sent,a=!1,r&&r.length>0?(C.info("query from local success: "+r.length),r.length===r.reduce(function(e,t,n,r){return e+(t.account===(r[n+1]||{}).account?1:0)},1)&&(C.info("the account of query results is same, get one of the info"),o=r.filter(function(e){return""!==e.contact_id}),r=o.length?o.slice(0,1):r.slice(0,1)),!isNullOrEmpty(n)&&r[0]&&(r[0].name=n),r.length>1?r=[]:r.length<1&&(p?C.info("the account is anonymous, don't query from server"):(C.info("the account is not anonymous, will query from server"),a=!0))):p?C.info("the account is anonymous, don't query from server"):(C.info("the account is not anonymous, will query from server"),a=!0),!a){e.next=23;break}return C.info("can not find in local, query contact from server"),e.next=11,coreContact.searchServerContact({query_key:t});case 11:if(i=e.sent,s=i.userInformationList,!(c=s)){e.next=23;break}return C.info("query contact from server success: "+c.length),(0,u.default)(r,c),e.next=19,coreAccount.getLoginModel();case 19:f=e.sent,d=f.isSupportAS,d?(r=r.filter(function(e){return e.bind_no===t}),!isNullOrEmpty(n)&&r[0]&&(r[0].name=n)):n&&n!==t&&(r=r.filter(function(e){return e.name===n})),r.length>1&&(r=[]);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),R=(t.searchContactName=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.toString(),r=t.toString(),!window.skipLogin){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,coreDb.queryContactByPhonenumberAccurate(t);case 6:if(!(a=e.sent)||!a[0]){e.next=13;break}C.info("find in local success"),r=a[0].name,a.length>1&&a.forEach(function(e){""===e.account&&(r=e.name)}),e.next=18;break;case 13:return C.info("can not find in local, query contact from server"),e.next=16,coreContact.queryServerContact(t);case 16:o=e.sent,o.param&&o.param.name&&(i=o.param.name)&&(r=i);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealWithConfSpeakerList=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,p,g,S;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.conf.memberListInfo,0!==r.length){e.next=3;break}return e.abrupt("return");case 3:for(a="",void 0===t.speaker&&(0,u.default)(t,{speaker:[]}),L(r);t.speaker.length>2;)t.speaker.pop();o=0;case 8:if(!(o<t.speaker.length)){e.next=34;break}if(!(t&&t.speaker[o]&&isNullOrEmpty(t.speaker[o].number))){e.next=12;break}return C.warn("speaker num is null, so continue"),e.abrupt("continue",31);case 12:i=!1,s=0;case 14:if(!(s<r.length)){e.next=23;break}if(t.speaker[o].number!==r[s].number){e.next=20;break}return(0,u.default)(t.speaker[o],{name:r[s].userInfo.name?r[s].userInfo.name:r[s].name,account:r[s].userInfo.account,isSelf:r[s].is_self}),r[s]=(0,u.default)({},r[s],{is_speaking:t.speaker[o].is_speaking,speak_valume:t.speaker[o].speak_valume}),i=!0,e.abrupt("break",23);case 20:s++,e.next=14;break;case 23:if(i){e.next=29;break}return C.info("conf member list do not have speaker detail, search it, numer is "+handlePhoneNumber(t.speaker[o].number)),e.next=27,M(F(t.speaker[o].number));case 27:c=e.sent,c&&1<=c.length&&(f=$getState(),d=f.myInfo.account,(0,u.default)(t.speaker[o],{name:c[0].name,account:c[0].account,isSelf:d===c[0].account}));case 29:(0,u.default)(t.speaker[o],{isToMuted:!1}),a+=handlePhoneNumber(t.speaker[o].number)+"#"+t.speaker[o].name.substr(0,1)+"**"+t.speaker[o].name.substr(-1)+" # ";case 31:o++,e.next=8;break;case 34:C.info("dealWithConfSpeakerList: "+a),$dispatch(coreUi.updateConfSpeaker(t)),window.CLIENTCONFIG.ISMOBILE&&$getState().conf.isSvcConf&&window.SvcSpeakerToNative(t),window.CLIENTCONFIG.ISMOBILE&&(p=R(t),isNullOrEmpty(p)?window.showCallTips(""):(g=language.ON_SPEAKING.format(p),window.showCallTips(g))),$dispatch(coreUi.changeMemberListInfo(r)),$getState().conf.isSvcConf&&(S=R(t),window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN?m.SvcAtdManager.handleSpeakerNotify(S):h.SvcAttendanceManager.handleSvcSpeakerNotify()),isNullOrEmpty($getState().conf.searchText)||(0,v.searchMemberList)($getState().conf.searchText,r);case 41:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if(e){var t=void 0;return 0!==e.num_of_speaker&&e.speaker instanceof Array&&(t=e.speaker[0].name),t}}),L=function(e){for(var t=0;t<e.length;t++)e[t]=(0,u.default)({},e[t],{is_speaking:!1,speak_valume:0})},D=(t.calcMemberCount=function(e){for(var t=0,n=0;n<e.length;n++)e[n].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&t++;C.info("calcMemberCount in "),m.SvcAtdManager.setConfUserInfo(t);var r=t.toString()+"/"+e.length.toString();$dispatch(coreUi.changeMeetingMembers(r)),C.info("current member count: "+r)},t.setMemberToMuteState=function(e,t){var n=$getState(),r=n.conf.memberListInfo,a=(0,u.default)([],r);C.info("set attendee tomute state, attendee="+handlePhoneNumber(e)+", isMute="+t);for(var o=0;o<a.length;++o)if(a[o].number===e){a[o].is_mute=t?constant.MUTE_STATE.MUTE_STATE_TOMUTE:constant.MUTE_STATE.MUTE_STATE_TOUNMUTE;break}$dispatch(coreUi.changeMemberListInfo(a)),isNullOrEmpty($getState().conf.searchText)||(0,v.searchMemberList)($getState().conf.searchText,a)},t.revertMemberToMuteState=function(e){var t=$getState(),n=t.conf.memberListInfo,r=(0,u.default)([],n);C.info("revert attendee tomute state, isMute="+e);for(var a=0;a<r.length;++a)r[a].is_mute>1&&(r[a].is_mute=e?constant.MUTE_STATE.MUTE_STATE_UNMUTE:constant.MUTE_STATE.MUTE_STATE_MUTE);$dispatch(coreUi.changeMemberListInfo(r)),isNullOrEmpty($getState().conf.searchText)||(0,v.searchMemberList)($getState().conf.searchText,r)},function(e,t){var n="";if(t.isBroadCast)if(t.broadCastList&&!isNaN(t.broadCastList.length)&&t.broadCastList.length>0)for(var r=0;r<t.broadCastList.length;r++)n=n+";ssrc"+(t.broadCastList[r].name.length>1?t.broadCastList[r].name.substr(0,1)+"**"+t.broadCastList[r].name.substr(-1):"**")+",number:"+handlePhoneNumber(t.broadCastList[r].number)+",is_self:"+t.broadCastList[r].is_self;else n=!1;C.info(e,n)}),P=t.handleChangeBroadCastInfo=function(e){if(window.CLIENTCONFIG.ISMOBILE){D("handleChangeBroadCastInfo",e);var t=$getState().conf.broadCastInfo,n=!1;if(t.isBroadCast!==e.isBroadCast?n=!0:t.broadCastList.length>0&&e.broadCastList.length>0?t.broadCastList[0].number!==e.broadCastList[0].number&&(n=!0):t.broadCastList.length!==e.broadCastList.length&&(n=!0),C.info("handleChangeBroadCastInfo flag ",n),n){var r=JSON.parse((0,s.default)(e));if(void 0!==r.broadCastList){var a="",o="";r.broadCastList.forEach(function(e){void 0!==e.name&&(a=e.name,e.name=handlePhoneNumber(a)),void 0!==e.number&&(o=e.number,e.number=handlePhoneNumber(o))})}if(C.info("handleChangeBroadCastInfo broadCastInfo ",(0,s.default)(r)),e.isBroadCast)for(var i=0;i<e.broadCastList.length;i++){var c=language.SVC_BROAD_CAST.format(e.broadCastList[i].name);C.info("JSToNativeToast isself  tempLanguage ",c.substr(0,5)+"***");var u=$getState().conf.isSvcConf;window.CLIENTCONFIG.ISMOBILE&&u&&window.JSToNativeToast(2e3,c),1!==e.broadCastList[i].is_self&&window.broadCastInfo(e)}else window.broadCastInfo(e)}}if(window.CLIENTCONFIG.ISMAC){var f=$getState().conf.broadCastInfo,l=!1;if(f.isBroadCast!==e.isBroadCast?l=!0:f.broadCastList.length>0&&e.broadCastList.length>0?f.broadCastList[0].number!==e.broadCastList[0].number&&(l=!0):f.broadCastList.length!==e.broadCastList.length&&(l=!0),e.isBroadCast&&l)for(var d=0;d<e.broadCastList.length;d++){var p=language.SVC_BROAD_CAST.format(e.broadCastList[d].name),h=$getState().conf.isSvcConf;h&&(C.info("mac broad toast message : ",p),window.Toast(p,5,!1,"pcToast",""))}}$dispatch(coreUi.changeBroadCastInfo(e))},F=(t.setUnreadNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{account:"",group_id:""},t=arguments[1];if(coreConf.isInConf()||!(coreCall.getCallCount()<=0)){var n=$getState(),r=n.conf.groupId,a=n.call,o=a.userInfo,i=a.screenState,s=n.recent.currentRecentInfo,c=e.account,u=e.group_id;r&&u&&r===u?(s&&s.group&&s.group.group_id===r&&("min"!==i&&"extra"!==i||(t=0)),C.info("set conf page unread num:"+t),0===t?$dispatch(coreUi.changeHasUnreadMsg(!1)):$dispatch(coreUi.changeHasUnreadMsg(!0))):c&&o&&c===o.account&&(s&&s.contact&&s.contact.account===c&&("min"!==i&&"extra"!==i||(t=0)),C.info("set call page unread num:"+t),0===t?$dispatch(coreUi.changeHasUnreadMsg(!1)):$dispatch(coreUi.changeHasUnreadMsg(!0)))}},t.dealWithSipNumber=function(e){if(isNullOrEmpty(e))return C.warn("number is empty. "),"";var t=e.toString();return-1!==t.indexOf("sip:")&&(t=t.substring(4)),-1!==t.indexOf("@")&&(t=t.split("@")[0]),t})},532:function(e,t,n){(function(e,r){var a;!function(o){function i(e){throw new RangeError(M[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(k,"."),r+s(e.split("."),t).join(".")}function u(e){for(var t,n,r=[],a=0,o=e.length;a<o;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<o?(n=e.charCodeAt(a++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--)):r.push(t);return r}function f(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?L(e/E):e>>1,e+=L(e/t);e>R*b>>1;r+=_)e=L(e/R);return L(r+(R+1)*e/(e+N))}function h(e){var t,n,r,a,o,s,c,u,d,h,m=[],v=e.length,g=0,C=T,S=y;for(n=e.lastIndexOf(O),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),m.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<v;){for(o=g,s=1,c=_;a>=v&&i("invalid-input"),u=l(e.charCodeAt(a++)),(u>=_||u>L((w-g)/s))&&i("overflow"),g+=u*s,d=c<=S?I:c>=S+b?b:c-S,!(u<d);c+=_)h=_-d,s>L(w/h)&&i("overflow"),s*=h;t=m.length+1,S=p(g-o,t,0==o),L(g/t)>w-C&&i("overflow"),C+=L(g/t),g%=t,m.splice(g++,0,C)}return f(m)}function m(e){var t,n,r,a,o,s,c,f,l,h,m,v,g,C,S,N=[];for(e=u(e),v=e.length,t=T,n=0,o=y,s=0;s<v;++s)(m=e[s])<128&&N.push(D(m));for(r=a=N.length,a&&N.push(O);r<v;){for(c=w,s=0;s<v;++s)(m=e[s])>=t&&m<c&&(c=m);for(g=r+1,c-t>L((w-n)/g)&&i("overflow"),n+=(c-t)*g,t=c,s=0;s<v;++s)if(m=e[s],m<t&&++n>w&&i("overflow"),m==t){for(f=n,l=_;h=l<=o?I:l>=o+b?b:l-o,!(f<h);l+=_)S=f-h,C=_-h,N.push(D(d(h+S%C,0))),f=L(S/C);N.push(D(d(f,0))),o=p(n,g,r==a),n=0,++r}++n,++t}return N.join("")}function v(e){return c(e,function(e){return A.test(e)?h(e.slice(4).toLowerCase()):e})}function g(e){return c(e,function(e){return x.test(e)?"xn--"+m(e):e})}var C=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var S,w=2147483647,_=36,I=1,b=26,N=38,E=700,y=72,T=128,O="-",A=/^xn--/,x=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=_-I,L=Math.floor,D=String.fromCharCode;S={version:"1.4.1",ucs2:{decode:u,encode:f},decode:h,encode:m,toASCII:g,toUnicode:v},void 0!==(a=function(){return S}.call(t,n,t,e))&&(e.exports=a)}()}).call(t,n(282)(e),n(154))},533:function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},534:function(e,t,n){"use strict";t.decode=t.parse=n(535),t.encode=t.stringify=n(536)},535:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var f=0;f<u;++f){var l,d,p,h,m=e[f].replace(s,"%20"),v=m.indexOf(n);v>=0?(l=m.substr(0,v),d=m.substr(v+1)):(l=m,d=""),p=decodeURIComponent(l),h=decodeURIComponent(d),r(i,p)?a(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},536:function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(i(e),function(i){var s=encodeURIComponent(a(i))+n;return o(e[i])?r(e[i],function(e){return s+encodeURIComponent(a(e))}).join(t):s+encodeURIComponent(a(e[i]))}).join(t):s?encodeURIComponent(a(s))+n+encodeURIComponent(a(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},552:function(e,t){},553:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){e.copy(t,n)}var o=n(145).Buffer,i=n(554);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)a(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},554:function(e,t){},555:function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var a=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(556),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(154))},556:function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[c]=r,s(c),c++}function a(e){delete u[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(f)setTimeout(i,0,e);else{var t=u[e];if(t){f=!0;try{o(t)}finally{a(e),f=!1}}}}if(!e.setImmediate){var s,c=1,u={},f=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},s=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;s=function(t){var n=l.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(i,0,e)}}(),d.setImmediate=r,d.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(154),n(157))},557:function(e,t,n){(function(t){function n(e,t){function n(){if(!a){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var a=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(154))},558:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);a.call(this,e)}e.exports=r;var a=n(298),o=n(213);o.inherits=n(140),o.inherits(r,a),r.prototype._transform=function(e,t,n){n(null,e)}},559:function(e,t,n){e.exports=n(254)},560:function(e,t,n){e.exports=n(188)},561:function(e,t,n){e.exports=n(253).Transform},562:function(e,t,n){e.exports=n(253).PassThrough},592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DCONF_STATUS={NONE:0,JOINING:1,IN_CONF:2,JOIN_FAIL:3,LEAVING:4,LEFT:5},t.DFPLATFORM={platform:window.CLIENTCONFIG.PLATFORM,isWin:window.CLIENTCONFIG.ISWIN,isBigWin:window.CLIENTCONFIG.ISBIGWIN,isMac:window.CLIENTCONFIG.ISMAC,isMobile:window.CLIENTCONFIG.ISMOBILE,isPc:window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISMAC||window.CLIENTCONFIG.ISBIGWIN,isWinBase:window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISBIGWIN},t.IID_COMPONENT={BASE:0,DS:1,AS:2,WB:512},t.NATIVE_DATA_PARAMTYPE={CREATE_DOC_PAGE:0,SET_CURRENT_PAGE:1,SET_BG_COLOR:2,DELETE_PAGE:3,DELETE_DOC:4,SET_CANVAS_SIZE:5,SET_APP_BG_COLOR:6},t.DATA_FIREWALL_MODE={STG:0,SVN:1,SBC:2,NULL:3}},593:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.itmeetingSmallWin=t.itmeetingExtendConf=t.itmeetingChairman=t.itmeetingAcceptSharing=t.itmeetingShareScreen=t.itmeetingCreateConf=t.itmeetingJoinConf=t.meetingHWsetCaptureCamera=t.meetingHWcameraOnOrOff=t.meetingHWmicrophoneOnOrOff=t.meetingHWspeakerOnOrOff=t.meetingHWreCallTimeOut=t.startCallFailed=t.firstQosReport=t.meetingHWLeaveConf=t.sipRegisterFailed=t.uportalLoginFailed=t.qosAlertSend=t.meetingHWsaveIpParam=t.meetingHWJoinConf=void 0;var a=n(135),o=r(a),i=n(1),s=r(i),c=n(69),u=r(c),f=n(2),l=r(f),d=null,p=null,h="",m=null,v=!0,g=coreLogger.getLogger("logic")("meetingHWBuried"),C=function(){d=null,p=null,h="",v=!0,clearInterval(m)},S=function(){d=!0,p=null,v=!0},w=(t.meetingHWJoinConf=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="Telepresence_join_success",n="加入会议成功",g.info("joinConfData: ",h),r=$getState().conf.isVideoConf,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||(h.isVideoConf=r),a="string"==typeof h?h:(0,u.default)(h),S(),w(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(t,n,a):b(t,n,a);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.meetingHWsaveIpParam=function(e){h=e},t.qosAlertSend=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,f,l,h,m,v;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.isVideoConf,n=$getState().call.mediaInfo,r=n.audio,a=n.video,o={audioRecvBitRate:r.recv.bitRate,audioSendBitRate:r.send.bitRate,audioRecvLossFraction:r.recv.lost,audioSendLossFraction:r.send.lost,audioRecvDelay:r.recv.delay,audioSendDelay:r.send.delay,audioRecvJitter:r.recv.jitter,audioSendJitter:r.send.jitter},i={videoRecvBitRate:a.recv.bitRate,videoSendBitRate:a.send.bitRate,videoRecvResolutionRatio:a.recv.frameSize,videoSendResolutionRatio:a.send.frameSize,videoRecvFrameRate:a.recv.frameRate,videoSendFrameRate:a.send.frameRate,videoRecvLossFraction:a.recv.lost,videoSendLossFraction:a.send.lost,videoRecvDelay:a.recv.delay,videoSendDelay:a.send.delay,videoRecvJitter:a.recv.jitter,videoSendJitter:a.send.jitter},d&&null===p&&(c="string"==typeof o?o:(0,u.default)(o),f="Telepresence_qos_audio_alarm",l="通信音频状态Qos信息告警",t?(h="Telepresence_qos_video_alarm",m="通信视频状态Qos信息告警",v="string"==typeof i?i:(0,u.default)(i),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(I(f,l,c),I(h,m,v)):(b(f,l,c),b(h,m,v))):window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(f,l,c):b(f,l,c),p=!0,setTimeout(function(){p=null},6e4));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.uportalLoginFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_uportal_login_fail",r="uPortal登录失败",a={reason:t},o=(0,u.default)(a),I(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.sipRegisterFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_sip_register_fail",r="SIP注册失败",a={reason:t},o=(0,u.default)(a),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,o):b(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWLeaveConf=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="Telepresence_leave",n="离开会议",C(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(t,n,""):b(t,n,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d&&(m=setInterval(function(){_()},3e5));case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),_=(t.firstQosReport=function(){var e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v&&(g.info("firstQosReport"),_());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState().conf.sharePersonNum,t=$getState().call.mediaInfo,n=t.audio,r=t.video,a=t.bfcp,o=$getState().call.callStatus,i=0,s=0,c={audioRecvBitRate:n.recv.bitRate,audioSendBitRate:n.send.bitRate,audioRecvLossFraction:n.recv.lost,audioSendLossFraction:n.send.lost,audioRecvDelay:n.recv.delay,audioSendDelay:n.send.delay,audioRecvJitter:n.recv.jitter,audioSendJitter:n.send.jitter};for(var f in c)"- -"!==c[f]&&"--"!==c[f]&&(i+=1);if(8===i){var l="string"==typeof c?c:(0,u.default)(c);window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I("Telepresence_qos_audio_info","通话音频状态Qos信息",l):b("Telepresence_qos_audio_info","通话音频状态Qos信息",l),v=!1}if("VIDEO_CONNECTED"===o){var d={videoRecvBitRate:r.recv.bitRate,videoSendBitRate:r.send.bitRate,videoRecvResolutionRatio:r.recv.frameSize,videoSendResolutionRatio:r.send.frameSize,videoRecvFrameRate:r.recv.frameRate,videoSendFrameRate:r.send.frameRate,videoRecvLossFraction:r.recv.lost,videoSendLossFraction:r.send.lost,videoRecvDelay:r.recv.delay,videoSendDelay:r.send.delay,videoRecvJitter:r.recv.jitter,videoSendJitter:r.send.jitter};for(var p in d)"- -"!==d[p]&&"--"!==d[p]&&(s+=1);if(12===s){var h="string"==typeof d?d:(0,u.default)(d);window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I("Telepresence_qos_video_info","通话视频状态Qos信息",h):b("Telepresence_qos_video_info","通话视频状态Qos信息",h)}}if(""!==e){var m={dataRecvBitRate:a.recv.bitRate&&"--"!==a.recv.bitRate?a.recv.bitRate:-1,dataSendBitRate:a.send.bitRate&&"--"!==a.send.bitRate?a.send.bitRate:-1,dataRecvResolutionRatio:a.recv.frameSize&&"--"!==a.recv.frameSize?a.recv.frameSize:-1,dataSendResolutionRatio:a.send.frameSize&&"--"!==a.send.frameSize?a.send.frameSize:-1,dataRecvFrameRate:a.recv.frameRate&&"--"!==a.recv.frameRate?a.recv.frameRate:-1,dataSendFrameRate:a.send.frameRate&&"--"!==a.send.frameRate?a.send.frameRate:-1,dataRecvLossFraction:a.recv.lost&&"--"!==a.recv.lost?a.recv.lost:-1,dataSendLossFraction:a.send.lost&&"--"!==a.send.lost?a.send.lost:-1,dataRecvDelay:a.recv.delay&&"--"!==a.recv.delay?a.recv.delay:-1,dataSendDelay:a.send.delay&&"--"!==a.send.delay?a.send.delay:-1,dataRecvJitter:a.recv.jitter&&"--"!==a.recv.jitter?a.recv.jitter:-1,dataSendJitter:a.send.jitter&&"--"!==a.send.jitter?a.send.jitter:-1},g="string"==typeof m?m:(0,u.default)(m),C="Telepresence_qos_data_info";window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(C,"通话辅流状态Qos信息",g):b(C,"通话辅流状态Qos信息",g)}}),I=(t.startCallFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_make_call_fail",r="makeCall失败",a={reason:t},o=(0,u.default)(a),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,o):b(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWreCallTimeOut=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_abnormal_break",r="异常掉会",a={reason:t},o=(0,u.default)(a),C(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,o):b(n,r,o);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWspeakerOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_speaker",r="免提开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,""):b(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWmicrophoneOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_microphone",r="MIC开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,""):b(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWcameraOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_camera",r="摄像头开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,""):b(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWsetCaptureCamera=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_camera",r="",1===t?(n+="_back",r="切换为前置摄像头"):(n+="_front",r="切换为后置摄像头"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,""):b(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(t,n,r){var a,i,c,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:a=$getState(),i=a.login.sipImpi,c=a.conf.confSubject,i.indexOf("@")&&(i=i.split("@")[0]),i=""+i,c=c||"",f="win",""!==r?(r=JSON.parse(r),r=(0,o.default)({},r,{accessCode:""+window.linkSmcAccessCode,meetingId:""+window.linkSmcPasscode,meetingName:c,platform:f,sipNo:i}),r=(0,u.default)(r)):(r={accessCode:""+window.linkSmcAccessCode,meetingId:""+window.linkSmcPasscode,meetingName:c,platform:f,sipNo:i},r=(0,u.default)(r)),window.meetingWHBuriedReport(t,n,r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),b=(t.itmeetingJoinConf=function(){g.info("IT_MEETING joinconf bury point");var e={from:"workplace",version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE},t=(0,u.default)(e);b("Telepresence_join","加入会议",t)},t.itmeetingCreateConf=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.info("IT_MEETING createConf bury point"),n=$getState().conf.isVideoConf,r="创建会议",a="Telepresence_create_conf",o={actionType:t,isVideoConf:n},i=(0,u.default)(o),b(a,r,i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingShareScreen=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.info("IT_MEETING shareScreen bury point"),n="Telepresence_share",r="",t?(n+="_start",r="屏幕共享"):(n+="_stop",r="停止共享"),b(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingAcceptSharing=function(){g.info("IT_MEETING acceptSharing");b("Telepresence_receive_share","接收共享","")},t.itmeetingChairman=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.info("IT_MEETING applyOrReleaseChairman bury point"),n="Telepresence_chairman",r="",t?(n+="_apply",r="申请主席"):(n+="_release",r="释放主席"),b(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingExtendConf=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.info("IT_MEETING extendConf bury point"),n="Telepresence_extend_conf",r="延长会议",a={time:t},o=(0,u.default)(a),b(n,r,o);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingSmallWin=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.info("IT_MEETING smallWin bury point"),n="Telepresence_smallwin",r="",t?(n+="_open",r="显示小画面"):(n+="_close",r="隐藏小画面"),b(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(t,n,r){var a,i,c,f,l,d,p,h,m,v;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=2;break}return e.abrupt("return");case 2:a=$getState(),i=a.login.sipImpi,c=a.conf.confSubject,i.indexOf("@")&&(i=i.split("@")[0]),i=""+i,c=c||"",f="win",l=$getState().conf.currentConfInfo,d=l.access_number,p=l.vmr_id,h=l.conf_id,m=isNullOrEmpty(d)?"":d,m&&m.indexOf("+")>-1&&(m=m.replace("+","00")),v=isNullOrEmpty(p)?h:p,v=isNullOrEmpty(v)?"":v,""!==r?(r=JSON.parse(r),r=(0,o.default)({},r,{accessCode:m,meetingId:v,meetingName:c,platform:f,sipNo:i}),r=(0,u.default)(r)):(r={accessCode:m,meetingId:v,meetingName:c,platform:f,sipNo:i},r=(0,u.default)(r)),window.ITMeetingBuriedReport(t,n,r);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}())},624:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return a.exec(e).slice(1)};t.resolve=function(){for(var t="",a=!1,o=arguments.length-1;o>=-1&&!a;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,a="/"===i.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+t||"."},t.normalize=function(e){var a=t.isAbsolute(e),o="/"===i(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!a).join("/"),e||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=r(e.split("/")),o=r(n.split("/")),i=Math.min(a.length,o.length),s=i,c=0;c<i;c++)if(a[c]!==o[c]){s=c;break}for(var u=[],c=s;c<a.length;c++)u.push("..");return u=u.concat(o.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(157))},631:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(3),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("api")("clkapi"),p=null,h=null,m=new Array,v=function(e){null!==p&&p.sendToTup(e)},g=function(){function e(){var t=this;return(0,u.default)(this,e),h&&p&&0===p.readyState?(d.info("API WebSocket is connecting"),h):h=new s.default(function(e,n){p&&1===p.readyState?e(t):(p=new WebSocket("ws://localhost:"+(window.CLIENTCONFIG.API_PORT||"7685"),"clk_api_call_service_protocol"),p.onopen=function(){d.info("API WebSocket is opened"),e(t)},p.onclose=function(){d.info("API WebSocket is closed"),p=null},p.onerror=function(e){d.info("API WebSocket is error, e = "+(0,o.default)(e)),p=null},p.onmessage=function(e){var t=JSON.parse(e.data);1630===t.cmd?d.info("CloudLink Recive API message: CLIENT_CMD_WORKPLACE_LOGIN"):d.info("CloudLink Recive API message: ",t),t.cmd>0&&"function"==typeof m[t.cmd]&&m[t.cmd](t)})})}return(0,l.default)(e,[{key:"setCmdFunc",value:function(e,t){d.info("set cmd func, cmd = "+e),m[e]=t}},{key:"postRpsMessage",value:function(e,t){var n={description:e.description,rps:e.cmd,opt:e.opt,call:e.call,result:t};v(n),d.debug("CloudLink Rsp to proxy: description = "+n.description+", rps = "+n.rps+", opt = "+n.opt+", call = "+n.call+", result = "+n.result)}},{key:"postRpsParamMessage",value:function(e,t,n){var r={description:e.description,rps:e.cmd,opt:e.opt,call:e.call,result:n,param:t};v(r),d.debug("CloudLink Rsp param to proxy: description = "+r.description+", rps = "+r.rps+", opt = "+r.opt+", call = "+r.call+", result = "+r.result+", param = "+r.param)}},{key:"postNotifyMessage",value:function(e){d.debug(e.description,e),v(e)}}]),e}();t.default=g},69:function(e,t,n){e.exports={default:n(70),__esModule:!0}},70:function(e,t,n){var r=n(8),a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},814:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EncoderAdpt=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("conf")("logic/video/svcManager"),u={LEVEL_INVALID:-1,LEVEL_LOW:0,LEVEL_HIGH:1},f={REQUEST_KEEP:0,REQUEST_CLOSE:1,REQUEST_OPEN:2},l={OFF:0,ON:1},d=[{width:1280,height:720,framerate:30,bitrate:2795},{width:960,height:540,framerate:20,bitrate:1430},{width:640,height:360,framerate:20,bitrate:730}],p=80,h=90,m=function(){function e(){(0,o.default)(this,e),this.continuousTime=0,this.continuousLevel=u.LEVEL_INVALID,this.punishTime=0,this.encoderLevel=0,this.punishCheck=-1,this.clearPunishCheck=!1,this.cameraRequest=f.REQUEST_KEEP,this.cameraStatus=l.ON,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraIsForceClose=!1,this.cameraAutoCloseEnable=!0,this.adpt_threshold=p,this.close_camera_threshold=h}return(0,s.default)(e,[{key:"clear",value:function(){this.continuousTime=0,this.continuousLevel=u.LEVEL_INVALID,this.punishTime=0,this.encoderLevel=0,this.punishCheck=-1,this.clearPunishCheck=!1,this.cameraRequest=f.REQUEST_KEEP,this.cameraStatus=l.ON,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraIsForceClose=!1,this.cameraAutoCloseEnable=!0,this.adpt_threshold=p,this.close_camera_threshold=h}},{key:"onNotifyCameraStatus",value:function(e){this.cameraIsForceClose&&e&&coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA_NOTIFY",1),this.cameraStatus=e?l.ON:l.OFF,this.cameraIsForceClose=!1,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraRequest=f.REQUEST_KEEP,this.cameraAutoCloseEnable=!1,c.info("onNotifyCameraStatus, cameraStatus: ",this.cameraStatus)}},{key:"calcLevel",value:function(e){return e>this.adpt_threshold?u.LEVEL_HIGH:u.LEVEL_LOW}},{key:"shouldDowngrade",value:function(){return this.continuousTime>=15&&this.continuousLevel===u.LEVEL_HIGH}},{key:"shouldUpgrade",value:function(){return this.continuousTime>=15+this.punishTime&&this.continuousLevel===u.LEVEL_LOW}},{key:"updateContinuousLevel",value:function(e){var t=this.calcLevel(e);return t!==this.continuousLevel?(this.continuousLevel=t,this.continuousTime=5):this.continuousTime+=5,e>this.close_camera_threshold?this.closeCameraReqCount++:this.closeCameraReqCount=0,e<70?this.openCameraReqCount++:this.openCameraReqCount=0,t}},{key:"check",value:function(e){var t=!1;return this.punishCheck>=0&&(this.punishCheck++,e>=this.adpt_threshold&&(this.punishTime=this.punishTime<480?2*(this.punishTime+15)-15:465,this.ResolutionDowngrade(),this.continuousTime=0,this.punishCheck=-1,t=!0,c.info("punish: ",this.punishTime)),this.punishCheck>=2&&(this.punishCheck=-1)),this.clearPunishCheck&&e<this.adpt_threshold&&(this.punishTime=0,this.clearPunishCheck=!1,t=!0,c.info("clear punish: ",this.punishTime)),t}},{key:"feed",value:function(e,t){if(3===t||4===t?(this.adpt_threshold=p+10,this.close_camera_threshold=h+10):(this.adpt_threshold=p,this.close_camera_threshold=h),c.info(">>>>>>>>>current cpu rate: ",e),this.updateContinuousLevel(e),this.closeCameraReqCount>=3&&this.cameraRequest===f.REQUEST_KEEP&&(this.cameraIsForceClose=!0,this.closeCameraReqCount=0),this.closeCameraReqCount>=3&&this.cameraRequest===f.REQUEST_CLOSE){if(this.cameraAutoCloseEnable)return this.closeCamera(),this.closeCameraReqCount=0,void(this.cameraRequest=f.REQUEST_OPEN);this.cameraStatus===l.ON&&this.closeCameraReqCount>8&&(coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA_NOTIFY",1),this.cameraIsForceClose=!0,this.closeCameraReqCount=0)}if(this.openCameraReqCount>=3&&this.cameraRequest===f.REQUEST_KEEP&&(this.openCameraReqCount=0,this.cameraIsForceClose=!1),this.openCameraReqCount>=3&&this.cameraRequest===f.REQUEST_OPEN&&(this.openCameraReqCount=0,this.cameraRequest=f.REQUEST_KEEP,this.cameraIsForceClose=!1),!this.check(e))if(this.shouldDowngrade())this.ResolutionDowngrade(),this.continuousTime=0;else if(this.shouldUpgrade()){var n=this.ResolutionUpgrade();this.continuousTime=0,n&&(this.punishCheck=0),this.punishTime&&(this.clearPunishCheck=!0)}}},{key:"ResolutionDowngrade",value:function(){if(c.info("resolution downgrade"),this.encoderLevel>=d.length-1)return c.info("can not downgrade encoder level"),this.cameraStatus===l.ON&&(this.cameraRequest=f.REQUEST_CLOSE),!1;this.encoderLevel++,this.encoderLevel>=d.length&&(this.encoderLevel=d.length-1),c.info("current encoder level[",this.encoderLevel,"]",d[this.encoderLevel]);var e=$getState().call.callId;return coreCall.setEncoderMaxCap(e,d[this.encoderLevel].width,d[this.encoderLevel].height,d[this.encoderLevel].framerate,d[this.encoderLevel].bitrate),!0}},{key:"ResolutionUpgrade",value:function(){if(c.info("resolution upgrade"),this.cameraStatus===l.OFF)return void c.info("camera is off, can not upgrade resolution.");if(this.encoderLevel<=0)return c.info("can not upgrade encoder level"),!1;if(2===window.cpu_core_num&&2===window.cpu_proc_num&&d[this.encoderLevel].height>360)return c.info("2 core 2 logical processors cpu, can not upgrade encoder level"),!1;this.encoderLevel--,this.encoderLevel<=0&&(this.encoderLevel=0),c.info("current encoder level[",this.encoderLevel,"]",d[this.encoderLevel]);var e=$getState().call.callId;return coreCall.setEncoderMaxCap(e,d[this.encoderLevel].width,d[this.encoderLevel].height,d[this.encoderLevel].framerate,d[this.encoderLevel].bitrate),!0}},{key:"closeCamera",value:function(){c.info("[CpuAdaptive]: closeCamera"),coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_CLOSE_CAMERA",1),this.cameraStatus=l.OFF;var e=$getState().call,t=e.callStatus,n=e.cameraIsDisabled;!("VIDEO_OUT"!==t&&!n)||(coreCommon.CameraControl.getInstance().switchCameraStateAction(l.OFF),this.cameraIsForceClose=!0,c.info("[CpuAdaptive]: closeCamera ok"))}},{key:"openCamera",value:function(){c.info("[CpuAdaptive]: openCamera"),coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA",1),this.cameraStatus=l.ON;var e=$getState().call,t=e.callStatus,n=e.cameraIsDisabled;!("VIDEO_OUT"!==t&&!n)||(coreCommon.CameraControl.getInstance().switchCameraStateAction(l.ON),this.cameraIsForceClose=!1,c.info("[CpuAdaptive]: openCamera"))}}]),e}();t.EncoderAdpt=new m},815:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.saveRandomPwdSelection=t.filterVmrConfListInfo=t.getAttendee=t.currentAccountIsRole=t.resetJoinConfValue=t.resetCreateConfValue=t.resetBookConfValue=t.resetDefaultValue=t.returnTimeCur=t.getDefaultDate=t.changeConfImmediatelyClearData=t.clearRecordInfoLogic=t.haveRecordedLogic=t.isReacrdLogic=t.setRecordSchednameLogic=t.isShowReacrdTypeLogic=t.toggleIsReacrdSwitch=t.changeShowType=t.changeStartTimeMobile=t.changeStartTimeMin=t.changeStartTimeHour=t.changeStartTime=t.changeConfLen=t.changeTimeZone=t.changeConfImmediately=t.toggleCreateMeetingPasswordOption=t.toggleCreateMeetingPasswordDefault=t.toggleIsBookSendSMS=t.toggleIsBookSendEmail=t.toggleCreateMeetingPassword=t.toggleHostMeetDiff=t.toggleCreateVideoConf=t.toggleVideoConf=t.changeCreateMeetingSubject=t.changeMeetingSubject=void 0;var a=n(69),o=r(a),i=n(142),s=r(i),c=coreLogger.getLogger("conf")("logic"),u=(t.changeMeetingSubject=function(e){return $dispatch(coreUi.changeConfSubject(e))},t.changeCreateMeetingSubject=function(e){return $dispatch(coreUi.changeCreateConfSubject(e))},t.toggleVideoConf=function(e){return $dispatch(coreUi.changeMeetingType(e))},t.toggleCreateVideoConf=function(e){return $dispatch(coreUi.changeCreateMeetingType(e))},t.toggleHostMeetDiff=function(e){return $dispatch(coreUi.changeHostMeetDiff(e))},t.toggleCreateMeetingPassword=function(e){var t=e?1:0;$dispatch(coreUi.changeCreateMeetingPassword(t)),coreConf.saveRandomPwdSelection(t)},t.toggleIsBookSendEmail=function(e){return $dispatch(coreUi.changeIsBookSendEmail(e))},t.toggleIsBookSendSMS=function(e){return $dispatch(coreUi.changeIsBookSendSMS(e))},t.toggleCreateMeetingPasswordDefault=function(e){return $dispatch(coreUi.changeCreateMeetingPasswordDefault(e))},t.toggleCreateMeetingPasswordOption=function(e){return $dispatch(coreUi.changeCreateMeetingPasswordOption(e))},t.changeConfImmediately=function(e){return $dispatch(coreUi.toggleConfImmediately(e))},t.changeTimeZone=function(e){return $dispatch(coreUi.updateTimeZone(e))}),f=t.changeConfLen=function(e){return $dispatch(coreUi.updateConfLen(e))},l=t.changeStartTime=function(e){return $dispatch(coreUi.updateStartTime(e))},d=t.changeStartTimeHour=function(e){return $dispatch(coreUi.updateStartTimeHour(e))},p=t.changeStartTimeMin=function(e){return $dispatch(coreUi.updateStartTimeMin(e))};t.changeStartTimeMobile=function(e){return $dispatch(coreUi.updateStartTimeMobile(e))},t.changeShowType=function(e){return $dispatch(coreUi.changeAttendeeShowType(e))},t.toggleIsReacrdSwitch=function(e){return $dispatch(coreUi.setIsReacrdSwitchType(e))},t.isShowReacrdTypeLogic=function(e){return $dispatch(coreUi.setIsShowReacrdType(e))},t.setRecordSchednameLogic=function(e){return $dispatch(coreUi.setRecordSchedname(e))},t.isReacrdLogic=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;c.info("createNewMeeting.isReacrdLogic() "+e),$dispatch(coreUi.setIsReacrd(e)),window.CLIENTCONFIG.ISMOBILE&&(c.info("mobile recording isReacrd: "+e),c.info("mobile recording recordType: "+t),e?window.setIsRecord(t):window.setIsRecord(e))},t.haveRecordedLogic=function(e){return $dispatch(coreUi.setHaveReacorded(e))},t.clearRecordInfoLogic=function(){return $dispatch(coreUi.clearRecordInfo())},t.changeConfImmediatelyClearData=function(){var e=new Date,t={year:e.getFullYear(),month:e.getMonth(),day:e.getDate()};u(0),f([1,0]),l(t),d(""),p("")},t.getDefaultDate=function(){var e=new Date,t=e;23===e.getHours()&&e.getMinutes()>15&&(t=new Date(e.getTime()+864e5));var n={year:t.getFullYear(),month:t.getMonth(),day:t.getDate()};c.info("default date is",t),l(n)},t.returnTimeCur=function(){var e=new Date,t=void 0,n=void 0,r=e.getHours(),a=e.getMinutes()+15;return t=a>30?23===r?0:r+1:r,n=(a>60?a-60:a)>30?0:30,coreConf.changeStartTimeHour(t),coreConf.changeStartTimeMin(n),t=parseInt(t)<10?"0"+t:""+t,n=parseInt(n)<10?"0"+n:""+n,t+":"+n},t.resetDefaultValue=function(){var e=window.getDefaultTimeZone(constant.TIME_ZONE_FLAG),t=$getState();t.conf.isCreateMeetingPasswordDefault;coreConf.getDefaultDate(),$dispatch(coreUi.changeBookConfSubject("")),$dispatch(coreUi.updateTimeZone(e)),$dispatch(coreUi.updateConfLen([1,0])),coreConf.returnTimeCur(),$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),coreUi.clearSaveSelectBoxText(),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0)),$dispatch(coreUi.changeConfAcsNum("")),$dispatch(coreUi.changeConfAcsId("")),coreConf.toggleChangeConfAcsPas(""),$dispatch(coreUi.updateStartTimeMobile("")),$dispatch(coreUi.meetingTypeValue(0))},t.resetBookConfValue=function(){var e=window.getDefaultTimeZone(constant.TIME_ZONE_FLAG),t=$getState(),n=t.conf,r=(n.isCreateMeetingPasswordDefault,n.vmrConfResult),a=n.curConfIDItem,o=1===a.idType?{idType:1,vmrId:a.vmrId,confId:a.confId,confSubject:"",maxParties:0,chairmanPwd:a.chairmanPwd,guestPwd:a.guestPwd,name:a.name}:{idType:1,vmrId:r.vmr_id,confId:r.conf_id,confSubject:"",maxParties:0,chairmanPwd:r.chairman_pwd,guestPwd:r.guest_pwd,name:r.name};coreConf.getDefaultDate(),$dispatch(coreUi.changeBookConfSubject("")),$dispatch(coreUi.updateTimeZone(e)),$dispatch(coreUi.updateConfLen([1,0])),coreConf.returnTimeCur(),$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),coreUi.clearSaveSelectBoxText(),$dispatch(coreUi.setUseFixedConfIDState(!0)),$dispatch(coreUi.changeIsBookSendSMS(!0)),$dispatch(coreUi.changeIsBookSendEmail(!0)),$dispatch(coreUi.changeCurConfIDItem(o))},t.resetCreateConfValue=function(){var e=$getState(),t=e.conf,n=(t.isCreateMeetingPasswordDefault,t.vmrConfResult,t.isCreateUseFixedConfID);$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0)),$dispatch(coreUi.setCreateUseFixedConfIDState(n))},t.resetJoinConfValue=function(){$dispatch(coreUi.changeConfAcsNum("")),$dispatch(coreUi.changeConfAcsId("")),coreConf.toggleChangeConfAcsPas(""),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0))},t.currentAccountIsRole=function(e,t){var n=$getState(),r=n.myInfo,a=r.bind_no,o=r.account,i=e.filter(function(e){return e.acount_id===a})[0];return!(!i||1!==i.role)||t===o},t.getAttendee=function(e){var t=[].concat((0,s.default)(e));return t.map(function(e,n){if(1===e.role){var r={acount_id:e.acount_id||"",email:"",is_mute:0,name:e.name||"",role:1,sms:"",type:0,number:e.number||"",user_account:e.user_account||"",user_uuid:e.user_uuid||""};t.splice(n,1),t.unshift(r)}}),t},t.filterVmrConfListInfo=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=$getState(),a=r.myInfo.name,o=r.login.isFreeUser,i=a+language.CONFERENCE_SUBJECT_INFO;if(o!==constant.ACCOUNT_TYPE.IS_FREE){if(isNullOrEmpty(e.conf_id)||0!==e.vmr_status||n.push({idType:constant.AS_CONF_ID_TYPE_MAP.PERSONAL_CONF_ID,confId:e.conf_id,vmrId:e.vmr_id,confSubject:i,maxParties:0,vmrStatus:0,chairmanPwd:e.chairman_pwd,guestPwd:e.guest_pwd,name:e.name}),e.spec_vmr_num>0){for(var s=e.spec_vmr_info,c=0;c<e.spec_vmr_num;c++)s&&s[c]&&!isNullOrEmpty(s[c].conf_id)&&n.push({idType:constant.AS_CONF_ID_TYPE_MAP.PRIVATE_CONF_ID,confId:s[c].conf_id,vmrId:s[c].vmr_id,confSubject:s[c].name,maxParties:s[c].max_parties,vmrStatus:s[c].vmr_status,chairmanPwd:s[c].chairman_pwd,guestPwd:s[c].guest_pwd,name:s[c].name});t&&n.push({idType:constant.AS_CONF_ID_TYPE_MAP.RANDOM_CONF_ID,confId:"",vmrId:"",confSubject:"",maxParties:0,chairmanPwd:"",guestPwd:"",name:""})}}else for(var u=e.spec_vmr_info,f=0;f<e.spec_vmr_num;f++)u&&u[f]&&!isNullOrEmpty(u[f].conf_id)&&n.push({idType:constant.AS_CONF_ID_TYPE_MAP.PRIVATE_CONF_ID,confId:u[f].conf_id,vmrId:u[f].vmr_id,confSubject:u[f].name,maxParties:u[f].max_parties,vmrStatus:u[f].vmr_status,chairmanPwd:u[f].chairman_pwd,guestPwd:u[f].guest_pwd,name:u[f].name});return n},t.saveRandomPwdSelection=function(e){c.info("randomId**d is:",e);var t={key:"randomIdPwd",value:(0,o.default)(e)};coreDb.saveUserConfig(t)}},816:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sendJoinPairResult=t.receiveJoinPairConf=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(200),u=coreLogger.getLogger("logic")("synergism/server/conf"),f=(t.receiveJoinPairConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.info("receiveJoinPairConf: id = ",t+", confId = ",n.confId+", confAcs = ",n.confAcs),!(coreCall.getCallCount()>0||coreConf.isInConf())){e.next=5;break}return u.info("receiveJoinPairConf: maxhub device is busy"),f(t,constant.PAIR_CONF_RESULT.BUSY),e.abrupt("return");case 5:return(0,c.toggleChangeConfAcsId)(n.confId),(0,c.toggleChangeConfAcsNum)(n.confAcs),e.next=9,(0,c.toggleChangeConfAcsPas)(n.confPas);case 9:return coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),e.next=12,(0,c.oneKeyEnterConf)(n.confAcs,n.confId,n.confPas,!0);case 12:if(!1!==(r=e.sent)){e.next=16;break}return f(t,constant.PAIR_CONF_RESULT.FAILED),e.abrupt("return");case 16:window.pairId=t;case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.sendJoinPairResult=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.pairId=0,r={description:"pair_join_conf_result",command_rsp:constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,param:{result:n,msg:{}}},e.next=4,coreCall.sendUniversalInfo(t,r);case 4:return a=e.sent,u.info("send join conf result command ret = ",a),e.abrupt("return",a.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},817:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isInReCall=t.reCallSuc=t.reCallEnterConf=t.terminateReCall=t.reCallTerminate=t.reCallStart=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(1766),u=r(c),f=n(355),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=coreLogger.getLogger("reCallModel")("index"),p=null,h=(t.reCallStart=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return d.info("savedRecallInfo is null, no need recall"),e.abrupt("return");case 3:if(null===p){e.next=6;break}return d.info("is already deal recall"),e.abrupt("return");case 6:if(!l.isUserEndConf()){e.next=9;break}return d.info("is in user endConf, no deal recall"),e.abrupt("return");case 9:p=new u.default(t,h),p.startReCall();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.reCallTerminate=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallStop"),e.abrupt("return");case 3:return e.next=5,p.reCallTerminate();case 5:p=null;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.terminateReCall=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallStop"),e.abrupt("return");case 3:return e.next=5,p.terminateReCall();case 5:p=null;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reCallEnterConf=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallEnterConf"),e.abrupt("return");case 3:p.reCallEnterConf();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reCallSuc=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallSuc"),e.abrupt("return");case 3:p.reCallSucToStopReCall(),p=null;case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInReCall=function(){return null!==p}},818:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"callToConfFail",value:function(){}},{key:"confIncoming",value:function(){}},{key:"confInfoNotify",value:function(){}},{key:"svcSeessionModify",value:function(){}},{key:"acceptConfStart",value:function(){}},{key:"rejectConf",value:function(){}},{key:"closeConfPage",value:function(){}},{key:"showExitConfTip",value:function(){}},{key:"notifyPluginConfEnd",value:function(){}},{key:"notifyPluginLogout",value:function(){}},{key:"showErrorMsgBox",value:function(){}},{key:"showCallOutPage",value:function(){}},{key:"showVideoOutPage",value:function(){}},{key:"showVideoConnectedPage",value:function(){}},{key:"showCallConnectedPage",value:function(){}},{key:"changeAudioToVideo",value:function(){}},{key:"changeVideoToAudio",value:function(){}},{key:"changeIsSvcConfS",value:function(){}},{key:"dealMemberList",value:function(){}}]),e}();t.default=c},819:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.remoteScreenShare=t.shareScreenOper=t.joinConfSuccess=t.joinConfFailed=t.setServerIp=t.stopCalcCPUUsage=t.startCalcCPUUsage=t.sendHttpPost=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(135),u=r(c),f=n(2),l=r(f),d=n(955),p=n(1803),h=coreLogger.getLogger("bigwinBuried")("buried"),m="",v=void 0,g=t.sendHttpPost=function(){var e=(0,l.default)(o.default.mark(function e(t,n){var r,a,i,c,f,l,p,m,v,g,C,S,w,_,I,b,N,E,y,T,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return h.error("client config is not bigwin."),e.abrupt("return");case 3:if(n){e.next=5;break}return e.abrupt("return");case 5:return r=$getState(),a=r.login,i=a.account,c=a.sipImpi,f=r.bigwinBuried.buried,l="",c.indexOf("@")&&-1!==(p=c.indexOf("@"))&&(l=c.slice(0,p)),m=new Date,v=m.getMonth()+1>=10?m.getMonth()+1:"0"+(m.getMonth()+1),g=m.getDate()>=10?m.getDate():"0"+m.getDate(),C=m.getHours()>=10?m.getHours():"0"+m.getHours(),S=m.getMinutes()>=10?m.getMinutes():"0"+m.getMinutes(),w=m.getSeconds()>=10?m.getSeconds():"0"+m.getSeconds(),_=m.getFullYear()+"-"+v+"-"+g+" "+C+":"+S+":"+w,I={accessCode:f.acccode,meetingId:f.passcode,meetingName:f.meetingName,userId:i,sipNo:l,timeUTC:_,timeZone:(new Date).getTimezoneOffset()/-60},b=(0,u.default)(I,n),b=(0,s.default)(b),e.next=20,coreSecurity.encode64(b);case 20:return N=e.sent,e.next=23,coreSecurity.encode64(N);case 23:N=e.sent,E=O||window.CLIENTCONFIG.BURIED_POST_ADDR,y=(0,d.createXMLHttpRequest)(),T=E+"?idsite=ConfCloudLink&action="+t+"&actiontype=commonlog&_id="+i+"&data="+N,y.open("POST",T,!0),y.send();case 29:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=navigator.userAgent.toLowerCase(),t="";return-1!==e.indexOf("nt 10.0")&&(t="windows 10"),-1!==e.indexOf("nt 6.2")&&(t="windows 8"),-1!==e.indexOf("nt 6.1")&&(t="windows 7"),-1!==e.indexOf("nt 6.0")&&(t="windows Vista"),-1!==e.indexOf("nt 5.1")&&(t="windows XP"),-1===e.indexOf("macintosh")&&-1===e.indexOf("mac os x")||(t="Mac"),-1!==e.indexOf("adobeair")&&(t="Adobe Air"),-1!==e.indexOf("linux")&&(t="Linux"),t};t.startCalcCPUUsage=function(){if(h.info("buried startCalcCpuUsage"),!window.CLIENTCONFIG.ISBIGWIN)return void h.error("client config is not bigwin.");v=setInterval(function(){(0,p.cpuUsage)(function(e){if((e=parseInt(100*e,10))>70){g("perfAlarm",{almType:0,almVal:e+"%",parmStr:"",parmStr1:""})}})},6e4)},t.stopCalcCPUUsage=function(){if(h.info("buried stopCalcCpuUsage"),!window.CLIENTCONFIG.ISBIGWIN)return void h.error("client config is not bigwin.");clearInterval(v)},t.setServerIp=function(e){m=e},t.joinConfFailed=function(){var e=(0,l.default)(o.default.mark(function e(){var t,n,r,a,i,s=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("buried joinConfFailed"),t=$getState(),n=t.bigwinBuried.buriedJoinConfVip,r=C(),m="",a={platform:r,browserType:"",browserVer:"",joinType:s,joinNumber:"",myIP:window.localIp,myCountry:"",myCity:"",myDC:"",myVIP:n,networkType:0,networkName:"",devMode:"",isCloudPC:!1,isiAccess:!1,isSBC:!1,sbcIP:"",mcuIP:m,msIP:m,version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,errId:"",errStr:"",parmStr:"",parmStr1:"",parmStr2:""},i="joinFail",g(i,a);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.joinConfSuccess=function(){var e=(0,l.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4096,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("buried buriedJoinConfSuccess"),t=$getState(),n=t.bigwinBuried.buried,r=t.conf,a=C(),i=1,r.isVideoConf?r.isSvcConf||(i=0):i=2,s={platform:a,browserType:"",browserVer:"",joinType:f,joinNumber:"",joinRole:l,myIP:window.localIp,myCountry:"",myCity:"",myDC:"",myVIP:n.joinConfVip,networkType:0,networkName:"",devMode:"",isCloudPC:!1,isiAccess:!1,isSBC:!1,sbcIP:"",mcuIP:m,msIP:m,version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,realRole:l,callBitRate:4096,negoBitRate:u,negoAVCaps:i,parmStr:"",parmStr1:"",parmStr2:""},c="joinSuccess",g(c,s);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.shareScreenOper=function(){var e=(0,l.default)(o.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("buried buriedShareScreenOper"),n={operType:t,shareType:a,parmStr:"",parmStr1:""},r="shareOper",g(r,n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.remoteScreenShare=function(){var e=(0,l.default)(o.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("buried buriedRemoteScreenShare"),n={shareType:a,remoteUser:t,parmStr:"",parmStr1:""},r="remoteShare",g(r,n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},939:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.p2pTransferConf=t.enterConfByIdOnlyService=t.enterConfInConfListService=t.oneKeyEnterConfService=t.createConf=t.endConf=t.leaveConf=t.setConfNotifyFuncAtomic=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(355),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=coreLogger.getLogger("confModel")("queue"),l=coreCommon.TaskQueue.getInstance("confServiceQueue"),d=coreCommon.TaskOptions.defaultOptions(),p=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("set confctrl service callback func"),e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,t.setMultiNotifyFunc(98311,m),t.setMultiNotifyFunc(98341,I),e.next=8,coreTup.getConfCtrlInstance();case 8:return n=e.sent,n.setNotifyFunc(491539,v),n.setNotifyFunc(491559,g),n.setNotifyFunc(491543,C),n.setNotifyFunc(491540,S),n.setNotifyFunc(491541,w),n.setNotifyFunc(491573,_),n.setNotifyFunc(491542,b),e.next=18,u.setConfNotifyFunc();case 18:return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 19:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=new coreCommon.AtomicAction("setConfNotifyFunc",p);t.setConfNotifyFuncAtomic=h;var m=(t.leaveConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("leaveConf add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.leaveConf,d,n,a),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.endConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("endConf add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.endConf,d,n),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("createConf add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.createConf,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.oneKeyEnterConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("oneKeyEnterConfService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.oneKeyEnterConfService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfInConfListService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("enterConfInConfListService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.enterConfInConfListService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("enterConfByIdOnlyService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.enterConfByIdOnlyService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.p2pTransferConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("p2pTransferConf add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.p2pTransferConf,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){f.info("handleCallEndedPostConf add in queue"),l.addTask(u.handleCallEndedPostConf,d,null,e)}),v=function(e){f.info("handleConfIncoming add in queue"),l.addTask(u.handleConfIncoming,d,null,e)},g=function(e){f.info("handleTransToConfResult add in queue"),l.addTask(u.handleTransToConfResult,d,null,e)},C=function(e){f.info("handleConfBeTransferToConf add in queue"),l.addTask(u.handleConfBeTransferToConf,d,null,e)},S=function(e){f.info("handleConfConnected add in queue"),l.addTask(u.handleConfConnected,d,null,e)},w=function(e){f.info("handleConfInfoNotify add in queue"),l.addTask(u.handleConfInfoNotify,d,null,e)},_=function(e){f.info("handleBigParamResultNotify add in queue"),l.addTask(u.handleBigParamResultNotify,d,null,e)},I=function(e){f.info("handleSvcSeessionModify add in queue"),l.addTask(u.handleSvcSeessionModify,d,null,e)},b=function(e){f.info("handleConfEnded add in queue"),l.addTask(u.handleConfEnded,d,null,e)}},940:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.confInfoMap=void 0;var o=n(3),i=a(o),s=n(1),c=a(s),u=n(69),f=a(u),l=n(2),d=a(l),p=n(135),h=a(p),m=n(149),v=a(m),g=n(4),C=a(g),S=n(5),w=a(S),_=n(215),I=n(950),b=a(I),N=n(1783),E=a(N),y=n(817),T=r(y),O=n(1784),A=a(O),x=n(216),k=r(x),M=n(593),R=coreLogger.getLogger("confModel")("service"),L=t.confInfoMap={CONF_HANDLE:"confHandle",CONF_SERVER_ID:"confServerId",CALL_ID:"confCallId",CONF_SUBJECT:"confSubject",GROUP_URI:"groupUri",MEDIA_TYPE:"mediaType",CONF_PASSCODE:"confPasscode",VMR_ID:"vmrId",DATA_RANDOM:"dataRandom",AC_TEMP_TOKEN:"acTmpToken",CONF_ACSSCODE:"confAcsscode",CONF_PWD_ENCODE:"confPwdEncode",CONF_ID_INPUT:"confIdInput",CONF_ROLE:"confRole",COMPERE_NUMBER:"compereNumber",IS_SMC_VMR:"isSmcVmr"},D={B_CONNECT_TO_CONF:"bConnectToConf",IS_SMC_FIRST_REQUEST_CHAIRMAN:"isSmcFirstRequestCharimanRest",IS_RECALL:"isRecall",IS_ALREADY_JOIN_CONF:"isAlreadyJoinConf",IS_AVC_MULTIVIEW_BROADCAST:"isAvcMultiViewBroadcast",IS_FIRST_ENTER_CONF:"isFirstEnterConf",IS_USER_END_CONF:"isUserEndConf",IS_NOTIFY_UI_CONF_CONNECTED:"isNotifyUIConfConnected",IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY:"isNeedNotifyUISvcSessionNotify"},P=function(){function e(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,C.default)(this,e),this.getUpdatedParticipants=function(){return n.confInfo.updatedParticipants};var a=(new Date).getTime(),o=formatDateYYYYMMDDHHMM(a),i=[];if(this.showModeTaskQueue=coreCommon.TaskQueue.getInstance("showModeTaskQueue"),t&&t.memberList&&t.memberList.length>0){var s=!0,c=!1,u=void 0;try{for(var f,l=(0,v.default)(t.memberList);!(s=(f=l.next()).done);s=!0){var d=f.value,p={number:d.number?d.number:d.bind_no,userInfo:d,role:d.bind_no===t.compereNumber?1:0,is_mute:0,is_deaf:0,state:constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,hand_state:0,media_type:0,is_self:d.bind_no===t.selfNumber,is_speaking:!1,speak_volume:0,participant_id:"",is_broadcast:0,type:isNullOrEmpty(d.type)?0:parseInt(d.type)};1===t.memberList.length&&17===t.mediaType&&""===p.number&&(p.number=d.short_phone),1!==t.memberList.length&&""!==t.groupUri&&p.number!==t.selfNumber&&""===p.number&&(p.number=d.short_phone),i.push(p)}}catch(e){c=!0,u=e}finally{try{!s&&l.return&&l.return()}finally{if(c)throw u}}}this.confInfo={confHandle:"",confServerId:"",confCallId:"",mediaType:"",members:i,confPasscode:"",isAllMute:0,numOfParticipant:0,confRole:0,groupUri:"",compereNumber:t?t.compereNumber:"",confSubject:"",startTime:o.time,date:o.date,updatedParticipants:[],recordType:t&&t.recordType||0,vmrId:"",dataRandom:"",acTmpToken:"",confAcsscode:"",confPwdEncode:"",confIdInput:"",isSmcVmr:!1},this.confFlag={bConnectToConf:!1,isRecall:!1,isSmcFirstRequestCharimanRest:!window.isSupportiDo&&$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,isAlreadyJoinConf:!1,isAvcMultiViewBroadcast:!1,isFirstEnterConf:!1,isUserEndConf:!1,isNotifyUIConfConnected:!1,isNeedNotifyUISvcSessionNotify:!1},this.isFirstGetMemberList=!0,this.isCallTransToConf=!1,r&&(this.setConfInfo(L.CONF_PASSCODE,t?t.passcode:""),this.setConfInfo(L.CONF_HANDLE,t?t.confId:""),this.setConfInfo(L.CALL_ID,t?t.callId:""),this.setConfInfo(L.MEDIA_TYPE,t?t.mediaType:""),this.setConfInfo(L.GROUP_URI,t?t.groupUri:""),this.updateConfSubject(t?t.confSubject:"")),this.svc={}}return(0,w.default)(e,[{key:"setIsCallTransToConfTrue",value:function(){this.isCallTransToConf=!0}},{key:"setConfInfo",value:function(e,t){var n={};n[e]=t,e===L.MEDIA_TYPE&&b.default.changeMediaTypeToAudioData()&&(n[e]=17);var r=(0,h.default)({},this.confInfo,n);this.confInfo=r,e!==L.CONF_HANDLE||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfHanlde",t),e!==L.CONF_SERVER_ID||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfServerId",t,this.getConfInfo(L.VMR_ID)),e!==L.VMR_ID||isNullOrEmpty(t)||coreCommon.Observer.publish("changeVmrId",t),e!==L.CONF_SUBJECT||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfSubject",t),e!==L.CALL_ID||isNullOrEmpty(t)||(coreCommon.CameraControl.getInstance().setCallId(t),coreCommon.SpkControl.getInstance().setCallId(t),coreCommon.MicControl.getInstance().setCallId(t),coreCommon.Observer.publish("changeCallId",t)),e!==L.CONF_ROLE||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfRole",t),e!==L.GROUP_URI||isNullOrEmpty(t)||coreCommon.Observer.publish("changeGroupUri",t)}},{key:"getConfInfo",value:function(e){return this.confInfo[e]}},{key:"setConfFlag",value:function(e,t){var n={};n[e]=t;var r=(0,h.default)({},this.confFlag,n);this.confFlag=r}},{key:"getConfFlag",value:function(e){return this.confFlag[e]}},{key:"isUserEndConf",value:function(){return this.getConfFlag(D.IS_USER_END_CONF)}},{key:"isVideoConf",value:function(){return coreCommon.isVideoConf(this.getConfInfo(L.MEDIA_TYPE))}},{key:"isDataConf",value:function(){return 0!=(this.getConfInfo(L.MEDIA_TYPE)&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA)}},{key:"getSsrcRange",value:function(){return isNullOrEmpty(this.svc)?{}:this.svc.getSsrcRange()}},{key:"getIsSmcFirstRequestCharimanRest",value:function(){return this.getConfFlag(D.IS_SMC_FIRST_REQUEST_CHAIRMAN)}},{key:"setIsSmcFirstRequestCharimanRest",value:function(e){this.setConfFlag(D.IS_SMC_FIRST_REQUEST_CHAIRMAN,e)}},{key:"setIsFirstEnterConf",value:function(e){this.setConfFlag(D.IS_FIRST_ENTER_CONF,e)}},{key:"getIsFirstEnterConf",value:function(){return this.getConfFlag(D.IS_FIRST_ENTER_CONF)}},{key:"getIsRecall",value:function(){return this.getConfFlag(D.IS_RECALL)}},{key:"isMemberListNull",value:function(){return isNullOrEmpty(this.confInfo.members)}},{key:"getIsSvc",value:function(){return!isNullOrEmpty(this.svc)}},{key:"cleanSvc",value:function(){this.svc={}}},{key:"getCurrentConfId",value:function(){return this.confInfo.confServerId}},{key:"setIsAvcMultiViewBroadcast",value:function(e){this.setConfFlag(D.IS_AVC_MULTIVIEW_BROADCAST,e)}},{key:"getIsAvcMultiViewBroadcast",value:function(){return this.getConfFlag(D.IS_AVC_MULTIVIEW_BROADCAST)}},{key:"getCallIdOfConf",value:function(){return this.getConfInfo(L.CALL_ID)}},{key:"getGroupIdOfConf",value:function(){return this.getConfInfo(L.GROUP_URI)}},{key:"utConfCreateStart",value:function(e){coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_CREATE,extraTrackKey:null,params:e})}},{key:"utConfCreateFinish",value:function(e){coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_CREATE,extraTrackKey:null,resultParams:e})}},{key:"utConfCreateOperation",value:function(e){coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_CREATE,params:e})}},{key:"createConf",value:function(){function e(e,n,r,a,o,i,s,c){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i,s,u){var l,d,p,h,m,g,C,S,w,_,I,b,N,E,y,T,O,A,x,k,M,P,F,U,B,W,V,H,$,G,j,q,J;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=1,d=1,s&&!0===s.isCloseCameraDe&&(coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),d=0),s&&!0===s.isMuteMicDe&&(coreCommon.MicControl.getInstance().setIsMuteMicDe(),l=0),p=this.confInfo.members.length,this.setConfFlag(D.B_CONNECT_TO_CONF,!1),h=[],m=$getState().conf.hasConFRight,g=$getState().conf.showvmrornot,C=m&&g?15:1,e.next=12,coreAccount.getLoginModel();case 12:for(S=e.sent,w=S.isSupportAS,_=$getState().conf.isCreateUseFixedConfID,I=$getState().conf.IsImGroupCreate,b=g?1:0,R.info("create conf,this mediax_conf_type is",C),N=!0,E=!1,y=void 0,e.prev=21,T=(0,v.default)(this.confInfo.members);!(N=(O=T.next()).done);N=!0)A=O.value,x={number:A.number,name:A.userInfo.name,acount_id:A.userInfo.account,role:A.role,is_mute:0,email:A.userInfo.email,sms:"",is_auto_invite:!A.is_self,type:w?parseInt(A.type):0},h.push(x);e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),E=!0,y=e.t0;case 29:e.prev=29,e.prev=30,!N&&T.return&&T.return();case 32:if(e.prev=32,!E){e.next=35;break}throw y;case 35:return e.finish(32);case 36:return e.finish(29);case 37:if(k=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.priorityRtp"]),M={create_conf_info:{subject:t,group_uri:n,multi_stream_flag:r,media_type:a,language:"2052"===window.langcode?0:1,conf_encrypt_mode:2!==k?0:1,user_type:o,num_of_attendee:p,attendee:h,nopassword:i,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:C,ex_config_info:{is_send_notify:0,is_send_sms:0,is_guest_free_pwd:i}}},$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING&&(M.create_conf_info.time_zone=getDefaultTimeZone(constant.TIME_ZONE_FLAG).toString()),w&&_&&!I&&(M.create_conf_info.vmr_flag=b,M.create_conf_info.vmr_id=u),this.setConfInfo(L.MEDIA_TYPE,a),!this.isVideoConf()){e.next=45;break}return e.next=45,coreCommon.CameraControl.getInstance().initSetVideoIndex();case 45:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(P="0",coreConf.itmeetingCreateConf(P)),e.next=48,coreTup.getConfCtrlInstance();case 48:return F=e.sent,U=this,B=new PromiseObject,F.setNotifyFunc(491546,function(e){e&&e.param&&e.param.handle===U.getConfInfo(L.CONF_HANDLE)&&B.resolve(e)}),e.next=54,F.createConf(M);case 54:if(W=e.sent,V="*****"+t.substr(4),H=0===M.create_conf_info.record_type?0:1,$=0===i?1:0,!W||0!==W.result){e.next=67;break}R.info("createConf send to tup suc, handle = "+W.param.handle+",subject = "+(isNullOrEmpty(t)?"":t.substr(0,1)+"***")),this.isVideoConf()?this.utConfCreateStart([a,V,l,d,H,$]):this.utConfCreateStart([a,V,l,$]),this.setConfInfo(L.CONF_HANDLE,W.param.handle),this.setConfInfo(L.CONF_ROLE,1),this.updateConfSubject(t),coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),e.next=72;break;case 67:return this.isVideoConf()?this.utConfCreateOperation([a,V,l,d,H,$,0,W.result]):this.utConfCreateOperation([a,V,l,$,0,W.result]),R.error("create conf failed, result = "+W.result),e.next=71,this.unInit();case 71:return e.abrupt("return",{errorCode:-1});case 72:return e.next=74,B;case 74:if(G=e.sent,F.setNotifyFunc(491546,null),!G||!G.param||0!==G.param.ret){e.next=86;break}return G.param.create_conf_result?(j=G.param.create_conf_result,R.info("notify create conf success,CONFCTRL_E_EVT_CREATE_CONF_RESULT,conf_id = "+j.conf_id+",conf_role = "+j.conf_role+",media_type = "+j.media_type+",len of pas = "+j.password.length+",handle = "+G.param.handle),this.setConfInfo(L.CONF_ROLE,1),this.setConfInfo(L.CONF_SERVER_ID,j.conf_id),this.setConfInfo(L.MEDIA_TYPE,j.media_type),this.setConfInfo(L.CONF_PASSCODE,j.password)):R.warn("create_conf_result is null, res = "+(0,f.default)(G)),q=G.param.create_conf_result,J=q.conf_id,isNullOrEmpty(J)&&(J=""),this.utConfCreateFinish([1,q.conf_id]),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,params:[constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_AFTER_CREATE,J]}),e.abrupt("return",{errorCode:0});case 86:return R.info("notify create conf failed, ret = "+G.param.ret+",handle = "+G.param.handle),this.utConfCreateFinish([0,G.param.ret]),e.next=90,F.endConf(G.param.handle);case 90:return e.next=92,this.unInit();case 92:return e.abrupt("return",{errorCode:G.param.ret});case 93:case"end":return e.stop()}},e,this,[[21,25,29,37],[30,,32,36]])}));return e}()},{key:"oneKeyEnterConf",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a){var o,i,s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&this.setConfInfo(L.IS_SMC_VMR,!0),u&&!0===u.isCloseCameraDe&&coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),u&&!0===u.isMuteMicDe&&coreCommon.MicControl.getInstance().setIsMuteMicDe(),u&&!0===u.isMuteSpkDe&&coreCommon.SpkControl.getInstance().setIsMuteSpkDe(),u&&!isNullOrEmpty(u.speakerMode)&&coreCommon.SpkControl.getInstance().setSpeakerModeDe(u.speakerMode),T.isInReCall()&&(R.info("oneKeyEnterConf caused by isRecall"),this.setConfFlag(D.IS_RECALL,!0)),!a){e.next=9;break}return e.next=9,coreCommon.CameraControl.getInstance().initSetVideoIndex();case 9:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.itmeetingJoinConf(),e.next=12,E.default.oneKeyEnterConfTup(t,n,r,a,f);case 12:if(o=e.sent,i=o.errorCode,s=o.callId,0!==i){e.next=27;break}if(this.setConfInfo(L.CALL_ID,s),coreCommon.Observer.publish("showVideoPreview"),this.setConfInfo(L.CONF_ACSSCODE,t),this.saveConfPas(r),coreCommon.SpkControl.getInstance().cancelSysSpkMute(),!a){e.next=24;break}return e.next=24,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 24:return e.abrupt("return",!0);case 27:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&coreCommon.Observer.publish("meetingHWstartCallFailed",i),e.next=30,this.unInit();case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"saveConfPas",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("saveConfPas"),e.next=3,coreSecurity.encryptKMC(t);case 3:n=e.sent,R.info("save enter conf param for recall,result = ",n.result),n&&0===n.result&&this.setConfInfo(L.CONF_PWD_ENCODE,n.param.CiperText);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSavedRecallInfo",value:function(){var e=this.getConfInfo(L.CONF_SERVER_ID),t=this.getConfInfo(L.IS_SMC_VMR);return isNullOrEmpty(this.getConfInfo(L.CONF_ACSSCODE))||isNullOrEmpty(e)?(R.warn("getSavedRecallInfo no pas"),""):{isVideo:this.isVideoConf(),confid:e,access_code:this.getConfInfo(L.CONF_ACSSCODE),conf_paswd:this.getConfInfo(L.CONF_PWD_ENCODE),call_type:1,isVMR:t}}},{key:"enterConfInConfList",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("enterConfInConfList . confId =",t),this.setConfInfo(L.CONF_SERVER_ID,t),r={page_index:1,page_size:100},r.sub_conf_id=n,r.conf_id=t,e.next=7,this.getConfInfoFromServer(r);case 7:if(!((a=e.sent)&&a.param&&a.param.get_conf_info_result&&a.param.get_conf_info_result.conf_list_info)){e.next=35;break}return o=a.param.get_conf_info_result.conf_list_info,i=o.conf_id,s=o.vmr_id,this.setConfInfo(L.MEDIA_TYPE,o.media_type),this.setConfInfo(L.CONF_SERVER_ID,i),this.setConfInfo(L.VMR_ID,s),this.setConfInfo(L.CONF_ACSSCODE,o.access_number),u=o.chairman_pwd,(""===u||isNaN(u))&&(u=o.general_pwd),f=$getState().login.isSupportAS,t=f?i:isNullOrEmpty(s)?i:s,R.info("enterConfInConfList confservice confId =",t),e.next=23,this.oneKeyEnterConf(o.access_number,t,u,this.isVideoConf());case 23:if(!(l=e.sent)){e.next=29;break}return R.info("enterConfInConfList oneKeyEnterConf suc"),e.abrupt("return",!0);case 29:return R.error("enterConfInConfList oneKeyEnterConf fail"),e.next=32,this.unInit();case 32:return e.abrupt("return",!1);case 33:e.next=39;break;case 35:return R.error("enterConfInConfList getConfInfoRes fail"),e.next=38,this.unInit();case 38:return e.abrupt("return",!1);case 39:case"end":return e.stop()}},e,this)}));return e}()},{key:"enterConfByIdOnly",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,l,d,p,h,m,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("enterConfByIdOnly . confId =",t),this.setConfInfo(L.CONF_ID_INPUT,t),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,a=new PromiseObject,r.setNotifyFunc(491594,function(e){a.resolve(e)}),e.next=9,r.getConfAuthInfo(t);case 9:if(!(o=e.sent)||0!==o.result){e.next=14;break}R.info("enterConfByIdOnly getConf[Auth]Info send to tup suc"),e.next=18;break;case 14:return R.error("enterConfByIdOnly getConf[Auth]Info send to tup fail,res = "+o.result),e.next=17,this.unInit();case 17:return e.abrupt("return",{errorCode:-1});case 18:return e.next=20,a;case 20:if(i=e.sent,r.setNotifyFunc(491594,null),i&&i.param){e.next=25;break}return R.info("get[Auth]Info fail, res = "+desensitive((0,f.default)(i))),e.abrupt("return",{errorCode:-2});case 25:if(0===i.param.result){e.next=30;break}return R.info("get[Auth]Info fail, res = "+desensitive((0,f.default)(i))),e.next=29,this.unInit();case 29:return e.abrupt("return",{errorCode:i.param.result});case 30:if(s=i.param.conf_authinfo,u=s.access_number,l=s.hasAccessNumber,d=s.needPassword,p=1===l?u:"",R.info("needPassword = "+d+",hasAccessNumber = "+l),0!==d&&isNullOrEmpty(n)){e.next=46;break}return h="",isNullOrEmpty(n)||(h=n),e.next=38,this.oneKeyEnterConf(p,t,h,!0,v);case 38:if(!(m=e.sent)){e.next=43;break}return e.abrupt("return",{errorCode:0,accessNum:p});case 43:return e.abrupt("return",{errorCode:-3,accessNum:p});case 44:e.next=49;break;case 46:return e.next=48,this.unInit();case 48:return e.abrupt("return",{errorCode:-4,isNeedPwd:!0,accessNum:p});case 49:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCallEndedForOneKeyEnterConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return R.error("callEndedForOne[Key]EnterConf data or data.param is null, = "+(0,f.default)(t)),e.abrupt("return",!1);case 3:if(t.param.call_id===this.getConfInfo(L.CALL_ID)){e.next=6;break}return R.warn("callEndedForOne[Key]EnterConf callid is differ,so return"),e.abrupt("return",!1);case 6:return n=t.param.reason_code,r=t.param.endcall_reason,this.getConfFlag(D.IS_RECALL)||(this.setConfInfo(L.CONF_SERVER_ID,""),this.setConfInfo(L.CONF_ACSSCODE,""),coreCommon.Observer.publish("CallEndedInConf",n,r,this.getConfInfo(L.CALL_ID))),e.next=11,this.unInit();case 11:return window.CLIENTCONFIG.ISBIGWIN&&(4041===n&&(coreConf.NotifyConfNoStart(0),R.info("NotifyConfNoStart")),4042===n&&(coreConf.NotifyConfTermination(0),R.info("NotifyConfTermination"))),T.reCallEnterConf(),coreCall.deleteCallObject(this.getConfInfo(L.CALL_ID)),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"bookConf",value:function(){function e(e,n,r,a,o,i,s,c,u,f){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i,s,u,f,l){var d,p,h,m,g,C,S,w,_,I,b,N,E,y,T,O,A,x,k,M,L,P,F,U,B,W,V;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=this.confInfo.members.length,this.setConfFlag(D.B_CONNECT_TO_CONF,!1),p=[],e.next=5,coreAccount.getLoginModel();case 5:for(h=e.sent,m=h.isSupportAS,g=$getState().conf.isUseFixedConfID,C=!0,S=!1,w=void 0,e.prev=11,_=(0,v.default)(this.confInfo.members);!(C=(I=_.next()).done);C=!0)b=I.value,N=b.userInfo.mobile,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&N.indexOf("/")>-1&&(E=N.split("/"),N=E[0]),y={number:b.number,name:b.userInfo.name,acount_id:b.userInfo.account,role:b.role,is_mute:0,email:b.userInfo.email,sms:N,is_auto_invite:!0,type:m?parseInt(b.type):0},p.push(y);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),S=!0,w=e.t0;case 19:e.prev=19,e.prev=20,!C&&_.return&&_.return();case 22:if(e.prev=22,!S){e.next=25;break}throw w;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return T=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.priorityRtp"]),O=$getState().conf.hasConFRight,A=$getState().conf.showvmrornot,x=$getState().conf.isBookSendEmail,k=$getState().conf.isBookSendSMS,M=O&&A?15:1,L=A?1:0,R.info("book conf,this mediax_conf_type is",M),P={book_conf_info_uportal:{size:d,subject:t,group_uri:n,multi_stream_flag:r,media_type:a,start_time:i,conf_len:s,language:"2052"===window.langcode?0:1,conf_encrypt_mode:2!==T?0:1,user_type:o,num_of_attendee:d,attendee:p,time_zone:u.toString(),nopassword:f,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:M,ex_config_info:{is_send_notify:x,is_send_sms:k,is_guest_free_pwd:f}}},window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(F="1",coreConf.itmeetingCreateConf(F)),m&&g&&(P.book_conf_info_uportal.vmr_flag=L,P.book_conf_info_uportal.vmr_id=l),e.next=40,coreTup.getConfCtrlInstance();case 40:return U=e.sent,e.next=43,U.bookConf(P);case 43:return B=e.sent,W=0===f?1:0,V=2===this.confInfo.recordType?1:0,B&&0===B.result?(coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_BOOK,extraTrackKey:null,params:[a,t,i,s,u.toString(),W,V]}),R.info("bookConf success")):(coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_CONF_BOOK,params:[a,t,i,s,u.toString(),W,V,0,B.result]}),R.error("bookConf failed, result = "+B.result),window.ToastNew(language.CONFERENCE_BOOK_FAILED,2),window.clickCreateWorking=!1),e.abrupt("return",B);case 48:case"end":return e.stop()}},e,this,[[11,15,19,27],[20,,22,26]])}));return e}()},{key:"p2pTransferConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,l,d,p,h,m,g,C,S,w,_,I,b,N,E,y,T,O;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.confInfo.members.length,this.initMemberState(t),r=[],a=$getState().conf.hasConFRight,o=$getState().conf.showvmrornot,i=a&&o?15:1,e.next=8,coreAccount.getLoginModel();case 8:for(s=e.sent,u=s.isSupportAS,l=o?1:0,R.info("book conf,this mediax_conf_type is",i),d=!0,p=!1,h=void 0,e.prev=15,m=(0,v.default)(this.confInfo.members);!(d=(g=m.next()).done);d=!0)C=g.value,S=!0,(C.role||C.number===t.userInfo.number)&&(S=!1),w={number:C.number,name:C.userInfo.name,acount_id:C.userInfo.account,role:C.role,is_mute:0,email:C.userInfo.email,sms:"",is_auto_invite:S,type:u?parseInt(C.type):0},r.push(w);e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),p=!0,h=e.t0;case 23:e.prev=23,e.prev=24,!d&&m.return&&m.return();case 26:if(e.prev=26,!p){e.next=29;break}throw h;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return _={call_id:t.callId,create_conf_info:{subject:t.confSubject,group_uri:t.groupUri,multi_stream_flag:t.isMultiStream,media_type:t.mediaType,language:"2052"===window.langcode?0:1,user_type:t.userType,num_of_attendee:n,attendee:r,nopassword:t.noPassword,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:i}},u&&$getState().login.isFreeUser&&(_.create_conf_info.vmr_flag=l),e.next=35,coreTup.getConfCtrlInstance();case 35:return I=e.sent,b=this,N=new PromiseObject,I.setNotifyFunc(491546,function(e){e&&e.param&&e.param.handle===b.getConfInfo(L.CONF_HANDLE)&&N.resolve(e)}),e.next=41,I.p2pTransferConf(_);case 41:if(!(E=e.sent)||0!==E.result){e.next=51;break}y="*****"+t.confSubject.substr(4),R.info("p2pTransferConf success, confhandle = "+E.param.conf_handle+",confSubject = "+desensitive(y)),this.confInfo.confHandle=E.param.conf_handle,this.setConfInfo(L.CONF_ROLE,1),this.updateConfSubject(t.confSubject),coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),e.next=53;break;case 51:return R.error("p2pTransferConf failed, result = "+E.result),e.abrupt("return",{errorCode:-1});case 53:return e.next=55,N;case 55:if(T=e.sent,I.setNotifyFunc(491546,null),!T||!T.param||0!==T.param.ret){e.next=62;break}return T.param.create_conf_result?(O=T.param.create_conf_result,R.info("notify create conf success,CONFCTRL_E_EVT_CREATE_CONF_RESULT,conf_id = "+O.conf_id+",conf_role = "+O.conf_role+",media_type = "+O.media_type+",len of pas = "+O.password.length+",handle = "+T.param.handle),this.setConfInfo(L.CONF_ROLE,O.conf_role),this.setConfInfo(L.CONF_SERVER_ID,O.conf_id),this.setConfInfo(L.MEDIA_TYPE,O.media_type),this.setConfInfo(L.CONF_PASSCODE,O.password)):R.warn("create_conf_result is null, res = "+(0,f.default)(T)),e.abrupt("return",{errorCode:0});case 62:return R.info("notify create conf failed, ret = "+T.param.ret),e.abrupt("return",{errorCode:T.param.ret});case 64:case"end":return e.stop()}},e,this,[[15,19,23,31],[24,,26,30]])}));return e}()},{key:"initMemberState",value:function(e){if(R.info("init conf member state for p2p trans to conf"),e.selfInfo){var t=this.confInfo.members.findIndex(function(t){return e.selfInfo.account===t.userInfo.account});-1!==t&&(this.confInfo.members[t].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF)}}},{key:"upgradeConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={conf_handle:this.confInfo.confHandle,add_media:{media_type:16|this.confInfo.mediaType,group_uri:this.confInfo.groupUri}},e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.upgradeConf(t);case 6:if(!(r=e.sent)||0!==r.result){e.next=12;break}return R.info("upgrade conf success"),e.abrupt("return",!0);case 12:R.error("upgrade conf failed, result = "+r.result);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"endConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setConfFlag(D.IS_USER_END_CONF,!0),this.getConfFlag(D.B_CONNECT_TO_CONF)){e.next=5;break}return R.info("not connect to conf, request conf control [token] before end conf"),e.next=5,this.requestConfToken();case 5:if(t=!1,isNullOrEmpty(this.getConfInfo(L.CONF_HANDLE))){e.next=37;break}return R.info("endConf confHandle is exsit"),e.next=10,coreTup.getConfCtrlInstance();case 10:return n=e.sent,r=this,a=new PromiseObject,n.setNotifyFunc(491547,function(e){e&&e.param&&e.param.handle===r.getConfInfo(L.CONF_HANDLE)&&a.resolve(e)}),e.next=16,n.endConf(this.getConfInfo(L.CONF_HANDLE));case 16:if(t=e.sent,o=this.getCurrentConfId(),!t||0!==t.result){e.next=32;break}return R.info("endconf send to tup suc"),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,params:[o]}),i=setTimeout(function(){a.resolve({param:{ret:-1}})},3e3),e.next=24,a;case 24:s=e.sent,R.info("endconf result back,res = "+(0,f.default)(s)),clearTimeout(i),i=null,s&&s.param&&0===s.param.ret?(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,resultParams:[1]}),coreConf.getConfInfoFromDb()):coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,resultParams:[0,s.param.ret]}),t=!0,e.next=35;break;case 32:R.info("endconf send to tup fail,errorCode = "+(0,f.default)(t)),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_END,params:[0,t.result]}),t=!1;case 35:e.next=49;break;case 37:if(isNullOrEmpty(this.getConfInfo(L.CALL_ID))){e.next=48;break}return e.next=40,coreTup.getCallInstance();case 40:return u=e.sent,e.next=43,u.endCall(this.getConfInfo(L.CALL_ID));case 43:t=e.sent,R.info("endConf endcall res = "+(0,f.default)(t)),t=!(!t||0!==t.result),e.next=49;break;case 48:R.info("end conf do nothing");case 49:return e.next=51,this.unInit();case 51:return coreCall.deleteCallObject(this.getConfInfo(L.CALL_ID)),t?R.info("end conf success"):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_END,params:[0,t.result]}),R.error("end conf failed, result = "+t.result)),this.timeoutTimer=setTimeout(function(){R.info("endConf 500ms leave dataconf"),window.CLIENTCONFIG.ISMOBILE?k.beLeaveDataConf():k.terminateconf()},500),e.abrupt("return",t);case 55:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfMTnumber",value:function(e){coreCommon.Observer.publish("ConfMTnumber",e.param)}},{key:"handleConfConnected",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return R.error("handleConfConnected data is null"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.getConfInfo(L.CONF_HANDLE)===t.param.handle){e.next=6;break}return R.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 6:if(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),R.info("handleConfConnected ",t.param.handle),coreCommon.BigwinObserver.publish("OnChangeHasSent",!1),this.setConfFlag(D.B_CONNECT_TO_CONF,!0),this.setConfInfo(L.CALL_ID,t.param.call_id),n=!1,t.param.connect_info&&(r=t.param.connect_info.conf_subject,R.info("conf connected! conf_subject = "+handlePhoneNumber(r.substr(0,3))+handlePhoneNumber(r.substr(3))+",media_type = "+t.param.connect_info.media_type+",is_svc_conf = "+t.param.connect_info.is_svc_conf),this.setConfInfo(L.MEDIA_TYPE,t.param.connect_info.media_type),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=""),this.updateConfSubject(r),n=1===t.param.connect_info.is_svc_conf),!window.isHubEnv){e.next=17;break}if(this.isVideoConf()){e.next=17;break}return R.info("not video conf in maxhub, return confConnected"),e.abrupt("return");case 17:if(!n){e.next=25;break}return R.info("handleConfConnected isSvc = "+n+",current isSvc = "+this.getIsSvc()),a=!1,this.getIsSvc()||(this.svc=new A.default,a=!0),this.svc.changeSsrcRange(t.param.connect_info),a&&coreCommon.Observer.publish("changeIsSvcConf"),e.next=25,this.svc.init(this.getConfInfo(L.CALL_ID));case 25:return!1===this.getConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED)&&(coreCommon.Observer.publish("ConfConnected",this.isCallTransToConf),this.setConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED,!0),!0===this.getConfFlag(D.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY)&&coreCommon.Observer.publish("SvcSessionModify")),e.next=28,this.joinConf();case 28:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfInfoNotify",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return R.error("handleConfInfoNotify data is null"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.confInfo.confHandle===t.param.handle){e.next=6;break}return R.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 6:if(n=!1,t.param.conf_info?(this.setConfInfo(L.VMR_ID,t.param.conf_info.vmr_id),this.setConfInfo(L.CONF_SERVER_ID,t.param.conf_info.conf_id),this.setConfInfo(L.MEDIA_TYPE,t.param.conf_info.media_type),this.setConfInfo(L.DATA_RANDOM,t.param.conf_info.data_random),this.setConfInfo(L.AC_TEMP_TOKEN,t.param.conf_info.acTmpToken),r=$getState().conf.confIdInput,r&&$dispatch(coreUi.changeConfIdInput(t.param.conf_info.vmr_id||t.param.conf_info.conf_id)),n=1===t.param.conf_info.is_svc_conf):R.error("handleConfInfoNotify data.param.conf_info is null"+(0,f.default)(t.param.conf_info)),!window.isHubEnv){e.next=12;break}if(this.isVideoConf()){e.next=12;break}return coreCommon.Observer.publish("confInfoNotifyIsNotVideoConf"),e.abrupt("return");case 12:if(window.isHubEnv&&(window.pairId&&0!==window.pairId&&(R.info("send maxhub pair join conf success"),coreConf.sendJoinPairResult({id:window.pairId,result:constant.PAIR_CONF_RESULT.SUCCESS})),R.info("send maxhub join conf success"),coreConf.NotifyMyJoinConf(0,"")),b.default.getEnterDataConfInAdvance()){e.next=16;break}return e.next=16,this.enterDataConf(t);case 16:if(this.getDetailConfInfo(),!n){e.next=25;break}return R.info("handleConfInfoNotify isSvc = "+n+",current isSvc = "+this.getIsSvc()),a=!1,this.getIsSvc()||(this.svc=new A.default,a=!0),this.svc.changeSsrcRange(t.param.conf_info),a&&coreCommon.Observer.publish("changeIsSvcConf"),e.next=25,this.svc.init(t.param.call_id);case 25:!1===this.getConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED)&&(coreCommon.Observer.publish("ConfConnected",this.isCallTransToConf),this.setConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED,!0),!0===this.getConfFlag(D.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY)&&coreCommon.Observer.publish("SvcSessionModify")),coreCommon.Observer.publish("ConfInfoNotify");case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSvcSeessionModify",value:function(e){if(isNullOrEmpty(e)||isNullOrEmpty(e.param)||isNullOrEmpty(e.param.svc_lables))return void R.error("handleSvcSeessionModify param is null,param = "+(0,f.default)(t));var t=e.param;if(1!==t.is_svccall)return void R.warn("handleSvcSeessionModify is not svcConf, no need deal");R.info("handleSvcSeessionModify isSvc = true, current isSvc = "+this.getIsSvc());var n=!1;this.getIsSvc()||(this.svc=new A.default,n=!0),this.svc.changeSsrcRange(t,!0),n&&(coreCommon.Observer.publish("changeIsSvcConf"),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreCommon.CameraControl.getInstance().resetCameraOrient()),!0===this.getConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED)?coreCommon.Observer.publish("SvcSessionModify"):this.setConfFlag(D.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY,!0)}},{key:"getConfInfoFromServer",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new PromiseObject,e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,a=function(e){if(e.param&&e.param.get_conf_info_result&&e.param.get_conf_info_result.conf_list_info){e.param.get_conf_info_result.conf_list_info.conf_id===s.getConfInfo(L.CONF_SERVER_ID)?(R.info("confInfo for getConfInfoFromServer suc"),n.resolve(e)):R.info("confInfo for getConfInfoFromServer wait for next")}else R.error("confInfo for getConfInfoFromServer error"),n.resolve(e)},r.setMultiNotifyFunc(491564,a),e.next=8,r.getConfInfo(t);case 8:return o=e.sent,o&&0===o.result?R.info("getConfInfoFromServer getConfInfo  send to tup suc"):(R.error("getConfInfoFromServer getConfInfo send to tup fail,res = "+o.result),n.resolve(!1)),e.next=12,n;case 12:return i=e.sent,r.getNotifyCallbacks(491564).remove(a),e.abrupt("return",i);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDetailConfInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(this.getSavedRecallInfo())||window.isSupportiDo){e.next=3;break}return R.info("no need to get confInfo"),e.abrupt("return");case 3:return t=this.getConfInfo(L.CONF_SERVER_ID),n={page_index:1,page_size:100},n.sub_conf_id="0",n.conf_id=t,e.next=9,this.getConfInfoFromServer(n);case 9:r=e.sent,r&&r.param&&r.param.get_conf_info_result&&r.param.get_conf_info_result.conf_list_info?(a=r.param.get_conf_info_result.conf_list_info,t=a.conf_id,o=a.vmr_id,this.setConfInfo(L.CONF_SERVER_ID,t),this.setConfInfo(L.VMR_ID,o),this.setConfInfo(L.CONF_ACSSCODE,a.access_number),i=a.chairman_pwd,(""===i||isNaN(i))&&(i=a.general_pwd),this.saveConfPas(i),s=a.conf_subject,R.info("handleGetConfInfoRes suc,confSubject = "+(s?s.substr(0,1)+"***":"")),this.updateConfSubject(s)):R.info("handleGetConfInfoRes fail");case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"enterDataConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(a)){e.next=4;break}this.isDataConf()&&(R.info("[IT-Meeting] start enter data conf."),t={},t.confKey=this.getConfInfo(L.CONF_PASSCODE),t.mediaType=this.getConfInfo(L.MEDIA_TYPE),t.confServerId=this.getConfInfo(L.CONF_SERVER_ID),t.confCallId=this.getConfInfo(L.CALL_ID),coreConf.handleSmcEnterDataConf(t)),e.next=20;break;case 4:if(!window.CLIENTCONFIG.USE_MEETING||""===this.getConfInfo(L.DATA_RANDOM)&&!this.isDataConf()){e.next=20;break}if(window.CLIENTCONFIG.ISMOBILE||(R.info(" confinfonotify  PC Logic  "),coreCommon.Observer.publish("OnConfInfoNotify",{})),b.default.getDeployMode()===constant.MEETING_NET_TYPE.SMC_MEETING){e.next=13;break}return n=a.param.conf_info,n.getParamType=3,e.next=11,coreConf.joinDataConf(n,this.confInfo.confCallId);case 11:e.next=20;break;case 13:r={},r.confKey=this.getConfInfo(L.CONF_PASSCODE),r.confToken=this.getConfInfo(L.AC_TEMP_TOKEN),r.mediaType=this.getConfInfo(L.MEDIA_TYPE),r.confServerId=this.getConfInfo(L.CONF_SERVER_ID),r.confCallId=this.getConfInfo(L.CALL_ID),coreConf.handleSmcEnterDataConf(r);case 20:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfRightResult",value:function(e){if(R.info("handleConfRightResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle)}},{key:"setSpeakerReport",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING){e.next=6;break}return R.info("setSpeakerReport, confHandle = ",this.confInfo.confHandle),e.next=4,coreTup.getConfCtrlInstance();case 4:t=e.sent,t.setSpeakerReport(this.confInfo.confHandle);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfAttendeeListUpdate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("handleConfAttendeeListUpdate, handle="+t.param.handle+", attendeeNum="+t.param.conf_status.num_of_participant),this.confInfo.confHandle===t.param.handle){e.next=4;break}return R.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 4:0===t.param.conf_status.num_of_participant&&(R.info("handleConfAttendeeListUpdate, clear AttendeeList"),t.param.conf_status.participants=[]),this.confInfo.updatedParticipants=t.param.conf_status.participants,t.param.conf_status.is_all_mute?this.confInfo.isAllMute=1:this.confInfo.isAllMute=0,this.confInfo.numOfParticipant=t.param.conf_status.num_of_participant,this.confInfo.confSubject=t.param.conf_status.subject,coreCommon.Observer.publish("AttendeeListUpdate",t.param.conf_status.participants,t.param.conf_status.subject,!1,t.param.conf_status.is_all_mute,t.param.conf_status.allow_unmute,t.param.conf_status.record_status,t.param.conf_status.record_type);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleBigConfInfo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("BigConfInfoNotify",t);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleVideoWatchResult",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.param||this.confInfo.confHandle===t.param.handle){e.next=3;break}return R.error("handleVideoWatchResult not same conf, ret.handle is = "+t.param.handle+",confInfo.confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:t&&t.param?(0===t.param.operation_rsp_reason?R.error("handleVideoWatchResult fail,hanlde = "+t.param.handle+",operation_rsp_reason = "+t.param.operation_rsp_reason):R.info("handleVideoWatchResult suc,hanlde = "+t.param.handle),coreCommon.Observer.publish("handleVideoWatchRes",t.param.operation_rsp_reason)):R.error("handleVideoWatchResult ret is null or ret.param is null");case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"lockConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("lockAttendee, operator isLock = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.lockConf(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleLockConfResult",value:function(e){if(R.info("handleLockConfResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("lockResult",e)}},{key:"handleConfstateLock",value:function(e){R.info("handleConfstateLock ",e.param.handle),coreCommon.Observer.publish("lockState",e)}},{key:"handup",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("handup, operator isHandup = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,e.next=6,r.handupAttendee(this.confInfo.confHandle,n,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleHandupAttendeeResult",value:function(e){if(R.info("handleHandupAttendeeResult ",e.param.handle,this.confInfo.confHandle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("handupResult",e)}},{key:"muteAttendee",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.confInfo.members.find(function(e){return e.number===n})||R.error("not conf attendee, numer =",handlePhoneNumber(n)),R.info("muteAttendee, operator ismute = "+t+", attendee = "+handlePhoneNumber(n)),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,e.next=7,r.muteAttendee(this.confInfo.confHandle,t,n);case 7:return a=e.sent,a&&0===a.result?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE_ATTENDEE,params:[t?1:0,1]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE_ATTENDEE,params:[t?1:0,0,a.result]}),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMuteAttendeeResult",value:function(e){if(R.info("handleMuteAttendeeResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("MuteAttendeeResult",e)}},{key:"muteConf",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("muteConf, operator ismute = "+t+", isAllowUnmute = "+n+", confHandle = "+this.confInfo.confHandle),r=new PromiseObject,e.next=4,coreTup.getConfCtrlInstance();case 4:return a=e.sent,o=this,i=function(e){e&&e.param&&e.param.handle!==o.getConfInfo(L.CONF_HANDLE)?R.warn("not same conf, wait for next, confHandle is ",e.param.handle):r.resolve(e)},a.setNotifyFunc(491555,i),e.next=10,a.muteConf(this.confInfo.confHandle,t,n);case 10:if(!(s=e.sent)||0!==s.result){e.next=16;break}coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,params:[this.getCurrentConfId(),t?1:0]}),R.info("muteConf send to tup suc"),e.next=19;break;case 16:return R.error("muteconf send to tup fail, errorcode = "+s.result),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE,params:[t?1:0]}),e.abrupt("return",{errorCode:-1,to_mute:0===t});case 19:return e.next=21,r;case 21:if(u=e.sent,this.confInfo.isAllMute=u.param.to_mute,!u||!u.param||0!==u.param.ret){e.next=29;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,resultParams:[1]}),R.info("muteconf callback suc"),e.abrupt("return",{errorCode:0,to_mute:u.param.to_mute});case 29:return R.info("muteconf callback fail,error = "+(0,f.default)(u)),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,resultParams:[0,u.param.ret]}),e.abrupt("return",{errorCode:u.param.ret,to_mute:u.param.to_mute});case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"allowUnmuteConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("muteConf, operator isAllowUnmute = "+t+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.allowUnmuteConf(this.confInfo.confHandle,t);case 6:if(!(r=e.sent)||0!==r.result){e.next=13;break}return R.info("modify unmute send to tup suc"),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_ALLOW_UNMUTE,params:[t?1:0,1]}),e.abrupt("return",{errorCode:0});case 13:return R.error("modify unmute send to tup fail, errorcode = "+r.result),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_ALLOW_UNMUTE,params:[t?1:0,0,r.result]}),e.abrupt("return",{errorCode:-1});case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfBroadCastLocal",value:function(e){R.info("handleConfBroadCastLocal ",e.param.handle),coreCommon.Observer.publish("IsBroadcastLocal",e)}},{key:"postponeConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("postponeConf,time = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.postponeConfTup(this.getConfInfo(L.CONF_HANDLE),t);case 6:r=e.sent,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(0,M.itmeetingExtendConf)(t),r&&0===r.result?(R.info("postponeConf suc"),a=this.getCurrentConfId(),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_EXTEND,extraTrackKey:null,params:[a,t]})):(R.info("postponeConf fail"),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_EXTEND,params:[t,0,r.result]}));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"releaseChairman",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("releaseChairman, confHandle = "+this.confInfo.confHandle),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(n=!1,coreConf.itmeetingChairman(n)),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,e.next=7,r.releaseChairman(this.confInfo.confHandle,t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleReleaseChairmanResult",value:function(e){if(R.info("handleReleaseChairmanResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);$getState().conf.isVideoConf;window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISMAC?coreCommon.Observer.publish("ReleaseChairmanResult",e):coreCommon.Observer.publish("handleConfReleaseChairman",e)}},{key:"requestChairman",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("requestChairman, confHandle = "+this.confInfo.confHandle),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=!0,coreConf.itmeetingChairman(r)),a=$getState().conf.memberListInfo,!(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF}))){e.next=8;break}window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2),e.next=13;break;case 8:return e.next=10,coreTup.getConfCtrlInstance();case 10:return i=e.sent,e.next=13,i.requestChairman(this.confInfo.confHandle,t,n);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleReqChairmanResult",value:function(e){if(R.info("handleReqChairmanResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);!$getState().conf.showqusetchairman||window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISMAC?coreCommon.Observer.publish("ReqChairmanResult",e):coreCommon.Observer.publish("handleConfRequestChairman",e)}},{key:"handleEnterPwdToChairmanResult",value:function(e){if(R.info("smc reqChairman result",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("EnterPwdToChairmanResult",e)}},{key:"changeNickName",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("changeNickName  changeNickName send request, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,e.next=6,r.changeNickName(this.confInfo.confHandle,t,n);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleChangeNickNameResult",value:function(e){coreCommon.Observer.publish("ReqChangeNickNameResult",e)}},{key:"reInviteAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("reInvite attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),n=void 0,r=this.confInfo.members.length,a=-1,e.next=6,coreAccount.getLoginModel();case 6:o=e.sent,i=o.isSupportAS,s=0;case 9:if(!(s<r)){e.next=18;break}if(this.confInfo.members[s].number!==t){e.next=15;break}return this.confInfo.members[s].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,n={number:t,name:this.confInfo.members[s].userInfo.name,acount_id:this.confInfo.members[s].userInfo.account,role:this.confInfo.members[s].role,is_mute:0,email:this.confInfo.members[s].userInfo.email,sms:this.confInfo.members[s].userInfo.sms,is_auto_invite:1,type:i?parseInt(this.confInfo.members[s].type):0},a=s,e.abrupt("break",18);case 15:++s,e.next=9;break;case 18:if(!n){e.next=31;break}return coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),u={num_of_attendee:1,attendee_info:[n]},e.next=23,coreTup.getConfCtrlInstance();case 23:return f=e.sent,e.next=26,f.inviteAttendee(this.confInfo.confHandle,u);case 26:l=e.sent,l&&0===l.result?coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,params:[this.getCurrentConfId()]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_INVITE,params:[0,l.result]}),(isNullOrEmpty(l)||0!==l.result)&&a>=0&&(this.confInfo.members[a].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0)),e.next=32;break;case 31:R.error("can not find conf member");case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"addAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,p,m,v,g,C,S,w,I,b,N;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("add attendee size = "+t.length+", confHandle = "+this.confInfo.confHandle),n=[],r=[],e.next=5,coreAccount.getLoginModel();case 5:a=e.sent,o=a.isSupportAS,i=0;case 8:if(!(i<t.length)){e.next=33;break}if(s=t[i],window.isSupportiDo){e.next=24;break}u=!1,f=this.confInfo.members.length,l=0;case 14:if(!(l<f)){e.next=22;break}if(this.confInfo.members[l].number!==s.number){e.next=19;break}return this.confInfo.members[l].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT?(R.info("attendee("+handlePhoneNumber(s.number)+") is quit state in conf, reinvite"),this.confInfo.members[l].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,d={number:s.number,name:this.confInfo.members[l].userInfo.name,acount_id:this.confInfo.members[l].userInfo.account,role:this.confInfo.members[l].role,is_mute:0,email:this.confInfo.members[l].userInfo.email,sms:this.confInfo.members[l].userInfo.sms,is_auto_invite:1,type:o?parseInt(this.confInfo.members[i].type):0},n.push(d)):R.info("attendee("+handlePhoneNumber(s.number)+") is already in conf, do nothing"),u=!0,e.abrupt("break",22);case 19:++l,e.next=14;break;case 22:if(!u){e.next=24;break}return e.abrupt("continue",30);case 24:p={number:s.number,userInfo:s,role:0,is_mute:0,is_deaf:0,state:constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,hand_state:0,media_type:0,is_self:0,is_speaking:!1,speak_volume:0,participant_id:"",is_broadcast:0},this.confInfo.members.push(p),this.confInfo.numOfParticipant++,s.number===s.bind_no&&r.push(s),m={number:s.number,name:s.name,acount_id:s.account,role:0,is_mute:0,email:s.email,sms:s.sms,is_auto_invite:1,type:o?parseInt(s.type):0},n.push(m);case 30:++i,e.next=8;break;case 33:if(!(n&&n.length>0)){e.next=66;break}window.isSupportiDo||coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),this.dealAddToGroup(r,this.confInfo.groupUri),v=[],g=!0,C=(0,h.default)([],$getState().conf.memberListInfo),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(C=C.filter(function(e){return e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT})),S=0;case 41:if(!(S<n.length)){e.next=55;break}g=!0,w=0;case 44:if(!(w<C.length)){e.next=51;break}if(n[S].number.replace("+86","")!==C[w].number.replace("+86","")||C[w].state==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT){e.next=48;break}return g=!1,e.abrupt("break",51);case 48:w++,e.next=44;break;case 51:g&&v.push(n[S]);case 52:S++,e.next=41;break;case 55:if(!(v.length>0)){e.next=64;break}return I={num_of_attendee:v.length,attendee_info:v},e.next=59,coreTup.getConfCtrlInstance();case 59:return b=e.sent,e.next=62,b.inviteAttendee(this.confInfo.confHandle,I);case 62:N=e.sent,isNullOrEmpty(N)||0!==N.result?(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_INVITE,[0,N.result]),R.error("invite attendees failed"),"win"===window.CLIENTCONFIG.PLATFORM&&_.SvcAtdManager.alertBox("LANG_NATIVE_INVITE_FAILED",1),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(language.LANG_NATIVE_INVITE_FAILED,4,!1,"pcToast",""),this.updateAttendeesToQuit(t)):(coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,params:[this.getCurrentConfId()]}),R.info("invite attendees succeed"));case 64:e.next=67;break;case 66:R.error("no attendee to invite");case 67:case"end":return e.stop()}},e,this)}));return e}()},{key:"hangupAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("userClick  hangup attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.hangupAttendee(this.confInfo.confHandle,t);case 6:r=e.sent,r&&0===r.result?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HANGUP,params:[1]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HANGUP,params:[0,r.result]});case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleHangUpAttendResult",value:function(e){if(R.info("handleHangUpAttendResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("hangupResult",e)}},{key:"callAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("call attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.callAttendee(this.confInfo.confHandle,t);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("remove attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.removeAttendee(this.confInfo.confHandle,t);case 6:return r=e.sent,R.info("bbbbbbbb remove attender",r),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"localRemoveAttendee",value:function(e){R.info("localRemoveAttendee attendeeNum ",handlePhoneNumber(e));var t=this.confInfo.members.length,n=null;if(!window.CLIENTCONFIG.ENABLE_IT_MEETING)for(var r=0;r<t;++r)if(this.confInfo.members[r].number===e){n=this.confInfo.members[r],this.confInfo.members.splice(r,1);break}return n}},{key:"updateAttendeesToQuit",value:function(e){for(var t=0;t<e.length;++t)for(var n=e[t],r=this.confInfo.members.length,a=0;a<r;++a)if(this.confInfo.members[a].number===n.number){this.confInfo.members[a].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;break}coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0)}},{key:"handleConfIncoming",value:function(e){if(isNullOrEmpty(e)||isNullOrEmpty(e.param)||isNullOrEmpty(e.param.conf_incoming_ind))return R.error("handleConfIncoming incomingInfo is null, incomingInfo = "+JSON.stringfy(e)),!1;if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&coreCall.getCallCount()>0)return R.warn("already exist call, reject conf"),this.confInfo.confHandle=e.param.handle,this.rejectConf(e.param.handle),!1;R.info("conf incoming, handle = "+e.param.handle+", caller is "+handlePhoneNumber(e.param.conf_incoming_ind.number)+", mediaType is "+e.param.conf_incoming_ind.media_type),this.setConfInfo(L.CONF_SERVER_ID,e.param.conf_incoming_ind.conf_id),this.setConfInfo(L.CONF_HANDLE,e.param.handle),this.setConfInfo(L.CALL_ID,e.param.call_id),this.setConfInfo(L.GROUP_URI,e.param.conf_incoming_ind.group_uri),this.setConfInfo(L.COMPERE_NUMBER,e.param.conf_incoming_ind.number),this.setConfInfo(L.MEDIA_TYPE,e.param.conf_incoming_ind.media_type);var t=e.param.conf_incoming_ind.subject;!window.isSupportiDo&&isNullOrEmpty(t)&&(t=e.param.conf_incoming_ind.number+language.CONFERENCE_SUBJECT_INFO),R.info("handleConfIncoming subject = "+(t<2?t.substr(0,1)+"***":t.substr(0,1)+"***"+t.substr(-1))),this.updateConfSubject(t);var n={confHandle:this.getConfInfo(L.CONF_HANDLE),confSubject:this.getConfInfo(L.CONF_SUBJECT),compereNumber:this.getConfInfo(L.COMPERE_NUMBER),mediaType:this.getConfInfo(L.MEDIA_TYPE),groupUri:this.getConfInfo(L.GROUP_URI),isVideo:this.isVideoConf()};return coreCommon.Observer.publish("ConfIncoming",n),!0}},{key:"handleConfBeTransferToConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)&&!isNullOrEmpty(t.param)){e.next=3;break}return R.error("handleConfBeTransferToConf data.param error"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.isCallTransToConf&&coreCommon.CameraControl.getInstance().unInit(),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),this.setConfInfo(L.CONF_HANDLE,t.param.handle),this.setConfInfo(L.CALL_ID,t.param.call_id),t.param.conf_info?(this.updateConfSubject(t.param.conf_info.subject),this.setConfInfo(L.GROUP_URI,t.param.conf_info.group_uri),this.setConfInfo(L.MEDIA_TYPE,t.param.conf_info.media_type),isNullOrEmpty(this.getConfInfo(L.CONF_PASSCODE))&&this.setConfInfo(L.CONF_PASSCODE,t.param.conf_info.conf_id)):R.warn("handleConfBeTransferToConf data.param.conf_info error"+(0,f.default)(t.param)),!window.isHubEnv||this.getConfInfo(L.IS_VIDEO_CONF)){e.next=11;break}return R.info("not video conf in maxhub, return handleConfBeTransferToConf"),e.abrupt("return");case 11:return e.next=13,this.joinConf();case 13:if(!0!==this.getConfFlag(D.IS_RECALL)){e.next=31;break}if(R.info("start mute speak on recall"),e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=20;break}return e.next=19,window.isSimCardCall();case 19:e.t0=e.sent;case 20:if(!e.t0){e.next=30;break}return R.info("confTransferToConf now is in simcard call"),e.next=24,coreCommon.SpkControl.getInstance().muteSpk(!0,!1);case 24:return e.next=26,coreCall.muteMicAndSpeaker(1,1);case 26:return e.next=28,coreCall.switchAudioChannel(1);case 28:e.next=31;break;case 30:coreCommon.SpkControl.getInstance().muteSpkForIntervel(3700);case 31:b.default.getEnterDataConfInAdvance()&&this.enterDataConf();case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateConfSubject",value:function(e){var t=this.getConfInfo(L.CONF_SUBJECT);isNullOrEmpty(e)||(t=e),isNullOrEmpty(t)&&(t=this.getConfInfo(L.CONF_ACSSCODE)),this.setConfInfo(L.CONF_SUBJECT,t)}},{key:"joinConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getConfFlag(D.IS_ALREADY_JOIN_CONF)){e.next=3;break}return R.info("already join conf, so return"),e.abrupt("return");case 3:if(this.setConfFlag(D.IS_ALREADY_JOIN_CONF,!0),R.info("join conf start"),T.reCallSuc(),window.webView&&window.webView.setKeepScreenOn(),!this.isVideoConf()){e.next=16;break}return coreCall.newCallObject(this.getConfInfo(L.CALL_ID),1),R.info("joinConf isVideoConf to deal camera"),e.next=12,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 12:return e.next=14,coreCommon.CameraControl.getInstance().resetCameraOrient(!0);case 14:e.next=17;break;case 16:coreCall.newCallObject(this.getConfInfo(L.CALL_ID),0);case 17:coreCommon.MicControl.getInstance().init(),coreCommon.SpkControl.getInstance().init(),R.info("video or video conf open speaker outer : "+window.otherAudioDevicesConnect),!window.otherAudioDevicesConnect&&this.isVideoConf()?coreCommon.SpkControl.getInstance().initSetSpeaker(!0):coreCommon.SpkControl.getInstance().initSetSpeaker(!1),coreCommon.SpkControl.getInstance().cancelSysSpkMute(),R.info("join conf isShowDevicesList: "+$getState().conf.isShowDevicesList),t=$getState().conf.isShowDevicesList,R.info("isShowDevicesList: "+t),t&&coreCommon.isWin()&&(R.info(" showDevicesListFunc() "),coreSetting.showDevicesListFunc()),this.setConfFlag(D.IS_FIRST_ENTER_CONF,!0);case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.confInfo.confHandle){e.next=3;break}return R.error("not same conf, confId = "+t+", confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:return R.info("reject conf, confHandle = "+t),e.next=6,coreTup.getConfCtrlInstance();case 6:return n=e.sent,e.next=9,n.rejectConf(t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptConf",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.confInfo.confHandle){e.next=3;break}return R.error("not same conf, confId = "+t+", confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:return R.info("accept conf, confHandle = "+t),e.next=6,coreTup.getConfCtrlInstance();case 6:return r=e.sent,e.next=9,r.acceptConf(t,n);case 9:if(a=e.sent,(0,h.default)(a,{groupUri:this.confInfo.groupUri}),!a||0!==a.result){e.next=16;break}if(!n){e.next=15;break}return e.next=15,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 15:coreCommon.SpkControl.getInstance().cancelSysSpkMute();case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"leaveConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("leave conf, confHandle = "+this.getConfInfo(L.CONF_HANDLE)+"callId = "+handlePhoneNumber(this.getConfInfo(L.CALL_ID))),$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING||window.isSmcFirstRequest||window.isSupportiDo||this.setConfFlag(D.IS_SMC_FIRST_REQUEST_CHAIRMAN,!0),R.info("leaveMobileDataConf type "+this.getConfInfo(L.MEDIA_TYPE)),e.next=5,k.leaveDataConf(a);case 5:if(t=!1,isNullOrEmpty(this.getConfInfo(L.CONF_HANDLE))){e.next=16;break}return e.next=9,coreTup.getConfCtrlInstance();case 9:return n=e.sent,e.next=12,n.leaveConf(this.confInfo.confHandle);case 12:t=e.sent,R.info("leave conf res "+(0,f.default)(t)),e.next=27;break;case 16:if(isNullOrEmpty(this.getConfInfo(L.CALL_ID))){e.next=26;break}return e.next=19,coreTup.getCallInstance();case 19:return r=e.sent,e.next=22,r.endCall(this.getConfInfo(L.CALL_ID));case 22:t=e.sent,R.info("leaveConf endcall res = "+(0,f.default)(t)),e.next=27;break;case 26:R.info("leave conf do nothing");case 27:if(coreCall.deleteCallObject(this.getConfInfo(L.CALL_ID)),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=37;break}if(0!==t.result){e.next=34;break}return e.next=32,this.unInit();case 32:e.next=35;break;case 34:R.info("hwTupConfCtrlSdk leaveconf fail");case 35:e.next=39;break;case 37:return e.next=39,this.unInit();case 39:return e.abrupt("return",t);case 40:case"end":return e.stop()}},e,this)}));return e}()},{key:"broadcastAttendee",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("broadcastAttendee, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,n=1===t?n:"",e.next=7,r.broadcastAttendee(this.confInfo.confHandle,t,n);case 7:return a=e.sent,a&&0===a.result?coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,params:[this.getCurrentConfId(),t?1:0]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,params:[t?1:0,0,a.result]}),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfEnded",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.param.handle===this.getConfInfo(L.CONF_HANDLE)){e.next=3;break}return R.error("not same conf, confId = "+t.param.handle+", confHandle = "+this.getConfInfo(L.CONF_HANDLE)),e.abrupt("return",0);case 3:return R.info("conf ended, confHandle = "+this.getConfInfo(L.CONF_HANDLE)),t&&t.param&&836===t.param.reason&&!isNullOrEmpty(this.getSavedRecallInfo())?coreCall.recallOrHangup(this.getSavedRecallInfo(),!1,""):(T.terminateReCall(),this.setConfInfo(L.CONF_SERVER_ID,""),this.setConfInfo(L.CONF_ACSSCODE,""),coreCommon.Observer.publish("ConfEnded",t)),coreCall.deleteCallObject(this.getConfInfo(L.CALL_ID)),e.next=8,this.unInit();case 8:return e.abrupt("return",1);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfSpeakerNotify",value:function(e){if(R.info("handleConfSpeakerNotify handle="+e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is "+e.param.handle);coreCommon.Observer.publish("ConfSpeakerNotify",e.param.floor_attendee_info)}},{key:"handleTransToConfResult",value:function(e){if(R.info("handleTransToConfResult handle=",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is "+e.param.handle);coreCommon.Observer.publish("TransToConfResult",e)}},{key:"updateConfMemberList",value:function(e){this.confInfo.members=e}},{key:"dealAddToGroup",value:function(e,t){if(e.length>0&&""!==this.confInfo.groupUri){for(var n=0,r=0;r<this.confInfo.members.length;r++)""!==this.confInfo.members[r].account&&n++;n+=e.length,n>100?coreCommon.Observer.publish("ExceedGroupMemNum"):coreCommon.Observer.publish("AddToGroupFromConf",e,t)}}},{key:"getConfMemberListContent",value:function(){for(var e=this.confInfo.members,t=e?e.length:0,n=language.NAME+"        "+language.NUMBER+"        "+language.LANG_QOS_STATE+"\r\n",r=n+"---------------------------------------------\r\n",a="",o=0;o<t;++o){var i=e[o].userInfo.name?e[o].userInfo.name:"null",s="null";switch(isNullOrEmpty(e[o].userInfo.number)?isNullOrEmpty(e[o].userInfo.bind_no)||(s=e[o].userInfo.bind_no):s=e[o].userInfo.number,e[o].state){case constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING:a=language.CONFERENCE_MEMBER_STATE_INVITING;break;case constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF:a=language.STATUS_IN_CONFERENCE;break;case constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT:a=language.LANG_NATIVE_HANGUP;break;default:a="null"}r+=i+"    "+s+"    "+a+"\r\n"}return r}},{key:"requestConfToken",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("request conf [token] ","confHandle:"+this.confInfo.confHandle),!this.confInfo.confRole||!this.confInfo.confPasscode){e.next=11;break}return t="",e.next=5,coreTup.getConfCtrlInstance();case 5:return n=e.sent,e.next=8,n.requestConfCtrlRight(this.confInfo.confHandle,this.confInfo.compereNumber,this.confInfo.confPasscode,t);case 8:return e.abrupt("return",e.sent);case 11:return R.warn("role is not compere or conf passcode is null"),e.abrupt("return");case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"sendWatchSvcRequest",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,p,h,m;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(t.length<=0)){e.next=3;break}return R.error("sendWatchSvcRequest param error, the attendeeList is empty"),e.abrupt("return",!1);case 3:return e.next=5,coreTup.getConfCtrlInstance();case 5:return r=e.sent,a={user_num:n,conf_handle:this.confInfo.confHandle,svc_watch_attendee:{count:t.length,attendee:t}},e.next=9,r.sendWatchSvcRequest(a);case 9:for(o=e.sent,i=new Array,s=!0,u=!1,f=void 0,e.prev=14,l=(0,v.default)(t);!(s=(d=l.next()).done);s=!0)p=d.value,h=p.number,-1===i.indexOf(h)&&i.push(handlePhoneNumber(h));e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),u=!0,f=e.t0;case 22:e.prev=22,e.prev=23,!s&&l.return&&l.return();case 25:if(e.prev=25,!u){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return m=i.join(),o&&0===o.result?(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_SVC,params:[1,m,1]}),R.info("sendWatchSvcRequest success",o.result)):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_SVC,params:[1,m,0,o.result]}),R.info("sendWatchSvcRequest failed",o.result)),e.abrupt("return",o);case 33:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29]])}));return e}()},{key:"confctrlWatchAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("confctrlWatchAttendee"),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.confctrlWatchAttendee(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeActiveDirection",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("changeActiviteDirection"),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.changeActiveDirection(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"cloudRecordRequest",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("cloudRecordRequest, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,e.next=6,r.cloudRecordRequest(this.confInfo.confHandle,t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"confSignRequest",value:function(){function e(e,n,r,a,o,i){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i){var s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("confSignRequest, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return s=e.sent,e.next=6,s.confSignRequest(this.confInfo.confHandle,t,n,r,a,o,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"unInitDeviceControl",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("unInitDeviceControl"),e.next=3,coreCommon.SpkControl.getInstance().makeSysSpkMute();case 3:coreCommon.CameraControl.getInstance().unInit(),coreCommon.SpkControl.getInstance().unInit(),coreCommon.MicControl.getInstance().unInit();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMobileBfcpStatus",value:function(){if(!window.CLIENTCONFIG.ISMOBILE)return void R.info("handleMobileBfcpStatus is no need for pc");R.info("[bfcp] handleMobileBfcpStatus"),$dispatch(coreUi.changeSendBfcp(!1)),$dispatch(coreUi.changeReceiveBfcp(!1))}},{key:"configMsDataConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("configMsDataconf "+t),n={conf:{enable_ms_dataconf:t}},e.next=4,coreTup.getCallInstance();case 4:return r=e.sent,e.next=7,r.config(n);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"stopBfcpData",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==$getState().call.iSreceivingBFCP){e.next=7;break}return R.info("stop bfcp call in end call"),$dispatch(coreUi.setBfcpReceiving(!1)),e.next=5,coreTup.getCallInstance();case 5:t=e.sent,t.stopData(this.getConfInfo(L.CALL_ID));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCanvasSocket",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("mac"!==window.CLIENTCONFIG.PLATFORM){e.next=4;break}return e.next=3,coreCall.closeAllSvcRemoteSocket();case 3:coreCall.closeSvcDataSocket();case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"unInit",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("unInit"),this.closeCanvasSocket(),this.handleMobileBfcpStatus(),e.next=5,this.configMsDataConf(1);case 5:this.stopBfcpData(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||coreCommon.SpkControl.getInstance().setHandsFree(!1),this.unInitDeviceControl(),window.refreshAtdlistTimer&&(clearInterval(window.refreshAtdlistTimer),window.refreshAtdlistTimer=null);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"confHandUp",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("confHandUp, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_CONF_HAND_UP_OR_HAND_DOWN,params:[this.confInfo.confHandle,handlePhoneNumber(n),t]}),e.next=7,r.confHandUp(this.confInfo.confHandle,t,n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeVmrInfo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getConfCtrlInstance();case 2:return n=e.sent,e.next=5,n.changeVmrInfo(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getPromise",value:function(){var e={};return e.promise=new i.default(function(t,n){e.resolve=t,e.reject=n}),e}}]),e}();t.default=P},941:function(e,t,n){e.exports={default:n(1754),__esModule:!0}},942:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.refreshShareSize=void 0;var a=n(1),o=r(a),i=n(2),s=r(i);t.refreshShareSize=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:-3===t?(n=coreCall.getBigContainerSize(),n={width:n.width,height:n.height-54-74},coreCall.setSvcBFCPVideoRender(n)):-2===t&&(r={lastheight:0,lastwidth:0},$dispatch(coreUi.changeShareScreenWH(r)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},943:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.JsInterface=t.unregisterNativeWndEvent=t.registerNativeWndEvent=void 0;var o,i,s=n(4),c=a(s),u=n(1),f=a(u),l=n(69),d=a(l),p=n(2),h=a(p),m=n(215),v=n(1759),g=a(v),C=n(242),S=n(200),w=n(260),_=n(259),I=r(_),b=n(216),N=r(b),E=n(300),y=coreLogger.getLogger("conf")("logic/nativeWnd/JsInterface"),T=[],O=(t.registerNativeWndEvent=function(){var e=(0,h.default)(f.default.mark(function e(){var t;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("registerNativeWndEvent"),g.default.setNativeWndNotifyFunc(),T=[],t=coreCommon.Observer.subscribe("handlePageSwitchNotify",O.handlePageSwitchNotify),T.push(t),t=coreCommon.Observer.subscribe("handleModeSwitchNotify",O.handleModeSwitchNotify),T.push(t),t=coreCommon.Observer.subscribe("handleWatchNotify",O.handleWatchNotify),T.push(t),t=coreCommon.Observer.subscribe("handleSetMicVol",O.handleSetMicVolNotify),T.push(t),t=coreCommon.Observer.subscribe("handleSetSpkVol",O.handleSetSpkVolNotify),T.push(t),t=coreCommon.Observer.subscribe("handleSetCamera",O.handleSetCameraNotify),T.push(t),t=coreCommon.Observer.subscribe("handleDial",O.handleDialNotify),T.push(t),t=coreCommon.Observer.subscribe("handleChairman",O.handleChairmanNotify),T.push(t),t=coreCommon.Observer.subscribe("handleConfReleaseChairman",O.handleReleaseChairmanResNotify),T.push(t),t=coreCommon.Observer.subscribe("handleConfRequestChairman",O.handleRequestChairmanResNotify),T.push(t),t=coreCommon.Observer.subscribe("handleHangup",O.handleHangupNotify),T.push(t),t=coreCommon.Observer.subscribe("handleSelectBoxSwitch",O.handleSelectBoxSwitchNotify),T.push(t),t=coreCommon.Observer.subscribe("OnSharingAppEnded",O.onSharingAppEnded),T.push(t),t=coreCommon.Observer.subscribe("handleAddMemberDialog",O.handleAddMemberDialog),T.push(t),t=coreCommon.Observer.subscribe("handleAttendanceDialog",O.handleAttendanceDialog),T.push(t),t=coreCommon.Observer.subscribe("handleShowQos",O.handleShowQos),T.push(t),t=coreCommon.Observer.subscribe("handleQueryUserInfo",O.handleQueryUserInfo),T.push(t),t=coreCommon.Observer.subscribe("handleConfCtrl",O.handleConfCtrl),T.push(t),t=coreCommon.Observer.subscribe("handleRemoveVideo",O.handleRemoveVideo),T.push(t),t=coreCommon.Observer.subscribe("handleConfRecording",O.handleConfRecording),T.push(t),t=coreCommon.Observer.subscribe("handleActiveBidirection",O.handleActiveBidirection),T.push(t),t=coreCommon.Observer.subscribe("handleCPURate",O.handleCPURate),T.push(t),t=coreCommon.Observer.subscribe("handleProgramSharing",O.handleProgramSharing),T.push(t),t=coreCommon.Observer.subscribe("handleShowVideoDevSettings",O.handleShowVideoDevSettings),T.push(t),t=coreCommon.Observer.subscribe("handleUpdateAuxHwnd",O.handleUpdateAuxHwnd),T.push(t),t=coreCommon.Observer.subscribe("handleMemberListMoving",O.handleMemberListMoving),T.push(t),t=coreCommon.Observer.subscribe("handleMemberListFocus",O.handleMemberListFocus),T.push(t),t=coreCommon.Observer.subscribe("handleMemberListWindowStatus",O.handleMemberListWindowStatus),T.push(t),t=coreCommon.Observer.subscribe("handleStartIMChat",O.handleStartIMChat),T.push(t),t=coreCommon.Observer.subscribe("handleNotifyDataIsBigHwnd",O.handleNotifyDataIsBigHwnd),T.push(t),t=coreCommon.Observer.subscribe("handleUserNotActive",O.handleNotifyUserNotActive),T.push(t),t=coreCommon.Observer.subscribe("handleOperateBrowserHwnd",O.handleNotifyOperateBrowserHwnd),T.push(t),t=coreCommon.Observer.subscribe("handleAlertBoxResult",O.handleAlertBoxResult),T.push(t),t=coreCommon.Observer.subscribe("handleStopWatchByNative",O.handleStopWatchByNative),T.push(t),t=coreCommon.Observer.subscribe("handleNativeUserClick",O.handleNativeUserClick),T.push(t),t=coreCommon.Observer.subscribe("handleMonitorNumber",O.handleMonitorNumber),t=coreCommon.Observer.subscribe("handleShareAudio",O.handleShareAudio),T.push(t),t=coreCommon.Observer.subscribe("handleNativeFeedback",O.handleNativeFeedback),T.push(t),y.info("registerNativeWndEvent JsInterfaceTokens = "+(0,d.default)(T));case 79:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.unregisterNativeWndEvent=function(){var e=(0,h.default)(f.default.mark(function e(){var t,n;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(y.info("unregisterNativeWndEvent"),t=0;t<T.length;t++)n=coreCommon.Observer.unsubscribeToken(T[t]),n?y.debug("unsubscribeToken success token = "+T[t]):y.debug("unsubscribeToken false token = "+T[t]);T=[];case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.JsInterface=(i=o=function e(){(0,c.default)(this,e)},o.handlePageSwitchNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){var n;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t.pos-1)>=0&&m.SvcAtdManager.handlePageSwitch(n);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleModeSwitchNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){var n,r,a;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t.layout,r=t.frameHwnd,a=$getState().conf.isSvcConf,n>0&&(a?(y.info("insrte handleModeSwitch to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.handleModeSwitch,{},null,n,r)):I.setViewMode(n,r)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleWatchNotify=function(e){if(!window.CLIENTCONFIG.ISBIGWIN){var t=$getState().conf.svcViewMode,n=e.hwnd;if(null===n||0===n)m.SvcAtdManager.handleCancelWatch();else{var r=m.SvcAtdManager.getAttendeeByHwnd(n);m.SvcAtdManager.handleWatch(t,r)}var a=$getState().conf,o=a.svcPreViewMode,i=a.svcOnLineAttendances,s=o||constant.SVC_VIEW_MODE.BIG_SMALL_MODE;m.SvcAtdManager.setPageNum(s,i.length)}},o.handleSetMicVolNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("handleSetMicVolNotify, param = "+(0,d.default)(t)),w.ToolbarManager.setMicVol(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleSetSpkVolNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("handleSetSpkVolNotify, param = "+(0,d.default)(t)),w.ToolbarManager.setSpkVol(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleSetCameraNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("handleSetCameraNotify, param = "+(0,d.default)(t)),w.ToolbarManager.setCameraStu(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleDialNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("handleDialNotify, param = "+(0,d.default)(t)),e.next=3,w.ToolbarManager.dialClk(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleChairmanNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("handleChairmanNotify, param = "+(0,d.default)(t)),w.ToolbarManager.applyOrReleasechairman(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleRequestChairmanResNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("handleRequestChairmanResNotify, res = "+(0,d.default)(t)),w.ToolbarManager.handleRequestChairmanResNotify(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.onSharingAppEnded=(0,h.default)(f.default.mark(function e(){var t,n;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,b.getShareAppHwnd)(),n=(0,b.getCloseShareDataOperate)(),y.info("The SharingApp handle  is invalidate, Stop Sharing. hasCloseShareDataOperate:",n),n&&window.CLIENTCONFIG.ISBIGWIN||y.info("onSharingAppEnded,  stopShareScreen."),y.info("onSharingAppEnded ：",t),C.NativeInterface.setHightlightShareWnd(t,!1),(0,b.setShareAppHwnd)(0),(0,b.setOldShareAppHwnd)(0),$dispatch(coreUi.changeFirstActiveShareApp(!0));case 9:case"end":return e.stop()}},e,void 0)})),o.handleReleaseChairmanResNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("handleReleaseChairmanResNotify, res = "+(0,d.default)(t)),w.ToolbarManager.handleReleaseChairmanResNotify(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleHangupNotify=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("handleHangupNotify, param = "+(0,d.default)(t)),e.next=3,w.ToolbarManager.hangup(t);case 3:coreUi.selectBoxCancelDataNWin(),(0,S.cancleConfMemberlistMessage)();case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleAddMemberDialog=function(){var e=(0,h.default)(f.default.mark(function e(t){var n,r,a,o;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState(),r=n.selectContact.selectcontactisshow,a=!1,isNullOrEmpty(t.move_only)||(a=t.move_only),o={x:t.coordinate.center_x,y:t.coordinate.center_y,w:t.coordinate.width,h:t.coordinate.height},a?r&&window.isHubEnv&&(coreUi.selectBoxCancelDataNWin(a),coreUi.initConfSelectBoxAddMember(o)):(y.info("userClick handleAddMemberDialog, param = "+(0,d.default)(t)+",selectcontactisshow = "+r),r?coreUi.selectBoxCancelDataNWin():coreUi.initConfSelectBoxAddMember(o));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleAttendanceDialog=function(){var e=(0,h.default)(f.default.mark(function e(t){var n,r;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("userClick The confmember openorclose process:","recevice to openorclose confmember :",t),n=!1,isNullOrEmpty(t.move_only)||(n=t.move_only),r={x:t.coordinate.left_top_x,y:t.coordinate.left_top_y,w:t.coordinate.width,h:t.coordinate.height,isMove:t.move_enable},(0,S.handleShowMemberList)(r,n),coreUi.hideConfRightMenuLogic();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleShowQos=function(e){1===e.show?($dispatch(coreUi.changeShowCallMediaInfo(!0)),coreCall.getCallMediaInfoOfNative()):$dispatch(coreUi.changeShowCallMediaInfo(!1))},o.handleQueryUserInfo=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.SvcAtdManager.getUserInfoByHwnd(t.hwnd);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleConfCtrl=function(e){m.SvcAtdManager.handleConfCtrl(e)},o.handleRemoveVideo=function(e){w.ToolbarManager.removeVideo(e),$getState().conf.isShowMemberListNew&&$dispatch(coreUi.changeIsShowMemberListNew())},o.handleActiveBidirection=function(){var e=(0,h.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("handleActiveBidirection, param = "+(0,d.default)(t)),e.next=3,coreConf.changeActiveDirection(t.dir);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleConfRecording=function(e){y.info("handleConfRecording, param = "+(0,d.default)(e));var t=$getState(),n=t.conf.isReacrd;e.flag&&0===n?(0,S.cloudRecordRequestFuc)(constant.DATA_CLOUD_RECORD_TYPE.TYPE_RECORD,constant.DATA_CLOUD_RECORD_TYPE.RECORD_START):e.flag||1!==n||(0,S.cloudRecordRequestFuc)(constant.DATA_CLOUD_RECORD_TYPE.TYPE_RECORD,constant.DATA_CLOUD_RECORD_TYPE.RECORD_END)},o.handleCPURate=function(e){$getState().conf.isSvcConf?m.SvcAtdManager.handleCPURate(e):I.handleCPURate(e);var t=0;coreConf.getIsVideoConf()&&(t|=1),coreConf.isInDataScreenOrWbSharing()&&(coreConf.isSendScreenSharing()&&(t|=2),coreConf.isReceivingDataShare()&&(t|=4),coreConf.isSendingWBSharing()&&(t|=8),coreConf.isRecevingWBSharing()&&(t|=16),coreConf.getShareAudio()&&(t|=32)),coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_CONF_PERFORMANCE_REPORT,params:[e.cpu_core,e.cpu_thread,e.cpu_freq,e.cpu,e.mem,e.app_cpu,e.app_mem,e.app_threads,t]})},o.handleProgramSharing=function(e){if(y.info("[maxhub] handleProgramSharing isSelfJoinedDataConf:",N.isSelfJoinedDataConf()),1!=N.isSelfJoinedDataConf()){y.info("handleProgramSharing fail, not in dataconf");var t={dialog_type:1,content_id:"LANG_NATIVE_NOT_IN_DATACONF"};return void C.NativeInterface.showMessageBox(0,t)}(0,E.NotifySharingType)(0,e.type)},o.handleShowVideoDevSettings=function(e){y.info("handleShowVideoDevSettings start");var t=$getState().conf,n=t.isShowAudioSetting,r=t.isShowDevicesList;if(y.info("handleShowVideoDevSettings-isShowDevicesList: "+r),r?($dispatch(coreUi.changeDevicesTitle(language.SHOW_DEVICES_POP_TITLE)),$dispatch(coreUi.changeIsShowDevicesList(!1))):$dispatch(coreUi.changeDevicesTitle(language.LANG_NATIVE_DEVICES_SET)),!n){var a={positionX:e.devices_x,positionY:e.devices_y};(0,S.handleShowAudioSetting)(a)}coreUi.toggleShowAudioSetting()},o.handleMemberListMoving=function(e){y.info("handleMemberListMoving",e),e.is_meet_page_moving?coreIpcMainProcess.startWindowToMemberListMove():coreIpcMainProcess.endWindowToMemberListMove({x:e.coordinate.left_top_x,y:e.coordinate.left_top_y})},o.handleMemberListFocus=function(e){y.debug("handleMemberListFocus",e),e.is_nativewnd_focus&&window.ipcNativeClss.nativeFollowDisplay(e)},o.handleMemberListWindowStatus=function(e){y.info("handleMemberListWindowStatus",e),0===e.nativewnd_size?window.ipcNativeClss.nativeNormalimizeDisplay(e):1===e.nativewnd_size?window.ipcNativeClss.nativeMaxDisplay(e):2===e.nativewnd_size?window.ipcNativeClss.nativeFullScreenDisplay(e):3===e.nativewnd_size&&window.ipcNativeClss.nativeMinimizeDisplay(e)},o.handleStartIMChat=function(e){y.info("handleStartIMChat",e);var t=$getState().call.userInfo,n=$getState().conf.groupId;isNullOrEmpty(n)?isNullOrEmpty(t)?y.error("start chat failed because there is no groupid or userinfo.account!"):(y.info("userClick show contact chat,userinfo = "+handlePhoneNumber(t.account)),coreContact.openContactConversationByConf(t,!0),appService.showMainWindow(!0)):(y.info("userClick show group dialog btn"),coreIm.openGroupConversationByConf({group_id:n},!0),appService.showMainWindow(!0))},o.handleNotifyDataIsBigHwnd=function(e){y.info("handleNotifyDataIsBigHwnd",e),$getState().conf.isSvcConf?(y.info("insert nativeNotifyUpdateDataIsBigHwnd to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyUpdateDataIsBigHwnd,{},null,e.isBigHwnd)):I.nativeNotifyUpdateDataIsBigHwnd(e.isBigHwnd)},o.handleNotifyUserNotActive=function(e){y.info("handleNotifyUserActive",e);var t=e.isNotActive,n=new coreSetting.AutoLeaveSetting;isNullOrEmpty(t)||(1===t?n.start():n.stop())},o.handleNotifyOperateBrowserHwnd=function(e){y.info("NotifyOperateBrowserHwnd",e);var t=e.cmdShow;9===t?appService.showWindow():6===t&&appService.minimize()},o.handleAlertBoxResult=function(e){y.info("handleAlertBoxResult",e);var t=e.dialogID;if(1===e.result){var n=void 0,r=void 0;switch(t){case"checkCall":coreCommon.dispatchModuleEvent("checkCallOk",{checkResult:!0});break;case"feedback":coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_DATA_CONF_ERROR,language.SHARING_JOINCONF_FAIL);break;case"handsup":n=$getState().myInfo.bind_no,0===(r=coreConf.getHandUpState(n))&&coreConf.confHandUp({toHandUp:1,attendeeInfo:n})}}else switch(t){case"checkCall":coreCommon.dispatchModuleEvent("checkCallOk",{checkResult:!1})}},o.handleStopWatchByNative=function(e){y.info("handleStopWatchByNative",e),$getState().conf.isSvcConf&&(y.info("handleStopWatchByNative start"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyIsStopWatchSvc,{},null,e))},o.handleNativeUserClick=function(e){coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_USER_CLICK,params:[e.window_name,e.button_id]})},o.handleMonitorNumber=function(e){y.info("handleMonitorNumber, param= ",(0,d.default)(e)),$dispatch(coreUi.changeMonitorNumber(e.monitor_num))},o.handleShareAudio=function(e){y.info("handleShareAudio, param= ",(0,d.default)(e)),1===e.share_aduio?N.setShareAudio(!0):N.setShareAudio(!1)},o.handleNativeFeedback=function(e){y.info("handleNativeFeedback"),coreCommon.changeFeedbackIsLogin(!0),coreSetting.showFeedback()},o.handleUpdateAuxHwnd=function(e){y.info("start bfcphwnd = "+e.bfcphwnd+", isBigwnd = "+e.isBigWnd),$getState().conf.isSvcConf?(y.info("insrte nativeNotifyUpdateBfcpFrameWnd to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyUpdateBfcpFrameWnd,{},null,e.bfcphwnd,e.isBigWnd)):I.nativeNotifyUpdateBfcpFrameWnd(e.bfcphwnd)},i))},944:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairStartEndMeeting=t.pairInviteAttendeeNotify=t.pairInviteJoinConf=t.pairCreatHandleAndGetToken=t.pairLinkageConfNotify=t.startPairMeeting=t.handleEndConf=t.pairLinkageConfStateNotify=t.pairCallStateNotify=t.pairSubscribeNotify=t.pairCtrSubscribe=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(200),u=n(945),f=n(260),l=coreLogger.getLogger("logic")("synergism/conference"),d=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a){var i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: start request conf ctrl [token], handle="+t+", number="+n),e.next=3,coreTup.getConfCtrlInstance();case 3:return i=e.sent,e.next=6,i.requestConfCtrlRight(t,n,r,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: creat pair conf handle, confId="+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.creatConfHandle(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: destroy pair conf handle, handle="+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.destroyConfHandle(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),m=(t.pairCtrSubscribe=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: request subscribe call state, switch=",t),n=$getState().synergismInfo.tokenIndex,e.next=4,coreCall.pairSubscribe(n,t);case 4:r=e.sent,0!==r.result?l.info("BLE: request subscribe call state failed, rsp=",r):l.info("BLE: request subscribe call state success");case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairSubscribeNotify=function(e){l.info("BLE: notify, get subscribe result"),0!==e.result&&l.info("BLE: notify, subscribe call state failed")},t.pairCallStateNotify=function(e){var t=e.callstate;l.info("BLE: notify, paired peripherals call state changed, callState=",t);var n=$getState().synergismInfo.pairState;if(constant.PAIR_STATE.PAIR_SUCCESS!==n)return void l.info("BLE: no paired peripherals, pair state=",n);var r=$getState().synergismInfo.pairedDeviceConf.callstate;if((0,u.setPairDeviceConfInfo)(e),$getState().synergismInfo.inPairConf)if(constant.PAIR_CALL_STATE.IN_CONFERENCE===t||constant.PAIR_CALL_STATE.ESTABLISHED===t){l.info("BLE: get conf established notify by paired peripherals, call state=",t);var a=$getState().synergismInfo.pairConfInfo.media_type;(0,c.handlePairJoinConf)(a)}else constant.PAIR_CALL_STATE.IDLE===t&&t!==r&&(l.info("BLE: get conf end notify by paired peripherals, old state=",r),C())},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: request open or close conf linkage, confId="+t+", switch="+n),r=$getState().synergismInfo.tokenIndex,e.next=4,coreCall.pairLinkage(r,n,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),v=(t.pairLinkageConfStateNotify=function(e){l.info("BLE: notify, linkage conf state changed");var t=$getState().synergismInfo.pairState;if(constant.PAIR_STATE.PAIR_SUCCESS!==t)return void l.info("BLE: no paired peripherals, pair state=",t);$dispatch(coreUi.changePairConfRole(e.ischairman))},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={number:n,role:0,is_mute:0,is_auto_invite:1},a={num_of_attendee:1,attendee_info:[r]},e.next=4,coreTup.getConfCtrlInstance();case 4:return i=e.sent,e.next=7,i.inviteAttendee(t,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),g=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(l.info("BLE: try to join conf failed"),""!==$getState().conf.confHandle&&(h($getState().conf.confHandle),$dispatch(coreUi.changeConfHandle("")),f.ToolbarManager.setConfHandle("")),e){var t=$getState().synergismInfo.pairConfInfo,n=m(t.conf_id,0);l.info("BLE: close linkage, ret=",n)}(0,u.setIsInPairConf)(!1),$dispatch(coreUi.changeCallStatus("")),(0,c.handleIsShowJoinButton)(!0),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changePairConfRole(0)),(0,u.setPairConfInfo)([]),coreCommon.showAlert(""+language.PAIR_JOIN_CONF_FAILED)},C=t.handleEndConf=function(){l.info("BLE: start to close conf page"),(0,u.setIsInPairConf)(!1),h($getState().conf.confHandle),$dispatch(coreUi.changeConfHandle("")),f.ToolbarManager.setConfHandle(""),$dispatch(coreUi.changePairConfRole(0)),(0,u.setPairConfInfo)([]),(0,c.handleClosePairConfPage)()},S=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start to end or leave meeting, confId="+t+", isEnd="+n),r=$getState().synergismInfo.tokenIndex,a=void 0,!n){e.next=9;break}return e.next=6,coreCall.pairLinkageEnd(r,t);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,coreCall.pairLinkageLeave(r,t);case 11:a=e.sent;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),w=(t.startPairMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start pair meeting"),(0,u.setPairConfInfo)(t),n=$getState().synergismInfo.pairedDeviceConf,constant.PAIR_CALL_STATE.IDLE===n.callstate||t.conf_id===n.confid){e.next=7;break}return l.info("BLE: paired peripherals is busy, remote conf id =",n.confid),g(!1),e.abrupt("return");case 7:return e.next=9,m(t.conf_id,1);case 9:if(r=e.sent,0===r.result){e.next=14;break}return l.info("BLE: send open linkage request failed, res=",r),g(!1),e.abrupt("return");case 14:l.info("BLE: send open linkage request success");case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairLinkageConfNotify=function(e){l.info("BLE: notify, get open or close linkage result"),0===e.result?(l.info("BLE: open or close linkage with peripherals success"),e.ison&&w($getState().synergismInfo.pairConfInfo)):(l.info("BLE: open or close linkage with peripherals failed"),e.ison&&g(!1))},t.pairCreatHandleAndGetToken=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: prepare to invite paired peripherals join meeting, conf id=",t.conf_id),e.next=3,p(t.conf_id);case 3:if(n=e.sent,0===n.result){e.next=8;break}return l.info("BLE: creat conf handle failed, res=",n),g(!0),e.abrupt("return");case 8:return r=n.param.conf_handle,$dispatch(coreUi.changeConfHandle(r)),f.ToolbarManager.setConfHandle(r),l.info("BLE: creat conf handle success, confHandle=",r),a=$getState().myInfo.bind_no,e.next=15,d(r,a,t.general_pwd,t.token);case 15:i=e.sent,0===i.result?((0,u.setIsInPairConf)(!0),l.info("BLE: send get conf ctrl [token] request success")):(l.info("BLE: send get conf ctrl [token] request failed, res=",i),g(!0));case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.pairInviteJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: notify, get request conf [token] result, res=",t),n=t.param,0!==n.result){e.next=21;break}if(r=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIR_SUCCESS===r){e.next=7;break}return l.info("BLE: no paired peripherals, pair state=",r),e.abrupt("return");case 7:if(a=$getState().synergismInfo.pairedDeviceConf,constant.PAIR_CALL_STATE.IDLE!==a.callstate){e.next=17;break}return l.info("BLE: paired peripherals is idle, start invite now, handle=",n.handle),i=$getState().synergismInfo.pairedDeviceInfo.sip_number,e.next=13,v(n.handle,i);case 13:s=e.sent,0===s.result?l.info("BLE: send invite request success"):(l.info("BLE: send invite request failed, ret=",s),g(!0)),e.next=19;break;case 17:l.info("BLE: paired peripherals is busy, not invite"),g(!0);case 19:e.next=23;break;case 21:l.info("BLE: get conf [token] failed"),g(!0);case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairInviteAttendeeNotify=function(e){0===e.ret?(l.info("BLE: notify, invite attendee success, handle=",e.handle),coreCall.handlePairCallResult()):(l.info("BLE: notify, invite attendee failed, param=",e),g(!0))},t.pairStartEndMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start to end or leave meeting, isEnd=",t),$getState().synergismInfo.inPairConf){e.next=4;break}return l.info("BLE: not in pair conf, can not end or leave meeting"),e.abrupt("return");case 4:return n=$getState().synergismInfo.pairConfInfo.conf_id,e.next=7,S(n,t);case 7:r=e.sent,0!==r.result?l.info("BLE: end or leave pair meeting failed, res=",r):(l.info("BLE: end or leave pair meeting success"),C());case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},945:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setBleDeviceList=function(e){$dispatch(coreUi.changeBleDeviceList(e))},t.setPairDeviceInfo=function(e){$dispatch(coreUi.changePairDeviceInfo(e))},t.cleanPairDeviceInfo=function(){$dispatch(coreUi.clearPairDeviceInfo())},t.setAutoPairSwitch=function(e){$dispatch(coreUi.changeAutoPairSwitch(e))},t.setPairedDeviceInfo=function(e){$dispatch(coreUi.changePairedDeviceInfo(e))},t.setPairType=function(e){$dispatch(coreUi.changePairType(e))},t.setIsInPairConf=function(e){$dispatch(coreUi.changeInPairConf(e))},t.setPairDeviceConfInfo=function(e){$dispatch(coreUi.changePairDeviceConfInfo(e))},t.setNearestDevice=function(e){$dispatch(coreUi.changeNearestDevice(e))},t.setPairConfInfo=function(e){$dispatch(coreUi.changePairConfInfo(e))}},946:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.closeInviteHardTerminal=t.inviteHardTerminal=t.inviteHardTerminalNoPas=t.closePair=t.getPairConfPasResult=t.joinPairConfNoPas=t.joinPairConf=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=n(947),l=n(200),d=n(948),p=coreLogger.getLogger("logic")("synergism/client/conf"),h=null,m=function(e){(0,f.clearCallbackFuncs)(constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF),(0,d.endPairWithPeripherals)(e)},v=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new s.default(function(){var e=(0,u.default)(o.default.mark(function e(n,r){var a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){p.info("joinPairConfResult: param=",e),h&&clearTimeout(h),constant.PAIR_CONF_RESULT.SUCCESS===e.result?n():r(constant.PAIR_CONF_RESULT.BUSY===e.result?language.PAIR_JOIN_CONF_BUSY:constant.PAIR_CONF_RESULT.INVALID===e.result?language.MAXHUB_INVALID_CONF:language.PAIR_JOIN_CONF_FAILED)},(0,f.setCallbackFuncs)(constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,a),i=void 0,i=""===t.chairman_pwd||isNaN(t.chairman_pwd)?t.general_pwd?t.general_pwd:"":t.chairman_pwd,s={command_seq:constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,param:{confId:isNullOrEmpty(t.vmr_id)?t.conf_id:t.vmr_id,confAcs:t.access_number,confPas:i}},p.info("sendJoinPairConf: confId = "+s.param.confId+", confAcs = "+s.param.confAcs),e.next=8,coreCall.sendUniversalInfo($getState().synergismInfo.tokenIndex,s);case 8:c=e.sent,0!==c.result?(p.info("sendJoinPairConf: send command failed, ret=",c),r(language.PAIR_JOIN_CONF_FAILED)):(h&&clearTimeout(h),h=setTimeout(function(){p.info("sendJoinPairConf: wait callback timeout, clear callback function"),r(language.PAIR_JOIN_CONF_FAILED)},1e4));case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),g=!1,C=t.joinPairConf=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=4;break}return p.info("joinPairConf: joining conf now, don't multiple click"),window.Toast(language.PAIR_JOIN_CONF_MULT,2,null,!1),e.abrupt("return");case 4:g=!0,$dispatch(coreUi.changePairConfInfo(t)),v(t).then(function(){g=!1,window.CLIENTCONFIG.ISMOBILE&&(window.goRoute("joinPairConfSuccess"),(0,d.endPairWithPeripherals)())},function(e){g=!1,m(e)});case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=!1,w=t.joinPairConfNoPas=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.info("joinPairConfNoPas: start join pair conf no [password]"),e.next=3,(0,l.getConfInfo)(t.conf_id,t.cycle_conf_id);case 3:S=!0;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),_=(t.getPairConfPasResult=function(){var e=(0,u.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S&&(p.info("getPairConfPasResult: get pair conf info success, start enter conf"),n=t.get_conf_info_result.conf_list_info,r=$getState().synergismInfo.isInviteHardTerminal,r?_(n):C(n),S=!1);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.closePair=function(){if(g||S)return void p.info("closePair: joining conf now, return");(0,d.endPairWithPeripherals)(language.PAIR_CLOSED)},t.inviteHardTerminalNoPas=function(){var e=(0,u.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.info("invite terminal select conf info(nopas)= ",t),n=$getState().conf.allConfInfo,r=void 0,a=0;case 4:if(!(a<n.length)){e.next=11;break}if(n[a].conf_id!==t.conf_id){e.next=8;break}return r=n[a].confInfo,e.abrupt("break",11);case 8:a++,e.next=4;break;case 11:isNullOrEmpty(r)?w(t):(p.info("invite hard terminal conf info(nopas)= ",r),_(r.conf_list_info));case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.inviteHardTerminal=function(){var e=(0,u.default)(o.default.mark(function e(t){var n,r,a,i,s,c,u,f,l,d,h;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.info("invite terminal select conf info= ",t),n=t.vmr_id,r=t.conf_id,a=t.general_pwd,i=isNullOrEmpty(n)?r:n,s=$getState().synergismInfo.hardInterminalQRInfo,c=s.corpid,u=s.contactInfo,f=s.contactInfotype,p.info("invite hard terminal hardInterminalQRInfo= ",c,u,f),e.next=7,coreTup.getConfCtrlInstance();case 7:return l=e.sent,e.next=10,l.confInviteHardTerminal(i,u,a,c,f);case 10:d=e.sent,d&&0===d.result?(p.info("send invite hard terminal to tup success"),window.goRoute("main/conference"),$dispatch(coreUi.changeInviteHardTerminalState(!1))):(p.error("bookConf failed, result = "+d.result),h=language.LANG_NATIVE_INVITE_FAILED,h=h.replace("%s",u),window.ToastNew(h,2));case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.closeInviteHardTerminal=function(){var e=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changeInviteHardTerminalState(!1)),window.getRoute()&&"inviteHardTerminal"===window.getRoute()&&window.goRoute("main/conference");case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},947:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreLogger.getLogger("logic")("synergism/client/info"),a=new Array;t.setCallbackFuncs=function(e,t){r.info("set callback func, command = "+e),a[e]=t},t.clearCallbackFuncs=function(e){r.info("clear callback func, command = "+e),"function"==typeof a[e]&&(a[e]=null)},t.handleClientUniversalInfoNotify=function(e){r.info("handleClientUniversalInfoNotify, param = ",e);var t=JSON.parse(e.info),n=t.event_seq,o=t.command_rsp;n?r.info("unknow event, event_seq = ",n):o&&("function"==typeof a[o]?(a[o](t.param),a[o]=null):r.info("invalid command, command_rsp = ",o))}},948:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scanHardTerminalQRCode=t.pairClosedNotify=t.endPairWithPeripherals=t.endOldPairAndRepair=t.handlePairClosed=t.sendMakePair=t.queryPairInfo=t.startMakePair=t.startQRCodePair=t.startManualPair=t.startAutoBlePair=t.initTupPairClient=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(3),l=r(f),d=n(945),p=coreLogger.getLogger("logic")("synergism/client/pair"),h="",m=void 0,v=void 0,g=void 0,C=function(e){return new l.default(function(t,n){n(e)})},S=function(){var e=$getState().login.account,t="";if(window.CLIENTCONFIG.ISMOBILE)t=window.device.uuid+e;else{t=(window.cwmpLocalIp?window.cwmpLocalIp:window.localIp)+e}h=coreCommon.sha512(t),p.info("getUnicode: creat device unicode success")},w=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changePairType(constant.PAIR_TYPE.IDLE)),$dispatch(coreUi.changePairTokenIndex(-1)),(0,d.setPairedDeviceInfo)({}),$dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairState(constant.PAIR_STATE.IDLE));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),_=(t.initTupPairClient=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.pairEnable(1,1);case 2:t=e.sent,p.info("initTupPairClient: enable tup pair ret=",t),S(),w();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){window.CLIENTCONFIG.ISMOBILE&&window.confirm(language.FORCE_PAIR_TIPS).then(function(e){e.ret?(p.info("forcePairConfirm: userClick force pair"),window.CLIENTCONFIG.ENABLE_IT_MEETING?y(g,constant.PAIR_TYPE.QRCODE,!0):window.startScanQRCode(language.SCAN_QR_CODE_TIPS,!0)):p.info("forcePairConfirm: userClick cancel force pair")})}),I=function(e){if(p.info("dealPairFailed: reason=",e),e===constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_SUPPORT_FORCE)return w(),void _();window.CLIENTCONFIG.ISMOBILE&&$getState().synergismInfo.pairType!==constant.PAIR_TYPE.AUTO&&window.Toast(language.PAIRING_FAILED,2,null,!1),w()},b=function(e){var t=e.pair_session_res.id,n=e.pair_session_res.pair_result;if(p.info("dealPairSuccess: [token] id="+t+", device name="+n.device_name+", interval="+n.heartbeat_interval+", ip="+n.ip),$dispatch(coreUi.changePairTokenIndex(t)),(0,d.setPairedDeviceInfo)(n),p.info("dealPairSuccess: change pair state to <pair success>"),$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIR_SUCCESS)),coreSetting.setCurrentCode(""),window.CLIENTCONFIG.ISMOBILE){window.Toast(language.DEVICE_PAIRED_TOAST,2,null,!1);var r=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,a=r?"terminalPaired":"main/conference";window.getRoute()&&window.getRoute()!==a&&window.goRoute(a)}},N=(t.startAutoBlePair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.info("startAutoBlePair: start auto ble pair"),n=$getState().synergismInfo.pairState,r=2,t.id!==$getState().synergismInfo.nearestDevice.id?(t.count=1,(0,d.setNearestDevice)(t)):(t.count=t.count<r?t.count+1:r,(0,d.setNearestDevice)(t)),p.info("startAutoBlePair: the nearest device=",t),constant.PAIR_STATE.IDLE!==n){e.next=11;break}$dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairDeviceInfo(t)),E(t.advertising,constant.PAIR_TYPE.AUTO,!1),e.next=22;break;case 11:if(constant.PAIR_STATE.PAIR_SUCCESS!==n){e.next=21;break}if(a=$getState().synergismInfo.pairDevice,!(t.id!==a.id&&t.count>=r||i)){e.next=19;break}return p.info("startAutoBlePair: the nearest peripherals changed, try to change pair device, isOut ="+i+", old device="+a),e.next=17,k();case 17:o=e.sent,o?($dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairDeviceInfo(t)),E(t.advertising,constant.PAIR_TYPE.AUTO,!1)):p.info("startAutoBlePair: try to change pair peripherals failed");case 19:e.next=22;break;case 21:p.info("startAutoBlePair: in pairing or cancel pairing, quit auto pair");case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.startManualPair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.info("startManualPair: start manual pair, pairCode="+t+", isForce="+r),""!==t){e.next=4;break}return p.info("startManualPair: error, pair code is null"),e.abrupt("return");case 4:if(n=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIRING!==n&&constant.PAIR_STATE.CANCEL_PAIRING!==n){e.next=9;break}return p.info("startManualPair: in pairing or ending pair state, can not start new pair"),coreCommon.showAlert(""+language.IN_PAIRING_OR_ENDING_PAIR_STATE),e.abrupt("return");case 9:E(t,constant.PAIR_TYPE.MANUAL,r);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),E=(t.startQRCodePair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.info("startQRCodePair: pairCode="+t+", isForce="+a),""!==t){e.next=4;break}return p.info("startQRCodePair: pair code is null"),e.abrupt("return");case 4:if(n=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIRING!==n&&constant.PAIR_STATE.CANCEL_PAIRING!==n){e.next=9;break}return p.info("startQRCodePair: in pairing or canceling state, can not start new pair"),coreCommon.showAlert(""+language.IN_PAIRING_OR_ENDING_PAIR_STATE),e.abrupt("return");case 9:if(constant.PAIR_STATE.PAIR_SUCCESS!==n){e.next=13;break}return p.info("startQRCodePair: has paired, close old pair first"),e.next=13,k();case 13:if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.getRoute()&&"main/conference"!==window.getRoute()&&window.goRoute("main/conference"),window.switchToFront()),!window.CLIENTCONFIG.ENABLE_IT_MEETING||!window.pcLoginState()){e.next=32;break}p.info("PC state = "+window.pcLoginState()),e.next=20;break;case 20:return e.next=22,coreCall.callMultiTerminalCheck();case 22:if(r=e.sent,window.requestMultiTerminalPromise=null,!r){e.next=26;break}return e.abrupt("return");case 26:return e.next=28,coreCall.dealSipLoginCheck();case 28:window.requestSipLoginPromise=null,E(t,constant.PAIR_TYPE.QRCODE,a);case 30:e.next=33;break;case 32:E(t,constant.PAIR_TYPE.QRCODE,a);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.startMakePair=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.info("startMakePair: change pair state to <pairing>, pair type=",n+", isForce=",r),$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIRING)),$dispatch(coreUi.changePairType(n)),O(t).then(function(e){return A(e,r)},function(e){return C(e)}).then(function(e){b(e)},function(e){I(e)});case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),y=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIRING)),$dispatch(coreUi.changePairType(n)),A(t,r).then(function(e){b(e)},function(e){I(e)});case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(e){if(0===e.param.result&&0===e.param.pair_info.result_code){var t=e.param.pair_info;g=e.param.pair_info,p.info("queryPairInfoNotify: get peripherals info success, file path="+t.public_key_file+", remain lock time="+t.remain_lock_time+", remain times="+t.remain_times+", remote ip="+handleIp(t.remote_ip)),m(t)}else p.info("queryPairInfoNotify: get peripherals info failed, data=",e),v(constant.MAKE_PAIR_FAILED_REASON.FAILED)},O=t.queryPairInfo=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.default(function(){var e=(0,u.default)(s.default.mark(function e(n,r){var a,i,c,u,f,l,d,g,C,w,_,I,b,N,E;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m=n,v=r,e.next=4,coreTup.getUportalInstance();case 4:if(a=e.sent,a.setNotifyFunc(360476,T),i=$getState().login,c=i.isSupportProxy,u=i.proxyAddress,f=i.proxyPort,l=i.euaServer,d=i.account,p.info("[pair] queryPairInfo pairCode:",t),!$getState().login.isSupportAS){e.next=16;break}return e.next=12,coreAccount.getLoginModel();case 12:g=e.sent,C=g.serverUportalAddress,l=C,p.info("[pair] euaServer isSupportAS env :",l);case 16:if(l&&""!==l||(p.info("queryPairInfo: the eua server info is null"),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)),w=l.split(":"),_=w[0],I=w[1]?w[1]:8544,p.info("queryPairInfo server:",_),c||(u=null,f=null),""===h&&S(),b=window.cwmpLocalIp?window.cwmpLocalIp:window.localIp,N={uri:_,port:I,pairCode:t,unicode:h,localIp:b,proxyIp:u,proxyPort:f,filePath:window.APP_DATA_PATH,account:d},window.CLIENTCONFIG.ENABLE_IT_MEETING,window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=30;break}window.webView.getPairInfo((0,o.default)(N)),e.next=34;break;case 30:return e.next=32,a.getPairInfo(_,I,t,h,b,u,f,N.filePath,d);case 32:E=e.sent,0!==E.result?(p.info("queryPairInfo: send request failed, ret=",E),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)):p.info("queryPairInfo: send request success");case 34:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),A=t.sendMakePair=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new l.default(function(){var e=(0,u.default)(s.default.mark(function e(r,a){var o,i,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){var t=e.param;1===t.is_permit?(p.info("pairResultNotify: make pair success"),r(t)):t.reason===constant.SYNERGISM_FAIL_REASON.USER_NUM_LIMITED?(p.info("pairResultNotify: paired client over limit, support_force=",t.support_force),a(t.support_force?constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_SUPPORT_FORCE:constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_UNSUPPORT_FORCE)):(p.info("pairResultNotify: make pair failed, param=",t),a(constant.MAKE_PAIR_FAILED_REASON.FAILED))},e.next=3,coreTup.getCallInstance();case 3:return i=e.sent,i.setNotifyFunc(98658,o),p.info("sendMakePair: isForce=",n),e.next=8,coreCall.makePair($getState().login.account,t.tmpKey,t.public_key_file,t.remote_sip_num,n);case 8:c=e.sent,0!==c.result?(p.info("sendMakePair: send request failed, ret=",c),a(constant.MAKE_PAIR_FAILED_REASON.FAILED)):(u=c.param.id,$dispatch(coreUi.changePairTokenIndex(u)),p.info("sendMakePair: send request success, [token] id=",u));case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();window.getPairInfoResult=function(e){T(e)};var x=t.handlePairClosed=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.info("handlePairClosed: deal pair closed"),e.next=3,w();case 3:coreSetting.setIsResultVisible(!1),window.getRoute()&&"terminalPaired"===window.getRoute()&&window.goRoute("main/conference"),window.CLIENTCONFIG.ISMOBILE&&""!==t&&window.Toast(t,2,null,!1);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),k=(t.endOldPairAndRepair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.info("endOldPairAndRepair: start to end old pair and repair with peripherals, type="+t+", code=",n),e.next=3,k(language.PAIR_CLOSED);case 3:t===constant.PAIR_TYPE.AUTO||N(n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endPairWithPeripherals=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().synergismInfo.tokenIndex,p.info("endPairWithPeripherals: [token] index=",t),-1===t){e.next=11;break}return p.info("endPairWithPeripherals: change pair state to <cancel pairing>"),$dispatch(coreUi.changePairState(constant.PAIR_STATE.CANCEL_PAIRING)),e.next=7,coreCall.cancelPair(0,t);case 7:return n=e.sent,p.info("endPairWithPeripherals: send end pair with peripherals request, ret=",n),e.next=11,x(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.pairClosedNotify=function(e){p.info("pairClosedNotify: param=",e),constant.SYNERGISM_FAIL_REASON.SOFT_TERMINAL_INITIATE===e.reason?p.info("pairClosedNotify: the software initiative to close the pair"):x(language.PAIR_CLOSED)},t.scanHardTerminalQRCode=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=window.atob(t),p.info("hardTerminalUrl",n),r=coreCommon.getUrlVars(n),p.info("uriValues",r),a={page:isNullOrEmpty(r.page)?"":decodeURIComponent(r.page.trim()),corpid:isNullOrEmpty(r.corpid)?"":decodeURIComponent(r.corpid.trim()),contactInfo:isNullOrEmpty(r.contactInfo)?"":decodeURIComponent(r.contactInfo.trim()),contactInfotype:isNullOrEmpty(r.contactInfotype)?"":decodeURIComponent(r.contactInfotype.trim())},o=-1!=a.contactInfotype.indexOf("siptrunk")?1:0,i={corpid:a.corpid,contactInfo:a.contactInfo,contactInfotype:o},p.info("hardInterminalQRInfo",i),"synergism"===a.page&&($dispatch(coreUi.changeHardTerminalInfo(i)),$dispatch(coreUi.changeInviteHardTerminalState(!0)),window.goRoute("inviteHardTerminal"));case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},949:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.delConfInfoFromDb=t.getConfInfoFromDb=t.saveConfInfoToDb=t.changeConfInfoCardState=t.changeConfImmediately=t.toggleVideoConf=t.changeMeetingSubject=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(2),u=r(c),f=coreLogger.getLogger("logic")("conf/joinconf"),l=(t.changeMeetingSubject=function(e){return $dispatch(coreUi.changeConfSubject(e))},t.toggleVideoConf=function(e){return $dispatch(coreUi.changeMeetingType(e))},t.changeConfImmediately=function(e){return $dispatch(coreUi.toggleConfImmediately(e))},t.changeConfInfoCardState=function(e){return $dispatch(coreUi.toggleConfInfoCard(e))},t.saveConfInfoToDb=function(){var e=(0,u.default)(o.default.mark(function e(t,n){var r,a,i,c,u,d,p;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$getState().login.sipLoginOnly,f.info("saveConfInfoToDb isAnonymous: "+r),a=void 0,!r){e.next=9;break}return e.next=6,coreDb.queryLoginSetting({key:"confInfoList"});case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,coreDb.queryUserConfig({key:"confInfoList"});case 11:a=e.sent;case 12:if(i=[],isNullOrEmpty(a)||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)?i=[{confName:n,confId:t}]:(c=JSON.parse(a.value),u=l(c,t),u instanceof Array?(i=u,u.length<5?i.unshift({confName:n,confId:t}):(i.pop(),i.unshift({confName:n,confId:t}))):i=[{confName:n,confId:t}]),d=(0,s.default)(i),p={key:"confInfoList",value:d},!r){e.next=21;break}return e.next=19,coreDb.saveLoginSetting(p);case 19:e.next=23;break;case 21:return e.next=23,coreDb.saveUserConfig(p);case 23:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getConfInfoFromDb=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().login.uportalLoginState!==constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,f.info("getConfInfoFromDb isAnonymous: "+t),n=void 0,!t){e.next=9;break}return e.next=6,coreDb.queryLoginSetting({key:"confInfoList"});case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,coreDb.queryUserConfig({key:"confInfoList"});case 11:n=e.sent;case 12:if(isNullOrEmpty(n)||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)){e.next=24;break}if(!((r=JSON.parse(n.value))instanceof Array)){e.next=22;break}if(!(r.length<5)||t){e.next=21;break}return f.info("account list number lower than 5, need public result"),e.next=19,coreDb.queryLoginSetting({key:"confInfoList"});case 19:if(a=e.sent,!isNullOrEmpty(a)&&!isNullOrEmpty(a.key)&&!isNullOrEmpty(a.value)&&(i=JSON.parse(a.value))instanceof Array)for(;r.length<5&&i.length>0;)r.push(i.shift());case 21:$dispatch(coreUi.updateLatestConfInfo(r));case 22:e.next=31;break;case 24:if(t){e.next=31;break}return s=[],f.info("account owned no list or emptyed list, need public conflist"),e.next=29,coreDb.queryLoginSetting({key:"confInfoList"});case 29:if(c=e.sent,!isNullOrEmpty(c)&&!isNullOrEmpty(c.key)&&!isNullOrEmpty(c.value)&&(u=JSON.parse(c.value))instanceof Array){for(;s.length<5&&u.length>0;)s.push(u.shift());$dispatch(coreUi.updateLatestConfInfo(s))}case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.delConfInfoFromDb=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={key:"confInfoList",value:""},e.next=3,coreDb.saveLoginSetting(t);case 3:if(n=$getState().login.uportalLoginState!==constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,f.info("delConfInfoFromDb isAnonymous: "+n),e.t0=!n,!e.t0){e.next=9;break}return e.next=9,coreDb.saveUserConfig(t);case 9:$dispatch(coreUi.updateLatestConfInfo([]));case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e,t){return e.filter(function(n,r){n.confId===t&&e.splice(r,1)}),e})},950:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"getDeployMode",value:function(){return $getState().login.deployMode}},{key:"getIsUseITBuried",value:function(){return!!window.CLIENTCONFIG.ISBIGWIN}},{key:"getInterfaceToOneKeyEnterConf",value:function(){return e.getDeployMode()===constant.MEETING_NET_TYPE.MEDIAX_MEETING}},{key:"getInterfaceToStartVipCall",value:function(){return!(!window.CLIENTCONFIG.ISBIGWIN||isNullOrEmpty(window.confVip))}},{key:"getEnterDataConfInAdvance",value:function(){return!!(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.CLIENTCONFIG.ISBIGWIN&&window.isSupportiDo)}},{key:"changeMediaTypeToAudioData",value:function(){return!(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN||!1!==window.linkSmcIsVideo&&!1!==window.bigConfIsVideo)}}]),e}();t.default=c},951:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confctrlInitAtomic=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=n(216),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=coreLogger.getLogger("conf")("ctrlinit"),p=function(){var e=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.confCtrlLoaded=!0,e.next=3,s.default.all([g(),C(),S()]);case 3:return e.next=5,w();case 5:return e.next=7,_();case 7:return e.next=9,m();case 9:return v(),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=new coreCommon.AtomicAction("confctrlInit",p);t.confctrlInitAtomic=h;var m=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.stgAccount,r=t.stgUri,a=t.fireWallMode,i=t.deployMode,s="",e.next=10,coreSecurity.getPasswordManager();case 10:return c=e.sent,e.next=13,c.getPassword("stgPassword");case 13:return u=e.sent,r&&(s=r+","+n+","+u),d.info("initDataConf deployMode = "+i+",fireWallMode = "+a+",stgURL length = "+r.length),e.next=18,l.initDataConf(i,a,s);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login.isSupportCACertCheck,e.next=3,coreAccount.getLoginModel();case 3:if(n=e.sent,r=n.isSupportAS,d.info("confCertificateCheck isSupportCACertCheck = "+t+",isSupportAS = "+r),r&&t){e.next=9;break}return d.info("no need set cert for confctrl"),e.abrupt("return");case 9:return e.next=11,coreTup.getConfCtrlInstance();case 11:return a=e.sent,i=window.EXEC_PATH,s={ca_cert_path:i,client_cert_path:"",client_key_path:"",client_privkey_pwd:"",verify_mode:1,verify_server_mode:0},e.next=16,a.confCertificateCheck(s);case 16:c=e.sent,0!==c.result?d.info("conf certificate check fail"):d.info("conf certificate check success");case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.deployMode,r=t.isSupportAS,a=window.isSupportiDo?1:0,d.info("setInitParam, deployMode = "+n+",confctrl_ido = "+a),i={init_param:{wait_msgp_thread:1,batch_update:0,connect_call:1,confctrl_ido:a,save_participant_list:n===constant.MEETING_NET_TYPE.MEDIAX_MEETING?1:0,use_rest_and_ido:r?1:0}},e.next=10,coreTup.getConfCtrlInstance();case 10:return s=e.sent,e.next=13,s.confCtrlInit(i);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.deployMode,d.info("setConfEnvType, deployMode = "+n),r=n===constant.MEETING_NET_TYPE.SMC_MEETING?4:3,e.next=8,coreTup.getConfCtrlInstance();case 8:return a=e.sent,e.next=11,a.setConfEnvType(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,f,l,p,h;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.isSupportAS,r=t.serverUportalAddress,a=t.serverUportalPort,i=t.asAddress,s=t.tempsipserverAddress,c=t.sipLoginOnly,u=t.confctrlUri,f="",l="",p="",c&&!n?(d.info("set sipLoginOnly address to use"),f=s,p=f,l=parseInt(window.SERVERCONFIG.LOGIN_PORT)):n&&!isNullOrEmpty(i)?(d.info("set asAddress to use"),f=i.split(":")[0],l=i.split(":")[1],p=isNullOrEmpty(u)?f:u):(d.info("set medixAddress to use"),f=r,l=a,p=f),d.info("conf ctrl init, isSupportAS = "+n+",serverUportalAddress = "+f+",confctrlAddr = "+p+",serverPort = "+l+",asAddress = "+i+",sipLoginOnly = "+c),e.next=11,coreTup.getConfCtrlInstance();case 11:return h=e.sent,e.next=14,h.setServerParams(f,p,l);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.isSupportiDo){e.next=3;break}return d.info("setLocalConfName is no need in rest"),e.abrupt("return");case 3:return e.next=5,coreAccount.getLoginModel();case 5:if(t=e.sent,n=t.sipLoginOnly,r=t.account,a="",!n){e.next=13;break}a=$getState().login.tempSipNick,e.next=17;break;case 13:return e.next=15,coreContact.getContactByAccount(r);case 15:i=e.sent,a=getContactName(i);case 17:return s="",isNullOrEmpty(a)||(s=a.length<=2?a.substr(0,1)+"**":a.substr(0,1)+"**"+a.substr(-1)),d.info("setLocalConfName, sipLoginOnly = "+n+",userName = "+s),e.next=22,coreTup.getConfCtrlInstance();case 22:c=e.sent,c.setLocalConfName(a);case 24:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.isSupportProxy,r=t.proxyAddress,a=t.proxyPort,i=t.proxyAccount,e.next=3,coreSecurity.getPasswordManager();case 3:return s=e.sent,e.next=6,s.getPassword("proxyPassword");case 6:return c=e.sent,n||(d.info("is not support proxy"),r="",a="0",i="",c=""),u={port:parseInt(a),uri:r,user_name:i,password:c},d.info("proxy_param.uri = "+u.uri+",proxy_param.port = "+u.port),e.next=12,coreTup.getConfCtrlInstance();case 12:f=e.sent,f.confCtrlSetProxy(u);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},952:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getConfShareUrl=t.dateConvertTo=t.maxhubSkipLogin=t.registerMaxhubEvent=t.OnCleanValue=t.OnWorkplaceLogin=t.OnDecryptValue=t.OnEncryptValue=t.onStopCloudLink=t.onShowOrHideMainWnd=t.onGetMainWnd=t.onChangeLanguage=t.onLogout=t.onLeaveConference=t.onRunCloudLink=t.NotifyCameraListUpdateEx=t.onJoinConfFailed=t.changeHasSent=t.OnBigWinSetRecvShareParam=t.OnBigWinSetDevice=t.onBiggetDeviceList=t.onBiggetSpkValue=t.onBiggetMicValue=t.onBigWinSetSpkValue=t.onBigWinSetMicValue=t.onBigWinSharingUsername=t.onBigWinDataSharingHwnd=t.onBigWinVideoHwnd=t.onBigWinCtrlLocalCamera=t.resumeDeviceInfo=t.onBigWinLeaveConference=t.onBigWinJoinConference=t.onBigWinReLogin=t.onBigWinRunCloudLink=t.registerBigWinEvent=t.initWebSocketAPI=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(200),l=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(f),n(300)),d=n(631),p=r(d),h=n(242),m=n(216),v=coreLogger.getLogger("conference")("index");window.confAccesscode="",window.confPasscode="",window.confVip="",window.ConfUsername="",window.loginPass="",window.anonymousJoinConf=!1;var g=null,C=function(){var e=$getState().call;g=new Object,["micValue","voiceValue","micDevicesList","spkDevicesList","cameraDevicesList"].forEach(function(t){e.hasOwnProperty(t)&&(g[t]=e[t])})},S=(t.initWebSocketAPI=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isHubEnv){e.next=5;break}return e.next=3,(0,l.initMaxhubAPI)();case 3:e.next=6;break;case 5:(0,l.initBigWinAPI)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.registerBigWinEvent=function(){v.info("registerBigWinEvent, BigwinObserver subscribe topics"),coreCommon.BigwinObserver.subscribe("OnRunCloudLink",S),coreCommon.BigwinObserver.subscribe("OnReloginCloudLink",w),coreCommon.BigwinObserver.subscribe("OnJoinConference",b),coreCommon.BigwinObserver.subscribe("OnLeaveConference",N),coreCommon.BigwinObserver.subscribe("OnCtrlLocalCamera",y),coreCommon.BigwinObserver.subscribe("OnSetMicValue",O),coreCommon.BigwinObserver.subscribe("OnSetSpkValue",A),coreCommon.BigwinObserver.subscribe("OnSetDevice",R),coreCommon.BigwinObserver.subscribe("ongetMicValue",x),coreCommon.BigwinObserver.subscribe("ongetSpkValue",k),coreCommon.BigwinObserver.subscribe("ongetDeviceList",M),coreCommon.BigwinObserver.subscribe("OnChangeHasSent",L),coreCommon.BigwinObserver.subscribe("OnJoinConfFailed",D),coreCommon.BigwinObserver.subscribe("onBigWinVideoHwnd",T),coreCommon.BigwinObserver.subscribe("OnStopCloudLink",P)},t.onBigWinRunCloudLink=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="2052",n=0===t.param.language?"1033":"2052",setLanguage(n),!isNullOrEmpty(t.param.uPartal_acc)&&!isNullOrEmpty(t.param.uPartal_url)){e.next=10;break}return v.info("uPartal_acc or uPartal_url is null"),window.anonymousJoinConf=!0,e.next=8,(new coreCall.CallManager).setCallNotifyFunc();case 8:return coreSetting.initMediaDevice(),e.abrupt("return");case 10:return r=t.param.uPartal_acc,a=t.param.uPartal_url,o=t.param.uPartal_port,window.anonymousJoinConf=!1,window.switchAccount=!1,e.next=17,window.handleSwitchAccount({account:r,serverAddress:a,serverPort:o,noNeedLogout:!0});case 17:return e.next=19,coreSecurity.getPasswordManager();case 19:return i=e.sent,e.next=22,i.setPassword("password",t.param.uPartal_pas);case 22:coreAccount.login({});case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());window.retryUportalLoginTimes=0,window.baseTimeInterval=0,window.shouldStopRertyLogin=!0,window.bigwinReTryLogin=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("window.shouldStopRertyLogin = "+window.shouldStopRertyLogin),!0!==window.shouldStopRertyLogin){e.next=3;break}return e.abrupt("return");case 3:window.retryUportalLoginTimes++,t=5,window.switchAccount&&(t=15),window.retryUportalLoginTimes<=t?(n=0,window.switchAccount?n=2:1===window.retryUportalLoginTimes?(n=parseInt(21*Math.random()+10,10),window.baseTimeInterval=n):n=window.baseTimeInterval*Math.pow(2,window.retryUportalLoginTimes),v.info("bigwinReTryLogin, retryUportalLoginTimes = "+window.retryUportalLoginTimes+" , totalTimes = "+t+" , timeInterval = "+n),setTimeout(function(){coreAccount.login({})},1e3*n)):(window.shouldStopRertyLogin=!0,(0,l.NotifyLoginFailedEx)(1),v.info("bigwinReTryLogin, try many times. retry times = "+window.retryUportalLoginTimes));case 7:case"end":return e.stop()}},e,void 0)}));var w=t.onBigWinReLogin=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWinReLogin: description="+t.description+",call="+t.call+",cmd="+t.cmd+",opt="+t.opt+",port="+t.param.port+",url="+t.param.url+",userno="+t.param.acc),e.next=3,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT);case 3:if(!1===(n=e.sent)){e.next=16;break}return r=t.param.acc,a=t.param.url,o=t.param.port,e.next=10,window.handleSwitchAccount({account:r,serverAddress:a,serverPort:o});case 10:return e.next=12,coreSecurity.getPasswordManager();case 12:return i=e.sent,e.next=15,i.setPassword("password",t.param.pas);case 15:setTimeout(function(){window.goRoute("loginCtn"),coreAccount.login({})},500);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"9"===t.substr(0,1)||"2"===t.substr(0,1)||"3"===t.substr(0,1)?window.bigConfIsVideo=!0:window.bigConfIsVideo=!1,v.info("setBigConfCalloutType, bigConfIsVideo: "+window.bigConfIsVideo);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().login.serverAddress,v.info("onBigWinJoinConference, uportal changed, old: "+n+" new: "+t.param.url+" isRelogin: "+o),window.confAccesscode=t.param.acccode,window.confPasscode=t.param.passcode,window.confVip=t.param.vip,window.ConfUsername=t.param.username,window.loginPass=t.param.pas,window.switchAccount=!0,e.next=10,window.handleSwitchAccount({account:t.param.acc,serverAddress:t.param.url,serverPort:t.param.port});case 10:if(!o){e.next=23;break}return e.next=13,coreSecurity.getPasswordManager();case 13:return r=e.sent,e.next=16,r.setPassword("password",t.param.pas);case 16:return e.next=18,coreAccount.getLoginModel();case 18:a=e.sent,a.isSupportProxy=!1,setTimeout(function(){window.goRoute("loginCtn"),coreAccount.login({})},500),e.next=23;break;case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),b=t.onBigWinJoinConference=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWinJoinConference: ",(0,o.default)(t)),e.next=3,_(t.param.passcode);case 3:if(window.delayDispatchRecvBFCP=!1,!window.anonymousJoinConf){e.next=8;break}return v.info("anonymous join "+window.anonymousJoinConf),I(t,!0),e.abrupt("return");case 8:if("VIDEO_OUT"!==$getState().call.callStatus&&"VIDEO_CONNECTED"!==$getState().call.callStatus){e.next=13;break}return v.error("CloudLink is in call status , can not start call."),coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0))),e.abrupt("return");case 13:return e.next=15,coreAccount.getLoginModel();case 15:if(n=e.sent,(r=n.isSipRegSuc())&&!window.isOffline){e.next=21;break}return v.info("CloudLink is offline. Relogin"),I(t,!0),e.abrupt("return");case 21:if(a=$getState().login.serverAddress,!isNullOrEmpty(t.param.url)&&a!==t.param.url){e.next=38;break}if(v.info("onBigWinJoinConference, address equal: "+a),i=t.param.vip?t.param.vip:"",$dispatch(coreUi.changeBuriedAccesscode(t.param.acccode)),$dispatch(coreUi.changeBuriedPasscode(t.param.passcode)),$dispatch(coreUi.changeBuriedJoinConfVip(i)),c=t.param.acccode+"*"+t.param.passcode,isNullOrEmpty(t.param.username)){e.next=34;break}return e.next=32,coreTup.getCallInstance();case 32:u=e.sent,u.configTUPCallCfgAccountName(t.param.username);case 34:v.info("setBigConfCalloutType, bigConfIsVideo: "+window.bigConfIsVideo),coreCall.CallOut(c,{number:c,addr_vip:i},window.bigConfIsVideo),e.next=39;break;case 38:I(t,!1);case 39:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.bigwinCommonLogic=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWin CloudLink, bigwinCommonLogic."),e.next=3,coreSecurity.getPasswordManager();case 3:return t=e.sent,e.next=6,t.setPassword("password",window.loginPass);case 6:window.loginPass="",v.info("onBigWin CloudLink, start login."),coreAccount.login({});case 9:case"end":return e.stop()}},e,void 0)}));var N=t.onBigWinLeaveConference=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.anonymousJoinConf&&C(),t=$getState(),n=t.conf.confHandle,v.info("onBigWin leave conf, confHandle=",n),window.CLIENTCONFIG.ISBIGWIN&&((0,m.setCloseShareDataOperate)(!0),v.info("onBigWinLeaveConference hasCloseShareDataOperate : true")),e.next=6,(0,f.actionLeaveConf)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),E=t.resumeDeviceInfo=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,u,f,l;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("resumeDeviceInfo begin"),e.next=3,(new coreCall.CallManager).setCallNotifyFunc();case 3:t=[{name:"cameraDevicesList",handler:changeCameraDevicesList},{name:"spkDevicesList",handler:changeSpkDevicesList},{name:"micDevicesList",handler:changeMicDevicesList}],n=0;case 5:if(!(n<t.length)){e.next=14;break}return r=t[n],e.next=9,coreAccount.get({key:r.name,isPublic:!0});case 9:a=e.sent,Array.isArray(a)&&(v.info(r.name,a),$dispatch(r.handler(a)));case 11:n++,e.next=5;break;case 14:o=[{name:"spkDevice-value",handler:setVoiceValue},{name:"micDevice-value",handler:setMicValue},{name:"spkDevices-selected",handler:setSpkIndex},{name:"micDevices-selected",handler:setMicIndex},{name:"cameraDevices-selected",handler:setVideoIndex}],i=0;case 16:if(!(i<o.length)){e.next=25;break}return c=o[i],e.next=20,coreAccount.get({key:c.name,isPublic:!0});case 20:u=e.sent,isNullOrEmpty(u)||(v.info(c.name,u),c.handler(u));case 22:i++,e.next=16;break;case 25:return e.next=27,coreAccount.get({key:"share-wnd-width",isPublic:!0});case 27:return f=e.sent,e.next=30,coreAccount.get({key:"share-wnd-height",isPublic:!0});case 30:l=e.sent,v.info("share-wnd-width",f),v.info("share-wnd-height",l),isNullOrEmpty(f)||isNullOrEmpty(l)||h.NativeInterface.setBigconfDataInitRect(f,l),g=null,v.info("resumeDeviceInfo end");case 36:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.bigWinCommonLogOut=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("bigWinCommonLogOut"),!window.anonymousJoinConf){e.next=14;break}return v.info("onBigWin anonymous logout before"),C(),t=!1,appService.isLoginPage()&&(t=!0),window.loginPass="",e.next=9,appService.logOff();case 9:if(!t){e.next=13;break}return e.next=12,coreCommon.initDb();case 12:E();case 13:v.info("onBigWin anonymous logout end");case 14:case"end":return e.stop()}},e,void 0)}));var y=t.onBigWinCtrlLocalCamera=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.info("onBigWinCtrlLocalCamera: ",(0,o.default)(t)),n=$getState(),r=n.conf.confHandle,""!==r?coreCall.openOrOffCamera(t.param.bstop):v.error("onBigWin is not in conference, you can't control camera");case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),T=t.onBigWinVideoHwnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={hWnd:851978},r=null,1!==t.param.video_wnd){e.next=11;break}return a=(0,o.default)(t),v.info("onBigWinGetVHwnd data:",a),e.next=7,h.NativeInterface.getFrameHwnd();case 7:r=e.sent,n.hWnd=r.param.frameHwnd,e.next=12;break;case 11:n.hWnd=0;case 12:return v.info("onBigWinGetVHwnd hhwnd:",n.hWnd),i=null,e.next=16,new p.default;case 16:i=e.sent,i.postRpsParamMessage(t,n,0);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=(t.onBigWinDataSharingHwnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={hWnd:851978},r=null,$getState().conf.isDataConfSharing||!$getState().call.iSreceivingBFCP){e.next=7;break}v.info("getBfcpFrameHwnd"),r=h.NativeInterface.getBfcpFrameHwnd(),e.next=11;break;case 7:return v.info("getDataConfFrameWnd"),e.next=10,h.NativeInterface.getDataConfFrameWnd();case 10:r=e.sent;case 11:return v.info("onBigWinGetSharingHwnd 2data:",r),r&&r.param&&r.param.frameHwnd?n.hWnd=r.param.frameHwnd:v.error("onBigWinGetSharingHwnd value undefined!"),a=null,e.next=16,new p.default;case 16:a=e.sent,a.postRpsParamMessage(t,n,0);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.onBigWinSharingUsername=function(e){var t=$getState().conf.sharePersonName;return!$getState().conf.isDataConfSharing&&$getState().call.iSreceivingBFCP&&(t=""),e.user_name=t,e},t.onBigWinSetMicValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.param.vol,e.next=3,coreCall.setMicValue(n);case 3:return e.next=5,coreAccount.set({key:"micDevice-value",value:n,isPublic:!0});case 5:v.info("SetMicValue ="+n),isNullOrEmpty(g)||(g.micValue=n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),A=t.onBigWinSetSpkValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.param.vol,e.next=3,coreCall.setVoiceValue(n);case 3:return e.next=5,coreAccount.set({key:"spkDevice-value",value:n,isPublic:!0});case 5:v.info("SetSpkValue ="+n),isNullOrEmpty(g)||(g.voiceValue=n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),x=t.onBiggetMicValue=function(e){var t=g;return isNullOrEmpty(t)&&(t=$getState().call,v.info("onBiggetMicValue")),e.vol=t.micValue,v.info("getMicValue ="+e.vol),e.vol},k=t.onBiggetSpkValue=function(e){var t=g;return isNullOrEmpty(t)&&(t=$getState().call),e.vol=t.voiceValue,v.info("getSpkValue ="+e.vol),e.vol},M=t.onBiggetDeviceList=function(e,t){var n=g;isNullOrEmpty(n)&&(n=$getState().call);var r=e.param.device_type,a=[],o=[],i=[],s=[];switch(o=n.micDevicesList,i=n.spkDevicesList,s=n.cameraDevicesList,v.info("data =",e),v.info("micList =",o),v.info("spkList =",i),v.info("cameraList =",s),r){case 1:a=s;break;case 2:a=i;break;case 3:a=o;break;default:v.error("device type index is error, type is =",r)}v.info("device_list =:",a);for(var c=0;c<a.length;c++){var u={};u.device_id=a[c].index,u.device_name=a[c].name,t.device_list.push(u)}return t.device_list},R=t.OnBigWinSetDevice=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=1,r=2,a=3,v.info("data =",(0,o.default)(t)),i=t.param.device_type,c=t.param.device_id,e.t0=i,e.next=e.t0===n?9:e.t0===r?14:e.t0===a?19:24;break;case 9:return e.next=11,coreSetting.setVideoIndex(c);case 11:return e.next=13,coreAccount.set({key:"cameraDevices-selected",value:c,isPublic:!0});case 13:return e.abrupt("break",26);case 14:return e.next=16,coreSetting.setSpkIndex(c);case 16:return e.next=18,coreAccount.set({key:"spkDevices-selected",value:c,isPublic:!0});case 18:return e.abrupt("break",26);case 19:return e.next=21,coreSetting.setMicIndex(c);case 21:return e.next=23,coreAccount.set({key:"micDevices-selected",value:c,isPublic:!0});case 23:return e.abrupt("break",26);case 24:return v.error("device type index is error, type is =",i),e.abrupt("break",26);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),L=(t.OnBigWinSetRecvShareParam=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("OnBigWinSetRecvShareParam =:",(0,o.default)(t)),!t.param.width||!t.param.height){e.next=7;break}return e.next=4,coreAccount.set({key:"share-wnd-width",value:t.param.width,isPublic:!0});case 4:return e.next=6,coreAccount.set({key:"share-wnd-height",value:t.param.height,isPublic:!0});case 6:h.NativeInterface.setBigconfDataInitRect(t.param.width,t.param.height);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeHasSent=function(e){$dispatch(coreUi.changeHasSentState(e))}),D=t.onJoinConfFailed=function(){coreConf.buriedJoinConfFailed()},P=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=["cameraDevicesList","spkDevicesList","micDevicesList","spkDevice-value","micDevice-value","spkDevices-selected","micDevices-selected","cameraDevices-selected","share-wnd-width","share-wnd-height"],r=0;case 2:if(!(r<n.length)){e.next=9;break}return a=n[r],e.next=6,coreAccount.remove({key:a,isPublic:!0});case 6:r++,e.next=2;break;case 9:setTimeout(function(){try{appService.exitApp()}catch(e){v.error("closeApp",{e:e.toJSON()})}},500);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),F=(t.NotifyCameraListUpdateEx=function(e){(0,l.NotifyCameraListUpdate)(e);var t=$getState().call.cameraDevicesList;isNullOrEmpty(g)||(g.cameraDevicesList=t),coreAccount.set({key:"cameraDevicesList",value:t})},t.onRunCloudLink=function(e){v.info("onRunCloudLink: ",e.param.language);var t="2052";t=0===e.param.language?"1033":"2052",setLanguage(t)}),U=t.onLeaveConference=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),""===(n=t.conf.confHandle)){e.next=7;break}return v.info("onLeaveConference: confHandle=",n),e.next=5,(0,f.actionLeaveConf)();case 5:e.next=8;break;case 7:v.info("onLeaveConference: not in conf");case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),B=t.onLogout=function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT),coreAccount.changeAutoLogin()},W=t.onChangeLanguage=function(e){v.info("onChangeLanguage: ",e.param.language);var t="2052";t=0===e.param.language?"1033":"2052",coreConf.setNativeWndLogPath({logpath:window.LOG_PATH}),coreUi.choseLanguage(t)},V=t.onGetMainWnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={hWnd:0},r=win.getNativeWindowHandle(),n.hWnd=r.readUInt32LE(0),v.info("onGetMainWnd js main wnd:",n.hWnd),a=null,e.next=7,new p.default;case 7:a=e.sent,a.postRpsParamMessage(t,n,0);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),H=t.onShowOrHideMainWnd=function(e){v.info("onShowOrHideMainWnd: ",e.param),0===e.param.isShow?(win.hide(),window.dispatchEvent(new Event("onMainFrameHide"))):(1===e.param.showSkip?$dispatch(coreUi.changeShowSkipBtn(!0)):$dispatch(coreUi.changeShowSkipBtn(!1)),win.show(),v.info("onShowOrHideMainWnd setAlwaysOnTop start"),win.setAlwaysOnTop(!0),win.setAlwaysOnTop(!1),v.info("onShowOrHideMainWnd setAlwaysOnTop end"))},$=t.onStopCloudLink=function(e){v.info("onStopCloudLink: ",(0,o.default)(e)),setTimeout(function(){try{appService.exitApp()}catch(e){v.error("onStopCloudLink:",{e:e.toJSON()})}},500)},G=t.OnEncryptValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,e.next=5,coreSecurity.encryptKMC(t.param.value);case 5:if(r=e.sent,t.param.value="",0!==r.result){e.next=15;break}return a={key:"MAXHUBKEY_"+t.param.key,value:r.param.CiperText},e.next=11,coreDb.saveEncryptValue(a);case 11:v.info("OnEncryptValue: enc succ"),n.postRpsMessage(t,0),e.next=17;break;case 15:v.info("OnEncryptValue: enc fail"),n.postRpsMessage(t,1e3);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),j=t.OnDecryptValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,r={key:"MAXHUBKEY_"+t.param.key},e.next=6,coreDb.queryEncryptValue(r);case 6:if(""!==(a=e.sent)){e.next=12;break}v.info("OnDecryptValue: query fail"),n.postRpsMessage(t,1e3),e.next=19;break;case 12:return v.info("OnDecryptValue: query succ"),e.next=15,coreSecurity.decryptKMC(a);case 15:o=e.sent,i=o&&o.param&&o.param.PlainText||"",v.info("OnDecryptValue retValue: "+i==""?"failed":"success"),""===i?(v.info("OnDecryptValue: dec fail"),n.postRpsMessage(t,1e3)):(v.info("OnDecryptValue: dec succ"),c={key:t.param.key,decrypt_vaule:i},n.postRpsParamMessage(t,c,0),c.decrypt_vaule="",i="");case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),q=t.OnWorkplaceLogin=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("OnWorkplaceLogin uPartal_url: ",t.param.uPartal_url,"workPlace_url:",t.param.workPlace_url),e.next=3,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!1);case 3:if(!(n=e.sent)){e.next=17;break}return e.next=7,coreAccount.getLoginModel();case 7:return r=e.sent,r.set({account:t.param.acc||"",displayAccount:t.param.acc||"",password:t.param.pas||"",serverAddress:t.param.uPartal_url||"",serverPort:t.param.uPartal_port||"",middleEndAddress:t.param.workPlace_url||""}),e.next=11,coreSecurity.getPasswordManager();case 11:a=e.sent,a.setPassword("password",t.param.pas),t.param.pas="",v.info("OnWorkplaceLogin set window.CLIENTCONFIG.NEW_APP_NAME is WeLink"),window.CLIENTCONFIG.NEW_APP_NAME="WeLink",coreAccount.doLogin();case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),J=t.OnCleanValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,r={key:"MAXHUBKEY_"+t.param.key},e.next=6,coreDb.cleanEncryptValue(r);case 6:n.postRpsMessage(t,0);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Y=(t.registerMaxhubEvent=function(){v.info("registerMaxhubEvent, BigwinObserver subscribe topics"),coreCommon.BigwinObserver.subscribe("OnRunCloudLink",F),coreCommon.BigwinObserver.subscribe("OnLeaveConference",U),coreCommon.BigwinObserver.subscribe("OnLogout",B),coreCommon.BigwinObserver.subscribe("OnChangeLanguage",W),coreCommon.BigwinObserver.subscribe("OnGetMainWnd",V),coreCommon.BigwinObserver.subscribe("OnShowOrHideMainWnd",H),coreCommon.BigwinObserver.subscribe("OnStopCloudLink",$),coreCommon.BigwinObserver.subscribe("OnEncryptValue",G),coreCommon.BigwinObserver.subscribe("OnDecryptValue",j),coreCommon.BigwinObserver.subscribe("OnCleanValue",J),coreCommon.BigwinObserver.subscribe("OnWorkplaceLogin",q)},t.maxhubSkipLogin=function(){v.info("userClick maxhub  skipLogin"),(0,l.NotifySkipLogin)(0)},t.dateConvertTo=function(e){if(null!==e&&void 0!==e){var t=e.split(" "),n=(new Date).getFullYear(),r=t[0].replace(/-/g,"/").split("/"),a=r[0],o=r[1],i=r[2];return a!==n.toString()?a+language.YEAR+o+language.MONTH+i+language.DAY+" "+t[1]:o+language.MONTH+i+language.DAY+" "+t[1]}});t.getConfShareUrl=function(e){var t=decodeURI("%0d%0a"),n=e.scheduser_name,r=e.conf_subject,a=e.conf_id,o=e.vmr_id,i=(e.general_pwd,e.guest_join_uri),s=e.start_time,c=e.end_time,u=Y(s)+" - "+(s.split(" ")[0]===c.split(" ")[0]?c.split(" ")[1]:Y(c)),f=isNullOrEmpty(o)?a:o;return""+language.NATIVE_CONF_THEME+r+t+language.NATIVE_CONF_TIME+u+t+language.NATIVE_CONF_SPONSOR+n+t+language.NATIVE_CONF_ID+f+t+language.NATIVE_CONF_LINK+(i||"")}},953:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.serverCloseAllPair=t.pairedOrCanceledResultNotify=t.receivePairReqNotify=t.creatQrCodeSvg=t.initTupPairServer=t.initAsPairServer=t.uninitAsPairServer=t.requestPairCode=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(356),l=coreLogger.getLogger("logic")("synergism/server"),d=null,p=3e5,h=[],m=null,v=null,g=null;"win"===window.CLIENTCONFIG.PLATFORM&&(g=n(1788));var C=function(){d&&clearInterval(d),d=null,p=3e5,h=[],m=null,v&&clearTimeout(v),v=null},S=t.requestPairCode=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,u,d,p,h,m,v,g;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("win"!==window.CLIENTCONFIG.PLATFORM){e.next=23;break}if(t=$getState().login,n=t.account,r=t.authToken,a=t.sipAccount,o=t.euaServer,i=(0,f.dealWithSipNumber)(a),c=o?o.split(":"):"",u=c[1]?c[1]:8544,d=window.localIp,c=c[0],!$getState().login.isSupportAS){e.next=15;break}return e.next=10,coreAccount.getLoginModel();case 10:p=e.sent,h=p.serverUportalAddress,c=h,u=8544,l.info("[pair] server euaServer isSupportAS env :",c);case 15:return m=window.path.join(window.EXEC_PATH,"/BfcpTLS/server.pem"),e.next=18,coreTup.getUportalInstance();case 18:return v=e.sent,e.next=21,v.getProjectionCode(c,u,n,r,i,d,m);case 21:g=e.sent,l.info("request pair code from eua server ret=",g);case 23:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),w=(t.uninitAsPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("start uninitAsPairServer"),C(),e.next=4,coreTup.getUportalInstance();case 4:t=e.sent,t.setNotifyFunc(360470,null);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initAsPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("win"===window.CLIENTCONFIG.PLATFORM){e.next=3;break}return l.info("cancel initPairServer, not windows platform"),e.abrupt("return");case 3:if(l.info("start request and refresh pair code"),C(),t=$getState().login.euaServer,!$getState().login.isSupportAS){e.next=13;break}return e.next=9,coreAccount.getLoginModel();case 9:n=e.sent,r=n.serverUportalAddress,t=r,l.info("[pair] euaServer isSupportAS env :",t);case 13:if(t&&""!==t){e.next=16;break}return l.info("the eua server is null"),e.abrupt("return");case 16:return l.info("the eua server is:",t),e.next=19,coreTup.getUportalInstance();case 19:return a=e.sent,a.setNotifyFunc(360470,_),e.next=23,S();case 23:d=setInterval(function(){l.info("It is time to refresh pair code, cycle=",p),S()},p);case 24:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initTupPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("start init tup call module as pair server"),e.next=3,coreCall.pairEnable(0,1);case 3:if(t=e.sent,0===t.result){e.next=7;break}return l.info("enable tup pair failed, ret=",t),e.abrupt("return");case 7:return e.next=9,coreSecurity.decryptKMC(window.bfcpp);case 9:return n=e.sent,r=n&&n.param&&n.param.PlainText||"",l.info("bfcpTLSP decrytp: "+(""===r?"failed":"success")),a={call:{pair_private_key:{private_key_file:window.path.join(window.EXEC_PATH,"/BfcpTLS/server_key.pem"),private_key_file_psw:r,private_key_file_psw_len:r.length}}},e.next=15,coreCall.setTUPCallCfg(a);case 15:t=e.sent,0!==t.result?l.info("config tup private [key] failed, ret=",t):l.info("init tup call module as pair server success");case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.creatQrCodeSvg=function(e){if(null!==g){var t=window.path.join(window.APP_DATA_PATH,"pairCode.svg").replace(/\\/g,"/"),n="cloudlink://welinksoftclient/h5page?page=synergism&pairCode="+e.pairCode;if(1===$getState().synergismInfo.QRMode){var r="ui://welink.conference/scanQrCode?page=synergism&pairCode="+e.pairCode;n="hwwelink://welink.huawei.com?uri="+encodeURIComponent(r),l.info("workplace mode qr code")}else if(2===$getState().synergismInfo.QRMode){var a="page=synergism&pairCode="+e.pairCode;n=$getState().synergismInfo.QRScheme+encodeURIComponent(a),l.info("other mode qr code")}var o=g.image(n,{type:"svg"}),i=window.fs.createWriteStream(t),s=o.pipe(i);s.on("error",function(e){l.error("refresh qr code svg failed, error=",e)}),s.on("finish",function(){l.info("refresh qr code svg success"),$dispatch(coreUi.changePairCodeInfo(e))})}}),_=function(e){if(l.info("getPairCodeNotify=",(0,o.default)(e)),0===e.param.result&&1===e.param.is_pair){var t=e.param.projection_code_result.project_code,n=e.param.projection_code_result.valid_time,r=e.param.projection_code_result.tmpKey;if(""!==t&&0!==n&&""!==r){var a={pairCode:t,validTime:n,tmpKey:r};l.info("Notify get pair code info=",a),m=$getState().synergismInfo.pairCodeInfo,v&&clearTimeout(v),v=setTimeout(function(){l.info("It is time to clean old pair code info"),m=null},3e4),w(a),n=5*n/8*1e3,p!==n&&(l.info("pair code valid time changed, set cycle="+n+", old cycle="+p),p=n,d&&clearInterval(d),d=setInterval(function(){l.info("It is time to refresh pair code, cycle=",p),S()},p))}}else l.info("Notify return failed, get pair code result=",e)},I=function(e){return e===$getState().synergismInfo.pairCodeInfo.tmpKey||!(!m||!m.tmpKey||m.tmpKey!==e)},b=function(e){for(var t=h.length,n=0;n<t;n++)if(h[n].id===e)return l.info("find client in paired list, index=",n+", id=",e),n;return-1},N=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.cancelPair(1,h[t].id);case 2:n=e.sent,l.info("break old pair rsp=",n),r=h.length,t<r&&(h.splice(t,1),l.info("delete client form paired list, index=",t+", old list length=",r+", new list length=",h.length));case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={isPermit:0,reason:0},!I(t.pair_key)){e.next=28;break}if(-1===b(t.id)){e.next=7;break}n.isPermit=1,n.reason=0,e.next=26;break;case 7:if(!(h.length>=1)){e.next=23;break}if(l.info("the paired device count is over limit"),1!==t.is_force){e.next=18;break}return l.info("deal force pair request"),r=0,e.next=14,N(r);case 14:n.isPermit=1,n.reason=0,e.next=21;break;case 18:l.info("paired client number over limit"),n.isPermit=0,n.reason=constant.SYNERGISM_FAIL_REASON.USER_NUM_LIMITED;case 21:e.next=26;break;case 23:l.info("check pair request valid success"),n.isPermit=1,n.reason=0;case 26:e.next=31;break;case 28:l.info("check pair request valid failed"),n.isPermit=0,n.reason=constant.SYNERGISM_FAIL_REASON.AUTH_FAIL;case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.receivePairReqNotify=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c,u,d,p;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("Notify, receive pair request, id=",t.id),n=$getState().login.sipAccount,r=(0,f.dealWithSipNumber)(n),a=getContactName($getState().myInfo),i=window.localIp,e.next=7,E(t);case 7:return c=e.sent,e.next=10,coreCall.pairPermit(t.id,c.isPermit,c.reason,i,r,a,300,1);case 10:u=e.sent,0===u.result&&1===c.isPermit?(d={id:t.id,name:t.display_name,ip:t.remote_ip,sip:t.sip_number},p=b(t.id),-1===p?(h.push(d),l.info("send peimit pair success, save client info, id=",d.id+", ip=",d.ip+"list length=",h.length)):(h.splice(p,1,d),l.info("send peimit pair success, refresh client info, index=",p+"id=",d.id+", ip=",d.ip+"list length=",h.length))):l.info("pair response=",(0,o.default)(c)+", ret=",u);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairedOrCanceledResultNotify=function(e){if(l.info("Notify get pair or cancel result, id=",e.id+", isPair=",e.is_paired+", reason=",e.reason),!e.is_paired){var t=b(e.id);-1!==t&&(l.info("delete client form paired list, index=",t),h.splice(t,1))}},t.serverCloseAllPair=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(h.length>0)){e.next=9;break}l.info("start close all paired client"),t=0;case 3:if(!(t<h.length)){e.next=9;break}return e.next=6,N(t);case 6:t++,e.next=3;break;case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},954:function(e,t,n){"use strict";(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function i(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(w.isFunction(e)){if(b)return e.name;var t=e.toString(),n=t.match(E);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(b||!w.isFunction(e))return w.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function f(e){return c(u(e.actual),128)+" "+e.operator+" "+c(u(e.expected),128)}function l(e,t,n,r,a){throw new N.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function d(e,t){e||l(e,!0,t,"==",N.ok)}function p(e,t,n,s){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(i(e)&&i(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(e);return-1!==c&&c===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),m(e,t,n,s))}return n?e===t:e==t}function h(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function m(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(w.isPrimitive(e)||w.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=h(e),o=h(t);if(a&&!o||!a&&o)return!1;if(a)return e=I.call(e),t=I.call(t),p(e,t,n);var i,s,c=y(e),u=y(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;s>=0;s--)if(c[s]!==u[s])return!1;for(s=c.length-1;s>=0;s--)if(i=c[s],!p(e[i],t[i],n,r))return!1;return!0}function v(e,t,n){p(e,t,!0)&&l(e,t,n,"notDeepStrictEqual",v)}function g(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function C(e){var t;try{e()}catch(e){t=e}return t}function S(e,t,n,r){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),a=C(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!a&&l(a,n,"Missing expected exception"+r);var o="string"==typeof r,i=!e&&w.isError(a),s=!e&&a&&!n;if((i&&o&&g(a,n)||s)&&l(a,n,"Got unwanted exception"+r),e&&a&&n&&!g(a,n)||!e&&a)throw a}var w=n(301),_=Object.prototype.hasOwnProperty,I=Array.prototype.slice,b=function(){return"foo"===function(){}.name}(),N=e.exports=d,E=/\s*function\s+([^\(\s]*)\s*/;N.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=s(t),o=r.indexOf("\n"+a);if(o>=0){var i=r.indexOf("\n",o+1);r=r.substring(i+1)}this.stack=r}}},w.inherits(N.AssertionError,Error),N.fail=l,N.ok=d,N.equal=function(e,t,n){e!=t&&l(e,t,n,"==",N.equal)},N.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",N.notEqual)},N.deepEqual=function(e,t,n){p(e,t,!1)||l(e,t,n,"deepEqual",N.deepEqual)},N.deepStrictEqual=function(e,t,n){p(e,t,!0)||l(e,t,n,"deepStrictEqual",N.deepStrictEqual)},N.notDeepEqual=function(e,t,n){p(e,t,!1)&&l(e,t,n,"notDeepEqual",N.notDeepEqual)},N.notDeepStrictEqual=v,N.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",N.strictEqual)},N.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",N.notStrictEqual)},N.throws=function(e,t,n){S(!0,e,t,n)},N.doesNotThrow=function(e,t,n){S(!1,e,t,n)},N.ifError=function(e){if(e)throw e};var y=Object.keys||function(e){var t=[];for(var n in e)_.call(e,n)&&t.push(n);return t}}).call(t,n(154))},955:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unnormalEnd=t.normalEnd=t.createXMLHttpRequest=void 0;var r=n(819),a=n(956),o=coreLogger.getLogger("bigwinBuried")("buried");t.createXMLHttpRequest=function(){var e=void 0;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){o.error("create XML http request Msxml2 error",t);try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){o.error("create XML http request MS error",e)}}return e},t.normalEnd=function(e,t,n){o.info("buried buriedNormalEnd");var i=parseInt((new Date).getTime()/1e3,10),s=i-n;o.info("总时间"+s);var c={endType:e,isUserEnd:t,holdTime:s};(0,r.stopCalcCPUUsage)(),(0,a.endConfSendQos)();(0,r.sendHttpPost)("normalEnd",c)},t.unnormalEnd=function(e,t){o.info("buried buriedUnormalEnd");var n=parseInt((new Date).getTime()/1e3,10),i=n-t;o.info("总时间"+i),o.info("end call reason :",e);var s={holdTime:i,errId:e};(0,r.stopCalcCPUUsage)(),(0,a.endConfSendQos)();(0,r.sendHttpPost)("abnormalEnd",s)}},956:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.endConfSendQos=t.startRecordQos=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(819),u=coreLogger.getLogger("bigwinBuried")("buried"),f=void 0,l=void 0,d=0,p=!1,h=void 0,m=void 0,v=function(){f={qosType:11,rcvTtlBytes:0,sndTtlBytes:0,rcvAvgBitR:0,sndAvgBitR:0,rcvMaxLossR:0,sndMaxLossR:0,rcvContLoss:0,sndContLoss:0,rcvMaxDelay:0,sndMaxDelay:0,rcvMaxJitter:0,sndMaxJitter:0},l={qosType:0,rcvTtlBytes:0,sndTtlBytes:0,rcvAvgBitR:0,sndAvgBitR:0,rcvMaxLossR:0,sndMaxLossR:0,rcvContLoss:0,sndContLoss:0,rcvMaxDelay:0,sndMaxDelay:0,rcvMaxJitter:0,sndMaxJitter:0},d=0,p=!1},g=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,h,m,v,g,C,S,w,_;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return u.error("client config is not bigwin."),e.abrupt("return");case 3:return e.next=5,coreTup.getCallInstance();case 5:return t=e.sent,e.next=8,t.getCallMediaParams({});case 8:n=e.sent,r=n.param,d++,a=r.svc_stream_info,r&&r.audio_stream_info&&(l.rcvTtlBytes=null!==r.audio_stream_info.bytes_received&&r.audio_stream_info.bytes_received>=l.rcvTtlBytes?r.audio_stream_info.bytes_received:l.rcvTtlBytes,l.sndTtlBytes=null!==r.audio_stream_info.bytes_sent&&r.audio_stream_info.bytes_sent>=l.sndTtlBytes?r.audio_stream_info.bytes_sent:l.sndTtlBytes,l.rcvAvgBitR=null!==r.audio_stream_info.recv_bit_rate&&r.audio_stream_info.recv_bit_rate>=l.rcvAvgBitR?r.audio_stream_info.recv_bit_rate:l.rcvAvgBitR,l.sndAvgBitR=null!==r.audio_stream_info.send_bit_rate&&r.audio_stream_info.send_bit_rate>=l.sndAvgBitR?r.audio_stream_info.send_bit_rate:l.sndAvgBitR,l.rcvMaxLossR=null!==r.audio_stream_info.recv_loss_fraction&&r.audio_stream_info.recv_loss_fraction>=l.rcvMaxLossR?r.audio_stream_info.recv_loss_fraction:l.rcvMaxLossR,l.sndMaxLossR=null!==r.audio_stream_info.send_loss_fraction&&r.audio_stream_info.send_loss_fraction>=l.sndMaxLossR?r.audio_stream_info.send_loss_fraction:l.sndMaxLossR,l.rcvMaxDelay=null!==r.audio_stream_info.recv_delay&&r.audio_stream_info.recv_delay>=l.rcvMaxDelay?r.audio_stream_info.recv_delay:l.rcvMaxDelay,l.sndMaxDelay=null!==r.audio_stream_info.send_delay&&r.audio_stream_info.send_delay>=l.sndMaxDelay?r.audio_stream_info.send_delay:l.sndMaxDelay,l.rcvMaxJitter=null!==r.audio_stream_info.recv_jitter&&r.audio_stream_info.recv_jitter>=l.rcvMaxJitter?r.audio_stream_info.recv_jitter:l.rcvMaxJitter,l.sndMaxJitter=null!==r.audio_stream_info.send_jitter&&r.audio_stream_info.send_jitter>=l.sndMaxJitter?r.audio_stream_info.send_jitter:l.sndMaxJitter),i=0,s=0,c=0,h=0,m=0,v=0,g=0,C=0,S=0,w=0;for(_ in a)""===a[_].decode_name&&""===a[_].encode_name||(p=!0),i=null!==a[_].bytes_received&&a[_].bytes_received>=i?a[_].bytes_received:i,s=null!==a[_].bytes_sent&&a[_].bytes_sent>=s?a[_].bytes_sent:s,c=null!==a[_].video_recv_bit_rate&&a[_].video_recv_bit_rate/1e3>=c?a[_].video_recv_bit_rate/1e3:c,h=null!==a[_].video_send_bit_rate&&a[_].video_send_bit_rate/1e3>=h?a[_].video_send_bit_rate/1e3:h,m=null!==a[_].recv_loss_fraction&&a[_].recv_loss_fraction>=m?a[_].recv_loss_fraction:m,v=null!==a[_].send_loss_fraction&&a[_].send_loss_fraction>=v?a[_].send_loss_fraction:v,g=null!==a[_].recv_delay&&a[_].recv_delay>=g?a[_].recv_delay:g,C=null!==a[_].send_delay&&a[_].send_delay>=C?a[_].send_delay:C,S=null!==a[_].recv_jitter&&a[_].recv_jitter>=S?a[_].recv_jitter:S,w=null!==a[_].send_jitter&&a[_].send_jitter>=w?a[_].send_jitter:w;!0===p&&(f.rcvTtlBytes=f.rcvTtlBytes>=i?f.rcvTtlBytes:i,f.sndTtlBytes=f.sndTtlBytes>=s?f.sndTtlBytes:s,f.rcvAvgBitR=f.rcvAvgBitR>=c?f.rcvAvgBitR:c,f.sndAvgBitR=f.sndAvgBitR>=h?f.sndAvgBitR:h,f.rcvMaxLossR=f.rcvMaxLossR>=m?f.rcvMaxLossR:m,f.sndMaxLossR=f.sndMaxLossR>=v?f.sndMaxLossR:v,f.rcvMaxDelay=f.rcvMaxDelay>=g?f.rcvMaxDelay:g,f.sndMaxDelay=f.sndMaxDelay>=C?f.sndMaxDelay:C,f.rcvMaxJitter=f.rcvMaxJitter>=S?f.rcvMaxJitter:S,f.sndMaxJitter=f.sndMaxJitter>=w?f.sndMaxJitter:w);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.startRecordQos=function(){if(u.info("buried buriedStartRecordQos"),!window.CLIENTCONFIG.ISBIGWIN)return void u.error("client config is not bigwin.");v(),h=setInterval(function(){g()},5e3),m=setInterval(function(){!0===p&&(0,c.sendHttpPost)("qos",f),(0,c.sendHttpPost)("qos",l),v()},6e4)},t.endConfSendQos=function(){if(u.info("buried endConfSendQos"),!window.CLIENTCONFIG.ISBIGWIN)return void u.error("client config is not bigwin.");clearInterval(h),clearInterval(m),d<1||(!0===p&&(0,c.sendHttpPost)("qos",f),(0,c.sendHttpPost)("qos",l),v())}},957:function(e,t,n){"use strict";function r(e){o.info("checkConferenceId");var t=isNullOrEmpty(e);return t&&(o.info("userClick  checkConferenceId",language.ENTER_CONF_ACS_ID_NULL),window.alert(language.ENTER_CONF_ACS_ID_NULL)),t}function a(e){o.info("getExperienceConferenceInfo");var t=e.split("*"),n={confId:t[0]};return 2!==t.length||isNullOrEmpty(t[1])||(o.info("getExperienceConferenceInfo 有mi ma"),n.confPwd=t[1]),n}Object.defineProperty(t,"__esModule",{value:!0}),t.checkConferenceId=r,t.getExperienceConferenceInfo=a;var o=coreLogger.getLogger("logic")("conference/audio/joinConference")},958:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(135),i=a(o),s=n(172),c=a(s),u=n(147),f=a(u),l=n(1),d=a(l),p=n(2),h=a(p),m=n(4),v=a(m),g=n(5),C=a(g),S=n(215),w=n(259),_=r(w),I=n(216),b=r(I),N=n(242),E=n(260),y=n(300),T=n(261),O=coreLogger.getLogger("dataconf")("logic"),A=function(){function e(){var t=this;(0,v.default)(this,e),this.handleApplistResult=function(){var e=(0,h.default)(d.default.mark(function e(n){var r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(r=b.getShareAppHwnd())||!T.DFConfig.isAppShareEnabled){e.next=10;break}return e.next=4,t.processProgramList(n);case 4:a=e.sent,O.info("get program list , length = "+a.length),$dispatch(coreUi.changeSharingAppWindow(a)),t.toggleShowPickSharingWindow(),e.next=21;break;case 10:return e.next=12,b.setSharingapp(r);case 12:return e.next=14,N.NativeInterface.setHightlightShareWnd(r,!0);case 14:return o=e.sent,e.next=17,b.setAppShareScreenParam(9,{width:3,height:0});case 17:return e.next=19,b.setStart();case 19:$dispatch(coreUi.changeFirstActiveShareApp(!1)),o&&b.setTransparentwindow(o,7);case 21:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.processProgramList=function(){var e=(0,h.default)(d.default.mark(function e(n){var r,a,o,i,s,u,l,p,h,m,v,g,C,S,w;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,f.default)(n.param).map(function(e){return[String(e),n.param[e]]}),a=[],(0,f.default)(n.param).map(function(e){if(-1!==e.indexOf("hwnd")){var t=n.param[e];t>0&&a.push(t)}}),O.info("processProgramList getWindowIcon start "),o=new c.default,e.next=7,N.NativeInterface.getWindowIcon(a);case 7:i=e.sent,i&&(O.info("get window thumbnail result"),o=t.processProgramThumbnail(i.param,r)),O.info("processProgramList getWindowIcon end"),s=[],u={handler:0,title:language.SHARING_DESKTOP,thumbnail:window.__dirname+"/../resources/icon/share_desktop.png"},s.push(u),l={handler:0,title:language.LANG_NATIVE_WHITE_BOARD,thumbnail:window.__dirname+"/../resources/icon/whiteboard.png"},s.push(l),!0===T.DFConfig.isDocShareEnabled()&&(p={handler:0,title:language.DOCUMENT_SHARE,thumbnail:window.__dirname+"/../resources/icon/share_doc.png"},s.push(p)),h=0;case 17:if(!(h<r.length)){e.next=35;break}if(m=r[h],-1===m[0].indexOf("hwnd")||isNullOrEmpty(m[1])||!(m[1]>0)){e.next=32;break}v=m[0].replace("hwnd",""),g="wndTitle"+v,C=0;case 23:if(!(C<r.length)){e.next=32;break}if(S=r[C],S[0]!==g){e.next=29;break}return w={handler:m[1],title:S[1],thumbnail:o.get(m[0])},"CloudLink"!==w.title&&"华为会议"!==w.title&&"Huawei Meeting"!==w.title&&void 0!==w.thumbnail&&s.push(w),e.abrupt("break",32);case 29:C++,e.next=23;break;case 32:h++,e.next=17;break;case 35:return e.abrupt("return",s);case 36:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.processProgramThumbnail=function(e,t){var n=new c.default;if(!isNullOrEmpty(e)){O.info("processProgramThumbnail start ");for(var r=0;r<e.length;r++)for(var a=e[r],o=parseInt(a.hwnd),i=0;i<t.length;i++){var s=t[i],u=parseInt(s[1]);if(o===u){n.set(s[0],a.path);break}}O.info("processProgramThumbnail end")}return n},this.toggleShowPickSharingWindow=function(){$getState().conf.isShowPickSharingWindow?$dispatch(coreUi.togglePickSharingWindow(!1)):$dispatch(coreUi.togglePickSharingWindow(!0))},this.hidePickSharingWindow=function(){$dispatch(coreUi.togglePickSharingWindow(!1))},this.openShareScreen=(0,h.default)(d.default.mark(function e(){var n,r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf,r=n.isSvcConf,a=n.setShareQuality,o={},a=100===a?1:40===a?0:2,o=(0,i.default)(o,{share_quality:a}),S.SvcAtdManager.setParam(o);case 5:case"end":return e.stop()}},e,t)})),this.resumeVideoWhenDataEnd=function(){},this.onRequestOperateTokenFail=function(){S.SvcAtdManager.alertBox(language.SHARE_FAILED,3),t.proxy.stopShareScreen()},this.updateComponentStatus=function(){var e=(0,h.default)(d.default.mark(function e(n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("docshare updateComponentStatus: ",n),r=n.component,r!==constant.COMPONENT_IID.IID_COMPONENT_DS&&r!==constant.COMPONENT_IID.IID_COMPONENT_AS&&r!==constant.COMPONENT_IID.IID_COMPONENT_WB&&t.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleReceiveScreenKeyFrame=function(e){t.onAsOnRecvFirstFrame(e)},this.onAsOnRecvFirstFrame=function(){var e=(0,h.default)(d.default.mark(function e(n){var r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("recv first frame"),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.notifyDataRecvFirstFrame();case 6:a=e.sent,O.info("onAsOnRecvFirstFrame,ret = ",a);case 8:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleDataShareEnd=function(){},this.switchVideoFloating=function(){},this.resumeVideoWhenDataEnd=function(){},this.proxy=null}return(0,C.default)(e,[{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(T.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("updateComponentStatus",this.updateComponentStatus,e)}},{key:"closeBfcpFrameForSharingSession",value:function(){}},{key:"closeBfcpFrameForOwnerChanged",value:function(){S.SvcAtdManager.closeBfcpFrame(),_.closeBfcpFrame()}},{key:"clearBfcpTimer",value:function(){}},{key:"closeAppShare",value:function(){}},{key:"initDeviceStates",value:function(){E.ToolbarManager.initDeviceStates()}},{key:"handleBfcpForChangeMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,h.default)(d.default.mark(function e(t,n){var r,a,o,i,s;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$getState().conf,a=r.bfcpFrameHwnd,o=r.isSvcConf,i=$getState().call.avcBfcpHwnd,s=0,!((s=o?a:i)>0)){e.next=10;break}return O.info("changeDataConfShowMode bfcpFrameHwnd = "+s+" ,destoryBFCPFram"),e.next=8,S.SvcAtdManager.closeBfcpFrame();case 8:return e.next=10,_.closeBfcpFrame();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,t){O.info("handleCloseNativeDataWnd")}},{key:"onJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,h.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.proxy.handleJoinDataConfFail();case 2:coreConf.isInConf()&&S.SvcAtdManager.alertBox(language.SHARING_JOINCONF_FAIL+language.FEEDBACK_MESSAGE_TIPS,2,0,"feedback",language.FEEDBACK);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleWindowForStopShareScreen",value:function(){coreCall.exitFullScreen(),remote.ipcMain.removeListener("toggle-menu-show-message",this.proxy.toggleShowDataControlMenu),$dispatch(coreUi.showDataConfCmdNotify({},!1))}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){b.setShareAppHwnd(0),b.setOldShareAppHwnd(0);var e=$getState().conf.sharePersonName;O.info("recv first frame, notify to proxy other share is start",e),(0,y.NotifyStartSharing)(0,e)}}]),e}();t.default=A}});