webpackJsonp([11],{102:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwConfSdk=void 0;var a=n(123),o=r(a),i=n(4),s=r(i),c=n(1697),u=n(1699),f=n(1717),l=n(1719),d=n(1725),p=n(1728),h=n(1730),g=n(1739);(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e})(g),t.HwConfSdk=function e(){(0,s.default)(this,e),(0,o.default)(this,(0,c.getConfApi)().getApiList()),(0,o.default)(this,(0,u.getBigWinConfApi)().getApiList()),(0,o.default)(this,(0,f.getDataConfApi)().getApiList()),(0,o.default)(this,(0,l.getConfLogicApi)().getApiList()),(0,o.default)(this,(0,d.getPairConfApi)().getApiList()),(0,o.default)(this,(0,p.getNativeWndApi)().getApiList()),(0,o.default)(this,(0,h.getDataConfLogicApi)().getApiList())}},118:function(e,t,n){e.exports=n(0)(0)},119:function(e,t,n){e.exports={default:n(145),__esModule:!0}},120:function(e,t,n){e.exports=n(0)(45)},121:function(e,t,n){e.exports=n(0)(47)},123:function(e,t,n){e.exports=n(0)(562)},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreCommonComponent.Icon,a=r.iconSizeMap,o=r.iconColorMap,i=r.iconHoverMap,s=r.iconTypeMap;t.default=r,t.iconSizeMap=a,t.iconColorMap=o,t.iconHoverMap=i,t.iconTypeMap=s},127:function(e,t,n){e.exports=n(0)(57)},128:function(e,t,n){"use strict";t.__esModule=!0;var r=n(143),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}},129:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},130:function(e,t,n){e.exports=n(0)(238)},131:function(e,t,n){e.exports=n(0)(620)},132:function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return i(this,e,t,n)}function i(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?f(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return s(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}function u(e,t){if(s(t),e=a(e,t<0?0:0|h(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=a(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function l(e,t){var n=t.length<0?0:0|h(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=l(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|h(t.length);return e=a(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?a(e,0):l(e,t);if("Buffer"===t.type&&X(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return $(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return y(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function C(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,a);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,a){function o(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}var i=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}var u;if(a){var f=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,-1===f?0:u-f)){if(-1===f&&(f=u),u-f+1===c)return f*i}else-1!==f&&(u-=u-f),f=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var l=!0,d=0;d<c;d++)if(o(e,u+d)!==o(t,d)){l=!1;break}if(l)return u}return-1}function S(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}function I(e,t,n,r){return K($(t,e.length-n),e,n,r)}function E(e,t,n,r){return K(j(t),e,n,r)}function N(e,t,n,r){return E(e,t,n,r)}function b(e,t,n,r){return K(Y(t),e,n,r)}function T(e,t,n,r){return K(q(t,e.length-n),e,n,r)}function y(e,t,n){return 0===t&&n===e.length?z.fromByteArray(e):z.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o=e[a],i=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s<=n){var c,u,f,l;switch(s){case 1:o<128&&(i=o);break;case 2:c=e[a+1],128==(192&c)&&(l=(31&o)<<6|63&c)>127&&(i=l);break;case 3:c=e[a+1],u=e[a+2],128==(192&c)&&128==(192&u)&&(l=(15&o)<<12|(63&c)<<6|63&u)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:c=e[a+1],u=e[a+2],f=e[a+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(l=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&f)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),a+=s}return x(r)}function x(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=H(e[o]);return a}function R(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,a,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-n,2);a<o;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-n,4);a<o;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function U(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,a){return a||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,a){return a||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function G(e){if(e=V(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){t=t||1/0;for(var n,r=e.length,a=null,o=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}function Y(e){return z.toByteArray(G(e))}function K(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function J(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var z=n(224),Q=n(225),X=n(210);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return i(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return c(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!X(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,a){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var i=a-r,s=n-t,c=Math.min(i,s),u=this.slice(r,a),f=e.slice(t,n),l=0;l<c;++l)if(u[l]!==f[l]){i=u[l],s=f[l];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return N(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var a=t-e;r=new o(a,void 0);for(var i=0;i<a;++i)r[i]=this[i+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},o.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,a=1,o=this[e+--r];r>0&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=o.isBuffer(e)?e:$(new o(e,r).toString()),c=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(139))},133:function(e,t,n){e.exports={default:n(169),__esModule:!0}},134:function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}var o=n(132),i=o.Buffer;i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=a),r(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},135:function(e,t,n){e.exports={default:n(151),__esModule:!0}},136:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.resetMyInfo=t.getMyInfo=t.UErrorCode=t.LoginInfo=t.LoginError=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.ErrorType=t.EAErrorCode=t.registerLoginEvent=void 0;var a=n(165),o=r(a),i=n(272),s=r(i);t.registerLoginEvent=o.UErrorCode,t.EAErrorCode=o.EAErrorCode,t.ErrorType=o.ErrorType,t.getLoginModel=o.getLoginModel,t.getSyncLoginModel=o.getSyncLoginModel,t.resetLoginModel=o.resetLoginModel,t.LoginError=o.LoginError,t.LoginInfo=o.LoginInfo,t.UErrorCode=o.UErrorCode,t.getMyInfo=s.getMyInfo,t.resetMyInfo=s.resetMyInfo},137:function(e,t,n){var r=n(10),a=n(8),o=n(138);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},138:function(e,t,n){e.exports=n(0)(59)},139:function(e,t,n){e.exports=n(0)(86)},141:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(172),o=r(a),i=n(135),s=r(i);t.default=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=(0,s.default)(e);!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},142:function(e,t,n){e.exports=n(0)(84)},143:function(e,t,n){e.exports={default:n(158),__esModule:!0}},145:function(e,t,n){n(146),e.exports=n(8).Object.getPrototypeOf},146:function(e,t,n){var r=n(130),a=n(147);n(137)("getPrototypeOf",function(){return function(e){return a(r(e))}})},147:function(e,t,n){e.exports=n(0)(585)},148:function(e,t,n){e.exports=n(0)(196)},149:function(e,t,n){var r=n(15);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},150:function(e,t,n){e.exports={default:n(213),__esModule:!0}},151:function(e,t,n){n(23),n(22),e.exports=n(152)},152:function(e,t,n){var r=n(9),a=n(26);e.exports=n(8).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},153:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.recordIsImGroupCreateConf=t.formatConfId=t.addToAllConfInfo=t.initConfctrl=t.createCancelConfEvent=t.handleCancelConf=t.cancelConf=t.createConfByTeamList=t.cloudRecordRequestFuc=t.requestChairmanFuc=t.releaseChairmanFuc=t.compressRemoveAttendee=t.compressreleasePreservate=t.unlockConfFuc=t.lockConfFuc=t.enterConfInConfList=t.oneKeyEnterConf=t.showConfInfo=t.RecordIsIntoInterval=t.recordFlagIsFirstTimeRun=t.recordConferenceOldId=t.recordConferencePasswordDetail=t.changeFlagClickJoinConfBtn=t.recoredOldPwd=t.changeStatusOfConference=t.createMaxHubMeeting=t.handleMobileBfcpStatus=t.AsErrorDeal=t.handleShowErrorMsgBox=t.setRecordStatusForNative=t.handleRecordVideoStatusChairmanIndResult=t.handleConfStateDirectBroadCastIndresult=t.handleVideoRecordResult=t.handleSetRecordVideoResult=t.actionCloudRecordRequest=t.clearRecordInfoHandle=t.getRecordStatus=t.isHasRecordPermission=t.setRecordScheduserName=t.actionActiveDirectionForMobile=t.actionActiveDirection=t.dealChangeDirectionResult=t.dealAudientResult=t.grabBfcpConfirm=t.initMobileFirstAcceptShare=t.resetFirstAcceptShareFlag=t.initMobileFirstInfoConf=t.resetFirstInfoConferenceFlag=t.dealInviteAttendeeResult=t.handlePlatformMessageBox=t.handleVideoWatchResMessageBox=t.handleVideoWatchRes=t.handleSvcConfWatchRet=t.clearPhoneContacts=t.showOrDisabledBtn=t.showJoinMeetingBtn=t.returnToConfWelPage=t.toggleShouldAutoEnterTempConf=t.toggleClearEnterTempConfInfo=t.toggleopenCamerState=t.toggleChangeCamerState=t.toggleChangeMicState=t.toggleSetCreateUseFixedConfIDState=t.toggleSetIsBookSendSMS=t.toggleSetIsBookSendEmail=t.toggleSetUseFixedConfIDState=t.toggleChangeConfAcsPas=t.toggleChangeConfAcsId=t.toggleChangeConfAcsNum=t.changeConfPage=t.gettempuserinfo=t.handleJoinTempConfNoNameWithConfId=t.enterTempConf=t.enterConfById=t.enterConfByIdOnly=t.enterConfByIdOnlyWithConfPas=t.oneKeyEnterPairConf=t.enterConfInConfInfo=t.changeBookConfSubject=t.changeHistoryAttendeeInfo=t.changeHistoryConfInfo=t.changeConfAttendeeInfo=t.changeCurrentConfInfo=t.oneJoinVMR=t.getAsInfoToDbAtomic=t.getVmrInfoToDbAtomic=t.getVRMList=t.saveTempMediaxInfo=t.handleConfInfo=t.handleConfMTnumber=t.handleConfInfostate=t.searchContactByInfo=t.getInitHistoryConfList=t.delConfRecord=t.getConfTimedec=t.handleConfList=t.saveMettingTypeValue=void 0,t.judgeCreateNewConf=t.initCreateMettingContent=t.saveConThemeName=t.createConfFromHistory=t.createTempTypeMeeting=t.createAMeetingFromHis=t.createAMeeting=t.deleteClickParticipants=t.filterDuplicateData=t.createTempMeetingOfAddMember=t.createTempMeeting=t.handleIsShowJoinButton=t.handleIsConfPwdInputShow=t.handleNotShowChairPas=t.handleNotShowGeneralPas=t.handleVMRConfResult=t.subScribeConfListAndInfoResAtomic=t.subScribeConfListAndInfoRes=t.getConfList=t.changeconfListInfo=t.actionExportConfmember=t.transferChairman=t.getConfInfo=t.p2pTransToConf=t.upgradeAudioConf2Data=t.upgrade2DataConfOrStartShare=t.handleShowEndConf=t.toggleConfOtherNumber=t.searchMemberList=t.unregisterConfEvent=t.handleSpeakerReport=t.endCallAndLogout=t.setUportalTokenRefreshTimer=t.UportalTokenErrAndLogout=t.UportalTokenErr=t.handleGetDataPostponeConf=t.handleSmcEnterDataConf=t.handleUportalTokenErr=t.handleNonChairCtrlcaps=t.checkUsersMobile=t.setMsg=t.handlepPrticipantsList=t.AutocallMobile=t.registerConfEventAtomic=t.handleBroadcaseResult=t.updateconfMsglList=t.updateconfRecallList=t.updateMemberStateInfo=t.toggleShowConfInfoCard=t.handleShowMemberList=t.cancleConfMemberlistMessage=t.toggleShowMemberList=t.diableSpeakerIcon=t.confEnded=t.actionWatchAttendee=t.actionBroadcastAttendee=t.actionLeaveConf=t.handleClosePairConfPage=t.setSmcFirstRequest=t.doClearSipForSipLoginOnly=t.acceptConf=t.rejectConf=t.confIncoming=t.actionRemoveAttendee=t.actionCallAttendee=t.actionHangupAttendee=t.actionAddAttendee=t.actionCallOtherNum=t.popupRequestChairmanInputBox=t.confEnterPwdToChairmanResultResult=t.handleReqChairmanResultRest=t.confReqChairmanResult=t.actionRequestChairman=t.confReleaseChairmanResult=t.actionReleaseChairman=t.actionReInviteAttendee=t.confBroadcastLocal=t.actionMuteAllAttendee=t.handup=t.actionMuteConf=t.lockState=t.lockResult=t.handupResult=t.attendeeMuteResult=t.actionMuteAttendee=t.handlePairJoinConf=t.confInfoNotify=t.actionEndConf=t.handleUportalTokenError=t.actionCreateConf=t.actionShareClickByDetail=t.actionShareClickByRecent=t.actionCreateConfByDetail=t.actionCreateConfByRecent=t.handleBookConfResult=t.formatDateString=t.bookMeeting=t.changeGroupId=t.changeConfSearchTxt=t.toggleMemberListSearch=void 0;var o=n(135),i=a(o),s=n(133),c=a(s),u=n(69),f=a(u),l=n(128),d=a(l),p=n(123),h=a(p),g=n(1),v=a(g),m=n(3),_=a(m),C=n(127),w=a(C),S=n(2),I=a(S),E=(t.initConfctrl=function(){var e=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,Y.info("[ confctrlInit ] start 1"),!t.useMetting){e.next=7;break}return e.next=7,coreConf.confctrlInit();case 7:Y.info("[ confctrlInit ] end 2"),window.confCtrlLoaded=!0;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(226)),N=n(207),b=n(226),T=n(286),y=n(248),O=n(166),x=n(208),A=r(x),L=n(649),k=n(287),R=n(359),M=n(194),D=n(652),P=n(653),F=n(416),U=n(357),B=r(U),W=n(710),G=r(W),V=n(724),H=r(V),$=n(725),j=r($),q=n(313),Y=coreLogger.getLogger("conf")("logic"),K=null,J=new RegExp("^1[3|4|5|7|8|9][0-9]{9}$"),z="",Q=(t.toggleMemberListSearch=function(e){$dispatch(coreUi.changeMemberListSearch(e))},t.changeConfSearchTxt=function(e){$dispatch(coreUi.changeSearchText(e))},t.changeGroupId=function(e){$dispatch(coreUi.changeGroupId(e)),O.SvcAtdManager.setIsSupportChatNative()}),X=(t.bookMeeting=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("make an appointment for a meeting"),n=$getState(),r=void 0,a=t.start_time,r=St(n.selectBox.selectBox_saveSelectedList),o=n.common.groupName,i=n.myInfo,!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=18;break}if(!i.account){e.next=17;break}return e.next=11,window.getContactFromNet(i.account);case 11:s=e.sent,s.name&&(i.name=s.name),s.mobileCodeAll&&(c=s.mobileCodeAll.replaceAll("+86-",""),i.mobile=c),$dispatch(coreUi.updateMyInfo((0,w.default)({},i))),e.next=18;break;case 17:Y.info("bookMeeting cannot have selfInfo account");case 18:if(r.push(i),u=In(r),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=41;break}if(window.confCtrlLoaded){e.next=41;break}return Y.info("confCtrl is not loaded, please wait"),$dispatch(coreUi.changeEnterConfState(!0)),f=new _.default(function(e,t){var n=0,r=setInterval(function(){window.confCtrlLoaded?(e(0),clearInterval(r)):++n>8&&(t(-1),clearInterval(r))},500)}),l=-1,e.prev=26,e.next=29,f;case 29:l=e.sent,e.next=37;break;case 32:e.prev=32,e.t0=e.catch(26),Y.error("confCtrl init timeout"),window.clickCreateWorking=!1,window.ToastNew(language.CONFERENCE_BOOK_FAILED,2);case 37:if($dispatch(coreUi.changeEnterConfState(!1)),0===l){e.next=41;break}return Y.info("confCtrl init timeout"),e.abrupt("return");case 41:return X(i,u,{group_id:""},t.mediaType,t.confSubject,a,t.conf_len,t.time_zone,t.recordType,t.vmrConfId),e.next=44,coreUi.hideModal();case 44:case"end":return e.stop()}},e,void 0,[[26,32]])}));return function(t){return e.apply(this,arguments)}}(),t.formatDateString=function(e){var t=new Date(e);return t.getHours()+language.HOUR+t.getMinutes()+language.MINUTE},function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a){for(var o=arguments.length,i=Array(o>4?o-4:0),s=4;s<o;s++)i[s-4]=arguments[s];var c,u,f,l,d,p,h,g,m,_,C,w,S,I,E,N,b,T,y;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.saveCalleeInfo({})),c=$getState().conf.isCreateMeetingPassword?0:1,u={bConf:!0,selfInfo:t,memberList:n,groupInfo:r,mediaType:a,noPassword:c,others:i},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=12;break}return e.next=6,coreUi.checkMobileMultiDevice(u);case 6:if(f=e.sent,l="bookMeeting"===window.getRoute()&&window.CLIENTCONFIG.ISMOBILE,!0!==f||l){e.next=12;break}return Y.info("multi device logined, return"),window.clickCreateWorking=!1,e.abrupt("return");case 12:if(!(n.length>500)){e.next=18;break}return Y.error("member number: "+n.length+"exceeds 500, can not book conf"),d=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("500"),window.clickCreateWorking=!1,alert(d),e.abrupt("return");case 18:if(!(n.length>=1)&&isNullOrEmpty(t.account)){e.next=63;break}if(Y.info("book conf, member list count is "+n.length),p="",h="",g=0,m=0,_=0,C="",isNullOrEmpty(i)){e.next=50;break}if(p=i[0],h=i[1],g=i[2],m=i[3],_=i[4],C=i[5],w=constant.TIME_ZONE_FLAG[parseInt(m,10)-1],S=constant.TIME_ZONE_FLAG[getDefaultTimeZone(constant.TIME_ZONE_FLAG)-1],I=ee(getNowFormatDate(new Date),S),E=new Date(I.replace(/-/g,"/")).getTime()+36e5*w,N=new Date(h.replace(/-/g,"/")).getTime(),!(E-N>0)){e.next=42;break}return window.CLIENTCONFIG.ISMOBILE?window.alert(language.CONFERENCE_START_TIME_ERROR):alert(language.CONFERENCE_START_TIME_ERROR),window.clickCreateWorking=!1,e.abrupt("return");case 42:if(0!==g){e.next=47;break}return window.clickCreateWorking=!1,alert(language.CONFERENCE_DURATION_ERROR),window.clickCreateWorking=!1,e.abrupt("return");case 47:h=ee(h,w),e.next=52;break;case 50:window.clickCreateWorking=!1,Y.error("start time is null, can not book conf");case 52:return b=coreCommon.isVideoConf(a),T=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,y={memberList:n,confSubject:p,groupUri:r?r.group_id:"",isMultiStream:b?T:0,mediaType:a,userType:2,compereNumber:t.bind_no,selfNumber:t.bind_no,start_time:h,conf_len:g,time_zone:m,noPassword:c,recordType:_,vmrConfId:C},Y.info("actionBookConf isMultiStreamValue: "+T),window.CLIENTCONFIG.ENABLE_IT_MEETING||G.showLoadingPage(),e.next=59,kt.wait();case 59:return e.next=61,coreConf.bookConf(y);case 61:e.next=65;break;case 63:window.clickCreateWorking=!1,Y.error("member list is null");case 65:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}()),Z=t.handleBookConfResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("UportalBookConfResult code=",t.param.ret),n=j.getCreateConfFailTitle(t.param.ret),window.CLIENTCONFIG.ENABLE_IT_MEETING||G.closeLoadingPage(),0!==t.param.ret){e.next=9;break}return e.next=6,re();case 6:return e.abrupt("return");case 9:constant.MEDIA_X_ERROR_CODE.start_time_error===t.param.ret?window.alert(language.CONFERENCE_START_TIME_ERROR):11085===t.param.ret||11136===t.param.ret||11071005===t.param.ret?window.alert(language.CONF_TIME_CONFLICT):7===t.param.ret?(Y.info("book conf failed,error code=",t.param.ret),ce(t.param.ret)):(Y.info("book conf failed,error code=",t.param.ret),window.CLIENTCONFIG.ENABLE_IT_MEETING?window.ToastNew(language.CONFERENCE_BOOK_FAILED,2):coreCommon.isNeedQuickFeedback(n)?window.confirm(n+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.BOOK_CONF_ERROR,language.CONFERENCE_BOOK_FAILED)}):11071060===t.param.ret?window.Toast(n,2):alert(n,2));case 10:window.clickCreateWorking=!1,r=0===t.param.ret,a=[],r?(a.push(1),o=t.param.conf_list_info.conf_id,isNullOrEmpty(o)?Y.warn("bookconfid is empty!"):a.push(o)):a=[0,t.param.ret],coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BOOK,extraTrackKey:null,resultParams:a});case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ee=function(e,t){var n=e.substring(0,4),r=e.substring(5,7),a=e.substring(8,10),o=e.substring(11,13),i=e.substring(14,16),s=new Date(n,r-1,a,o,i),c=s.getTime()-60*t*60*1e3;return s.setTime(c),Y.info(te(s)),te(s)},te=function(e){var t=new Date(e);return t.getFullYear()+"-"+ne(t.getMonth()+1)+"-"+ne(t.getDate())+" "+ne(t.getHours())+":"+ne(t.getMinutes())},ne=function(e){return e>9?e:"0"+e},re=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("dealBookConfSuc"),At(),window.CLIENTCONFIG.ISMOBILE?window.goRoute("main/conference"):coreConf.changeConfPage("MyConf"),window.ToastNew(language.CONFERENCE_BOOK_SUCCESS,2),coreConf.resetDefaultValue(),$dispatch(coreUi.changeBuriedMeetingName(""));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),ae=(t.actionCreateConfByRecent=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.myInfo,a=n.recent.currentRecentInfo,!coreIm.isGroup(a.chat_type)){e.next=17;break}return e.next=4,coreGroup.getMemberListByGroupId({groupId:a.owner,owner:a.group.owner});case 4:return o=e.sent,e.next=7,coreAccount.getLoginModel();case 7:if(i=e.sent,i.isSupportAS){e.next=13;break}return s=o.getKeyArr("account"),e.next=12,coreContact.getContactListByAccountList(s);case 12:o=e.sent;case 13:c=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,oe(r,o,a.group,t,c),e.next=18;break;case 17:Y.info("actionCreateConfByRecent 点对点会话不进行创建会议");case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionCreateConfByDetail=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("actionCreateConfByDetail, bFromSlider=",n),r=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,n?(a=$getState(),o=a.myInfo,i=a.contactGroups,s=i.sliderGroupMemerInfo,c=i.sliderGroupInfo,oe(o,s,c,t,r)):(u=$getState(),f=u.myInfo,l=u.contactGroups,d=l.groupMemberInfo,p=l.groupInfoNew,oe(f,d,p,t,r));case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionShareClickByRecent=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("actionShareClick"),t=$getState(),n=t.myInfo,r=t.recent,a=r.currentGroupMemberList,o=r.currentRecentInfo,coreIm.isGroup(o.chat_type)){e.next=7;break}if(Y.info("点对点会话，先判断聊天者是不是有号码存在"),""!==o.contact.bind_no||""!==o.contact.short_phone){e.next=7;break}return alert(language.THE_CONTACT_HAS_NO_NUMBER),e.abrupt("return");case 7:if(i=a||[],s=void 0,!coreIm.isGroup(o.chat_type)){e.next=14;break}Y.info("actionShareClickByRecent 群组会话"),s=o.group,e.next=19;break;case 14:return Y.info("actionShareClickByRecent 点对点会话，先创建群组"),i.push(o.contact),e.next=18,coreGroup.createDiscussionGroup({list:i});case 18:s=e.sent;case 19:c=(0,h.default)({},n,{isAutoStartShare:!0}),u=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,oe(c,i,s,constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,u);case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.actionShareClickByDetail=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,p,g,m;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("actionShareClickByDetail "+t),n=$getState(),r=n.myInfo,a=n.contactGroups,o=a.sliderContactInfo,i=a.sliderGroupInfo,s=a.sliderGroupMemerInfo,c=a.contactInfo,u=a.groupMemberInfo,f=a.groupInfoNew,l=void 0,p=void 0,!t){e.next=15;break}if(l=s||[],p=i,0!==l.length){e.next=13;break}if(l=[].concat((0,d.default)(l)),l.push(o),!window.CLIENTCONFIG.USE_IM){e.next=13;break}return e.next=12,coreGroup.createDiscussionGroup({list:l});case 12:p=e.sent;case 13:e.next=23;break;case 15:if(l=u||[],p=f,0!==l.length){e.next=23;break}if(l[0]=c,!window.CLIENTCONFIG.USE_IM){e.next=23;break}return e.next=22,coreGroup.createDiscussionGroup({list:l});case 22:p=e.sent;case 23:g=(0,h.default)({},r,{isAutoStartShare:!0}),m=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,oe(g,l,p,constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,m);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.next=3,coreCall.callMultiTerminalCheck();case 3:if(n=e.sent,window.requestMultiTerminalPromise=null,!n){e.next=7;break}return e.abrupt("return",j.CREATE_CONF_ERR.MULTI_DEVICE_LOGIN);case 7:return e.next=9,coreCall.dealSipLoginCheck();case 9:window.requestSipLoginPromise=null;case 10:if(!window.isOffline||!window.CLIENTCONFIG.USE_IM){e.next=17;break}if(isNullOrEmpty($getState().conf.confTempAcsAccount)&&!$getState().login.sipLoginOnly){e.next=14;break}e.next=17;break;case 14:return Y.error("checkBeforeEnterConf offline, can not create conf"),u&&window.ToastNew(language.CALL_FAILED_OFFLINE),e.abrupt("return",j.CREATE_CONF_ERR.OFFLINE);case 17:return e.next=19,coreAccount.getLoginModel();case 19:if(r=e.sent,a=r.isSipRegSuc()){e.next=29;break}return Y.error("sip register failed, can not create conf"),(!r.isMobile||r.isMobile&&!$getState().login.isMultiDeviceLogined)&&coreAccount.sipResume({message:"checkBeforeEnterConf"}),e.next=26,r.checkSipState();case 26:if(r.isSipRegSuc()){e.next=29;break}return window.CLIENTCONFIG.ENABLE_IT_MEETING||u&&window.confirm(language.THE_NETWORK_IS_ABNORMAL+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.SIP_NOT_REG_ERROR,language.THE_NETWORK_IS_ABNORMAL)}),e.abrupt("return",j.CREATE_CONF_ERR.SIP_FAIL);case 29:if(!coreConf.isInConf()&&!$getState().synergismInfo.inPairConf){e.next=33;break}return Y.error("already exist conference, can not create conf"),u&&alert(language.PREVENT_TWO_CONFERENCE),e.abrupt("return",j.CREATE_CONF_ERR.EXIST_CONF);case 33:if(!(coreCall.getCallCount()>0)){e.next=37;break}return Y.error("already exist call, can not create conf"),u&&alert(language.PREVENT_CONFERENCE_AFTER_CALL),e.abrupt("return",j.CREATE_CONF_ERR.EXIST_CALL);case 37:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=42;break}return e.next=41,window.isSimCardCall();case 41:e.t0=e.sent;case 42:if(!(o=e.t0)){e.next=47;break}return Y.info("now is in sim card call cannot create conf"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.itWeLinkNotifyCallEnded(0,language.PLEASE_HANG_UP_CALL):u&&window.ToastNew(language.PLEASE_HANG_UP_CALL,2),e.abrupt("return",j.CREATE_CONF_ERR.EXIST_SIM_CALL);case 47:if(c){e.next=56;break}return e.next=50,coreCall.callPermissionCheck(t);case 50:if(i=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),Y.info("isHavePerm: "+i),i){e.next=56;break}return Y.info("mobile do not have permission cannnot create conf"),e.abrupt("return",j.CREATE_CONF_ERR.PERMSSION_REJECT);case 56:if(e.t1=!c,!e.t1){e.next=61;break}return e.next=60,coreCall.Call2GNet(t);case 60:e.t1=e.sent;case 61:if(!e.t1){e.next=64;break}return Y.info("The network type is 2G. not support video conf "),e.abrupt("return",j.CREATE_CONF_ERR.NET_2G);case 64:if(s=!0,!t){e.next=70;break}if((!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.webView)&&window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=70;break}return e.next=69,coreCall.createVideoPreCheck();case 69:s=e.sent;case 70:if(s){e.next=73;break}return Y.info("<video>mobile is 3G/4G,user cancel continue video conf"),e.abrupt("return",j.CREATE_CONF_ERR.USER_CANCEL);case 73:return e.abrupt("return",j.CREATE_CONF_ERR.SUCCESS);case 74:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),oe=t.actionCreateConf=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a,o){for(var i=arguments.length,s=Array(i>6?i-6:0),c=6;c<i;c++)s[c-6]=arguments[c];var u,f,l,d,p,h,g,m,_,C,w,S,I,E,N,b,T,y=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=coreCommon.isVideoConf(a),f={bConf:!0,selfInfo:t,memberList:n,groupInfo:r,mediaType:a,noPassword:o,bVideo:u,others:s},!(f.memberList.length>400)){e.next=11;break}return Y.error("member number: "+f.memberList.length+"exceeds 100, can not create conf"),l=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400"),window.clickCreateWorking=!1,y&&alert(l),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),window.clickCreateWorking=!1,e.abrupt("return",j.CREATE_CONF_ERR.OUT_MEMBER_LIMIT);case 11:if(!(n.length<1&&isNullOrEmpty(t.account))){e.next=16;break}return Y.error("member list is null"),window.clickCreateWorking=!1,$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",j.CREATE_CONF_ERR.MEMBER_EMPTY);case 16:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=25;break}return e.next=19,coreUi.checkMobileMultiDevice(f);case 19:if(!(d=e.sent)){e.next=25;break}return window.clickCreateWorking=!1,Y.info("multi device logined actionCreateConf"),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",j.CREATE_CONF_ERR.MULTI_DEVICE_LOGIN);case 25:return e.next=27,ae(u,!1,y);case 27:if(p=e.sent,0===p.code){e.next=34;break}return $dispatch(coreUi.changeEnterConfState(!1)),window.clickCreateWorking=!1,Y.info("create conf, check enter conf fail "),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",p);case 34:return $dispatch(coreUi.saveCalleeInfo({})),Y.info("create conf, member list count is "+n.length),H.createConfToRefreshRecent(r),h="",g=0,m=0,_="",isNullOrEmpty(s)||(h=s[0],g=s[1],m=s[2],_=s[3]),isNullOrEmpty(h)&&(h=t.name+language.CONFERENCE_SUBJECT_INFO),G.showConfOutPage(u,!0,h,""),C=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,w=t.bind_no,S={isCloseCameraDe:!$getState().conf.isOpenCameraDe,isMuteMicDe:!$getState().conf.isOpenMicDe},I={memberList:n,confSubject:h,groupUri:r?r.group_id:"",isMultiStream:u?C:0,mediaType:a,userType:2,compereNumber:w,selfNumber:w,isAutoScreenShare:t.isAutoStartShare,noPassword:o,recordType:m,deviceSet:S,vmrConfId:_},Y.info("IS_MULTI_STREAM= "+C+",isVideoConf = "+u),ie()&&(I.mediaType=I.mediaType|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),E=coreCommon.isHuaweiCloud($getState().login.serverAddress),(E||window.CLIENTCONFIG.ENABLE_IT_MEETING)&&(I.mediaType=I.mediaType|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),Y.info("create conf media type: "+I.mediaType),e.next=55,coreConf.createConf(I);case 55:if(N=e.sent,b=N.errorCode,$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),0!==b){e.next=66;break}return(0,R.resetDefaultValue)(),At(),wn(constant.ONLINE_STATUS.BUSY),e.abrupt("return",j.CREATE_CONF_ERR.SUCCESS);case 66:return window.clickCreateWorking=!1,T=j.getCreateConfFailTitle(b),G.closeConfPage(!1,!1,b,T,y),G.clearAfterConfEnd(!1,!1),7===b&&(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():ce(b)),e.abrupt("return",{code:b,msg:T});case 72:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),ie=function(){return!0},se=function(e){var t=$getState(),n=t.myInfo,r=t.call.userInfo;if(1===e.length&&(e[0].number===n.bind_no||e[0].number===r.bind_no))return Y.info("p2p trans to conf add caller or callee, return"),coreUi.hideModal(),!1;if(coreConf.isInConf()||$getState().synergismInfo.inPairConf)return Y.error("already exist conference, can not create conf"),coreUi.hideModal(),alert(language.PREVENT_TWO_CONFERENCE),!1;if(e.length>399){Y.error("member number: "+e.length+"exceeds 100, can not create conf");var a=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400");return alert(a),!1}var o=$getState().call.callStatus;return o!==constant.CALL_VIDEO_STATUS.CALL_OUT&&o!==constant.CALL_VIDEO_STATUS.VIDEO_OUT||(Y.error("calling out, can not create conf"),!1)},ce=t.handleUportalTokenError=function(e){Y.info("the erro of ute reason",e);var t={param:{result:parseInt(e)}};ht(t)},ue=(t.actionEndConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$getState().synergismInfo.inPairConf){e.next=4;break}return Y.info("BLE: actionEndConf, start end pair meeting"),(0,D.pairStartEndMeeting)(!0),e.abrupt("return");case 4:return t=coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE_START_END"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask(G.closeConfPage,n,null,!0,!0,0,language.END_CONFERENCE),e.next=9,coreConf.endConf();case 9:wn(constant.ONLINE_STATUS.ONLINE),t.addTask(G.clearAfterConfEnd,n,null,!0,!0,0);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState(),t=e.login.tempConfInfo;coreConf.getIsFirstEnterConf()&&3===parseInt(t.user_role)&&cr(),coreConf.setIsFirstEnterConf(!1)}),fe=t.confInfoNotify=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:G.confInfoNotify();case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),le=function(){G.svcSeessionModify()},de=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("handleConfConnected, isCallToConf = "+t),coreCommon.dispatchModuleEvent("pluginConfStateNotify",{state:constant.CLK_PLUGIN_CONFLIFECYCLE.START}),wn(constant.ONLINE_STATUS.BUSY),t?(G.p2pToJoinConf(),H.confTransToConfRefreshRecent()):G.handleJoinConf();case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),pe=(t.handlePairJoinConf=function(e){Y.info("BLE: start handlePairJoinConf, mediaType=",e);var t=$getState().call.callStatus;if("VIDEO_CONNECTED"===t||"CALL_CONNECTED"===t)return void Y.info("BLE: handlePairJoinConf has entered");wt(),window.webView&&window.webView.setKeepScreenOn();var n=coreCommon.isVideoConf(e);Y.info("BLE: handlePairJoinConf, isVideoConf=",n),n?($dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),$dispatch(coreUi.changeMeetingType(!0)),$dispatch(coreUi.changeCallToolBarShowStatus(!1))):($dispatch(coreUi.changeCallStatus("CALL_CONNECTED")),$dispatch(coreUi.changeMeetingType(!1)),$dispatch(coreUi.changeCallToolBarShowStatus(!0))),$dispatch(coreUi.clearEnterConfInfo())},t.actionMuteAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r){var a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={isMute:t,attendee:n},e.next=3,coreConf.muteAttendeeService(a);case 3:o=e.sent,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&r&&(0,k.meetingHWmicrophoneOnOrOff)(t),o&&0===o.result?(Y.info("mute attendee success: "+handlePhoneNumber(n)),(0,T.setMemberToMuteState)(n,t),r&&(t?$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE)):($dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE)),"android"===window.CLIENTCONFIG.PLATFORM&&window.showMicMutTips("")))):Y.error("mute attendee failed: "+handlePhoneNumber(n));case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),he=t.attendeeMuteResult=function(e){if(0!==e.param.ret){var t=e.param.to_mute;if(void 0===t){var n=$getState(),r=n.conf.isConfMicMute;r===constant.MUTE_STATE.MUTE_STATE_TOMUTE?t=1:r===constant.MUTE_STATE.MUTE_STATE_TOUNMUTE&&(t=0)}(0,T.revertMemberToMuteState)(t),t?(Y.info("mute failed"),$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_UNMUTE))):(Y.info("unmute failed"),$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_MUTE)),10002===e.param.ret&&(window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.CALL_UNMUTE_FAIL_NORIGHT,2):($dispatch(coreUi.changeNotifyInfo(coreCall.setNotifyInfo(language.CALL_UNMUTE_FAIL_NORIGHT))),coreCall.showConfirmNotify(!0,3e3))))}},ge=t.handupResult=function(e){var t=$getState().conf.isHandup;1===e.param.ret?(Y.info("handup success"),_e(1),window.CLIENTCONFIG.ISWIN?O.SvcAtdManager.alertBox("HAND_UP_SUCCESSFULLY",1):window.ToastNew(language.HAND_UP_SUCCESSFULLY,2),$dispatch(coreUi.changeAttendeeIsHandup(!t))):2===e.param.ret?(Y.info("unhand up success"),Ce(1),window.CLIENTCONFIG.ISWIN?O.SvcAtdManager.alertBox("HAND_DOWN_SUCCESSFULLY",1):window.ToastNew(language.HAND_DOWN_SUCCESSFULLY,2),$dispatch(coreUi.changeAttendeeIsHandup(!t))):t?(Y.info("unhandup failed!!!"),Ce(0),window.CLIENTCONFIG.ISWIN?O.SvcAtdManager.alertBox("HAND_DOWN_FAILURE",1):window.ToastNew(language.HAND_DOWN_FAILURE,2)):(Y.info("handup failed!!!"),_e(0),window.CLIENTCONFIG.ISWIN?O.SvcAtdManager.alertBox("HAND_UP_FAILURE",1):window.ToastNew(language.HAND_UP_FAILURE,2))},ve=t.lockResult=function(e){if($getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING)return void Y.info("no need to parse lockResult: "+n);var t=e.param.lock_info.OperateType?1:0,n=null;t?e.param.ret||e.param.lock_info.Result?(n=language.LOCK_CONF_FAILURE,we(0)):(n=language.LOCK_CONF_SUCCESSFULLY,we(1),$dispatch(coreUi.changeConfIsLock(t))):e.param.ret||e.param.lock_info.Result?(n=language.UNLOCK_CONF_FAILURE,Se(0)):(n=language.UNLOCK_CONF_SUCCESSFULLY,Se(1),$dispatch(coreUi.changeConfIsLock(t))),Y.info("lockResult: "+n),window.CLIENTCONFIG.ISMOBILE?window.JSToNativeToast(2e3,n):window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf?O.SvcAtdManager.alertBox(n,3):setTimeout(function(){window.Toast(n,3,!1,"pcToast","")},1e3)},me=t.lockState=function(e){if($getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING)return void Y.info("no need to parse lockState: "+n);var t=e.param.is_lock,n=t?language.THE_MEETING_HAS_BEEN_LOCKED_DOWN:language.THE_MEETING_IS_NOT_LOCKED;t!==$getState().conf.isLock&&(Y.info("lockState: "+n),Ie(t),$dispatch(coreUi.changeConfIsLock(t)),window.CLIENTCONFIG.ISMOBILE?window.JSToNativeToast(2e3,n):window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf?O.SvcAtdManager.alertBox(n,3):setTimeout(function(){window.Toast(n,3,!1,"pcToast","")},1e3))},_e=function(e){var t=$getState().conf.videoFrameHwnd;Y.info("putUpToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{put_up_hand_result:n});(0,E.notifyPutHandup)(r)},Ce=function(e){var t=$getState().conf.videoFrameHwnd;Y.info("putDownToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{put_down_hand_result:n});(0,E.notifyPutHandup)(r)},we=function(e){var t=$getState().conf.videoFrameHwnd;Y.info("lockResultToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{lock_result:n});(0,E.notifyLockConfResult)(r)},Se=function(e){var t=$getState().conf.videoFrameHwnd;Y.info("unlockResultToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{unlock_result:n});(0,E.notifyLockConfResult)(r)},Ie=function(e){var t=$getState().conf.videoFrameHwnd;Y.info("lockStateToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{lock_state:n});(0,E.notifyLockConfState)(r)},Ee=t.actionMuteConf=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.CLIENTCONFIG.ISMOBILE&&(1===t?$dispatch(coreUi.changeConfAllMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE)):$dispatch(coreUi.changeConfAllMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE))),e.next=3,coreConf.muteConf(t,n);case 3:if(r=e.sent,a=r.errorCode,o=r.to_mute,0!==a){e.next=10;break}$dispatch(coreUi.changeConfAllMute(o)),e.next=17;break;case 10:if(Y.error("mute conf failed ",o),i=o?0:1,$dispatch(coreUi.changeConfAllMute(i)),10!==a){e.next=16;break}return alert(language.VIDEO_MUTE_CONF_FAIL_WHEN_CONFPAGE_OPEN),e.abrupt("return");case 16:o?window.ToastNew(language.CONFERENCE_MUTE_ALL_FAILED,2):window.ToastNew(language.CONFERENCE_UNMUTE_ALL_FAILED,2);case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),Ne=(t.handup=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={isHandup:t,attendee:n},e.next=3,coreConf.handupService(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionMuteAllAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=$getState(),a=r.conf&&r.conf.isConfAllMute,o=r.conf&&r.conf.memberListInfo,!isNullOrEmpty(o)){e.next=8;break}return Y.info("actionMuteAllAttendee memberList empty"),Ee(t,n),e.abrupt("return");case 8:if(t!==constant.MUTE_STATE.MUTE_STATE_MUTE){e.next=16;break}if(Y.info("userClick  actionMuteAllAttendee mute"),!window.isSupportiDo){e.next=13;break}return Ee(constant.MUTE_STATE.MUTE_STATE_MUTE,n),e.abrupt("return");case 13:a?o.forEach(function(e){1!==e.is_self&&e.is_mute===constant.MUTE_STATE.MUTE_STATE_UNMUTE&&e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT&&pe(!0,e.number,!1)}):Ee(constant.MUTE_STATE.MUTE_STATE_MUTE,n),e.next=28;break;case 16:if(t!==constant.MUTE_STATE.MUTE_STATE_UNMUTE){e.next=28;break}if(Y.info("userClick  actionMuteAllAttendee unmute"),!window.isSupportiDo){e.next=21;break}return Ee(constant.MUTE_STATE.MUTE_STATE_UNMUTE,n),e.abrupt("return");case 21:if(!a){e.next=26;break}return e.next=24,Ee(constant.MUTE_STATE.MUTE_STATE_UNMUTE,n);case 24:e.next=28;break;case 26:return e.next=28,o.forEach(function(e){e.is_mute===constant.MUTE_STATE.MUTE_STATE_MUTE&&e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT&&pe(!1,e.number,e.is_self)});case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),Y.error("actionMuteAllAttendee error try catch",{error:e.t0.toJSON()});case 33:case"end":return e.stop()}},e,void 0,[[0,30]])}));return function(t,n){return e.apply(this,arguments)}}(),t.confBroadcastLocal=function(e){var t=$getState().conf.isSvcConf;if($getState().conf.isVideoConf&&!t)return window.CLIENTCONFIG.ISWIN?be(!!e.param.is_broadcast):($dispatch(coreUi.changeIsBroadcastLocal(!!e.param.is_broadcast)),void(window.CLIENTCONFIG.ISMOBILE&&window.JSToNativeToast(2e3,e.param.is_broadcast?language.LOCAL_BROADCASTING:language.CANCEL_BROADCASE)))}),be=function(e){if(e){Y.info("confBroadcastLocal: show");var t=$getState().conf.videoFrameHwnd,n=A.getAvcFrameHandles();if(window.CLIENTCONFIG.ISWIN){var r={frameHwnd:0!==t?t:n,dialog_type:1,content_id:"LOCAL_BROADCASTING"};(0,b.showMessageBox)(r)}}},Te=(t.actionReInviteAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],n.push(t),e.next=4,coreConf.reInviteAttendee(t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionReleaseChairman=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return Y.error("chairmanNumber is null or undefined, can not releasechairman"),e.abrupt("return");case 3:return e.next=5,coreConf.releaseChairman(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),ye=t.confReleaseChairmanResult=function(e){if(0===e.param.ret){if(window.CLIENTCONFIG.ISMAC){var t=$getState().conf,n=t.isBigConf,r=t.svcShowPage;return n&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,null,!0),void(n&&0!==r&&y.SvcAttendanceManager.dealSvcPageSwitch(0))}$getState().conf.isBigConf?window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS_BIGCONF,2,!1,"big-conf-toast"):window.ToastNew(language.THE_CHAIRMAN_HAS_BEEN_RELEASED,2),window.isSupportiDo||Ge()}else{if(window.CLIENTCONFIG.ISMAC)return;Y.error("failed to release the chairman ",e.param.ret),window.ToastNew(language.FAILED_RELEASE_THE_CHAIR,2)}},Oe=t.actionRequestChairman=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(n)){e.next=3;break}return Y.error("reqNumber is null or undefined, can not requestchairman"),e.abrupt("return");case 3:return r={chairmanPwd:t,reqNumber:n},e.next=6,coreConf.requestChairman(r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),xe=t.confReqChairmanResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("req chairman Result",t),window.isSupportiDo){e.next=4;break}return Ae(t),e.abrupt("return");case 4:if(n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_EXITS,a=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR,o=$getState().conf.showRepChairmanError,i=$getState().conf.showqusetchairman,0!==t.param.ret){e.next=16;break}i&&$dispatch(coreUi.showqusetchairman()),o&&(Y.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2),window.CLIENTCONFIG.ISMOBILE&&coreUi.setShowResetHideLogic(null),e.next=24;break;case 16:if(Y.error("failed to request the chairman ",t.param.ret),!i){e.next=20;break}return o||(Y.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),e.abrupt("return");case 20:return e.next=22,Re();case 22:s=e.sent,(t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_EXITS||r)&&s?window.CLIENTCONFIG.ISMAC?window.confirm(language.CURRENT_CHAIRMAN_ALREADY):window.CLIENTCONFIG.ISWIN?O.SvcAtdManager.alertBox("NATIVE_CURRENT_CHAIRMAN_ALREADY",1):window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2):t.param.ret!==constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR&&!a||s?window.CLIENTCONFIG.ISMAC?window.confirm(language.APPLICATION_FAILED):window.CLIENTCONFIG.ISWIN?O.SvcAtdManager.alertBox("NATIVE_FAILED_APPLY_THE_CHAIR",1):window.ToastNew(language.APPLICATION_FAILED,2):ke();case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ae=t.handleReqChairmanResultRest=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("enter handleReqChairmanResultRest "),n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.NEED_PASSWORD,a=$getState().conf.showRepChairmanError,o=$getState().conf.showqusetchairman,0!==t.param.ret){e.next=12;break}o&&$dispatch(coreUi.showqusetchairman()),a&&(Y.info("showRepChairmanErrorbool",a),$dispatch(coreUi.showRepChairmanError())),window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2),window.CLIENTCONFIG.ISMOBILE&&coreUi.setShowResetHideLogic(null),e.next=24;break;case 12:if(!r||!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=16;break}ur(),e.next=24;break;case 16:if(Y.error("failed to request the chairman ",t.param.ret),!o){e.next=20;break}return a||(Y.info("showRepChairmanErrorbool",a),$dispatch(coreUi.showRepChairmanError())),e.abrupt("return");case 20:return e.next=22,Re();case 22:i=e.sent,(10002===t.param.ret||r)&&i?window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2):10002!==t.param.ret&&!r||i?window.ToastNew(language.APPLICATION_FAILED,2):window.CLIENTCONFIG.ISMOBILE?window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD).then(function(e){if("callMain"===window.getRoute()){var t=$getState().common.showResetfuc;t&&t()}e.ret&&De()}):window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD,!0).then(Me);case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Le=t.confEnterPwdToChairmanResultResult=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.error("smc failed to request the chairman first ",t.param),ur();case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ke=t.popupRequestChairmanInputBox=function(){window.CLIENTCONFIG.ISMOBILE?window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD).then(function(e){if(e.ret)De();else{var t=$getState().common.showResetfuc;t&&t()}}):window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD,!0).then(Me)},Re=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$getState().call.callStatus,n=$getState().conf,r=n.confHandle,a=n.memberListInfo,o=!1,isNullOrEmpty(r)||"VIDEO_CONNECTED"!==t&&"CALL_CONNECTED"!==t||isNullOrEmpty(a)||(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),Y.error("isConfHasCharMain:",e.t0);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.ret)){e.next=5;break}return e.next=5,cr();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Y.error("againRequestPreservate:",e.t0);case 10:case"end":return e.stop()}},e,void 0,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cr();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Y.error("againCompressRequest:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t){return e.apply(this,arguments)}}();t.actionCallOtherNum=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.addAttendee(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionAddAttendee=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=void 0,n=window.CLIENTCONFIG.ISMOBILE?a:t.selectBox.selectBox_tempSelectedList,r=St(n),e.next=6,coreConf.addAttendee(r);case 6:coreUi.hideModal();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.addAttendeeFromWelinkIT=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t,r=""!==$getState().conf.confHandle,a=$getState(),o=a.myInfo,i=[],s=[],c="ConCreateMeeting"===window.getRoute()||"ConMembers"===window.getRoute()||"bookMeeting"===window.getRoute(),Y.info("addAttendeeFromWelinkIT isAddContact : "+c),u=0;u<n.length;u++)f=n[u],f.contactsId||f.contactId||(f.contactId=f.calleeNumber),l=f.contactId,d="",f.mobilePhones&&(d=f.mobilePhones.replace(/-/g,"").replace(/\s*/g,"")),f.calleeNumber&&(f.calleeNumber=f.calleeNumber.replace(/-/g,"").replace(/\s*/g,"")),p={account:l,name:f.name,mobile:d,number:f.calleeNumber,bind_no:f.calleeNumber,email:f.email,home_phone:"",office_phone:"",short_phone:"",other_phone:"",other_phone2:"",voip:"",ip_phone:"",q_pin_yin:f.name},o.account===l&&(o.bind_no=f.calleeNumber),i.push(p),c&&(Y.info("addAttendeeFromWelinkIT add single contact"),h={account:l,avatarContent:f.name,avatarImg:"",avatarPosition:"",isExpanded:!0,isSelected:!0,itemName:f.calleeNumber===d?"mobile":"bind_no",itemType:"contact",name:f.name,email:f.email,number:f.calleeNumber,pushCount:1,qPinyin:"",status:1,numberInfo:{bind_no:{number:f.calleeNumber},mobile:{number:d},home_phone:{number:""},office_phone:{number:""},short_phone:{number:""},other_phone:{number:""},other_phone2:{number:""},voip:{number:f.mobileVoips},ip_phone:{number:""}}},s.push(h));if(!c){e.next=15;break}Y.info("addAttendeeFromWelinkIT pure add person"),$dispatch(coreUi.setContactSelectedList(s)),$dispatch(coreUi.changeTempSelectedListData(s)),Dt(),e.next=23;break;case 15:if(!r){e.next=22;break}return Y.info("addAttendeeFromWelinkIT is in conf"),e.next=19,coreConf.addAttendee(i);case 19:coreUi.hideModal(),e.next=23;break;case 22:"CALL_CONNECTED"===$getState().call.callStatus||"VIDEO_CONNECTED"===$getState().call.callStatus?(Tt(constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,!0,i),Y.info("addAttendeeFromWelinkIT p2pTransToConf")):(Y.info("addAttendeeFromWelinkIT action create conf"),g=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,oe(o,i,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,g));case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var Pe=t.actionHangupAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.hangupAttendeeService(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Fe=(t.actionCallAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.callAttendee(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionRemoveAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.removeAttendeeService(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Ue=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(coreCall.getCallCount()>0)){e.next=3;break}return Y.warn("already exist call, reject conf"),e.abrupt("return",!1);case 3:if(!B.isInReCall()){e.next=6;break}return Y.warn("isInReCall, reject conf"),e.abrupt("return",!1);case 6:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=11;break}return e.next=10,window.isSimCardCall();case 10:e.t0=e.sent;case 11:if(!(n=e.t0)){e.next=15;break}return Y.warn("isInSimCardCall, reject conf"),e.abrupt("return",!1);case 15:if(!window.CLIENTCONFIG.ISBIGWIN&&!window.isHubEnv){e.next=18;break}return Y.warn("ISBIGWIN or isHubEnv, reject conf"),e.abrupt("return",!1);case 18:return Y.info("checkCanIncomingConf yes"),e.abrupt("return",!0);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Be=t.confIncoming=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.isVideo);case 2:if(n=e.sent){e.next=6;break}return We(t.confHandle),e.abrupt("return");case 6:return Y.info("confIncoming, confHandle = "+t.confHandle),e.next=9,G.confIncoming(t);case 9:if(coreCommon.dispatchModuleEvent("confIncomingShown",t),H.confInComingRefreshRecent(),wn(constant.ONLINE_STATUS.BUSY),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=23;break}if(!t.isVideo){e.next=23;break}return e.next=16,coreCall.createVideoPreCheck();case 16:if(r=e.sent){e.next=23;break}if(Y.info("userClick <video>mobile user 3/4G reject confincoming"),!t.confHandle){e.next=23;break}return Y.info("confhangup,confhanled = "+t.confHandle),e.next=23,We(t.confHandle);case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),We=t.rejectConf=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreConf.rejectConfService(t),wn(constant.ONLINE_STATUS.ONLINE),G.rejectConf(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ge=(t.acceptConf=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.isInConf()){e.next=5;break}return Y.info("conf has ended, return"),window.ToastNew(language.END_CONFERENCE,2),G.rejectConf(t),e.abrupt("return");case 5:return e.next=7,coreCall.Call2GNet(!0);case 7:if(!e.sent){e.next=10;break}Y.info("The network is 2G not support video conf"),n=0;case 10:return G.acceptConfStart(n),r={confHandle:t,isVideoType:n},e.next=14,coreConf.acceptConfService(r);case 14:a=e.sent,a&&0===a.result?(Y.info("accept conf success"),G.accpetConfSuc(),wn(constant.ONLINE_STATUS.BUSY)):(Y.error("accept conf failed"),G.rejectConf(t),wn(constant.ONLINE_STATUS.ONLINE)),H.acceptConfRefreshRecent();case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.doClearSipForSipLoginOnly=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.sipserverDeregister();case 2:return e.next=4,coreAccount.clearnsipinfo();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setSmcFirstRequest=function(){$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING||window.isSmcFirstRequest||coreConf.setIsSmcFirstRequestCharimanRest(!0)}),Ve=(t.handleClosePairConfPage=function(){if(Y.info("BLE: start handleClosePairConfPage"),coreCall.resumeScreenStateWhenCallOrConfEnd(),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.clearConfInfo()),coreCommon.SpkControl.getInstance().setHandsFree(!1),B.terminateReCall(),Mt(!0),$dispatch(coreUi.changeCallStatus("")),$dispatch(coreUi.changeCallId("")),$dispatch(coreUi.clearCallInfo()),$dispatch(coreUi.clearPhoneAddrInfo()),G.closeConfPage(),window.CLIENTCONFIG.ISMOBILE){window.callOrConfEnded(),qn();"callMain"===window.getRoute()&&(Y.info("BLE: mobile return origin page"),history.back())}coreCwmp.checkUpdateConfig(),coreCwmp.restartUpgrade()},t.actionLeaveConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&"ios"===window.CLIENTCONFIG.PLATFORM&&window.iosLeaveConfDissmissDrawButton(),!$getState().synergismInfo.inPairConf){e.next=5;break}return Y.info("BLE: actionLeaveConf, start leave pair meeting"),(0,D.pairStartEndMeeting)(!1),e.abrupt("return");case 5:return t=coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE_START_END"),n=coreCommon.TaskOptions.defaultOptions(),r=a?language.NO_MIC_TO_LEAVE_CONF:language.EXIT_CONFERENCE,t.addTask(G.closeConfPage,n,null,!0,!1,0,r),e.next=11,coreConf.leaveConf();case 11:wn(constant.ONLINE_STATUS.ONLINE),t.addTask(G.clearAfterConfEnd,n,null,!0,!1,0);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),He=(t.actionBroadcastAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("actionBroadcastAttendee，isBroadcast= "+t+",NNN="+n.substr(0,3)+"****"+n.substr(-3)),r=JSON.parse((0,f.default)($getState().conf.broadCastInfo)),void 0!==r.broadCastList&&(a="",o="",r.broadCastList.forEach(function(e){void 0!==e.name&&(a=e.name,e.name=handlePhoneNumber(a)),void 0!==e.number&&(o=e.number,e.number=handlePhoneNumber(o))})),Y.info("actionBroadcastAttendee",r),i={isBroadcast:t,number:n},e.next=7,coreConf.broadcastAttendeeService(i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionWatchAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.confctrlWatchAttendee(t);case 2:n=e.sent,n&&0===n.result?(z=t,Y.info("actionWatch attendee success: "+handlePhoneNumber(t))):Y.error("actionWatch attendee failed: "+handlePhoneNumber(t));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confEnded=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("confEnded, reason is ",t.param.reason),n=language.END_CONFERENCE,window.CLIENTCONFIG.ENABLE_IT_MEETING&&(r=window.pcLoginState())&&(n=language.PC_ONLINE_EXIST_CONFERNECE),wn(constant.ONLINE_STATUS.ONLINE),G.closeConfPage(!1,!0,0,n),G.clearAfterConfEnd(!1,!0,t.param.reason);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),$e=function(e){var t="";switch(e){case 0:t="[In Conf]";break;case 1:t="[Inviting]";break;case 2:t="[Entering conf]";break;default:t="[Hang Up]"}return t},je=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="";if(n&&(r=",CONFCTRL_E_EVT_ATTENDEE_LIST_UPDATE_IND"),t&&!isNaN(t.length)&&t.length>0)for(var a=0;a<t.length;a++)r=n?r+","+(t[a].name?t[a].name.length<=2?t[a].name.substr(0,1)+"**":t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):"")+",number:"+handlePhoneNumber(t[a].number)+",hand_state = "+t[a].hand_state+",is_broadcast = "+t[a].is_broadcast+",is_mute = "+t[a].is_mute+",media_type = "+t[a].media_type+",role = "+t[a].role+",state = "+t[a].state+$e(t[a].state)+",is_self = "+t[a].is_self+",is_same_grade_mcu = "+t[a].is_same_grade_mcu:r+","+(t[a].name?t[a].name.length<=2?t[a].name.substr(0,1)+"**":t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):"")+",number:"+t[a].number.substr(0,3)+"****"+t[a].number.substr(-3);Y.info(e,r)},qe=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.svcOnLineAttendances,r=2===t,$dispatch(coreUi.changeIsBigConf(r)),window.CLIENTCONFIG.ISMOBILE?(Y.info("notifyIsBigConfToNative isBigConf = "+t),r&&!coreConf.isConfChairMan()&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,!1,"big-conf-toast"),window.notifyIsBigConfToNative(t)):(O.SvcAtdManager.handleAtdlist(n),window.CLIENTCONFIG.ISWIN?O.SvcAtdManager.alertBox("NATIVE_ENTER_ACTIVE_CONF",1):window.CLIENTCONFIG.ISMAC&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,null,!0));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a,o,i,s){var c,u,f,l,d,p,h,g,m;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.isInConf()){e.next=3;break}return Y.info("handleAttendeeListUpdate not in conf, so return"),e.abrupt("return");case 3:if(c=$getState().conf.videoWatchNum,""!==c&&(u=!1,t.forEach(function(e){if(e.number===c)return u=!0,void(0!==e.state&&$dispatch(coreUi.changeVideoWatchNum("")))}),u||$dispatch(coreUi.changeVideoWatchNum(""))),Y.info("service to attendee,isAllowUnmute is",o),$dispatch(coreUi.changeConfAllowUnmute(o)),f={isAllowUnmute:1===o},coreConf.getSvcAtdManager().setParam(f),!window.isSupportiDo){e.next=15;break}return Y.info("window.isSupportiDo"),e.next=13,Je(t,n,r,a,o,i,s);case 13:e.next=17;break;case 15:Y.info("window.isSupportiDo else "),Ke(t,n,r,a,o);case 17:l=$getState().conf.isVideoConf,l||window.CLIENTCONFIG.ISMOBILE||M.ToolbarManager.setAudioConfTip(t),d=$getState().conf.selfNum,p=$getState().myInfo.bind_no,h=$getState().call.isMuteMic,g=$getState().conf.isConfMicMute,m=isNullOrEmpty(d)?p:d,Y.info("cwp add isMuteMic： "+h+" isConfMicMute: "+g),h&&g!==h&&(Y.info("handleAttendeeListUpdate mute Attendee isMuteMic： "+h+" isConfMicMute: "+g),g||pe(!0,m,!0));case 26:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a,o){var i,s,c,u,f,l,d,p,h;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r&&je("Rest handle AttendeeList Update logic",t),Y.info("isAllMute = "+a),i=$getState().conf,s=i.isSvcConf,c=i.isAudience,!(!t||!c&&t.length<=0)){e.next=6;break}return Y.error("memberlist is null"),e.abrupt("return");case 6:if(n&&(s&&window.CLIENTCONFIG.ISWIN&&$getState().conf.confSubject!==n&&O.SvcAtdManager.setSubject(n),$dispatch(coreUi.changeConfSubject(n)),A.setSubject(n)),(0,T.dealItShortNumber)(t),!r){e.next=15;break}t&&t.length>1&&t.sort(T.attendeeSortFunc),$dispatch(coreUi.changeMemberListInfo(t)),(0,T.calcMemberCount)(t),isNullOrEmpty($getState().conf.searchText)||Nt($getState().conf.searchText,t),e.next=37;break;case 15:return $dispatch(coreUi.changeConfAllMute(a)),$dispatch(coreUi.changeConfAllowUnmute(o)),e.next=19,(0,T.dealWithMemberListDataRest)(t);case 19:if(u=e.sent,f=u.currentMemberList,l=$getState().conf.isSvcConf,!f||!(f.length>1||l&&f.length>0)){e.next=33;break}if(!l){e.next=32;break}if(d=Qe(f),!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN){e.next=30;break}return e.next=28,O.SvcAtdManager.handleSvcAtdList(d);case 28:e.next=32;break;case 30:return e.next=32,y.SvcAttendanceManager.handleSvcAttendancesUpdateEvent(d);case 32:f.sort(T.attendeeSortFunc);case 33:coreConf.updateConfMemberList(f),$dispatch(coreUi.changeMemberListInfo(f)),(0,T.calcMemberCount)(f),isNullOrEmpty($getState().conf.searchText)||Nt($getState().conf.searchText,f);case 37:p=$getState(),h=p.conf.searchText,h&&(Y.info("update search result: "),Nt(h)),M.ToolbarManager.setChairmanState(t),M.ToolbarManager.setMuteStateInAvc(t),ue();case 42:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),Je=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a,o,i,s){var c,u,f,l,d,p,h,g,m,_,C,w,S,I,E,b,x,L;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length<21&&!r&&je("iDo handle AttendeeList Update logic",t),t=(0,T.unique)(t),Y.info("isAllMute = "+a),c=$getState().conf,u=c.isAudience,f=c.isSvcConf,!(!t||!u&&t.length<=0)){e.next=7;break}return Y.error("memberlist is null"),e.abrupt("return");case 7:if(n&&(f&&window.CLIENTCONFIG.ISWIN&&$getState().conf.confSubject!==n&&O.SvcAtdManager.setSubject(n),Y.info("ido attendee list confSubject = "+n.substr(0,1)+"***"),$dispatch(coreUi.changeConfSubject(n)),A.setSubject(n)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(0,T.dealItShortNumber)(t),!r){e.next=18;break}if(t&&t.length>1&&t.sort(T.attendeeSortFunc),$dispatch(coreUi.changeMemberListInfo(t)),(0,T.calcMemberCount)(t),isNullOrEmpty($getState().conf.searchText)){e.next=16;break}return e.next=16,Nt($getState().conf.searchText,t);case 16:e.next=71;break;case 18:return $dispatch(coreUi.changeConfAllMute(a)),$dispatch(coreUi.changeConfAllowUnmute(o)),e.next=22,(0,T.dealWithMemberListDataiDo)(t);case 22:if(l=e.sent,window.CLIENTCONFIG.ISWIN&&$n(),!l||!(l.length>1||f&&l.length>0)){e.next=38;break}if(!f){e.next=36;break}if(Y.info("00000 run into SvcConf"),d=Qe(l),!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN){e.next=33;break}return e.next=31,O.SvcAtdManager.handleSvcAtdList(d);case 31:e.next=36;break;case 33:return e.next=35,y.SvcAttendanceManager.handleSvcAttendancesUpdateEvent(d);case 35:Y.info("handleSvcAttendancesUpdateEvent end");case 36:l.sort(T.attendeeSortFunc),Y.info("currentMemberList sort end");case 38:return e.next=40,coreAccount.getLoginModel();case 40:if(p=e.sent,!p.isSupportAS){e.next=65;break}if(1!==(h=$getState().conf.selfRole)){e.next=56;break}return g=s||0,m=i||0,(0,R.isShowReacrdTypeLogic)(g),(0,R.isReacrdLogic)(m,g),m&&(0,R.haveRecordedLogic)(1),_={isReacrd:m,recordType:g,isHaveRecordPriviledge:Fn(g)},e.next=52,N.NativeInterface.setParam(_);case 52:C=e.sent,Y.info("setParam, res = ",C),e.next=65;break;case 56:if(0!==h){e.next=65;break}return(0,R.isShowReacrdTypeLogic)(s),(0,R.isReacrdLogic)(i,s),w={isReacrd:i,recordType:s},Y.info("setParam, data.param.isReacrd = ",i),e.next=63,N.NativeInterface.setParam(w);case 63:S=e.sent,Y.info("setParam, res = ",S);case 65:if(coreConf.updateConfMemberList(l),$dispatch(coreUi.changeMemberListInfo(l)),(0,T.calcMemberCount)(l),isNullOrEmpty($getState().conf.searchText)){e.next=71;break}return e.next=71,Nt($getState().conf.searchText,l);case 71:if(!window.CLIENTCONFIG.ISWIN&&!window.CLIENTCONFIG.ISBIGWIN){e.next=78;break}return e.next=74,M.ToolbarManager.setChairmanState(t);case 74:return I=$getState().conf,E=I.isBigConf,b=I.svcViewMode,x=I.svcOnLineAttendances,E&&(L=x.length,O.SvcAtdManager.setPageNum(b,L,!0)),e.next=78,M.ToolbarManager.setMuteStateInAvc(t);case 78:ue();case 79:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),ze=function(e,t){if(e.indexOf&&"function"==typeof e.indexOf){if(e.indexOf(t)>=0)return!0}return!1},Qe=function(e){var t=$getState().conf.svcOnLineAttendances;if(0===t.length)return e;for(var n=new Array,r=new Array,a=0;a<t.length;a++){for(var o=t[a],i=0;i<e.length;i++){var s=e[i];s.number!==o.number||5!==s.state||ze(n,o.number)||r.push(s)}n.push(o.number)}for(var c=0;c<e.length;c++){var u=e[c];5===u.state&&n.indexOf(u.number)<0&&(r.push(u),n.push(u.number))}for(var f=0;f<e.length;f++){var l=e[f];n.indexOf(l.number)<0&&(r.push(l),n.push(l.number))}return r},Xe=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,T.dealWithConfSpeakerList)(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("add contact to group from conf: "+n),n){e.next=4;break}return Y.warn("group uri is not exit"),e.abrupt("return");case 4:return e.next=6,coreGroup.getGroupInfoFromDB(n);case 6:if(!(r=e.sent)||r.group_type!==constant.GROUP_TYPE.DISCUSS_GROUP){e.next=20;break}Y.info("discuss group, deal add"),a=0;case 10:if(!(a<t.length)){e.next=18;break}return o=t[a].account,i={groupType:constant.GROUP_TYPE.DISCUSS_GROUP,groupId:n,account:o,groupName:r.name,displayName:r.name},e.next=15,coreGroup.addGroupMemberService(i);case 15:a++,e.next=10;break;case 18:e.next=21;break;case 20:Y.error("not discuss group");case 21:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),et=(t.diableSpeakerIcon=function(e){for(var t=$getState(),n=t.conf.confSpeaker,r=0;r<n.speaker.length;r++)if(e===n.speaker[r].number){n.speaker[r].isToMuted=!0;break}$dispatch(coreUi.updateConfSpeaker(n))},t.toggleShowMemberList=function(e){if($getState().conf.isShowMemberList&&e)return void Y.info("now is showMemberList status,return");$dispatch(coreUi.changeIsShowMemberList(e))},t.cancleConfMemberlistMessage=function(){$getState().conf.showqusetchairman&&$dispatch(coreUi.showqusetchairman());var e=$getState().conf.showRepChairmanError;e&&(Y.info("showRepChairmanErrorbool",e),$dispatch(coreUi.showRepChairmanError()))}),tt=(t.handleShowMemberList=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n=$getState(),r=n.conf.isShowMemberListNew;if(e){var a=e.x,o=e.y,i=e.w,s=e.h,c=e.isMove;$dispatch(coreUi.changeMemberListPosition(a,o,i,s)),$dispatch(coreUi.changeMemberListIsMove(c))}if($dispatch(coreUi.changeIsShowMemberListNew()),r){et();var u={conf_member_list_off:1};N.NativeInterface.setParam(u)}if(t){var f={conf_member_list_off:0};N.NativeInterface.setParam(f)}},t.toggleShowConfInfoCard=function(e){$dispatch(coreUi.changeIsShowConfInfo(e))},t.updateMemberStateInfo=function(e){Y.info("寻呼AttendeeList updateMemberStateInfo"),$dispatch(coreUi.changeMemberStateInfo(e))}),nt=t.updateconfRecallList=function(e){$dispatch(coreUi.changeconfRecallList(e))},rt=t.updateconfMsglList=function(e){$dispatch(coreUi.changeconfMsglList(e))},at=t.handleBroadcaseResult=function(e){0===e.param.operation_rsp_reason?coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,resultParams:[1]}):coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,resultParams:[0,e.param.operation_rsp_reason]});var t=$getState().conf.isBroadByChairman,n=void 0;n=t?language.BROADCAST_SUCCEED:language.CANCEL_BROADCAST_SUCCEED,Y.info("handleBroadcaseResult ----\x3e "+e.param.operation_rsp_reason);var r=[n,language.BROADCAST_FAILED_FF,language.BROADCAST_FAILED_2,language.BROADCAST_FAILED_3,language.BROADCAST_FAILED_4,language.BROADCAST_FAILED_5,language.BROADCAST_FAILED_6,language.BROADCAST_FAILED_7,language.BROADCAST_FAILED_8,language.BROADCAST_FAILED_9,language.BROADCAST_FAILED_10,language.BROADCAST_FAILED_11,language.BROADCAST_FAILED_12,language.BROADCAST_FAILED_FF],a=r[e.param.operation_rsp_reason]||r[r.length-1];if(window.CLIENTCONFIG.ISMOBILE)window.Toast(a,3,!1,"request-chairman-toast-reset");else if(window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf){var o=$getState().conf.videoFrameHwnd,i=A.getAvcFrameHandles(),s={frameHwnd:0!==o?o:i,dialog_type:2,content:a};(0,b.showMessageBox)(s)}else setTimeout(function(){window.Toast(a,2,!1,"pcToast","")},3e3)},ot=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("onMultiViewBroadcast"),O.SvcAtdManager.handleMultiViewBroadcast(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),it=function(){Y.info("registerConfEvent, Observer subscribe topics"),window.addEventListener("sipRegisterSuc",_n),window.addEventListener("CloudLinkoffline",Cn);var e=new coreCommon.ObserverOpts("MODULE_CONFERENCE_START_END");coreCommon.Observer.subscribe("ConfConnected",de,e),coreCommon.Observer.subscribe("ConfEnded",He,e),coreCommon.Observer.subscribe("ConfInfoNotify",fe,e),coreCommon.Observer.subscribe("IsBroadcastLocal",Ne),coreCommon.Observer.subscribe("MuteAttendeeResult",he),coreCommon.Observer.subscribe("lockResult",ve),coreCommon.Observer.subscribe("lockState",me),coreCommon.Observer.subscribe("handupResult",ge),coreCommon.Observer.subscribe("ConfIncoming",Be),coreCommon.Observer.subscribe("HandleSvcConfWatchRet",En),coreCommon.Observer.subscribe("handleVideoWatchRes",Nn),coreCommon.Observer.subscribe("BroadcaseResult",at),coreCommon.Observer.subscribe("onMultiViewBroadcast",ot);var t=new coreCommon.ObserverOpts("MODULE_CONFERENCE");return t.setQueueParams({delay:10,timeoutMs:5e3}),coreCommon.Observer.subscribe("AttendeeListUpdate",Ye,t),coreCommon.Observer.subscribe("BigConfInfoNotify",qe),coreCommon.Observer.subscribe("AutocallMobile",ct),coreCommon.Observer.subscribe("ConfSpeakerNotify",Xe,t),coreCommon.Observer.subscribe("AddToGroupFromConf",Ze),coreCommon.Observer.subscribe("ExceedGroupMemNum",Et),coreCommon.Observer.subscribe("TransToConfResult",yt),coreCommon.Observer.subscribe("VMRConfResult",Rt),coreCommon.Observer.subscribe("ConfMTnumber",Xt),coreCommon.Observer.subscribe("SpeakerReport",Ct),coreCommon.Observer.subscribe("UportalTokenErr",ht),coreCommon.Observer.subscribe("NonChairCtrlcaps",pt),coreCommon.Observer.subscribe("smcEnterDataConf",gt),coreCommon.Observer.subscribe("ReleaseChairmanResult",ye),coreCommon.Observer.subscribe("ReqChairmanResult",xe),coreCommon.Observer.subscribe("GetDataPostponeConf",mt),coreCommon.Observer.subscribe("EnterPwdToChairmanResult",Le),coreCommon.Observer.subscribe("inviteAttendeeResult",Tn),coreCommon.Observer.subscribe("transferChairman",nn),coreCommon.Observer.subscribe("callAttendeeResult",rn),coreCommon.Observer.subscribe("OnMeetingHWreCallTimeOut",Sn),coreCommon.Observer.subscribe("AudientResult",Rn),coreCommon.Observer.subscribe("ChangeDirectionResult",Mn),coreCommon.Observer.subscribe("setRecordVideoResult",Wn),coreCommon.Observer.subscribe("recordVideoResult",Gn),coreCommon.Observer.subscribe("confStateDirectBroadCastIndresult",Vn),coreCommon.Observer.subscribe("recordVideoStatusChairmanIndResult",Hn),coreCommon.Observer.subscribe("changeConfHanlde",Kn),coreCommon.Observer.subscribe("changeConfSubject",Jn),coreCommon.Observer.subscribe("changeCallId",zn),coreCommon.Observer.subscribe("changeConfRole",Qn),coreCommon.Observer.subscribe("changeConfServerId",Xn),coreCommon.Observer.subscribe("changeVmrId",Zn),coreCommon.Observer.subscribe("changeIsSvcConf",er,e),coreCommon.Observer.subscribe("changeSsrcRange",tr),coreCommon.Observer.subscribe("changeGroupUri",Q),coreCommon.Observer.subscribe("confInfoNotifyIsNotVideoConf",nr),coreCommon.Observer.subscribe("CallEndedInConf",ar,e),coreCommon.Observer.subscribe("SvcSessionModify",le,e),kt.wait(),coreCommon.ATOMIC_ACTION_RESULT.SUCCESS},st=t.registerConfEventAtomic=new coreCommon.AtomicAction("registerConfEvent",it),ct=t.AutocallMobile=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().call,r=n.callStatus,a=n.showCallToolBar,a&&""!==r){e.next=3;break}return e.abrupt("return");case 3:o=[],t.participants=ut(t.participants),i=0;case 6:if(!(i<t.participants.length)){e.next=25;break}if(s=t.participants[i],c=J.test(s.number),u=!1,s.state===s.oldState||c||!0===s.hasCallMobile||1===s.state){e.next=21;break}if(f=$getState().conf.confMsglList,s.hasCallMobile){e.next=19;break}return Y.info("寻呼AttendeeList state="+s.state+",oldState="+s.oldState+",hasCallMobile="+s.hasCallMobile+",callnum="+handlePhoneNumber(s.number)+",hasTipMsg="+s.hasTipMsg),e.next=16,(0,T.searchContact)(s.number,s.name);case 16:if(l=e.sent,s.hasCallMobile=!0,l.length>0&&(d=l[0],p=dt(d),p.length>0))for(h=0;h<p.length;h++)g=$getState().conf.confRecallList,"mobile"===p[h].name&&g.indexOf(p[h].num)<0&&(d.number=p[h].num,u=!0,o.push(d),g=g+","+d.number,Y.info("寻呼AttendeeList number=",handlePhoneNumber(d.number)),nt(g),ft(s.name,s.state,c,u),f=f+","+s.number);case 19:f.indexOf(s.number)<0&&(ft(s.name,s.state,c,u),f=f+","+s.number),rt(f);case 21:s.oldState=s.state;case 22:i++,e.next=6;break;case 25:return e.next=27,tt(t.participants);case 27:return e.next=29,coreConf.addAttendee(o);case 29:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ut=t.handlepPrticipantsList=function(e){for(var t=$getState().conf.memberStateInfo,n=0;n<e.length;n++)if(t.length>0)for(var r=0;r<t.length;r++){t[r];e[n].participant_id===t[r].participant_id&&(isNullOrEmpty(t[r].oldState)?e[n].oldState=-1:(e[n].oldState=t[r].oldState,e[n].hasCallMobile=t[r].hasCallMobile))}for(var a=0;a<e.length;a++)(J.test(e[a].number)||0===e[a].state||2===e[a].state||3===e[a].state||4===e[a].state||7===e[a].state)&&(e[a].hasCallMobile=!0);return tt(e),e},ft=function(e,t,n,r){t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER?!n&&r?lt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!0):n?n&&lt(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!1):lt(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!1):t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED?!n&&r?lt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!0):n?n&&lt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!1):lt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!1):t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_REJECT||t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_EXIST||t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY&&(!n&&r?lt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!0):n?n&&lt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!1):lt(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!1))},lt=t.setMsg=function(e,t,n){var r="";if(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_EXIST===t?r=language.CONF_PART_STATUS_NO_EXIST:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY===t?r=language.CONF_PART_STATUS_BUSY:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER===t?r=language.CONF_PART_STATUS_NO_ANSWER:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_REJECT===t?r=language.CONF_PART_STATUS_REJECT:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED===t&&(r=language.CONF_PART_STATUS_CALL_FAILED.format(e)),n&&(r=r+", "+language.CALL_Mobile),""!==r){var a=$getState().call,o=a.callStatus;(a.showCallToolBar||"VIDEO_OUT"===o||"CALL_OUT"===o||"VIDEO_CONNECTED"===o||"CALL_CONNECTED"===o||"VIDEO_TRANSTO_CONF"===o||"CALL_TRANSTO_CONF"===o)&&(window.CLIENTCONFIG.ISMOBILE?window.ToastNew(r,2):coreUi.showConfTips(e,constant.CONF_MSG_TYPE.TYPE_OTHER_STATE,r))}},dt=t.checkUsersMobile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.CALL_CONST.CALL_NUM_LIST,n=[];return t.forEach(function(t){if(e[t]&&J.test(e[t])){var r={name:t,num:e[t]};n.push(r)}}),n},pt=t.handleNonChairCtrlcaps=function(e){Y.info("handle Non Chair Ctrlcaps");var t=!e.param.nonchair_cap.event_type[5];Y.info("showMuteStatus: "+t),$getState().conf.showMuteStatus!==t&&$dispatch(coreUi.changeShowMuteStatus(t))},ht=t.handleUportalTokenErr=function(e){Y.info("handleUportal[Token]Err = "+(0,f.default)(e)),$getState().login.sipLoginOnly||!e||!e.param||e.param.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED&&e.param.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR||coreAccount.actionRefreshToken()},gt=t.handleSmcEnterDataConf=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("handleSmcEnterDataConf,conf[key] length = "+t.confKey.length),n={},n.conf_uri="https://"+$getState().login.smcUri,n.passcode=t.confKey,n.getParamType=1,n.media_type=t.mediaType,t.confToken&&""!==t.confToken&&"0"!==t.confToken?n.sip_num=t.confToken:n.sip_num=$getState().login.sipImpi,e.next=9,coreConf.joinDataConf(n,t.confCallId);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),vt=function(e){return(Math.floor(e/60)?Math.floor(e/60)+language.HOUR:"")+(e%60?e%60+language.MINUTE:"")},mt=t.handleGetDataPostponeConf=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{Y.info("handleGetDataPostponeConf"),t&&t.param?(n=t.param,r=n.ret,a=$getState().conf,o=a.pastponeTime,i=a.isVideoConf,r===constant.MEDIA_X_ERROR_CODE.success?(Y.info("userClick  handleGetDataPostponeConf "+language.MEETING_WILL_ENTENT.format(vt(o))),window.CLIENTCONFIG.ISWIN?O.SvcAtdManager.alertBox(language.MEETING_WILL_ENTENT.format(vt(o)),3):window.ToastNew(language.MEETING_WILL_ENTENT.format(vt(o)),2),At()):(r===constant.MEDIA_X_ERROR_CODE.conference_time_out_max_time?window.CLIENTCONFIG.ISWIN&&i?O.SvcAtdManager.alertBox(language.MEETING_TIME_OUT_OF_MAX,3):window.ToastNew(language.MEETING_TIME_OUT_OF_MAX,2):window.CLIENTCONFIG.ISWIN&&i?O.SvcAtdManager.alertBox(language.PROLONGING_THE_FAILURE_OF_MEETING,3):window.ToastNew(language.PROLONGING_THE_FAILURE_OF_MEETING,2),Y.error("handleGetDataPostponeConf 错误码："+t.param.ret,constant.MEDIA_X_ERROR_INFO[t.param.ret],o))):Y.error("handleGetDataPostponeConf 结果异常")}catch(e){Y.error("handleGetDataPostponeConf",e.toString())}case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),_t=(t.UportalTokenErr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=$getState().call,n=t.callStatus;if(!e&&(t.showCallToolBar||"VIDEO_OUT"===n||"CALL_OUT"===n||"VIDEO_CONNECTED"===n||"CALL_CONNECTED"===n||"VIDEO_TRANSTO_CONF"===n||"CALL_TRANSTO_CONF"===n))return Y.info("UportalTokenErr,delay"),void coreAccount.getLoginModel().then(function(e){e.appstate===constant.APP_STATE.ONLINE&&$dispatch(coreUi.changeuportalTokenErr(!0))});Y.info("UportalTokenErr"),_t()},t.UportalTokenErrAndLogout=function(){Y.info("UportalTokenErrAndLogout"),coreAccount.getLoginModel().then(function(e){e.appstate===constant.APP_STATE.ONLINE&&(e.isResume&&(coreAccount.clearResumeService(),coreAccount.stopResume("UportalTokenErrAndLogout")),coreAccount.checkAndEndCall().then(function(){coreAccount.setOffline({}),window.endCallPromise&&(window.endCallPromise=null)}).then(function(){window.getRoute()&&"login"!==window.getRoute()&&"login/joinConfSIPOnly"!==window.getRoute()&&"loginCtn"!==window.getRoute()&&alert(language.RENEW_EXPIRED_REMINDER).then(function(){coreAccount.logout({}).then(function(){K&&clearTimeout(K),K=null,window.isRepeateCall=!1,Y.info("logout success",window.isRepeateCall)})})}))})},t.setUportalTokenRefreshTimer=function(e){K&&clearTimeout(K),K=setTimeout(function(){Y.info("timeout not respond allows refresh again",e),window.isRepeateCall=!1},e)},t.endCallAndLogout=function(){coreAccount.checkAndEndCall().then(function(){coreAccount.resume({message:"endCallAndLogout"})})}),Ct=t.handleSpeakerReport=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("handleSpeakerReport",t.param.result);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),wt=(t.unregisterConfEvent=function(){Y.info(" execute unregisterConfEvent "),window.removeEventListener("sipRegisterSuc",_n),window.removeEventListener("CloudLinkoffline",Cn)},function(){var e=(new Date).getTime();return e=parseInt(e/1e3),Y.info("call start time =",e),$dispatch(coreUi.changetime(e)),e}),St=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a={};r.item&&r.itemType&&"charItem"===r.itemType?a={account:"",name:r.item.displayName,mobile:It(r.item.number),number:It(r.item.number),email:r.item.email,bind_no:"",home_phone:"",office_phone:"",short_phone:"",other_phone:"",other_phone2:"",voip:"",ip_phone:"",q_pin_yin:r.item.pinyin,type:constant.ATTENDEE_TYPE.ATTENDEE_TYPE_OUTSIDE}:r.numberInfo?(a={account:r.account,name:r.name,bind_no:r.numberInfo.bind_no.number,mobile:r.numberInfo.mobile.number,home_phone:r.numberInfo.home_phone.number,office_phone:r.numberInfo.office_phone.number,office_phone2:r.officephone2,short_phone:r.numberInfo.short_phone.number,other_phone:r.numberInfo.other_phone.number,other_phone2:r.numberInfo.other_phone2.number,voip:r.numberInfo.voip.number,ip_phone:r.numberInfo.ip_phone.number,number:r.number,email:r.email,q_pin_yin:r.qPinyin,type:isNullOrEmpty(r.officephone2)?constant.ATTENDEE_TYPE.ATTENDEE_TYPE_NORMAL:constant.ATTENDEE_TYPE.ATTENDEE_TYPE_TERMINAL},isNullOrEmpty(r.officephone2)?isNullOrEmpty(a.bind_no)||a.bind_no!==a.number?isNullOrEmpty(a.bind_no)||a.mobile!==a.number?a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_OUTSIDE:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_MOBILE:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_NORMAL:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_TERMINAL):a={name:r.name,number:r.number},t.push(a)}return t},It=function(e){var t="";return t=0===e.indexOf("+86")?e.substring(3,e.length):e,t.replace(/[^0-9]/gi,"")},Et=function(){Y.warn("member number exceeds 100, can not add to group"),alert(language.CONFERENCE_ADDMEM_EXCEED_GROUP.format("100"))},Nt=t.searchMemberList=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.conf.memberListInfo,a=(0,h.default)([],r),""!==f&&(a=(0,h.default)([],f)),""!==t.replace(/\s+/g,"")){e.next=7;break}return Y.info("the first input can not enter a space"),$dispatch(coreUi.changeSearchText("")),e.abrupt("return");case 7:for(o=["name","q_pin_yin","number"],i=[],s=[],c=0;c<a.length;c++)u="",u=""===a[c].userInfo.q_pin_yin||null===a[c].userInfo.q_pin_yin||void 0===a[c].userInfo.q_pin_yin?window.pinyinUtil.getPinyin(a[c].userInfo.name.trim()):a[c].userInfo.q_pin_yin,i.push((0,h.default)({},a[c],{name:a[c].userInfo.name,q_pin_yin:u}));coreSearch.filterMatch({searchList:i,key:t,matchItem:o}).map(function(e){s.push(e.object)}),Y.info("search conf member, result=",s.length),$dispatch(coreUi.changeSearchText(t)),$dispatch(coreUi.changeSearchMemberList(s));case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),bt=(t.toggleConfOtherNumber=function(e){$dispatch(coreUi.changeConfOtherNumber(e))},t.handleShowEndConf=function(e){$dispatch(coreUi.changeShowEndConf(e)),Y.info("handleShowEndConf",e)},t.upgrade2DataConfOrStartShare=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==coreConf.isNeedUpdate2DataConf()){e.next=5;break}return e.next=3,bt();case 3:e.next=7;break;case 5:return e.next=7,coreConf.startShareScreen();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.upgradeAudioConf2Data=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(t=coreConf.isInConf())){e.next=9;break}return Y.info("upgradeAudioConf2Data, isInfConf = true"),$dispatch(coreUi.hideDataShareButton(!0)),!1===coreConf.isConfChairMan()&&(Y.error("not chairman，can not upgrade conf"),n=$getState().conf.videoFrameHwnd,r=A.getAvcFrameHandles(),window.CLIENTCONFIG.ISWIN&&(a={frameHwnd:0!==n?n:r,dialog_type:1,content_id:"ATTENDEE_UPGRADE_DATA_NOTIFY"},(0,b.showMessageBox)(a))),e.next=7,coreConf.upgradeConf();case 7:e.next=11;break;case 9:return e.next=11,Tt(constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,!1,[],!0);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Tt=t.p2pTransToConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,g,m,_,C,w,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,I=arguments[1],E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],N=arguments[3];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("deal p2p trans to conf, add size: "),t=$getState(),n=t.myInfo,r=t.call,a=r.callId,o=r.callNum,i=r.userInfo,s=$getState(),c=void 0,c=s.selectBox.selectBox_tempSelectedList,se(c)){e.next=6;break}return e.abrupt("return");case 6:if(Y.info("deal p2p trans to conf, callStatus: "+$getState().call.callStatus),"VIDEO_CONNECTED"===$getState().call.callStatus&&(Y.info("video call trans to conf"),S|=constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),ie()&&(S|=constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),Y.info("p2pTransToConf CreateDataConferenceFlag:"+ie()+",mediatype:"+S),coreUi.hideModal(),u=St(c),!1===I&&(u.length=0),f=void 0,f=window.CLIENTCONFIG.ENABLE_IT_MEETING?Ot(E,n,i,o):Ot(u,n,i,o),f.length>=1){e.next=18;break}return Y.error("add member list is null"),e.abrupt("return");case 18:return Y.info("p2p trans to conf, member list count is "+f.length),e.next=21,H.p2pTransToConfCreateGroup(u,n,i,o);case 21:return l=e.sent,d=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,p=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,g={callId:a,memberList:f,confSubject:n.name+language.CONFERENCE_SUBJECT_INFO,groupUri:l,isMultiStream:"VIDEO_CONNECTED"===$getState().call.callStatus?d:0,mediaType:S,userType:2,compereNumber:n.bind_no,selfNumber:n.bind_no,selfInfo:(0,h.default)({},n),userInfo:(0,h.default)({},i,{number:o}),noPassword:p,isAutoScreenShare:void 0!==N&&N},m=(S&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)===constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,G.callToConfStart(m),Y.info("p2pTransToConf isMultiStreamValue: "+d),e.next=30,coreConf.p2pTransferConf(g);case 30:_=e.sent,C=_.errorCode,0===C?At():(Y.error("create conf failed"),w=j.getCreateConfFailTitle(C),G.callToConfFail(w),7===C&&(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():ce(C)));case 33:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),yt=function(e){0!==e.param.ret?Y.error("failed to trans to conf"):(coreCall.changeCallHoldStatusLogic(!1),coreCall.setTransferFlagHandle(!1,"handleTransToConfResult"),Y.info("successed to trans to conf, handle: ",e.param.handle))},Ot=function(e,t,n,r){for(var a=[],o=0;o<e.length;o++)e[o].number!==t.bind_no&&e[o].number!==r&&a.push((0,h.default)({},e[o]));return a.push((0,h.default)({},t,{number:t.bind_no})),n.name?a.push((0,h.default)({},n,{number:r})):a.push((0,h.default)({},n,{number:r,name:r})),a},xt=t.getConfInfo=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={page_index:1,page_size:100},e.next=3,kt.wait();case 3:return r.sub_conf_id=n,r.conf_id=t,e.next=7,coreConf.getConfInfoService(r);case 7:Y.info("getConfInfo . confId =",t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),At=(t.transferChairman=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().conf.confHandle,r={confHandle:n,attendeeInfo:t},e.next=4,coreConf.transferChairmanService(r);case 4:Y.info("transferChairman . attendeeInfo =",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionExportConfmember=function(){Y.info("userClick export member list btn");var e=void 0;e=coreConf.getConfMemberListContent(),window.LOG_PATH,appService.writeFile(window.LOG_PATH,"tempFile.txt",e).then(function(e){appService.openFileOrFolder(e)},function(e){Y.info("write failed:"+e)})},t.changeconfListInfo=function(e){$dispatch(coreUi.changeconfList(e))},t.getConfList=function(){var e=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.wait();case 2:if(Y.info("get_conf_list"),window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.pcLoginState()){e.next=6;break}if(!window.isOffline){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,coreAccount.getLoginModel();case 8:if(t=e.sent,!t.isSupportAS){e.next=12;break}return Y.info("new conf as is not supported get confList"),e.abrupt("return");case 12:return e.next=14,coreConf.getConfListService();case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Lt=t.subScribeConfListAndInfoRes=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("subscribe getConfList ,getConfInfo,cancelConf res"),e.next=3,coreAccount.getLoginModel();case 3:return t=e.sent,n=t.isSupportAS,Y.info("confctrlInit getConfList or subscribeConfList, isSupportAS = "+n),coreCommon.Observer.subscribe("ConfList",Wt),coreCommon.Observer.subscribe("ConfInfo",throttle(Zt,1e3)),coreCommon.Observer.subscribe("cancelConf",dr),coreCommon.Observer.subscribe("UportalBookConfResult",Z),n?coreConf.subscribeConfList():At(),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),kt=t.subScribeConfListAndInfoResAtomic=new coreCommon.AtomicAction("subScribeConfListAndInfoRes",Lt),Rt=t.handleVMRConfResult=function(e){var t=$getState().conf;if(Y.info("subscribe VMR Conf Result",e.result),0===e.result){var n=e.vmr_info.conference_right,r={key:"vmrInfo",value:(0,f.default)(e.vmr_info)};if(coreDb.saveUserConfig(r),0===n?$dispatch(coreUi.toggleConfRight(!1)):$dispatch(coreUi.toggleConfRight(!0)),Y.info("conf right",n),$dispatch(coreUi.changeVMRResultcount(0)),""===e.vmr_info.conf_id&&0===e.vmr_info.spec_vmr_num)return $dispatch(coreUi.changehasVMRConfResult("NONE")),void $dispatch(coreUi.changeShowVMRorNot(!1));$dispatch(coreUi.changeVMRConfResult(e.vmr_info)),$dispatch(coreUi.changeShowVMRorNot(!0)),$dispatch(coreUi.changeCurConfIDItem({idType:1,vmrId:e.vmr_info.vmr_id,confId:e.vmr_info.conf_id,confSubject:"",maxParties:0})),$dispatch(coreUi.setUseFixedConfIDState(!0))}else t.vmrResultcount<5&&t.showvmrornot?$dispatch(coreUi.changeVMRResultcount(t.vmrResultcount+1)):$dispatch(coreUi.changeVMRResultcount(0)),$dispatch(coreUi.changehasVMRConfResult("FAILED"))},Mt=(t.handleNotShowGeneralPas=function(e){$dispatch(coreUi.changeNotShowGeneralPas(e)),Y.info("changeNotShowGeneralPas = ",e)},t.handleNotShowChairPas=function(e){$dispatch(coreUi.changeNotShowChairPas(e)),Y.info("changeNotShowChairPas = ",e)},t.handleIsConfPwdInputShow=function(e){$dispatch(coreUi.changeIsConfPwdInputShow(e)),Y.info("changeIsConf[Pwd]InputShow = ",e)},t.handleIsShowJoinButton=function(e){Y.info("changeIsShowJoinButton = "+e),$dispatch(coreUi.changeIsShowJoinButton(e))}),Dt=(t.createTempMeeting=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState(),n=St(t.common.selectContactModal_selectedList),r=t.common.groupName,a=t.myInfo,n.push(a),o=In(n),i=$getState().conf.isCreateMeetingPassword||$getState().conf.showvmrornot?0:1,oe(a,o,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,i),coreUi.hideModal();case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createTempMeetingOfAddMember=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("createTempMeeting add participants"),t=$getState(),n=t.selectBox.selectBox_saveSelectedList,r=t.selectBox.selectBox_tempSelectedList,a=t.selectBox.selectBox_savePhoneSelectedList,0!==a.length&&(a=Pt(a,n),r=r.concat(a)),$dispatch(coreUi.setSaveSelectedList(n.concat(r)));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Pt=t.filterDuplicateData=function(e,t){return e.filter(function(e){return-1===t.findIndex(function(t){return t.itemType&&"charItem"===t.itemType&&t.item.displayName===e.item.displayName&&t.item.id===e.item.id&&t.item.numberName===e.item.numberName&&t.item.number===e.item.number})})},Ft=(t.deleteClickParticipants=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("userClick  createTempMeeting delete participants"),n=$getState(),r=n.selectBox.selectBox_saveSelectedList,a=t.item&&t.itemType&&"charItem"===t.itemType,o=[],o=a?r.filter(function(e){return!e.item||e.item.id!==t.item.id&&e.item.displayName!==t.item.displayName}):r.filter(function(e){return!!e.item||(isNullOrEmpty(t.account)?e.number!==t.number||e.account!==t.account:e.number!==t.number)}),i=n.common.groupName,s=n.myInfo,$dispatch(coreUi.setSaveSelectedList(o)),coreUi.hideModal();case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.selfInfo&&t.selfInfo.account)){e.next=8;break}return e.next=4,window.getContactFromNet(n);case 4:return r=e.sent,e.abrupt("return",r);case 8:Y.info("createConf cannot have selfInfo account");case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Ut=(t.createAMeeting=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=6;break}return e.next=4,Ft(t);case 4:r=e.sent,isNullOrEmpty(r)||(r.name&&(t.selfInfo.name=r.name),a=$getState(),o=a.myInfo,r.mobileCodeAll&&(i=r.mobileCodeAll.replaceAll("+86-",""),o.mobile=i,t.selfInfo.mobile=i),$dispatch(coreUi.updateMyInfo((0,w.default)({},o))));case 6:(0,h.default)(n,t.selfInfo),s=St(t.memberList),s.push(n),c=In(s),u=$getState().conf.isCreateMeetingPassword?0:1,oe(t.selfInfo,c,{group_id:""},t.mediaType,u,!0,t.confSubject,t.type,t.recordType,t.vmrConfId),coreUi.hideModal();case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createAMeetingFromHis=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},(0,h.default)(n,t),r=$getState().myInfo,window.CLIENTCONFIG.ENABLE_IT_MEETING&&r&&r.short_phone&&(Y.info("debug info replace bind_no with short_phone"),r.bind_no=r.short_phone),a=n.memberList,a.push(r),o=In(a),i=isNullOrEmpty(n.general_pwd)?1:0,oe(n.selfInfo,o,{group_id:""},n.mediaType,i,!0,n.confSubject,n.type,n.recordType),coreUi.hideModal();case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createTempTypeMeeting=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("create  instant conference"),n=$getState(),r=void 0,r=St(n.selectBox.selectBox_saveSelectedList),a=n.common.groupName,o=n.myInfo,r.push(o),i=In(r),s=n.conf.isCreateMeetingPassword?0:1,oe(o,i,{group_id:""},t.mediaType,s,!0,t.confSubject,t.type,t.recordType,t.vmrConfId),coreUi.hideModal();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createConfFromHistory=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n,a=$getState().myInfo,r.push(a),o=In(r),i=isNullOrEmpty(t.general_pwd)?1:0,s=7,oe(a,o,{group_id:""},t.media_type,i,!0,t.conf_subject,s,0),coreUi.hideModal();case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.saveConThemeName=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e){var a=$getState(),o=a.myInfo;$dispatch(coreUi.setConThemeName(""+o.name+language.CONFERENCE_SUBJECT_INFO))}else isNullOrEmpty(n)?$dispatch(coreUi.setConThemeName("")):$dispatch(coreUi.setConThemeName(n[0]))}),Bt=t.initCreateMettingContent=function(){$dispatch(coreUi.meetingTypeValue(0))},Wt=(t.judgeCreateNewConf=function(){if(coreCall.getCallCount()>0)return Y.error("already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);Ut(!0),Bt(),$dispatch(coreUi.changeCreatNewConfName("")),window.goRoute("ConCreateMeeting")},t.saveMettingTypeValue=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.meetingTypeValue(t));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfList=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,l,p,h,g,m,_,C,w;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.update_type,Y.info("push conference list ,updateType",n),0===t.result){e.next=5;break}return Y.info("subscribe conference list failed.result != 0"),e.abrupt("return");case 5:if(t.conf_list_info&&t.conf_list_info.length>0&&$dispatch(coreUi.changeConfPageShowType(!0)),0!==n&&void 0!==n){e.next=34;break}if(Y.info("get_conf_list result ="+t.result+"length="+t.conf_count),r=$getState().conf.conflist,!(t.conf_count>0)){e.next=23;break}if((0,f.default)(r)!==(0,f.default)(t.conf_list_info)){e.next=12;break}return e.abrupt("return");case 12:for(a=[],o=$getState().conf.currentConfInfo,i=0;i<t.conf_list_info.length;i++)s=t.conf_list_info[i].start_time,t.conf_list_info[i].start_time=Gt(s),c=t.conf_list_info[i].end_time,t.conf_list_info[i].end_time=Gt(c),a.push(t.conf_list_info[i].conf_id);u=window.getRoute(),-1===a.indexOf(o.conf_id)&&(Y.info("Conf:ID"+o.conf_id+" is over"),!window.CLIENTCONFIG.ISMOBILE&&$getState().conf.isShowPcConfInfo&&$dispatch(coreUi.changeShowPcConfInfoFlag(!1)),window.CLIENTCONFIG.ISMOBILE&&"mConferenceInfo"===u&&window.goRoute("main/conference")),t.conf_list_info.sort(qt),$dispatch(coreUi.changeconfList(t.conf_list_info)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&Vt(t.conf_list_info),vr(),e.next=32;break;case 23:if(0!==t.conf_count){e.next=32;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&Vt(t.conf_list_info),!isNullOrEmpty(r)){e.next=27;break}return e.abrupt("return");case 27:"Detail"===$getState().conf.curConfPage&&hn("Main"),$dispatch(coreUi.changeconfList([])),$dispatch(coreUi.changecurrentConfInfo([])),vr(),Y.info("subscribe conference list result.result = 0");case 32:e.next=48;break;case 34:Y.info("get conf list add"+t.result+"length="+t.conf_count),l=$getState(),p=l.conf.conflist,h=[].concat((0,d.default)(p)),g=t.conf_list_info[0],m=Gt(g.start_time),_=Gt(g.end_time),g.start_time=m,g.end_time=_,C=g.conf_id,w=h.findIndex(function(e){return e.conf_id===C}),1===n?(-1===w?h.push(g):(h.splice(w,1),h.push(g)),h.sort(qt)):2===n&&-1!==w&&h.splice(w,1),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&Vt(h),$dispatch(coreUi.changeconfList(h)),vr();case 48:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Gt=t.getConfTimedec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e.replace(/-/g,"/")),n=t.getTime(),r=6e4*t.getTimezoneOffset(),a=new Date(n-r).format("yyyy/MM/dd hh:mm");return Y.info("timeResult",a),a},Vt=(function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.conflist;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<a.length)){e.next=11;break}return n={account:a[t].scheduser_name},e.next=5,zt(n);case 5:r=e.sent,Y.info("searchContactByInfo success"),!1!==r&&(a[t].name=r[0].name,a[t].native_name=r[0].native_name);case 8:t++,e.next=1;break;case 11:$dispatch(coreUi.changeconfList(a));case 12:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,p,g,m,_,C,w,S,I,E,N,b,T;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.queryConfReady,r=$getState().conf.isEnableHistoryConfList,Y.info("enableHistory in update history conf list",r),r){e.next=5;break}return e.abrupt("return");case 5:n||(Y.info("querying db conf record"),$dispatch(coreUi.changeTempConfList(t))),a=$getState().conf.allConfList,o=a.filter(function(e){return!e.isInPast}),i=a.filter(function(e){return e.isInPast}),s=[],(0,h.default)(s,o),u=(0,h.default)({},t),f=0,l=0,d=25,Y.info("update all conf list"),p=0;case 17:if(!(p<s.length)){e.next=42;break}s[p].isInPast=!0,e.t0=v.default.keys(u);case 20:if((e.t1=e.t0()).done){e.next=32;break}if(g=e.t1.value,!u[g]||u[g].conf_id!==s[p].conf_id){e.next=30;break}if(s[p].isInPast=!1,!Ht({oldconf:s[p],newconf:u[g]})){e.next=28;break}return $t({oldconf:s[p],newconf:u[g]}),e.next=28,Yt(s[p]);case 28:return u[g]=null,e.abrupt("break",32);case 30:e.next=20;break;case 32:if(!(!0===s[p].isInPast&&new Date(s[p].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=39;break}return e.next=35,Yt(s[p]);case 35:Y.info("save conf record when conference end"),m=$getState().conf.allConfInfo,_=m.get(s[p].conf_id),_&&_.conf_list_info&&_.conf_list_info.guest_join_uri&&(_.conf_list_info.guest_join_uri="",gr(_.conf_list_info,_.attendee));case 39:p++,e.next=17;break;case 42:C=[],w=0;case 44:if(!(w<s.length)){e.next=56;break}if(!(!1===s[w].isInPast||new Date(s[w].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=49;break}C.push(s[w]),e.next=53;break;case 49:return S={},S.confid=s[w].conf_id,e.next=53,coreDb.delcallrecord(S);case 53:w++,e.next=44;break;case 56:s=C;for(I in u)u[I]&&(u[I].isInPast=!1,E=new Date(u[I].start_time.replace(/-/g,"/")).valueOf(),N=new Date(u[I].end_time.replace(/-/g,"/")).valueOf(),u[I].starttime=E,u[I].duration=N-E,s.push(u[I]),xt(u[I].conf_id,u[I].cycle_conf_id));if(!((f=i.length+s.length-(0,c.default)(u).length-d)>0)){e.next=72;break}Y.info("too many records, delete records count ",f),b=0;case 62:if(!(b<f)){e.next=71;break}return T={},T.confid=i[b].conf_id,Y.info("db test del conf record"),e.next=68,coreDb.delcallrecord(T);case 68:b++,e.next=62;break;case 71:i.splice(0,f);case 72:s.push.apply(s,i),s=jt(s),$dispatch(coreUi.changeAllConfList(s));case 75:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Ht=function(e){var t=e.oldconf,n=e.newconf;return t.start_time!==n.start_time||t.end_time!==n.end_time||t.conf_subject!==n.conf_subject||t.media_type!==n.media_type},$t=function(e){var t=e.oldconf,n=e.newconf;t.conf_subject=n.conf_subject,t.start_time=n.start_time,t.end_time=n.end_time,t.starttime=new Date(n.start_time.replace(/-/g,"/")).valueOf(),t.endtime=new Date(n.end_time.replace(/-/g,"/")).valueOf(),t.duration=t.endtime-t.starttime,t.media_type=n.media_type},jt=function(e){Y.info("sort all conf list by start time");var t=[];e.sort(qt),Y.info("sort all conf list by status");for(var n in e)!0===e[n].isInPast&&t.push(e[n]);for(var r in e)!1===e[r].isInPast&&t.push(e[r]);return t},qt=function(e,t){return new Date(e.start_time.replace(/-/g,"/")).valueOf()-new Date(t.start_time.replace(/-/g,"/")).valueOf()},Yt=(t.delConfRecord=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.allConfList,r=[],(0,h.default)(r,n),isNullOrEmpty(r)){e.next=15;break}a=0;case 5:if(!(a<r.length)){e.next=15;break}if(t.conf_id!==r[a].conf_id){e.next=12;break}return Y.info("del conf record, current conf count",r.length),r.splice(a,1),Y.info("del conf record, new conf count",r.length),$dispatch(coreUi.changeAllConfList(r)),e.abrupt("break",15);case 12:a++,e.next=5;break;case 15:return o={confid:t.conf_id},e.next=18,coreDb.delcallrecord(o);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("save conference record after delete those with same conf id"),e.next=3,coreDb.delcallrecord({confid:t.conf_id});case 3:return n={},(0,h.default)(n,t),e.next=7,coreDb.saveConfRecord(n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Kt=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r={},a=0;a<t.length;a++)r.number=t[a].number,r.name=t[a].name,n.push(r),r={};return e.abrupt("return",(0,f.default)(n));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Jt=(t.getInitHistoryConfList=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.changeQueryConfReady(!1)),e.next=3,coreAccount.getLoginModel();case 3:return t=e.sent,n={starttime:9999999999999,limitcount:50},e.next=7,coreDb.queryAllConfRecord(n);case 7:r=e.sent,r.reverse(),Y.info("db query all conf records count ",r.length),a=[],isNullOrEmpty(r)?Y.info("db test no conf record"):(a=Jt(r),window.CLIENTCONFIG.ENABLE_IT_MEETING&&t.isSupportAS&&hr(a),o=$getState().conf.conflist,a.push.apply(a,o),a=jt(a),$dispatch(coreUi.changeAllConfList(a))),$dispatch(coreUi.changeQueryConfReady(!0)),Y.info("change query ready true"),i=[],(0,h.default)(i,$getState().conf.tempConfList),0!==i.length&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&Vt(i);case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],o=isNullOrEmpty(a.exparams)?{}:JSON.parse(a.exparams),i=new Date(a.starttime).format("yyyy/MM/dd hh:mm"),s=new Date(a.starttime+a.duration).format("yyyy/MM/dd hh:mm");n.conf_id=a.confid,n.general_pwd=a.confpasscode,n.confmembers=isNullOrEmpty(a.confmembers)?{}:JSON.parse(a.confmembers),n.groupid=a.groupid,n.starttime=a.starttime,n.end_time=s,n.start_time=i,n.duration=a.duration,n.media_type=isNullOrEmpty(o.mtype)?0:parseInt(o.mtype),n.record_type=o.rtype?o.rtype:0,n.scheduser_name=o.sname,n.scheduser_number=o.snum,n.isInPast=o.past,n.conf_subject=o.subj,n.cycle_conf_id=o.ccid?o.ccid:"0",t.push(n),n={}}return t}),zt=t.searchContactByInfo=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryContact(t);case 2:if(n=e.sent,r=!1,n&&n.length>0?(Y.info("query from local success"),name&&name!==t.account&&(n=n.filter(function(e){return e.name===name})),n.length>1?n=[]:n.length<1&&(r=!0)):r=!0,!r){e.next=12;break}return Y.info("can not find in local, query contact from server"),e.next=9,coreContact.searchServerContact(t.account);case 9:a=e.sent,a.serverContactResult=a.userInformationList,void 0===a?n=!1:a.serverContactResult&&(Y.info("query contact from server success"),(0,h.default)(n,a.serverContactResult),name&&name!==t.account&&(n=n.filter(function(e){return e.name===name})),n.length>1&&(n=[]));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Qt=t.handleConfInfostate=function(e){$dispatch(coreUi.changeConfInfoState(e)),Y.info("isConfInfostate =",e)},Xt=t.handleConfMTnumber=function(e){Y.info("handleConfMTnumber = "+(0,f.default)(e));var t="M"+e.attendee_vc.mcu_num+"T0";$dispatch(coreUi.changevideoMultipicNum(t))},Zt=t.handleConfInfo=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g,m,_;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("handleConfInfo,data.result = ",t.result),n=void 0,0!==t.result){e.next=37;break}return n&&clearInterval(n),O.SvcAtdManager.reportConfInfo(t.get_conf_info_result),r=isNullOrEmpty(t.get_conf_info_result.conf_list_info)?{}:t.get_conf_info_result.conf_list_info,$getState().conf.confServerId&&$getState().conf.confServerId===r.conf_id&&r.guest_join_uri&&coreCommon.dispatchModuleEvent("pluginConfInfoNotify",(0,w.default)({},r)),Yn(r),a=t.get_conf_info_result.conf_list_info,o=a.chairman_pwd,i=a.conf_id,s=a.vmr_id,(""===o||isNaN(o))&&(o=a.general_pwd),c=isNullOrEmpty(s)?i:s,u={pstconfparam:{confid:c,access_code:a.access_number,conf_paswd:o},call_type:1},f=a.media_type,l=coreCommon.isVideoConf(f),d=$getState(),p=d.conf,h=p.confServerId,g=p.vmrId,Y.info("handleConfInfo，current confServerId is "+h+"getconfinfo return confid is "+i),h===i&&(m=a.general_pwd,m?window.CLIENTCONFIG.ISWIN&&N.NativeInterface.setParam({general_pwd:a.general_pwd,chairman_pwd:a.chairman_pwd,conf_pwd:o}):window.CLIENTCONFIG.ISWIN&&N.NativeInterface.setParam({general_pwd:"",chairman_pwd:a.chairman_pwd,conf_pwd:o})),un(0===t.get_conf_info_result.num_of_addendee?[]:t.get_conf_info_result.attendee),Y.info("conf info attendees count is :",t.get_conf_info_result.num_of_addendee),a.start_time=Gt(a.start_time),a.end_time=Gt(a.end_time),e.next=26,coreAccount.getLoginModel();case 26:_=e.sent,_.isSupportAS&&a.join_advance_time&&(a.join_advance_time=Gt(a.join_advance_time)),gr(a,t.get_conf_info_result.attendee),cn(a),Qt("success"),$dispatch(coreUi.changehasConfInfo("yes")),Pn(a.scheduser_name),window.lastSelectedId={confId:i,cycleId:a.cycle_conf_id},en(t),e.next=39;break;case 37:tn(t),t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED&&t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT&&t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR||ht();case 39:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),en=(function(){var e=(0,I.default)(v.default.mark(function e(t,n,r){var a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.access_number,t.start_time=Gt(t.start_time),(0,P.joinPairConf)(t);case 3:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.confServerId,r=3,t=setInterval((0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(n,"0");case 2:r--,0===r&&clearInterval(t);case 4:case"end":return e.stop()}},e,void 0)})),15e3);case 3:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get_conf_info_result.attendee,r=t.get_conf_info_result.conf_list_info.conf_id,isNullOrEmpty(n)){e.next=27;break}return Y.info("the length of attendeeList is",n.length),a=[],(0,h.default)(a,$getState().conf.allConfList),e.next=8,Kt(n);case 8:o=e.sent,i=0;case 10:if(!(i<a.length)){e.next=27;break}if(a[i].conf_id!==r||isNullOrEmpty(o)||!isNullOrEmpty(a[i].confmembers)&&a[i].confmembers.length===o.length){e.next=24;break}if(!(s=$getState().conf.queryConfReady)){e.next=24;break}if(a[i].confmembers=o,$dispatch(coreUi.changeAllConfList(a)),Y.info("change conf list when conf member updated, conf count ",a.length),!(new Date(a[i].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=23;break}return e.next=20,Yt(a[i]);case 20:Y.info("save conf record when update conf info"),e.next=24;break;case 23:Y.info("reject save conf record because of start time");case 24:i++,e.next=10;break;case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),tn=function(e){"success"!==$getState().conf.isConfInfostate&&Qt("fail");var t=$getState().conf.confSubject;Y.info("subscribe conference info fail.data = ",e);var n={access_number:"",chair_join_uri:"",chairman_UUID:"",chairman_pwd:"",conf_id:"",conf_state:2,conf_subject:t||"",cycle_conf_id:"",enable_conf_sign_in:0,end_time:"",general_pwd:"",guest_UUID:"",guest_join_uri:"",join_advance_time:"",media_type:2,record_aux_stream:0,record_type:0,scheduser_name:"",scheduser_number:"",sign_in_time_before_conf:0,size:0,start_time:"",token:"",vmr_id:""};$getState().conf.isShowPcConfInfo&&$dispatch(coreUi.changeShowPcConfInfoFlag(!1)),cn(n)},nn=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info(" dealTransferChairmanResult,data.param.ret = ",t.param.ret),n=0===t.param.ret?language.TRANSFER_CHAIRMAN_SUCCESS:language.TRANSFER_CHAIRMAN_FAILED,r=0===t.param.ret?"Right2":"",window.CLIENTCONFIG.ISWIN?coreConf.getSvcAtdManager().alertBox(n,3):window.Toast(n,2);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),rn=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.SvcAtdManager.callAttendeeResult(t.param);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),an=t.saveTempMediaxInfo=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.tempMediaxAddress,r=t.tempMediaxPort,Y.info("saveTempMediaxInfo: "+n+": "+r),a=[{key:"tempMediaxAddress",value:n},{key:"tempMediaxPort",value:r}],e.next=5,coreDb.saveLoginSettings({args:a});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),on=(t.getVRMList=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,t.isSipRegSuc()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,coreConf.getVMRListService();case 7:n=e.sent,Y.info("get getvmrlist = ",n);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("get As info from db"),e.next=3,coreDb.queryUserConfig({key:"asInfo"});case 3:if(t=e.sent,t.value){e.next=6;break}return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 6:return n=JSON.parse(t.value),Y.info("query asInfo from db",n),e.next=10,coreAccount.getLoginModel();case 10:return r=e.sent,r.isSupportAS=n,e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),sn=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return Y.info("getVmrInfoToDb is bigwin, return"),e.abrupt("return");case 3:return Y.info("getVmrInfoToDb"),e.next=6,coreDb.queryUserConfig({key:"vmrInfo"});case 6:if(t=e.sent,t.value){e.next=9;break}return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 9:if(n=JSON.parse(t.value),r=n.conference_right,Y.info("query confRight from db",r),0===r?$dispatch(coreUi.toggleConfRight(!1)):$dispatch(coreUi.toggleConfRight(!0)),""!==n.conf_id){e.next=18;break}$dispatch(coreUi.changehasVMRConfResult("NONE")),$dispatch(coreUi.changeShowVMRorNot(!1)),e.next=26;break;case 18:return $dispatch(coreUi.changeVMRConfResult(n)),$dispatch(coreUi.changeShowVMRorNot(!0)),$dispatch(coreUi.changeCurConfIDItem({idType:1,vmrId:n.vmr_id,confId:n.conf_id,confSubject:"",maxParties:0})),$dispatch(coreUi.setUseFixedConfIDState(!0)),e.next=24,coreDb.queryUserConfig({key:"curDBInfoForCreateConf"});case 24:a=e.sent,a.value&&(o=JSON.parse(a.value),i=$getState().conf.vmrConfResult,(s=(0,q.filterVmrConfListInfo)(i).filter(function(e){return e.confId===o.confId})[0])&&(!s.hasOwnProperty("vmrStatus")||s.hasOwnProperty("vmrStatus")&&!s.vmrStatus)&&($dispatch(coreUi.changeCurCreateConfIDItem({idType:o.idType,vmrId:o.vmrId,confId:o.confId,confSubject:o.confSubject,maxParties:o.maxParties})),$dispatch(coreUi.setCreateUseFixedConfIDState(o.isCreateUseFixedConfID))));case 26:return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 27:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),cn=(t.getVmrInfoToDbAtomic=new coreCommon.AtomicAction("getVmrInfoToDb",sn),t.getAsInfoToDbAtomic=new coreCommon.AtomicAction("getAsInfoToDb",on),t.oneJoinVMR=function(e){Y.info("enter conf one Key Enter vmr Conf");var t=e.access_number;if(coreCall.getCallCount()>0)return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),Y.error("oneJoinVMR already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);rr(t,e.conf_id,e.chairman_pwd,!0)},t.changeCurrentConfInfo=function(e){Y.info("change Current Conference Info ."),$dispatch(coreUi.changecurrentConfInfo(e))}),un=t.changeConfAttendeeInfo=function(e){Y.info("change Current Conference Attendee Info."),$dispatch(coreUi.changecurrentConfAttendeeInfo(e))};t.changeHistoryConfInfo=function(e){Y.info("change Current History Conference Info."),$dispatch(coreUi.changecurrentHistoryConfInfo(e))},t.changeHistoryAttendeeInfo=function(e){Y.info("change history conf attendee info"),$dispatch(coreUi.changeHistoryAttendeeList(e))},t.changeBookConfSubject=function(e){Y.info("change create conf subject"),$dispatch(coreUi.changeCreateConfSubject(e))},t.enterConfInConfInfo=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("enterConfInConfInfo"),""===s&&(Y.warn("enterConfInConfInfo input is null, so get from ducks"),s=$getState().conf.currentConfInfo),t=s.conf_subject,$dispatch(coreUi.changeConfSubject(t)),A.setSubject(t),n=s.media_type,r=coreCommon.isVideoConf(n),a=s.chairman_pwd,(""===s.chairman_pwd||isNaN(s.chairman_pwd))&&(Y.info("enterConfInConfInfo chair pwd is null"),a=s.general_pwd),o=isNullOrEmpty(s.vmr_id)?s.conf_id:s.vmr_id,i=s.access_number,rr(i,o,a,r);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.oneKeyEnterPairConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("oneKeyEnterPairConf"),""===o&&(o=$getState().conf.currentConfInfo),t=o.conf_subject,$dispatch(coreUi.changeConfSubject(t)),A.setSubject(t),e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=10;break}return e.next=9,window.isSimCardCall();case 9:e.t0=e.sent;case 10:if(!(n=e.t0)){e.next=16;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),Y.error("oneKeyEnterPairConf already in sim card call, can not create conf"),alert(language.PLEASE_HANG_UP_CALL),e.abrupt("return");case 16:if(!coreConf.isInConf()){e.next=20;break}return Y.error("oneKeyEnterPairConf already exist conference, can not create conf"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 20:return e.next=22,coreUi.checkMobileMultiDevice();case 22:if(!0!==(r=e.sent)){e.next=27;break}return Y.info("multi device logined, return"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 27:if(!(coreCall.getCallCount()>0)){e.next=31;break}return Y.error("oneKeyEnterPairConf already exist call, can not create conf"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 31:return Y.info("oneKeyEnterPairConf,enter conf oneKeyEnterConf"),a=o.access_number,e.next=35,coreCall.pairCallOut(o,{number:a});case 35:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyWithConfPas=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("enterConfByIdWithConfPas"),e.next=3,ae(!0,!1,f);case 3:if(n=e.sent,0===n.code){e.next=10;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),Y.error("enterConfByIdWithConfPas,resOfCheck is false"),e.abrupt("return",n);case 10:Y.info("enterConfByIdWithConfPas,resOfCheck is true");case 11:return r=t.confSubject?t.confSubject:"",G.showConfOutPage(!0,!1,r,""),a=t.confId?t.confId:"",o=t.confPas?t.confPas:"",i={confId:a,confPas:o},e.next=18,coreConf.enterConfByIdOnlyService(i);case 18:if(s=e.sent,0===(c=s.errorCode)){e.next=31;break}return Y.info("enterConfByIdWithConfPas fail, errorCode = "+c),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),u=j.getEnterConfByIdOnlyTip(c),G.closeConfPage(!1,!1,c,u),G.clearAfterConfEnd(!1,!1),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NOT_NEED),7===c&&ce(c),e.abrupt("return",{code:c,msg:u});case 31:return Y.error("enterConfByIdWithConfPas suc"),e.abrupt("return",j.CREATE_CONF_ERR.SUCCESS);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnly=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=t.conf.confAcsId,Y.info("enterConfByIdOnly"),e.next=5,ae(!0);case 5:if(r=e.sent,0===r.code){e.next=10;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),Y.error("enterConfByIdOnly,resOfCheck is false"),e.abrupt("return",!1);case 10:return G.showLoadingPage(),a=n,o=!$getState().conf.isOpenCameraDe,i=!$getState().conf.isOpenMicDe,s={confId:a,confPas:"",deviceSet:{isCloseCameraDe:o,isMuteMicDe:i}},e.next=17,coreConf.enterConfByIdOnlyService(s);case 17:if(c=e.sent,u=c.errorCode,f=c.isNeedPwd,l=c.accessNum,0!==u){e.next=28;break}return G.closeLoadingPage(),G.showConfOutPage(!0,!1,"",l),wn(constant.ONLINE_STATUS.BUSY),e.abrupt("return",!0);case 28:return G.closeLoadingPage(),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),f?(coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NEED),gn(l)):(coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NOT_NEED),11017===u&&vn(""),7===u&&ce(u),d=j.getEnterConfByIdOnlyTip(u),coreCommon.isNeedQuickFeedback(d)?window.confirm(d+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,d)}):alert(d)),e.abrupt("return",!1);case 32:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterConfById=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.confAcsId,r=t.confAcsNum,a=n,$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=8;break}if(""!==$getState().conf.confAcsNum){e.next=8;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),window.ToastNew(language.ENTER_CONF_ACS_ID_NULL,2),Y.info("enterConfById confAcs is null"),e.abrupt("return");case 8:return Y.info("enterConfById get conf pwd"),e.next=11,coreSecurity.getPasswordManager();case 11:return o=e.sent,e.next=14,o.getPassword("cnfAcsPassword");case 14:i=e.sent,s=isNullOrEmpty(i)?"":i,Y.info("enterConfById pre ok,then call out,change enter conf state true"),rr(r,a,s,!0);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterTempConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("enterTempConf"),""!==$getState().conf.confTempAcsId){e.next=4;break}return alert(language.ENTER_CONF_ACS_ID_NULL),e.abrupt("return");case 4:if(""!==$getState().conf.confTempAcsNum){e.next=7;break}return alert(language.ENTER_CONF_ACS_ID_NULL),e.abrupt("return");case 7:if(""!==$getState().conf.confTempAcsPas){e.next=10;break}return alert(language.ENTER_CONF_ACS_PAS_TIPS),e.abrupt("return");case 10:if(""!==$getState().conf.confTempAcsAccount){e.next=13;break}return alert(language.ENTER_CONF_TEMP_ACS_ACCOUNT_NULL),e.abrupt("return");case 13:return e.next=15,coreSecurity.getPasswordManager();case 15:return t=e.sent,e.next=18,t.getPassword("password");case 18:if(""!==(n=e.sent)){e.next=22;break}return alert(language.ENTER_CONF_TEMP_ACS_PWD_NULL),e.abrupt("return");case 22:return r={confAcsId:$getState().conf.confTempAcsId,confAcsNum:$getState().conf.confTempAcsNum,confAcsPas:$getState().conf.confTempAcsPas},Y.info("confAcsId :"+$getState().conf.confAcsId+",  confAcsNum:"+$getState().conf.confAcsNum+", confAcsPas: "+$getState().conf.confAcsPas+", tempConfdata :"+(0,f.default)(r)),$dispatch(coreUi.saveTempConfInfo(r)),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),e.next=29,coreAccount.login({isResume:!1,isTempLogin:!0});case 29:$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handleJoinTempConfNoNameWithConfId=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h,g,m,_,C,w,S,I,E,N;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=t.login,r=n.tempMediaxAddress,a=n.tempMediaxPort,o=n.tempSipAccount,i=n.tempsipPassword,s=n.tempSipNick,Y.info("handleJoinTempConfNoNameWithConfId tempMediaxAddress : "+r+", tempMediaxPort"+a),e.next=4,coreAccount.getLoginModel();case 4:if(c=e.sent,!c.isForceUpdate||!c.isPortalUpgrade){e.next=9;break}return Y.info("need upgrade before no login conference"),coreAccount.showUpdateHintsOrBar(),e.abrupt("return");case 9:if(!isNullOrEmpty(s)){e.next=12;break}return alert(language.NICKNAME_IS_REQUIRED),e.abrupt("return");case 12:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=17;break}return e.next=16,window.isSimCardCall();case 16:e.t0=e.sent;case 17:if(!(u=e.t0)){e.next=22;break}return Y.info("handleJoinTempConfNoNameWithConfId now is in sim card call"),alert(language.PLEASE_HANG_UP_CALL),e.abrupt("return");case 22:return e.next=24,coreCall.callPermissionCheck(!0);case 24:if(f=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),f){e.next=29;break}return Y.info("handleJoinTempConfNoNameWithConfId do not have permission for call"),e.abrupt("return");case 29:return e.next=31,coreCall.createVideoPreCheck();case 31:if(l=e.sent){e.next=34;break}return e.abrupt("return");case 34:if($dispatch(coreUi.changeEnterConfState(!0)),isNullOrEmpty(window.socketCloseResumePromise)){e.next=39;break}return e.next=38,window.socketCloseResumePromise;case 38:window.socketCloseResumePromise=null;case 39:return e.next=41,coreTup.getUportalInstance();case 41:return d=e.sent,e.next=44,coreAccount.setLoginProxy(d);case 44:if(p=$getState().login.isSupportCACertCheck,h=window.EXEC_PATH,!p){e.next=56;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=52;break}return e.next=50,d.loginSetTlsParamsEx(h,1);case 50:e.next=54;break;case 52:return e.next=54,d.loginSetTlsParams(h,1);case 54:e.next=63;break;case 56:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=61;break}return e.next=59,d.loginSetTlsParamsEx(h,0);case 59:e.next=63;break;case 61:return e.next=63,d.loginSetTlsParams(h,0);case 63:return g=r,m=parseInt(a),_=0,C=o,6!==C.length&&(_=1),e.next=70,coreAccount.queryMediaXaddrFromServer({uportalService:d,is_cms_addr:_});case 70:if(w=e.sent,w&&0===w.result?(g=w.mediaxAddr,m=w.mediaxPort,_=w.isCmsAddr,Y.info("handleJoinTempConfNoNameWithConfId queryMediaXaddrFromServer success mediaxAddr:",g,"mediaxPort:",m,"isCmsAddr:",_)):Y.info("handleJoinTempConfNoNameWithConfId queryMediaXaddrFromServer failed"),!isNullOrEmpty(g)){e.next=75;break}return alert(language.MAXHUB_LOGIN_INPUT_ADDRESS),e.abrupt("return");case 75:if(!isNullOrEmpty(m)){e.next=78;break}return alert(language.PORT_EMPTY),e.abrupt("return");case 78:return S=i,I=window.CLIENTCONFIG.ISMOBILE?1:0,E=1,coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreAccount.registerLoginEvent(),coreCall.registerCallEvent(),st.wait(),coreCall.registerVideoEvent(),e.next=90,coreConf.initializeDataConf();case 90:return(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN)&&(0,L.registerNativeWndEvent)(),an(),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.next=95,coreAccount.getLocalDNSIp({domain:g});case 95:return N=e.sent,isNullOrEmpty(N)||(g=N),c.urlOfGetSipInfo=g,e.abrupt("return",d.getTempUserInfoFromConfinfo(g,m,C,S,I,E,_));case 99:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleItConfRecord=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.conflist,n=null,r=!1,a=0;case 4:if(!(a<t.length)){e.next=13;break}if(t[a].conf_id!==i){e.next=10;break}return n=t[a],Y.info("handle it conf record find conf."),r=!0,e.abrupt("break",13);case 10:a++,e.next=4;break;case 13:r?(Y.info("handle it conf record one key enter conf"),or(n)):(Y.info("handle it conf record create a new conf"),window.handleItJoinMeeting(o,"2"));case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.handleItJoinMeeting=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,n="1",t=h,n=g,Y.info("handleItJoinMeeting, set isOffline false"),window.isOffline=!1,!t){e.next=38;break}r=[],a=0,o="",i=$getState(),s=i.myInfo,c=0;case 11:if(!(c<t.length)){e.next=36;break}if(u=t[c],u.calleeNumber=u.calleeNumber.replace(/-/g,"").replace(/\s*/g,""),u.contactsId||(u.contactsId=u.calleeNumber),f=u.contactsId,!(o.indexOf(f)>=0)){e.next=18;break}return e.abrupt("continue",33);case 18:l="",u.mobilePhones&&(l=u.mobilePhones.replace(/-/g,"").replace(/\s*/g,"")),r[a]={},o+=f,u.contactsId&&(r[a].account=u.contactsId),u.contactId&&(r[a].account=u.contactId),s.account||(d=appService.getItUserInfo(),s.account=d.contactsId),!s.account||s.account!==u.contactsId&&s.account!==u.contactId||u.name&&(Y.info("getITMeeting username is "+u.name.substr(0,1)+"***"),s.name=u.name),r[a].mobile=l,r[a].number=u.calleeNumber,r[a].bind_no=u.calleeNumber,r[a].name=u.name,r[a].email=u.email,Y.info("create a new conf. the urser number:"),a++;case 33:c++,e.next=11;break;case 36:p=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,"2"===n?oe(s,r,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,p):oe(s,r,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,p);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.updateItMeeting=function(e){coreAccount.getLoginModel().then(function(t){return t.set(e)})},window.handleJoinTempConfNoNamePreProcess=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.inAppBrowserRef&&window.inAppClosePage&&window.inAppClosePage(),e.next=3,coreAccount.getResumeEnable();case 3:if(n=e.sent){e.next=9;break}Y.info("[handleJoinTempConfNoNamePreProcess] now is is logout or kickout "+t),window.handleJoinTempConfNoName(t),e.next=16;break;case 9:if(Y.info("[handleJoinTempConfNoNamePreProcess] now is login"+t),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=15;break}return e.next=13,coreUi.checkMobileMultiDevice();case 13:r=e.sent,r&&Y.info("multi device handleJoinTempConfNoNamePreProcess");case 15:window.enterNoNameConfUrl=t;case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.handleJoinTempConfNoName=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("[handleJoinTempConfNoName] fromScanQrcode :"+u),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,params:[u?constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_SCAN_TO_JOIN:constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_LINK]}),window.setTimeout(function(){return window.dispatchEvent(new Event("closeOutSidePage"))},500),clearTimeout(window.openBrowerTimer),window.hasLoadConfig){e.next=8;break}return window.handleJoinTempConfNoNameURL=t,Y.info("[handleJoinTempConfNoName] has not loadconfig , do later :"+window.handleJoinTempConfNoNameURL),e.abrupt("return");case 8:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=18;break}return e.next=11,coreTup.getUportalInstance();case 11:return n=e.sent,e.next=14,coreAccount.setLoginProxy(n);case 14:return e.next=16,coreAccount.getNickName();case 16:e.next=19;break;case 18:t="cloudlinkpro://welinksoftclient/page/link?site_url="+t;case 19:if(Y.info("handleJoinTempConfNoName",t),r=coreCommon.getUrlVars(t),Y.info("uriValues",r),isNullOrEmpty(r.user_name)){e.next=25;break}return e.next=25,coreAccount.updateTempSipNick({name:decodeURI(r.user_name)});case 25:return a={sipOnlyurlInfo:{site_url:isNullOrEmpty(r.site_url)?"":decodeURIComponent(r.site_url.trim()),random:isNullOrEmpty(r.random)?"":decodeURIComponent(r.random.trim()),chairman:isNullOrEmpty(r.chairman)?"":decodeURIComponent(r.chairman.trim()),topology:isNullOrEmpty(r.topology)?"":decodeURIComponent(r.topology.trim())}},o=/https:\/\/([^\/]+)\//g,i=null,e.next=30,coreAccount.getLoginModel();case 30:if(s=e.sent,(i=o.exec(a.sipOnlyurlInfo.site_url))&&!isNullOrEmpty(i)&&i.length>1&&(c=i[1].split(":"),c.length>1?(s.tempNoNameMediaxAddress=c[0],s.tempNoNameMediaxPort=c[1]):(s.tempNoNameMediaxAddress=c[0],s.tempNoNameMediaxPort="443")),Y.info("urlInfo",a),s.set(a),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=45;break}return coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreAccount.registerLoginEvent(),coreCall.registerCallEvent(),st.wait(),coreCall.registerVideoEvent(),e.next=44,coreConf.initializeDataConf();case 44:(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN)&&(0,L.registerNativeWndEvent)();case 45:window.checkJoinTempConfNoName(t),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 48:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var fn=t.gettempuserinfo=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=5;break}return e.next=4,window.isSimCardCall();case 4:e.t0=e.sent;case 5:if(!(t=e.t0)){e.next=10;break}return alert(language.PLEASE_HANG_UP_CALL),Y.info("gettempuserinfo now is in sim card call"),e.abrupt("return");case 10:if(window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=14;break}return e.next=13,window.isHavePermission("AUDIO_AND_CAMERA_PERMISSION");case 13:window.isHavePerm||(window.getRoute()&&"main/conference"!==window.getRoute()&&window.goRoute("main/conference"),window.switchToFront());case 14:return e.next=16,coreCall.callPermissionCheck(!0);case 16:if(n=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),n){e.next=21;break}return Y.info("gettempuserinfo have no permission. "),e.abrupt("return");case 21:if($dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),r=window.CLIENTCONFIG.ISMOBILE?1:0,a=$getState().login,o=""===a.sipAccount?1:0,i=$getState().login,s=i.sipOnlyurlInfo.site_url,c=i.sipOnlyurlInfo.random,Y.info("gettempuserinfo",s,c,r,o),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=43;break}return u=s.split("/")[2],u.indexOf(":")>0&&(u=u.split(":")[0]),f="",e.next=36,coreDb.queryLoginSetting({key:u});case 36:l=e.sent,l&&l.value&&(f=l.value),isNullOrEmpty(f)||(s=s.replace(u,f)),Y.info("gettempuserinfo real:",s),e.next=43;break;case 43:return e.next=45,coreTup.getUportalInstance();case 45:return d=e.sent,e.abrupt("return",d.gettempuserinfo(s,c,r,o));case 47:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.checkJoinTempConfNoName=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g,m,_,C,w;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState(),r=n.login,a=r.account,o=r.serverAddress,i=r.serverPort,s=r.loginDisable,c=r.uportalLoginState,u=r.sipRegisterState,e.next=3,coreSecurity.getPasswordManager();case 3:return f=e.sent,e.next=6,f.getPassword("password");case 6:if(l=e.sent,Y.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+o+", serverPort: "+i),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=14;break}if(d=window.localStorage.getItem("isFirstInstall"),window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===d){e.next=14;break}return Y.info("[checkJoinTempConfNoName] local has First install before license, enter conf after access license"),window.enterNoNameConfUrl=t,e.abrupt("return");case 14:return p=coreCommon.getUrlVars(t),h={sipOnlyurlInfo:{site_url:isNullOrEmpty(p.site_url)?"":decodeURIComponent(p.site_url.trim()),random:isNullOrEmpty(p.random)?"":decodeURIComponent(p.random.trim()),chairman:isNullOrEmpty(p.chairman)?"":decodeURIComponent(p.chairman.trim())}},e.next=18,coreAccount.isAccountAutoLogin();case 18:if(g=e.sent,m=!1,window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=24;break}return e.next=23,window.stroage.isFastLogin();case 23:m=e.sent;case 24:if(!(coreConf.isInConf()||coreCall.getCallCount()>0)){e.next=28;break}return window.CLIENTCONFIG.ISMOBILE?alert(language.PREVENT_TWO_CALLS):window.Toast(language.PREVENT_TWO_CALLS,2,!1,null,"WhiteWarning"),window.enterNoNameConfUrl=null,e.abrupt("return");case 28:if(appService.showMainWindow(!0),(isNullOrEmpty(a)||isNullOrEmpty(l)||isNullOrEmpty(o)||isNullOrEmpty(i))&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=85;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=51;break}if(_=window.SERVERCONFIG,Y.info("[checkJoinTempConfNoName] Start , mode: [ HWUC "+_.HWUC+" ]"),_.HWUC!==constant.LOGIN_TYPE.BASE){e.next=50;break}if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING!==c){e.next=40;break}return Y.info("[checkJoinTempConfNoName]local has uportal, state: registering, enter conf later"),window.enterNoNameConfUrl=t,e.abrupt("return");case 40:if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS!==c){e.next=44;break}Y.info("[checkJoinTempConfNoName]local has uportal, state: registered"),e.next=48;break;case 44:return Y.info("[checkJoinTempConfNoName]local has uportal, state: register failed"),Y.info("[checkJoinTempConfNoName]local has not uportal, no sip"),ln(p),e.abrupt("return");case 48:e.next=51;break;case 50:_.HWUC,constant.LOGIN_TYPE.HWUC;case 51:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED!==u){e.next=62;break}return e.next=54,coreAccount.getLoginModel();case 54:return C=e.sent,C.sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP,Y.info("[checkJoinTempConfNoName]local has sip, state: registered"),window.enterNoNameConfUrl=null,fn(),e.abrupt("return");case 62:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING!==u){e.next=68;break}return Y.info("[checkJoinTempConfNoName]local has sip , state: registering"),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.enterNoNameConfUrl=null,fn()),e.abrupt("return");case 68:if(Y.info("[checkJoinTempConfNoName]local has sip, state register failed"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=73;break}return window.enterNoNameConfUrl=null,fn(),e.abrupt("return");case 73:if(!window.isOffline){e.next=77;break}return alert(language.OFFLINE_STATUS),window.enterNoNameConfUrl=null,e.abrupt("return");case 77:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=82;break}return e.next=80,coreUi.checkMobileMultiDevice();case 80:w=e.sent,w&&Y.info("multi device checkJoinTempConfNoName");case 82:window.enterNoNameConfUrl=t;case 83:e.next=99;break;case 85:e.next=91;break;case 91:if(!g){e.next=97;break}return Y.info("[checkJoinTempConfNoName] pc auto login, enter conf after sip registered"),window.enterNoNameConfUrl=t,e.abrupt("return");case 97:Y.info("[checkJoinTempConfNoName]local has not uportal, no sip"),ln(p);case 99:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var ln=function(e){if("1"===(e.chairman&&decodeURIComponent(e.chairman.trim())))return window.clearDialogQueue&&window.clearDialogQueue(),void alert(language.GET_SIP_FAILED_FOR_CHAIRMAN);$dispatch(coreUi.changeConfTempAcsNum("")),$dispatch(coreUi.changeConfTempAcsId("")),$dispatch(coreUi.changeConfTempAcsPas("")),$dispatch(coreUi.changeConfTempAcsNick("")),$dispatch(coreUi.changeConfTempAcsAccount("")),$dispatch(coreUi.changeConfTempAcsMemberTotal(0)),$dispatch(coreUi.changeConfTempAcsEndTime(0)),coreAccount.getLoginModel().then(function(e){e.sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_NO_UPORTAL_NO_SIP}),navigator.splashscreen&&navigator.splashscreen.hide(),isNullOrEmpty(e.user_name)||fn(),window.CLIENTCONFIG.ISMOBILE?window.goRoute("mJoinConfSIPOnly"):window.goRoute("login/joinConfSIPOnly")};window.handleJoinTempConf=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dn();case 2:if(n=e.sent,Y.info("window.handleJoinTempConf should get temp usr :"+n),!n){e.next=10;break}if(r=$getState(),a=r.login.account,isNullOrEmpty(a)){e.next=10;break}return Y.info("window.handleJoinTempConf, logout old im account"),e.next=10,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0);case 10:o=coreCommon.getUrlVars(t),i=o.site_address,s=o.confid,$dispatch(coreUi.changeConfTempAcsNum("")),$dispatch(coreUi.changeConfTempAcsId("")),$dispatch(coreUi.changeConfTempAcsPas("")),$dispatch(coreUi.changeConfTempAcsNick("")),$dispatch(coreUi.changeConfTempAcsAccount("")),$dispatch(coreUi.changeConfTempAcsMemberTotal(0)),$dispatch(coreUi.changeConfTempAcsEndTime(0)),n&&window.goRoute("mTempEnterConfPage"),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),c=!n,Y.info(" getTempConfInfo: confId : "+s+", eccmAddress:"+i+", hasAccount: "+c),u="https://"+i+"/v1/jointmpconf/gettmpaccount",f='{"conferenceid":"'+s+'","hasaccount": '+(c?1:0)+"}",appService.doHttpsPost(u,f);case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var dn=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,n=$getState(),r=n.login,a=r.account,o=r.serverAddress,i=r.serverPort,s=r.loginDisable,c=r.uportalLoginState,u=r.sipRegisterState,e.next=4,coreSecurity.getPasswordManager();case 4:return f=e.sent,e.next=7,f.getPassword("password");case 7:if(l=e.sent,Y.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+o+", serverPort: "+i),isNullOrEmpty(a)||isNullOrEmpty(o)||isNullOrEmpty(i)){e.next=45;break}if(d=window.SERVERCONFIG,Y.info("checkShouldUseTempUsrForTempConf Start , mode: [ HWUC "+d.HWUC+" ]"),d.HWUC!==constant.LOGIN_TYPE.BASE){e.next=27;break}if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING!==c){e.next=19;break}return Y.info("local has uportal, state: registering"),t=!0,e.abrupt("return",t);case 19:if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS!==c){e.next=23;break}Y.info("local has uportal, state: registered"),e.next=25;break;case 23:return t=!0,e.abrupt("return",t);case 25:e.next=28;break;case 27:d.HWUC,constant.LOGIN_TYPE.HWUC;case 28:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED!==u){e.next=34;break}return Y.info("local has sip, state: registered"),t=!1,e.abrupt("return",t);case 34:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING!==u){e.next=40;break}return Y.info("local has sip , state: registering"),t=!1,e.abrupt("return",t);case 40:return Y.info("local has sip, state register failed"),t=!0,e.abrupt("return",t);case 43:e.next=48;break;case 45:return Y.info("local has not uportal, no sip"),t=!0,e.abrupt("return",t);case 48:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleDoHttpsPostResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===t&&(t=""),t=decodeURIComponent(t),n="";try{n=JSON.parse(t)}catch(e){n="",Y.error("window.handleDoHttpsPostResult try catch error = "+(0,f.default)(e))}return e.next=6,dn();case 6:if(r=e.sent,isNullOrEmpty(n)){e.next=24;break}if(a=n.result,o=n.jointmpconfinfo,!isNullOrEmpty(a)){e.next=13;break}return alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),e.abrupt("return");case 13:if(0!==a.retCode&&isNullOrEmpty(o)){e.next=21;break}return e.next=16,pn(o,r);case 16:if(!1!==(i=e.sent)){e.next=19;break}return e.abrupt("return");case 19:e.next=22;break;case 21:14e3===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14000),r&&window.goRoute("loginCtn")):14001===a.retCode?(alert(language.END_CONFERENCE),r&&window.goRoute("loginCtn")):14002===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14002),r&&window.goRoute("loginCtn")):14003===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14003),r&&window.goRoute("loginCtn")):(alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),r&&window.goRoute("loginCtn"));case 22:e.next=28;break;case 24:alert(language.ENTER_CONF_TEMP_ACS_ERROR_NET_ERROR),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),r&&window.goRoute("loginCtn");case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var pn=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r,a,o,i,s,c;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),e.abrupt("return",!1);case 3:if(r=$getState(),a=r.login,o=a.account,i=a.serverAddress,s=a.serverPort,n){e.next=13;break}return $dispatch(coreUi.changeConfAcsNum(t.accessCode)),$dispatch(coreUi.changeConfAcsId(t.conferenceID)),e.next=9,mn(t.conferencePWD);case 9:coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),window.goRoute("mEnterConfPage"),e.next=31;break;case 13:if($dispatch(coreUi.changeConfTempAcsNum(t.accessCode)),$dispatch(coreUi.changeConfTempAcsId(t.conferenceID)),$dispatch(coreUi.changeConfTempAcsPas(t.conferencePWD)),$dispatch(coreUi.changeConfTempAcsMemberTotal(isNullOrEmpty(t.total)?0:t.total)),$dispatch(coreUi.changeConfTempAcsEndTime(isNullOrEmpty(t.endTime)?0:t.endTime)),isNullOrEmpty(t.tmpUsrAccount)?$dispatch(coreUi.changeConfTempAcsAccount(o)):$dispatch(coreUi.changeConfTempAcsAccount(t.tmpUsrAccount)),!isNullOrEmpty(t.tmpUsrPWD)){e.next=22;break}e.next=27;break;case 22:return e.next=24,coreSecurity.getPasswordManager();case 24:return c=e.sent,e.next=27,c.setPassword("password",t.tmpUsrPWD);case 27:isNullOrEmpty(t.uportalAddress)?$dispatch(coreUi.changeTempAcsUportalAddress(i)):$dispatch(coreUi.changeTempAcsUportalAddress(t.uportalAddress)),isNullOrEmpty(t.uportalPort)?$dispatch(coreUi.changetempAcsUportalPort(s)):$dispatch(coreUi.changetempAcsUportalPort(t.uportalPort)),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 31:return e.abrupt("return",!0);case 32:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),hn=t.changeConfPage=function(e){if(Y.info("userClick  create conf or join conf",e),window.CLIENTCONFIG.ENABLE_IT_MEETING&&"New"===e&&coreCall.getCallCount()>0)return Y.error("already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);"Detail"!==e&&(window.lastSelectedId={confId:"",cycleId:""}),$dispatch(coreUi.changeCurConfPage(e))},gn=t.toggleChangeConfAcsNum=function(e){$dispatch(coreUi.changeConfAcsNum(e))},vn=t.toggleChangeConfAcsId=function(e){$dispatch(coreUi.changeConfAcsId(e))},mn=t.toggleChangeConfAcsPas=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return n=e.sent,e.next=5,n.setPassword("cnfAcsPassword",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),_n=(t.toggleSetUseFixedConfIDState=function(e){$dispatch(coreUi.setUseFixedConfIDState(e))},t.toggleSetIsBookSendEmail=function(e){$dispatch(coreUi.changeIsBookSendEmail(e))},t.toggleSetIsBookSendSMS=function(e){$dispatch(coreUi.changeIsBookSendSMS(e))},t.toggleSetCreateUseFixedConfIDState=function(e){$dispatch(coreUi.setCreateUseFixedConfIDState(e))},t.toggleChangeMicState=function(){$dispatch(coreUi.changeMicState())},t.toggleChangeCamerState=function(){$dispatch(coreUi.changeCamerState())},t.toggleopenCamerState=function(){$dispatch(coreUi.openCamerState())},t.toggleClearEnterTempConfInfo=function(){$dispatch(coreUi.clearEnterTempConfInfo())},t.toggleShouldAutoEnterTempConf=function(){$dispatch(coreUi.changeShouldAutoEnterTempConf())},t.returnToConfWelPage=function(){$dispatch(coreUi.changeCurConfPage("Main")),coreCall.setNoMoveTrue()},function(){var e=$getState(),t=e.call,n=t.savedCalleeInfo,r=t.tempConfInfo;isNullOrEmpty(n)?isNullOrEmpty(r)||(Y.info(" handleSipRegSuc, CalloutForTempConf"),$dispatch(coreUi.saveTempConfInfo({})),coreCall.CalloutForTempConf(r.confAcsId,r.confAcsNum,r.confAcsPas),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(""))):n.bConf&&(Y.info(" handleSipRegSuc, actionCreateConf"),oe.apply(void 0,[n.selfInfo,n.memberList,n.groupInfo,n.mediaType,n.noPassword,!0].concat((0,d.default)(n.others))))});window.unRegister=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.sipUseByOther=!0,!window.webView){e.next=13;break}if(Y.info("it welink logout 1"),!window.webView.isItLogout()){e.next=9;break}return Y.info("it welink logout."),e.next=7,coreAccount.endCurrentCall();case 7:e.next=13;break;case 9:if(!window.webView.isSimCardCall()||""===$getState().call.callId){e.next=13;break}return window.dontUnregister=!0,Y.info("is sim card call no need unregister"),e.abrupt("return");case 13:window.dontUnregister=!1,coreAccount.sipserverDeregister(),Y.info("unRegister, set isOffline true"),window.isOffline=!0,Cn();case 18:case"end":return e.stop()}},e,void 0)}));var Cn=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isOffline){e.next=27;break}if(t=!coreConf.isInConf(),n=coreCall.getCallCount()<=0,Y.info("handleOfflineReLogin bNoConf: "+t+" bNoCall: "+n),!t||!n){e.next=7;break}return Y.debug("handleOfflineReLogin, no conf or call exit, do nothing"),e.abrupt("return");case 7:if(r=$getState(),a=r.conf.confHandle,o=r.call.callId,t||""===a){e.next=17;break}if(Y.info("handleOfflineReLogin, confHandle: "+a),i=coreConf.getSavedRecallInfo(),isNullOrEmpty(i)){e.next=15;break}return Y.info("handleOfflineReLogin,recallOrHangup"),coreCall.recallOrHangup(i,!0,""),e.abrupt("return");case 15:return e.next=17,Ve();case 17:if(n=coreCall.getCallCount()<=0){e.next=27;break}if(s=coreConf.getSavedRecallInfo(),isNullOrEmpty(s)){e.next=23;break}return Y.info("handleOfflineReLogin, recall not hangup call"),e.abrupt("return");case 23:Y.info("handleOfflineReLogin, callId: "+o),o&&coreCall.endCallService(o),coreCall.endCall(o),coreCall.deleteCallObject(o);case 27:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),wn=function(e,t){window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.webView&&(e===constant.ONLINE_STATUS.BUSY?window.webView.setTalkingState():window.webView.cancelTalkingState()),window.CLIENTCONFIG.USE_IM&&!window.isOffline&&coreAccount.publishStatus({status:e,desc:t}))},Sn=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(0,k.meetingHWreCallTimeOut)(t):(0,k.meetingHWLeaveConf)();case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),In=(t.showJoinMeetingBtn=function(){var e=$getState().call,t=e.showCallToolBar,n=e.callStatus;return!$getState().conf.showJoinButton||!(!t&&"VIDEO_CONNECTED"!==n&&"VIDEO_OUT"!==n&&"CALL_OUT"!==n&&"CALL_CONNECTED"!==n||!coreConf.isInConf())&&(Y.info("already exist conference, need to join the meeting button gray"),!0)},t.showOrDisabledBtn=function(){return!!$getState().conf.showJoinButton},function(e){if(0!==e.length){for(var t=[],n=0;n<e.length;n++)!function(n){var r=t.findIndex(function(t){return e[n].number?t.number===e[n].number:t.number===e[n].bind_no});-1===r?t.push(e[n]):!t[r].account&&e[n].account&&t.splice(r,1,e[n])}(n);return t}}),En=(t.clearPhoneContacts=function(){$dispatch(coreUi.clearPhoneAddrInfo())},t.handleSvcConfWatchRet=function(e){Y.info("handleSvcConfWatchRet =",e);window.CLIENTCONFIG.ISMOBILE;e.param.ret}),Nn=t.handleVideoWatchRes=function(e){0===e?(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,extraTrackKey:handlePhoneNumber(z),resultParams:[1],isTrackTimeCosts:!0}),Y.info("video watch suc,watchNum = "+handlePhoneNumber(z)),$dispatch(coreUi.changeVideoWatchNum(z))):(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,isTrackTimeCosts:handlePhoneNumber(z),resultParams:[0,e]}),10===e?(Y.error("video watch reason_code = 10,watchNum = "+handlePhoneNumber(z)),bn(""===z?"NATIVE_VIDEO_CANCEL_WATCH_FAIL_WHEN_CONFPAGE_OPEN":"NATIVE_VIDEO_WATCH_FAIL_WHEN_CONFPAGE_OPEN")):(Y.error("video watch reason_code = "+e+"watchNum = "+z),bn(""===z?!$getState().conf.isSvcConf&&coreConf.getIsAvcMultiViewBroadcast()?"NATIVE_FAILURE_CANCEL_WATCH_MULTIVIEWBROADCAST":"NATIVE_VIDEO_CANCEL_WATCH_FAIL":!$getState().conf.isSvcConf&&coreConf.getIsAvcMultiViewBroadcast()?"NATIVE_FAILURE_WATCH_MULTIVIEWBROADCAST":"NATIVE_FAILURE_ERR_TUP")))},bn=t.handleVideoWatchResMessageBox=function(e){if(Y.info("reacrd handleShowErrorMsgBox errorTile:",e),!isNullOrEmpty(e)){var t=$getState().conf,n=t.confHandle,r=t.isVideoConf;window.CLIENTCONFIG.ISWIN&&r&&!isNullOrEmpty(n)?O.SvcAtdManager.alertBox(e,2):alert(language[e])}},Tn=(t.handlePlatformMessageBox=function(e){Y.info("reacrd handleShowErrorMsgBox errorTile:",e),isNullOrEmpty(e)||(O.SvcAtdManager.isNativeUIExsit()?(Y.info("handlePlatformMessageBox1 isVideo"),O.SvcAtdManager.alertBox(e,2)):(Y.info("handlePlatformMessageBox2 "),alert(language[e])))},t.dealInviteAttendeeResult=function(e){$getState().synergismInfo.inPairConf&&(Y.info("BLE: in pair conf, deal invite attendee result, data=",e),(0,D.pairInviteAttendeeNotify)(e.param));var t=void 0;t=0===e.param.ret?[1]:[0,e.param.ret],coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,resultParams:t})});t.resetFirstInfoConferenceFlag=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return n={key:"isFirstInfoConf",value:t.toString()},Y.info("click the first info conference guide modal to"),e.next=6,coreDb.saveLoginSetting(n);case 6:$dispatch(coreUi.toggleFirstInfoConfModalShow(!1)),Y.info("The isFirstInfoConf flag save success");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initMobileFirstInfoConf=function(){var e=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreDb.queryLoginSetting({key:"isFirstInfoConf"});case 4:t=e.sent,void 0===t.value||""===t.value?(Y.info("isFirstInfoConf",t.value,!0),$dispatch(coreUi.toggleFirstInfoConfModalShow(!0))):(Y.info("isFirstInfoConf",t.true,!1),$dispatch(coreUi.toggleFirstInfoConfModalShow(!1)));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetFirstAcceptShareFlag=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return n={key:"isFirstAcceptShare",value:t.toString()},Y.info("click the first info conference guide modal to"),e.next=6,coreDb.saveLoginSetting(n);case 6:$dispatch(coreUi.toggleFirstsharingModalShow(!1)),Y.info("The isFirstAcceptShare flag save success");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initMobileFirstAcceptShare=function(){var e=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreDb.queryLoginSetting({key:"isFirstAcceptShare"});case 4:t=e.sent,void 0===t.value||""===t.value?(Y.info("isFirstAcceptShare",t.value,!0),$dispatch(coreUi.toggleFirstsharingModalShow(!0))):(Y.info("isFirstAcceptShare",t.true,!1),$dispatch(coreUi.toggleFirstsharingModalShow(!1)));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.mobileSendBfcp=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:t=e.sent,n=t.startData($getState().call.callId),r=0,a=1,n.then(function(e){0===e.result?Y.info("[bfcp] use tup send bfcp success"):Y.info("[bfcp] use tup send bfcp failed")}).catch(function(e){Y.info("[bfcp] startResult error",e)});case 6:case"end":return e.stop()}},e,void 0)})),window.mobileStopBfcp=(0,I.default)(v.default.mark(function e(){var t,n,r,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:t=e.sent,n=t.stopData($getState().call.callId),r=0,a=1,n.then(function(e){0===e.result?Y.info("[bfcp] use tup stop bfcp success"):Y.info("[bfcp] use tup stop bfcp failed")}).catch(function(e){Y.info("[bfcp] stopResult error",e)});case 6:case"end":return e.stop()}},e,void 0)}));var yn={uiFramesize:9,uiDecodeFrameSize:12},On={uiFrameRate:3,uiMinFrameRate:1},xn={ulDataRate:150,ulMinDataRate:150,ulMaxDataRate:150,ulMaxBw:300},An={bArs:1,bArsCtrlBitRate:1,bArsCtrlFec:0,bArsCtrlFrameRate:1,bArsCtrlFrameSize:0},Ln={ulHdEncoder:0,ulHdDecoder:0},kn={uiParamSetNumber:0,pstVideoH264QualityLevelParamSet:4};window.sendToTupConfig=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("set mobile bfcp config start"),e.next=3,coreTup.getCallInstance();case 3:t=e.sent,t.configToTupBfcp(285476352,yn),t.configToTupBfcp(285477120,On),t.configToTupBfcp(285476608,xn),t.configToTupBfcp(285344768,"106"),t.configToTupBfcp(285737472,0),t.configToTupBfcp(285738240,1),t.configToTupBfcp(285477632,An),t.configToTupBfcp(285281792,100),t.configToTupBfcp(285280768,5),t.configToTupBfcp(285476864,Ln),t.configToTupBfcp(285478656,kn),Y.info("set mobile bfcp config success");case 16:case"end":return e.stop()}},e,void 0)}));var Rn=(t.grabBfcpConfirm=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreConf.isConfChairMan()?(n=(0,w.default)({},t),window.confirm(language.OTHER_IS_SHARING_ISNOT_INSTEAD).then(function(e){if(e.ret){var t=$getState(),r=t.call,a=r.callStatus,o=r.isSwitchShareBfcp,i=t.conf.isEnterDataConf,s="VIDEO_OUT"===a||"VIDEO_CONNECTED"===a,c=o&&s;(!!window.CLIENTCONFIG.ENABLE_IT_MEETING||!c&&i)&&window.isMobileSupportScreenShare?window.startShareScreen():coreUi.showPopoverMenu(n,coreUi.popoverTypeMap.TYPE_VIDEO_SHARE,coreUi.videoShareClick),$dispatch(coreUi.changeShowBfcp(!0))}else $dispatch(coreUi.changeShowBfcp(!1))})):(Y.info("grabBfcpConfirm but not chairman"),alert(language.LANG_NATIVE_DATA_CONF_SOMEONE_SHARE_RIGHTNOW));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealAudientResult=function(e){if(Y.info("change Current Audient Status."),window.CLIENTCONFIG.ISMOBILE){var t=$getState().conf.isAudience;return Y.info("audience, meeting is audience, "+t),void(!1===t&&($dispatch(coreUi.changeAudientStatus(!0)),coreCall.changeDirectionForMobile(!1)))}$getState().conf.isAudience||($dispatch(coreUi.changeBidirectionStatus(!1)),$dispatch(coreUi.toggleSmallSvcVisible(!1)),coreCommon.MicControl.getInstance().muteMic(!0),coreCommon.SpkControl.getInstance().muteSpk(!1),coreCommon.CameraControl.getInstance().switchCameraStateAction(!1)),$dispatch(coreUi.changeAudientStatus(!0)),window.CLIENTCONFIG.ISWIN&&(0,E.notifyChangeAudientStatus)(e)}),Mn=t.dealChangeDirectionResult=function(e){if(Y.info("change Current direction result."),window.CLIENTCONFIG.ISMOBILE){var t=e.param.result;e.param.opration_type;if(Y.info("audience, change direction result = ",t),0!==t){var n=$getState().call.isBidirection,r=$getState().call.isDirecResult;if(n===r||!r)return void Y.info("audience jsNotify return, direction is isBidirection = ",n);var a=language.TALK_REQUEST_TOAST;window.confirm(a,{leftButton:language.LANG_NATIVE_CLOSE,rightButton:language.TALK_REQUEST_AGAIN}).then(function(e){e.ret?(Y.info("audience request change direction again "),Dn()):Y.info("audience close change direction")})}}else{var o=0;e&&e.param&&(o=e.param.result),o?Y.info("user change direction failed: "+o):Y.info("user change direction succeed."),$dispatch(coreUi.ChangeDirectionResult(o)),window.CLIENTCONFIG.ISWIN&&(0,E.notifyChangeActiveBidirectionStatus)(e)}},Dn=(t.actionActiveDirection=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("change Current Direction Status Active."),$dispatch(coreUi.ChangeDirectionResult(0)),e.next=4,coreConf.changeActiveDirection(t);case 4:if(!(n=e.sent)||0!==n.result){e.next=9;break}return e.abrupt("return",!0);case 9:return Y.error("change Current Direction Status failed: "+n.result),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionActiveDirectionForMobile=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().call.isBidirection,Y.info("audience , you want to change your direction,  isBidirection = "+t),e.next=4,coreConf.changeActiveDirection(!t);case 4:n=e.sent,0===n.result&&$dispatch(coreUi.changeAudienceDirecResult(!t)),Y.error("audience , you want to change your direction,  result = "+n.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Pn=t.setRecordScheduserName=function(e){$getState().call.callStatus===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED&&(Y.info("reacrd set conf setRecordScheduserName"),(0,R.setRecordSchednameLogic)(e))},Fn=t.isHasRecordPermission=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Y.info("reacrd isHasRecordPermission [recordType:"+e+"]");var t=$getState().conf,n=t.confHandle,r=t.isShowRecordType,a=t.selfRole;""!==e&&(r=e);var o=$getState().call.callStatus,i=$getState().login.deployMode;return Y.info("reacrd set determine if the meeting has permission to record [deployMode:"+i+"] [callStatus:"+o+"] [confHandle:"+n+"] [isShowRecordType:"+r+"] [selfRole:"+a+"]"),!isNullOrEmpty(n)&&1===a&&o===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED&&(1===r||2===r)},Un=t.getRecordStatus=function(){var e=$getState().conf.isReacrd;return Y.info("reacrd getRecordStatus [isReacrd:"+e+"]"),e},Bn=(t.clearRecordInfoHandle=function(){(0,R.clearRecordInfoLogic)()},t.actionCloudRecordRequest=function(){var e=(0,I.default)(v.default.mark(function e(t,n){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("reacrd actionCloudRecordRequest[2] messageId:",t,"switchType:",n),!isNullOrEmpty(n)){e.next=4;break}return Y.error("switchType is null or undefined"),e.abrupt("return");case 4:return r={messageId:t,switchType:n},e.next=7,coreConf.cloudRecordRequest(r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),Wn=t.handleSetRecordVideoResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("reacrd handleSetRecordVideoResult[2] data:",(0,f.default)(t)),n=t.param.result,r=n.switch_type,a=n.reson,o=n.record_type,i=n.result,Y.info("handleSetRecordVideoResult switch_type",r,"reson",a,"record_type",o,"result",i),0!==i){e.next=8;break}0===o&&1===r?(Y.info("start reacrd success"),(0,R.isReacrdLogic)(r),(0,R.haveRecordedLogic)(1)):0===o&&0===r&&(Y.info("stop reacrd success"),(0,R.isReacrdLogic)(r)),e.next=18;break;case 8:return Y.error("start/stop reacrd failed ",a),s={isReacrd:0},Y.info("setParam, switch_type = ",0),e.next=13,N.NativeInterface.setParam(s);case 13:c=e.sent,Y.info("setParam, res = ",c),u=null,u=0===a?language.NO_RECORDING_PERMISSION:1===a?language.CONFERENCE_RECORDING_IS_NOT_SUPPORTED:2===a?language.CONFERENCE_LIVE_BROADCAST_IS_NOT_SUPPORTED:50331819===a?language.START_RECORDING_FAILED_BY_NO_SERVICE:language.START_PAUSE_RECORDING_FAILED,jn(u);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Gn=t.handleVideoRecordResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("reacrd handleVideoRecordResult[2] data:",(0,f.default)(t)),n=t.param,r=n.switch_type,a=n.result,Y.info("handleVideoRecordResult switch_type",r,"result",a),o=$getState().conf.isShowRecordType,0!==a){e.next=9;break}1===r?(Y.info("start reacrd success"),(0,R.isReacrdLogic)(r,o),(0,R.haveRecordedLogic)(1)):0===r&&(Y.info("stop reacrd success"),(0,R.isReacrdLogic)(r,o)),e.next=18;break;case 9:return i={isReacrd:0},Y.info("setParam, switch_type = ",0),e.next=13,N.NativeInterface.setParam(i);case 13:s=e.sent,Y.info("setParam, res = ",s),c=null,c=11070003===a?language.SYSTEM_OPERATE_FAILED:11072021===a?language.CONFERENCE_RECORDING_RESOURCE_IS_NOT_ENOUGH:11072022===a?language.CONFERENCE_RECORDING_OPERATE_FAILED:11072023===a?language.CONFERENCE_RECORDING_NO_ATTENDE_IN:11072063===a?language.CONFERENCE_RECORDING_APPLY_RESOURCE:11072066===a?language.CONFERENCE_RECORDING_NOT_PURCHASE:11072067===a?language.CONFERENCE_RECORDING_NO_ENOUGH:15021001===a?language.CONFERENCE_RECORDING_MEDIA_RESOURCE_NOT_ENOUGH:language.START_PAUSE_RECORDING_FAILED,11072063===a&&window.CLIENTCONFIG.ISMOBILE?window.ToastNew(c):jn(c);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Vn=t.handleConfStateDirectBroadCastIndresult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("reacrd handleConfStateDirectBroadCastIndresult[2] data:",(0,f.default)(t)),(0,R.isReacrdLogic)(t.param.is_record),n={isReacrd:t.param.is_record},Y.info("setParam, data.param.isReacrd = ",t.param.is_record),e.next=6,N.NativeInterface.setParam(n);case 6:r=e.sent,Y.info("setParam, res = ",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Hn=t.handleRecordVideoStatusChairmanIndResult=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("reacrd handleRecordVideoStatusChairmanIndResult[2] data:",(0,f.default)(t)),!t||!t.param){e.next=12;break}return n=t.param.result,r=n.bro_rec_status,a=n.sup_bro_record,o=a||0,i=r||0,(0,R.isShowReacrdTypeLogic)(o),(0,R.isReacrdLogic)(i),s={isReacrd:i,recordType:o,isHaveRecordPriviledge:Fn(o)},e.next=10,N.NativeInterface.setParam(s);case 10:c=e.sent,Y.info("setParam, res = ",c);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$n=t.setRecordStatusForNative=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("setRecordStatusForNative"),t={isReacrd:Un(),recordType:$getState().conf.isShowRecordType,isHaveRecordPriviledge:Fn()},e.next=4,N.NativeInterface.setParam(t);case 4:n=e.sent,Y.info("setRecordStatusForNative setParam, res = ",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),jn=t.handleShowErrorMsgBox=function(e){if(Y.info("reacrd handleShowErrorMsgBox errorTile:",e),!isNullOrEmpty(e)){var t=$getState().conf,n=t.confHandle,r=t.isVideoConf;if(window.CLIENTCONFIG.ISWIN&&r&&!isNullOrEmpty(n)){var a=$getState().conf.videoFrameHwnd,o=A.getAvcFrameHandles(),i={frameHwnd:0!==a?a:o,dialog_type:1,content:e};(0,b.showMessageBox)(i)}else alert(e)}},qn=(t.AsErrorDeal=function(e){var t=language[constant.AS_ERRORCODE_LOG_INFO[e]];Y.error(" AsErrorDeal,errorCode "+e+"error msg "+t),alert(t||"unknow error")},t.handleMobileBfcpStatus=function(){Y.info("[bfcp] handleMobileBfcpStatus"),$dispatch(coreUi.changeSendBfcp(!1)),$dispatch(coreUi.changeReceiveBfcp(!1))}),Yn=(t.createMaxHubMeeting=function(){Y.info("maxhub create instant conference");var e=$getState(),t=parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.CreateDataConference"]),n=t?constant.CON_CREATE_MEETING_STATUS.DATA_MULTIMEDIA_TYPE:constant.CON_CREATE_MEETING_STATUS.VIDEO_TYPE;Y.info("maxhub create data conference flag: ",t+", mediaType:",n);var r=e.myInfo,a=getContactName(e.myInfo),o=a+language.CONFERENCE_SUBJECT_INFO,i=St(e.common.selectContactModal_selectedList);i.push(r);var s=In(i),c=e.conf.isReacrdSwitch&&2||0,u=constant.CONTACT_SELECT_DIALOG_TYPE.CONTACT_SELECT_DIALOG_TEMPMEETING;oe(r,s,{group_id:""},n,1,!0,o,u,c)},t.changeStatusOfConference=function(e){$dispatch(coreUi.changeStatusOfConf(e))},t.recoredOldPwd=function(e){$dispatch(coreUi.recoredOldPassword(e))},t.changeFlagClickJoinConfBtn=function(e){Y.info("click join-conf btn to join conference"),$dispatch(coreUi.changeflagClickJoinConfBtn(e))},t.recordConferencePasswordDetail=function(e){Y.info("record conference pwd"),e.conf_id===$getState().conf.confServerId&&$dispatch(coreUi.changeRecordConfPwdDetail(e))}),Kn=(t.recordConferenceOldId=function(e){Y.info("record conference recordConferenceOldId"),$dispatch(coreUi.changeRecordConferenceOldId(e))},t.recordFlagIsFirstTimeRun=function(e){Y.info("record conference recordFlagIsFirstTimeRun"),$dispatch(coreUi.changeFlagIsFirstTimeRun(e))},t.RecordIsIntoInterval=function(e){Y.info("record conference RecordIsIntoInterval"),$dispatch(coreUi.changeIsIntoInterval(e))},t.showConfInfo=function(e){var t=e.conf_id;window.lastSelectedId.confId;cn(e),xt(t,e.cycle_conf_id),coreUi.changeIsShowCopyTip(!1),un([])},function(e){Y.info("handleChangeConfHanlde in logic,hanlde = "+e),$dispatch(coreUi.changeConfHandle(e)),M.ToolbarManager.setConfHandle(e)}),Jn=function(e){$dispatch(coreUi.changeConfSubject(e)),window.CLIENTCONFIG.ISWIN&&(A.setSubject(e),$getState().conf.isSvcConf&&O.SvcAtdManager.setSubject(e))},zn=function(e){$dispatch(coreUi.changeCallId(e))},Qn=function(e){$dispatch(coreUi.changeConfRole(e))},Xn=function(e,t){$dispatch(coreUi.changeConfServerId(e)),O.SvcAtdManager.setConfServerId(isNullOrEmpty(t)?e:t),A.setConfServerId(isNullOrEmpty(t)?e:t)},Zn=function(e){Y.info("confInfoNotify vmrid is not empty. "),$dispatch(coreUi.changeVmrId(e))},er=function(){Y.info("handleChangeIsSvcConf true"),$dispatch(coreUi.changeIsSvcConf(!0)),G.changeIsSvcConf()},tr=function(e){Y.info("handlechangeSsrcRange ssrcRange",e),$dispatch(coreUi.changeSSRCRange(e))},nr=function(){window.pairId&&0!==window.pairId&&(Y.info("send maxhub pair join conf failed"),(0,F.sendJoinPairResult)(window.pairId,constant.PAIR_CONF_RESULT.INVALID)),Y.info("maxhubCheckConfType, not video conf, end the conf in maxhub"),Ve(),alert(language.MAXHUB_INVALID_CONF)},rr=t.oneKeyEnterConf=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r,a){var o,i,s,c,u,f,l,d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o={bConf:!0,bVideo:a,number:t,contactInfo:{number:t},enterConfParam:{pstconfparam:{confid:n,access_code:t,conf_paswd:r},call_type:1},isConsultTransfer:!1},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=9;break}return e.next=4,coreUi.checkMobileMultiDevice(o);case 4:if(!(i=e.sent)){e.next=9;break}return Y.info("multi device logined oneKeyEnterConf"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 9:return e.next=11,ae(a);case 11:if(s=e.sent,0===s.code){e.next=15;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 15:return G.showConfOutPage(a,!1,"",t),$dispatch(coreUi.saveCalleeInfo({})),c=!1,u=!1,c=!$getState().conf.isOpenCameraDe,u=!$getState().conf.isOpenMicDe,f={confAcs:t,confId:n,confPwd:r,isVideo:a,deviceSet:{isCloseCameraDe:c,isMuteMicDe:u},isVMR:d},e.next=24,coreConf.oneKeyEnterConfService(f);case 24:if(l=e.sent,$dispatch(coreUi.changeEnterConfState(!1)),!l){e.next=31;break}return Y.info("onekeyenterconf send to TUP suc"),e.abrupt("return",!0);case 31:return Y.info("onekeyenterconf send to TUP fails"),G.closeConfPage(!1,!1,-2,language.ENTER_CONF_FAIL),G.clearAfterConfEnd(!1,!1),e.abrupt("return",!1);case 35:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),ar=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r){var a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("callEnded, callId: "+r+"reason_code is "+t),a=j.getCallEndedErrorTip(t,n),G.closeConfPage(!1,!0,t,a),G.clearAfterConfEnd(!1,!0,t,!0);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),or=t.enterConfInConfList=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.info("enterConfInConfList: isPairConf:"+h),""===t&&(t=$getState().conf.currentConfInfo),n=t.access_number,r=t.conf_id,a={number:n,conf_id:r,cycle_conf_id:t.cycle_conf_id},o=t.media_type,i=coreCommon.isVideoConf(o),s={pstconfparam:{confid:t.conf_id,access_code:t.access_number,conf_paswd:""},call_type:1},c={bConf:!0,bVideo:i,number:n,contactInfo:a,enterConfParam:s,isConsultTransfer:!1},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=17;break}return e.next=12,coreUi.checkMobileMultiDevice(c);case 12:if(!(u=e.sent)){e.next=17;break}return Y.error("checkMultiDevice is false,cannot enterConfInConfList"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 17:return e.next=19,ae(i,h);case 19:if(f=e.sent,0===f.code){e.next=24;break}return Y.error("resOfCheck is false,cannot enterConfInConfList"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 24:return l=t.conf_subject,G.showConfOutPage(i,!1,l,""),$dispatch(coreUi.saveCalleeInfo({})),Y.info("enterConfInConfList,enter conf oneKeyEnterConf"),d={confId:a.conf_id,cycle_conf_id:a.cycle_conf_id},e.next=31,coreConf.enterConfInConfListService(d);case 31:if(p=e.sent){e.next=40;break}return Y.error("enterConfInConfList fail"),G.closeConfPage(!1,!1,-2,language.ENTER_CONF_FAIL),G.clearAfterConfEnd(!1,!1),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 40:$dispatch(coreUi.changeEnterConfState(!1)),wn(constant.ONLINE_STATUS.BUSY);case 42:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ir=(t.lockConfFuc=function(){window.confirm(language.LOCK_CONFERENCE_PROMPT).then(function(e){e.ret&&(Y.info("userClick lockConfFuc confirm"),coreConf.lockConfService(1))})},t.unlockConfFuc=function(){Y.error("userClick unlockConfFuc"),coreConf.lockConfService(0)},function(e){var t=void 0,n=!0,r=!1,a=void 0;try{for(var o,s=(0,i.default)(e);!(n=(o=s.next()).done);n=!0){var c=o.value;if(c.is_self){t=c.number;break}}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return t}),sr=t.compressreleasePreservate=function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=ir(t),e.next=4,Te(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Y.error("compressreleasePreservate:",e.t0);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),cr=(t.compressRemoveAttendee=function(){var e=(0,I.default)(v.default.mark(function e(t){var n,r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=-1,r=$getState().conf.memberListInfo,r.forEach(function(e){e.number===t&&(n=e.state)}),!(5===n||6===n&&window.isSupportiDo)){e.next=8;break}return e.next=6,Fe(t);case 6:e.next=10;break;case 8:return e.next=10,Pe(t);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.releaseChairmanFuc=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm(language.MEETING_WILL_HAVE_NO_CHAIRMAN).then(function(e){e.ret&&(Y.info("userClick  releaseChairmanFuc confirm"),sr(t))});case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestChairmanFuc=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=$getState().conf.memberListInfo,n=ir(t),(r=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=8;break}ur(),e.next=23;break;case 8:if(a=$getState().login.tempConfInfo,o=decodeURIComponent(escape(window.atob(a.chairman_pwd))),window.isSupportiDo){e.next=20;break}if(!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=17;break}return Y.info("SMC first Rest"),e.next=15,Oe(o,n);case 15:e.next=18;break;case 17:ur();case 18:e.next=23;break;case 20:return Y.info("SMC first iDo"),e.next=23,Oe(o,n);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),Y.error("requestChairmanFuc",e.t0);case 28:case"end":return e.stop()}},e,void 0,[[0,25]])}));return function(){return e.apply(this,arguments)}}()),ur=function(){var e=(0,I.default)(v.default.mark(function e(){var t,n,r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=$getState().conf.memberListInfo,n=$getState().login.deployMode,r=ir(t),window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISWIN?(a=$getState().conf.isShowMemberListNew,a?(o=$getState().conf.showqusetchairman)||$dispatch(coreUi.showqusetchairman()):window.CLIENTCONFIG.ISWIN?(coreUi.changeRightBtnDisabled(!0),window.notifyPrompt("",{isNotMessage:!0,placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(e){if(e.ret)lr(r,e.param.input_type_password),window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);else{var t=$getState().common.showResetfuc;t&&t(!1)}})):(coreUi.setMInputValueLogic(""),window.notifyPrompt(language.NATIVE_CHAIRMAN_PASSWORD,{placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(e){if("callMain"===window.getRoute()){var t=$getState().common.showResetfuc;t&&t()}e.ret&&(Y.info("userClick  confirmRequestPreservate"),fr(r,e.param.input_type_password),window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1))}))):window.notifyPrompt("",{isNotMessage:!0,placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(){var e=(0,I.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=5;break}return n=$getState().login.deployMode,e.next=4,Oe(t.param.input_type_password,r);case 4:window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}())}catch(e){Y.error("reRequestChairman",e)}case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),fr=function(){var e=(0,I.default)(v.default.mark(function e(t,n){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(n,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Y.error("compressRequestPreservate:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),lr=function(){var e=(0,I.default)(v.default.mark(function e(t,n){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(n,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Y.error("requestPreservate:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}();t.cloudRecordRequestFuc=function(){var e=(0,I.default)(v.default.mark(function e(t,n){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y.info("reacrd cloudRecordRequestFuc[1] messageId:",t,"switchType:",n),e.next=4,Bn(t,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Y.error("cloudRecordRequestFuc",e.t0);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}();window.stopRecallTimer=function(){B.terminateReCall()};var dr=(t.createConfByTeamList=function(){var e=(0,I.default)(v.default.mark(function e(t,n,r){var a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$getState(),o=a.myInfo,oe(o,n,r,t,!1);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.cancelConf=function(e){window.confirm(language.CONFIRM_TO_CANCEL_THE_CONF).then(function(){var t=(0,I.default)(v.default.mark(function t(n){return v.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ret){t.next=7;break}return Y.info("userClick confirmBtn to cancel the meeting"),t.next=4,kt.wait();case 4:coreConf.cancelConfService(e),t.next=8;break;case 7:Y.info("userClick cancelBtn to cancel the meeting");case 8:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}())},t.handleCancelConf=function(){var e=(0,I.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Y.info("handle cancel conf result:",t.param.error_code),pr(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),pr=t.createCancelConfEvent=function(e){var t=new Event("cancelInfoResult");t.data={ret:e},window.dispatchEvent(t)},hr=function(e){for(var t=0;t<e.length;t++){var n={},r=[];n.enable_conf_sign_in=0,n.conf_subject=e[t].conf_subject,n.start_time=e[t].start_time,n.end_time=e[t].end_time,n.media_type=e[t].media_type,n.conf_id=e[t].conf_id,n.general_pwd="",n.guest_pwd="";for(var a=0;a<e[t].confmembers.length;a++){var o={};o.role=0,o.name=e[t].confmembers[a].name,o.number=e[t].confmembers[a].number,r[a]=o}gr(n,r),$dispatch(coreUi.changehasConfInfo("yes"))}},gr=t.addToAllConfInfo=function(e,t){Y.info("add confInfo to AllConfInfo, confId = "+e.conf_id);var n=$getState().conf.allConfInfo,r={};r.conf_list_info=e,r.attendee=t,n.set(e.conf_id,r),$dispatch(coreUi.changeAllConfInfo(n))},vr=function(){Y.info("update AllConfInfo");var e=$getState().conf.isEnableHistoryConfList,t=[];t=e?$getState().conf.allConfList:$getState().conf.conflist;var n=$getState().conf.allConfInfo,r=!0,a=!1,o=void 0;try{for(var s,c=(0,i.default)(n);!(r=(s=c.next()).done);r=!0){for(var u=s.value,f=!1,l=0;l<t.length;l++)if(u[0]===t[l].conf_id){f=!0;break}f||(Y.info("delete confinfo in AllConfInfo, conf_id = "+u[0]),n.delete(u[0]))}}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}$dispatch(coreUi.changeAllConfInfo(n))};t.formatConfId=function(e){if(isNullOrEmpty(e))return"";for(var t=e.length,n="",r=0;r<t;r+=3){n+=e.substring(r,r+3)+" "}var a=n.split(" "),o=a[a.length-1].length;return o<1&&(n=n.substring(0,n.length-1-o),n+=a[a.length-1]),n},t.recordIsImGroupCreateConf=function(e){Y.info("record conference recordIsImGroupCreateConf"),$dispatch(coreUi.changeIsImGroupCreateConf(e))}},157:function(e,t,n){e.exports=n(0)(593)},158:function(e,t,n){n(22),n(159),e.exports=n(8).Array.from},159:function(e,t,n){"use strict";var r=n(11),a=n(10),o=n(130),i=n(32),s=n(33),c=n(27),u=n(160),f=n(26);a(a.S+a.F*!n(34)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,a,l,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,m=0,_=f(d);if(v&&(g=r(g,h>2?arguments[2]:void 0,2)),void 0==_||p==Array&&s(_))for(t=c(d.length),n=new p(t);t>m;m++)u(n,m,v?g(d[m],m):d[m]);else for(l=_.call(d),n=new p;!(a=l.next()).done;m++)u(n,m,v?i(l,g,[a.value,m],!0):a.value);return n.length=m,n}})},160:function(e,t,n){"use strict";var r=n(25),a=n(161);e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},161:function(e,t,n){e.exports=n(0)(79)},162:function(e,t,n){e.exports=n(0)(80)},165:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return v.default.reject(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginInfo=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.ErrorType=t.ErrorCode=t.EAErrorCode=t.UErrorCode=void 0;var o=n(119),i=r(o),s=n(4),c=r(s),u=n(5),f=r(u),l=n(120),d=r(l),p=n(121),h=r(p),g=n(3),v=r(g),m=n(1),_=r(m),C=n(2),w=r(C);t.LoginError=a;var S=(t.UErrorCode=constant.UPORTAL_LOGIN_ERROR,t.EAErrorCode=constant.EADDR_LOGIN_ERROR,t.ErrorCode=constant.LOGIN_COMMON_ERROR,t.ErrorType=constant.LOGIN_ERROR_TYPE,coreLogger.getLogger("logic")("login/model/login")),I=void 0,E=(t.getLoginModel=function(){var e=(0,w.default)(_.default.mark(function e(){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I||(I=new N(E)),e.abrupt("return",I);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getSyncLoginModel=function(){return I||(I=new N(E)),I},t.resetLoginModel=function(){I=null,S.info("<account_login>12_reset_loginmodel")},{shouldExitApp:"true",displayAccount:"",account:"",tenantid:"",verificationNumber:"",verificationCode:"",loadPwd:!1,folder:!0,showPwd:!1,showLangSet:!1,isSaveLangChange:!1,oldLangCode:"",isSaveAddress:!1,middleEndAddress:"",serverAddress:"",serverPort:"",_serverUportalAddress:"",_serverUportalPort:"",uportalLoginState:0,sipRegisterState:0,authToken:"",isRememberPassword:window.CLIENTCONFIG.ISMOBILE,isAutoLogin:!1,loginHistoryList:[],loginRecordList:[],isLoading:!1,loginDisable:!1,logoutDisable:!1,isCapslock:!1,isOffline:!1,passwordType:"",eabUri:"",groupServer:"",sipUri:"",svnUri:"",currentNum:0,mainSiteSum:0,httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,isFreeUser:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerLocal:"",sipServerPortLocal:0,eServerAddressAll:"",eServerAddress:"",eServerPort:0,socketMode:0,isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1,maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",shouldBuildStg:!1,isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,appstate:constant.APP_STATE.DISCONNECTED,funcType:0,deployMode:0,lastDeployMode:0,tmsServer:"",tmsAccount:"",tmsPwd:"",sipLoginOnly:!1,sipLoginissiptls:0,sipLoginissrtp:1,pushgwUri:"",sipOnlyType:0,isMultiDeviceLogined:!1,switchAccount:{},tempsipinfo:{},tempConfInfo:{},tempsipserverAddress:"",tempsipserverPort:"",tempMediaxAddress:"",tempMediaxPort:"",tempNoNameMediaxAddress:"",tempNoNameMediaxPort:"",tempSipAccount:"",tempSipNick:"",tempsipPassword:"",tempsipGetState:0,sipOnlyurlInfo:{},isSupportCACertCheck:!0,isShowShareRecommendationCircle:!0,sipTransMode:0,sipWhiteList:null,srtpMode:0,smcUri:"",certificateUrl:"",keysUrl:"",certificateName:"",selectCertificate:!0,mProveUrl:"",mkeysUrl:"",mProveName:"",mSelectProve:!0,mZipUrl:"",isIwb:!1,maxhubLoginError:{},euaServer:"",whetherInLoginRecordList:!1,showPullRecordList:!1,isCloudec:!1,isOAuth:!1,OAuthUrl:"",OAuthAccountUrl:"",changeItPasswordUrl:"",FrogetPwdUrl:"",FrogetPwdUrlPort:0,isFrogetRedriect:!1,forgetPwdAccount:"",sysProxyAddress:"",sysProxyPort:0,isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:"",proxyPort:"",proxyAccount:"",proxyPassword:"",real_user_account:"",itOAuthUrl:"",itSignedUrl:"",itUploadHeadImgUrl:"",isPortalUpgrade:!1,isWaitUpgrade:!1,isPortalAfterCallUpgrade:!1,progressPercent:-1,isUpdateError:!1,whatsNewCHN:"",whatsNewENG:"",showContentType:0,isForceUpdate:!1,downloadVersion:"",downloadUrl:"",isReqAddrChanged:!1,isSupportAS:!1,show_account:"",curPortalState:0,manMachineCode:{},isUserClickUploadComplaints:!1,canRecordConf:!1,ctdServerUri:"",confctrlUri:"",ssoLoginTypeCheckedValue:0,authType:0}),N=t.LoginInfo=function(e){function t(e){var n=this;(0,c.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.hasLoginCanceled=!1,r.useSip=!0,r.useEsight=!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,r.checkSipState=(0,w.default)(_.default.mark(function e(){var t;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isSipRegSuc()){e.next=2;break}return e.abrupt("return");case 2:return t=r,S.info("checkSipState: sip is not registered."),r.prepareSipForCallOrConf=!0,e.abrupt("return",new v.default(function(e){var n=5,r=setInterval(function(){(n<1||t.isSipRegSuc())&&(t.prepareSipForCallOrConf=!1,clearInterval(r),e()),n-=1,S.info("checkSipState: retry: "+(5-n))},1e3)}));case 6:case"end":return e.stop()}},e,n)})),r}return(0,h.default)(t,e),(0,f.default)(t,[{key:"notifyChanged",value:function(e){coreCommon.dispatchModuleEvent("login_model",e)}},{key:"isSipRegSuc",value:function(){return this.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED}},{key:"setLoginStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];S.info("[ setLoginStatus ] flag:",e,", result:",t,", isResume:",this.isResume);var n=void 0;e?n=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECTING:!0===t?n=constant.APP_STATE.ONLINE:!1===t&&(n=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECT_FAILED),this.set({loginDisable:e,appstate:n})}},{key:"setAppState",value:function(e){S.info("[ appstate ]",e),this.appstate=e}},{key:"getstate",value:function(e){return e?$getState().login[e]:$getState().login}},{key:"clearInLoginState",value:function(){this.set({isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1})}},{key:"update",value:function(e){this.dispatch(e)}},{key:"clearPassword",value:function(){this.password="",this.proxyPassword="",this.sipPassword=""}},{key:"serverUportalAddress",get:function(){return this._serverUportalAddress||this.serverAddress},set:function(e){this._serverUportalAddress=e}},{key:"serverUportalPort",get:function(){return this._serverUportalPort||this.serverPort},set:function(e){this._serverUportalPort=e}},{key:"loginType",get:function(){return window.SERVERCONFIG.HWUC},set:function(e){window.SERVERCONFIG.HWUC=e}},{key:"isMobile",get:function(){return window.CLIENTCONFIG.ISMOBILE},set:function(e){window.CLIENTCONFIG.ISMOBILE=e}},{key:"isHWUC",get:function(){return window.SERVERCONFIG.HWUC===constant.LOGIN_TYPE.HWUC},set:function(e){}},{key:"useIM",get:function(){return!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&window.CLIENTCONFIG.USE_IM},set:function(e){window.CLIENTCONFIG.USE_IM=e}},{key:"useMetting",get:function(){return window.CLIENTCONFIG.USE_MEETING},set:function(e){window.CLIENTCONFIG.USE_MEETING=e}},{key:"useEab",get:function(){return window.SERVERCONFIG.HWUC!==constant.LOGIN_TYPE.HWUC&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&!this.sipLoginOnly},set:function(e){}},{key:"asAddress",get:function(){return $getState().conf.asAddress}},{key:"OAuthClinetID",get:function(){return window.CLIENTCONFIG.IT_WELINK_CLIENT_ID},set:function(e){window.CLIENTCONFIG.IT_WELINK_CLIENT_ID=e}},{key:"defaultRoute",get:function(){if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)return"callMain";var e="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME;return $getState().menu.menuList&&$getState().menu.menuList instanceof Array&&$getState().menu.menuList[0]?!e&&$getState().menu.menuList.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+$getState().menu.menuList[0]:window.CLIENTCONFIG.MOBILE_MENU_LIST&&window.CLIENTCONFIG.MOBILE_MENU_LIST instanceof Array&&window.CLIENTCONFIG.MOBILE_MENU_LIST[0]?!e&&window.CLIENTCONFIG.MOBILE_MENU_LIST.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+window.CLIENTCONFIG.MOBILE_MENU_LIST[0]:e?"main/"+window.navMobileConfiglist[0].route:"main/"+window.navMobileConfiglist[1].route},set:function(e){}}]),t}(coreCommon.ModuleCache)},166:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SvcAtdManager=t.WatchRequestManager=t.DecoderManager=t.HwndManager=t.SsrcManager=t.Atdlogger=void 0;var o,i,s,c,u,f,l,d,p,h,g=n(143),v=a(g),m=n(141),_=a(m),C=n(135),w=a(C),S=n(191),I=a(S),E=n(403),N=a(E),b=n(150),T=a(b),y=n(1),O=a(y),x=n(2),A=a(x),L=n(69),k=a(L),R=n(123),M=a(R),D=n(4),P=a(D),F=n(153),U=n(186),B=r(U),W=(n(248),n(207)),G=n(194),V=n(208),H=r(V),$=n(330),j=n(286),q=coreLogger.getLogger("conf")("logic/video/svcManager");window.refreshAtdlistTimer=null,window.haveCreateVideoFrame=!1;window.lockHandleAtdlist=!1,window.reportOnlineAtdNumTimer=null;var Y=t.Atdlogger=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";if(t&&!isNaN(t.length))for(var a=0;a<t.length;a++)r=0===n?r+";name:"+(t[a]&&t[a].name?t[a].name.length>2?t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):t[a].name.substr(0,1)+"**":"")+",number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"")+",ssrc:"+(t[a]&&t[a].ssrc?t[a].ssrc:"")+",is_same_grade_mcu:"+(t[a]&&t[a].is_same_grade_mcu?t[a].is_same_grade_mcu:"")+",wnd_handle:"+(t[a]&&t[a].wnd_handle?t[a].wnd_handle:""):r+";name:"+(t[a]&&t[a].userInfo&&t[a].userInfo.name?t[a].userInfo.name.substr(0,1)+"**"+t[a].userInfo.name.substr(-1):"")+",number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"");q.info(e,r)},K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";if(t&&!isNaN(t.length))for(var a=0;a<t.length;a++)r=0===n?r+";number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"")+",ssrc:"+(t[a]&&t[a].ssrc?t[a].ssrc:"")+",width:"+t[a].width+",height:"+t[a].height:1===n?r+";render:"+t[a].render+",ssrc:"+(t[a]&&t[a].ssrc_id?t[a].ssrc_id:"")+",width:"+t[a].width+",height:"+t[a].height:r+";confName:"+(t[a]&&t[a].confName?t[a].confName.substr(0,1)+"**"+t[a].confName.substr(-1):"")+",hwnd:"+t[a].hwnd;q.info(e,r)},J=function(){var e=$getState().call.iSreceivingBFCP,t=$getState().conf,n=t.bfcpFrameHwnd,r=t.bfcpIsBigHwnd,a=t.dataIsBigHwnd;return q.info("iSreceivingBFCP = "+e+", bfcpFrameHwnd = "+n+", bfcpIsBigHwnd = "+r),q.info("coreConf.isDataShareStarted()  = "+coreConf.isDataShareStarted()+", dataIsBigHwnd = "+a),!0===e&&n>0&&r||!0===coreConf.isDataShareStarted()&&!0===a},z=t.SsrcManager=(i=o=function e(){(0,P.default)(this,e)},o.addSvcSSRC=function(e){var t=$getState().conf.usedSsrcList,n=(0,M.default)([],t);return n.push(e),$dispatch(coreUi.changeUsedSvcSSRCList(n)),q.info("used ssrc list is "+(0,k.default)(n)),e},o.removeSvcSSRC=function(e){if(q.info("removeSSRC: "+e,e),-1===e)return!1;var t=$getState().conf.usedSsrcList,n=(0,M.default)([],t),r=n.indexOf(e);return-1===r?(q.info("unexpected removeSSRC",n,e),!1):(n.splice(r,1),$dispatch(coreUi.changeUsedSvcSSRCList(n)),!0)},o.clearAllSvcSSRC=function(){q.info("clearAllSvcSSRC"),$dispatch(coreUi.changeUsedSvcSSRCList([]))},o.assignSsrc=function(e){var t=$getState().conf,n=t.ssrcRange,r=t.usedSsrcList,a=constant.SVC_SSRC_FLAG.LOCAL_SSRC;if(0===e.is_self){for(a=n.max;r.indexOf(a)>=0;)a--;if(a<n.min)return q.info("assignSsrc ssrc "+a+" is not include in ssrcRange "+n.min+"-"+n.max),null}return z.addSvcSSRC(a),a},o.updateAllSsrcOfAtds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];z.clearAllSvcSSRC();for(var t=0;t<e.length;t++){var n=z.assignSsrc(e[t]);e[t].ssrc=n}return Y("updateAllSsrcOfAtds,new svcAtd is",e),e},i),Q=t.HwndManager=(c=s=function e(){(0,P.default)(this,e)},s.createHwndsByType=function(){var e=(0,A.default)(O.default.mark(function e(t,n,r){var a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createHwndsByType start, count = "+t+", hwnd = "+n),!(t<=0)){e.next=3;break}return e.abrupt("return");case 3:return a=$getState().conf.videoFrameHwnd,e.next=6,W.NativeInterface.createWindows(a,t,n,r);case 6:return o=e.sent,Q.handleChangeSvcWndHandles(o),q.info("createHwndsByType end,hwndList = "+(0,k.default)(o)),e.abrupt("return",o);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),s.createHwnds=function(){var e=(0,A.default)(O.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createHwnds start, count = "+o+", hwnd = "+i),!(o<=0)){e.next=3;break}return e.abrupt("return");case 3:for(t=$getState().conf.videoFrameHwnd,n=new Array,r=0;r<o;r++)n.push({type:constant.SVC_HWND_TYPE.SMALL_VIDEO});return e.next=8,W.NativeInterface.createWindows(t,o,i,n);case 8:return a=e.sent,Q.handleChangeSvcWndHandles(a),q.info("createHwnds end,hwndList = "+(0,k.default)(a)),e.abrupt("return",a);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.createBigHwnds=function(){var e=(0,A.default)(O.default.mark(function e(){var t,n,r,a,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createBigHwnds start, count = "+i+", hwnd = "+s),t=$getState().conf,n=t.videoFrameHwnd,r=t.svcWndHandles,!window.haveCreateBigWnd){e.next=4;break}return e.abrupt("return");case 4:return window.haveCreateBigWnd=!0,a=[{type:constant.SVC_HWND_TYPE.BIG_VIDEO}],r&&r.length>0&&(s=r[0].hwnd),e.next=9,W.NativeInterface.createWindows(n,i,s,a);case 9:return o=e.sent,Q.handleChangeSvcWndHandles(o),o&&o[0].type===constant.SVC_HWND_TYPE.BIG_VIDEO?($dispatch(coreUi.changeBigHwnd(o[0].hwnd)),window.haveCreateBigWnd=!1):(q.info("big hwnd create failed"),window.haveCreateBigWnd=!1),q.info("createBigHwnds end,hwndList = "+(0,k.default)(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.updateHwnds=function(){var e=(0,A.default)(O.default.mark(function e(t,n){var r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("updateHwnds start, deleteHwnds = "+(0,k.default)(t)+",create = "+(0,k.default)(n)),r=$getState().conf.videoFrameHwnd,e.next=4,W.NativeInterface.updateWindows(r,t,n);case 4:return a=e.sent,Q.handleChangeSvcWndHandles(a),q.info("updateHwnds end,hwndList = "+(0,k.default)(a)),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),s.destoryHwnds=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("destoryHwnds: "+t),0!==t.length){e.next=3;break}return e.abrupt("return");case 3:return n=$getState().conf.videoFrameHwnd,e.next=6,W.NativeInterface.destoryWindows(n,t);case 6:return r=e.sent,Q.handleChangeSvcWndHandles(r),q.info("destoryHwnds end: hwndList = "+(0,k.default)(r)),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),s.clearAllHwnds=function(){var e=(0,A.default)(O.default.mark(function e(){var t,n,r,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.videoFrameHwnd,n=Q.getAllHwnds(a),e.next=4,W.NativeInterface.destoryWindows(t,n);case 4:return r=e.sent,Q.handleChangeSvcWndHandles(r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.getAllHwnds=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=$getState().conf,n=t.svcWndHandles,r=t.svcViewMode,a=t.maxSizeForPage;if(!n)return q.info("svcWndHandles is null"),new Array;for(var o=new Array,i=0;i<n.length;i++)if(e)o.push(n[i].hwnd),$dispatch(coreUi.changeBigHwnd(0));else{if(1===n[i].type)continue;o.push(n[i].hwnd)}return r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.minModeKeepWndNum>0&&o.splice(a-ee.minModeKeepWndNum),q.info("getAllHwnds,wndhandles = ",o),o},s.handleChangeSvcWndHandles=function(e){$dispatch(coreUi.changeSvcWndHandles(e))},c),X=t.DecoderManager=(f=u=function e(){(0,P.default)(this,e)},u.createAllWndDecoders=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.svcViewMode,r=$getState().call.callId,(a=X.createDecoderListFactory(n,t))&&0!==a.length){e.next=6;break}return q.info("videoWindowList is nulll or zero!"),e.abrupt("return");case 6:return K("createAllWndDecoders videoWindowList is",a,1),e.next=9,coreCall.setAllSvcVideoWindows(a.length,r,a);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),u.createDecoderListFactory=function(e,t){var n=new Array;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n=X.createBigSmallDecoderList(e,t);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n=X.createDivideDecoderList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:n=X.createPicInPicDecoderList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:n=X.createMinSingleDecoderList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:n=X.createMinVerticalDecoderList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:n=X.createMinSingleDecoderList(e);break;default:q.info("SvcViewMode is error,please check!")}return n},u.createBigSmallDecoderList=function(e,t){if(!t)return void q.info("svcShowAttendances is null");var n=X.createSmallWndDecoders(t),r=X.createBigWndDecoders(e);return r&&r.length>0&&n.splice(0,0,r[0]),n},u.createDivideDecoderList=function(e){return e?X.createSmallWndDecoders(e):void q.info("svcShowAttendances is null!")},u.createPicInPicDecoderList=function(e){var t=new Array;return J()||(t=X.createBigWndDecoders(e)),t},u.createMinSingleDecoderList=function(e){return X.createBigWndDecoders(e)},u.createMinVerticalDecoderList=function(e){return e?X.createSmallWndDecoders(e):void q.info("svcShowAttendances is null!")},u.closeAllWndDecoders=(0,A.default)(O.default.mark(function e(){var t;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("closeAllWndDecoders"),t=[{render:0,ssrc_id:0,width:0,height:0}],e.next=4,coreCall.setAllSvcVideoWindows(t.length,$getState().call.callId,t);case 4:case"end":return e.stop()}},e,void 0)})),u.createBigWndDecoders=function(e){q.info("createBigWndDecoders start");var t=$getState().conf,n=(t.svcBigPicInfo,t.ssrcRange),r=t.bigHwnd,a=t.svcDesktopSpeakerBigMaxLook,o=t.svcMaxWatchResolution,i=t.svcOnLineAttendances,s=(t.isSvcSelectMode,constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720);window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(s=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360),e===constant.SVC_VIEW_MODE.MIN_WIN_MIN||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT?s=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90):e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE?s=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180):e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE&&(s=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),isNullOrEmpty(a)||0===a.width||0===a.height||(s=Z.getRealResolution(s,a),q.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchRatio= ",s)),s=Z.getRealResolution(s,o),q.info("bigWatchRatio.width:"+s.width+",bigWatchRatio.height:"+s.height+", svcViewMode = "+e);var c=new Array,u=n.min,f=r;i.length<=1&&(f=0);var l=$getState().conf.isStopSvcSelect;q.info("createBigWndDecoders isStopSvcSelect:",l," checkIsNeedBigWatch():",J());var d=void 0;return d=l||J()?X.windowTemplate(f,0,0,0):X.windowTemplate(f,u,s.width,s.height),q.info("createBigWndDecoders videoWindow:",d),c.push(d),q.info("createBigWndDecoders end,bigWndDecoders = "+(0,k.default)(c)),c},u.createSmallWndDecoders=function(e){q.info("createSmallWndDecoders start");for(var t=($getState().conf.svcWndHandles,new Array),n=Z.getSvcWatchRatio(),r=0;r<e.length;r++)if(!(1===e[r].is_self||e[r].ssrc<0)){var a=$getState().conf.isStopSvcSelect;q.info("createSmallWndDecoders isStopSvcSelect:"+a);var o=X.windowTemplate(e[r].wnd_handle,0,0,0);a||(o=X.windowTemplate(e[r].wnd_handle,e[r].ssrc,n.width,n.height)),q.info("createSmallWndDecoders videoWindow:",o),t.push(o)}return q.info("createSmallWndDecoders end,smallWndDecoders = "+(0,k.default)(t)),t},u.windowTemplate=function(e,t,n,r){return{render:e,ssrc_id:t,width:n,height:r}},f),Z=t.WatchRequestManager=(d=l=function e(){(0,P.default)(this,e)},l.getSvcWatchRatio=function(){var e=$getState().conf,t=e.svcShowAttendances,n=e.svcViewMode,r=e.isSvcBroadcastMode,a=e.audioVideoNum,o=window.CLIENTCONFIG.ISBIGWIN?a.video-1:t.length-1;window.CLIENTCONFIG.ISBIGWIN&&r&&(o=1);var i=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90);if(n===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL)i=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);else if(n===constant.SVC_VIEW_MODE.DIVIDE_MODE){if(1===o)i=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720,window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(i=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);else if(o>=2&&o<=6){i=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);var s=$getState().conf.svcDesktopDivideModeMaxLook2_6;i=Z.getRealResolution(i,s)}else if(o>=7&&o<=16){i=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var c=$getState().conf.svcDesktopDivideModeMaxLook7_16;i=Z.getRealResolution(i,c)}else if(o>16){i=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var u=$getState().conf.svcDesktopDivideModeMaxLook17_24;i=Z.getRealResolution(i,u)}}else if(n===constant.SVC_VIEW_MODE.BIG_SMALL_MODE){i=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var f=$getState().conf.svcDesktopSpeakerModeSmallMaxLook;i=Z.getRealResolution(i,f)}q.info("svcWatchRatio.width:"+i.width+",svcWatchRatio.height:"+i.height+", svcViewMode = "+n);var l=$getState().conf.svcMaxWatchResolution;return i=Z.getRealResolution(i,l)},l.getRealResolution=function(e,t){var n=e;return!isNullOrEmpty(t)&&(t.width>0||t.height>0)&&n.width>t.width&&n.height>t.height&&(n.width=t.width,n.height=t.height,q.info("[getRealResolution]Svc_Esight_Config Destop esightConfigRes is worked,watchSize= ",n)),n},l.sendSvcWatchRequest=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i,s;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee.getSelfNumber(),r=$getState().conf,a=r.svcViewMode,o=r.isStopSvcSelect,K("sendSvcWatchRequest svcViewMode is",a),i=Z.createWatchListFactory(a,t,o),K("sendSvcWatchRequest watchAttendees is",i,0),s={attendeeList:i,selfNum:n},e.next=8,coreConf.sendWatchSvcRequestService(s);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),l.createWatchListFactory=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Array;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:q.info("go into constant.SVC_VIEW_MODE.BIG_SMALL_MODE!"),r=Z.createBigSmallWatchList(e,t);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:q.info("go into constant.SVC_VIEW_MODE.DIVIDE_MODE!"),r=Z.createDivideWatchList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:q.info("go into constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE!"),r=Z.createPicInPicWatchList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:q.info("go into constant.SVC_VIEW_MODE.MIN_WIN_SINGLE!"),r=Z.createMinSingleWatchList(e,n);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:q.info("go into constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL!"),r=Z.createMinVerticalWatchList(t,n);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:q.info("go into constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE!"),r=Z.createMinSingleWatchList(e,n);break;case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:q.info("go into constant.SVC_VIEW_MODE.MIN_WIM_FLOAT!"),r=Z.createMinSingleWatchList(e,n);break;default:q.info("SvcViewMode is Error,please check!")}return r},l.createBigSmallWatchList=function(e,t){if(!t)return void q.info("createBigSmallWatchList,svcShowAttendances is null!");var n=Z.createSmallWatchList(t),r=new Array;return J()||(r=Z.createBigWatchList(e)),r&&r.length>0&&n.splice(0,0,r[0]),n},l.createDivideWatchList=function(e){return e?Z.createSmallWatchList(e):void q.info("createDivideWatchList,svcShowAttendances is null!")},l.createPicInPicWatchList=function(e){var t=new Array;if(J()){var n=Z.watchTemplate("",0,0,0);t.push(n)}else t=Z.createBigWatchList(e);return t},l.createMinSingleWatchList=function(e,t){return Z.createBigWatchList(e,t)},l.createMinVerticalWatchList=function(e,t){return e?Z.createSmallWatchList(e,t):void q.info("createMinVerticalWatchList,svcShowAttendances is null!")},l.createBigWatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q.info("createBigWatchList");var n=$getState().conf,r=n.svcOnLineAttendances,a=n.svcBigPicInfo,o=n.ssrcRange,i=n.isSvcSelectMode,s=n.svcDesktopSpeakerBigMaxLook,c=n.svcMaxWatchResolution,u=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720);window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(u=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),e===constant.SVC_VIEW_MODE.MIN_WIN_MIN||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT?u=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90):e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE?u=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180):e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE&&(u=(0,M.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),isNullOrEmpty(s)||0===s.width||0===s.height||(u=Z.getRealResolution(u,s),q.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchRatio= ",u)),u=Z.getRealResolution(u,c),q.info("bigWatchRatio.width:"+u.width+",bigWatchRatio.height:"+u.height+", svcViewMode = "+e+",isStopSvcSelect:"+t);var f=new Array,l="",d=o.min;if(e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&2===r.length){for(var p=0;p<r.length;p++)if(1!==r[p].is_self){l=r[p].number;break}}else i&&a&&(l=a.number);var h=Z.watchTemplate("",0,0,0);return t||(h=Z.watchTemplate(l,d,u.width,u.height)),f.push(h),f},l.createSmallWatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q.info("createSmallWatchList");for(var n=$getState().conf,r=n.isSameGradeMcu,a=n.isBigConf,o=n.svcShowPage,i=n.isSvcMultiViewBroadcast,s=n.broadcastIsMultiview,c=new Array,u=Z.getSvcWatchRatio(),f=0;f<e.length;f++)if(!(1===e[f].is_self||e[f].ssrc<0)){var l=e[f].number;0===r&&0===e[f].is_same_grade_mcu&&0===e[f].is_broadcast&&(l="M255T0");var d=Z.watchTemplate("",0,0,0);t||(d=Z.watchTemplate(l,e[f].ssrc,u.width,u.height)),c.push(d)}if(q.info(" createSmallWatchList isStopSvcSelect:",t),i&&window.CLIENTCONFIG.ISBIGWIN&&s)q.info("isSvcMultiViewBroadcast = "+i),$dispatch(coreUi.changeBroadcastIsMultiView(!1));else if(a&&0===o)for(var p=0;p<c.length;p++)c[p].number="";return c},l.watchTemplate=function(e,t,n,r){return{number:e,ssrc:t,width:n,height:r}},d),ee=t.SvcAtdManager=(h=p=function e(){(0,P.default)(this,e)},p.addAudioNum=0,p.addVideoNum=0,p.showAtdListChanged=!1,p.aDeleteHwnds=new Array,p.iAddCount=0,p.highlightWnd=0,p.speaker="",p.bcHwnd=!1,p.init=!1,p.memberlistArray=new Array,p.muteInfo=new T.default,p.localMicStates={},p.serialConfFirstIndex=-1,p.minModeKeepWndNum=0,p.oldSingleState=new T.default,p.userCameraStu=!0,p.conf_info={},p.isBfcpFromData=!1,p.isBfcpFromData=!1,p.rateCalc={preRate:1,curRate:0,cnt:3},p.handleSvcAtdList=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleSvcAtdList start"),n=$getState().conf,r=n.isBigConf,a=n.svcActiveAttendances,ee.memberlistArray.push(t),!refreshAtdlistTimer){e.next=6;break}return q.info("refreshAtdlistTimer is not null!"),e.abrupt("return");case 6:refreshAtdlistTimer=setInterval(function(){if(!ee.memberlistArray||0===ee.memberlistArray.length)return clearInterval(refreshAtdlistTimer),refreshAtdlistTimer=null,void q.info("clear refreshAtdlistTimer!");if($getState().conf.videoFrameHwnd<=0||window.lockHandleAtdlist)return void q.info("refreshAtdlistTimer videoFrameHwnd:",$getState().conf.videoFrameHwnd,"window.lockHandleAtdlist:",window.lockHandleAtdlist);var e=ee.memberlistArray[ee.memberlistArray.length-1];ee.memberlistArray=new Array;var t=ee.getOnLineAttendances(e);if(r&&a&&a.length>0){var n=sortPreAndOrigiArray(a,t);$dispatch(coreUi.changeSvcOnLineAttendances(n))}else $dispatch(coreUi.changeSvcOnLineAttendances(t));var o=$getState().conf.isSvcMultiViewBroadcast;if(!window.CLIENTCONFIG.ISBIGWIN||!o){var i=$getState().conf.svcOnLineAttendances;K("onLineAttendances watchAttendees is",i,0),ee.handleAtdlist(i)}},500);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleAtdlist=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g,v,m,_,C,w,S,I,E,N,b,T,y,x,A,L,k;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleAtdlist start"),ee.showAtdListChanged=!1,ee.aDeleteHwnds=new Array,ee.iAddCount=0,ee.addAudioNum=0,ee.addVideoNum=0,ee.bcHwnd=null,ee.init=!1,ee.muteInfo.clear(),n={},r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcViewMode,i=r.svcShowAttendances,s=r.isSvcSelectMode,c=r.svcRecallorNot,u=r.isBigConf,f=r.svcSelectWatchInfo,l=r.svcBandMode,void 0!==t&&0!==t.length){e.next=14;break}return q.info("onLineAttendances length is zero,please check."),e.abrupt("return");case 14:for(d=t.length,window.CLIENTCONFIG.ISBIGWIN||(window.isHubEnv?t.length<2&&(o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||o===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)?(q.info("maxhub attendances only one, change viewMode to divide mode!"),ee.switchViewMode(constant.SVC_VIEW_MODE.DIVIDE_MODE,!0),ee.init=!0):t.length>=2&&l===constant.SVC_BAND_MODE.LOW_BAND&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE)&&(q.info("maxhub low bandwidth, change viewMode to PIP mode"),ee.switchViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,!0)):t.length<2&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)?(q.info("change viewMode to big small mode!"),ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0),ee.init=!0):t.length>=2&&l===constant.SVC_BAND_MODE.LOW_BAND&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE)&&ee.switchViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,!0)),p=d;p--;)ee.muteInfo.set(t[p].number,{is_mute:t[p].is_mute});if(s&&f.number&&""!==f.number&&((h=ee.isSvcOnlineAttendance(f.number))||ee.handleCancelWatch()),!(g=ee.handleBroadcastInfo(t))||!$getState().conf.isSvcBroadcastMode){e.next=24;break}return e.next=22,ee.handleJoinBroadCast();case 22:e.next=25;break;case 24:g&&ee.handleCancelBroadCast();case 25:if(o!==constant.SVC_VIEW_MODE.MIN_WIN_MIN&&o!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE&&o!==constant.SVC_VIEW_MODE.MIN_WIM_FLOAT&&o!==constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE){e.next=28;break}return 1===t.length&&2===a.length||2===t.length&&1===a.length?ee.handleWatchAndDecoder([]):q.info("no need to deal in svcViewMode = "+o),e.abrupt("return");case 28:return o=$getState().conf.svcViewMode,e.next=31,ee.createAtdsFactory(t,o);case 31:if(v=e.sent,!ee.showAtdListChanged&&!c){e.next=39;break}return e.next=35,ee.handleHwndAndAtds(v,ee.aDeleteHwnds,ee.iAddCount,ee.bcHwnd,ee.init);case 35:m=e.sent,ee.handleWatchAndDecoder(m),ee.setWindowName(m),$dispatch(coreUi.changesvcRecallorNot(!1));case 39:for(_=v.length;_--;)ee.muteInfo.set(v[_].number,(0,M.default)({},ee.muteInfo.get(v[_].number),{wnd_handle:v[_].wnd_handle}));C=$getState().conf,w=C.videoFrameHwnd,S=C.bigHwnd,I=C.isSvcBroadcastMode,E=C.svcShowPage,N=C.isMinWin,g&&I?(b=ee.getShowBoradcastParam(1),n=(0,M.default)(n,b),s&&(T=ee.getCancelWatchParam(0),n=(0,M.default)(n,T))):g&&(y=ee.getShowBoradcastParam(0),n=(0,M.default)(n,y)),N||ee.setAvailableMode(!1,t,I),x=-1,A=0,L=t.length;case 45:if(!(A<L)){e.next=52;break}if(1!==t[A].is_self){e.next=49;break}return x=t[A].role,e.abrupt("break",52);case 49:A++,e.next=45;break;case 52:k=!1,1!==x&&u&&(q.info("The Conf is big conf, and selfrole is not chair"),k=!0,0!==E&&(E=0,ee.handlePageSwitch(E))),n=(0,M.default)(n,{large_scale_conf:k}),n=(0,M.default)(n,{set_conf_userinfo:{videoCount:a.length}}),ee.setNativeSelectState(),ee.setPageNum(o,d),ee.setParam(n),window.CLIENTCONFIG.ISBIGWIN?ee.setBigMuteState(!1,v):ee.setMuteState(),Y("handleAtdlist end"),ee.serialConfFirstIndex=-1;case 62:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.setNativeSelectState=function(){var e=$getState().conf,t=e.isSvcBroadcastMode,n=e.selfRole,r=e.isDataConfSharing,a=$getState().call.iSreceivingBFCP,o={};!t||a||r||n?(o=(0,M.default)(o,{isBroadCast:!1}),ee.setParam(o)):(o=(0,M.default)(o,{isBroadCast:!0}),ee.setParam(o))},p.getSelfNumber=function(){for(var e="",t=$getState().conf.svcOnLineAttendances,n=0;n<t.length;n++)if(t[n].is_self){e=t[n].number;break}return e},p.isSvcOnlineAttendance=function(e){if(void 0===e||""===e)return q.error("targetNumber is empty."),!1;var t=$getState().conf,n=t.isSameGradeMcu,r=t.svcOnLineAttendances,a=t.serialMcuMemberList;if(void 0===r||r.length<=0)return q.error("onlineAttendance is empty."),!1;for(var o=0;o<r.length;o++)if(r[o].number===e)return!0;if(!n)return!1;if(void 0===a||a.length<=0)return q.error("serialMcuMemberList is empty."),!1;for(var i=0;i<a.length;i++)if(a[i].number===e)return!0;return!1},p.getOnLineAttendances=function(e){for(var t=$getState().conf.isSameGradeMcu,n=new Array,r=new Array,a=!1,o=!1,i=new Array,s={userInfo:{name:""},number:"M255T0",is_self:0,is_broadcast:0,is_same_grade_mcu:0},c=0;c<e.length;c++){var u=ee.isVideoMember(e[c]);if(5===e[c].state&&u){if(window.CLIENTCONFIG.ISBIGWIN&&0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self&&ee.serialConfFirstIndex<0&&(ee.serialConfFirstIndex=c),window.CLIENTCONFIG.ISWIN&&0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self){o=!0,i.push({number:e[c].number,is_self:e[c].is_self,is_broadcast:e[c].is_broadcast});continue}1===e[c].is_self?(a=!0,n.unshift(e[c])):n.push(e[c])}else if(window.CLIENTCONFIG.ISBIGWIN&&5===e[c].state){if(0===t&&0===e[c].is_same_grade_mcu)continue;r.push(e[c])}}return $dispatch(coreUi.changeSerialMemberList(i)),window.CLIENTCONFIG.ISWIN&&o&&n.splice(1,0,s),n.push.apply(n,r),a||(n=new Array),Y("getOnLineAttendances end,onLineAttendances:",n,1),q.info("getOnLineAttendances end serialMcuMemberList",i),n},p.isVideoMember=function(e){return 0!=(e.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)},p.createAtdsFactory=function(){var e=(0,A.default)(O.default.mark(function e(t,n){var r;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new Array,e.t0=n,e.next=e.t0===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?4:e.t0===constant.SVC_VIEW_MODE.DIVIDE_MODE?6:e.t0===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?8:e.t0===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?10:12;break;case 4:return r=ee.createBigSmallAtdList(t),e.abrupt("break",13);case 6:return r=ee.createDivideAtdList(t),e.abrupt("break",13);case 8:return r=ee.createPicInPicAtdList(t),e.abrupt("break",13);case 10:return r=ee.createMinVerticalAtdList(t),e.abrupt("break",13);case 12:q.info("svcViewMode is "+n+",no need to deal");case 13:return r&&r.length>0&&$dispatch(coreUi.changeSvcShowAttendances(r)),e.abrupt("return",r);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.createBigSmallAtdList=function(e){q.info("createBigSmallAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createBigSmallAtd(e,r);return a.length<1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createBigSmallAtd(e,a)),q.info("createBigSmallAtdList end"),a},p.getInsertBeforeHwnd=function(e){for(var t=0,n=e?e.length:0,r=0;r<n;r++)if(3===e[r].type){t=e[r].hwnd;break}return t},p.constructBigConfPropList=function(e,t){var n=(new Array,ee.constructVideoPropList(e)),r=ee.constructAudioPropList(t);return n.concat(r)},p.constructVideoPropList=function(e){for(var t=new Array,n=0;n<e;n++)t.push({type:constant.SVC_HWND_TYPE.SMALL_VIDEO});return t},p.constructAudioPropList=function(e){for(var t=new Array,n=0;n<e;n++)t.push({type:constant.SVC_HWND_TYPE.AUDIO});return t},p.createDivideAtdList=function(e){q.info("createDivideAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createDivideAtd(e,r);return a.length<=1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createDivideAtd(e,a)),q.info("createDivideAtdList end"),a},p.createPicInPicAtdList=function(e){q.info("createPicInPicAtdList start");var t=$getState().conf.svcShowAttendances;return ee.addLocalAtd(e,t),q.info("createPicInPicAtdList end"),t},p.createMinVerticalAtdList=function(e){q.info("createMinVerticalAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createMinVerticalAtd(e,r);return a.length<=1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createMinVerticalAtd(e,a)),q.info("createMinVerticalAtdList end"),a},p.handleWatchAndDecoder=function(e){var t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcViewMode,a=(t.isSvcSelectMode,t.svcBigPicInfo,t.bigHwnd),o=t.isSvcMultiViewBroadcast,i=$getState().call.callId;n.length>1||o?Z.sendSvcWatchRequest(e):r!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE&&r!==constant.SVC_VIEW_MODE.MIN_WIM_FLOAT&&r!==constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE||W.NativeInterface.setLocalWindow(i,a),X.createAllWndDecoders(e);for(var s=0;s<e.length;s++)if(1===e[s].is_self){e[s].wnd_handle>0?W.NativeInterface.setLocalWindow(i,e[s].wnd_handle):q.info("local wnd_handle is ",e[s].wnd_handle);break}},p.handleHwndAndAtds=function(){var e=(0,A.default)(O.default.mark(function e(t,n,r,a){var o,i,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleHwndAndAtds start"),t&&0!==t.length){e.next=4;break}return q.info("handleHwndAndAtds svcShowAttendances is zero"),e.abrupt("return");case 4:return e.next=6,ee.handleHwnds(t,n,r,ee.addVideoNum,ee.addAudioNum,a,s);case 6:return o=e.sent,i=ee.bindAtdsAndWnds(t,o),e.abrupt("return",i&&i.length>0?i:[]);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),p.handleHwnds=function(){var e=(0,A.default)(O.default.mark(function e(t,n,r,a,o,i){var s,c,u,f,l,d,p,h,g,v,m,_,C=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleHwnds,dHwnds = "+n+",aHwnds = "+r+",videoNum = "+a+",audioNum = "+o+",bHwnd = "+i+",init = "+C),s=$getState().conf,c=s.svcViewMode,u=s.bigHwnd,f=s.svcWndHandles,l=s.svcOnLineAttendances,d=s.isSvcMultiViewBroadcast,p=f,h=null,!C){e.next=15;break}return g=Q.getAllHwnds(),v=!0,1===l.length&&(v=!1),h=window.CLIENTCONFIG.ISBIGWIN&&!d?ee.constructBigConfPropList(a,o):ee.constructPropList(c,t,v),e.next=11,Q.updateHwnds(g,{propList:h});case 11:p=e.sent,ee.setBigHwnd(c,p),e.next=51;break;case 15:if(1===l.length&&u>0&&(n.push(u),$dispatch(coreUi.changeBigHwnd(0))),!(n.length>0)){e.next=20;break}return e.next=19,Q.destoryHwnds(n);case 19:p=e.sent;case 20:if(!(l.length>1)||c!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&c!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||0!==u){e.next=24;break}return e.next=23,Q.createBigHwnds(1,0);case 23:p=e.sent;case 24:if(!i){e.next=36;break}if(q.info("FFFF handleHwnds bHwnd = "+i),!p||1!==p.length){e.next=32;break}return e.next=29,Q.createHwnds(1,0);case 29:p=e.sent,e.next=36;break;case 32:if(!(p&&p.length>=2)){e.next=36;break}return e.next=35,Q.createHwnds(1,p[1].hwnd);case 35:p=e.sent;case 36:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=47;break}if(q.info("handleHwnds,videoNum = "+a+" audioNum = "+o),m=ee.constructBigConfPropList(a,o),_=0,a>0&&(_=ee.getInsertBeforeHwnd(p)),!(r>0)){e.next=45;break}return e.next=44,Q.createHwndsByType(m.length,_,m);case 44:p=e.sent;case 45:e.next=51;break;case 47:if(!(r>0)){e.next=51;break}return e.next=50,Q.createHwnds(r,0);case 50:p=e.sent;case 51:return e.abrupt("return",p);case 52:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),p.bindAtdsAndWnds=function(e,t){if(q.info("bindAtdsAndWnds"),!t||0===t.length)return void q.info("bindAtdsAndWnds hwndlist length is zero");var n=$getState().conf,r=(n.isSvcShareMode,n.svcShowPage,n.svcViewMode),a=n.svcOnLineAttendances;t=ee.checkHwndList(t,r,e);for(var o=0;o<e.length;o++)r===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?t&&o+1<t.length?e[o].wnd_handle=t[o+1].hwnd:1===a.length&&1===t.length?e[o].wnd_handle=t[0].hwnd:q.info("BIG_SMALL_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.DIVIDE_MODE?t&&o<t.length?e[o].wnd_handle=t[o].hwnd:q.info("DIVIDE_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?t&&o+1<t.length?e[o].wnd_handle=t[o+1].hwnd:q.info("PIC_IN_PIC_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(t&&o<t.length?e[o].wnd_handle=t[o].hwnd:q.info("MIN_WIN_VERTICAL : window handle create failed ,please check!"));return Y("bindAtdsAndWnds end,svcShowAttendances:",e),$dispatch(coreUi.changeSvcShowAttendances(e)),e},p.checkHwndList=function(e,t,n){var r=$getState().conf,a=r.svcShowPage,o=r.isSvcShareMode,i=(r.videoFrameHwnd,0);if(t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?0===a&&o?e.length>n.length+2&&(i=e.length-n.length-2):e.length>n.length+1&&(i=e.length-n.length-1):t===constant.SVC_VIEW_MODE.DIVIDE_MODE?e.length>n.length&&(i=e.length-n.length):t===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?e.length>n.length+1&&(i=e.length-n.length-1):t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&e.length>n.length&&(i=e.length-n.length),i>0){for(var s=e.splice(e.length-i,i),c=[],u=0;u<s.length;u++)c.push(s[u].hwnd);q.info("checkHwndList, delete extra windows = "+(0,k.default)(c)),Q.destoryHwnds(c)}return e},p.initShowAtds=function(e){var t=$getState().conf,n=t.svcShowPage,r=t.svcViewMode,a=t.maxSizeForPage,o=ee.getCanUseAtdsPos(),i=new Array;i=e.slice(o);var s=new Array,c=a;switch(r){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:e.length<2?ee.addLocalAtd(e,s):ee.addOnlineAtds(i,s,c);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n>0&&ee.addLocalAtd(e,s),ee.addOnlineAtds(i,s,c);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:ee.addLocalAtd(e,s);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:ee.initVerticalShowAtds(e,s)}return Y("initShowAtds end,newSvcShowAtds:",s),s},p.initVerticalShowAtds=function(e,t){if(0===e.length)return void(t=[]);var n=$getState().conf,r=n.svcShowPage,a=n.maxSizeForPage,o="",i=[];ee.minModeKeepWndNum=0;for(var s=0;s<e.length;s++)-1===o.indexOf(e[s].number)&&(o=o+e[s].number+",",i.push(e[s]));var c=$getState().conf.svcPageNum,u=r*a,f=u+a,l=i.length-u;if(l<a){f=u+l;for(var d=u;d<f;d++){var p=ee.createAtdInfo(i[d]);t.push(p)}if(i.length<a||1===c)return;var h=a-l;f=u,u-=h,ee.minModeKeepWndNum=f-u}for(var g=u;g<f;g++){var v=ee.createAtdInfo(i[g]);t.push(v)}},p.createBigSmallAtd=function(e,t){Y("createBigSmallAtd start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=(n.svcViewMode,n.isSvcBroadcastMode,n.isSvcShareMode),o=n.maxSizeForPage,i=ee.getCanUseAtdsPos(),s=new Array;s=e.slice(i);var c=new Array;c=ee.deleteLeaveAtds(t,s),0===r&&ee.addLocalAtd(e,c);var u=a&&0===r?o-1:o;return ee.addOnlineAtds(s,c,u),Y("createBigSmallAtd end,svcShowAttendances:",c),c},p.createDivideAtd=function(e,t){Y("createDivideAtd start,svcShowAttendances:",t);var n=$getState().conf,r=(n.svcShowPage,n.svcViewMode,n.isSvcBroadcastMode),a=n.maxSizeForPage,o=new Array;if(window.CLIENTCONFIG.ISBIGWIN&&r)ee.addBroadCastAtd(e,o);else{var i=ee.getCanUseAtdsPos(),s=new Array;s=e.slice(i),o=ee.deleteLeaveAtds(t,e),ee.addLocalAtd(e,o),ee.addOnlineAtds(s,o,a),window.CLIENTCONFIG.ISBIGWIN&&ee.updataIsMuteStu(ee.muteInfo,o)}return o},p.createMinVerticalAtd=function(e,t){Y("createMinVerticalAtd start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=(n.svcViewMode,n.isSvcBroadcastMode,n.maxSizeForPage),o=ee.getCanUseAtdsPos(),i=new Array;i=e.slice(o);var s=new Array;if(s=ee.deleteLeaveAtds(t,e),0===r)if(ee.addLocalAtd(e,s),0===s.length)ee.iAddCount++;else for(var c=0;c<s.length;c++)1===s[c].is_self&&0===ee.iAddCount&&ee.iAddCount++;return ee.addOnlineAtds(i,s,a),Y("createMinVerticalAtd end,svcShowAttendances:",s),s},p.deleteLeaveAtds=function(e,t){var n=$getState().conf,r=n.isSameGradeMcu,a=n.audioVideoNum,o=n.serialMcuMemberList,i=(0,M.default)({},a),s=e.filter(function(e){var n=!1;if(window.CLIENTCONFIG.ISBIGWIN&&0===r&&0===e.is_self&&0===e.is_same_grade_mcu)ee.serialConfFirstIndex>=0?(n=!0,ee.isInShowAtds(e,t)||(ee.showAtdListChanged=!0)):(z.removeSvcSSRC(e.ssrc)&&i.video--,$dispatch(coreUi.changeHaveAddSerialConf(!1)),ee.showAtdListChanged=!0,z.removeSvcSSRC(e.ssrc),ee.aDeleteHwnds.push(e.wnd_handle));else{if(window.CLIENTCONFIG.ISWIN&&0===r&&0===e.is_same_grade_mcu)return o.length>0?(ee.checkSerialConf(e.number)||(ee.showAtdListChanged=!0),n=!0):(ee.showAtdListChanged=!0,z.removeSvcSSRC(e.ssrc),ee.aDeleteHwnds.push(e.wnd_handle)),n;ee.isInShowAtds(e,t)?n=!0:(ee.showAtdListChanged=!0,ee.aDeleteHwnds.push(e.wnd_handle),ee.isVideoMember(e)?z.removeSvcSSRC(e.ssrc)&&i.video--:i.audio--)}return n});return $dispatch(coreUi.changeAudioVideoNum(i)),q.info("deleteLeaveAtds end SvcAtdManager.aDeleteHwnds = "+(0,k.default)(ee.aDeleteHwnds)),Y("deleteLeaveAtds end,svcShowAttendances:",s),s},p.addLocalAtd=function(e,t){q.info("addLocalAtd start");for(var n=$getState().conf,r=(n.isSvcShareMode,n.isSvcBroadcastMode),a=n.svcWndHandles,o=n.audioVideoNum,i=(0,M.default)({},o),s=!1,c=0;c<t.length;c++)if(1===t[c].is_self){s=!0;break}if(!s)for(var u=0;u<e.length;u++)if(1===e[u].is_self){var f=ee.createAtdInfo(e[u]);if(f){ee.showAtdListChanged=!0,i.video++;if(a&&a.length>0)if(ee.init&&!r)ee.addVideoNum++,ee.iAddCount++;else{var l=a.filter(function(e){return 0===e.type&&-1===ee.aDeleteHwnds.indexOf(e.hwnd)});l&&l.length>0?(f.wnd_handle=l[0].hwnd,q.info("Local is not in showAtd,need to create as wnd_handle = "+f.wnd_handle)):(ee.addVideoNum++,ee.iAddCount++,q.info("Local is not in showAtd,need to create a new window"))}else q.info("svcWndHandles length is "+a+",need to create in pos = 0,it is wrong!");t.splice(0,0,f),$dispatch(coreUi.changeAudioVideoNum(i))}break}},p.addBroadCastAtd=function(e,t){q.info("addBroadCastAtd start");for(var n=$getState().conf,r=n.svcBroadcastData,a=n.ssrcRange,o=null,i=0;i<e.length;i++)if(r.number===e[i].number){o=e[i];break}if(o){var s=ee.createAtdInfo(o);s&&(window.CLIENTCONFIG.ISBIGWIN&&(s.ssrc=a.min+1),t.push(s),ee.bcHwnd=!0,q.info("addBroadCastAtd broadcast is not in showAtd,need to create")),ee.showAtdListChanged=!0}else q.info("addBroadCastAtd can not find broadcastAtd, please check")},p.receviceShareOrBfcp=function(){var e=(0,A.default)(O.default.mark(function e(){var t,n,r,a,o,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("receviceShareOrBfcp"),t=$getState().conf,n=t.svcViewMode,r=t.svcOnLineAttendances,a=t.svcShowAttendances,o=t.svcShowPage,i=t.maxSizeForPage,s=0===u?constant.SVC_SSRC_FLAG.SHARE_SSRC:constant.SVC_SSRC_FLAG.BFCP_SSRC,$dispatch(coreUi.changeIsSvcShareMode(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcShareData({ssrc:s,name:f})),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:s,name:f})),n!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=14;break}return window.lockHandleAtdlist=!0,e.next=11,ee.reInitAtdAndWindow(n);case 11:window.lockHandleAtdlist=!1,e.next=28;break;case 14:if(n!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=27;break}if(0!==o){e.next=24;break}if(i!==a.length){e.next=23;break}return c=new Array,c.push(a[i-1].wnd_handle),e.next=21,Q.destoryHwnds(c);case 21:z.removeSvcSSRC(a[i-1].ssrc),a.splice(i-1,1);case 23:Q.createShareOrBfcpHwnds(1,0);case 24:ee.setBFCPBigWnd(),e.next=28;break;case 27:ee.setBFCPBigWnd();case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p.stopShareOrBfcp=function(){var e=(0,A.default)(O.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("stopShareOrBfcp");case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p.setBFCPBigWnd=(0,A.default)(O.default.mark(function e(){var t;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.bigHwnd,t>0?W.NativeInterface.setBFCPWindow($getState().call.callId,t,!1):q.info("bigHwnd is 0");case 2:case"end":return e.stop()}},e,void 0)})),p.addOnlineAtds=function(e,t,n){var r=$getState().conf,a=r.isSameGradeMcu,o=r.haveAddSerialConf,i=r.audioVideoNum,s=r.svcViewMode,c=(0,M.default)({},i);c.video<=0&&(q.info("unexpected tmpAudioVideoNum.video",c.video),c.video=1);for(var u=0;u<e.length;u++)if(!window.CLIENTCONFIG.ISBIGWIN||0!==a||!o||0!==e[u].is_same_grade_mcu){var f=ee.isInShowAtds(e[u],t);if(t.length>=n){if(ee.isVideoMember(t[n-1])||!ee.isVideoMember(e[u]))break;if(f)continue;ee.aDeleteHwnds.push(t[n-1].wnd_handle),t.pop(),c.audio--}if(!f){var l=ee.createAtdInfo(e[u]);l||s!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&s!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL||(q.info("addOnlineAtds fail, mode = "+s+", svcAtds = "+(0,k.default)(t)),t=z.updateAllSsrcOfAtds(t),l=ee.createAtdInfo(e[u]),q.info("addOnlineAtds updateAllSsrcOfAtds svcAtds = "+(0,k.default)(t))),l&&(ee.showAtdListChanged=!0,q.info("cwp add attendance "),ee.isVideoMember(l)?(c.video++,t.splice(c.video-1,0,l),ee.addVideoNum++,ee.iAddCount++):(c.audio++,t.push(l),ee.addAudioNum++,ee.iAddCount++)),l&&0===l.is_same_grade_mcu&&(o=!0,$dispatch(coreUi.changeHaveAddSerialConf(!0)))}}$dispatch(coreUi.changeAudioVideoNum(c))},p.isInShowAtds=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,r=0;r<t.length;r++)if(t[r].number===e.number&&(1===e.is_self||t[r].media_type===e.media_type)){n=!0;break}return n},p.handleBroadcastInfo=function(e){for(var t=$getState().conf,n=t.isSvcBroadcastMode,r=t.svcBroadcastData,a=t.ssrcRange,o=t.isSvcMultiViewBroadcast,i=(t.svcViewMode,!1),s=!1,c=0;c<e.length;c++){if(window.CLIENTCONFIG.ISWIN&&!o&&r.number!==e[c].number&&1===e[c].is_broadcast){var u=language.SVC_BROAD_CAST.format(e[c].userInfo.name);ee.alertBox(u,3)}if(1===e[c].is_broadcast){if(!o&&(0,N.default)(r).length>0&&r.number===e[c].number)q.info("The broadcast is same");else if(1!==e[c].is_self){i=!0;var f={name:e[c].userInfo.name,number:e[c].number,is_self:e[c].is_self,ssrc:a.min};$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(f)),q.info("Entry broadcast mode,broadcast is "+f.number.substr(0,3)+"****"+f.number.substr(-3))}else if(1===e[c].is_self){var l={name:e[c].userInfo.name,number:e[c].number,is_self:e[c].is_self,ssrc:a.min};$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(l))}s=!0;break}}return!s&&n&&(i=!0,$dispatch(coreUi.changeIsSvcBroadcastMode(!1)),$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!1)),$dispatch(coreUi.changeBroadcastIsMultiView(!1)),$dispatch(coreUi.changeSvcBroadcastData({})),0===$getState().conf.selfRole&&(window.CLIENTCONFIG.ISWIN?ee.alertBox(language.BROADCAST_CANCELLED_BY_CHAIRMAN,3):window.Toast(language.BROADCAST_CANCELLED_BY_CHAIRMAN,2)),q.info("Cancel broadcast mode")),i},p.handleJoinBroadCast=(0,A.default)(O.default.mark(function e(){var t,n,r,a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleJoinBroadCast start"),t=$getState().conf,n=t.isSvcSelectMode,r=t.svcViewMode,a=t.svcBroadcastData,o=t.svcBigPicInfo,r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=8;break}n&&($dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))),$dispatch(coreUi.changeSvcBigPicInfo(a)),ee.showAtdListChanged=!0,e.next=22;break;case 8:if(r!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=21;break}if(ee.init=!0,!window.CLIENTCONFIG.ISBIGWIN){e.next=17;break}$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeAudioVideoNum({video:0,audio:0})),e.next=19;break;case 17:return e.next=19,ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0);case 19:e.next=22;break;case 21:r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.handleModeSwitch(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE);case 22:q.info("handleJoinBroadCast end");case 23:case"end":return e.stop()}},e,void 0)})),p.handleCancelBroadCast=function(){if(window.CLIENTCONFIG.ISBIGWIN)ee.init=!0,$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeHaveAddSerialConf(!1)),$dispatch(coreUi.changeAudioVideoNum({video:0,audio:0}));else{var e=$getState().conf,t=e.svcShowAttendances,n=e.isSvcBroadcastMode;if(e.svcViewMode!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||n||ee.handleModeSwitch(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),0===t.length)return}},p.initVideoFrame=function(){var e=(0,A.default)(O.default.mark(function e(t,n,r){var a,o,i,s,c,u,f,l,d,p,h,g,v,m,_,C,w,S,I,E,N,b,T,y,x,A,L,R,D,P,F,U,B,V,$,j,Y,K,J,z,X,Z,te,ne;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!($getState().conf.videoFrameHwnd>0||window.haveCreateVideoFrame)){e.next=3;break}return q.info("video native frame have already created!"),e.abrupt("return");case 3:if(a=0,window.haveCreateVideoFrame=!0,window.lockHandleAtdlist=!0,q.info("begin init video native frame!"),!(H.getAvcFrameHandles()>0)){e.next=14;break}a=H.getAvcFrameHandles(),$dispatch(coreUi.changeVideoFrameHwnd(a)),window.isHubEnv?ee.switchViewMode(constant.SVC_VIEW_MODE.DIVIDE_MODE):ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),q.info("switchViewMode avc trans to svc but use avc winwhnd"),e.next=18;break;case 14:return ee.switchViewMode(n,!1),e.next=17,W.NativeInterface.initNativeScreen(n,r,window.langcode,!1);case 17:a=e.sent;case 18:if(!a){e.next=94;break}if(window.haveCreateVideoFrame=!1,$dispatch(coreUi.changeVideoFrameHwnd(a)),o=H.getRemoteVideoHwnd(),i=H.getLocalVideoHwnd(),H.setAvcNullForSvc(),s=[],o>0&&s.push(o),i>0&&s.push(i),!(s.length>0)){e.next=40;break}return q.info("initVideoFrame destroy AVCVideoHwnd list = "+(0,k.default)(s)),e.next=31,W.NativeInterface.destoryWindows(a,s);case 31:if(!((c=e.sent)&&c.length>0)){e.next=40;break}for(u=[],f=0,l=0;l<c.length;l++)1===c[l].type&&(0===f?$dispatch(coreUi.changeBigHwnd(c[l].hwnd)):u.push(c[l].hwnd),f++);if(!(u.length>0)){e.next=39;break}return e.next=38,W.NativeInterface.destoryWindows(a,u);case 38:c=e.sent;case 39:c&&c.length>0&&Q.handleChangeSvcWndHandles(c);case 40:if(d=$getState().conf,p=d.isSupportAS,h=d.svcWndHandles,g=d.svcRecallorNot,v=d.confSubject,m=d.isEnterDataConf,_=d.currentConfInfo,C=d.confServerId,w=d.vmrId,S=d.isSrtp,I=d.isConfMicMute,E=d.memberListInfo,N=d.setPreviewsCount,b=$getState().call,T=b.isOpenCamera,y=b.isMuteMic,x=b.isMuteSpk,A=b.cameraNum,L=b.cameraDevicesList,R=b.spkDevicesList,D=b.micDevicesList,P=$getState().setting,F=P.camIndex,U=P.spkIndex,B=P.micIndex,!(h&&h.length>0&&g)){e.next=48;break}W.NativeInterface.setLocalWindow(t,h[0].hwnd),q.info("initVideoFrame svcRecallorNot is true, svcWndHandles = "+(0,k.default)(h)),e.next=51;break;case 48:return e.next=50,Q.createHwnds(1,0);case 50:h=e.sent;case 51:return window.lockHandleAtdlist=!1,ee.userCameraStu||(ee.userCameraStu=!0,T=!1,G.ToolbarManager.setCameraStu({state:0})),q.info("initVideoFrame isOpenCamera = "+T),V=y||I?0:100,x=x?1:0,$=S?1:0,ee.isDataConf=m,G.ToolbarManager.setChairmanState(E,!0),j={},isNullOrEmpty(w)||(C=w),C>0?j=(0,M.default)({},{set_window_title:{title:v,confID:C}}):(Y=0,K=setInterval(function(){Y++;var e=$getState().conf,t=e.confSubject,n=e.confServerId,r=e.vmrId;isNullOrEmpty(r)||(n=r),n>0?(clearInterval(K),ee.setConfServerId(n,t)):Y>=10&&clearInterval(K)},500)),e.next=64,coreAccount.getLoginModel();case 64:J=e.sent,j=(0,M.default)(j,{isSupportAS:J.isSupportAS?1:0}),j=(0,M.default)(j,{init_state:{encrypt:$}}),j=(0,M.default)(j,{init_device_state:{isMuteSpk:x,mic_volume:V,camera_on:A>0?T:-1}}),j=(0,M.default)(j,{camera_devices:{camIndex:F,cameraDevicesList:L}}),j=(0,M.default)(j,{mic_devices:{micIndex:B,micDevicesList:D}}),j=(0,M.default)(j,{spk_devices:{spkIndex:U,spkDevicesList:R}}),j=(0,M.default)(j,{general_pwd:_.general_pwd?_.general_pwd:null}),N>0&&(j=(0,M.default)(j,{set_conf_userinfo:{count:N}})),j=(0,M.default)(j,{has_data_ability:{is_data_conf:ee.isDataConf?1:0}}),j=(0,M.default)(j,{is_free_user:$getState().login.isFreeUser}),j=(0,M.default)(j,{is_in_conf:""===$getState().conf.confHandle?0:1}),z=$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING,X=$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,z?j=(0,M.default)(j,{has_delete_member:0}):X&&(j=(0,M.default)(j,{has_delete_member:1})),Z=$getState().myInfo.enableDoubleScreen,j=(0,M.default)(j,{enableDoubleScreen:Z}),te=JSON.parse((0,k.default)(j)),void 0!==te.set_window_title&&(ne=te.set_window_title.title,te.set_window_title.title=ne?ne.substr(0,1)+"***":""),te.general_pwd=te.general_pwd?"***":"null",q.info("SVC initVideoFrame initParam param = "+(0,k.default)(te)),ee.setParam(j),ee.switchCPURateCalc(!0),ee.rateCalc={preRate:1,curRate:0,cnt:3},coreUi.getConfGuestLink(),ee.oldSingleState.clear(),ee.conf_info={},ee.confMemNum=-1,e.next=97;break;case 94:window.haveCreateVideoFrame=!1,window.lockHandleAtdlist=!1,q.info("init video native frame failed,please check!");case 97:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),p.closeVideoFrame=(0,A.default)(O.default.mark(function e(){var t,n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ee.isDataConf=-1,ee.confMemNum=-1,t=$getState().conf.videoFrameHwnd,n=B.getShareAppHwnd(),n>0&&(q.info("closeVideoFrame shareAppHwnd :",n),W.NativeInterface.setHightlightShareWnd(n,!1)),t>0&&(ee.switchCPURateCalc(!1),ee.rateCalc={preRate:1,curRate:0,cnt:3},ee.conf_info={},W.NativeInterface.uninitNativeScreen(t,!1),$dispatch(coreUi.changeVideoFrameHwnd(0)),ee.highlightWnd=0,ee.speaker=""),window.CLIENTCONFIG.ISBIGWIN||coreUi.selectBoxCancelDataNWin();case 7:case"end":return e.stop()}},e,void 0)})),p.sendWatchWithBfcp=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("sendWatchWithBfcp start"),n=$getState().conf,r=n.isSvcConf,a=n.svcShowAttendances,o=n.svcViewMode,"VIDEO_CONNECTED"!==(i=$getState().call.callStatus)||!r||!window.CLIENTCONFIG.ISWIN||o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=13;break}if(q.info("sendWatchWithBfcp bfcpIsBigHwnd:"+$getState().conf.bfcpIsBigHwnd+", isBigwnd:"+t),$getState().conf.bfcpIsBigHwnd===t){e.next=8;break}return e.next=8,coreCall.setBfcpIsBigWnd($getState().call.callId,t);case 8:return $dispatch(coreUi.changeBfcpIsBigHwnd(t)),e.next=11,Z.sendSvcWatchRequest(a);case 11:return e.next=13,X.createAllWndDecoders(a);case 13:q.info("sendWatchWithBfcp end");case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.sendWatchWithData=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("sendWatchWithData start"),$dispatch(coreUi.changeDataIsBigHwnd(t)),n=$getState().conf,r=n.isSvcConf,a=n.svcShowAttendances,o=n.svcViewMode,"VIDEO_CONNECTED"!==(i=$getState().call.callStatus)||!r||!window.CLIENTCONFIG.ISWIN||o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=13;break}return q.info("sendWatchWithData dataIsBigHwnd:"+t),q.info("sendWatchWithData svcShowAttendances:",a),e.next=9,coreCall.setBfcpIsBigWnd($getState().call.callId,t);case 9:return e.next=11,Z.sendSvcWatchRequest(a);case 11:return e.next=13,X.createAllWndDecoders(a);case 13:q.info("sendWatchWithData end");case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.sendWatchStopOrRecovery=function(){var e=(0,A.default)(O.default.mark(function e(t){var n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("sendWatchStopOrRecovery start,IsStopSvcWatch: ",t),$dispatch(coreUi.changeIsStopSvcWatch(t)),n=$getState().conf.svcShowAttendances,e.next=5,Z.sendSvcWatchRequest(n);case 5:return e.next=7,X.createAllWndDecoders(n);case 7:q.info("sendWatchStopOrRecovery end");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.initBfcpFrame=function(){var e=(0,A.default)(O.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p,h;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=$getState().conf.bfcpFrameHwnd)>0)){e.next=4;break}return q.info("bfcp native frame have already created!"),e.abrupt("return");case 4:return q.info("begin init bfcp native frame!"),a=!1,window.CLIENTCONFIG.ISBIGWIN&&(a=!0),ee.isBfcpFromData=n,o=ee.getModeAndVersion(a,!0),i=o.mode,s=o.version,e.next=11,W.NativeInterface.initNativeScreen(i,s,window.langcode,!0);case 11:if(!(c=e.sent)){e.next=25;break}if($dispatch(coreUi.changeBfcpFrameHwnd(c)),!$getState().conf.isDataConfSharing){e.next=19;break}return q.info("isDataConfSharing is true  destroy bfcpfHwnd "),e.next=18,ee.closeBfcpFrame();case 18:return e.abrupt("return");case 19:return e.next=21,W.NativeInterface.createWindows(c,1,0,[{type:2}]);case 21:return u=e.sent,u&&u.length>0&&(W.NativeInterface.setBFCPWindow(t,u[0].hwnd,n),f=$getState().conf,l=f.confSubject,d=f.confServerId,p=f.vmrId,isNullOrEmpty(p)||(d=p),h=(0,M.default)({},{set_window_title:{title:l,confID:d}}),W.NativeInterface.setParam(h,c),ee.setIsSupportChatNative(c),window.isHubEnv&&ee.switchVideoToMin()),e.next=25,ee.sendWatchWithBfcp(!0);case 25:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.closeBfcpFrame=(0,A.default)(O.default.mark(function e(){var t;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.bfcpFrameHwnd,t>0&&(W.NativeInterface.uninitNativeScreen(t,!0),$dispatch(coreUi.changeBfcpFrameHwnd(0))),e.next=4,ee.sendWatchWithBfcp(!1);case 4:case"end":return e.stop()}},e,void 0)})),p.nativeNotifyUpdateBfcpFrameWnd=function(){var e=(0,A.default)(O.default.mark(function e(t,n){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.NativeInterface.setBFCPWindow($getState().call.callId,t,ee.isBfcpFromData),$dispatch(coreUi.changeBfcpFrameHwnd(t)),e.next=4,ee.sendWatchWithBfcp(n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.nativeNotifyUpdateDataIsBigHwnd=function(){var e=(0,A.default)(O.default.mark(function e(t){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.sendWatchWithData(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.nativeNotifyIsStopWatchSvc=function(){var e=(0,A.default)(O.default.mark(function e(t){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.sendWatchStopOrRecovery(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.switchVideoToMin=(0,A.default)(O.default.mark(function e(){var t,n,r,a,o,i,s;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("switchVideoToMin"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isShowMinWin,a=t.svcMiniViewMode,o=t.svcViewMode,!r){e.next=6;break}return q.info("switchVideoToMin isShowMinWin is true"),window.isDataSharing&&(ee.setViewMode(o),q.info("switchVideoToMin share owner is self,reSet layout = "+(o+256))),e.abrupt("return");case 6:return window.lockHandleAtdlist=!0,i=new I.default([constant.SVC_VIEW_MODE.BIG_SMALL_MODE,constant.SVC_VIEW_MODE.DIVIDE_MODE,constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,constant.SVC_VIEW_MODE.MIN_WIM_FLOAT]),i.has(o)?$dispatch(coreUi.changePreConfViewMode(o)):$dispatch(coreUi.changePreConfViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE)),0===a&&(a=window.isHubEnv?constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),ee.setViewMode(a),q.info("changeIsShowMinWin true 5"),$dispatch(coreUi.changeIsShowMinWin(!0)),ee.switchViewMode(a,!1),s=new Array,s.push(constant.SVC_VIEW_MODE.MIN_WIN_MIN),s.push(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE),s.push(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),s.push(constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE),s.push(constant.SVC_VIEW_MODE.MIN_WIM_FLOAT),$dispatch(coreUi.changeCurrentLayout(s)),e.next=23,ee.reInitAtdAndWindow(a,!0);case 23:ee.setPageNum(a,n.length),window.lockHandleAtdlist=!1;case 25:case"end":return e.stop()}},e,void 0)})),p.RedrawVideoMain=(0,A.default)(O.default.mark(function e(){var t,n,r,a,o,i,s,c;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("RedrawVideoMain"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcViewMode,a=t.svcShowPage,o=t.maxSizeForPage,i=a,window.lockHandleAtdlist=!0,s=n.length,c=ee.getPageNum(r,s),!(s<o)){e.next=10;break}return q.info("RedrawVideoMain, onLineNum = "+s+", maxSizeForPage = "+o),window.lockHandleAtdlist=!1,e.abrupt("return");case 10:if(!(c<=a)){e.next=18;break}return i=c-1,q.info("RedrawVideoMain,pageNum is less than svcShowPage,pageNum = "+c+",showPage = "+a),ee.handlePageSwitch(i),$dispatch(coreUi.changeSvcShowPage(i)),ee.setPageNum(a,s),window.lockHandleAtdlist=!1,e.abrupt("return");case 18:window.lockHandleAtdlist=!1,ee.handleAtdlist(n);case 20:case"end":return e.stop()}},e,void 0)})),p.switchVideoToMain=(0,A.default)(O.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("switchVideoToMain"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isSvcBroadcastMode,a=t.svcViewMode,o=t.isShowMinWin,i=t.svcPreViewMode,o){e.next=4;break}return e.abrupt("return");case 4:if(window.lockHandleAtdlist=!0,s=i||constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!window.isHubEnv){e.next=10;break}s=constant.SVC_VIEW_MODE.DIVIDE_MODE,e.next=14;break;case 10:return c=$getState().conf.isSvcSelectMode,u={isSvcSelectMode:c},e.next=14,ee.setParam(u);case 14:return ee.setViewMode(s),q.info("changeIsShowMinWin false 5"),$dispatch(coreUi.changeIsShowMinWin(!1)),e.next=19,ee.switchViewMode(s,!1);case 19:return ee.setAvailableMode(!1,n,r),e.next=22,ee.reInitAtdAndWindow(s,!0);case 22:ee.setPageNum(s,n.length),window.lockHandleAtdlist=!1;case 24:case"end":return e.stop()}},e,void 0)})),p.handleSpeakerNotify=function(e){var t=$getState().conf,n=t.confSpeaker,r=t.svcShowAttendances,a=(t.videoFrameHwnd,t.svcViewMode),o={};if(e&&ee.speaker!==e&&(o=(0,M.default)(o,{set_speaker:{name:e,icon:""}}),ee.speaker=e),a!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){var i=0;if(n&&n.speaker.length>0)for(var s=n.speaker[0].number,c=0;c<r.length;c++)if(s===r[c].number){i=r[c].wnd_handle;break}ee.highlightWnd!==i&&(o=(0,M.default)(o,{highlight_cell:{hwnd:i,show:1}}),ee.highlightWnd=i)}ee.setParam(o)},p.setWindowName=function(e){var t=$getState().conf,n=t.svcViewMode,r=(t.svcShowPage,t.svcWndHandles),a=t.svcBigPicInfo,o=t.videoFrameHwnd,i=t.bigHwnd;if(r&&e&&0!==r.length){for(var s=new Array,c=0;c<e.length;c++){var u={hwnd:e[c].wnd_handle,confName:e[c].name};1===e[c].is_self&&(u.confName=e[c].name+"("+language.ME+")"),s.push(u)}if((n===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||n===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||n===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||n===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT||n===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE)&&a&&i>0){var f={hwnd:i,confName:a.name};1===a.is_self&&(f.confName=a.name+"("+language.ME+")"),s.splice(0,0,f)}K("window and name list is",s,2),W.NativeInterface.setWindowsName(o,s)}},p.setPageNum=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$getState().conf,a=r.svcShowPage,o=r.videoFrameHwnd,i=r.svcPageNum,s=1;e!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE&&t>0&&(s=ee.getPageNum(e,t)),(i!==s||n)&&(W.NativeInterface.setPageNum(o,a+1,s),$dispatch(coreUi.changeSvcPageNum(s)),q.info("setPageNum, onLineCount = "+t+", viewMode = "+e+",svcShowPage = "+a+",pageNum = "+s))},p.setParam=function(e){if(window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISBIGWIN){var t=ee.getVideoFramHwnd();e&&"{}"!==(0,k.default)(e)?W.NativeInterface.setParam(e,t):window.CLIENTCONFIG.ISWIN&&B.setDataConfParams(e)}},p.setConfUserInfo=function(e){if($getState().conf.setPreviewsCount!==e){$dispatch(coreUi.reportSetPreviewsCount(e));var t=(0,M.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}},p.setSignal=function(e){var t=(0,M.default)({},{set_signal:{level:e}});ee.setParam(t)},p.setSubject=function(e){var t=$getState().conf,n=t.confServerId,r=t.vmrId;isNullOrEmpty(r)||(n=r);var a=(0,M.default)({},{set_window_title:{title:e,confID:n}});ee.setParam(a)},p.setConfServerId=function(e,t){q.info("setConfServerId confServerId = "+e+" confSubject = ");var n=(0,M.default)({},{set_window_title:{title:t,confID:e}});ee.setParam(n)},p.reportOnlineAtdNum=function(e){if(ee.getVideoFramHwnd()){if(e>0&&e!==ee.confMemNum){ee.confMemNum=e;var t=(0,M.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}}else if(reportOnlineAtdNumTimer&&clearInterval(reportOnlineAtdNumTimer),e>0){var n=0;reportOnlineAtdNumTimer=setInterval(function(e){if(ee.getVideoFramHwnd()){clearInterval(reportOnlineAtdNumTimer),ee.confMemNum=e;var t=(0,M.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}else++n>15&&clearInterval(reportOnlineAtdNumTimer)},1e3)}},p.reportIsDataConf=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ee.getVideoFramHwnd()>0&&(e!==ee.isDataConf||t)){ee.isDataConf=e;var n={has_data_ability:{is_data_conf:e?1:0}};ee.setParam(n)}},p.getVideoFramHwnd=function(){var e=$getState().conf.videoFrameHwnd;return 0!==e||$getState().conf.isSvcConf||(e=H.getAvcFrameHandles()),e},p.reportConfInfo=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.conf_list_info){e.next=17;break}if(n=t.conf_list_info,r=n.conf_subject,a=(0,F.getConfTimedec)(n.start_time),o=n.scheduser_name,i=isNullOrEmpty(n.vmr_id)?n.conf_id:n.vmr_id,s=n.guest_join_uri,c=(0,F.getConfTimedec)(n.end_time),u={title:r,start_time:a,end_time:c,creator:o,id:i,link:s},$getState().conf.isVideoConf&&(0,k.default)(ee.conf_info)===(0,k.default)(u)){e.next=17;break}if(ee.conf_info=u,f="",!coreCommon.isWin()){e.next=16;break}return e.next=15,coreCommon.getQrcodeBase64(s);case 15:f=e.sent;case 16:window.CLIENTCONFIG.ISWIN&&$getState().conf.confServerId&&$getState().conf.confServerId===n.conf_id&&ee.setParam({conf_info:u,qrcodeBase64:f});case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.reportQos=function(e){var t=ee.getVideoFramHwnd(),n=(0,M.default)({},{QOS:e});t>0&&n&&W.NativeInterface.reportQos(t,n)},p.reportSingleState=function(e){var t=[],n=ee.oldSingleState,r=!0,a=!1,o=void 0;try{for(var i,s=(0,w.default)(e);!(r=(i=s.next()).done);r=!0){var c=(0,_.default)(i.value,2),u=c[0],f=c[1];n.has(u)&&n.get(u)===f||t.push({hwnd:u,state:f})}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}if(q.info("reportSingleState oldSingleState = "+(0,k.default)(ee.oldSingleState)+" VideoSingalState = "+(0,k.default)(e)+" newSingleState = "+(0,k.default)(t)+" "),ee.oldSingleState=e,0!==t.length){var l=$getState().conf.videoFrameHwnd,d=(0,M.default)({},{VideoSingalState:t});l>0&&d&&W.NativeInterface.setParam(d,l)}},p.getShowBoradcastParam=function(e){var t=$getState().conf.bigHwnd,n={},r={cellHwnd:t,show:e};return n.show_broadcast=r,n},p.getCancelWatchParam=function(e){var t={},n={show:e};return t.cancel_watch_icon=n,t},p.getAvailableModeParam=function(e,t){if(!e||0===e.length)return null;var n=$getState().conf,r=(n.videoFrameHwnd,n.currentLayout),a={},o=new Array;if(1===e.length?o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE):2===e.length||t?(o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),o.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)):(o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),o.push(constant.SVC_VIEW_MODE.DIVIDE_MODE),o.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)),(0,k.default)(r)!==(0,k.default)(o)){$dispatch(coreUi.changeCurrentLayout(o));var i={layouts:o};return a.set_available_layout=i,a}return null},p.getPageNumParam=function(e,t,n){q.info(" onLineCount = "+t+", viewMode = "+e+", svcShowPage = "+n);var r=$getState().conf.svcPageNum,a=1;if(e!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE&&t>0&&(a=ee.getPageNum(e,t)),r!==a){$dispatch(coreUi.changeSvcPageNum(a));var o={pos:n,count:a},i=[];return i.set_page_num=o,q.info("svcPageNum = "+r+",pageNum = "+a),i}return null},p.getWindowTextParam=function(e){if(e&&0!==e.length){for(var t=new Array,n={},r=$getState().conf,a=r.svcViewMode,o=r.svcBigPicInfo,i=r.bigHwnd,s=0;s<e.length;s++){var c={hwnd:e[s].wnd_handle,confName:e[s].name};t.push(c)}if((a===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||a===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)&&o){var u={hwnd:i,confName:o.name};t.splice(0,0,u)}return n.confInfo=t,q.info("window and name list is "+(0,k.default)(t)),n}},p.setAvailableMode=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){var n=$getState().conf,r=n.videoFrameHwnd,a=n.svcBandMode,o=n.currentLayout,i=new Array;window.CLIENTCONFIG.ISBIGWIN?i.push(constant.SVC_VIEW_MODE.DIVIDE_MODE):e?(i.push(constant.SVC_VIEW_MODE.MIN_WIN_MIN),i.push(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE),i.push(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),i.push(constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE),i.push(constant.SVC_VIEW_MODE.MIN_WIM_FLOAT)):1===t.length?i.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE):a===constant.SVC_BAND_MODE.LOW_BAND?i.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE):(i.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),i.push(constant.SVC_VIEW_MODE.DIVIDE_MODE),i.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)),(0,k.default)(o)!==(0,k.default)(i)&&r&&(W.NativeInterface.setAvailableLayout(r,i.length,i),$dispatch(coreUi.changeCurrentLayout(i)))}},p.setViewMode=function(e,t){var n=$getState().conf.videoFrameHwnd,r=n;t>0&&(r=t);var a=0;window.isDataSharing&&(a=256,q.info("setViewMode is specialMode "+(e+a).toString(16))),n>0?W.NativeInterface.setViewMode(r,e+a):q.info("video frame hwnd is 0,please check!")},p.handlePageSwitch=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.lockHandleAtdlist=!0,n=$getState().conf,r=n.svcViewMode,a=n.svcOnLineAttendances,o=n.usedSsrcList,i=a.length,!((s=ee.getPageNum(r,i))<t)){e.next=8;break}return window.lockHandleAtdlist=!1,q.info("handlePageSwitch,pageNum is less than showPage,pageNum = "+s+",showPage = "+t),e.abrupt("return");case 8:return $dispatch(coreUi.changeSvcShowPage(t)),c=[],$dispatch(coreUi.changeSvcShowAttendances([])),r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?$dispatch(coreUi.changeUsedSvcSSRCList([])):c=o.concat([]),e.next=14,ee.reInitAtdAndWindow(r,!1);case 14:r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL||(u=$getState().conf.usedSsrcList,f=u.filter(function(e){return-1===c.indexOf(e)}),$dispatch(coreUi.changeUsedSvcSSRCList(f)),q.info("handlePageSwitch svcViewMode = "+(0,k.default)(r)+" oldSSRCList = "+(0,k.default)(c)+" newUsedSsrcList = "+(0,k.default)(f))),window.lockHandleAtdlist=!1;case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleModeSwitch=function(){var e=(0,A.default)(O.default.mark(function e(t,n){var r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleModeSwitch,viewMode = "+t),r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcViewMode,i=r.videoFrameHwnd,n||(n=i),o!==t&&n===i){e.next=5;break}return e.abrupt("return");case 5:return window.lockHandleAtdlist=!0,e.next=8,ee.switchViewMode(t,!0,n);case 8:return e.next=10,ee.reInitAtdAndWindow(t);case 10:ee.setPageNum(t,a.length),window.lockHandleAtdlist=!1;case 12:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.handleWatch=function(){var e=(0,A.default)(O.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p,h,g,v;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleWatch,viewMode = "+t+"}"),r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcShowAttendances,i=r.videoFrameHwnd,s=r.isSvcBroadcastMode,c=r.isSvcSelectMode,u=r.isMinWin,f=r.bigHwnd,l=r.ssrcRange,d={},!c&&s&&(p=ee.getShowBoradcastParam(0),d=(0,M.default)(d,p)),n.ssrc||(n.ssrc=l.min),$dispatch(coreUi.changeSvcBigPicInfo(n)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcControlMode(1)),h=(0,M.default)({},n),$dispatch(coreUi.changeSvcSelectWatchInfo(h)),t!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=18;break}Z.sendSvcWatchRequest(o),X.createAllWndDecoders(o),ee.setWindowName(o),g=$getState().conf.isSvcSelectMode,d=(0,M.default)(d,{isSvcSelectMode:g}),e.next=41;break;case 18:if(t!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=25;break}Z.sendSvcWatchRequest(o),X.createAllWndDecoders(o),ee.setWindowName(o),v=$getState().conf.isSvcSelectMode,e.next=41;break;case 25:if(t!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=34;break}return window.lockHandleAtdlist=!0,e.next=29,ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0);case 29:return e.next=31,ee.reInitAtdAndWindow(constant.SVC_VIEW_MODE.BIG_SMALL_MODE);case 31:window.lockHandleAtdlist=!1,e.next=41;break;case 34:if(t!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL){e.next=41;break}return window.lockHandleAtdlist=!0,e.next=38,ee.switchViewMode(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE,!0);case 38:return e.next=40,ee.reInitAtdAndWindow(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE);case 40:window.lockHandleAtdlist=!1;case 41:u||ee.setAvailableMode(!1,a,s),ee.setParam(d);case 43:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.handleCancelWatch=function(){q.info("handleCancelWatch");var e=$getState().conf,t=e.svcShowAttendances,n=e.svcOnLineAttendances,r=e.isSvcBroadcastMode,a=e.svcBigPicInfo,o={};if(r){var i=ee.getShowBoradcastParam(1);o=(0,M.default)(o,i)}var s={ssrc:a.ssrc,is_self:0};1===a.is_self&&(s.is_self=1),$dispatch(coreUi.changeSvcBigPicInfo(s)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})),Z.sendSvcWatchRequest(t);var c=$getState().conf,u=c.isSvcSelectMode;c.svcViewMode===constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&(o=(0,M.default)(o,{isSvcSelectMode:u})),ee.setAvailableMode(!1,n,r),ee.setParam(o)},p.reInitAtdAndWindow=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("reInitAtdAndWindow"),n=$getState().conf,r=n.svcShowPage,a=n.svcOnLineAttendances,o=n.isSvcShareMode,i=n.svcWndHandles,s=new Array,c=new Array,u=null,ee.aDeleteHwnds=Q.getAllHwnds(l),s=ee.initShowAtds(a),c=ee.constructPropList(t,s,l),!(t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.minModeKeepWndNum>0)){e.next=19;break}return ee.minModeKeepWndNum=0,e.next=12,Q.destoryHwnds(ee.aDeleteHwnds);case 12:return u=e.sent,f=u?u[0].hwnd:0,e.next=16,Q.createHwnds(ee.aDeleteHwnds.length,f);case 16:u=e.sent,e.next=22;break;case 19:return e.next=21,Q.updateHwnds(ee.aDeleteHwnds,{propList:c});case 21:u=e.sent;case 22:if(u&&0!==u.length){e.next=25;break}return q.info("reInitAtdAndWindow, hwndlist is null or zero,please check!"),e.abrupt("return");case 25:ee.setBigHwnd(t,u),ee.bindAtdsAndWnds(s,u),ee.handleWatchAndDecoder(s),ee.setWindowName(s),ee.setMuteState();case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.setBigHwnd=function(e,t){if(t&&0!==t.length&&(e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||e===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT||e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE))for(var n=0;n<t.length;n++)if(1===t[n].type){$dispatch(coreUi.changeBigHwnd(t[n].hwnd));break}},p.constructPropList=function(e,t,n){var r=new Array,a=null,o=$getState().conf.svcOnLineAttendances;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n&&o.length>1&&(r=ee.constructBigPropList()),a=ee.constructSmallPropList(t),r=r.concat(a);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:r=ee.constructSmallPropList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:r=ee.constructBigPropList(),a=ee.constructSmallPropList(t),r=r.concat(a);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:r=ee.constructBigPropList();break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:r=ee.constructSmallPropList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:r=ee.constructBigPropList()}return r},p.constructBigPropList=function(){var e=new Array;return e.push({type:constant.SVC_HWND_TYPE.BIG_VIDEO}),e},p.constructSmallPropList=function(e){for(var t=new Array,n={type:constant.SVC_HWND_TYPE.SMALL_VIDEO},r=0;r<e.length;r++)t.push(n);return t},p.switchViewMode=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=arguments[2];return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcViewMode,a=n.svcOnLineAttendances,o=n.svcBandMode,r===t){e.next=21;break}if(a.length>=2&&o===constant.SVC_BAND_MODE.LOW_BAND&&(t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||t===constant.SVC_VIEW_MODE.DIVIDE_MODE)&&(t=constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(t)),$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeBigHwnd(0)),!u){e.next=11;break}return e.next=11,ee.setViewMode(t,f);case 11:if(t!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=16;break}return i=$getState().conf.isSvcSelectMode,s={isSvcSelectMode:i},e.next=16,ee.setParam(s);case 16:c=new I.default([constant.SVC_VIEW_MODE.MIN_WIN_MIN,constant.SVC_VIEW_MODE.MIN_WIN_SINGLE,constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL,constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE]),c.has(t)?(q.info("changeIsShowMinWin true 6"),$dispatch(coreUi.changeIsShowMinWin(!0)),$dispatch(coreUi.changeConfMiniViewMode(t))):(q.info("changeIsShowMinWin false 7"),$dispatch(coreUi.changeIsShowMinWin(!1))),window.CLIENTCONFIG.ISBIGWIN?$dispatch(coreUi.changeMaxSizeForPage(constant.SVC_MAX_SIZE_FOR_PAGE.BIGWIN_DV_MAX_SIZE)):$dispatch(coreUi.changeMaxSizeForPage(ee.getMaxSizeForPage(t))),e.next=22;break;case 21:q.info("viewMode is same,no need to change!");case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.createAtdInfo=function(e){if(e||e instanceof Object&&!Array.isArray(e)){var t=-1,n=$getState().conf.isSameGradeMcu;if(ee.isVideoMember(e)?t=z.assignSsrc(e):window.CLIENTCONFIG.ISWIN&&0===n&&0===e.is_same_grade_mcu&&(t=z.assignSsrc(e)),!t)return null;return{name:e.userInfo.name,number:e.number,is_self:e.is_self,is_broadcast:e.is_broadcast,is_same_grade_mcu:e.is_same_grade_mcu,media_type:e.media_type,wnd_handle:-1,ssrc:t}}},p.updataIsMuteStu=function(e,t){if(t&&!(t.length<1)&&e)for(var n=0;n<t.length;n++){var r=t[n].number;if(1===t[n].is_self){var a=$getState().call.micValue;ee.localMicStates.wndHand=t[n].wnd_handle,ee.localMicStates.isMicMute=e.get(r).is_mute,t[n].is_mute=1===e.get(r).is_mute||0===a?1:0}else!e.has(r)||void 0!==t[n].is_mute&&t[n].is_mute===e.get(r).is_mute||(t[n].is_mute=e.get(r).is_mute)}},p.setBigMuteState=function(e,t){var n=$getState().conf.videoFrameHwnd,r=[];if(e){var a=$getState().call.micValue,o=1===ee.localMicStates.isMicMute||0===a?1:0,i={hwnd:ee.localMicStates.wndHand,is_mute:o};r.push(i)}else if(t)for(var s=0,c=t.length;s<c;s++){var u={hwnd:t[s].wnd_handle,is_mute:t[s].is_mute};r.push(u)}q.info("setBigMuteState muteState is "+(0,k.default)(r)),W.NativeInterface.setParam({muteState:r},n)},p.getCanUseAtdsPos=function(){var e=$getState().conf,t=e.svcViewMode,n=e.svcShowPage,r=(e.isSvcShareMode,e.maxSizeForPage),a=0;return t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?a=n*r:t===constant.SVC_VIEW_MODE.DIVIDE_MODE&&n>0&&(a=n*(r-1)+1),a},p.getMaxSizeForPage=function(e){var t=$getState().conf.svcBandMode,n=0;return e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?n=t===constant.SVC_BAND_MODE.MIDDLE_BAND?constant.SVC_MAX_SIZE_FOR_PAGE.LOW_BS_MAX_SIZE:constant.SVC_MAX_SIZE_FOR_PAGE.BS_MAX_SIZE:e===constant.SVC_VIEW_MODE.DIVIDE_MODE?(t===constant.SVC_BAND_MODE.MIDDLE_BAND?n=constant.SVC_MAX_SIZE_FOR_PAGE.LOW_DV_MAX_SIZE:(n=constant.SVC_MAX_SIZE_FOR_PAGE.DV_MAX_SIZE,window.CLIENTCONFIG.ISBIGWIN&&(n=constant.SVC_MAX_SIZE_FOR_PAGE.BIGWIN_DV_MAX_SIZE)),window.CLIENTCONFIG.ISWIN&&($getState().call.iSreceivingBFCP||coreConf.isReceivingDataShare()||coreConf.isRecevingAppshare()||coreConf.isInReceiveDocSharing()||coreConf.isRecevingWBSharing())&&(n-=1),q.info("maxSizeForPage maxSize:",n)):e===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?n=constant.SVC_MAX_SIZE_FOR_PAGE.PIP_MAX_SIZE:e===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(n=constant.SVC_MAX_SIZE_FOR_PAGE.MIN_WIN_VERTICAL_SIZE),n},p.getPageNum=function(e,t){var n=1,r=$getState().conf,a=r.isSvcShareMode,o=r.maxSizeForPage;return e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?n=a?Math.ceil((t+1)/o):Math.ceil(t/o):e===constant.SVC_VIEW_MODE.DIVIDE_MODE?n=Math.ceil((t-1)/(o-1)):e===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(n=Math.ceil(t/o)),n},p.getAttendeeByHwnd=function(e){var t=$getState().conf,n=t.svcShowAttendances,r=(t.isSvcShareMode,t.svcShowPage,t.svcShareData,t.svcWndHandles,null);return r=n.find(function(t){return t.wnd_handle===e}),q.info("getAttendeeByHwnd"),r},p.getAtdFullInfoByHwnd=function(e){var t=ee.getAttendeeByHwnd(e),n=null;if(t)for(var r=t.number,a=$getState().conf.memberListInfo,o=a.length;o--;)if(r===a[o].number){n=a[o];break}return n},p.getConfNameBySsrc=function(e){for(var t="",n=$getState().conf,r=n.svcShowAttendances,a=n.svcBigPicInfo,o=n.svcViewMode,i=0;i<r.length;i++)if(e===r[i].ssrc){t=r[i].name;break}return o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||a&&e===a.ssrc&&(t=a.name),t},p.getConfhwndBySsrc=function(e){for(var t=0,n=$getState().conf,r=n.svcShowAttendances,a=n.svcBigPicInfo,o=n.svcViewMode,i=0;i<r.length;i++)if(e===r[i].ssrc){t=r[i].wnd_handle;break}return o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||a&&e===a.ssrc&&(t=a.wnd_handle),t},p.getModeAndVersion=function(e,t){var n={mode:3,version:0};return e?(n.mode=constant.SVC_VIEW_MODE.DIVIDE_MODE,n.version=constant.SVC_VERSION_FLAG.BIG):t?(n.mode=constant.SVC_VIEW_MODE.BFCP_MODE,n.version=constant.SVC_VERSION_FLAG.BASE):(n.mode=constant.SVC_VIEW_MODE.BIG_SMALL_MODE,n.version=constant.SVC_VERSION_FLAG.BASE),n},p.handleSvcSsrcModify=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i,s;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleSvcSsrcModify"),n=$getState().conf,r=n.svcOnLineAttendances,a=n.svcShowAttendances,o=n.svcBigPicInfo,i=z.updateAllSsrcOfAtds(a),$dispatch(coreUi.changeSvcShowAttendances(i)),!window.CLIENTCONFIG.ISBIGWIN&&o.hasOwnProperty("ssrc")&&(s=(0,M.default)([],o),s.ssrc=t.min,z.addSvcSSRC(t.min),$dispatch(coreUi.changeSvcBigPicInfo(s))),!(r.length>1)){e.next=10;break}return e.next=8,Z.sendSvcWatchRequest(i);case 8:return e.next=10,X.createAllWndDecoders(i);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleMultiViewBroadcast=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleMultiViewBroadcast start param = "+(0,k.default)(t)),$getState().conf.isSvcConf){e.next=16;break}if(-1!==t){e.next=8;break}$dispatch(coreUi.changevideoBroadcastNum("")),coreConf.setIsAvcMultiViewBroadcast(!1),0===$getState().conf.selfRole&&(window.CLIENTCONFIG.ISWIN?ee.alertBox(language.BROADCAST_CANCELLED_BY_CHAIRMAN,3):window.Toast(language.BROADCAST_CANCELLED_BY_CHAIRMAN,2)),e.next=15;break;case 8:if(null!==(n=t&&t.attendee_vc?t.attendee_vc:null)){e.next=12;break}return q.info("handleMultiViewBroadcast param.attendee_vc is null, please check!!!"),e.abrupt("return");case 12:r="M"+n.mcu_num+"T"+n.terminal_num,$dispatch(coreUi.changevideoBroadcastNum(r)),coreConf.setIsAvcMultiViewBroadcast(!0);case 15:return e.abrupt("return");case 16:if(!window.CLIENTCONFIG.ISWIN){e.next=19;break}return q.info("NO NEED TO handleMultiViewBroadcast"),e.abrupt("return");case 19:if(-1!==t){e.next=24;break}$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!1)),$dispatch(coreUi.changeBroadcastIsMultiView(!1)),e.next=33;break;case 24:if(null!==(a=t&&t.attendee_vc?t.attendee_vc:null)){e.next=28;break}return q.info("handleMultiViewBroadcast param.attendee_vc is null, please check!!!"),e.abrupt("return");case 28:o="M"+a.mcu_num+"T"+a.terminal_num,0===a.terminal_num&&$dispatch(coreUi.changeBroadcastIsMultiView(!0)),i={userInfo:{name:language.MULTI_VIEW_BROADCAST_NAME},name:language.MULTI_VIEW_BROADCAST_NAME,media_type:3,number:o,is_mute:0,role:0,state:5,is_self:0,is_broadcast:1},$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!0)),ee.handleAtdlist([i,{}]);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.reportSRTPStatus=function(){var e=$getState().conf,t=(e.videoFrameHwnd,e.isSrtp),n=t?1:0,r={};r.init_state={encrypt:n},q.info("init_state "+(0,k.default)(r)),ee.setParam(r)},p.setMuteState=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1],n=$getState().conf,r=n.svcShowAttendances,a=(n.svcOnLineAttendances,n.isSvcConf);if(!a||r&&0!==r.length){var o=ee.getVideoFramHwnd(),i=($getState().call.isMuteMic,ee.muteInfo),s=[],c={mic_volume:-1},u={};if(a){if(e&&void 0!==t){for(var f=0,l=r.length;f<l;f++)if(1===r[f].is_self){r[f].is_mute=t?1:0;var d={hwnd:r[f].wnd_handle,is_mute:t?1:0};c.mic_volume=t?0:100,s.push(d)}}else for(var p=0,h=r.length;p<h;p++){var g={},v=r[p].number;i.has(v)&&(void 0!==r[p].is_mute&&r[p].is_mute===i.get(v).is_mute&&r[p].wnd_handle===i.get(v).wnd_handle||(r[p].is_mute=i.get(v).is_mute,g={hwnd:r[p].wnd_handle,is_mute:r[p].is_mute},s.push(g),1===r[p].is_self&&(c.mic_volume=1===r[p].is_mute?0:100)))}q.info("setMuteState muteState is "+(0,k.default)(s)),s.length>0&&(u=(0,M.default)({},u,{muteState:s}),$dispatch(coreUi.changeSvcShowAttendances(r))),-1!==c.mic_volume&&(u=(0,M.default)({},u,{init_device_state:c}))}else{var m=H.getLocalVideoHwnd(),_={hwnd:m,is_mute:t?1:0};c.mic_volume=t?0:100,s.push(_),u=(0,M.default)({},{muteState:s},{init_device_state:c})}u&&W.NativeInterface.setParam(u,o)}},p.checkSerialConf=function(e){for(var t=!1,n=$getState().conf.serialMcuMemberList,r=0;r<n.length;r++)if(n[r].number===e){t=!0;break}return t},p.getUserInfoByHwnd=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g,m,_,C,w,S,E;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new I.default,r={},a=null,o=null,i=-1,!(t>0)){e.next=16;break}if(o=ee.getAtdFullInfoByHwnd(t),a=o.userInfo,!isNullOrEmpty(a.account)||!isNullOrEmpty(a.contact_id)){e.next=13;break}return s=a.number,c=a.name,e.next=11,(0,j.searchContact)(s,c);case 11:u=e.sent,u&&1<=u.length&&(q.info("search userInfo when first right click success!"),a=(0,M.default)({},u[0]),(0,j.updateMemberDetail)(a,s,c));case 13:i=o.number,e.next=17;break;case 16:0===t&&(a=$getState().myInfo,i=a.bind_no);case 17:if(a){for(f=["mobile","home_phone","office_phone","short_phone","ip_phone","other_phone","other_phone2"],l=f.length;l--;)d=f[l],a[d]&&a[d]!==i&&n.add(a[d]);r={hwnd:t,usernum:(0,v.default)(n)},t>0&&o&&(p=o.is_broadcast,h=o.is_self,g=o.is_mute,m=o.role,_=1===p?0:1===h?1:2,C=$getState().conf.transferChairman,r=(0,M.default)({},r,{type:_,isSelf:h,broadcast:p,isMute:g,isChairman:m,transferChairman:C}))}else r={hwnd:t,error:2};w=$getState().conf.videoFrameHwnd,S=r.usernum.map(function(e){return handlePhoneNumber(e)}),E=(0,M.default)({},r,{usernum:S}),q.info("getUserInfoByHwnd query_user_info_result is "+(0,k.default)(E)),W.NativeInterface.reportUserInfo(w,{query_user_info_result:r});case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.callOtherNum=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("callOtherNum start"),""===t.usernum){e.next=15;break}if(n=$getState().conf.memberListInfo,r=null,t.hwnd>0)r=ee.getAttendeeByHwnd(t.hwnd);else for(a=0;a<n.length;a++)1===n[a].is_self&&(r=n[a]);if(!r){e.next=14;break}return q.info("callOtherNum name = "+handlePhoneNumber(r.name)),r=(0,M.default)({},r,{number:t.usernum}),o=[],o.push(r),e.next=12,(0,F.actionCallOtherNum)(o);case 12:e.next=15;break;case 14:q.info("callOtherNum faild! number = "+handlePhoneNumber(t.usernum));case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.callAttendeeResult=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse((0,k.default)(t)),void 0!==n.number&&(r=n.number,n.number=handlePhoneNumber(r)),q.info("callAttendeeResult",(0,k.default)(n)),t.ret&&(q.info("callAttendeeResult tip start"),a=language.LANG_NATIVE_INVITE_FAILED,o=language.LANG_NATIVE_BEING_BUSY_INVITE_FAILED,t.userInfo&&t.userInfo.name?(a=a.replace("%s",t.userInfo.name),o=o.replace("%s",t.userInfo.name)):(a=a.replace("%s",""),o=o.replace("%s","")),4===t.reason?("win"===window.CLIENTCONFIG.PLATFORM&&ee.alertBox(o,3),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(o,4,!1,"pcToast",""),window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(o,2)):(t.reason,"win"===window.CLIENTCONFIG.PLATFORM&&ee.alertBox(a,3),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(a,4,!1,"pcToast",""),window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(a,2)));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.muteAttendee=function(){var e=(0,A.default)(O.default.mark(function e(t){var n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.hwnd>0)){e.next=5;break}if(!(n=ee.getAttendeeByHwnd(t.hwnd))){e.next=5;break}return e.next=5,(0,F.actionMuteAttendee)(t.isMute,n.number,n.isSelf);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.removeAttendee=function(){var e=(0,A.default)(O.default.mark(function e(t){var n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("svcmanager remove attendee ",t),!(t.hwnd>0)){e.next=6;break}if(!(n=ee.getAttendeeByHwnd(t.hwnd))){e.next=6;break}return e.next=6,(0,F.actionRemoveAttendee)(n.number);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.lockConf=function(){var e=(0,A.default)(O.default.mark(function e(t){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("svcmanager lock conf",t),e.next=3,coreCall.mlockConf(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handup=function(){var e=(0,A.default)(O.default.mark(function e(t){return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("svcmanager hand up",t),e.next=3,coreCall.pcHandup();case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.hangupAttendee=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a,o,i;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.hwnd)>0)){e.next=26;break}if(r=ee.getAtdFullInfoByHwnd(n),q.info("hangupAttendee hwnd = "+n+", attendee = "+r),!r){e.next=26;break}if(a=r.number,o=r.state,i=r.participant_id,window.isSupportiDo){e.next=18;break}if(!i||i===a){e.next=13;break}return q.info("REST right menu actionHangupAttendee, hangup attendee: ",handlePhoneNumber(a)),e.next=11,(0,F.actionHangupAttendee)(a);case 11:e.next=16;break;case 13:return q.info("REST right menu actionRemoveAttendee, remove attendee: ",handlePhoneNumber(a)),e.next=16,(0,F.actionRemoveAttendee)(a);case 16:e.next=26;break;case 18:if(q.info("iDo right menu operatorHangupAttendee, hangup attendee: ",handlePhoneNumber(a)),5!==o){e.next=24;break}return e.next=22,(0,F.actionHangupAttendee)(a);case 22:e.next=26;break;case 24:return e.next=26,(0,F.actionRemoveAttendee)(a);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.transferChairman=function(){var e=(0,A.default)(O.default.mark(function e(t){var n;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=$getState().conf.transferChairman)){e.next=4;break}return e.next=4,n(t.usernum);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.broadcastAttendee=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r,a;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.hwnd)>0)){e.next=7;break}if(!(r=ee.getAtdFullInfoByHwnd(n))){e.next=7;break}return a=1===r.is_broadcast?0:1,e.next=7,(0,F.actionBroadcastAttendee)(a,r.number);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleConfCtrl=function(){var e=(0,A.default)(O.default.mark(function e(t){var n,r;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,k.default)(t),r=t.action,e.t0=r,e.next="mute"===e.t0?5:"broadcast"===e.t0?8:"hangup"===e.t0?11:"set_chairman"===e.t0?14:"request_chairman"===e.t0?17:"release_chairman"===e.t0?20:"call"===e.t0?23:"delete"===e.t0?26:"lock"===e.t0?29:"unlock"===e.t0?32:"put_up_hands"===e.t0?35:"put_down_hands"===e.t0?38:"extend_meeting"===e.t0?41:44;break;case 5:return e.next=7,ee.muteAttendee(t);case 7:return e.abrupt("break",45);case 8:return e.next=10,ee.broadcastAttendee(t);case 10:return e.abrupt("break",45);case 11:return e.next=13,ee.hangupAttendee(t);case 13:return e.abrupt("break",45);case 14:return e.next=16,ee.transferChairman(t);case 16:return e.abrupt("break",45);case 17:return e.next=19,G.ToolbarManager.applyOrReleasechairman({applyStu:1,pwd:t.pwd});case 19:return e.abrupt("break",45);case 20:return e.next=22,G.ToolbarManager.applyOrReleasechairman({applyStu:0});case 22:return e.abrupt("break",45);case 23:return e.next=25,ee.callOtherNum(t);case 25:return e.abrupt("break",45);case 26:return e.next=28,ee.removeAttendee(t);case 28:return e.abrupt("break",45);case 29:return e.next=31,ee.lockConf(t);case 31:return e.abrupt("break",45);case 32:return e.next=34,ee.lockConf(t);case 34:return e.abrupt("break",45);case 35:return e.next=37,ee.handup(t);case 37:return e.abrupt("break",45);case 38:return e.next=40,ee.handup(t);case 40:return e.abrupt("break",45);case 41:return e.next=43,G.ToolbarManager.postponeConf(t);case 43:return e.abrupt("break",45);case 44:q.info("handleConfCtrl cmd not match! pleace check");case 45:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.isNativeUIExsit=function(){var e=$getState().conf.videoFrameHwnd;return 0!==e||$getState().conf.isSvcConf||(e=H.getAvcFrameHandles()),0!==e},p.alertBox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e){var o=$getState().conf.videoFrameHwnd;0!==o||$getState().conf.isSvcConf||(o=H.getAvcFrameHandles());var i={dialog_type:1&t};2==(2&t)?i.content=e:i.content_id=e,i.isForceOnNativeWnd=n,i.dialogID=r,i.confirmBtnText=a,o>0&&i&&W.NativeInterface.showMessageBox(o,i)}},p.destroyNativeWin=function(){W.NativeInterface.destroyNativeWin()},p.removeShowAttendances=function(e){var t=$getState().conf.svcShowAttendances;if(q.info("removeShowAttendances: "+e,e),!isNullOrEmpty(e)){for(var n=-1,r=0;r<t.length;r++)t[r].name===e.name&&(n=r);q.info("removeShowAttendances pos: "+n);var a=(0,M.default)([],t);-1!==n&&(a.splice(n,1),$dispatch(coreUi.changeSvcShowAttendances(a)))}},p.destroyLastNativeWin=(0,A.default)(O.default.mark(function e(){var t,n,r,a,o;return O.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("destroyLastNativeWin"),t=$getState().conf,n=t.svcShowAttendances,r=t.maxSizeForPage,a=t.svcWndHandles,q.info("maxSizeForPage is "+r+", svcShowAttendances.length is "+n.length),!(r<=n.length)){e.next=11;break}return o=new Array,o.push(n[n.length-1].wnd_handle),e.next=8,Q.destoryHwnds(o);case 8:z.removeSvcSSRC(n[n.length-1].ssrc),n.splice(n.length-1,1),$dispatch(coreUi.changeSvcShowAttendances(svcShowAttendancesList));case 11:case"end":return e.stop()}},e,void 0)})),p.switchCPURateCalc=function(e){e=!0===e?1:0;var t=$getState().conf.videoFrameHwnd,n={open:e,duration_ms:5e3};$.EncoderAdpt.clear(),ee.setParam({calc_cpu_rate:n,frameHwnd:t})},p.handleCPURate=function(e){e&&e.cpu&&(q.info("SVC handleCPURate",$.EncoderAdpt),$.EncoderAdpt.feed(e.cpu,e.version))},p.clear=function(){ee.memberlistArray=new Array},p.setIsSupportChatNative=function(e){var t=$getState().call.userInfo,n=$getState().conf.groupId,r=!1;isNullOrEmpty(n)||(r=!0),t&&!isNullOrEmpty(t.account)&&(r=!0),coreAccount.getLoginModel().then(function(t){t.useIM||(r=!1);var n=(0,M.default)({},{isSupportChat:r});W.NativeInterface.setParam(n,e)})},h)},167:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){window.InAppBrowserRef.executeScript({code:'document.body.style.overflow="hidden"'}),/.*inappbrowserref_close_url.*/.test(e.url)&&(I.info("openInAppBrowserMobile close_url"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i)),/.*inappbrowserref_success_url.*/.test(e.url)&&(window.InAppBrowserRef.close(),window.alertRegisterSuccess("REGISTER_TITLE"),I.info("register account success"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i))}function o(e){window.InAppBrowserRef.executeScript({code:'document.body.style.overflow="hidden"'}),/.*inappbrowserref_close_url.*/.test(e.url)&&(I.info("openInAppBrowserMobile close_url"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i)),/.*inappbrowserref_success_url.*/.test(e.url)&&(window.InAppBrowserRef.close(),window.ToastNew(language.CHANGE_PASSWORD_SUCCESS_FIRST,2),I.info("change [password] success"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i))}function i(){T({loadPwd:!1}),alert(language.LOGIN_RESUME_NETWORK_ERROR),I.info("openInAppBrowserMobile loaderror"),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i),window.InAppBrowserRef.close()}function s(){window.InAppBrowserRef.show(),window.setTimeout(function(){return T({loadPwd:!1})},500),clearTimeout(window.openBrowerTimer)}Object.defineProperty(t,"__esModule",{value:!0}),t.initPcFirstPage=t.isAccountAutoLogin=t.isPcFirstInstall=t.isInLoginRecordList=t.initMImportCertificate=t.clearImptZipUrlDataLogic=t.cancelImpSelectDone=t.mobileImptProveLogic=t.setMSelectItLogic=t.setMProveNameAndSelectItLogic=t.setMSaveZipUrlLogic=t.setMProveAndKeyLogic=t.probeImportCertificateLogic=t.loginforverificationCertificateLogic=t.dbInitCertificateLogic=t.verificationCertificateLogic=t.setInitSelectCertificateLogic=t.initImportCertificate=t.setImportCertificate=t.setCertificateCheckLogic=t.saveSelectCertificateNameLogic=t.saveBeforeLogic=t.saveImportCertificateLogic=t.clearSelectCertificateOrkeysLogic=t.updateKeysUrlLogic=t.updateCertificateUrlLogic=t.uploadCertificateFile=t.hideImportCertificateModal=t.showImportCertificateContact=t.changeAutoLogin=t.deleteLoginPwd=t.deleteLoginInfo=t.setProxyInfo=t.setTempProxyInfo=t.setTempMediaxInfo=t.setServerAddress=t.setIsCACertCheckSupport=t.changeLoginInfo=t.renewFolderState=t.deleteLoginPWD=t.setLoginInfoSync=t.setLoginInfo=t.settingPageSetLoginRecord=t.setLoginRecord=t.openInAppBrowserMobile=t.cannotLogin=t.selectAccount=t.loadLoginSetting=t.initLoginStateFromConsole=t.showLoginInfo=t.loadLoginRecordList=t.hideServerAddress=t.showServerAddress=void 0;var c=n(135),u=r(c),f=n(123),l=r(f),d=n(3),p=r(d),h=n(1),g=r(h),v=n(2),m=r(v),_=n(118),C=(r(_),n(195)),w=n(136),S=n(261),I=coreLogger.getLogger("logic")("loginset"),E=(t.showServerAddress=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];I.info("userClick setAddressAndPort menu"),$dispatch(coreUi.showModal(e,t))},t.hideServerAddress=function(){var e=(0,m.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreLogger.getLogger("Click")("ServerAddress"),t.info("userClick cancel ServerAddress setting"),F(),window.goRoute("login");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.loadLoginRecordList=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISMOBILE||!window.isLoadLoginRecord){e.next=3;break}return!0===window.ifLogOut&&x(),e.abrupt("return",p.default.resolve(!1));case 3:return e.next=5,coreDb.queryAllLoginRecord();case 5:if(t=e.sent,0!==t.length){e.next=8;break}return e.abrupt("return");case 8:return n=[],t.forEach(function(e){var t=e.display_account;n.push(t)}),r=t[0].isAutoLogin,a=t[0].isMaxhubWorkplace,I.info("loadLoginRecordList isMaxhubWorkplace:",a),1===a&&window.isHubEnv&&(I.info("set window.CLIENTCONFIG.NEW_APP_NAME true for maxhub workplace login"),window.CLIENTCONFIG.NEW_APP_NAME="Workplace"),e.next=16,E(t[0],n,t);case 16:return window.isLoadLoginRecord=!0,e.abrupt("return",r);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showLoginInfo=function(){var e=(0,m.default)(g.default.mark(function e(t,n,r){var a,o,i,s,c,u,f,d,p,h,v;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:return a=e.sent,o=t.display_account,i=t.account,s=t.tenantid,c=t.encryptPassword,u=t.strUserRandom,f=t.isRememberPassWord,d=t.isAutoLogin,e.next=6,coreSecurity.decrypt({cipher:c,strSalt:u});case 6:return p=e.sent,a.password=p,h={displayAccount:o,account:i,tenantid:s,isRememberPassword:f,isAutoLogin:d,strUserRandom:u,encryptPassword:c},n&&(h.loginHistoryList=n),r&&(h.loginRecordList=r),v=isNullOrEmpty(p),(0,l.default)(h,{showPwd:v}),e.next=15,T(h);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),N=t.initLoginStateFromConsole=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCommon.getConsoleUrlVars();case 2:return t=e.sent,e.next=5,(0,C.getLoginModel)();case 5:if(n=e.sent,isNullOrEmpty(t)){e.next=15;break}if(r=t.page,isNullOrEmpty(r)||"login"!==r){e.next=15;break}return a=t.account,o=t.serverAddress,i=parseInt(t.serverPort),s={displayAccount:a,serverAddress:o,serverPort:i},n.set(s),e.abrupt("return",{serverAddress:o,serverPort:i});case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),b=(t.loadLoginSetting=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h,v,m,_,C,w,S,E,b,y,O,x,A,L,k,R,M,D,P,F,U,B,W,G;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0,e.next=3,N();case 3:return s=e.sent,e.next=6,coreCommon.getSystemProxySetting();case 6:if(c=e.sent,isNullOrEmpty(s)){e.next=13;break}t=s.serverAddress,n=s.middleEndAddress||window.SERVERCONFIG.MIDDLE_END_ADDRESS,r=s.serverPort,e.next=71;break;case 13:return e.next=15,coreDb.queryAllLoginSetting();case 15:return u=e.sent,f=u.find(function(e){return"serverAddress"===e.key}),l=u.find(function(e){return"middleEndAddress"===e.key}),d=u.find(function(e){return"serverPort"===e.key}),t=f?f.value:window.SERVERCONFIG.LOGIN_ADDRESS,n=l?l.value:window.SERVERCONFIG.MIDDLE_END_ADDRESS,r=f?d.value:window.SERVERCONFIG.LOGIN_PORT,p=u.find(function(e){return"tempMediaxAddress"===e.key}),h=u.find(function(e){return"tempMediaxPort"===e.key}),a=p?p.value:window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS,o=h?h.value:window.CLIENTCONFIG.TEMP_MEDIAX_PORT,v=u.find(function(e){return"lastDeployMode"===e.key}),i=v?parseInt(v.value):0,e.next=30,T({serverAddress:t,middleEndAddress:n,serverPort:r,tempMediaxAddress:a,tempMediaxPort:o,lastDeployMode:i});case 30:if(m=void 0,_=void 0,C=void 0,w=void 0,S=void 0,E=void 0,b=void 0,y=void 0,O=u.find(function(e){return"isSupportProxy"===e.key}),x=u.find(function(e){return"isUseSysProxy"===e.key}),A=u.find(function(e){return"proxyAddress"===e.key}),L=u.find(function(e){return"proxyPort"===e.key}),k=u.find(function(e){return"proxyAccount"===e.key}),R=u.find(function(e){return"proxyPassword"===e.key}),M=u.find(function(e){return"prxoyRandom"===e.key}),m=O?O.value:"0",_=x?x.value:"0",C=A?A.value:"",w=L?L.value:"",S=k?k.value:"",E=R?R.value:"",b=M?M.value:"",D=u.find(function(e){return"isSupportCACertCheck"===e.key}),P=D?D.value:"1",F=u.find(function(e){return"setIsShowShareRecommendationCircle"===e.key}),U=F?F.value:"1",I.info("loadLoginSetting [decrypt]"),""===E){e.next=58;break}return e.next=53,coreSecurity.getPasswordManager();case 53:return B=e.sent,W=B.setCipherPassword("proxyPassword",E,b),e.next=57,W.decryptPassword();case 57:E=e.sent;case 58:if(I.info("loadLoginSetting end [decrypt]"),I.info("systemProxySetting111: "),I.info("isUseSysProxyValue: ",_),"1"!==m||"1"!==_||isNullOrEmpty(c)){e.next=69;break}return C=c.proxyServer,w=c.proxyPort,m="1",_="1",G=[{key:"proxyAddress",value:C},{key:"proxyPort",value:w},{key:"isSupportProxy",value:m},{key:"isUseSysProxy",value:_}],e.next=69,coreDb.saveLoginSettings({args:G});case 69:return e.next=71,T({isSupportProxy:"1"===m,isUseSysProxy:"1"===_,proxyAddress:C,proxyPort:w,sysProxyAddress:isNullOrEmpty(c)?"":c.proxyServer,sysProxyPort:isNullOrEmpty(c)?"":c.proxyPort,proxyAccount:S,isSupportCACertCheck:"1"===P,isShowShareRecommendationCircle:window.CLIENTCONFIG.NEW_FUNCTION_RECOMMENDATION&&"1"===U});case 71:window.SERVERCONFIG.MIDDLE_END_ADDRESS=n,window.SERVERCONFIG.LOGIN_ADDRESS=t,window.SERVERCONFIG.LOGIN_PORT=r,window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS=a,window.CLIENTCONFIG.TEMP_MEDIAX_PORT=o,window.SERVERCONFIG.HWUC=0;case 77:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.selectAccount=function(){var e=(0,m.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginRecord({display_account:t});case 2:return n=e.sent,e.next=5,E(n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cannotLogin=function(e){I.info("login click forgetbutton ,open uportal from browser.");var t=1036===window.langcode?"fr_FR":1033===window.langcode?"en_US":"zh_CN",n="https://"+e+"/portal/forgetPassword.sraction?language="+t;appService.openUrl(n)},t.openInAppBrowserMobile=function(){var e=(0,m.default)(g.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"register";return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.openBrowerTimer&&clearTimeout(window.openBrowerTimer),window.openBrowerTimer=setTimeout(function(){T({loadPwd:!1}),window.InAppBrowserRef&&window.InAppBrowserRef.close(),alert(language.LOGIN_RESUME_NETWORK_ERROR)},2e4),I.info("openInAppBrowserMobile url="+t.substr(0,20)),window.offline?(I.info("openInAppBrowserMobile,network is unreachable"),alert(language.LOGIN_RESUME_NETWORK_ERROR)):(window.InAppBrowserRef=cordova.InAppBrowser.open(t,"_blank","location=no,zoom=no,useWideViewPort=no,toolbar=no,hidden=yes"),"register"===n?window.InAppBrowserRef.addEventListener("loadstart",a):"fogetPassword"===n&&window.InAppBrowserRef.addEventListener("loadstart",o),window.InAppBrowserRef.addEventListener("loadstop",s),window.InAppBrowserRef.addEventListener("loaderror",i)),I.info("openInAppBrowserMobile over");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setLoginRecord=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,v,m,_,w,S,E,N;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:return t=e.sent,n=t.displayAccount,r=t.account,a=t.tenantid,o=t.isRememberPassword,i=t.isAutoLogin,s=t.serverAddress,c=t.serverPort,u=t.deployMode,f=t.loginRecordList,e.next=14,coreSecurity.getPasswordManager();case 14:return d=e.sent,e.next=17,d.getPassword("password");case 17:if(p=e.sent,h=void 0,v=void 0,!(o=o||window.CLIENTCONFIG.ISMOBILE)){e.next=26;break}return e.next=23,coreSecurity.saveUserWithCrypt({strUserPwd:p,strAccount:r});case 23:m=e.sent,h=m.res,v=m.realRandom;case 26:return _={},f.forEach(function(e){e.tenantid!==a||isNullOrEmpty(a)||(_=e)}),e.next=30,coreDb.queryLoginRecord({account:r});case 30:if(w=e.sent,S=0,window.isHubEnv&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME||!isNullOrEmpty(w)&&w.isMaxhubWorkplace)&&(S=1),I.info("setLoginRecord isMaxhubWorkplace:",S),E={display_account:n,account:r,tenantcn:_.tenantcn||"",tenanten:_.tenanten||"",thirdaccount:_.thirdaccount||"",tenantid:a,thirdcertype:_.thirdcertype||!1,encryptPassword:o?h:"",strUserRandom:o?v:"",isRememberPassWord:o,isAutoLogin:i,time_stamp:(new Date).getTime(),isMaxhubWorkplace:S},isNullOrEmpty(_.account)||_.account===r){e.next=38;break}return e.next=38,coreDb.deleteLoginRecord({account:_.account});case 38:return e.next=40,coreDb.saveLoginRecord((0,l.default)(w,E));case 40:return N=[{key:"serverAddress",value:s},{key:"serverPort",value:c},{key:"lastDeployMode",value:u}],e.next=43,coreDb.saveLoginSettings({args:N});case 43:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.settingPageSetLoginRecord=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:return t=e.sent,n=t.account,r=t.isRememberPassword,a=t.isAutoLogin,e.next=8,coreSecurity.getPasswordManager();case 8:return o=e.sent,e.next=11,o.getPassword("password");case 11:if(i=e.sent,s=void 0,c=void 0,!r){e.next=19;break}return e.next=16,coreSecurity.saveUserWithCrypt({strUserPwd:i,strAccount:n});case 16:u=e.sent,s=u.res,c=u.realRandom;case 19:return f={encryptPassword:r?s:"",strUserRandom:r?c:"",isRememberPassWord:r,isAutoLogin:a,time_stamp:(new Date).getTime()},e.next=22,coreDb.queryLoginRecord({account:n});case 22:return d=e.sent,e.next=25,coreDb.saveLoginRecord((0,l.default)(d,f));case 25:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.saveLoginRecord=function(){b(),window.stroage.setFastLogin(!0)};var T=t.setLoginInfo=function(e){(0,C.getLoginModel)().then(function(t){t.set(e)})},y=t.setLoginInfoSync=function(e){(0,C.getSyncLoginModel)().set(e)},O=(t.deleteLoginPWD=function(e){e={password:""},(0,C.getLoginModel)().then(function(t){t.set(e)})},t.renewFolderState=function(e){(0,C.getLoginModel)().then(function(t){t.set(e)})},t.changeLoginInfo=function(e){var t=(0,C.getSyncLoginModel)(),n=e,r=n.displayAccount,a=n.isAutoLogin,o=n.isRememberPassword,i=(0,C.getSyncLoginModel)(),s=i.displayAccount,c=i.loginHistoryList,u=i.isRememberPassword,f=(0,C.getSyncLoginModel)(),d=f.showPwd;if(void 0===r&&!1===d&&void 0===a&&void 0===o&&(""===t.password||""===s&&""!==e.password)){(0,l.default)(e,{showPwd:!0})}if(void 0!==r&&r!==s){if(c.findIndex(function(e){return e===r})>-1)return e={displayAccount:r,account:window.SERVERCONFIG.HWUC?r.toLowerCase():r},void y(e);e={displayAccount:r,account:window.SERVERCONFIG.HWUC?r.toLowerCase():r,password:"",isRememberPassword:"",isAutoLogin:"",showPwd:""!==r},t.password=""}else a?e.isRememberPassword=!0:o||void 0===o||u===o||(e.isAutoLogin=!1);delete e.password,y(e)},t.setIsCACertCheckSupport=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isSupportCACertCheck,r=[{key:"isSupportCACertCheck",value:n?"1":"0"}],e.next=4,coreDb.bulkPutLoginSetting({settinglist:r});case 4:return e.next=6,T({isSupportCACertCheck:n});case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),void 0);window.getSystemProxy=function(){return O=new PromiseObject,window.electron.ipcRenderer.send("getSystemProxy-event"),p.default.race([O,sleep(1e4)])},window.updateSystemProxy=function(e){if(isNullOrEmpty(e))return void(O&&O.reject());var t=void 0;t="mac"===window.CLIENTCONFIG.PLATFORM?e.split("\n"):e.split(":");var n=void 0,r=void 0;if(!isNullOrEmpty(t))return t.length>=2?(n=t[0],r=t[1]):1===t.length?(n=t[1],r=""):(n="",r=""),T({sysProxyAddress:n,sysProxyPort:r}),void(O&&O.resolve({sysProxyAddress:n,sysProxyPort:r}));O&&O.reject()};var x=(t.setServerAddress=function(){var e=(0,m.default)(g.default.mark(function e(t,n,r){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:return a=e.sent,a.serverAddress===t&&a.serverPort===n||(I.info("entity.isReqAddrChanged in"),a.isReqAddrChanged=!0),o=[],i={},window.isHubEnv&&(i.serverAddress=t),isNullOrEmpty(t)||(o.push({key:"serverAddress",value:t}),i.serverAddress=t),isNullOrEmpty(n)||(o.push({key:"serverPort",value:n}),i.serverPort=n),isNullOrEmpty(r)||(o.push({key:"middleEndAddress",value:r}),i.middleEndAddress=r),e.next=12,coreDb.bulkPutLoginSetting({settinglist:o});case 12:return e.next=14,T(i);case 14:window.SERVERCONFIG.MIDDLE_END_ADDRESS=r||window.SERVERCONFIG.MIDDLE_END_ADDRESS,window.SERVERCONFIG.LOGIN_ADDRESS=t,window.SERVERCONFIG.LOGIN_PORT=n,window.SERVERCONFIG.HWUC=0,coreCommon.sha512(t)===constant.SERVER_ADDRESS_SHA512.HWUC?window.SERVERCONFIG.HWUC=1:window.SERVERCONFIG.HWUC=0;case 19:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.setTempMediaxInfo=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tempMediaxAddress,r=t.tempMediaxPort,e.next=3,T({tempMediaxAddress:n,tempMediaxPort:r});case 3:window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS=n,window.CLIENTCONFIG.TEMP_MEDIAX_PORT=r,coreConf.saveTempMediaxInfo();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setTempProxyInfo=function(){var e=(0,m.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({proxyAddress:t.proxyAddress,proxyPort:t.proxyPort});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setProxyInfo=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isSupportProxy,r=t.isUseSysProxy,a=t.proxyAddress,o=t.proxyPort,i=t.proxyAccount,s=t.proxyPassword,e.next=3,coreSecurity.getPasswordManager();case 3:return c=e.sent,e.next=6,c.getPassword("proxyPassword");case 6:return u=e.sent,e.next=9,c.setPassword("proxyPassword",s);case 9:return f=e.sent,e.next=12,(0,C.getLoginModel)();case 12:return l=e.sent,l.isSupportProxy===n&&l.proxyAddress===a&&l.proxyPort===o&&l.proxyAccount===i&&u===s||(I.info("entity.isReqAddrChanged in here"),l.isReqAddrChanged=!0),d=[{key:"isSupportProxy",value:n?"1":"0"},{key:"isUseSysProxy",value:r?"1":"0"},{key:"proxyAddress",value:a},{key:"proxyPort",value:o},{key:"proxyAccount",value:i},{key:"proxyPassword",value:f.cipher},{key:"prxoyRandom",value:f.salt}],e.next=17,coreDb.bulkPutLoginSetting({settinglist:d});case 17:return e.next=19,T({isSupportProxy:n,isUseSysProxy:r,proxyAddress:a,proxyPort:o,proxyAccount:i});case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteLoginInfo=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:if(n=e.sent,r=n.displayAccount,a=n.loginHistoryList,o=n.loginRecordList,i=o.find(function(e){return e.display_account===t}),isNullOrEmpty(i)){e.next=33;break}return e.next=10,coreDb.deleteLoginRecord({account:i.account});case 10:if(s=a.filter(function(e){return e!==t}),c=o.filter(function(e){return e.display_account!==t}),r!==t){e.next=18;break}return I.info("delete login account is some"),e.next=16,T({tenantid:"",displayAccount:"",account:"",password:"",isRememberPassword:"",isAutoLogin:"",loginHistoryList:s,loginRecordList:c});case 16:e.next=21;break;case 18:return I.info("delete login account is not some"),e.next=21,T({loginHistoryList:s,loginRecordList:c});case 21:return e.next=23,coreDb.releaseSQliteDBHandler();case 23:return e.prev=23,e.next=26,appService.deleteUserDir(i.account);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(23),I.info("deleteUserDir",e.t0);case 31:e.next=34;break;case 33:I.error("delete account failed");case 34:case"end":return e.stop()}},e,void 0,[[23,28]])}));return function(t){return e.apply(this,arguments)}}(),t.deleteLoginPwd=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,v,m;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,I.info("删除记录"),0!==t.length){e.next=6;break}return e.abrupt("return");case 6:return n=[],t.forEach(function(e){var t=e.display_account;n.push(t)}),r=t[0],a=r.display_account,o=r.account,i=r.tenantid,s="",c=!1,u=!1,f={display_account:a,account:o,tenantid:i,encryptPassword:"",strUserRandom:"",isRememberPassWord:c,isAutoLogin:u,time_stamp:(new Date).getTime()},e.next=15,coreDb.queryLoginRecord({account:o});case 15:return d=e.sent,e.next=18,coreDb.saveLoginRecord((0,l.default)(d,f));case 18:return e.next=20,coreDb.queryAllLoginRecord();case 20:if(p=e.sent,0!==p.length){e.next=23;break}return e.abrupt("return");case 23:return h=[],p.forEach(function(e){var t=e.display_account;h.push(t)}),v={displayAccount:a,account:o,password:s,loginHistoryList:h,isRememberPassword:c,isAutoLogin:u},window.ifLogOut=!1,e.next=29,(0,C.getLoginModel)();case 29:return m=e.sent,m.password="",e.next=33,T(v);case 33:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),A=(t.changeAutoLogin=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,v,m,_,C;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return");case 5:return n=[],t.forEach(function(e){var t=e.display_account;n.push(t)}),r=t[0],a=r.display_account,o=r.account,i=r.tenantid,s=r.encryptPassword,c=r.strUserRandom,u=r.isRememberPassWord,f=r.isAutoLogin,I.info("取消自动登录"),d=!1,p={display_account:a,account:o,tenantid:i,encryptPassword:"",strUserRandom:c,isRememberPassWord:!1,isAutoLogin:d,time_stamp:(new Date).getTime()},e.next=13,coreDb.queryLoginRecord({account:o});case 13:return h=e.sent,e.next=16,coreDb.saveLoginRecord((0,l.default)(h,p));case 16:return e.next=18,coreDb.queryAllLoginRecord();case 18:if(v=e.sent,0!==v.length){e.next=21;break}return e.abrupt("return");case 21:return m=[],v.forEach(function(e){var t=e.display_account;m.push(t)}),_={displayAccount:a,account:o,password:"",loginHistoryList:m,isRememberPassword:u,isAutoLogin:d,status:void 0},window.ifLogOut=!1,e.next=27,coreSecurity.getPasswordManager();case 27:return C=e.sent,C.setPassword("password",""),e.next=31,T(_);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showImportCertificateContact=function(){var e=(0,m.default)(g.default.mark(function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("userClick showImportCertificateContact menu"),$dispatch(coreUi.showModal(t,n));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.hideImportCertificateModal=function(){var e=(0,m.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("userClick hideImportCertificateModal menu"),coreUi.hideModal();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),L=(t.uploadCertificateFile=function(){var e=(0,m.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("uploadCertificateFile 选择证书上传"),n={},n.properties=["openFile"];try{window.electron.remote.dialog.showOpenDialog(n,function(e){if(!isNullOrEmpty(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=(0,u.default)(e);!(r=(i=s.next()).done);r=!0){var c=i.value;n.push(c)}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}t===constant.IMPORT_CERTIFICATE_TYPE.CERTIFICATE_TYPE?L(1===n.length&&n[0]||[]):t===constant.IMPORT_CERTIFICATE_TYPE.KEYS_TYPE&&k(1===n.length&&n[0]||[])}})}catch(e){I.error("uploadCertificateFile",e.toString())}case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateCertificateUrlLogic=function(e){(0,C.getLoginModel)().then(function(t){t.certificateUrl=e})}),k=t.updateKeysUrlLogic=function(e){(0,C.getLoginModel)().then(function(t){t.keysUrl=e})},R=t.clearSelectCertificateOrkeysLogic=function(){var e=(0,m.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:t=e.sent,t.certificateUrl="",t.keysUrl="";case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),M=(t.saveImportCertificateLogic=function(){var e=(0,m.default)(g.default.mark(function e(t,n,r){var a,o,i,s,c,u,f,l,d,p,h,v,m;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("saveImportCertificateLogic 导入证书"),e.prev=1,a=window.fs,o=window.path,i="",s="",c="",u="",o&&(i=o.win32.basename(t),s=o.win32.basename(n)),""!==i&&""!==s){e.next=9;break}return alert(language.CERTIFICATE_NAME_OR_KEY_NAME_CANNOT_BE_NULL),e.abrupt("return",!1);case 9:if(c=o.extname(i),u=o.extname(s),".pem"===c&&".pem"===u){e.next=14;break}return alert(language.ILLEGAL_CERTIFICATE_FORMAT_PLEASE_RESELECT),e.abrupt("return",!1);case 14:return e.next=16,B(t);case 16:if(f=e.sent){e.next=20;break}return alert(language.INCORRECT_OR_INVALID_CERTIFICATE),e.abrupt("return",!1);case 20:if(!a){e.next=34;break}return l=APP_DATA_PATH+"/ImpBfcpTLS",d=l+"/"+i,p=l+"/"+s,h=l+"/p4bfcp.txt",a.existsSync(l)?(v=a.readdirSync(l),v.forEach(function(e){a.unlinkSync(l+"/"+e)})):a.mkdirSync(l),e.next=28,M(t,d);case 28:return e.next=30,M(n,p);case 30:return e.next=32,coreSecurity.encryptKMC(r);case 32:m=e.sent,0===m.result&&a.writeFile(h,m.param.CiperText,function(e){if(e)throw e});case 34:return e.abrupt("return",!0);case 37:e.prev=37,e.t0=e.catch(1),I.error("saveImportCertificateLogic",e.t0.toString());case 40:case"end":return e.stop()}},e,void 0,[[1,37]])}));return function(t,n,r){return e.apply(this,arguments)}}(),function(){var e=(0,m.default)(g.default.mark(function e(t,n){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("readeContentToWriteFile 开始读写");try{fs.readFile(t,function(e,t){if(e)throw e;fs.writeFile(n,t,function(e){if(e)throw e})})}catch(e){I.error("readeContentToWriteFile",e.toString())}case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),D=(t.saveBeforeLogic=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments[2];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=window.fs,n=window.path,r="",a="",o="p4bfcp.txt",n&&(r=n.win32.basename(s),a=n.win32.basename(c)),t&&(i=APP_DATA_PATH+"/ImpBfcpTLS",t.readdir(i,function(e,t){t.includes(r)&&t.includes(a)&&t.includes(o)?window.alert(language.IMPORT_DEVICE_CERTIFICATE_SUCCESSFULLY).then(function(e){e.ret&&(R(),u.value="",A(),D(r),P(!1))}):window.alert(language.FAILED_IMPORT_DEVICE_CERTIFICATE_PLEASE_RE_IMPORT).then(function(e){e.ret&&(R(),u.value="")})}))}catch(e){I.error("saveBeforeLogic",e.toString())}case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.saveSelectCertificateNameLogic=function(e){I.info("saveSelectCertificateNameLogic",e),(0,C.getLoginModel)().then(function(t){t.certificateName=e})}),P=t.setCertificateCheckLogic=function(){var e=(0,m.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("setCertificateCheckLogic",t),e.next=3,(0,C.getLoginModel)();case 3:n=e.sent,n.selectCertificate=t;case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),F=(t.setImportCertificate=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("setImportCertificate"),n=t.selectCertificate,r=t.certificateName,e.next=4,coreDb.queryLoginSetting({key:"importCertificate"});case 4:return a=e.sent,e.next=7,coreDb.queryLoginSetting({key:"certificateName"});case 7:if(o=e.sent,"{}"===a&&(a=null),"{}"===o&&(o=null),isNullOrEmpty(a)||isNullOrEmpty(o)){e.next=25;break}if(o.value===r){e.next=16;break}return i=[{key:"certificateName",value:r}],e.next=15,coreDb.saveLoginSettings({args:i});case 15:D(r);case 16:if((s="true"===a.value)===n){e.next=23;break}return c=[{key:"importCertificate",value:n}],e.next=21,coreDb.saveLoginSettings({args:c});case 21:return e.next=23,P(n);case 23:e.next=30;break;case 25:return u=[{key:"importCertificate",value:n},{key:"certificateName",value:r}],e.next=28,coreDb.saveLoginSettings({args:u});case 28:return e.next=30,U(n,r);case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initImportCertificate=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("initImportCertificate"),e.prev=1,e.next=4,coreDb.queryLoginSetting({key:"importCertificate"});case 4:return t=e.sent,e.next=7,coreDb.queryLoginSetting({key:"certificateName"});case 7:if(n=e.sent,I.debug("initImportCertificate",t,n),"{}"===t&&(t=null),"{}"===n&&(n=null),I.debug("new initImportCertificate",t,n),isNullOrEmpty(t)||isNullOrEmpty(n)){e.next=16;break}if(""===n.value){e.next=16;break}return e.next=16,U("true"===t.value,n.value);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),I.error("initImportCertificate",e.t0.toString());case 21:case"end":return e.stop()}},e,void 0,[[1,18]])}));return function(){return e.apply(this,arguments)}}()),U=t.setInitSelectCertificateLogic=function(){var e=(0,m.default)(g.default.mark(function e(t,n){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("setInitSelectCertificateLogic"),e.next=3,(0,C.getLoginModel)();case 3:r=e.sent,r.selectCertificate=t,r.certificateName=n;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),B=t.verificationCertificateLogic=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("verificationCertificateLogic"),e.prev=1,e.next=4,(0,S.verifyCertificate)(t);case 4:if(n=e.sent,0===n.result){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,(0,S.checkCertificateOverdue)(t);case 11:if(r=e.sent,a=r.param&&r.param.expire_time,o=a.ulUTCSec+"000",i=(new Date).getTime,!(0===r.result&&i-o>0)){e.next=17;break}return e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 20:e.prev=20,e.t0=e.catch(1),I.error("verificationCertificateLogic",e.t0.toString());case 23:case"end":return e.stop()}},e,void 0,[[1,20]])}));return function(t){return e.apply(this,arguments)}}(),W=t.dbInitCertificateLogic=function(){var e=(0,m.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("dbInitCertificateLogic"),t=[{key:"importCertificate",value:""},{key:"certificateName",value:""}],e.next=4,coreDb.saveLoginSettings({args:t});case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.loginforverificationCertificateLogic=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("loginforverificationCertificateLogic"),e.prev=1,t=window.fs,n=!0,!t){e.next=29;break}if(r=APP_DATA_PATH+"/ImpBfcpTLS",a=r+"/server.pem",t.existsSync(r)){e.next=12;break}I.debug("用户文档下没有了设备证书目录"),n=!1,e.next=29;break;case 12:if(o=t.readdirSync(r),!(o.includes("server.pem")&&o.includes("server_key.pem")&&o.includes("p4bfcp.txt"))){e.next=27;break}return e.next=16,B(a);case 16:if(i=e.sent){e.next=25;break}return I.debug("导入的证书不正确或者证书已经失效，自动使用默认证书"),e.next=21,U(!0,"");case 21:n=!1,o.forEach(function(e){t.unlinkSync(r+"/"+e)}),t.rmdirSync(r),W();case 25:e.next=29;break;case 27:I.debug("ImpBfcpTLS目录下没有文件"),n=!1;case 29:return e.abrupt("return",n);case 32:e.prev=32,e.t0=e.catch(1),I.error("loginforverificationCertificateLogic",e.t0.toString());case 35:case"end":return e.stop()}},e,void 0,[[1,32]])}));return function(){return e.apply(this,arguments)}}();window.handleJoinImpVcName=function(e){if(!window.isOffline)return void alert(language.IN_CASE_ONLINE_YOU_CANNOT_IMPORT_CERTIFICATE);isNullOrEmpty(e)?window.ToastNew(language.FAILED_TO_IMPORT_THE_CERTIFICATE,2):(window.goRoute("loginCtn"),q(),window.confirm(language.DOES_THE_DETECTION_ATTACHMENT_HAVE_CERTIFICATE).then(function(t){if(t.ret){window.MLoad(language.DURING_THE_SURVEY_PLEASE_WAIT,!0,"probeLoad");var n=null;clearTimeout(n),n=setTimeout(function(){appService.unzipOfZipPackage(e)},2e3)}}))},window.setProbeZipPackageResult=function(e){G(e)};var G=function(e){switch(window.removeMLoad(),e.resultCode){case constant.PROBE_COMPRESSED_PACKAGE.PROBE_NOT_EXIST:alert(language.IMPORTED_FILE_DOES_NOT_EXIST);break;case constant.PROBE_COMPRESSED_PACKAGE.PROBE_NO_CERTIFICATE_EXIST:alert(language.CERTIFICATE_DOES_NOT_EXIST);break;case constant.PROBE_COMPRESSED_PACKAGE.PROBE_CERTIFICATE_EXIST:V(e);break;default:window.ToastNew(language.PROBE_FAILED,2)}},V=t.probeImportCertificateLogic=function(e){new p.default(function(t){window.MLoad(language.SUCCESSFUL_DETECTION_IMPORT,!0,"probeLoad"),H(e.serverPem,e.serverKeyPem),$(e.zipUrl),t("OK")}).then(function(e){if("OK"===e){new p.default(function(e){window.MLoad(language.AUTOMATIC_MATCHING_COMPLETED,!1,"probeLoad"),e("Y")}).then(function(e){if("Y"===e){var t=null;clearTimeout(t),t=setTimeout(function(){window.goRoute("mLoginMoreSet"),window.goRoute("mImportCertificate"),window.goRoute("mSelectImpCertPage"),window.removeMLoad()},1e3)}})}})},H=t.setMProveAndKeyLogic=function(e,t){I.info("setMProveAndKeyLogic"),(0,C.getLoginModel)().then(function(n){n.mProveUrl=e,n.mkeysUrl=t})},$=t.setMSaveZipUrlLogic=function(e){I.info("setMSaveZipUrlLogic"),(0,C.getLoginModel)().then(function(t){t.mZipUrl=e})},j=t.setMProveNameAndSelectItLogic=function(e,t){I.info("setMProveNameAndSelectItLogic"),(0,C.getLoginModel)().then(function(n){n.mProveName=e,n.mSelectProve=t})};t.setMSelectItLogic=function(){var e=(0,m.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("setMSelectItLogic"),(0,C.getLoginModel)().then(function(e){e.mSelectProve=t});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.mobileImptProveLogic=function(){var e=(0,m.default)(g.default.mark(function e(t,n,r){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.encryptKMC(t);case 2:if(a=e.sent,0!==a.result){e.next=9;break}return e.next=6,(0,C.getLoginModel)();case 6:o=e.sent,i=o.mZipUrl,appService.mImptProve(a.param.CiperText,n,r,i);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}();window.sendSetInitialValueToProbeResult=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(t)||""===t.serverPem){e.next=8;break}return n=window.EXEC_PATH+"/"+t.imptPath,r=n+"/"+t.serverPem,e.next=5,B(r);case 5:a=e.sent,I.info("sendSetInitialValueToProbeResult 证书校验: ",a),a?j(t.serverPem,!1):I.info(language.INCORRECT_OR_INVALID_CERTIFICATE);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.sendIsImportSuccessfulResult=function(e){if("200"===e.imptResultCode&&""!==e.serverName){I.info("导入证书成功"),window.MLoad(language.IMPORT_CERTIFICATE_SUCCESSFULLY,!1,"probeLoad");var t=null;clearTimeout(t),t=setTimeout(function(){window.history.back(),j(e.serverName,!1),window.removeMLoad()},1e3)}else alert(language.IMPORT_FAILED_PLEASE_TRY_AGAIN)};var q=(t.cancelImpSelectDone=function(){I.info("userClick  back btn"),window.goRoute("mImportCertificate")},t.clearImptZipUrlDataLogic=function(){var e=(0,m.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:H("",""),$("");case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.initMImportCertificate=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:t=e.sent,n=t.mSelectProve,appService.logoutAndFreeLoginInitProve(n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.actionLogoutAndFreeloginHandler=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(t)||""===t.serverPem){e.next=8;break}return n=window.EXEC_PATH+"/"+t.imptPath,r=n+"/"+t.serverPem,e.next=5,B(r);case 5:a=e.sent,I.info("sendSetInitialValueToProbeResult 证书校验: ",a),a?j(t.serverPem,!1):I.info("证书不正确或证书已经失效");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.unzipOfZipPackageResult=function(e,t,n,r){G({serverPem:e||"",serverKeyPem:t||"",resultCode:n||"0",zipUrl:""})},window.mImptProveResult=function(e,t){if("200"===t&&""!==e){I.info("导入证书成功"),window.MLoad(language.IMPORT_CERTIFICATE_SUCCESSFULLY,!1,"probeLoad");var n=null;clearTimeout(n),n=setTimeout(function(){window.history.back(),j(e,!1),window.removeMLoad()},1e3)}else alert(language.IMPORT_FAILED_PLEASE_TRY_AGAIN)},window.initJudgeDirExistProveResult=function(){var e=(0,m.default)(g.default.mark(function e(t,n,r){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=8;break}return a=window.EXEC_PATH+"/"+n,o=a+"/"+t,e.next=5,B(o);case 5:i=e.sent,I.info("sendSetInitialValueToProbeResult 证书校验: ",i),i?j(t,!1):I.info(language.INCORRECT_OR_INVALID_CERTIFICATE);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}();t.isInLoginRecordList=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:return n=e.sent,r=n.some(function(e){return e.account===t}),e.next=6,(0,C.getLoginModel)();case 6:a=e.sent,a.whetherInLoginRecordList=r;case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.isPcFirstInstall=function(){var e=(0,m.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.getItem("");case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isAccountAutoLogin=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return",!1);case 5:return n=t[0].isAutoLogin,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initPcFirstPage=function(){var e=(0,m.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.CLIENTCONFIG.PRIVACY_VERSION_VALUE,window.CLIENTCONFIG.ISBIGWIN||(t=window.localStorage.getItem("isFirstInstall")),"2052"===window.langcode&&(window.document.title=window.CLIENTCONFIG.NEW_APP_CHINEASE_NAME),!window.isHubEnv){e.next=10;break}delegate(function(){(0,w.getMyInfo)().then(function(e){e.languageCode=window.langcode})},"updateLanguage"),window.goRoute("maxhubLogin"),coreCommon.verificationCertificate(),coreConf.NotifyAppStared(0),e.next=31;break;case 10:if(!window.isPluginEnv){e.next=16;break}return e.next=13,coreCommon.initLogin(!1);case 13:I.info("init plugin first page"),e.next=31;break;case 16:if(window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===t){e.next=26;break}return I.info("First install or privacy statement updated"),appService.showMainWindow(!1),e.next=21,appService.initLoginTray();case 21:return e.next=23,window.setLoginSize();case 23:window.CLIENTCONFIG.ISBIGWIN?window.goRoute("login"):(window.goRoute("firstLoginPrivacy"),appService.showMainWindow(!0)),e.next=31;break;case 26:if(window.CLIENTCONFIG.ISBIGWIN){e.next=29;break}return e.next=29,window.setLoginSize();case 29:window.goRoute("login"),coreCommon.verificationCertificate();case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},169:function(e,t,n){n(170),e.exports=n(8).Object.keys},1697:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfImpl=t.getConfApi=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(119),f=a(u),l=n(4),d=a(l),p=n(120),h=a(p),g=n(121),v=a(g),m=n(651),_=r(m),C=n(249),w=r(C),S=n(405),I=n(357),E=r(I),N=n(650),b=n(1698),T=a(b),y=coreLogger.getLogger("conf")("confImpl"),O=void 0,x=(t.getConfApi=function(){return isNullOrEmpty(O)&&(O=new x),O},t.ConfImpl=function(e){function t(){var e=this;(0,d.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return n.confctrlInit=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("confctrlInit"),e.next=3,n.unInit();case 3:return e.next=5,n.init();case 5:return e.next=7,w.confctrlInit();case 7:case"end":return e.stop()}},t,e)})),n.unInitConfCtrl=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("unInitConfCtrl"),e.next=3,n.unInit();case 3:case"end":return e.stop()}},t,e)})),n.createConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("createConf"),e.next=3,n.init();case 3:return e.next=5,_.createConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.p2pTransferConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("p2pTransferConf"),e.next=3,n.init();case 3:return e.next=5,_.p2pTransferConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.oneKeyEnterConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("oneKeyEnterConfService"),e.next=3,n.init();case 3:return e.next=5,_.oneKeyEnterConfService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterConfInConfListService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("enterConfInConfListService"),e.next=3,n.init();case 3:return e.next=5,_.enterConfInConfListService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterConfByIdOnlyService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("enterConfByIdOnlyService"),e.next=3,n.init();case 3:return e.next=5,_.enterConfByIdOnlyService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.rejectConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("rejectConfService"),e.next=3,n.init();case 3:return e.next=5,w.rejectConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.acceptConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("acceptConfService"),e.next=3,n.init();case 3:return e.next=5,w.acceptConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.upgradeConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("upgradeConf"),e.next=3,n.init();case 3:return e.next=5,w.upgradeConf();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)})),n.leaveConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("leaveConf"),E.terminateReCall(),e.next=4,n.init();case 4:return e.next=6,_.leaveConf();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},t,e)})),n.endConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("endConf"),E.terminateReCall(),e.next=4,n.init();case 4:return e.next=6,_.endConf();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},t,e)})),n.bookConf=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("bookConf"),e.next=3,n.init();case 3:return e.next=5,w.bookConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.cancelConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("cancelConfService"),e.next=3,n.init();case 3:return e.next=5,w.cancelConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getVMRListService=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("getVMRListService"),e.next=3,n.init();case 3:return e.next=5,w.getVRMList();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)})),n.getConfListService=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("getConfListService"),e.next=3,n.init();case 3:return e.next=5,w.getConfList();case 5:case"end":return e.stop()}},t,e)})),n.subscribeConfList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("subscribeConfListService"),e.next=3,n.init();case 3:return e.next=5,w.subscribeConfList();case 5:case"end":return e.stop()}},t,e)})),n.getConfInfoService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("getConfInfoService"),e.next=3,n.init();case 3:return e.next=5,w.getConfInfoService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.reInviteAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("reInviteAttendee"),e.next=3,n.init();case 3:return e.next=5,w.reInviteAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.addAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("addAttendee"),e.next=3,n.init();case 3:return e.next=5,w.addAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.hangupAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("hangupAttendeeService"),e.next=3,n.init();case 3:return e.next=5,w.hangupAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.callAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("callAttendee"),e.next=3,n.init();case 3:return e.next=5,w.callAttendee(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.removeAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("removeAttendeeService"),e.next=3,n.init();case 3:return e.next=5,w.removeAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.muteAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("muteAttendeeService"),e.next=3,n.init();case 3:return e.next=5,w.muteAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handupService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("handupService"),e.next=3,n.init();case 3:return e.next=5,w.handupService(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.muteConf=function(){var t=(0,c.default)(i.default.mark(function t(r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("muteConf"),e.next=3,n.init();case 3:return e.next=5,w.muteConf(r,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.lockConfService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("lockConfService"),e.next=3,n.init();case 3:return e.next=5,w.lockConf(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.postponeConfSerivce=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("postponeConfSerivce"),e.next=3,n.init();case 3:return e.next=5,w.postponeConf(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.releaseChairman=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("releaseChairman"),e.next=3,n.init();case 3:return e.next=5,w.releaseChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.requestChairman=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("requestChairman"),e.next=3,n.init();case 3:return e.next=5,w.requestChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.transferChairmanService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("transferChairmanService"),e.next=3,n.init();case 3:return e.next=5,w.transferChairman(r);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.broadcastAttendeeService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("broadcastAttendeeService"),e.next=3,n.init();case 3:return e.next=5,w.broadcastAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.sendWatchSvcRequestService=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("sendWatchSvcRequestService"),e.next=3,n.init();case 3:return e.next=5,w.sendWatchSvcRequest(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.confctrlWatchAttendee=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("confctrlWatchAttendee"),e.next=3,n.init();case 3:return e.next=5,w.confctrlWatchAttendee(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.changeActiveDirection=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("changeActiveDirection"),e.next=3,n.init();case 3:return e.next=5,w.changeActiveDirection(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.cloudRecordRequest=function(){var t=(0,c.default)(i.default.mark(function t(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("cloudRecordRequest"),e.next=3,n.init();case 3:return e.next=5,w.cloudRecordRequest(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.updateConfMemberList=function(e){w.updateConfMemberList(e)},n.changeConfSelfRole=function(e){w.changeConfSelfRole(e)},n.isInConf=function(){return w.isInConf()},n.isNeedUpdate2DataConf=function(){return w.isNeedUpdate2DataConf()},n.isConfChairMan=function(){return w.isConfChairMan()},n.getIsSmcFirstRequestCharimanRest=function(){return w.getIsSmcFirstRequestCharimanRest()},n.setIsSmcFirstRequestCharimanRest=function(e){w.setIsSmcFirstRequestCharimanRest(e)},n.getIsFirstEnterConf=function(){return w.getIsFirstEnterConf()},n.setIsFirstEnterConf=function(e){w.getIsFirstEnterConf(e)},n.getIsRecall=function(){return w.getIsRecall()},n.isMemberListNull=function(){return w.isMemberListNull()},n.getConfMemberListContent=function(){return w.getConfMemberListContent()},n.getSavedRecallInfo=function(){return w.getSavedRecallInfo()},n.getCurrentConfId=function(){return w.getCurrentConfId()},n.setIsAvcMultiViewBroadcast=function(e){w.setIsAvcMultiViewBroadcast(e)},n.getIsAvcMultiViewBroadcast=function(){return w.getIsAvcMultiViewBroadcast()},n.getIsVideoConf=function(){return w.isVideoConf()},n.getIsDataConf=function(){return w.isDataConf()},n.getIsSvcConf=function(){return w.isSvcConf()},n.getSsrcRange=function(){return w.getSsrcRange()},n.getInfoOfConf=function(e){return w.getInfoOfConf(e)},n.init=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.confctrlInitAtomic.wait();case 2:return y.info("confctrlInitAtomic.wait success"),e.next=5,_.setConfNotifyFuncAtomic.wait();case 5:y.info("setConfNotifyFuncAtomic.wait success");case 6:case"end":return e.stop()}},t,e)})),n.unInit=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.confctrlInitAtomic.reset();case 2:case"end":return e.stop()}},t,e)})),n.unSubscribeConfList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.unSubscribeConfList();case 2:case"end":return e.stop()}},t,e)})),n.isInReCall=function(){return E.isInReCall()},n.terminateReCall=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.terminateReCall();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.reCallStart=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.reCallStart(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.reCallEnterConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.reCallEnterConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getConfInfoMap=function(){return N.confInfoMap},n}return(0,v.default)(t,e),t}(T.default))},1698:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.confctrlInit=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.unInitConfCtrl=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.createConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.p2pTransferConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.oneKeyEnterConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterConfInConfListService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterConfByIdOnlyService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.rejectConfService=function(e){},r.acceptConfService=function(e){},r.upgradeConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.leaveConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.endConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.bookConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.cancelConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getVMRListService=function(){},r.getConfListService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.subscribeConfList=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getConfInfoService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.reInviteAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.addAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.hangupAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.callAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.removeAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.muteAttendeeService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handupService=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.muteConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.lockConfService=function(e){},r.postponeConfSerivce=function(e){},r.releaseChairman=function(e){},r.requestChairman=function(e){},r.transferChairmanService=function(e){},r.broadcastAttendeeService=function(e){},r.sendWatchSvcRequestService=function(e){},r.confctrlWatchAttendee=function(e){},r.changeActiveDirection=function(e){},r.cloudRecordRequest=function(e){},r.updateConfMemberList=function(e){},r.changeConfSelfRole=function(e){},r.isInConf=function(){},r.isNeedUpdate2DataConf=function(){},r.isConfChairMan=function(){},r.getIsSmcFirstRequestCharimanRest=function(){},r.setIsSmcFirstRequestCharimanRest=function(e){},r.getIsFirstEnterConf=function(){},r.setIsFirstEnterConf=function(e){},r.getIsRecall=function(){},r.isMemberListNull=function(){},r.getConfMemberListContent=function(){},r.getSavedRecallInfo=function(){},r.getCurrentConfId=function(){},r.setIsAvcMultiViewBroadcast=function(e){},r.getIsAvcMultiViewBroadcast=function(){},r.getIsVideoConf=function(){},r.getIsDataConf=function(){},r.getIsSvcConf=function(){},r.getSsrcRange=function(){},r.getInfoOfConf=function(){},r.unSubscribeConfList=function(){},r.isInReCall=function(){},r.terminateReCall=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.reCallStart=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.reCallEnterConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getConfInfoMap=function(){},a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},1699:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.bigWinConfApiImpl=t.getBigWinConfApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(120),g=r(h),v=n(121),m=r(v),_=n(1700),C=r(_),w=n(947),S=n(948),I=n(358),E=r(I),N=n(250),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(N),T=n(855),y=n(950),O=n(951),x=coreLogger.getLogger("module")("conf"),A=window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN,L=void 0,k=(t.getBigWinConfApi=function(){return isNullOrEmpty(L)&&(L=new k),L},t.bigWinConfApiImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return n.initConf=(0,s.default)(o.default.mark(function t(){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=8;break}n.initBigwinWebSocket(),(0,w.initWebSocketAPI)(),(0,w.registerBigWinEvent)(),e.next=17;break;case 8:if(!window.isHubEnv){e.next=17;break}return x.info("It's maxhub environment, set isHubEnv=true"),r=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE+"_IWB",coreUt.utConfigAppId({configAppId:r}),(0,w.registerMaxhubEvent)(),a={pairCode:0,validTime:0,tmpKey:""},(0,S.creatQrCodeSvg)(a),e.next=17,(0,w.initWebSocketAPI)();case 17:case"end":return e.stop()}},t,e)})),n.NotifyLoginSuccess=function(){if(A)return b.NotifyLoginSuccess()},n.NotifyLoginFailed=function(e){if(A)return b.NotifyLoginFailed(e)},n.NotifyConfTermination=function(e){if(A)return b.NotifyConfTermination(e)},n.NotifyConfNoStart=function(e){if(A)return b.NotifyConfNoStart(e)},n.NotifyMyKickedOut=function(e){if(A)return b.NotifyMyKickedOut(e)},n.NotifyStartSharing=function(e,t){if(A)return b.NotifyStartSharing(e,t)},n.NotifyStopSharing=function(e,t){if(A)return b.NotifyStopSharing(e,t)},n.NotifyLocalStartSharing=function(e,t){if(A)return b.NotifyLocalStartSharing(e,t)},n.NotifyLocalStopSharing=function(e,t){if(A)return b.NotifyLocalStopSharing(e,t)},n.NotifyMyJoinConf=function(e,t){if(A)return b.NotifyMyJoinConf(e,t)},n.NotifyMyLeaveConf=function(e){if(A)return b.NotifyMyLeaveConf(e)},n.NotifyJoinConfFailed=function(e){if(A)return b.NotifyJoinConfFailed(e)},n.NotifyLocalMICStatus=function(e,t){if(A)return b.NotifyLocalMICStatus(e,t)},n.NotifyLocalSPKStatus=function(e,t){if(A)return b.NotifyLocalSPKStatus(e,t)},n.NotifyLocalMicVolue=function(e,t){if(A)return b.NotifyLocalMicVolue(e,t)},n.NotifyLocalSpkVolue=function(e,t){if(A)return b.NotifyLocalSpkVolue(e,t)},n.NotifyLocalMicPull=function(e,t,n){if(A)return b.NotifyLocalMicPull(e,t,n)},n.NotifyLocalSpkPull=function(e,t,n){if(A)return b.NotifyLocalSpkPull(e,t,n)},n.NotifyLocalCameraPull=function(e,t,n){if(A)return b.NotifyLocalCameraPull(e,t,n)},n.NotifyLocalCameraStatus=function(e,t){if(A)return b.NotifyLocalCameraStatus(e,t)},n.NotifySharingAppClouse=function(e,t){return b.NotifySharingAppClouse(e,t)},n.NotifyCameraListUpdate=function(e){if(A)return b.NotifyCameraListUpdate(e)},n.NotifyDeviceListReady=function(){return b.NotifyDeviceListReady()},n.NotifyJoinConfFailedEx=function(e){return b.NotifyJoinConfFailedEx(e)},n.NotifyLoginFailedEx=function(e){if(A)return b.NotifyLoginFailedEx(e)},n.NotifyAppStared=function(e){if(A)return b.NotifyAppStared(e)},n.NotifySharingType=function(e,t){if(A)return b.NotifySharingType(e,t)},n.NotifySipRegisterd=function(e){if(A)return b.NotifySipRegisterd(e)},n.NotifySkipLogin=function(e){if(A)return b.NotifySkipLogin(e)},n.NotifyShareResult=function(e,t,n){if(A)return b.NotifyShareResult(e,t,n)},n.NotifyGetUpdateFiles=function(e,t){if(A)return b.NotifyGetUpdateFiles(e,t)},n.setServerIp=function(e){if(A)return(0,T.setServerIp)(e)},n.buriedJoinConfFailed=function(){var t=(0,s.default)(o.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,T.joinConfFailed)(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.buriedNormalEnd=function(e,t,n){if(A)return(0,y.normalEnd)(e,t,n)},n.buriedUnormalEnd=function(e,t){if(A)return(0,y.unnormalEnd)(e,t)},n.buriedStartRecordQos=function(){if(A)return(0,O.startRecordQos)()},n.buriedJoinConfSuccess=function(){var t=(0,s.default)(o.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4096,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,T.joinConfSuccess)(n,r,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.buriedStartCalcCPUUsage=function(){if(A)return(0,T.startCalcCPUUsage)()},n.buriedShareScreenOper=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,T.shareScreenOper)(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.buriedRemoteScreenShare=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,T.remoteScreenShare)(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n}return(0,m.default)(t,e),(0,p.default)(t,[{key:"initBigwinWebSocket",value:function(){A&&(new E.default,coreSecurity.getHWTupSupport(),coreTup.getConfCtrlInstance(),coreTup.getToolInstance(),coreTup.getdataConfInstance(),coreTup.getNativeWindowInstance(),coreDb.queryLoginSetting({key:"init-query"}))}}]),t}(C.default))},170:function(e,t,n){var r=n(130),a=n(162);n(137)("keys",function(){return function(e){return a(r(e))}})},1700:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.initConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.NotifyLoginSuccess=function(){},r.NotifyLoginFailed=function(e){},r.NotifyConfTermination=function(e){},r.NotifyConfNoStart=function(e){},r.NotifyMyKickedOut=function(e){},r.NotifyStartSharing=function(e,t){},r.NotifyStopSharing=function(e,t){},r.NotifyLocalStartSharing=function(e,t){},r.NotifyLocalStopSharing=function(e,t){},r.NotifyMyJoinConf=function(e,t){},r.NotifyMyLeaveConf=function(e){},r.NotifyJoinConfFailed=function(e){},r.NotifyLocalMICStatus=function(e,t){},r.NotifyLocalSPKStatus=function(e,t){},r.NotifyLocalMicVolue=function(e,t){},r.NotifyLocalSpkVolue=function(e,t){},r.NotifyLocalMicPull=function(e,t,n){},r.NotifyLocalSpkPull=function(e,t,n){},r.NotifyLocalCameraPull=function(e,t,n){},r.NotifyLocalCameraStatus=function(e,t){},r.NotifySharingAppClouse=function(e,t){},r.NotifyCameraListUpdate=function(e){},r.NotifyDeviceListReady=function(){},r.NotifyJoinConfFailedEx=function(e){},r.NotifyLoginFailedEx=function(e){},r.NotifyAppStared=function(e){},r.NotifySharingType=function(e,t){},r.NotifySipRegisterd=function(e){},r.NotifySkipLogin=function(e){},r.NotifyShareResult=function(e,t,n){},r.NotifyGetUpdateFiles=function(e,t){},r.setServerIp=function(e){},r.buriedJoinConfFailed=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.buriedNormalEnd=function(e,t,n){},r.buriedUnormalEnd=function(e,t){},r.buriedStartRecordQos=function(){},r.buriedJoinConfSuccess=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.buriedStartCalcCPUUsage=function(){},r.buriedShareScreenOper=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.buriedRemoteScreenShare=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},1701:function(e,t,n){"use strict";(function(t,r){function a(e,t){e="string"==typeof e?{ec_level:e}:e||{};var n={type:String(t||e.type||"png").toLowerCase()},r="png"==n.type?p:h;for(var a in r)n[a]=a in e?e[a]:r[a];return n}function o(e,n){n=a(n);var r=u(e,n.ec_level,n.parse_url),o=new c;switch(o._read=d,n.type){case"svg":case"pdf":case"eps":t.nextTick(function(){l[n.type](r,o,n.margin,n.size)});break;case"svgpath":t.nextTick(function(){var e=l.svg_object(r,n.margin,n.size);o.push(e.path),o.push(null)});break;case"png":default:t.nextTick(function(){var e=f.bitmap(r,n.size,n.margin);n.customize&&n.customize(e),f.png(e,o)})}return o}function i(e,t){t=a(t);var n,o=u(e,t.ec_level,t.parse_url),i=[];switch(t.type){case"svg":case"pdf":case"eps":l[t.type](o,i,t.margin,t.size),n=i.filter(Boolean).join("");break;case"png":default:var s=f.bitmap(o,t.size,t.margin);t.customize&&t.customize(s),f.png(s,i),n=r.concat(i.filter(Boolean))}return n}function s(e,t){t=a(t,"svg");var n=u(e,t.ec_level);return l.svg_object(n,t.margin)}var c=n(283).Readable,u=n(1702).QR,f=n(1706),l=n(1715),d=function(){},p={parse_url:!1,ec_level:"M",size:5,margin:4,customize:null},h={parse_url:!1,ec_level:"M",margin:1,size:0};e.exports={matrix:u,image:o,imageSync:i,svgObject:s}}).call(t,n(148),n(132).Buffer)},1702:function(e,t,n){"use strict";(function(t){function r(e){return JSON.parse(JSON.stringify(e))}function a(e,t){var n,a=1;for(e.data1?n=Math.ceil(e.data1.length/8):a=10;a<10;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}for(e.data10?n=Math.ceil(e.data10.length/8):a=27;a<27;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}for(n=Math.ceil(e.data27.length/8);a<41;a++){var o=l[a][t];if(o.data_len>=n)return r(o)}throw new Error("Too much data")}function o(e,n){var r=new t(n.data_len);r.fill(0),e=n.version<10?e.data1:n.version<27?e.data10:e.data27;for(var a=e.length,o=0;o<a;o+=8){for(var i=0,s=0;s<8;s++)i=i<<1|(e[o+s]?1:0);r[o/8]=i}for(var u=236,o=Math.ceil((a+4)/8);o<r.length;o++)r[o]=u,u=236==u?17:236;var f=0;return n.blocks=n.blocks.map(function(e){var t=r.slice(f,f+e);return f+=e,n.ec.push(c(t,n.ec_len)),t}),n}function i(e,t,n){t=f.indexOf(t)>-1?t:"M";var r=s(e,n),i=o(r,a(r,t));return u.getMatrix(i)}var s=n(1703),c=n(1704),u=n(1705),f=["L","M","Q","H"],l=[[],[26,7,1,10,1,13,1,17,1],[44,10,1,16,1,22,1,28,1],[70,15,1,26,1,36,2,44,2],[100,20,1,36,2,52,2,64,4],[134,26,1,48,2,72,4,88,4],[172,36,2,64,4,96,4,112,4],[196,40,2,72,4,108,6,130,5],[242,48,2,88,4,132,6,156,6],[292,60,2,110,5,160,8,192,8],[346,72,4,130,5,192,8,224,8],[404,80,4,150,5,224,8,264,11],[466,96,4,176,8,260,10,308,11],[532,104,4,198,9,288,12,352,16],[581,120,4,216,9,320,16,384,16],[655,132,6,240,10,360,12,432,18],[733,144,6,280,10,408,17,480,16],[815,168,6,308,11,448,16,532,19],[901,180,6,338,13,504,18,588,21],[991,196,7,364,14,546,21,650,25],[1085,224,8,416,16,600,20,700,25],[1156,224,8,442,17,644,23,750,25],[1258,252,9,476,17,690,23,816,34],[1364,270,9,504,18,750,25,900,30],[1474,300,10,560,20,810,27,960,32],[1588,312,12,588,21,870,29,1050,35],[1706,336,12,644,23,952,34,1110,37],[1828,360,12,700,25,1020,34,1200,40],[1921,390,13,728,26,1050,35,1260,42],[2051,420,14,784,28,1140,38,1350,45],[2185,450,15,812,29,1200,40,1440,48],[2323,480,16,868,31,1290,43,1530,51],[2465,510,17,924,33,1350,45,1620,54],[2611,540,18,980,35,1440,48,1710,57],[2761,570,19,1036,37,1530,51,1800,60],[2876,570,19,1064,38,1590,53,1890,63],[3034,600,20,1120,40,1680,56,1980,66],[3196,630,21,1204,43,1770,59,2100,70],[3362,660,22,1260,45,1860,62,2220,74],[3532,720,24,1316,47,1950,65,2310,77],[3706,750,25,1372,49,2040,68,2430,81]];l=l.map(function(e,t){if(!t)return{};for(var n={},r=1;r<8;r+=2){for(var a=e[0]-e[r],o=e[r+1],i=f[r/2|0],s={version:t,ec_level:i,data_len:a,ec_len:e[r]/o,blocks:[],ec:[]},c=o,u=a;c>0;c--){var l=u/c|0;s.blocks.push(l),u-=l}n[i]=s}return n}),e.exports={QR:i,getTemplate:a,fillTemplate:o}}).call(t,n(132).Buffer)},1703:function(e,t,n){"use strict";(function(t){function n(e,t,n){for(var r=1<<t-1;r;r>>>=1)e.push(r&n?1:0)}function r(e){for(var t=e.length,r=[],a=0;a<t;a++)n(r,8,e[a]);var o={},i=[0,1,0,0];if(n(i,16,t),o.data10=o.data27=i.concat(r),t<256){var i=[0,1,0,0];n(i,8,t),o.data1=i.concat(r)}return o}function a(e){for(var t=e.length,r=[],a=0;a<t;a+=2){var o=6,i=c[e[a]];e[a+1]&&(o=11,i=45*i+c[e[a+1]]),n(r,o,i)}var s={},u=[0,0,1,0];if(n(u,13,t),s.data27=u.concat(r),t<2048){var u=[0,0,1,0];n(u,11,t),s.data10=u.concat(r)}if(t<512){var u=[0,0,1,0];n(u,9,t),s.data1=u.concat(r)}return s}function o(e){for(var t=e.length,r=[],a=0;a<t;a+=3){var o=e.substr(a,3);n(r,Math.ceil(10*o.length/3),parseInt(o,10))}var i={},s=[0,0,0,1];if(n(s,14,t),i.data27=s.concat(r),t<4096){var s=[0,0,0,1];n(s,12,t),i.data10=s.concat(r)}if(t<1024){var s=[0,0,0,1];n(s,10,t),i.data1=s.concat(r)}return i}function i(e){var t=e.indexOf("/",8)+1||e.length,n=s(e.slice(0,t).toUpperCase(),!1);if(t>=e.length)return n;var r=s(e.slice(t),!1);return n.data27=n.data27.concat(r.data27),n.data10&&r.data10&&(n.data10=n.data10.concat(r.data10)),n.data1&&r.data1&&(n.data1=n.data1.concat(r.data1)),n}function s(e,n){var s,c=typeof e;if("string"==c||"number"==c)s=""+e,e=new t(s);else if(t.isBuffer(e))s=e.toString();else{if(!Array.isArray(e))throw new Error("Bad data");e=new t(e),s=e.toString()}if(/^[0-9]+$/.test(s)){if(e.length>7089)throw new Error("Too much data");return o(s)}if(/^[0-9A-Z \$%\*\+\.\/\:\-]+$/.test(s)){if(e.length>4296)throw new Error("Too much data");return a(s)}if(n&&/^https?:/i.test(s))return i(s);if(e.length>2953)throw new Error("Too much data");return r(e)}var c=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=n;return t}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");e.exports=s}).call(t,n(132).Buffer)},1704:function(e,t,n){"use strict";(function(t){function n(e){for(;e<0;)e+=255;for(;e>255;)e-=255;return o[e]}function r(e){if(e<1||e>255)throw Error("Bad log("+e+")");return i[e]}function a(e){if(u[e])return u[e];var t=a(e-1),o=[];o[0]=t[0];for(var i=1;i<=e;i++)o[i]=r(n(t[i])^n(t[i-1]+e-1));return u[e]=o,o}for(var o=[1],i=[],s=1;s<256;s++){var c=o[s-1]<<1;c>255&&(c^=285),o[s]=c}for(var s=0;s<255;s++)i[o[s]]=s;var u=[[0],[0,0],[0,25,1]];e.exports=function(e,o){e=[].slice.call(e);for(var i=a(o),s=0;s<o;s++)e.push(0);for(;e.length>o;)if(e[0]){for(var c=r(e[0]),s=0;s<=o;s++)e[s]=e[s]^n(i[s]+c);e.shift()}else e.shift();return new t(e)}}).call(t,n(132).Buffer)},1705:function(e,t,n){"use strict";(function(t){function n(e){var n=4*e+17,r=[],a=new t(n);a.fill(0),a=[].slice.call(a);for(var o=0;o<n;o++)r[o]=a.slice();return r}function r(e){for(var t=e.length,n=-3;n<=3;n++)for(var r=-3;r<=3;r++){var a=Math.max(n,r),o=Math.min(n,r),i=2==a&&o>=-2||-2==o&&a<=2?128:129;e[3+n][3+r]=i,e[3+n][t-4+r]=i,e[t-4+n][3+r]=i}for(var n=0;n<8;n++)e[7][n]=e[n][7]=e[7][t-n-1]=e[n][t-8]=e[t-8][n]=e[t-1-n][7]=128}function a(e){var t=e.length;if(t>21){var n=t-13,r=Math.round(n/Math.ceil(n/28));r%2&&r++;for(var a=[],o=n+6;o>10;o-=r)a.unshift(o);a.unshift(6);for(var i=0;i<a.length;i++)for(var s=0;s<a.length;s++){var c=a[i],u=a[s];if(!e[c][u])for(var f=-2;f<=2;f++)for(var l=-2;l<=2;l++){var d=Math.max(f,l),p=Math.min(f,l),h=1==d&&p>=-1||-1==p&&d<=1?128:129;e[c+f][u+l]=h}}}for(var i=8;i<t-8;i++)e[6][i]=e[i][6]=i%2?128:129}function o(e){for(var t=e.length,n=0;n<8;n++)6!=n&&(e[8][n]=e[n][8]=128),e[8][t-1-n]=128,e[t-1-n][8]=128;if(e[8][8]=128,e[t-8][8]=129,!(t<45))for(var n=t-11;n<t-8;n++)for(var r=0;r<6;r++)e[n][r]=e[r][n]=128}function i(e){function t(t){return 1&e[o][c+t]}function n(t){return 1&e[o+t][c]}for(var r=e.length,a=0,o=0;o<r;o++){for(var i=1&e[o][0],s=1,c=1;c<r;c++){var u=1&e[o][c];u!=i?(s>=5&&(a+=s-2),i=u,s=1):s++}s>=5&&(a+=s-2)}for(var c=0;c<r;c++){for(var i=1&e[0][c],s=1,o=1;o<r;o++){var u=1&e[o][c];u!=i?(s>=5&&(a+=s-2),i=u,s=1):s++}s>=5&&(a+=s-2)}for(var o=0;o<r-1;o++)for(var c=0;c<r-1;c++){var f=e[o][c]+e[o][c+1]+e[o+1][c]+e[o+1][c+1]&7;0!=f&&4!=f||(a+=3)}for(var o=0;o<r;o++)for(var c=0;c<r;c++)c<r-6&&t(0)&&!t(1)&&t(2)&&t(3)&&t(4)&&!t(5)&&t(6)&&(c>=4&&!(t(-4)||t(-3)||t(-2)||t(-1))&&(a+=40),c<r-10&&!(t(7)||t(8)||t(9)||t(10))&&(a+=40)),o<r-6&&n(0)&&!n(1)&&n(2)&&n(3)&&n(4)&&!n(5)&&n(6)&&(o>=4&&!(n(-4)||n(-3)||n(-2)||n(-1))&&(a+=40),o<r-10&&!(n(7)||n(8)||n(9)||n(10))&&(a+=40));for(var l=0,o=0;o<r;o++)for(var c=0;c<r;c++)1&e[o][c]&&l++;return a+=10*Math.floor(Math.abs(10-20*l/(r*r)))}function s(e){var t=n(e.version);r(t),a(t),o(t);for(var s=1/0,f=0,l=0;l<8;l++){u(t,e,l),c(t,e.ec_level,l);var d=i(t);d<s&&(s=d,f=l)}return u(t,e,f),c(t,e.ec_level,f),t.map(function(e){return e.map(function(e){return 1&e})})}var c=function(){for(var e=Array(32),t=Array(40),n=0;n<32;n++){for(var r=n<<10,a=5;a>0;a--)r>>>9+a&&(r^=1335<<a-1);e[n]=21522^(r|n<<10)}for(var o=7;o<=40;o++){for(var r=o<<12,a=6;a>0;a--)r>>>11+a&&(r^=7973<<a-1);t[o]=r|o<<12}var i={L:1,M:0,Q:3,H:2};return function(n,r,a){function o(e){return c>>e&1?129:128}for(var s=n.length,c=e[i[r]<<3|a],u=0;u<8;u++)n[8][s-1-u]=o(u),u<6&&(n[u][8]=o(u));for(var u=8;u<15;u++)n[s-15+u][8]=o(u),u>8&&(n[8][14-u]=o(u));n[7][8]=o(6),n[8][8]=o(7),n[8][7]=o(8);var f=t[(s-17)/4];if(f)for(var u=0;u<6;u++)for(var l=0;l<3;l++)n[s-11+l][u]=n[u][s-11+l]=function(e){return f>>e&1?129:128}(3*u+l)}}(),u=function(){var e=[function(e,t){return(e+t)%2==0},function(e,t){return e%2==0},function(e,t){return t%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return(e*t%3+(e+t)%2)%2==0}];return function(t,n,r){function a(e){for(var n=128;n;n>>=1){var r=!!(n&e);f(i,s)&&(r=!r),t[i][s]=r?1:0,o()}}function o(){do{if(s%2^s<6?u<0&&0==i||u>0&&i==c-1?(s--,u=-u):(s++,i+=u):s--,6==s&&s--,s<0)return!1}while(240&t[i][s]);return!0}var i,s,c=t.length,u=-1;i=s=c-1;for(var f=e[r],l=n.blocks[n.blocks.length-1].length,d=0;d<l;d++)for(var p=0;p<n.blocks.length;p++)n.blocks[p].length<=d||a(n.blocks[p][d]);l=n.ec_len;for(var d=0;d<l;d++)for(var p=0;p<n.ec.length;p++)a(n.ec[p][d]);if(s>-1)do{t[i][s]=f(i,s)?1:0}while(o())}}();e.exports={getMatrix:s,init:n,fillFinders:r,fillAlignAndTiming:a,fillStub:o,fillReserved:c,fillData:u,calculatePenalty:i}}).call(t,n(132).Buffer)},1706:function(e,t,n){"use strict";(function(t){function r(e,n){n.push(s);var r=t.concat([c]);r.writeUInt32BE(e.size,8),r.writeUInt32BE(e.size,12),r.writeUInt32BE(i(r.slice(4,-4)),21),n.push(r);var a=t.concat([u,o.deflateSync(e.data,{level:9}),new t(4)]);a.writeUInt32BE(a.length-12,0),a.writeUInt32BE(i(a.slice(4,-4)),a.length-4),n.push(a),n.push(f),n.push(null)}function a(e,n,r){var a=e.length,o=(a+2*r)*n,i=new t((o+1)*o);i.fill(255);for(var s=0;s<o;s++)i[s*(o+1)]=0;for(var s=0;s<a;s++)for(var c=0;c<a;c++)if(e[s][c]){var u=((r+s)*(o+1)+(r+c))*n+1;i.fill(0,u,u+n);for(var f=1;f<n;f++)i.copy(i,u+f*(o+1),u,u+n)}return{data:i,size:o}}var o=n(1707),i=n(1713),s=new t([137,80,78,71,13,10,26,10]),c=new t([0,0,0,13,73,72,68,82,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0]),u=new t([0,0,0,0,73,68,65,84]),f=new t([0,0,0,0,73,69,78,68,174,66,96,130]);e.exports={bitmap:a,png:r}}).call(t,n(132).Buffer)},1707:function(e,t,n){"use strict";(function(e){function r(e,t,n){function r(){for(var t;null!==(t=e.read());)i.push(t),s+=t.length;e.once("readable",r)}function a(t){e.removeListener("end",o),e.removeListener("readable",r),n(t)}function o(){var t,r=null;s>=S?r=new RangeError(I):t=v.concat(i,s),i=[],e.close(),n(r,t)}var i=[],s=0;e.on("error",a),e.on("end",o),e.end(t),r()}function a(e,t){if("string"==typeof t&&(t=v.from(t)),!v.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function o(e){if(!(this instanceof o))return new o(e);p.call(this,e,_.DEFLATE)}function i(e){if(!(this instanceof i))return new i(e);p.call(this,e,_.INFLATE)}function s(e){if(!(this instanceof s))return new s(e);p.call(this,e,_.GZIP)}function c(e){if(!(this instanceof c))return new c(e);p.call(this,e,_.GUNZIP)}function u(e){if(!(this instanceof u))return new u(e);p.call(this,e,_.DEFLATERAW)}function f(e){if(!(this instanceof f))return new f(e);p.call(this,e,_.INFLATERAW)}function l(e){if(!(this instanceof l))return new l(e);p.call(this,e,_.UNZIP)}function d(e){return e===_.Z_NO_FLUSH||e===_.Z_PARTIAL_FLUSH||e===_.Z_SYNC_FLUSH||e===_.Z_FULL_FLUSH||e===_.Z_FINISH||e===_.Z_BLOCK}function p(e,n){var r=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,m.call(this,e),e.flush&&!d(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!d(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||_.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:_.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!v.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new _.Zlib(n);var a=this;this._hadError=!1,this._handle.onerror=function(e,n){h(a),a._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],a.emit("error",r)};var o=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var i=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(i=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,o,e.memLevel||t.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=v.allocUnsafe(this._chunkSize),this._offset=0,this._level=o,this._strategy=i,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!r._handle},configurable:!0,enumerable:!0})}function h(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function g(e){e.emit("close")}var v=n(132).Buffer,m=n(283).Transform,_=n(1708),C=n(326),w=n(949).ok,S=n(132).kMaxLength,I="Cannot create final Buffer. It would be larger than 0x"+S.toString(16)+" bytes";_.Z_MIN_WINDOWBITS=8,_.Z_MAX_WINDOWBITS=15,_.Z_DEFAULT_WINDOWBITS=15,_.Z_MIN_CHUNK=64,_.Z_MAX_CHUNK=1/0,_.Z_DEFAULT_CHUNK=16384,_.Z_MIN_MEMLEVEL=1,_.Z_MAX_MEMLEVEL=9,_.Z_DEFAULT_MEMLEVEL=8,_.Z_MIN_LEVEL=-1,_.Z_MAX_LEVEL=9,_.Z_DEFAULT_LEVEL=_.Z_DEFAULT_COMPRESSION;for(var E=Object.keys(_),N=0;N<E.length;N++){var b=E[N];b.match(/^Z/)&&Object.defineProperty(t,b,{enumerable:!0,value:_[b],writable:!1})}for(var T={Z_OK:_.Z_OK,Z_STREAM_END:_.Z_STREAM_END,Z_NEED_DICT:_.Z_NEED_DICT,Z_ERRNO:_.Z_ERRNO,Z_STREAM_ERROR:_.Z_STREAM_ERROR,Z_DATA_ERROR:_.Z_DATA_ERROR,Z_MEM_ERROR:_.Z_MEM_ERROR,Z_BUF_ERROR:_.Z_BUF_ERROR,Z_VERSION_ERROR:_.Z_VERSION_ERROR},y=Object.keys(T),O=0;O<y.length;O++){var x=y[O];T[T[x]]=x}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(T),writable:!1}),t.Deflate=o,t.Inflate=i,t.Gzip=s,t.Gunzip=c,t.DeflateRaw=u,t.InflateRaw=f,t.Unzip=l,t.createDeflate=function(e){return new o(e)},t.createInflate=function(e){return new i(e)},t.createDeflateRaw=function(e){return new u(e)},t.createInflateRaw=function(e){return new f(e)},t.createGzip=function(e){return new s(e)},t.createGunzip=function(e){return new c(e)},t.createUnzip=function(e){return new l(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new o(t),e,n)},t.deflateSync=function(e,t){return a(new o(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new s(t),e,n)},t.gzipSync=function(e,t){return a(new s(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new u(t),e,n)},t.deflateRawSync=function(e,t){return a(new u(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new l(t),e,n)},t.unzipSync=function(e,t){return a(new l(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new i(t),e,n)},t.inflateSync=function(e,t){return a(new i(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new c(t),e,n)},t.gunzipSync=function(e,t){return a(new c(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),r(new f(t),e,n)},t.inflateRawSync=function(e,t){return a(new f(t),e)},C.inherits(p,m),p.prototype.params=function(n,r,a){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(_.Z_SYNC_FLUSH,function(){w(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,a&&a())})}else e.nextTick(a)},p.prototype.reset=function(){return w(this._handle,"zlib binding closed"),this._handle.reset()},p.prototype._flush=function(e){this._transform(v.alloc(0),"",e)},p.prototype.flush=function(t,n){var r=this,a=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=_.Z_FULL_FLUSH),a.ended?n&&e.nextTick(n):a.ending?n&&this.once("end",n):a.needDrain?n&&this.once("drain",function(){return r.flush(t,n)}):(this._flushFlag=t,this.write(v.alloc(0),"",n))},p.prototype.close=function(t){h(this,t),e.nextTick(g,this)},p.prototype._transform=function(e,t,n){var r,a=this._writableState,o=a.ending||a.ended,i=o&&(!e||a.length===e.length);return null===e||v.isBuffer(e)?this._handle?(i?r=this._finishFlushFlag:(r=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||_.Z_NO_FLUSH)),void this._processChunk(e,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},p.prototype._processChunk=function(e,t,n){function r(u,d){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var p=o-d;if(w(p>=0,"have should not go down"),p>0){var h=s._buffer.slice(s._offset,s._offset+p);s._offset+=p,c?s.push(h):(f.push(h),l+=h.length)}if((0===d||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=v.allocUnsafe(s._chunkSize)),0===d){if(i+=a-u,a=u,!c)return!0;var g=s._handle.write(t,e,i,a,s._buffer,s._offset,s._chunkSize);return g.callback=r,void(g.buffer=e)}if(!c)return!1;n()}}var a=e&&e.length,o=this._chunkSize-this._offset,i=0,s=this,c="function"==typeof n;if(!c){var u,f=[],l=0;this.on("error",function(e){u=e}),w(this._handle,"zlib binding closed");do{var d=this._handle.writeSync(t,e,i,a,this._buffer,this._offset,o)}while(!this._hadError&&r(d[0],d[1]));if(this._hadError)throw u;if(l>=S)throw h(this),new RangeError(I);var p=v.concat(f,l);return h(this),p}w(this._handle,"zlib binding closed");var g=this._handle.write(t,e,i,a,this._buffer,this._offset,o);g.buffer=e,g.callback=r},C.inherits(o,p),C.inherits(i,p),C.inherits(s,p),C.inherits(c,p),C.inherits(u,p),C.inherits(f,p),C.inherits(l,p)}).call(t,n(148))},1708:function(e,t,n){"use strict";(function(e,r){function a(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}var o=n(949),i=n(1709),s=n(1710),c=n(1711),u=n(1712);for(var f in u)t[f]=u[f];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;a.prototype.close=function(){if(this.write_in_progress)return void(this.pending_close=!0);this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||c.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null},a.prototype.write=function(e,t,n,r,a,o,i){return this._write(!0,e,t,n,r,a,o,i)},a.prototype.writeSync=function(e,t,n,r,a,o,i){return this._write(!1,e,t,n,r,a,o,i)},a.prototype._write=function(n,a,i,s,c,u,f,l){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==t.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==i&&(i=e.alloc(0),c=0,s=0),this.strm.avail_in=c,this.strm.input=i,this.strm.next_in=s,this.strm.avail_out=l,this.strm.output=u,this.strm.next_out=f,this.flush=a,n){var d=this;return r.nextTick(function(){d._process(),d._after()}),this}if(this._process(),this._checkError())return this._afterSync()},a.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},a.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=c.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=c.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=c.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=c.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},a.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},a.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},a.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},a.prototype.init=function(e,n,r,a,i){o(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(e>=8&&e<=15,"invalid windowBits"),o(n>=-1&&n<=9,"invalid compression level"),o(r>=1&&r<=9,"invalid memlevel"),o(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,a,i),this._setDictionary()},a.prototype.params=function(){throw new Error("deflateParams Not supported")},a.prototype.reset=function(){this._reset(),this._setDictionary()},a.prototype._init=function(e,n,r,a,o){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=a,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new i,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},a.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},a.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=c.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=a}).call(t,n(132).Buffer,n(148))},1709:function(e,t,n){e.exports=n(0)(140)},1710:function(e,t,n){e.exports=n(0)(256)},1711:function(e,t,n){e.exports=n(0)(259)},1712:function(e,t,n){e.exports=n(0)(141)},1713:function(e,t,n){"use strict";(function(t,r){!function(){function a(e,t){for(var n=t.length,r=0;r<n;r++)e=i[255&(e^t[r])]^e>>>8;return e}function o(){for(var e=arguments.length,t=-1,n=0;n<e;n++)t=a(t,new r(arguments[n]));return t=(-1^t)>>>0}if("arm"===t.arch)return void(e.exports=n(1714));var i=[];!function(){for(var e=0;e<256;e++){for(var t=e,n=0;n<8;n++)1&t?t=3988292384^t>>>1:t>>>=1;i[e]=t>>>0}}(),e.exports=o}()}).call(t,n(148),n(132).Buffer)},1714:function(e,t,n){"use strict";(function(t){function n(e,t){for(var n=t.length,r=0;r<n;r++){var o=a[e[3]^t[r]];e[3]=o[3]^e[2],e[2]=o[2]^e[1],e[1]=o[1]^e[0],e[0]=o[0]}}function r(){var e=arguments.length,r=new t(4);r.fill(255);for(var a=0;a<e;a++)n(r,new t(arguments[a]));return r[0]=255^r[0],r[1]=255^r[1],r[2]=255^r[2],r[3]=255^r[3],r.readUInt32BE(0)}for(var a=[],o=0;o<256;o++){var i=a[o]=new t(4);i.writeUInt32BE(o,0);for(var s=0;s<8;s++){var c=1&i[0],u=1&i[1],f=1&i[2],l=1&i[3];i[0]=i[0]>>1^(l?237:0),i[1]=i[1]>>1^(l?184:0)^(c?128:0),i[2]=i[2]>>1^(l?131:0)^(u?128:0),i[3]=i[3]>>1^(l?32:0)^(f?128:0)}}e.exports=r}).call(t,n(132).Buffer)},1715:function(e,t,n){"use strict";function r(e){function t(t,n){return!(t<0||n<0||t>=r||n>=r)&&!!e[t][n]}function n(e,n,r){a[e][n]=1;var o=[];o.push(["M",n,e]);var i=e,s=n,c=0;do{switch(r){case"right":a[i][s]=1,t(i,s)?(a[i-1][s]=1,t(i-1,s)?(o.push(["h",c]),c=0,r="up"):(c++,s++)):(o.push(["h",c]),c=0,r="down");break;case"left":a[i-1][s-1]=1,t(i-1,s-1)?(a[i][s-1]=1,t(i,s-1)?(o.push(["h",-c]),c=0,r="down"):(c++,s--)):(o.push(["h",-c]),c=0,r="up");break;case"down":a[i][s-1]=1,t(i,s-1)?(a[i][s]=1,t(i,s)?(o.push(["v",c]),c=0,r="right"):(c++,i++)):(o.push(["v",c]),c=0,r="left");break;case"up":a[i-1][s]=1,t(i-1,s)?(a[i-1][s-1]=1,t(i-1,s-1)?(o.push(["v",-c]),c=0,r="left"):(c++,i--)):(o.push(["v",-c]),c=0,r="right")}}while(i!=e||s!=n);return o}for(var r=e.length,a=[],o=-1;o<=r;o++)a[o]=[];for(var i=[],o=0;o<r;o++)for(var s=0;s<r;s++)a[o][s]||(a[o][s]=1,t(o,s)?t(o-1,s)||i.push(n(o,s,"right")):t(o,s-1)&&i.push(n(o,s,"down")));return i}function a(e,t,n){r(e).forEach(function(e){for(var r="",a=0;a<e.length;a++){var o=e[a];switch(o[0]){case"M":r+="M"+(o[1]+n)+" "+(o[2]+n);break;default:r+=o.join("")}}r+="z",t.push(r)})}function o(e,t){var n=[];return a(e,n,t),{size:e.length+2*t,path:n.filter(Boolean).join("")}}function i(e,t,n,r){var o=e.length+2*n;if(t.push('<svg xmlns="http://www.w3.org/2000/svg" '),r>0){var i=o*r;t.push('width="'+i+'" height="'+i+'" ')}t.push('viewBox="0 0 '+o+" "+o+'">'),t.push('<path d="'),a(e,t,n),t.push('"/></svg>'),t.push(null)}function s(e,t,n){var a=e.length,o=9*(a+2*n);t.push(["%!PS-Adobe-3.0 EPSF-3.0","%%BoundingBox: 0 0 "+o+" "+o,"/h { 0 rlineto } bind def","/v { 0 exch neg rlineto } bind def","/M { neg "+(a+n)+" add moveto } bind def","/z { closepath } bind def","9 9 scale",""].join("\n")),r(e).forEach(function(e){for(var r="",a=0;a<e.length;a++){var o=e[a];switch(o[0]){case"M":r+=o[1]+n+" "+o[2]+" M ";break;default:r+=o[1]+" "+o[0]+" "}}r+="z\n",t.push(r)}),t.push("fill\n%%EOF\n"),t.push(null)}function c(e,t,n){var a=e.length,o=9*(a+2*n),i=["%PDF-1.0\n\n","1 0 obj << /Type /Catalog /Pages 2 0 R >> endobj\n","2 0 obj << /Type /Pages /Count 1 /Kids [ 3 0 R ] >> endobj\n"];i.push("3 0 obj << /Type /Page /Parent 2 0 R /Resources <<>> /Contents 4 0 R /MediaBox [ 0 0 "+o+" "+o+" ] >> endobj\n");var s="9 0 0 9 0 0 cm\n";s+=r(e).map(function(e){for(var t,r,o="",i=0;i<e.length;i++){var s=e[i];switch(s[0]){case"M":t=s[1]+n,r=a-s[2]+n,o+=t+" "+r+" m ";break;case"h":t+=s[1],o+=t+" "+r+" l ";break;case"v":r-=s[1],o+=t+" "+r+" l "}}return o+="h"}).join("\n"),s+="\nf\n",i.push("4 0 obj << /Length "+s.length+" >> stream\n"+s+"endstream\nendobj\n");for(var c="xref\n0 5\n0000000000 65535 f \n",u=1,f=i[0].length;u<5;u++)c+=("0000000000"+f).substr(-10)+" 00000 n \n",f+=i[u].length;i.push(c,"trailer << /Root 1 0 R /Size 5 >>\n","startxref\n"+f+"\n%%EOF\n"),t.push(i.join("")),t.push(null)}e.exports={svg:i,eps:s,pdf:c,svg_object:o}},1716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.cpuUsage=function(e){a(e,!1)},function(){return window.require("os").cpus()}),a=function(e,t){var n=o(),r=n.idle,a=n.total;setTimeout(function(){var n=o(),i=n.idle,s=n.total,c=i-r,u=s-a,f=c/u;e(!0===t?f:1-f)},1e3)},o=function(e){var t=r(),n=0,a=0,o=0,i=0,s=0;for(var c in t)t.hasOwnProperty(c)&&(n+=t[c].times.user,a+=t[c].times.nice,o+=t[c].times.sys,s+=t[c].times.irq,i+=t[c].times.idle);return{idle:i,total:n+a+o+i+s}}},1717:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dataConfApiImpl=t.getDataConfApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=n(1718),m=r(v),_=n(186),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),w=void 0,S=(t.getDataConfApi=function(){return isNullOrEmpty(w)&&(w=new S),w},t.dataConfApiImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return n.isInDataConf=function(){return C.isInDataConf()},n.setFireWallModeType=function(e){return C.setFireWallModeType(e)},n.reSetFireWallModeType=function(){return C.reSetFireWallModeType()},n.joinDataConf=function(){var t=(0,s.default)(o.default.mark(function t(n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.joinDataConf(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.isReceivingDataShare=function(){return C.isReceivingDataShare()},n.isRecevingAppshare=function(){return C.isRecevingAppshare()},n.isInReceiveDocSharing=function(){return C.isInReceiveDocSharing()},n.bfcpWinDetach=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.bfcpWinDetach();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.bfcpWinAttach=function(){var t=(0,s.default)(o.default.mark(function t(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.bfcpWinAttach(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getDataStreamInfo=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getDataStreamInfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getDataShareOwnerBindno=function(){return C.getDataShareOwnerBindno()},n.isDataShareStarted=function(){return C.isDataShareStarted()},n.isRemoteControling=function(){return C.isRemoteControling()},n.getRemoteControlUserNum=function(){return C.getRemoteControlUserNum()},n.getDataConfMemberList=function(){return C.getDataConfMemberList()},n.stopShareScreen=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.stopShareScreen();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.requestRemoteControlPrivilege=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.requestRemoteControlPrivilege();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.delRemoteControlPrivilege=function(){var t=(0,s.default)(o.default.mark(function t(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.delRemoteControlPrivilege(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getIsUsePrimarySize=function(){return C.getIsUsePrimarySize()},n.isRecevingWBSharing=function(){return C.isRecevingWBSharing()},n}return(0,g.default)(t,e),t}(m.default))},1718:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.isInDataConf=function(){},r.setFireWallModeType=function(e){},r.reSetFireWallModeType=function(){},r.joinDataConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.isReceivingDataShare=function(){},r.isRecevingAppshare=function(){},r.isInReceiveDocSharing=function(){},r.bfcpWinDetach=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.bfcpWinAttach=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getDataStreamInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getDataShareOwnerBindno=function(){},r.isDataShareStarted=function(){},r.isRemoteControling=function(){},r.getRemoteControlUserNum=function(){},r.getDataConfMemberList=function(){},r.stopShareScreen=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.requestRemoteControlPrivilege=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.delRemoteControlPrivilege=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getIsUsePrimarySize=function(){},r.isRecevingWBSharing=function(){},a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},1719:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confLogicApiImpl=t.getConfLogicApi=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(119),f=a(u),l=n(4),d=a(l),p=n(120),h=a(p),g=n(121),v=a(g),m=n(1720),_=a(m),C=n(153),w=r(C),S=n(286),I=r(S),E=n(359),N=r(E),b=n(1721),T=r(b),y=n(248),O=r(y),x=n(208),A=r(x),L=n(656),k=n(1722),R=n(287),M=r(R),D=n(947),P=n(952),F=n(648),U=n(649),B=n(1723),W=a(B),G=n(207),V=n(166),H=n(194),$=void 0,j=(t.getConfLogicApi=function(){return isNullOrEmpty(j)&&($=new j),$},t.confLogicApiImpl=function(e){function t(){var e=this;(0,d.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return n.saveTempMediaxInfo=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.saveTempMediaxInfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.actionLeaveConf=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.isPassivity,a=void 0!==r&&r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionLeaveConf(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.resumeDeviceInfo=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.resumeDeviceInfo)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.unregisterConfEvent=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.unregisterConfEvent());case 1:case"end":return e.stop()}},t,e)})),n.createTempMeetingOfAddMember=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createTempMeetingOfAddMember();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.p2pTransToConf=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.mediatype,a=void 0===r?constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE:r,o=n.hasSelectedMem,s=n.selectedMemList,c=void 0===s?[]:s,u=n.isAutoScreenShare;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.p2pTransToConf(a,o,c,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.actionAddAttendee=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.list,a=void 0===r?[]:r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionAddAttendee(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.actionReleaseChairman=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.chairmanNumber;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionReleaseChairman(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.updateMemberDetail=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.userInfo,a=n.callNo,o=n.name;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.updateMemberDetail(r,a,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.searchContact=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.callNo,a=n.name;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.searchContact(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterTempConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterTempConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.actionShareClickByRecent=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionShareClickByRecent();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.createConfByTeamList=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createConfByTeamList(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),n.showConfInfo=function(e){return w.showConfInfo(e)},n.createTempTypeMeeting=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createTempTypeMeeting(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.toggleCreateVideoConf=function(e){return N.toggleCreateVideoConf(e)},n.resetJoinConfValue=function(){return N.resetJoinConfValue()},n.resetCreateConfValue=function(){return N.resetCreateConfValue()},n.changeStartTime=function(e){return N.changeStartTime(e)},n.resetBookConfValue=function(){return N.resetBookConfValue()},n.handleIpcRightMenuContent=function(e,t,n,r){return T.handleIpcRightMenuContent(e,t,n,r)},n.actionActiveDirection=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionActiveDirection(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.recordFlagIsFirstTimeRun=function(e){return w.recordFlagIsFirstTimeRun(e)},n.RecordIsIntoInterval=function(e){return w.RecordIsIntoInterval(e)},n.changeStatusOfConference=function(e){return w.changeStatusOfConference(e)},n.recordConferenceOldId=function(e){return w.recordConferenceOldId(e)},n.recordConferencePasswordDetail=function(e){return w.recordConferencePasswordDetail(e)},n.toggleShowConfInfoCard=function(e){return w.toggleShowConfInfoCard(e)},n.handleJoinTempConfNoNameWithConfId=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.handleJoinTempConfNoNameWithConfId();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.oneJoinVMR=function(e){return w.oneJoinVMR(e)},n.actionCallAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionCallAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionRemoveAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionRemoveAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionHangupAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionHangupAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionReInviteAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionReInviteAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionWatchAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionWatchAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleSvcLockWatch=function(e,t){return O.handleSvcLockWatch(e,t)},n.actionMuteConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionMuteConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionBroadcastAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionBroadcastAttendee(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.actionCallOtherNum=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionCallOtherNum(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.enterConfInConfList=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfInConfList(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.bookMeeting=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.bookMeeting(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.changeConfLen=function(e){return N.changeConfLen(e)},n.changeStartTimeMobile=function(e){return N.changeStartTimeMobile(e)},n.deleteClickParticipants=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.deleteClickParticipants(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.saveMettingTypeValue=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.saveMettingTypeValue(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.toggleChangeCamerState=function(){return w.toggleChangeCamerState()},n.toggleChangeMicState=function(){return w.toggleChangeMicState()},n.createAMeeting=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createAMeeting(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.showJoinMeetingBtn=function(){return w.showJoinMeetingBtn()},n.cancelConf=function(e){return w.cancelConf(e)},n.enterConfInConfInfo=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfInConfInfo(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.currentAccountIsRole=function(e,t){return N.currentAccountIsRole(e,t)},n.getAttendee=function(e){return N.getAttendee(e)},n.toggleSetUseFixedConfIDState=function(e){return w.toggleSetUseFixedConfIDState(e)},n.toggleIsReacrdSwitch=function(e){return N.toggleIsReacrdSwitch(e)},n.toggleCreateMeetingPassword=function(e){return N.toggleCreateMeetingPassword(e)},n.initCreateMettingContent=function(){return w.initCreateMettingContent()},n.saveConThemeName=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return w.saveConThemeName.apply(w,[e].concat(n))},n.delConfInfoFromDb=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.delConfInfoFromDb)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initMobileFirstAcceptShare=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.initMobileFirstAcceptShare();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.resetFirstAcceptShareFlag=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.resetFirstAcceptShareFlag(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.initMobileFirstInfoConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.initMobileFirstInfoConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.resetFirstInfoConferenceFlag=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.resetFirstInfoConferenceFlag(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleSvcClickJSPage=function(e){return O.handleSvcClickJSPage(e)},n.cloudRecordRequestFuc=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.cloudRecordRequestFuc(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.requestChairmanFuc=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.requestChairmanFuc();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.releaseChairmanFuc=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.releaseChairmanFuc(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.lockConfFuc=function(){return w.lockConfFuc()},n.unlockConfFuc=function(){return w.unlockConfFuc()},n.grabBfcpConfirm=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.grabBfcpConfirm(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionActiveDirectionForMobile=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionActiveDirectionForMobile();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.isHasRecordPermission=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return w.isHasRecordPermission(e)},n.formatConfId=function(e){return w.formatConfId(e)},n.acceptConf=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.acceptConf(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.rejectConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.rejectConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.maxhubSkipLogin=function(){return(0,D.maxhubSkipLogin)()},n.enterConfByIdOnly=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfByIdOnly();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.enterConfById=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfById();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.toggleChangeConfAcsNum=function(e){return w.toggleChangeConfAcsNum(e)},n.toggleChangeConfAcsId=function(e){return w.toggleChangeConfAcsId(e)},n.createMaxHubMeeting=function(){return w.createMaxHubMeeting()},n.toggleShowMemberList=function(e){return w.toggleShowMemberList(e)},n.upgrade2DataConfOrStartShare=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.upgrade2DataConfOrStartShare();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.changeTimeZone=function(e){return N.changeTimeZone(e)},n.setSmcFirstRequest=function(){return w.setSmcFirstRequest()},n.joinExperienceMeeting=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.joinExperienceMeeting)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.handleNotShowChairPas=function(e){return w.handleNotShowChairPas(e)},n.handleNotShowGeneralPas=function(e){return w.handleNotShowGeneralPas(e)},n.changeConfAttendeeInfo=function(e){return w.changeConfAttendeeInfo(e)},n.changeCurrentConfInfo=function(e){return w.changeCurrentConfInfo(e)},n.searchContactName=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.searchContactName(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleShowEndConf=function(e){return w.handleShowEndConf(e)},n.endCallAndLogout=function(){return w.endCallAndLogout()},n.actionEndConf=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionEndConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.actionCreateConf=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a,o,s,c){for(var u=arguments.length,f=Array(u>6?u-6:0),l=6;l<u;l++)f[l-6]=arguments[l];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionCreateConf.apply(w,[n,r,a,o,s,c].concat(f));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r,a,o,i){return t.apply(this,arguments)}}(),n.actionExportConfmember=function(){return w.actionExportConfmember()},n.transferChairman=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.transferChairman(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.compressRemoveAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.compressRemoveAttendee(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.compressreleasePreservate=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.compressreleasePreservate(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionRequestChairman=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionRequestChairman(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.firstOptionClick=function(e){return T.firstOptionClick(e)},n.memberItemHandleClick=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a,o,s){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.memberItemHandleClick(n,r,a,o,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r,a,o){return t.apply(this,arguments)}}(),n.changeMuteState=function(e,t,n,r){return T.changeMuteState(e,t,n,r)},n.actionMuteAllAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.isMute,a=n.isAllowUnmute;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionMuteAllAttendee(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleShowMemberList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return w.handleShowMemberList(e,t,n)},n.actionCreateConfByRecent=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionCreateConfByRecent(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setUnreadNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{account:"",group_id:""},t=arguments[1];return I.setUnreadNumber(e,t)},n.changeGroupId=function(e){return w.changeGroupId(e)},n.getExperienceConferenceInfo=function(e){return(0,P.getExperienceConferenceInfo)(e)},n.showOrDisabledBtn=function(){return w.showOrDisabledBtn()},n.getInitHistoryConfList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getInitHistoryConfList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.handleSmcEnterDataConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.handleSmcEnterDataConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getConfShareUrl=function(e){return(0,D.getConfShareUrl)(e)},n.enterConfByIdOnlyWithConfPas=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.enterConfByIdOnlyWithConfPas(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.resetDefaultValue=function(){return N.resetDefaultValue()},n.returnTimeCur=function(){return N.returnTimeCur()},n.getDefaultDate=function(){return N.getDefaultDate()},n.changeStartTimeMin=function(e){return N.changeStartTimeMin(e)},n.changeStartTimeHour=function(e){return N.changeStartTimeHour(e)},n.changeConfPage=function(e){return w.changeConfPage(e)},n.toggleConfOtherNumber=function(e){return w.toggleConfOtherNumber(e)},n.initBfcpWindow=function(){var t=(0,c.default)(i.default.mark(function t(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.initBfcpWindow(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.switchVideoToMain=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.switchVideoToMain();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.refreshShareSize=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.refreshShareSize)(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handup=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.handup(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.handleSSRCURL=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$getState().call.callId,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.handleSSRCURL(n,r,a,o,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.actionMuteAttendee=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actionMuteAttendee(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),n.getVRMList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getVRMList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.NotifyCameraListUpdateEx=function(e){return(0,D.NotifyCameraListUpdateEx)(e)},n.updateCameraList=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.updateCameraList(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.searchMemberList=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.searchMemberList(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleMobileBfcpStatus=function(){return w.handleMobileBfcpStatus()},n.setConfServerId=function(e){return A.setConfServerId(e)},n.setSubject=function(e){return A.setSubject(e)},n.setViewMode=function(e,t){return A.setViewMode(e,t)},n.initRemotWindow=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.initRemotWindow(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.updateLocalwindowCallId=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.updateLocalwindowCallId(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.closeCallInterface=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.closeCallInterface();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.closeBfcpFrame=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.closeBfcpFrame();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getConfList=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getConfList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initCallInterface=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.initCallInterface(n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),n.handleIsShowJoinButton=function(e){return w.handleIsShowJoinButton(e)},n.getConfInfo=function(){var t=(0,c.default)(i.default.mark(function t(n,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getConfInfo(n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),n.UportalTokenErr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return w.UportalTokenErr(e)},n.changeConfInfoCardState=function(e){return(0,L.changeConfInfoCardState)(e)},n.oneKeyEnterConf=function(){var t=(0,c.default)(i.default.mark(function t(n,r,a,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.oneKeyEnterConf(n,r,a,o,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),n.toggleChangeConfAcsPas=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.toggleChangeConfAcsPas(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getConfInfoFromDb=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getConfInfoFromDb)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.gettempuserinfo=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.gettempuserinfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initConfctrl=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.initConfctrl();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.recordIsImGroupCreateConf=function(e){return w.recordIsImGroupCreateConf(e)},n.toggleIsBookSendEmail=function(e){return N.toggleIsBookSendEmail(e)},n.toggleIsBookSendSMS=function(e){return N.toggleIsBookSendSMS(e)},n.delConfRecord=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.delConfRecord(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.toggleSetIsBookSendEmail=function(e){return w.toggleSetIsBookSendEmail(e)},n.toggleSetIsBookSendSMS=function(e){return w.toggleSetIsBookSendSMS(e)},n.toggleSetCreateUseFixedConfIDState=function(e){return w.toggleSetCreateUseFixedConfIDState(e)},n.itmeetingCreateConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.itmeetingCreateConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.meetingHWspeakerOnOrOff=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.meetingHWspeakerOnOrOff(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.itmeetingJoinConf=function(){return M.itmeetingJoinConf()},n.itmeetingChairman=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.itmeetingChairman(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.meetingHWsetCaptureCamera=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.meetingHWsetCaptureCamera(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.meetingHWcameraOnOrOff=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.meetingHWcameraOnOrOff(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.itmeetingSmallWin=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.itmeetingSmallWin(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.meetingHWreCallTimeOut=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.meetingHWreCallTimeOut(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.firstQosReport=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.firstQosReport();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.itmeetingShareScreen=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.itmeetingShareScreen(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.itmeetingAcceptSharing=function(){return M.itmeetingAcceptSharing()},n.meetingHWmicrophoneOnOrOff=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.meetingHWmicrophoneOnOrOff(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.startCallFailed=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.startCallFailed(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.qosAlertSend=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.qosAlertSend();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.uportalLoginFailed=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.uportalLoginFailed(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.sipRegisterFailed=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.sipRegisterFailed(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.registerNativeWndEvent=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.registerNativeWndEvent)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.unregisterNativeWndEvent=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.unregisterNativeWndEvent)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getLinkJoinConfService=function(){return new W.default},n.getRegisterConfEventAtomic=function(){return w.registerConfEventAtomic},n.getSubScribeConfListAndInfoResAtomic=function(){return w.subScribeConfListAndInfoResAtomic},n.getVmrInfoToDbAtomic=function(){return w.getVmrInfoToDbAtomic},n.getAsInfoToDbAtomic=function(){return w.getAsInfoToDbAtomic},n.getNativeInterface=function(){return G.NativeInterface},n.getSvcAtdManager=function(){return V.SvcAtdManager},n.getSvcAttendanceManager=function(){return y.SvcAttendanceManager},n.getToolbarManager=function(){return H.ToolbarManager},n.getDecoderManager=function(){return V.DecoderManager},n}return(0,v.default)(t,e),t}(_.default))},172:function(e,t,n){e.exports={default:n(173),__esModule:!0}},1720:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){for(var e,n,r,a,i=this,c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return(0,l.default)(this,t),n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.saveTempMediaxInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.actionLeaveConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isPassivity;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.resumeDeviceInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.unregisterConfEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.createTempMeetingOfAddMember=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.p2pTransToConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mediatype;void 0===n&&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,t.hasSelectedMem,t.selectedMemList,t.isAutoScreenShare;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.actionAddAttendee=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.list;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.actionReleaseChairman=function(){var e=(0,s.default)(o.default.mark(function e(t){t.chairmanNumber;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.updateMemberDetail=function(){var e=(0,s.default)(o.default.mark(function e(t){t.userInfo,t.callNo,t.name;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.searchContact=function(){var e=(0,s.default)(o.default.mark(function e(t){t.callNo,t.name;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterTempConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.actionShareClickByRecent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.createConfByTeamList=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.showConfInfo=function(e){},r.createTempTypeMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.toggleCreateVideoConf=function(e){},r.resetJoinConfValue=function(){},r.resetCreateConfValue=function(){},r.changeStartTime=function(e){},r.resetBookConfValue=function(){},r.handleIpcRightMenuContent=function(e,t,n,r){},r.actionActiveDirection=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.recordFlagIsFirstTimeRun=function(e){},r.RecordIsIntoInterval=function(e){},r.changeStatusOfConference=function(e){},r.recordConferenceOldId=function(e){},r.recordConferencePasswordDetail=function(e){},r.toggleShowConfInfoCard=function(e){},r.handleJoinTempConfNoNameWithConfId=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.oneJoinVMR=function(e){},r.actionCallAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionRemoveAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionHangupAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionReInviteAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionWatchAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleSvcLockWatch=function(e,t){},r.actionMuteConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionBroadcastAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.actionCallOtherNum=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.enterConfInConfList=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.bookMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.changeConfLen=function(e){},r.changeStartTimeMobile=function(e){},r.deleteClickParticipants=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.saveMettingTypeValue=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.toggleChangeCamerState=function(){},r.toggleChangeMicState=function(){},r.createAMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.showJoinMeetingBtn=function(){},r.cancelConf=function(e){},r.enterConfInConfInfo=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.currentAccountIsRole=function(e,t){},r.getAttendee=function(e){},r.toggleSetUseFixedConfIDState=function(e){},r.toggleIsReacrdSwitch=function(e){},r.toggleCreateMeetingPassword=function(e){},r.initCreateMettingContent=function(){},r.saveConThemeName=function(e){},r.delConfInfoFromDb=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initMobileFirstAcceptShare=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.resetFirstAcceptShareFlag=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.initMobileFirstInfoConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.resetFirstInfoConferenceFlag=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleSvcClickJSPage=function(e){},r.cloudRecordRequestFuc=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.requestChairmanFuc=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.releaseChairmanFuc=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.lockConfFuc=function(){},r.unlockConfFuc=function(){},r.grabBfcpConfirm=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionActiveDirectionForMobile=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.isHasRecordPermission=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},r.formatConfId=function(e){},r.acceptConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.rejectConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.maxhubSkipLogin=function(){},r.enterConfByIdOnly=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.enterConfById=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.toggleChangeConfAcsNum=function(e){},r.toggleChangeConfAcsId=function(e){},r.createMaxHubMeeting=function(){},r.toggleShowMemberList=function(e){},r.upgrade2DataConfOrStartShare=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.changeTimeZone=function(e){},r.setSmcFirstRequest=function(){},r.joinExperienceMeeting=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.handleNotShowChairPas=function(e){},r.handleNotShowGeneralPas=function(e){},r.changeConfAttendeeInfo=function(e){},r.changeCurrentConfInfo=function(e){},r.searchContactName=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleShowEndConf=function(e){},r.endCallAndLogout=function(){},r.actionEndConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.actionCreateConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a,s,c){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),r.actionExportConfmember=function(){},r.transferChairman=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.compressRemoveAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.compressreleasePreservate=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionRequestChairman=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.firstOptionClick=function(e){},r.memberItemHandleClick=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a,s){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),r.changeMuteState=function(e,t,n,r){},r.actionMuteAllAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t){t.isMute,t.isAllowUnmute;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleShowMemberList=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]},r.actionCreateConfByRecent=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setUnreadNumber=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]},r.changeGroupId=function(e){},r.getExperienceConferenceInfo=function(e){},r.showOrDisabledBtn=function(){},r.getInitHistoryConfList=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.handleSmcEnterDataConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getConfShareUrl=function(e){},r.enterConfByIdOnlyWithConfPas=function(){var e=(0,s.default)(o.default.mark(function e(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.resetDefaultValue=function(){},r.returnTimeCur=function(){},r.getDefaultDate=function(){},r.changeStartTimeMin=function(e){},r.changeStartTimeHour=function(e){},r.changeConfPage=function(e){},r.toggleConfOtherNumber=function(e){},r.initBfcpWindow=function(){var e=(0,s.default)(o.default.mark(function e(t,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.switchVideoToMain=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.refreshShareSize=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handup=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.handleSSRCURL=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:$getState().call.callId,arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.actionMuteAttendee=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.getVRMList=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.NotifyCameraListUpdateEx=function(e){},r.updateCameraList=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.searchMemberList=function(){var e=(0,s.default)(o.default.mark(function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleMobileBfcpStatus=function(){},r.setConfServerId=function(e){},r.setSubject=function(e){},r.setViewMode=function(e,t){},r.initRemotWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.updateLocalwindowCallId=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.closeCallInterface=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.closeBfcpFrame=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getConfList=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.handleIsShowJoinButton=function(e){},r.getConfInfo=function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),r.UportalTokenErr=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},r.changeConfInfoCardState=function(e){},r.oneKeyEnterConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a){arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),r.toggleChangeConfAcsPas=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getConfInfoFromDb=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.gettempuserinfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initConfctrl=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.recordIsImGroupCreateConf=function(e){},r.toggleIsBookSendEmail=function(e){},r.toggleIsBookSendSMS=function(e){},r.delConfRecord=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.toggleSetIsBookSendEmail=function(e){},r.toggleSetIsBookSendSMS=function(e){},r.toggleSetCreateUseFixedConfIDState=function(e){},r.itmeetingCreateConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.meetingHWspeakerOnOrOff=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.itmeetingJoinConf=function(){},r.itmeetingChairman=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.meetingHWsetCaptureCamera=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.meetingHWcameraOnOrOff=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.itmeetingSmallWin=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.meetingHWreCallTimeOut=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.firstQosReport=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.itmeetingShareScreen=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.itmeetingAcceptSharing=function(){},r.meetingHWmicrophoneOnOrOff=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startCallFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.qosAlertSend=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.uportalLoginFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.sipRegisterFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.registerNativeWndEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.unregisterNativeWndEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getLinkJoinConfService=function(){},r.getRegisterConfEventAtomic=function(){},r.getSubScribeConfListAndInfoResAtomic=function(){},r.getVmrInfoToDbAtomic=function(){},r.getAsInfoToDbAtomic=function(){},r.getNativeInterface=function(){},r.getSvcAtdManager=function(){},r.getSvcAttendanceManager=function(){},r.getToolbarManager=function(){},r.getDecoderManager=function(){},a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},1721:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeMuteState=t.firstOptionout=t.secondOptionClick=t.firstOptionClick=t.handleContextMenu=t.handleIpcRightMenuContent=t.actionConfMuteAttendee=t.memberItemHandleClick=t.avatarClickShowInfo=void 0;var a=n(123),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(248),l=n(153),d=n(286),p=n(166),h=n(194),g=n(153),v=n(153),m=n(186),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m),C=coreLogger.getLogger("conf")("logic/conference/audio/confMemberNew/index.js"),w=(t.avatarClickShowInfo=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.handleShowMemberList)(),coreCall.setNoMoveTrue(),coreUi.loadSliderDetailInfo(n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.memberItemHandleClick=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o){var i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=1===n||r)){e.next=21;break}if(constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF!==t){e.next=20;break}if(a!==constant.MUTE_STATE.MUTE_STATE_TOMUTE&&a!==constant.MUTE_STATE.MUTE_STATE_TOUNMUTE){e.next=6;break}return C.info("is muting or unmuting, do nothing..."),e.abrupt("return");case 6:if(!r){e.next=17;break}if(c=_.getShareAudio(),a||!c){e.next=12;break}$dispatch(coreUi.showIpcMuteTipSharing(!0)),e.next=15;break;case 12:return p.SvcAtdManager.setMuteState(!0,!a),e.next=15,h.ToolbarManager.setValueZeroFunc();case 15:e.next=18;break;case 17:a?(C.info("userClick  click to cancel mute"),w(0,o,r)):(C.info("userClick  click to mute"),w(1,o,r));case 18:e.next=21;break;case 20:constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT===t?(C.info("click to reInvite: "+handlePhoneNumber(o)),(0,l.actionReInviteAttendee)(o)):C.info("not in conf state, no click func");case 21:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.actionConfMuteAttendee=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("userClick mute : attendee: "+handlePhoneNumber(n)+"isSelf: "+r+"isMute: "+t),a={isMute:t,attendee:n},e.next=4,coreConf.muteAttendeeService(a);case 4:if(!(o=e.sent)||0!==o.result){e.next=18;break}if(C.info("mute attendee success: "+handlePhoneNumber(n)),(0,d.setMemberToMuteState)(n,t),!r){e.next=16;break}if(!t){e.next=14;break}return e.next=12,$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE));case 12:e.next=16;break;case 14:return e.next=16,$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE));case 16:e.next=19;break;case 18:C.error("mute attendee failed: "+handlePhoneNumber(n));case 19:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}());t.handleIpcRightMenuContent=function(e,t,n,r){var a=coreCommon.isVideoConf(t.media_type),i={attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo},s={};if(t.is_self)s=n?{type:"isSvcConf_isSelf",selfRole:r,actionMuteAttendee:w,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch,pcHandup:coreCall.pcHandup}:{type:"isSelf",mediaType:t.media_type,selfRole:r,actionMuteAttendee:w,actionCallOtherNum:l.actionCallOtherNum,actionWatchAttendee:v.actionWatchAttendee};else{var c=$getState().conf.videoMultipicNum;t.userInfo===c?i={type:"multiPic"}:n&&r?s={type:"isSvcConf_compereToAttendee",participantId:t.participant_id,actionMuteAttendee:w,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch}:n&&!r?s={type:"isSvcConf_AttendeeToOthers",handleSvcLockWatch:f.handleSvcLockWatch}:n||!r&&!a||(s={type:"compereToAttendee",mediaType:t.media_type,participantId:t.participant_id,actionMuteAttendee:w,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionWatchAttendee:v.actionWatchAttendee,selfRole:r})}return i=(0,o.default)({},i,s),{type:constant.RIGHT_MENU_TYPE.CONF_MEMBERLIST,event:e,target:i}},t.handleContextMenu=function(e,t,n,r){var a=0!=(t.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(t.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(t.is_self){C.info("handleContextMenu","ConfMemberListRightMenu to self");var o={};o=n?{type:"isSvcConf_isSelf",attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo,selfRole:r,actionMuteAttendee:w,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch,pcHandup:coreCall.pcHandup}:{type:"isSelf",attendeeState:t.state,isMuted:t.is_mute,mediaType:t.media_type,attendeeNumber:t.number,userInfo:t.userInfo,selfRole:r,actionMuteAttendee:w,actionCallOtherNum:l.actionCallOtherNum,actionWatchAttendee:v.actionWatchAttendee,isVideoConf:a};var i={type:constant.RIGHT_MENU_TYPE.CONF_MEMBERLIST,event:e,target:o};coreUi.showMemberListRightMenuLogic(i)}else{var s={};t.userInfo===$getState().conf.videoMultipicNum?s={type:"multiPic"}:n&&r?(C.info("handleContextMenu","ConfMemberListRightMenu compere to attendee"),s={type:"isSvcConf_compereToAttendee",attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo,participantId:t.participant_id,actionMuteAttendee:w,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionBroadcastAttendee:l.actionBroadcastAttendee,handleSvcLockWatch:f.handleSvcLockWatch}):n&&!r?(C.info("handleContextMenu","ConfMemberListRightMenu Attendee to others"),s={type:"isSvcConf_AttendeeToOthers",attendeeState:t.state,isMuted:t.is_mute,attendeeNumber:t.number,isVideoConf:a,userInfo:t.userInfo,handleSvcLockWatch:f.handleSvcLockWatch}):n||!r&&!a||(s={type:"compereToAttendee",attendeeState:t.state,isMuted:t.is_mute,mediaType:t.media_type,attendeeNumber:t.number,userInfo:t.userInfo,participantId:t.participant_id,actionMuteAttendee:w,actionReInviteAttendee:l.actionReInviteAttendee,actionCallOtherNum:l.actionCallOtherNum,actionCallAttendee:l.actionCallAttendee,actionHangupAttendee:l.actionHangupAttendee,actionRemoveAttendee:l.actionRemoveAttendee,actionWatchAttendee:v.actionWatchAttendee,selfRole:r,isVideoConf:a});var c={type:constant.RIGHT_MENU_TYPE.CONF_MEMBERLIST,event:e,target:s};coreUi.showMemberListRightMenuLogic(c)}},t.firstOptionClick=function(e){var t=$getState().menu.rightMenuList[e.firstIndex].callback;void 0!=e.secondIndex&&(t=$getState().menu.rightMenuList[e.firstIndex].children[e.secondIndex].callback);var n=e.unClick,r=e.hasChildren;n||!r&&t&&t()},t.secondOptionClick=function(e){var t=+e.firstOption.charAt(11),n=$getState().menu.rightMenuList[t].children[e.secondIndex].callback,r=e.unClick,a=e.hasChildren;r||!a&&n&&n()},t.firstOptionout=function(e){var t=$getState().menu.rightMenuList[e.firstIndex].callback,n=e.unClick,r=e.hasChildren;n||$dispatch(coreUi.settogglechildrenoption()),!r&&t&&t()},t.changeMuteState=function(e,t,n,r){var a=e.filter(function(e){return e.number===n}),o=a[0].is_mute;if(r||1===t){if(o===constant.MUTE_STATE.MUTE_STATE_TOMUTE||o===constant.MUTE_STATE.MUTE_STATE_TOUNMUTE)return void C.info("is muting or unmuting, do nothing...");o?(C.info("userClick  click to cancel mute"),(0,g.actionMuteAttendee)(0,n,r)):(C.info("userClick  click to mute"),(0,g.actionMuteAttendee)(1,n,r))}}},1722:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.joinExperienceMeeting=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(952),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(153),l=coreLogger.getLogger("logic")("conference/audio/joinConference");t.joinExperienceMeeting=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isOffline){e.next=4;break}return window.ToastNew(language.OFFLINE_STATUS),l.info("joinExperienceMeeting offline not allowed use"),e.abrupt("return");case 4:if(t=$getState().conf.experienceConfId,!u.checkConferenceId(t)){e.next=8;break}return l.info("joinExperienceMeeting confId is null, so return"),e.abrupt("return");case 8:return l.info("joinExperienceMeeting start"),e.next=11,coreSecurity.getPasswordManager();case 11:return n=e.sent,e.next=14,n.getPassword("experienceConfPwd");case 14:return r=e.sent,l.info("joinExperienceMeeting get confPas suc"),a={confId:$getState().conf.experienceConfId,confPas:r,confSubject:language.EXPERIENCE_CONFERENCE},e.next=19,(0,f.enterConfByIdOnlyWithConfPas)(a);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},1723:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(1724),l=coreLogger.getLogger("CONF")("LINKJOIN"),d=null,p=function e(){var t=this;return(0,u.default)(this,e),this.init=function(){l.info("link join conf init"),window.handleJoinConfByLink=t.handleJoinConfByLink},this.handleConfUrl=function(){var e=(0,s.default)(o.default.mark(function e(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.info("handleConfUrl"),t.handleJoinConfByLink(n),navigator.splashscreen&&navigator.splashscreen.hide();case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinConfByLink=function(e){return isNullOrEmpty(e)?void l.error("handleConfUrl error: url is null"):(t.linkType=t.parseLinkTypeFromUrl(e),t.linkType===f.LINK_TYPE.NONE?(l.error("handleConfUrl error: unknow url page"),void t.resetData()):(t.shouldJoinConfByLink=!0,t.url=e,void(t.linkType===f.LINK_TYPE.LINK_JOIN?t.joinConfByLink():l.info("join conf by link:unknow link type"))))},this.joinConfByLink=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("joinConfByLink"),window.inAppBrowserRef&&window.inAppClosePage&&window.inAppClosePage(),e.next=4,coreAccount.getResumeEnable();case 4:n=e.sent,n?l.info("join conf by link now is login"+t.url):(l.info("join conf by link now is is logout or kickout "+t.url),t.actionJoinConfByLink());case 6:case"end":return e.stop()}},e,t)})),this.actionJoinConfByLink=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.closeOutSidePage(),window.hasLoadConfig){e.next=5;break}return l.info("has not loadconfig , do later :"+t.url),e.next=5,coreCommon.loadConfig();case 5:l.info("handleJoinTempConfNoName",t.url),n=coreCommon.getUrlVars(t.url),l.info("uriValues",n),t.updateLoginInfoWithUriValues(n),t.checkJoinConfByLink();case 10:case"end":return e.stop()}},e,t)})),this.resetData=function(){t.url=null,t.shouldJoinConfByLink=!1,t.linkType=f.LINK_TYPE.NONE},this.checkHasProvicyPageShow=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.localStorage.getItem("isFirstInstall"),window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===n||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return l.info("[checkProvicyPageShow] local has First install before license, enter conf after access license"),e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,t)})),this.checkHasInConfOrCall=function(){if(coreConf.isInConf()||coreCall.getCallCount()>0)return window.CLIENTCONFIG.ISMOBILE?alert(language.PREVENT_TWO_CALLS):window.Toast(language.PREVENT_TWO_CALLS,2,!1,"WhiteWarning"),!0},this.checkHasLocalLoginAccount=(0,s.default)(o.default.mark(function e(){var n,r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState(),r=n.login,a=r.account,i=r.serverAddress,s=r.serverPort,l.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+i+", serverPort: "+s),e.next=4,coreSecurity.getPasswordManager();case 4:return c=e.sent,e.next=7,c.getPassword("password");case 7:return u=e.sent,e.abrupt("return",!(isNullOrEmpty(a)||isNullOrEmpty(u)||isNullOrEmpty(i)||isNullOrEmpty(s)));case 9:case"end":return e.stop()}},e,t)})),this.checkJoinConfByLink=(0,s.default)(o.default.mark(function e(){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkHasProvicyPageShow();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return");case 4:if(!t.checkHasInConfOrCall()){e.next=7;break}return t.resetData(),e.abrupt("return");case 7:return e.next=9,t.checkHasLocalLoginAccount();case 9:if(!e.sent){e.next=31;break}if(!t.checkUportalIsLogining()){e.next=14;break}l.info("local has uportal, state: registering, enter conf later"),e.next=29;break;case 14:if(!t.checkHasUportalLogin()){e.next=28;break}if(!t.checkSipIsRegisting()){e.next=18;break}e.next=26;break;case 18:if(!t.checkHasSipRegisted()){e.next=26;break}return e.next=21,coreAccount.getLoginModel();case 21:n=e.sent,n.sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP,t.doJoinConf(!0),e.next=26;break;case 26:e.next=29;break;case 28:t.doJoinConf(!1);case 29:e.next=38;break;case 31:return e.next=33,coreAccount.isAccountAutoLogin();case 33:return r=e.sent,e.next=36,window.stroage.isFastLogin();case 36:a=e.sent,a||r||t.doJoinConf(!1);case 38:case"end":return e.stop()}},e,t)})),this.doJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(n){var r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.linkType!==f.LINK_TYPE.LINK_JOIN){e.next=4;break}return e.next=3,coreAccount.setIsCACertCheckSupport({isSupportCACertCheck:!1});case 3:n?(r=coreCommon.getUrlVars(t.url),a={confId:r.conf_id,confPas:r.enter_code},i="false"!==r.open_camera,s="false"!==r.open_mic,!1===i&&coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),!1===s&&coreCommon.MicControl.getInstance().setIsMuteMicDe(),coreConf.enterConfByIdOnlyWithConfPas(a)):(window.CLIENTCONFIG.ISMOBILE?window.goRoute("noLoginJoinConference"):window.goRoute("login/noLoginJoinConference"),coreConf.handleJoinTempConfNoNameWithConfId());case 4:t.resetData();case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.checkHasUportalLogin=function(){var e=$getState(),t=e.login.uportalLoginState;return constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS===t},this.checkUportalIsLogining=function(){var e=$getState(),t=e.login.uportalLoginState;return constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING===t},this.checkHasSipRegisted=function(){var e=$getState(),t=e.login.sipRegisterState;return constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED===t},this.checkSipIsRegisting=function(){var e=$getState(),t=e.login.sipRegisterState;return constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING===t},this.updateLoginInfoWithUriValues=function(e){var t=decodeURIComponent(e.conf_id),n=decodeURIComponent(e.server_url),r=e.port,a=e.enter_code,o=decodeURIComponent(e.name),i="false"!==e.open_camera,s="false"!==e.open_mic;coreAccount.updateTempSipAccount(t),coreAccount.updateTempSipPwd({data:a}),coreAccount.updateTempSipNick({name:o}),coreAccount.setServerAddress({serverAddress:n,serverPort:r}),$dispatch(coreUi.setMicState(s)),$dispatch(coreUi.setCamerState(i))},this.closeOutSidePage=function(){window.setTimeout(function(){return window.dispatchEvent(new Event("closeOutSidePage"))},500),clearTimeout(window.openBrowerTimer)},this.parseLinkTypeFromUrl=function(e){if(-1!==e.indexOf("/page/link"))return f.LINK_TYPE.NO_NAME_JOIN;var t=coreCommon.getUrlVars(e);if(!isNullOrEmpty(t)){var n=t.page;return"joinTempConf"===n?f.LINK_TYPE.TEMP_JOIN:"joinConfByLink"===n?f.LINK_TYPE.LINK_JOIN:f.LINK_TYPE.NONE}},d||(d=this,this.url=null,this.linkType=f.LINK_TYPE.NONE,this.shouldJoinConfByLink=!1,this.init()),d};t.default=p},1724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LINK_TYPE={NONE:0,NO_NAME_JOIN:1,TEMP_JOIN:2,LINK_JOIN:3}},1725:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairConfApiImpl=t.getPairConfApi=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(119),f=a(u),l=n(4),d=a(l),p=n(120),h=a(p),g=n(121),v=a(g),m=n(1726),_=a(m),C=n(655),w=r(C),S=n(948),I=r(S),E=n(652),N=r(E),b=n(1727),T=n(654),y=n(653),O=r(y),x=n(416),A=r(x),L=void 0,k=(t.getPairConfApi=function(){return isNullOrEmpty(L)&&(L=new k),L},t.pairConfApiImpl=function(e){function t(){var e=this;(0,d.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return n.endPairWithPeripherals=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.tips,a=void 0===r?"":r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.endPairWithPeripherals(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.serverCloseAllPair=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.serverCloseAllPair();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.uninitAsPairServer=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.uninitAsPairServer();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initAsPairServer=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.initAsPairServer();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initAsPairServer=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.initAsPairServer();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.handlePairClosed=function(){var t=(0,c.default)(i.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.tips,a=void 0===r?"":r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.handlePairClosed(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.initTupPairClient=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.initTupPairClient();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.initTupPairServer=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.initTupPairServer();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.pairClosedNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.pairClosedNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairSubscribeNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.pairSubscribeNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairCallStateNotify=function(e){return N.pairCallStateNotify(e)},n.pairLinkageConfNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.pairLinkageConfNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairLinkageConfStateNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.pairLinkageConfStateNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairInviteJoinConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.pairInviteJoinConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.receivePairReqNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.receivePairReqNotify(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.pairedOrCanceledResultNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.pairedOrCanceledResultNotify(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleServerUniversalInfoNotify=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.handleServerUniversalInfoNotify)(n));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.handleClientUniversalInfoNotify=function(e){return(0,T.handleClientUniversalInfoNotify)(e)},n.startPairMeeting=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.startPairMeeting(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.closePair=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.closePair());case 1:case"end":return e.stop()}},t,e)})),n.startQRCodePair=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.pairCode,a=n.isForce,o=void 0!==a&&a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.startQRCodePair(r,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.sendJoinPairResult=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.id,a=n.result;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.sendJoinPairResult(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.getPairConfPasResult=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getPairConfPasResult(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.requestPairCode=(0,c.default)(i.default.mark(function t(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.requestPairCode();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.endOldPairAndRepair=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.type,a=n.code,o=void 0===a?"":a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.endOldPairAndRepair(r,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.startManualPair=function(){var t=(0,c.default)(i.default.mark(function t(n){var r=n.pairCode,a=n.isForce,o=void 0!==a&&a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.startManualPair(r,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.joinPairConf=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.joinPairConf(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.joinPairConfNoPas=function(){var t=(0,c.default)(i.default.mark(function t(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.joinPairConfNoPas(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n}return(0,v.default)(t,e),t}(_.default))},1726:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.endPairWithPeripherals=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.tips;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.serverCloseAllPair=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.uninitAsPairServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initAsPairServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initAsPairServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.handlePairClosed=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.tips;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.initTupPairClient=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.initTupPairServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.pairClosedNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairSubscribeNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairCallStateNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairLinkageConfNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairLinkageConfStateNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairInviteJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.receivePairReqNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.pairedOrCanceledResultNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleServerUniversalInfoNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.handleClientUniversalInfoNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startPairMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.closePair=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.startQRCodePair=function(){var e=(0,s.default)(o.default.mark(function e(t){t.pairCode,t.isForce;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.sendJoinPairResult=function(){var e=(0,s.default)(o.default.mark(function e(t){t.id,t.result;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getPairConfPasResult=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.requestPairCode=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.endOldPairAndRepair=function(){var e=(0,s.default)(o.default.mark(function e(t){t.type,t.code;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startManualPair=function(){var e=(0,s.default)(o.default.mark(function e(t){t.pairCode,t.isForce;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.joinPairConf=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.joinPairConfNoPas=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},1727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleServerUniversalInfoNotify=void 0;var r=n(416),a=coreLogger.getLogger("logic")("synergism/server/info");t.handleServerUniversalInfoNotify=function(e){a.info("handleServerUniversalInfoNotify, param = ",e);var t=JSON.parse(e.info),n=t.command_seq,o=t.event_rsp;if(n)switch(n){case constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF:(0,r.receiveJoinPairConf)(e.id,t.param);break;default:a.info("unknow command, command_seq = ",n)}else o&&a.info("unknow event, event_rsp = ",o)}},1728:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.nativeWndApiImpl=t.getNativeWndApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=n(1729),m=r(v),_=n(226),C=void 0,w=(t.getNativeWndApi=function(){return isNullOrEmpty(C)&&(C=new w),C},t.nativeWndApiImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return n.changeNativeLangCode=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.langcode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.changeNativeLangCode)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setNativeWndLogPath=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.logpath;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.setNativeWndLogPath)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.notifyChangePassiveBidirectionStatus=function(){var t=(0,s.default)(o.default.mark(function t(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.notifyChangePassiveBidirectionStatus)(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.initTimer=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.isStartTimer,a=n.timeInterval;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.initTimer)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n}return(0,g.default)(t,e),t}(m.default))},1729:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.changeNativeLangCode=function(){var e=(0,s.default)(o.default.mark(function e(t){t.langcode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setNativeWndLogPath=function(){var e=(0,s.default)(o.default.mark(function e(t){t.logpath;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.notifyChangePassiveBidirectionStatus=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.initTimer=function(){var e=(0,s.default)(o.default.mark(function e(t){t.isStartTimer,t.timeInterval;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},173:function(e,t,n){n(23),n(22),e.exports=n(174)},1730:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dataConfLogcApiImpl=t.getDataConfLogicApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=n(1731),m=r(v),_=n(1732),C=r(_),w=null,S=(t.getDataConfLogicApi=function(){return isNullOrEmpty(w)&&(w=new S),w},t.dataConfLogcApiImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return n.rejectRemoteControl=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.userid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).rejectRemoteControl(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setRemoteControl2Other=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.userid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).setRemoteControl2Other(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.saveDesktopShareSettingLogic=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.isDesktopShareSet;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).saveDesktopShareSettingLogic(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setIsUsePrimarySize=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).setIsUsePrimarySize();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.getDesktopShareInDbLogic=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).getDesktopShareInDbLogic();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.hidePickSharingWindow=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).hidePickSharingWindow();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.startAppSharingWindow=function(){var t=(0,s.default)(o.default.mark(function t(n){var r=n.index;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).startAppSharingWindow(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.initializeDataConf=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).initializeDataConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n.startShareScreen=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new C.default).startShareScreen();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)})),n}return(0,g.default)(t,e),t}(m.default))},1731:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.rejectRemoteControl=function(){var e=(0,s.default)(o.default.mark(function e(t){t.userid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setRemoteControl2Other=function(){var e=(0,s.default)(o.default.mark(function e(t){t.userid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.saveDesktopShareSettingLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){t.isDesktopShareSet;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setIsUsePrimarySize=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.getDesktopShareInDbLogic=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.hidePickSharingWindow=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.startAppSharingWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){t.index;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.initializeDataConf=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.startShareScreen=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},1732:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(123),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(227),p=n(1733),h=r(p),g=n(1734),v=r(g),m=n(1735),_=r(m),C=n(1736),w=r(C),S=n(1737),I=r(S),E=n(1738),N=r(E),b=n(953),T=r(b),y=n(186),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),x=n(166),A=coreLogger.getLogger("dataconf")("logic"),L=null,k=function e(){var t=this;return(0,l.default)(this,e),this._instancePlatformImpl=function(){switch(A.info("dataconfmanager _instancePlatformImpl"),d.DFConfig.platform){case"win":var e=null;e=window.isHubEnv?new N.default:new T.default;var n=new h.default(e);t.platformCategory=new I.default(n),e.proxy=n,n.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"bigwin":var r=new w.default,a=new h.default(r);t.platformCategory=new I.default(a),r.proxy=a,a.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"mac":var o=new v.default;t.platformCategory=new I.default(o),o.proxy=t.platformCategory,t.platformCategory.proxy=t;break;case"ios":case"android":t.platformCategory=new _.default,t.platformCategory.proxy=t}},this.initializeDataConf=function(){t._instancePlatformImpl(),t.platformCategory.registerDataEvent();var e=new coreCommon.ObserverOpts(d.DFConfig.moduleName);e.target=t,coreCommon.Observer.subscribe("McuConfType",t.handleMcuConfType,e),coreCommon.Observer.subscribe("onDataSharingStateChanged",t.onDataSharingStateChanged,e)},this.handleMcuConfType=function(e){A.info("handleMcuConfType",e.param),e.param&&$dispatch(coreUi.changeIsSameGradeMcu(e.param.type))},this.handleJoinDataConfFail=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[0]}),e.next=3,coreCall.configMsDataConf(0);case 3:return e.next=5,coreCall.setCallReinvite();case 5:case"end":return e.stop()}},e,t)})),this.setRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.platformCategory.setRemoteControl2Other(n);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.rejectRemoteControl=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.platformCategory.rejectRemoteControl(n);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.startAppSharingWindow=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.platformCategory.startAppSharingWindow(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setIsUsePrimarySize=function(){t.platformCategory.setIsUsePrimarySize()},this.saveDesktopShareSettingLogic=function(){var e=(0,u.default)(s.default.mark(function e(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:constant.DESKTOP_SHARE_SETTING.IS_DEFAULT;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("saveDesktopShareSetting","isDesktopShareSet:["+r+"]"),n=[{key:"desktopShareSet",value:r}],e.next=4,window.confirm(language.ARE_YOU_SURE_SAVE_DESKTOP_SHARING_SETTINGS,!0).then(function(e){A.info("userClick  saveDesktopShareSettingLogic"),t.compressSaveDesktopShareSet(e.ret,n);var r=$getState().conf.setShareQuality,a={};r=100===r?1:40===r?0:2,a=(0,o.default)(a,{share_quality:r}),A.info("saveDesktopShare",a),x.SvcAtdManager.setParam(a)});case 4:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),this.getDesktopShareInDbLogic=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A.info("getDesktopShareInDbLogic start"),e.next=4,coreDb.queryLoginSetting({key:"desktopShareSet"});case 4:return n=e.sent,A.info("queryDesktopShareInDb",n),n.value?$dispatch(coreUi.changeShareQuality(constant.DESKTOP_SHARE_SET_SIZE[n.value.toUpperCase()+"_SIZE"])):(r=constant.DESKTOP_SHARE_SETTING.IS_DEFAULT,$dispatch(coreUi.changeShareQuality(constant.DESKTOP_SHARE_SET_SIZE[r]))),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),A.error("getDesktopShareInDbLogic error",e.t0);case 13:case"end":return e.stop()}},e,t,[[0,10]])})),this.compressSaveDesktopShareSet=function(){var e=(0,u.default)(s.default.mark(function e(n,r){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=13;break}return A.info("compressSaveDesktopShareSet","nameArgs:["+r+"]"),a=$getState().conf.isShowDataControl,e.next=6,coreDb.saveLoginSetting(r);case 6:if(!(O.isInDataConf()&&O.isDataShareStarted()&&a)){e.next=12;break}return e.t0=O,e.next=10,t.getDesktopShareSize();case 10:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1);case 12:coreUi.hideModal();case 13:e.next=18;break;case 15:e.prev=15,e.t2=e.catch(0),A.error("compressSaveDesktopShareSet:",e.t2);case 18:case"end":return e.stop()}},e,t,[[0,15]])}));return function(t,n){return e.apply(this,arguments)}}(),this.getDesktopShareSize=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getDesktopShareInDbLogic();case 3:return n=e.sent,r=!isNullOrEmpty(n)&&n.value||constant.DESKTOP_SHARE_SETTING.IS_DEFAULT,A.info("getDesktopShareSize start desktopShareSet",r),e.abrupt("return",constant.DESKTOP_SHARE_SET_SIZE[r.toUpperCase()+"_SIZE"]);case 9:e.prev=9,e.t0=e.catch(0),A.error("getDesktopShareSize error",e.t0);case 12:case"end":return e.stop()}},e,t,[[0,9]])})),this.onDataSharingStateChanged=function(e){$dispatch(coreUi.setDataSharingFlag(e))},this.hidePickSharingWindow=function(){t.platformCategory.hidePickSharingWindow()},this.startShareScreen=function(){t.platformCategory.startShareScreen()},L||(this.platformCategory=null,L=this),L};t.default=k},1733:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3),i=a(o),s=n(1),c=a(s),u=n(2),f=a(u),l=n(4),d=a(l),p=n(5),h=a(p),g=n(194),v=n(186),m=r(v),_=n(166),C=n(208),w=r(C),S=n(207),I=n(250),E=n(153),N=n(227),b=coreLogger.getLogger("dataconf")("logic"),T=function(){function e(t){var n=this;(0,d.default)(this,e),this.receiveSvcForOwnerChanged=Noop,this.stopSvcForOwnerChanged=Noop,this.showWinForSizeChange=Noop,this.addEventListenerForCtrlPrivilege=Noop,this.deleteEventListenerForCtrlPrivilege=Noop,this.handleApplistResult=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=$getState().conf.isFirstActiveAppShare,a=m.getShareAppHwnd(),b.info("handleApplistResult,setSharingapp,setStart,setHightlightShareWnd,shareAppHwnd = "+a+", isFirstActiveAppShare ="+r),n.featureImpl.handleApplistResult(t);case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.openShareScreen=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("  openShareScreen start"),$dispatch(coreUi.hideDataShareButton(!0)),e.t0=m,e.next=5,n.proxy.getDesktopShareSize();case 5:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1),n.featureImpl.openShareScreen();case 8:case"end":return e.stop()}},e,n)})),this.startDocShare=(0,f.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.getSharingType()!==constant.ConfSharingType.Document){e.next=7;break}return b.info("start openDocShareFile = ",m.getDocShareFilePath()),t=m.getDocShareFilePath(),e.next=5,n.stopCurrentSharing();case 5:m.configSharingParam(constant.ConfSharingType.Document,t),n.proxy.openDocShareFile(t);case 7:case"end":return e.stop()}},e,n)})),this.getUserSelectFileName=function(){var e=window.require("electron").remote.dialog;return b.info("getUserSelectFileName start"),new i.default(function(t,r){e.showOpenDialog({title:"Select a folder",properties:["openFile"],filters:[{name:"Text"}]},function(e){n.g_userSelfFile=e,t(1),b.info("getUserSelectFileName  selFiles =",e)})})},this.stopCurrentSharing=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.stopWBDoc();case 2:if(!m.isInSendDocSharing()&&!m.isInReceiveDocSharing()){e.next=6;break}return b.info("stopCurrentSharing stopDocSharing"),e.next=6,m.stopDocSharing();case 6:m.isInScreenSharing()&&(b.info("stopCurrentSharing stopShareScreen"),n.stopShareScreen());case 7:case"end":return e.stop()}},e,n)})),this.onJoinDataConfFail=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.featureImpl.onJoinDataConfFail();case 1:case"end":return e.stop()}},e,n)})),this.stopShareScreen=function(){n.proxy.stopShareScreen()},this.onStartDataShare=function(e){if(b.info("OnStartDataShare receive native click event, show app list ,changeIsShowMinWin false"),e.param&&3===e.param.shareType&&coreCommon.dispatchModuleEvent("pluginDataSharingHwndInfoNotify",{shareHwndTitle:e.param.shareHwndTitle}),!1===m.isSelfJoinedDataConf()){b.info("OnStartDataShare fail, not in dataconf");var t={dialog_type:1,content_id:"LANG_NATIVE_NOT_IN_DATACONF"};return void S.NativeInterface.showMessageBox(0,t)}$dispatch(coreUi.changeIsShowMinWin(!1)),n.shareFromNative=!0,n.proxy.startShareScreen(e)},this.onStartShareFailed=function(){m.setShareAppHwnd(0),m.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))},this.handleNativeUserStopDataShare=function(){m.isInWBSharing()?(b.info("handleNativeUserStopDataShare stopWBDoc"),coreCommon.dispatchModuleEvent("pluginWhiteBoardSharingStateChangedNotify",!1),m.stopWBDoc(),m.closeWBTab()):m.isDataShareStarted()?(b.info("handleNativeUserStopDataShare stopShareScreen"),n.stopShareScreen()):m.isInSendDocSharing()?(b.info("handleNativeUserStopDataShare stopDocSharing"),m.stopDocSharing(),window.isDataSharing=!1,n.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE)):b.info("handleNativeUserStopDataShare fail")},this.handleNativeUserLeaveConf=function(){b.info("  handleNativeUserLeaveConf start"),(0,E.actionLeaveConf)()},this.handleNativeUserEndConf=function(){b.info("  handleNativeUserEndConf start"),(0,E.actionEndConf)()},this.handleNativeNotifyRequestControl=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.requestRemoteControlPrivilege();case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyReleaseControl=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.delRemoteControlPrivilege("");case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyShowConfMember=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,E.handleShowMemberList)();case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyAddConfMember=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreUi.initConfSelectBoxAddMember();case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifySetMic=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$getState().call.isMuteMic?coreCommon.MicControl.getInstance().muteMic(!1):coreCommon.MicControl.getInstance().muteMic(!0);case 1:case"end":return e.stop()}},e,n)})),this.handleNativeNotifySetSpeaker=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$getState().call.isMuteSpk){e.next=5;break}return e.next=3,coreCommon.SpkControl.getInstance().muteSpk(!1);case 3:e.next=7;break;case 5:return e.next=7,coreCommon.SpkControl.getInstance().muteSpk(!0);case 7:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyDataFirstFrameRecv=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("handleNativeNotifyDataFirstFrameRecv start"),n.featureImpl.handleNativeNotifyDataFirstFrameRecv();case 2:case"end":return e.stop()}},e,n)})),this.onChangeFirstActiveShareApp=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changeFirstActiveShareApp(t));case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleNativeNotifyShowClient=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("handleNativeNotifyShowClient start"),win.isMinimized()?appService.showMainWindow(!0):delegate.winMinimize();case 2:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyPrepareRemoteControl=(0,f.default)(c.default.mark(function e(){var t,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(b.info("handleNativeNotifyPrepareRemoteControl start"),t=m.getDataConfMemberList(),r=[],a=0;a<t.length;a++)t[a].is_self||1!==t[a].device_type||(o=t[a].user_num,i=m.getRemoteControlUserNum(),s=i!==o?0:1,r.push({username:t[a].user_name,bindnum:o.toString(),status:s}));r.length>0&&m.showNativeRemoteControl(r);case 5:case"end":return e.stop()}},e,n)})),this.handleNativeNotifyChairmanRemoteControl=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("handleNativeNotifyChairmanRemoteControl data ",t),t.param.bindnumber&&(!0===t.param.isgrant?n.proxy.setRemoteControl2Other(t.param.bindnumber):m.delRemoteControlPrivilege(t.param.bindnumber));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleNativeNotifyDataShareQuality=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("handleNativeNotifyChairmanRemoteControl data ",t),$dispatch(coreUi.changeShareQuality(t.param.value)),r="",t.param.value===constant.DESKTOP_SHARE_SET_SIZE.DEFAULT_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_DEFAULT),t.param.value===constant.DESKTOP_SHARE_SET_SIZE.IMAGEQUALITY_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_IMAGEQUALITY),t.param.value===constant.DESKTOP_SHARE_SET_SIZE.DYNAMICEFFECT_SIZE&&(r=constant.DESKTOP_SHARE_SETTING.IS_DYNAMICEFFECT),a=[{key:"desktopShareSet",value:r}],e.next=9,coreDb.saveLoginSettings({args:a});case 9:b.info("nameArgs",a),t.param.value&&t.param.value>0&&t.param.value<101&&m.setDataShareScreenPicQuality(t.param.value);case 11:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handledocShareOpenResultNotify=function(e){b.info("handledocShareOpenResultNotify result : "+e),0!==e&&m.clearConfSharingType()},this.handleShowNativeDSPage=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("docshare handleShowNativeDSPage: ",t),0!==t.docid?(n.dataPicSize={width:894,height:562},n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL),!0===t.issender&&$dispatch(coreUi.hideDataShareButton(!0))):0===t.docid&&0===t.pageid&&(window.isDataSharing=!1,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),$dispatch(coreUi.hideDataShareButton(!1)));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleDocShareOnDocNewNotify=function(e){b.info("handleDocShareOnDocNewNotify receive other doc sharing: "+e),!0===e&&n.stopCurrentSharing()},this.handleShowNativeWBPageChairman=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("handleShowNativeWBPage start ",t),!0===t.isopen?(n.changeDataControlShowImpl(!0,512),$dispatch(coreUi.hideDataShareButton(!0))):(b.info("handleShowNativeWBPageChairman set isDataSharing false"),window.isDataSharing=!1,n.changeDataControlShowImpl(!1,512),$dispatch(coreUi.hideDataShareButton(!1)));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleShowNativeWBPageAttendee=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("handleShowNativeWBPageAttendee start",t),!0===t.isopen?n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL,512):(b.info("handleShowNativeWBPageAttendee set isDataSharing false"),window.isDataSharing=!1,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE,512));case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.hidePickSharingWindow=function(){n.featureImpl.hidePickSharingWindow()},this.handleNativeDataRenderSize=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.handleNativeNotifyResetRenderRect(t);case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.fullScreenReceiveShare=function(){},this.handleReceiveScreenKeyFrame=function(e){n.featureImpl.handleReceiveScreenKeyFrame(e)},this.handleDataShareEnd=function(){n.featureImpl.handleDataShareEnd()},this.onRequestOperateTokenFail=function(){b.info("start share failed."),n.featureImpl.onRequestOperateTokenFail()},this.onReceiveWhiteBoardShare=(0,f.default)(c.default.mark(function e(){var t,r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("receive white board share event"),t=$getState().conf,r=t.bfcpFrameHwnd,a=t.isSvcConf,o=0,!a){e.next=7;break}o=r,e.next=10;break;case 7:return e.next=9,w.getAvcFrameHandles();case 9:o=e.sent;case 10:if(!(o>0)){e.next=15;break}return e.next=13,_.SvcAtdManager.closeBfcpFrame();case 13:return e.next=15,w.closeBfcpFrame();case 15:case"end":return e.stop()}},e,n)})),this.featureImpl=t,this.proxy=null,this.dataPicSize={},this.g_userSelfFile=[],this.stopDataShareTimer=0,this.shareFromNative=!1}return(0,h.default)(e,[{key:"setDataPicSize",value:function(e){this.dataPicSize=e}},{key:"registerDataEvent",value:function(){this.featureImpl.registerDataEvent();var e=new coreCommon.ObserverOpts(N.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e),coreCommon.Observer.subscribe("applistResult",this.handleApplistResult,e),coreCommon.Observer.subscribe("handleNativeDataRenderSize",this.handleNativeDataRenderSize,e),coreCommon.Observer.subscribe("OnNativeUserStartDataShare",this.onStartDataShare,e),coreCommon.Observer.subscribe("OnNativeUserStopDataShare",this.handleNativeUserStopDataShare,e),coreCommon.Observer.subscribe("OnNativeUserLeaveConf",this.handleNativeUserLeaveConf,e),coreCommon.Observer.subscribe("OnNativeUserEndConf",this.handleNativeUserEndConf,e),coreCommon.Observer.subscribe("onNativeNotifyRequestControl",this.handleNativeNotifyRequestControl,e),coreCommon.Observer.subscribe("onNativeNotifyReleaseControl",this.handleNativeNotifyReleaseControl,e),coreCommon.Observer.subscribe("onNativeNotifyShowConfMember",this.handleNativeNotifyShowConfMember,e),coreCommon.Observer.subscribe("onNativeNotifyAddConfMember",this.handleNativeNotifyAddConfMember,e),coreCommon.Observer.subscribe("onNativeNotifySetMic",this.handleNativeNotifySetMic,e),coreCommon.Observer.subscribe("onNativeNotifySetSpeaker",this.handleNativeNotifySetSpeaker,e),coreCommon.Observer.subscribe("onNativeNotifyDataFirstFrameRecv",this.handleNativeNotifyDataFirstFrameRecv,e),coreCommon.Observer.subscribe("ChangeFirstActiveShareApp",this.onChangeFirstActiveShareApp,e),coreCommon.Observer.subscribe("onNativeNotifyShowClient",this.handleNativeNotifyShowClient,e),coreCommon.Observer.subscribe("onNativeNotifyPrepareRemoteControl",this.handleNativeNotifyPrepareRemoteControl,e),coreCommon.Observer.subscribe("onNativeNotifyChairmanRemoteControl",this.handleNativeNotifyChairmanRemoteControl,e),coreCommon.Observer.subscribe("onNativeNotifyDataShareQuality",this.handleNativeNotifyDataShareQuality,e),coreCommon.Observer.subscribe("docShareOpenResultNotify",this.handledocShareOpenResultNotify,e),coreCommon.Observer.subscribe("onShowNativeDSPage",this.handleShowNativeDSPage,e),coreCommon.Observer.subscribe("onShowNativeWBPageChairman",this.handleShowNativeWBPageChairman,e),coreCommon.Observer.subscribe("onShowNativeWBPageAttendee",this.handleShowNativeWBPageAttendee,e),coreCommon.Observer.subscribe("onReceivedScreenKeyFrame",this.handleReceiveScreenKeyFrame,e),coreCommon.Observer.subscribe("OnStartShareFailed",this.onStartShareFailed,e),coreCommon.Observer.subscribe("onReceiveWhiteBoardShare",this.onReceiveWhiteBoardShare,e)}},{key:"changeDataControlShowImpl",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,p,h,v;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||2,b.info("native changeDataControlShow, isShow : "+t),a=$getState().conf,o=a.memberListInfo,i=a.isSvcConf,s=a.isVideoConf,u=$getState().myInfo.enableDoubleScreen,f=$getState().conf.monitorNumber,!0===t?(g.ToolbarManager.initDeviceStates(),g.ToolbarManager.setChairmanState(o),(!u||f<=1)&&(i?_.SvcAtdManager.switchVideoToMin():w.switchVideoToMin())):i?_.SvcAtdManager.switchVideoToMain():s?w.switchVideoToMain():w.switchAudioToMain(),l=$getState().conf.setPreviewsCount>0?$getState().conf.setPreviewsCount:0,d=$getState().conf,p=d.confServerId,h=d.vmrId,v=isNullOrEmpty(h)?p:h,e.next=11,m.showNativeDataControl(t,!0,l,$getState().login.account,r,v);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearCanvas",value:function(){}},{key:"closeBfcpFrameForSharingSession",value:function(){this.featureImpl.closeBfcpFrameForSharingSession()}},{key:"closeAppShare",value:function(e){this.featureImpl.closeAppShare(e)}},{key:"doChangeDataConfShowMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,p,h,g,v,_,C,w,S,I,E,N,T,y,O,x,A;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("changeDataConfShowMode start, showMode = ",t),r=n||2,a=$getState().conf.sharePersonName,t!==constant.SHOW_DATACONF_MODE.SHOW_DATACONF_FULL&&t!==constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL){e.next=33;break}if(!(2===r&&this.dataPicSize&&this.dataPicSize.width||512===r)){e.next=30;break}return o=this.dataPicSize.width,i=this.dataPicSize.height,b.info("dataConfModel.createNativeDataSharingWnd start"),this.featureImpl.initDeviceStates(),this.featureImpl.clearBfcpTimer(),s=$getState().conf,u=s.confSubject,f=s.confServerId,l=s.vmrId,d=s.currentConfInfo,isNullOrEmpty(l)||(f=l),p=$getState().conf.setPreviewsCount>0?$getState().conf.setPreviewsCount:0,h=$getState().call,g=h.cameraDevicesList,v=h.spkDevicesList,_=h.micDevicesList,C=$getState().setting,w=C.camIndex,S=C.spkIndex,I=C.micIndex,E=d.general_pwd?d.general_pwd:null,N={spkIndex:S,spkDevicesList:v},T={micIndex:I,micDevicesList:_},y={camIndex:w,cameraDevicesList:g},O={spk_devices:N,mic_devices:T,camera_devices:y},e.next=22,m.createNativeDataSharingWnd(u,f,p,o,i,a,coreConf.isConfChairMan(),O,E,$getState().login.account,r);case 22:return e.next=24,coreAccount.getLoginModel();case 24:x=e.sent,A=x.sipLoginOnly,A?delegate.winHide():delegate.winMinimize(),this.featureImpl.handleBfcpForChangeMode(r,a),e.next=31;break;case 30:b.error("dataConfModel.createNativeDataSharingWnd fail");case 31:e.next=39;break;case 33:return setTimeout(function(){$getState().conf.isDataConfSharing||(coreCall.resetBFCStatus($getState().call.callId,1),b.info("changeDataConfShowMode isDataConfSharing is false,resetBFCStatus to 1"))},5e3),this.featureImpl.resumeVideoWhenDataEnd(),e.next=37,m.closeNativeDataSharingWnd();case 37:b.info("isDataSharing when close ",window.isDataSharing),this.featureImpl.handleCloseNativeDataWnd(r,a);case 39:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleBfcpWindow",value:function(e){var t=this;S.NativeInterface.setHightlightShareWnd(0,!1),b.info("test111, data.isself = "+e.isself),e.isself&&m.setShareAppHwnd(0),m.updateDataShareOwner(""),clearTimeout(window.clearSetBfcp);var n=$getState().conf.isSvcConf,r=function(){var e=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("init bfcp frame onDataShareEnd"),!n){e.next=6;break}return e.next=4,_.SvcAtdManager.initBfcpFrame($getState().call.callId,!1);case 4:e.next=7;break;case 6:w.initBfcpWindow($getState().call.callId,!1);case 7:(0,I.NotifyStartSharing)(0,""),b.info("notify to proxy bfcp is start");case 9:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}();window.isHubEnv||(window.clearSetBfcp=setTimeout(function(){$getState().call.iSreceivingBFCP&&!$getState().conf.isDataConfSharing&&r()},1500))}},{key:"onJoinDataConf",value:function(){_.SvcAtdManager.reportIsDataConf(!0),$dispatch(coreUi.hideDataShareButton(!0)),m.isConfDataShareSelfEntered()?(b.info(" onJoinDataConf self entered"),$dispatch(coreUi.hideDataShareButton(!1))):b.info(" onJoinDataConf self not entered")}},{key:"closeBfcpFrameForOwnerChanged",value:function(){this.featureImpl.closeBfcpFrameForOwnerChanged()}},{key:"resumeVideoWhenDataEnd",value:function(){this.featureImpl.resumeVideoWhenDataEnd()}},{key:"showStartConfirmWithCallback",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareFromNative){e.next=5;break}t(),this.shareFromNative=!1,e.next=11;break;case 5:if(!coreConf.isConfChairMan()){e.next=10;break}return e.next=8,window.confirm(language.LANG_NATIVE_CONFIRM_START_DATASHARE,!0).then(function(e){e.ret&&(b.info("userClick win startShareScreen confirm"),t())});case 8:e.next=11;break;case 10:window.Toast(language.LANG_NATIVE_DATA_CONF_SOMEONE_SHARE_RIGHTNOW,2,!1,"pcToast_center");case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"getApplist",value:function(){m.getApplist()}},{key:"showNativeShareSelectWnd",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.showNativeShareSelectWnd();case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"startAppSharingWindow",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,n,r,a){var o,i,s,u,f,l,d,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.advancedSetting(r,a),o="",i=constant.ConfSharingType.None,s=coreConf.getCurrentConfId(),0!==t){e.next=9;break}i=constant.ConfSharingType.Desktop,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,params:[s,i]}),e.next=35;break;case 9:if(1!==t){e.next=17;break}return coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,params:[i,1]}),m.setShareAppHwnd(0),window.isDataSharing=!0,m.createWBNewDocAndPage(),e.abrupt("return");case 17:if(!N.DFConfig.isDocShareEnabled()||2!==t){e.next=33;break}if(u=$getState().myInfo.bind_no,!(!0===m.isDataShareStarted()&&m.getDataShareOwner()!==u||m.isInSendDocSharing())){e.next=23;break}return e.next=22,window.confirm(language.CANNOT_SHARE_FILE,"LANG_NATIVE_CONFIRM_TITLE",!1);case 22:return e.abrupt("return");case 23:return i=constant.ConfSharingType.Document,coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,params:[i,1]}),e.next=27,this.getUserSelectFileName();case 27:if(""!==(o=this.g_userSelfFile.length>0&&this.g_userSelfFile[0].length>0?this.g_userSelfFile[0]:"")){e.next=31;break}return b.error("startAppSharingWindow, user not select doc share file"),e.abrupt("return");case 31:e.next=35;break;case 33:i=constant.ConfSharingType.Program,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,params:[s,i]});case 35:if(this.g_userSelfFile=[],b.info("docShareFilePath ",o),m.configSharingParam(i,o),i!==constant.ConfSharingType.Document){e.next=43;break}return b.info("startAppSharingWindow start docshare"),window.isDataSharing=!0,this.startDocShare(),e.abrupt("return");case 43:0!==t?n?m.setShareAppHwnd(n):(f=$getState(),l=f.conf.shareAppList,d=l[t],p=d.handler,m.setShareAppHwnd(p)):m.setShareAppHwnd(0),b.info("isDataSharing true 2"),window.isDataSharing=!0,this.openShareScreen();case 47:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.proxy.handleJoinDataConfFail();case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleWindowForStopShareScreen",value:function(){this.featureImpl.handleWindowForStopShareScreen()}},{key:"toggleShowDataControlMenu",value:function(e,t){this.proxy.toggleShowDataControlMenu(e,t)}},{key:"changeDataConfShowMode",value:function(e,t){this.proxy.changeDataConfShowMode(e,t)}}]),e}();t.default=T},1734:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(248),p=n(186),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),g=n(227),v=coreLogger.getLogger("dataconf")("logic"),m=function(){function e(){var t=this;(0,u.default)(this,e),this.onAsOnScreenData=function(e){if(!e.param.width||!e.param.height)return void v.error("screendata width = "+e.param.width+"height = "+e.param.height);window.tupVideo.getShareFrame(t.onFrameData,10004)},this.onAsOnOnScreenDataToBfcpData=function(e){t.onAsOnScreenData(e)},this.onFrameData=function(e,n,r){if(!t.yuvCanvas){var a=document.getElementById("screenCanvas");v.info("dataPicSize.width = "+t.dataPicSize.width+";dataPicSize.height = "+t.dataPicSize.height),t.yuvCanvas=new YUVCanvas({canvas:a,width:t.dataPicSize.width,height:t.dataPicSize.height})}if(t.yuvCanvas&&!t.yuvCanvas.isWebGL())return void window.log("<video>onFrameData, canvas is not support webgl");var o=document.getElementById("parentCanvasContainer");if(null===o)return void v.info("onFrameData parentCanvasContainer is null");var i=o.offsetWidth,s=o.offsetHeight,c=$getState().conf.shareScreenWH.lastheight,u=$getState().conf.shareScreenWH.lastwidth;if(c!==s||u!==i){v.info("onFrameData set style"),o.style.overflow=!0===h.getIsUsePrimarySize()?"auto":"inherit";var f=t.calcScreenSize(t.dataPicSize,{width:i,height:s}),l=document.getElementById("screenCanvas");if(null===l)return v.info("onFrameData screenCanvas is null, refresh data share mode."),void $dispatch(coreUi.showDataShareMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL));var d=document.getElementById("screenCanvasContainer");if(null===d)return void v.info("onFrameData screenCanvasContainer is null");d.style.width=f.width+"px",d.style.height=f.height+"px";var p=Math.max(Math.ceil((i-f.width)/2),0),g=Math.max(Math.ceil((s-f.height)/2),0);d.style.left=p+"px",d.style.top=g+"px";var m=document.createElement("canvas"),_=m.getContext("2d"),C=t.getPixelRatio(_);v.info("onFrameData ratio = ",C),l.width=f.width*C,l.height=f.height*C,$dispatch(coreUi.changeShareScreenWH({lastwidth:i,lastheight:s})),t.yuvCanvas.changeCanvasSize(f.width*C,f.height*C,l)}if(r&&e>0&&n>0&&r.length===e*n*1.5){var w=new Uint8Array(r),S=e*n,I=e/2*(n/2);t.yuvCanvas.drawNextOutputPicture({yData:w.subarray(0,S),uData:w.subarray(S,S+I),vData:w.subarray(S+I,S+I+I),yDataPerRow:e,yRowCnt:n,uDataPerRow:e/2,uRowCnt:n/2})}},this.calcScreenSize=function(e,t){if(!0===h.getIsUsePrimarySize())return e;var n={width:0,height:0};if(e&&t){var r=e.width/e.height,a=t.width,o=t.height,i=a/r,s=o*r,c=(o-i)/2,u=(a-s)/2;n=r>1&&c>0||r<1&&u<0?{width:a,height:Math.floor(i)}:{width:Math.ceil(s),height:o}}return t||v.warn("<video>containerSize is null"),n},this.getPixelRatio=function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},this.changeDataControlShowImpl=function(){var e=(0,s.default)(o.default.mark(function e(n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.showDataControl(n)),v.info("js changeDataControlShow, isShow : "+n);case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.doChangeDataConfShowMode=function(){var e=(0,s.default)(o.default.mark(function e(n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.info("changeDataConfShowMode start, showMode = ",n),$dispatch(coreUi.showDataShareMode(n));case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.closeBfcpFrameForSharingSession=Noop,this.closeAppShare=Noop,this.handleBfcpWindow=function(e){var n=$getState().conf,r=n.isSvcConf,a=n.svcShareData;r&&($dispatch(coreUi.hideDataShareButton(!1)),e.isself&&t.proxy.changeDataControlShow(!1),a.hasOwnProperty("ssrc")&&a.ssrc<0&&d.SvcAttendanceManager.stopSvcShareOrBfcp(),clearTimeout(t.clearSetBfcp),t.clearSetBfcp=setTimeout(function(){if($getState().call.iSreceivingBFCP){d.SvcAttendanceManager.receviceSvcShareOrBfcp(1,"");var e=coreCall.getBigContainerSize(),t=e.height-54-74;2===$getState().conf.svcViewMode&&(t=e.height),e={width:e.width,height:t},coreCall.setSvcBFCPVideoRender(e),$dispatch(coreUi.changeIsShowMainScreen(!1))}},1500))},this.onJoinDataConf=function(){$dispatch(coreUi.hideDataShareButton(!0)),h.isConfDataShareSelfEntered()?(v.info(" onJoinDataConf self entered"),$dispatch(coreUi.hideDataShareButton(!1))):v.info(" onJoinDataConf self not entered")},this.closeBfcpFrameForOwnerChanged=Noop,this.doMouseDown=function(e){v.info("doMouseDown param  ",e);var n=e.clientX,r=e.clientY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=void 0;1===e.which?i=1:3===e.which&&(i=3),v.info("doMouseDown param  msg:"+i),t.sendWndMouseMsg(e,i,o)},this.getPointOnCanvas=function(e,n,r){var a=e.getBoundingClientRect(),o=Math.floor(n-a.left),i=Math.floor(r-a.top);return o=t.dataPicSize.width/a.width*o,i=t.dataPicSize.height/a.height*i,{x:o,y:i}},this.sendWndMouseMsg=function(e,t,n){var r=0;!0===e.ctrlKey&&(r=8),!0===e.shitKey&&(r|=4);var a=n.x+256*n.y*256;a=Math.ceil(a),h.inputWndMsg(t,a,r,n.x,n.y)},this.doMouseMove=function(e){t.fireMouseMove(e)},this.doMouseUp=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=void 0;1===e.which?i=2:3===e.which&&(i=4),v.info("doMouseUp param  msg:"+i),t.sendWndMouseMsg(e,i,o)},this.doMouseDBClick=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r);v.info("doMouseDBClick param  msg:101"),t.sendWndMouseMsg(e,101,o)},this.fireMouseMove=function(e){var n=e.pageX,r=e.pageY,a=e.target,o=t.getPointOnCanvas(a,n,r),i=0,s=0;0===e.button?s=1:1===e.button?s=16:2===e.button&&(s=2),!0===e.ctrlKey&&(s|=8),!0===e.shitKey&&(s|=4),i=n+256*r*256,h.inputWndMsg(5,i,s,o.x,o.y)},this.doKeyDown=function(e){var t=e.keyCode,n=t;v.info("doKeyDown start"),h.inputWndMsg(10,n,t,0,0)},this.doKeyUp=function(e){var t=e.keyCode,n=t;v.info("doKeyUp start"),h.inputWndMsg(11,n,t,0,0)},this.getApplist=Noop,this.openShareScreen=(0,s.default)(o.default.mark(function e(){var r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("  openShareScreen start"),$dispatch(coreUi.hideDataShareButton(!0)),e.t0=h,e.next=5,t.proxy.getDesktopShareSize();case 5:e.t1=e.sent,e.t0.startShare.call(e.t0,e.t1),r=window.require("electron").screen.getDisplayNearestPoint(window.require("electron").screen.getCursorScreenPoint()).workArea.width,a=new remote.BrowserWindow({frame:!1,show:!1,transparent:!1,width:0,height:0,skipTaskbar:!0,alwaysOnTop:!0}),window.require("electron").remote.getGlobal("remoteVars").contactGroups=$getState().contactGroups,i=n(239).format({protocol:"file",slashes:!0,pathname:n(394).join(window.__dirname,"data.html")}),a.loadURL(i),window.screenShareWin=a,s=r/2-300,c=new remote.BrowserWindow({frame:!1,show:!1,x:s,y:0,width:660,height:100,parent:a,transparent:!1,skipTaskbar:!0,alwaysOnTop:!0,fullscreen:!1,fullscreenable:!1,maximizable:!1}),u=n(239).format({protocol:"file",slashes:!0,pathname:n(394).join(window.__dirname,"shareControl.html")}),window.require("electron").remote.getGlobal("remoteVars").dataWin=c,c.loadURL(u),v.info("testwhite loadurl controlwin"),remote.ipcMain.on("toggle-menu-show-message",t.proxy.toggleShowDataControlMenu),c.once("ready-to-show",function(e){v.info("testwhite ready to show...");var t=$getState().conf.isShowDataControl;v.info("testwhite isShowDataControl = "+t),t&&c.show()}),c.setResizable(!1),t.changeDataControlShowImpl(!0);case 23:case"end":return e.stop()}},e,t)})),this.onJoinDataConfFail=(0,s.default)(o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.proxy.handleJoinDataConfFail();case 2:n=$getState().conf.confHandle,isNullOrEmpty(n)||window.confirm(language.SHARING_JOINCONF_FAIL+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_DATA_CONF_ERROR,language.SHARING_JOINCONF_FAIL)});case 4:case"end":return e.stop()}},e,t)})),this.handleMacRecvWhiteBoardOrDoc=function(){var e=(0,s.default)(o.default.mark(function e(n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.info("handleMacRecvWhiteBoardOrDoc start",n),$dispatch(coreUi.showDataTipsNotify(n,!0)),setTimeout(function(){$dispatch(coreUi.showDataTipsNotify({},!1))},5e3);case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onStartShareFailed=Noop,this.onRequestOperateTokenFail=function(){t.proxy.stopShareScreen()},this.fullScreenReceiveShare=function(){var e=$getState().call,t=e.isFullScreenReceiveShare,n=e.screenState,r=t||"full"===n;v.info(" onShareScreenSizeChange isFullScreenReceiveShare = "+t+" screenState = "+n),r&&(coreCall.changeFullScreenReceiveShare(!0),coreCall.toFullScreen())},this.handleDataShareEnd=function(){t.yuvCanvas=null},this.hidePickSharingWindow=Noop,this.yuvCanvas=null,this.dataPicSize={},this.clearSetBfcp=0,this.lastMoveTime=0,this.arrayMouseMoveEvent=[],this.proxy=null}return(0,l.default)(e,[{key:"setDataPicSize",value:function(e){this.dataPicSize=e}},{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(g.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnScreenData",this.onAsOnScreenData,e),coreCommon.Observer.subscribe("OnScreenDataToBfcpData",this.onAsOnOnScreenDataToBfcpData,e),coreCommon.Observer.subscribe("onMacRecvWhiteBoardOrDoc",this.handleMacRecvWhiteBoardOrDoc,e),coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e)}},{key:"receiveSvcForOwnerChanged",value:function(e){d.SvcAttendanceManager.receviceSvcShareOrBfcp(0,e),$dispatch(coreUi.changeIsShowMainScreen(!1))}},{key:"stopSvcForOwnerChanged",value:function(){coreCall.closeSvcDataSocket(),d.SvcAttendanceManager.stopSvcShareOrBfcp()}},{key:"showWinForSizeChange",value:function(){appService.showMainWindow(!0)}},{key:"addEventListenerForCtrlPrivilege",value:function(){var e=document.getElementById("screenCanvas");if(null===e)return void v.info(" OnGetRemoteControlPrivilege screenCanvas is null");e.addEventListener("mousedown",this.doMouseDown,!1),e.addEventListener("mousemove",this.doMouseMove,!1),e.addEventListener("mouseup",this.doMouseUp,!1),e.addEventListener("dblclick",this.doMouseDBClick,!1),window.addEventListener("keydown",this.doKeyDown,!0),window.addEventListener("keyup",this.doKeyUp,!0)}},{key:"deleteEventListenerForCtrlPrivilege",value:function(){var e=document.getElementById("screenCanvas");null!==e&&(e.removeEventListener("mousedown",this.doMouseDown,!1),e.removeEventListener("mousemove",this.doMouseMove,!1),e.removeEventListener("mouseup",this.doMouseUp,!1),e.removeEventListener("dblclick",this.doMouseDBClick,!1)),window.removeEventListener("keydown",this.doKeyDown,!0),window.removeEventListener("keyup",this.doKeyUp,!0)}},{key:"resumeVideoWhenDataEnd",value:function(){if($getState().conf.isSvcConf)return void v.info("is svcconf ,resumeVideoWhenDataEnd return");if("VIDEO_CONNECTED"===$getState().call.callStatus){v.info("<video>in data full,resumeVideoForDataEnd");var e=coreCall.getBigContainerSize(),t={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH};this.proxy.isVideoRemtoBig?(this.proxy.isVideoRemtoBig=!1,$dispatch(coreUi.changeBigSmallWin()),$dispatch(coreUi.changeSmallWinStyle(t)),coreCall.setLocalVideoRender(t),e=coreCall.calcRealVideoSize({width:$getState().call.smallWinStyle.width,height:$getState().call.smallWinStyle.height},e),$dispatch(coreUi.changeBigWinStyle(e)),coreCall.setVideoWH(!0,e)):(e=coreCall.calcRealVideoSize({width:16,height:9},e),$dispatch(coreUi.changeBigWinStyle(e)),coreCall.setLocalVideoRender(e))}}},{key:"showStartConfirmWithCallback",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!coreConf.isConfChairMan()){e.next=5;break}return e.next=3,window.confirm(language.LANG_NATIVE_CONFIRM_START_DATASHARE,!0).then(function(e){e.ret&&(v.info("userClick mac startShareScreen confirm"),t())});case 3:e.next=6;break;case 5:window.Toast(language.LANG_NATIVE_DATA_CONF_SOMEONE_SHARE_RIGHTNOW,2,!1,"pcToast_center");case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"startAppSharingWindow",value:function(e){var t=constant.ConfSharingType.Desktop;coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,params:[coreConf.getCurrentConfId(),t]}),h.configSharingParam(t,""),this.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),v.info("isDataSharing true 2"),window.isDataSharing=!0,this.openShareScreen()}},{key:"handleWindowForStopShareScreen",value:function(){win.restore(),"CALL_CONNECTED"===$getState().call.callStatus&&appService.showMainWindow(!0),coreCall.exitFullScreen(),remote.ipcMain.removeListener("toggle-menu-show-message",this.proxy.toggleShowDataControlMenu),$dispatch(coreUi.showDataConfCmdNotify({},!1))}}]),e}();t.default=m},1735:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(123),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(286),g=n(287),v=n(153),m=n(227),_=coreLogger.getLogger("dataconf")("logic"),C=function(){function e(){var t=this;(0,l.default)(this,e),this.mobileWhiteBoardStateChange=function(e){_.info("enter mobileWhiteBoardStateChange state: "+e),$dispatch(coreUi.changeStartWhiteBoard(1===e))},this.mobileScreenShareStateChange=function(e){_.info("enter mobileScreenShareStateChange state: "+e),t.isStartScreenShare=1===e,(t.isStartScreenShare||$getState().conf.isStartScreenShare)&&coreConf.itmeetingShareScreen(1===e),$dispatch(coreUi.changeStartScreenShare(1===e))},this.onMobileShareUserIdChange=function(){var e=(0,u.default)(s.default.mark(function e(n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.info("onMobileShareUserIdChange, id=",handlePhoneNumber(n)),isNullOrEmpty(n)||t.isStartScreenShare||(_.info("showToast"),window.JSToNativeToast(2e3,language.DATA_CONFERENCE_READY_TO_SHARE)),$dispatch(coreUi.changeSharePersonNum(n)),a=$getState().myInfo.bind_no,n&&""!==n&&a&&n!==a&&coreConf.itmeetingAcceptSharing(),!r||""===r){e.next=9;break}window.notifyScreenShareOwner(r),e.next=18;break;case 9:if(!n||""===n){e.next=16;break}return e.next=12,t.getContactFromMemberListByID(n);case 12:o=e.sent,isNullOrEmpty(o.name)?window.notifyScreenShareOwner(""):(_.info("onMobileShareUserIdChange getContact = "+handlePhoneNumber(o.name)),window.notifyScreenShareOwner(o.name)),e.next=18;break;case 16:_.info("onMobileShreUserIdChange id is empty"),window.notifyScreenShareOwner("");case 18:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.getContactFromMemberListByID=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i,c,u,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=$getState(),a=r.conf.memberListInfo,i={},c=!1,u=0;case 4:if(!(u<a.length)){e.next=14;break}if(n!==a[u].number){e.next=11;break}return i=a[u].userInfo,i.bind_no=a[u].number,c=!0,_.info(" getContactFromMemberListByID, isFound = ",c),e.abrupt("return",i);case 11:u++,e.next=4;break;case 14:if(c){e.next=26;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=20;break}_.info(" [IT-Meeting] set userinfo name Empty! "),(0,o.default)(i,{name:""}),e.next=25;break;case 20:return _.info(" getContactFromMemberListByID, searchContact "),e.next=23,(0,h.searchContact)(n);case 23:f=e.sent,f&&f[0]&&(0,o.default)(i,{name:f[0].name});case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onMobileJoinDataConf=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.enterDataConf(!0)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&((0,g.meetingHWJoinConf)(),setTimeout(function(){(0,g.meetingHWsaveIpParam)("")},5e3)),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),2===window.sipCreateLeaveConf&&(window.onBeenVoip(language.RECALL_IN_SHARING),window.sipCreateLeaveConf=0);case 4:case"end":return e.stop()}},e,t)})),this.onMobileMeetingHwSaveIpParam=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,g.meetingHWsaveIpParam)(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onMobileLeaveDataConf=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.enterDataConf(!1)),$dispatch(coreUi.setDataSharingFlag(!1));case 2:case"end":return e.stop()}},e,t)})),this.onMobileDataSharingFlagChange=function(e){_.info("onMobileDataSharingFlagChange flag= "+e);var t=$getState().conf,n=t.firstsharingModalShow,r=t.firstInfoConfModalShow;$dispatch(coreUi.setDataSharingFlag(1===e)),$dispatch(coreUi.toggleIsMobileAcceptShareSuccess(1===e)),n&&0===e&&(0,v.resetFirstAcceptShareFlag)("isFirstAcceptShare"),1===e&&r&&(0,v.resetFirstInfoConferenceFlag)("isFirstInfoConf")},this.handleMobileJoinDataFail=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_.info("handleMobileJoinDataFail"),t.proxy.handleJoinDataConfFail(),!window.CLIENTCONFIG.ENABLE_IT_MEETING&&coreConf.isInConf()&&window.confirm(language.SHARING_JOINCONF_FAIL+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_DATA_CONF_ERROR,language.SHARING_JOINCONF_FAIL)});case 3:case"end":return e.stop()}},e,t)})),this.setRemoteControl2Other=Noop,this.rejectRemoteControl=Noop,this.setIsUsePrimarySize=Noop,this.proxy=null,this.isStartScreenShare=!1}return(0,p.default)(e,[{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(m.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("onMobileShareUserIdChange",this.onMobileShareUserIdChange,e),coreCommon.Observer.subscribe("onMobileJoinDataConf",this.onMobileJoinDataConf,e),coreCommon.Observer.subscribe("onMobileLeaveDataConf",this.onMobileLeaveDataConf,e),coreCommon.Observer.subscribe("onMobileSharingFlagChange",this.onMobileDataSharingFlagChange,e),coreCommon.Observer.subscribe("onMobileJoinDataFail",this.handleMobileJoinDataFail,e),coreCommon.Observer.subscribe("OnMeetingHWsaveIpParam",this.onMobileMeetingHwSaveIpParam,e),window.mobileWhiteBoardStateChange=this.mobileWhiteBoardStateChange,window.mobileScreenShareStateChange=this.mobileScreenShareStateChange}}]),e}();t.default=C},1736:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(166),g=n(153),v=n(186),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),_=n(226),C=n(207),w=n(358),S=r(w),I=n(227),E=coreLogger.getLogger("dataconf")("logic"),N=null,b=function(){function e(){var t=this;return(0,l.default)(this,e),this.onJoinDataConf=(0,u.default)(s.default.mark(function e(){var n,r,a,o,i,c,f,l,d,p;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().conf.isSvcConf||!window.bigConfIsVideo){e.next=8;break}return coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0))),n=$getState(),r=n.conf.confHandle,E.error("is not svc conf, leave conf, confHandle=",r),e.next=7,(0,g.actionLeaveConf)();case 7:return e.abrupt("return");case 8:return a=$getState().call.callId,e.next=11,coreCall.getBasicBandInfo(a);case 11:o=e.sent,E.info("Join Conference Success"),i=$getState().login,c=i.sipImpi,f=c,isNullOrEmpty(f)||-1!==(l=f.indexOf("@"))&&(f=f.slice(0,l)),coreConf.NotifyMyJoinConf(0,f),m.setDataShareVersion(1),coreConf.buriedStartCalcCPUUsage(),coreConf.buriedStartRecordQos(),coreConf.buriedJoinConfSuccess(o),d=function(){var e=(0,u.default)(s.default.mark(function e(){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.bfcpFrameHwnd,E.info("delayDispatchRecvBFCP "+window.delayDispatchRecvBFCP),n>0?(E.info("delay dispatch bfcp recv message, notify to proxy bfcp is start"),coreConf.NotifyStartSharing(0,""),window.delayDispatchRecvBFCP=!1):window.delayDispatchRecvBFCP=!1;case 3:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),p=$getState().conf.bfcpFrameHwnd,window.delayDispatchRecvBFCP&&p>0&&setTimeout(function(){d()},2e3);case 25:case"end":return e.stop()}},e,t)})),this.closeBfcpFrameForOwnerChanged=Noop,this.handleApplistResult=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i,c,u,f,l,d;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$getState().conf.isFirstActiveAppShare,a=m.getShareAppHwnd(),i=m.getOldShareAppHwnd(),E.info("handleApplistResult,data = ",n),0!==a){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,m.setDataConfShareRealRect();case 8:if(m.setSharingapp(a),E.info("clear bfcp clock"),clearTimeout(window.clearSetBfcp),!(a>0)){e.next=14;break}return e.next=14,C.NativeInterface.setHightlightShareWnd(a,!0);case 14:return m.setTransparentwindow(a,0),e.next=17,C.NativeInterface.getTransparentWindow(a);case 17:if(c=e.sent,E.info("getTransparentWindow retWindows : "+(0,o.default)(c)),0===c.result&&(u=c.param.hwndList)&&"Array"===u.constructor.name&&u.length>0)for(f=0;f<u.length;++f)u[f].hwnd>0&&m.setTransparentwindow(u[f].hwnd,1);m.setAppShareScreenParam(9,{width:3,height:0}),r?(l=$getState().call.callId,coreCall.setDataBandwidth(l,0,m.getDataNegoBandwidth()),d=m.getDataCodeccVersion(),E.info("codeccVersion = "+d),m.setDataCodecVersion(d),m.setStart(),m.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!1))):E.info("already sharing, just set new hwnd"),i>0&&i!==a&&m.cancelSharingapp(i);case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onShareScreenOper=function(e){var t=$getState().conf.sharePersonName;E.info("NotifyLocalStartSharing"),coreConf.NotifyLocalStartSharing(0,t),coreConf.buriedShareScreenOper(e)},this.onRemoteScreenShare=function(e){coreConf.buriedRemoteScreenShare(e)},this.onBigWinStartSharing=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("onBigWinStartSharing: ",(0,o.default)(n)),clearTimeout(window.clearSetBfcp),E.info("clear bfcp clock"),r=$getState().conf.confHandle,a=m.getShareAppHwnd(),""===r){e.next=14;break}return e.next=8,(0,_.getWndRect)(n.param.hWnd);case 8:i=e.sent,E.info("get wnd rect, wnd: "+n.param.hWnd+" ",{left:i.param.left,top:i.param.top,right:i.param.right,bottom:i.param.bottom}),i.param.right>0&&i.param.bottom>0&&m.setDataShareRealRect(i.param.left,i.param.top,i.param.right,i.param.bottom),a>0?(C.NativeInterface.setHightlightShareWnd(a,!1),n.param&&n.param.hWnd>0&&(m.setOldShareAppHwnd(a),m.setShareAppHwnd(n.param.hWnd),m.changeShareMonitorType(n.param.shareType),m.getDisplayInfo(),m.getApplist())):n.param&&n.param.hWnd>0&&($dispatch(coreUi.changeFirstActiveShareApp(!0)),m.setShareAppHwnd(n.param.hWnd),m.setOldShareAppHwnd(0),m.changeShareMonitorType(n.param.shareType),m.startShare(40)),e.next=15;break;case 14:E.error("onBigWin is not in conference, you can't share");case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinStopSharing=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("onBigWinStopSharing: ",(0,o.default)(n)),r=$getState(),a=r.conf.confHandle,i=m.getShareAppHwnd(),""!==a?(m.stopShareScreen(),C.NativeInterface.setHightlightShareWnd(i,!1),m.setShareAppHwnd(0),m.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))):E.error("onBigWin is not in conference, you can't stop share");case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinDataSharingHwnd=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={hWnd:851978},a=null,$getState().conf.isDataConfSharing||!$getState().call.iSreceivingBFCP){e.next=7;break}E.info("getBfcpFrameHwnd"),a=C.NativeInterface.getBfcpFrameHwnd(),e.next=11;break;case 7:return E.info("getDataConfFrameWnd"),e.next=10,C.NativeInterface.getDataConfFrameWnd();case 10:a=e.sent;case 11:return E.info("onBigWinGetSharingHwnd 2data:",a),a&&a.param&&a.param.frameHwnd?r.hWnd=a.param.frameHwnd:E.error("onBigWinGetSharingHwnd value undefined!"),o=null,e.next=16,new S.default;case 16:o=e.sent,o.postRpsParamMessage(n,r,0);case 18:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinSetRecvShareParam=function(){var e=(0,u.default)(s.default.mark(function e(n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("OnBigWinSetRecvShareParam =:",(0,o.default)(n)),!n.param.width||!n.param.height){e.next=7;break}return e.next=4,coreAccount.set({key:"share-wnd-width",value:n.param.width,isPublic:!0});case 4:return e.next=6,coreAccount.set({key:"share-wnd-height",value:n.param.height,isPublic:!0});case 6:C.NativeInterface.setBigconfDataInitRect(n.param.width,n.param.height);case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.onBigWinSharingUsername=function(e){var t=$getState().conf.sharePersonName;return!$getState().conf.isDataConfSharing&&$getState().call.iSreceivingBFCP&&(t=""),e.user_name=t,e},this.resumeVideoWhenDataEnd=function(){appService.hideWindow()},this.onRequestOperateTokenFail=function(){m.setShareAppHwnd(0),m.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0));var e=$getState().conf.bfcpFrameHwnd;E.info("isReceivingBFCP = "+$getState().call.iSreceivingBFCP+", bfcpFrameHwnd = "+e),$getState().call.iSreceivingBFCP&&e>0&&(E.info("onRequestOperateTokenFail init bfcp frame because request aux token failed"),coreConf.NotifyStartSharing(0,""))},this.handleReceiveScreenKeyFrame=function(){if(m.setShareAppHwnd(0),m.setOldShareAppHwnd(0),!t.hasReceiveShare){var e=$getState().conf.sharePersonName;E.info("onAsOnScreenFrameRecv, recv first frame, notify to proxy other share is start",e),coreConf.NotifyStartSharing(0,e),t.hasReceiveShare=!0}},this.handleDataShareEnd=function(){t.hasReceiveShare=!1},this.hidePickSharingWindow=function(){},this.switchVideoFloating=function(){},N||(this.hasRegistedBigObserver=!1,N=this),this.proxy=null,this.hasReceiveShare=!1,N}return(0,p.default)(e,[{key:"registerDataEvent",value:function(){E.info("registerBigWinEvent, BigwinObserver subscribe topics");var e=new coreCommon.ObserverOpts(I.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("OnJoinDataConf",this.onJoinDataConf,e),coreCommon.Observer.subscribe("OnGetServerIp",this.onGetServerIp,e),coreCommon.Observer.subscribe("OnSshareScreenOper",this.onShareScreenOper,e),coreCommon.Observer.subscribe("OnRemoteScreenShare",this.onRemoteScreenShare,e),this.hasRegistedBigObserver?E.info("big win observer has registed, ignore"):(coreCommon.BigwinObserver.subscribe("OnStartSharing",this.onBigWinStartSharing),coreCommon.BigwinObserver.subscribe("OnStopSharing",this.onBigWinStopSharing),coreCommon.BigwinObserver.subscribe("OnGetSharingUsername",this.onBigWinSharingUsername),coreCommon.BigwinObserver.subscribe("onBigWinDataSharingHwnd",this.onBigWinDataSharingHwnd),coreCommon.BigwinObserver.subscribe("OnSetRecvShareParam",this.onBigWinSetRecvShareParam),this.hasRegistedBigObserver=!0)}},{key:"closeBfcpFrameForSharingSession",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.SvcAtdManager.closeBfcpFrame();case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeAppShare",value:function(e){var t=$getState().conf.sharePersonName;t===$getState().myInfo.name||e.isself?(coreConf.NotifyLocalStopSharing(0,t),coreConf.buriedShareScreenOper(1),E.info("stop own sharing",t),m.getShareAppHwnd()>0&&(m.setShareAppHwnd(0),m.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))),coreCall.setDataBandwidth($getState().call.callId,2,m.getDataNegoBandwidth()),E.info("xxxxxxxxxxThis userStopsharing",t)):(coreConf.NotifyStopSharing(0,t),E.info("xxxxxxxxxxThat userStopsharing",t))}},{key:"clearBfcpTimer",value:function(){clearTimeout(window.clearSetBfcp),E.info("clear bfcp clock")}},{key:"initDeviceStates",value:function(){}},{key:"handleBfcpForChangeMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changeFirstActiveShareApp(!0)),r=$getState().conf.isFirstActiveAppShare,E.info("isFirstActiveAppShare = ",r),E.info("just recv data signal, create recv window, not notify to proxy"),512===t&&(E.info("compid is 512, recv WBPage"),coreConf.NotifyStartSharing(0,n));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,t){512===e&&(coreConf.NotifyStopSharing(0,t),E.info("compid is 512, xxxxxxxxxxThat userStopsharing",t))}},{key:"onJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0))),t=$getState(),n=t.conf.confHandle,r=t.call.callId,E.error("OnJoinDataConfFail, leave conf, confHandle=",n),e.next=6,(0,g.actionLeaveConf)();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"onGetServerIp",value:function(e){coreConf.setServerIp(e)}},{key:"handleWindowForStopShareScreen",value:function(){}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){m.setShareAppHwnd(0),m.setOldShareAppHwnd(0);var e=$getState().conf.sharePersonName;E.info("recv first frame, notify to proxy other share is start",e),coreConf.NotifyStartSharing(0,e)}}]),e}();t.default=b},1737:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(3),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(186),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),v=n(153),m=n(166),_=n(227),C=n(273),w=coreLogger.getLogger("dataconf")("logic"),S=function(){function e(t){var n=this;(0,l.default)(this,e),this.registerDataEvent=function(){n.platformImpl.registerDataEvent();var e=new coreCommon.ObserverOpts(_.DFConfig.moduleName);e.target=n,coreCommon.Observer.subscribe("OnShareingStart",n.onDataShareStart,e),coreCommon.Observer.subscribe("OnShareingEnd",n.onDataShareEnd,e),coreCommon.Observer.subscribe("dataUserEnter",n.onDataUserEnter,e),coreCommon.Observer.subscribe("dataUserleave",n.onDataUserLeave,e),coreCommon.Observer.subscribe("OnReleaseHandle",n.onDataConfReleaseHandle,e),coreCommon.Observer.subscribe("OnJoinDataConf",n.onJoinDataConf,e),coreCommon.Observer.subscribe("OnConfInfoNotify",n.onConfInfoNotify,e),coreCommon.Observer.subscribe("OnShareOwnerChange",n.onShareOwnerChange,e),coreCommon.Observer.subscribe("OnSharingScreenSizeChange",n.onShareScreenSizeChange,e),coreCommon.Observer.subscribe("OnSharingSessionStart",n.onSharingSessionStart,e),coreCommon.Observer.subscribe("OnRemoteControlPrivilege",n.onGetRemoteControlPrivilege,e),coreCommon.Observer.subscribe("OnDelRemoteControlPrivilege",n.onDeleteRemoteControlPrivilege,e),coreCommon.Observer.subscribe("OnRequestRemoteControlPrivilege",n.onRequestRemoteControlPrivilege,e),coreCommon.Observer.subscribe("OnBeRejectedRemoteControlPrivilege",n.OnBeRejectedRemoteControlPrivilege,e),coreCommon.Observer.subscribe("handleSelfEnterResult",n.handleSelfEnterResult,e),coreCommon.Observer.subscribe("OnScreenSharingStateChange",n.handleScreenSharingStateChange,e),coreCommon.Observer.subscribe("onRequestOperateTokenFail",n.onRequestOperateTokenFail,e),coreCommon.Observer.subscribe("onStopShareFinished",n.onStopShareFinished,e),coreCommon.Observer.subscribe("OnJoinDataConfFail",n.onJoinDataConfFail,e),coreCommon.Observer.subscribe("OnDealInviteUserWBSharing",n.handleInviteUserWBSharing,e),coreCommon.Observer.subscribe("OnStartShareFailed",n.onStartShareFailed,e)},this.onDataShareStart=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("  logic dataconfnotify other share start",t),n.platformImpl.closeBfcpFrameForSharingSession(),n.changeDataControlShow(!1),$dispatch(coreUi.showConfData(!0));case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onDataShareEnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.platformImpl.handleDataShareEnd(),!t.isself){e.next=7;break}return w.info("data.isself is true, stopShareScreen"),e.next=5,n.stopShareScreen();case 5:e.next=8;break;case 7:window.isByShareState=!1;case 8:n.platformImpl.closeAppShare(t),n.doExitFullScreen(),w.info(" logic dataconfnotify onDataShareEnd start bfcp state: "+$getState().call.iSreceivingBFCP),n.changeShowModeAndStatus(),n.platformImpl.handleBfcpWindow(t),r={lastheight:0,lastwidth:0},$dispatch(coreUi.changeShareScreenWH(r));case 15:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onDataUserLeave=function(e){w.info(" logic dataconfnotify onDataUserLeave start"),!0===e.param.isSelf&&n.stopMyShare(),g.handleShareEnd(e.param.user_alt_id)},this.onDataConfReleaseHandle=function(){w.info(" logic dataconfnotify OnDataConfReleaseHandle start"),n.hidePickSharingWindow(),n.doExitFullScreen(),n.stopMyShare(),g.handleShareEnd(g.getMyUserId());var e={lastheight:0,lastwidth:0};$dispatch(coreUi.changeShareScreenWH(e))},this.onJoinDataConf=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,params:["onJoinDataConf"]}),w.info(" logic dataconfnotify onJoinDataConf start"),$dispatch(coreUi.enterDataConf(!0));case 3:case"end":return e.stop()}},e,n)})),this.changeDataControlShow=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.platformImpl.changeDataControlShowImpl(t,2);case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onConfInfoNotify=function(){w.info(" logic dataconfnotify OnConfInfoNotifytaConf start"),coreConf.isConfChairMan()&&g.getIsAutoStartScreenShare()&&coreUi.showConfTips("",constant.CONF_MSG_TYPE.TYPE_TOP_SHOW,language.ENTER_CONF_JOIN_IN_DATACONF),$dispatch(coreUi.hideDataShareButton(!0))},this.onShareOwnerChange=function(){var e=(0,u.default)(s.default.mark(function e(t){var r,a,i,c,f,l,d;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(w.info("onShareOwnerChange,userNum = "+handlePhoneNumber(t.userNum)),n.platformImpl.closeBfcpFrameForOwnerChanged(),r=g.getDataConfMemberList(),a="",i=0;i<r.length;++i)"number"==typeof r[i].number?r[i].number===t.userNum&&(a=r[i].userInfo.name):r[i].user_num?r[i].user_num===t.userNum&&(a=r[i].user_name):(c=/:[\S]+\@/,f=c.exec(r[i].number),l=f[0].split(""),l.pop(),l.shift(),(d=l.join(""))===t.userNum&&(a=r[i].userInfo.name));$dispatch(coreUi.changeSharePersonName(a)),$dispatch(coreUi.changeSharePersonNum(t.userNum)),o.default.resolve().then((0,u.default)(s.default.mark(function e(){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreContact.queryUserInfoByKeyWord({keyWord:t.userNum});case 2:r=e.sent,coreCommon.dispatchModuleEvent("pluginDataSharingPersonChangedNotify",{sharerName:a,shareAccount:r.show_account});case 4:case"end":return e.stop()}},e,n)}))),g.updateDataShareOwner(t.userNum),$dispatch(coreUi.changeIsSvcSelectMode(!1)),window.CLIENTCONFIG.ISWIN&&$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})),!1===t.isSelf?(window.Toast(language.DATA_CONFERENCE_READY_TO_SHARE,2,!1,"pcToast_center"),n.changeDataControlShow(!1),n.doSmallVideoWithData(),$getState().conf.isSvcConf&&(w.info("onShareOwnerChange,in svc mode, data.isSelf = "+t.isSelf),n.platformImpl.receiveSvcForOwnerChanged(a))):$getState().conf.isSvcConf&&(w.info("onShareOwnerChange,in svc mode,share is self"),n.platformImpl.stopSvcForOwnerChanged());case 12:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onShareScreenSizeChange=function(e){n.platformImpl.showWinForSizeChange(),n.updateDataPicSize(e),n.changeDataControlShow(!1),n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NORMAL),n.doSmallVideoWithData(),$dispatch(coreUi.hideDataShareButton(!1)),n.platformImpl.fullScreenReceiveShare()},this.onSharingSessionStart=function(e){w.info(" logic dataconfnotify OnSharing[Session]Start start",desensitive(e)),$dispatch(coreUi.hideDataShareButton(!0)),"full"===$getState().call.screenState&&coreCall.exitFullScreen(),delegate.winMinimize(),n.doSmallVideoWithDataCapture()},this.onGetRemoteControlPrivilege=function(e){var t=e.isself;if(t?(w.info(" OnGetRemoteControlPrivilege start is self"),n.platformImpl.addEventListenerForCtrlPrivilege(),g.setNativeDataControlStatus(1)):w.info(" OnGetRemoteControlPrivilege start not self"),e&&e.usernum){w.info(" OnGetRemoteControlPrivilege start notify");var r=n.getContactFromDataConfMemberList(e.usernum);if(r.type=t?"acceptPrivilege":"notifyGetPrivilege","mac"===window.CLIENTCONFIG.PLATFORM&&"acceptPrivilege"===r.type){var a=language.SHARING_ACCEPT_REMOTECONTROL,o=" "!==r.name?r.name:r.bind_no;a=a.replace("{0}",o),window.Toast(a,5)}else $dispatch(coreUi.showDataConfCmdNotify(r,!0)),setTimeout(function(){$dispatch(coreUi.showDataConfCmdNotify({},!1))},5e3)}else w.info(" OnGetRemoteControlPrivilege data is invalid")},this.onDeleteRemoteControlPrivilege=function(e){var t=e.isself;if(t?(w.info(" OnDeleteRemoteControlPrivilege start is self"),n.platformImpl.deleteEventListenerForCtrlPrivilege(),g.setNativeDataControlStatus(0)):w.info(" OnDeleteRemoteControlPrivilege start not self"),e&&e.usernum){var r=n.getContactFromDataConfMemberList(e.usernum);if(r.type=t?"rejectPrivilege":"notifyDelPrivilege","mac"===window.CLIENTCONFIG.PLATFORM&&"rejectPrivilege"===r.type){var a=language.SHARING_REJECT_REMOTECONTROL;window.Toast(a,5)}else $dispatch(coreUi.showDataConfCmdNotify(r,!0)),setTimeout(function(){$dispatch(coreUi.showDataConfCmdNotify({},!1))},5e3)}},this.onRequestRemoteControlPrivilege=function(e){if(w.info(" logic OnRequestRemoteControlPrivilege start",handlePhoneNumber(e.usernum)),e&&e.usernum){var t=n.getContactFromDataConfMemberList(e.usernum);t.type="requestPrivilege",$dispatch(coreUi.showDataConfCmdNotify(t,!0))}},this.OnBeRejectedRemoteControlPrivilege=function(e){if(w.info(" logic OnBeRejectedRemoteControlPrivilege start",handlePhoneNumber(e.usernum)),e&&e.usernum){var t=n.getContactFromDataConfMemberList(e.usernum);if(t.type="beRejectedPrivilege","mac"===window.CLIENTCONFIG.PLATFORM){var r=language.SHARING_BE_REJECT_REMOTECONTROL;window.Toast(r,5)}else $dispatch(coreUi.showDataConfCmdNotify(t,!0)),setTimeout(function(){$dispatch(coreUi.showDataConfCmdNotify({},!1))},5e3)}},this.handleSelfEnterResult=function(){coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,params:["handleSelfEnterResult"]}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),w.info(" logic dataconfnotify handleSelfEnterResult start"),!1===g.getIsAutoStartScreenShare()?g.isConfDataShareLoadSuccess()?(w.info(" handleSelfEnterResult not auto startshare, has load comp success"),$dispatch(coreUi.hideDataShareButton(!1))):w.info(" handleSelfEnterResult not auto startshare, hasnot load comp "):(g.setIsAutoStartScreenShare(!1),w.info("handleSelfEnterResult auto share start"),$dispatch(coreUi.hideDataShareButton(!0)),n.retryCheckCount=0,g.getSharingType()===constant.ConfSharingType.Document?n.checkStartDocumentSharing():n.checkStartShareScreen())},this.handleScreenSharingStateChange=function(e){w.info("debug info handleScreenSharingStateChange param: ",e,$getState().call.iSreceivingBFCP),n.dataSharingFlagTimerID>0&&(w.info("debug info handleScreenSharingStateChange clear timer"),clearTimeout(n.dataSharingFlagTimerID),n.dataSharingFlagTimerID=0),1===e?n.changeDataControlShow(!1):2===e&&n.changeDataControlShow(!window.CLIENTCONFIG.ISBIGWIN),1===e||2===e?($dispatch(coreUi.setDataSharingFlag(!0)),$dispatch(coreUi.changeReceiveBfcp(!0)),m.SvcAtdManager.setNativeSelectState()):n.dataSharingFlagTimerID=setTimeout(function(){w.info("debug info handleScreenSharingStateChange delay set false : "),$dispatch(coreUi.setDataSharingFlag(!1));var e=$getState().conf,t=e.svcViewMode,n=e.maxSizeForPage;t===constant.SVC_VIEW_MODE.DIVIDE_MODE&&window.CLIENTCONFIG.ISWIN&&n!==m.SvcAtdManager.getMaxSizeForPage(t)&&($dispatch(coreUi.changeMaxSizeForPage(m.SvcAtdManager.getMaxSizeForPage(t))),m.SvcAtdManager.RedrawVideoMain()),m.SvcAtdManager.setNativeSelectState()},500)},this.onJoinDataConfFail=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("OnJoinDataConfFail start"),$dispatch(coreUi.hideDataShareButton(!1)),n.platformImpl.onJoinDataConfFail(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleInviteUserWBSharing=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("handleInviteUserWBSharing start"),window.isDataSharing=!0,n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),n.startAppSharingWindow(1);case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.onStartShareFailed=function(){w.info("start share failed."),n.platformImpl.onStartShareFailed()},this.checkStartDocumentSharing=function(){g.isConfDocShareLoadSuccess()?(w.info("checkStartDocumentSharing start doc share directly"),n.openDocShareFile(g.getDocShareFilePath())):g.docShareCompLoadSucCallback(function(){n.openDocShareFile(g.getDocShareFilePath())})},this.startShareScreen=function(e){if(w.info("startShareScreen start"),coreConf.isNeedUpdate2DataConf())w.info("startShareScreen need update2DataConf"),g.setIsAutoStartScreenShare(!0),(0,v.upgradeAudioConf2Data)();else{var t=$getState().call.callId;coreCall.setDataBandwidth(t,0,g.getDataNegoBandwidth());var r=g.dataConfStatus();if(w.info("dataconfstatus is ",r),r===C.DCONF_STATUS.IN_CONF){var a=$getState().call;!0===g.isRecevingSharing()||a.iSreceivingBFCP?(w.info("startShareScreen someone sharing"),n.platformImpl.showStartConfirmWithCallback(function(){coreCall.exitFullScreen(),n.resumeVideoWhenDataEnd(),n.startShareScreenOrApp(e)})):(w.info("startShareScreen contend startshare "),n.startShareScreenOrApp(e))}else r===C.DCONF_STATUS.JOINING?w.info("startShareScreen fail, joining dataconf "):r===C.DCONF_STATUS.LEAVING||r===C.DCONF_STATUS.LEFT?w.info("startShareScreen fail, status is leaving"):r===C.DCONF_STATUS.JOIN_FAIL?(w.info("startShareScreen no join data conf "),g.retryJoinDataConf()):w.info("startShareScreen fail, status is null")}},this.openDocShareFile=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("openDocShareFile called"),g.openDocShareFile(t);case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.startShareScreenOrApp=function(e){w.info("start share screen or app , data = ",e),window.CLIENTCONFIG.ISWIN?e&&e.param&&n.startAppSharingWindow(e.param.shareType,e.param.shareHwnd,e.param.shareAudio,e.param.shareStrategy):_.DFConfig.isAppShareEnabled?n.platformImpl.getApplist():n.startAppSharingWindow(0)},this.startAppSharingWindow=function(){var e=(0,u.default)(s.default.mark(function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.platformImpl.startAppSharingWindow(t,r,a,o),n.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);case 2:case"end":return e.stop()}},e,n)}));return function(t,n){return e.apply(this,arguments)}}(),this.handleJoinDataConfFail=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.proxy.handleJoinDataConfFail();case 1:case"end":return e.stop()}},e,n)})),this.toggleShowDataControlMenu=function(e,t){$dispatch(coreUi.showDataControlMenu(t))},this.rejectRemoteControl=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.showDataConfCmdNotify({},!1)),e.next=3,g.rejectRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.setRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.showDataConfCmdNotify({},!1)),e.next=3,g.changeRemoteControl2Other(t);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.setIsUsePrimarySize=function(){g.changeIsUsePrimarySize(),w.info("setIsUsePrimarySize, isUsePrimarySize="+g.getIsUsePrimarySize());var e={lastheight:0,lastwidth:0};$dispatch(coreUi.changeShareScreenWH(e))},this.hidePickSharingWindow=function(){n.platformImpl.hidePickSharingWindow()},this.getDesktopShareSize=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.proxy.getDesktopShareSize();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,n)})),this.doSmallVideoWithData=(0,u.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return appService.hideWindow(),e.abrupt("return");case 3:if(!$getState().conf.isSvcConf){e.next=6;break}return w.info("is svcconf,doSmallVideoWithData return"),e.abrupt("return");case 6:t=$getState().call,"VIDEO_CONNECTED"===t.callStatus&&(w.info("<video>in data full,doSmallVideoWithData"),"extra"===t.screenState?delegate.resumeShow(!0):"min"===t.screenState&&coreCall.changeScreenState("middle"),t.isRemoteBig&&(n.isVideoRemtoBig=!0,$dispatch(coreUi.changeBigSmallWin())),coreCall.closeLocalCanvasSocket(),r={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(r)),coreCall.setVideoWH(!0,r));case 8:case"end":return e.stop()}},e,n)})),this.onDataUserEnter=function(){},this.onRequestOperateTokenFail=function(){w.info("start share failed."),n.platformImpl.onRequestOperateTokenFail()},this.onStopShareFinished=function(){g.setShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))},this.proxy=null,this.platformImpl=t,this.isVideoRemtoBig=!1,this.dataPicSize={},this.retryCheckCount=0,this.dataSharingFlagTimerID=0}return(0,p.default)(e,[{key:"stopShareScreen",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.hideDataShareButton(!1)),w.info("isDataSharing false 2"),window.isDataSharing=!1,e.next=5,g.stopShareScreen();case 5:coreCall.setDataBandwidth($getState().call.callId,2,g.getDataNegoBandwidth()),this.changeDataControlShow(!1),this.platformImpl.handleWindowForStopShareScreen();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"doExitFullScreen",value:function(){window.CLIENTCONFIG.ISBIGWIN||coreCall.exitFullScreen()}},{key:"changeShowModeAndStatus",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),this.resumeVideoWhenDataEnd(),$dispatch(coreUi.showConfData(!1)),$dispatch(coreUi.changeSharePersonNum(""));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeDataConfShowMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("changeDataConfShowMode start, showMode = ",t),r=coreCommon.TaskQueue.getInstance("showModeTaskQueue"),a=coreCommon.TaskOptions.defaultOptions(),a.proxy=this.platformImpl,r.addTask(this.platformImpl.doChangeDataConfShowMode,a,null,t,n);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"resumeVideoWhenDataEnd",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.platformImpl.resumeVideoWhenDataEnd();case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"stopMyShare",value:function(){w.info(" LeaveDataConf stop my share"),$dispatch(coreUi.showConfData(!1)),this.changeDataControlShow(!1),w.info("test16666"),this.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);var e=$getState().common.modalContent;isNullOrEmpty(e)||"progressbar"===e.key||coreUi.hideModal(),window.CLIENTCONFIG.ISBIGWIN||appService.showMainWindow(!0),g.stopStgTunnel(),w.info("isDataSharing false 3"),window.isDataSharing=!1,$dispatch(coreUi.showDataConfCmdNotify({},!1))}},{key:"updateDataPicSize",value:function(e){this.dataPicSize={width:e.param.width,height:e.param.height},this.platformImpl.setDataPicSize(this.dataPicSize)}},{key:"doSmallVideoWithDataCapture",value:function(){if($getState().conf.isSvcConf)return void w.info("is svcconf or is mobile,doSmallVideoWithDataCapture return");var e=$getState().call;if("VIDEO_CONNECTED"===e.callStatus&&"min"!==e.screenState&&"extra"!==e.screenState){w.info("<video>in data capture,doSmallVideoWithData");var t={height:288,width:512};e.isRemoteBig?coreCall.setVideoWH(!0,t):coreCall.setVideoWH(!1,t)}}},{key:"getContactFromDataConfMemberList",value:function(e){for(var t=g.getDataConfMemberList(),n=0;n<t.length;n++)if(e===t[n].user_num)return{bind_no:t[n].user_num,name:t[n].user_name};return""}},{key:"checkStartShareScreen",value:function(){var e=this;if(g.isConfDataShareLoadSuccess())w.info(" checkStartShareScreen success"),g.setIsAutoStartScreenShare(!1),this.retryCheckCount=0,window.CLIENTCONFIG.ISWIN?(w.info("checkStartShareScreen showNativeShareSelectWnd()"),this.platformImpl.showNativeShareSelectWnd()):this.startShareScreen();else{if(++this.retryCheckCount>8)return void w.info(" checkStartShareScreen fail, no load datasharecomp,max checkcount 8 times");w.info(" checkStartShareScreen fail, no load datasharecomp,retry after 1000ms"),setTimeout(function(){e.checkStartShareScreen()},1e3)}}}]),e}();t.default=S},1738:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(69),i=a(o),s=n(1),c=a(s),u=n(2),f=a(u),l=n(119),d=a(l),p=n(4),h=a(p),g=n(5),v=a(g),m=n(120),_=a(m),C=n(253),w=a(C),S=n(121),I=a(S),E=n(250),N=n(953),b=a(N),T=n(186),y=r(T),O=n(207),x=n(227),A=n(166),L=n(208),k=r(L),R=coreLogger.getLogger("dataconf")("logic"),M=null,D=function(e){function t(){var e,n=this;(0,h.default)(this,t);var r=(0,_.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return r.handleApplistResult=function(){var e=(0,f.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.dealMaxhubAppShare();case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.dealMaxhubAppShare=(0,f.default)(c.default.mark(function e(){var t,r,a,o,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf.isFirstActiveAppShare,r=y.getOldShareAppHwnd(),a=y.getShareAppHwnd(),R.info("dealMaxhubAppShare, isFirstActiveAppShare=",t+", shareAppHwnd=",a+", oldShareAppHwnd=",r),y.setAppShareScreenParam(9,{width:3,height:0}),!t){e.next=30;break}return R.info("dealMaxhubAppShare start first sharing"),$dispatch(coreUi.changeFirstActiveShareApp(!1)),y.setSharingapp(a),e.next=11,O.NativeInterface.getTransparentWindow(a);case 11:if(o=e.sent,R.info("getTransparentWindow : "+(0,i.default)(o)),0!==o.result){e.next=26;break}if(!((s=o.param.hwndList)&&"Array"===s.constructor.name&&s.length>0)){e.next=26;break}u=0;case 17:if(!(u<s.length)){e.next=26;break}if(!(s[u].hwnd>0)){e.next=23;break}return R.info("setTransparentwindow i = "+u+" start"),e.next=22,y.setTransparentwindow(s[u].hwnd,1);case 22:R.info("setTransparentwindow i = "+u+" end");case 23:++u,e.next=17;break;case 26:y.setDataCodecVersion(5),y.setStart(),e.next=33;break;case 30:y.setSharingapp(a),R.info("maxhub cancel old sharing, oldShareAppHwnd=",r),r>0&&r!==a&&y.cancelSharingapp(r);case 33:case"end":return e.stop()}},e,n)})),r.handleBfcpForChangeMode=function(){},r.onStartSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("onStartSharing: ",(0,i.default)(t)),y.isInDataConf()||coreConf.isConfChairMan()){e.next=6;break}return R.info("onStartSharing, maxhub not in data conference and not chairman, can not shart sharing"),a=1,(0,E.NotifyShareResult)(0,a,t.param.hWnd),e.abrupt("return");case 6:if(null===window.maxhubShareAppParam){e.next=11;break}return R.info("onStartSharing, maxhub last sharing not finish, can not shart new sharing"),o=2,(0,E.NotifyShareResult)(0,o,t.param.hWnd),e.abrupt("return");case 11:window.maxhubShareAppParam=t.param,r.startShareApp();case 13:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.onStopSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.info("onStopSharing: ",(0,i.default)(t)),r=$getState(),a=r.conf.confHandle,o=y.getShareAppHwnd(),""!==a?(y.stopShareScreen(),O.NativeInterface.setHightlightShareWnd(o,!1),y.setShareAppHwnd(0),y.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0)),R.info("isDataSharing false 5"),window.isDataSharing=!1):R.error("onStopSharing is not in conference");case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.startShareApp=(0,f.default)(c.default.mark(function e(){var t,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,a=y.isConfDataShareSelfEntered(),o=y.isConfDataShareLoadSuccess(),R.info("startShareApp start, isSelfEntered=",a+"，isShareLoadSuccess="+o),!a||!o){e.next=10;break}return R.info("startShareApp, start share"),e.next=8,r.startMaxhubAppSharing(window.maxhubShareAppParam);case 8:e.next=12;break;case 10:t=3,y.isInDataConf()?R.info("startShareApp, joining dataconf now, can not start sharing"):(R.info("startShareApp, not data conf, start retry join data conf"),y.retryJoinDataConf());case 12:window.isHubEnv&&((0,E.NotifyShareResult)(0,t,window.maxhubShareAppParam.hWnd),window.maxhubShareAppParam=null);case 13:case"end":return e.stop()}},e,n)})),r.startMaxhubAppSharing=function(){var e=(0,f.default)(c.default.mark(function e(t){var a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("startMaxhubAppSharing, param:",t),!((a=y.getShareAppHwnd())===t.hWnd||t.hWnd<=0)){e.next=5;break}return R.info("startMaxhubAppSharing, param is invalid"),e.abrupt("return");case 5:if(!(a>0)){e.next=14;break}R.info("startMaxhubAppSharing, change sharing wnd, old wnd=",a+"new wnd=",t.hWnd),y.setOldShareAppHwnd(a),y.setShareAppHwnd(t.hWnd),y.changeShareMonitorType(t.shareType),y.getDisplayInfo(),y.getApplist(),e.next=27;break;case 14:return R.info("startMaxhubAppSharing, start new sharing, wnd=",t.hWnd),y.setOldShareAppHwnd(0),y.setShareAppHwnd(t.hWnd),coreCall.setDataBandwidth($getState().call.callId,0,y.getDataNegoBandwidth()),y.setDataShareVersion(1),$dispatch(coreUi.changeFirstActiveShareApp(!0)),y.changeShareMonitorType(t.shareType),R.info("startMaxhubAppSharing, isDataSharing true 3"),window.isDataSharing=!0,r.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE),e.next=26,r.proxy.changeDataControlShowImpl(!0);case 26:y.startShare(40);case 27:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),r.switchVideoFloating=function(){$getState().conf.isSvcConf?A.SvcAtdManager.switchVideoToMin():k.switchVideoToMin()},r.resumeVideoWhenDataEnd=function(){var e=$getState().conf.isSvcConf;window.isDataSharing||(e?A.SvcAtdManager.switchVideoToMain():k.switchVideoToMain())},M||(r.hasRegistedBigObserver=!1,M=r),e=M,(0,_.default)(r,e)}return(0,I.default)(t,e),(0,v.default)(t,[{key:"registerDataEvent",value:function(){(0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"registerDataEvent",this).call(this);var e=new coreCommon.ObserverOpts(x.DFConfig.moduleName);e.target=this,this.hasRegistedBigObserver||(coreCommon.BigwinObserver.subscribe("OnStartSharing",this.onStartSharing,e),coreCommon.BigwinObserver.subscribe("OnStopSharing",this.onStopSharing,e),this.hasRegistedBigObserver=!0)}},{key:"closeAppShare",value:function(e){if((0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"closeAppShare",this).call(this,e),e.isself){y.getShareAppHwnd()>0&&(y.setShareAppHwnd(0),y.setOldShareAppHwnd(0),$dispatch(coreUi.changeFirstActiveShareApp(!0))),(0,E.NotifyLocalStopSharing)(0,"")}}},{key:"clearBfcpTimer",value:function(){(0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"clearBfcpTimer",this).call(this),clearTimeout(window.clearSetBfcp),R.info("clear bfcp clock")}},{key:"changeShowMode",value:function(){function e(){return n.apply(this,arguments)}var n=(0,f.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"changeShowMode",this).call(this);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,n){(0,w.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"handleCloseNativeDataWnd",this).call(this,e,n)}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){}}]),t}(b.default);t.default=D},1739:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(1),o=r(a),i=n(2),s=r(i),c=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0===t.code&&"total"===t.event&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.getInitHistoryConfList(),0===t.code&&"tokenUpdate"===t.event&&window.CLIENTCONFIG.ENABLE_IT_MEETING;case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();n(405);coreCommon.registeModuleListener("login",c)},174:function(e,t,n){var r=n(16),a=n(6)("iterator"),o=n(17);e.exports=n(8).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||o.hasOwnProperty(r(t))}},180:function(e,t,n){"use strict";var r=n(25).f,a=n(198),o=n(29),i=n(11),s=n(28),c=n(24),u=n(199),f=n(200),l=n(37),d=n(30),p=n(157).fastKey,h=n(149),g=d?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var f=e(function(e,r){s(e,f,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=r&&c(r,n,e[u],e)});return o(f.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var a=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=a),a&&(a.p=o),n._f==r&&(n._f=a),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(e){h(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),d&&r(f.prototype,"size",{get:function(){return h(this,t)[g]}}),f},def:function(e,t,n){var r,a,o=v(e,t);return o?o.v=n:(e._l=o={i:a=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==a&&(e._i[a]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),l(t)}}},181:function(e,t,n){"use strict";var r=n(7),a=n(10),o=n(157),i=n(138),s=n(35),c=n(29),u=n(24),f=n(28),l=n(15),d=n(36),p=n(25).f,h=n(201)(0),g=n(30);e.exports=function(e,t,n,v,m,_){var C=r[e],w=C,S=m?"set":"add",I=w&&w.prototype,E={};return g&&"function"==typeof w&&(_||I.forEach&&!i(function(){(new w).entries().next()}))?(w=t(function(t,n){f(t,w,e,"_c"),t._c=new C,void 0!=n&&u(n,m,t[S],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in I&&(!_||"clear"!=e)&&s(w.prototype,e,function(n,r){if(f(this,w,e),!t&&_&&!l(n))return"get"==e&&void 0;var a=this._c[e](0===n?0:n,r);return t?this:a})}),_||p(w.prototype,"size",{get:function(){return this._c.size}})):(w=v.getConstructor(t,e,m,S),c(w.prototype,n),o.NEED=!0),d(w,e),E[e]=w,a(a.G+a.W+a.F,E),_||v.setStrong(w,e,m),w}},182:function(e,t,n){var r=n(16),a=n(206);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},183:function(e,t,n){"use strict";var r=n(10);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},184:function(e,t,n){"use strict";var r=n(10),a=n(12),o=n(11),i=n(24);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return a(this),t=void 0!==c,t&&a(c),void 0==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),i(e,!1,function(e){n.push(s(e,r++))})):i(e,!1,n.push,n),new this(n))}})}},185:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.registerSipResultCallback=t.sipResume=t.resume=t.registerResumeEvent=t.getResumeFlag=t.clearResumeService=t.logout=t.setOffline=t.doLogout=t.enableAutoLogin=t.login=t.ipLogin=t.initLoginInfo=t.checkForceSwtichAccount=t.recoverAppCache=t.storeAppCache=void 0;var a=n(360),o=r(a),i=n(241),s=r(i),c=n(293),u=r(c),f=n(221),l=r(f);t.storeAppCache=o.storeAppCache,t.recoverAppCache=o.recoverAppCache,t.checkForceSwtichAccount=s.checkForceSwtichAccount,t.initLoginInfo=s.initLoginInfo,t.ipLogin=s.ipLogin,t.login=s.login,t.enableAutoLogin=s.enableAutoLogin,t.doLogout=u.doLogout,t.setOffline=u.setOffline,t.logout=u.logout,t.clearResumeService=l.clearResumeService,t.getResumeFlag=l.getResumeFlag,t.registerResumeEvent=l.registerResumeEvent,t.resume=l.resume,t.sipResume=l.sipResume,t.registerSipResultCallback=l.registerSipResultCallback},186:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showNativeShareSelectWnd=t.bfcpWinDetach=t.bfcpWinAttach=t.isRecevingAppshare=t.getOldShareAppHwnd=t.setOldShareAppHwnd=t.setShareAudio=t.getShareAudio=t.getShareAppHwnd=t.setShareAppHwnd=t.changeShareMonitorType=t.dataConfStatus=t.confInfoNotifyParamsExist=t.getCloseShareDataOperate=t.setCloseShareDataOperate=t.getDataStreamInfo=t.isSendScreenSharing=t.isInScreenSharing=t.clearConfSharingType=t.setDataShareVersion=t.beLeaveDataConf=t.leaveDataConf=t.setDataConfParams=t.getDisplayInfo=t.setDataConfShareRealRect=t.setDataShareRealRect=t.inputWndMsg=t.cancelSharingapp=t.setTransparentwindow=t.setStart=t.setAppShareScreenParam=t.setSharingapp=t.handleNativeNotifyResetRenderRect=t.setDataShareScreenPicQuality=t.showNativeRemoteControl=t.stopWBDoc=t.closeWBTab=t.isRecevingWBSharing=t.isInWBSharing=t.configSharingParam=t.advancedSetting=t.createWBNewDocAndPage=t.getApplist=t.closeNativeDataSharingWnd=t.createNativeDataSharingWnd=t.showNativeDataControl=t.getIsUsePrimarySize=t.changeIsUsePrimarySize=t.isRemoteControling=t.getRemoteControlUserNum=t.changeRemoteControl2Other=t.delRemoteControlPrivilege=t.rejectRemoteControlPrivilege=t.requestRemoteControlPrivilege=t.openDocShareFile=t.isConfDataShareSelfEntered=t.getDataShareOwner=t.setDataCodecVersion=t.getDataCodeccVersion=t.getDataNegoBandwidth=t.docShareCompLoadSucCallback=t.getDocShareFilePath=t.isConfDocShareLoadSuccess=t.stopStgTunnel=t.stopShareScreen=t.getSharingType=t.isConfDataShareLoadSuccess=t.setNativeDataControlStatus=t.setIsAutoStartScreenShare=t.getIsAutoStartScreenShare=t.getMyUserId=t.handleShareEnd=t.isInReceiveDocSharing=t.stopDocSharing=t.isInSendDocSharing=t.startShare=t.isDataShareStarted=t.updateDataShareOwner=t.getDataShareOwnerBindno=t.isRecevingSharing=t.isReceivingDataShare=t.getDataConfMemberList=t.reSetFireWallModeType=t.setFireWallModeType=t.getFireWallModeType=t.isJoiningDataConf=t.isSelfJoinedDataConf=t.isInDataConf=t.terminateconf=t.retryJoinDataConf=t.joinDataConf=t.initDataConf=void 0;var a=n(3),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(701),l=r(f),d=n(249),p=n(227),h=n(273),g=coreLogger.getLogger("dataConf")("model"),v=null,m=!1,_=null,C=(t.initDataConf=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.DFConfig.deployMode=t,p.DFConfig.firewallType=n,p.DFConfig.stgAddresslist=r,e.next=5,coreTup.getdataConfInstance();case 5:a=e.sent,o={log_path:window.LOG_PATH+p.DFConfig.pathSeparator+"dataconf"+p.DFConfig.pathSeparator,temp_path:window.APP_DATA_PATH+p.DFConfig.pathSeparator,dev_type:p.DFConfig.devType},_=o,a.init(o);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.joinDataConf=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.info(" joinDataConf start "),null===v){e.next=6;break}if(g.info("join data conf already exist"),!(w()||S()||C())){e.next=6;break}return g.info("joining data abort,status is "+v.dataConfStatus),e.abrupt("return");case 6:return g.info(" joinDataConf start uninit"),e.next=9,coreTup.getdataConfInstance();case 9:return r=e.sent,r.uninit(),g.info(" joinDataConf start init"),r.init(_),g.info(" joinDataConf end init"),v=new l.default,v.setCallId(n),v.setLeftConfCallback(I),e.next=19,v.setDataConfNotifyFunc();case 19:return e.next=21,v.setConfCtrlNotifyFunc();case 21:return e.next=23,v.joinDataConf(t);case 23:g.info(" joinDataConf end");case 24:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.retryJoinDataConf=function(){return g.info("retryJoinDataConf"),null===v?void g.info("retry join fail,service not exist"):v.retryJoin()},t.terminateconf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==v){e.next=3;break}return g.info("terninate conf service is null"),e.abrupt("return");case 3:return e.next=5,v.terminateconf();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInDataConf=function(){return null!==v},t.isSelfJoinedDataConf=function(){return v&&v.isSelfJoinedDataConf()}),w=t.isJoiningDataConf=function(){return v&&v.isJoiningDataConf()},S=function(){return v&&v.isLeavingDataConf()},I=(t.getFireWallModeType=function(){return p.DFConfig.firewallType},t.setFireWallModeType=function(e){g.info("setFireWallModeType : "+e+", 0:stg,1:svn,2:sbc"),p.DFConfig.firewallType=e},t.reSetFireWallModeType=function(){g.info("reSetFireWallModeType  NULL "),p.DFConfig.firewallType=h.DATA_FIREWALL_MODE.NULL},t.getDataConfMemberList=function(){return null===v?(g.info("getDataConfMemberList: service is null"),[]):v.getDataConfMemberList()},t.isReceivingDataShare=function(){return null===v?(g.info("isReceivingDataShare: service is null"),!1):v.isReceivingDataShare()},t.isRecevingSharing=function(){return null===v?(g.info("isRecevingSharing: service is null"),!1):v.isRecevingSharing()},t.getDataShareOwnerBindno=function(){return null===v?"":v.getDataShareOwnerBindno()},t.updateDataShareOwner=function(e){if(null!==v)return v.updateDataShareOwner(e);g.info("updateDataShareOwner: service is null")},t.isDataShareStarted=function(){return null===v?(g.info("isDataShareStarted: service is null"),!1):v.isDataShareStarted()},t.startShare=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==v){e.next=3;break}return g.info("startShare: service is null"),e.abrupt("return",o.default.reject(new Error("service is null")));case 3:return e.abrupt("return",v.startShare(t));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.isInSendDocSharing=function(){return null!==v&&v.isInSendDocSharing()},t.stopDocSharing=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=2;break}return e.abrupt("return",v.stopDocSharing());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInReceiveDocSharing=function(){return null!==v&&v.isInReceiveDocSharing()},t.handleShareEnd=function(e){v?v.handleShareEnd(e):g.info("handleShareEnd: service is null")},t.getMyUserId=function(){return null!==v?v.getMyUserId():""},t.getIsAutoStartScreenShare=function(){return m},t.setIsAutoStartScreenShare=function(e){g.info("setIsAutoStartScreenShare isAutoStart : ",e),m=e},t.setNativeDataControlStatus=function(e){if(v)return v.setNativeDataControlStatus(e)},t.isConfDataShareLoadSuccess=function(){return null!==v&&v.isConfDataShareLoadSuccess()},t.getSharingType=function(){return null===v?(g.info("get sharing type dataConfService error"),-1):v.getSharingType()},t.stopShareScreen=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==v){e.next=3;break}return g.info("stopShareScreen service is null"),e.abrupt("return",o.default.reject(new Error("service is null")));case 3:return e.next=5,v.stopShareScreen();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.stopStgTunnel=function(){null!==v&&v.stopStgTunnel()},function(){null!==v&&(g.info("releaseDataconf dataConfService is null"),v=null,(0,p.resetConfig)())});t.isConfDocShareLoadSuccess=function(){return!!v&&v.isConfDocShareLoadSuccess()},t.getDocShareFilePath=function(){return null===v?(g.info("get doc share file path confService error"),""):v.getDocShareFilePath()},t.docShareCompLoadSucCallback=function(e){v&&v.docShareCompLoadSucCallback(e)},t.getDataNegoBandwidth=function(){return v?v.getNegoBandwidth():0},t.getDataCodeccVersion=function(){return v?v.getDataCodeccVersion():0},t.setDataCodecVersion=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setDataCodecVersion(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getDataShareOwner=function(){return null!==v?v.getDataShareOwnerBindno():""},t.isConfDataShareSelfEntered=function(){return null!==v&&v.m_user_id>0},t.openDocShareFile=function(e){v&&(g.info("openDocShareFile called"),v.openDocShareFile(e))},t.requestRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.requestRemoteControlPrivilege();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.rejectRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.rejectRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.delRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.delRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v&&v.changeRemoteControl2Other(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getRemoteControlUserNum=function(){return v?v.getRemoteControlUserNum():""},t.isRemoteControling=function(){return null!==v&&v.isRemoteControling()},t.changeIsUsePrimarySize=function(){null!==v&&(v.isUsePrimarySize=!v.isUsePrimarySize)},t.getIsUsePrimarySize=function(){return null!==v&&v.isUsePrimarySize},t.showNativeDataControl=function(e,t,n,r,a,o){v&&v.showNativeDataControl(e,e?o:"0",(0,d.isConfChairMan)(),t,n,r,a)},t.createNativeDataSharingWnd=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o,i,c,u,f,l,d){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,v.createNativeDataSharingWnd(t,n,r,a,o,i,c,u,f,l,d);case 3:e.next=6;break;case 5:g.info("create native data win, dataConfService is null");case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s,c,u,f,l){return e.apply(this,arguments)}}(),t.closeNativeDataSharingWnd=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.closeNativeDataSharingWnd();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getApplist=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.getApplist();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createWBNewDocAndPage=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=3;break}return e.next=3,v.requestWBToken(!0);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.advancedSetting=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=3;break}return e.next=3,v.advancedSetting(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.configSharingParam=function(e,t){if(null===v)return void g.info("config sharing param confService error");v.setConfSharingType(e,t)},t.isInWBSharing=function(){return null!==v&&v.isInWBSharing()},t.isRecevingWBSharing=function(){return null!==v&&v.isRecevingWBSharing()},t.closeWBTab=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=3;break}return e.next=3,v.closeWBTab();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.stopWBDoc=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===v){e.next=3;break}return e.next=3,v.stopWBDoc();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showNativeRemoteControl=function(e){v&&v.showNativeRemoteControl(e)},t.setDataShareScreenPicQuality=function(e){v&&v.setDataShareScreenPicQuality(e)},t.handleNativeNotifyResetRenderRect=function(e){g.info("handleNativeNotifyResetRenderRect start"),v&&v.handleNativeNotifyResetRenderRect(e)},t.setSharingapp=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setSharingapp(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setAppShareScreenParam=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setAppShareScreenParam(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setStart=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setStart();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setTransparentwindow=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setTransparentwindow(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.cancelSharingapp=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.cancelSharingapp(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.inputWndMsg=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.inputWndMsg(t,n,r,a,o);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.setDataShareRealRect=function(e,t,n,r){v?(g.info(" setDataShareRealRect set rect"),v.setDataConfShareRealRect(e,t,n,r)):g.info(" setDataShareRealRect dataConfService null")},t.setDataConfShareRealRect=function(){v&&v.setDataConfShareRealRect()},t.getDisplayInfo=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.getDisplayInfo();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setDataConfParams=function(e){v&&v.setDataConfParams(e)},t.leaveDataConf=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,v.leaveDataConf(t);case 3:e.next=6;break;case 5:g.info("leaveDataConf:service is null");case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.beLeaveDataConf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.info("beLeaveDataConf type "),v&&v.beLeaveDataConf();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setDataShareVersion=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.setDataShareVersion(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.clearConfSharingType=function(){v&&v.resetConfSharingType()},t.isInScreenSharing=function(){return null!==v&&v.isInScreenSharing()},t.isSendScreenSharing=function(){return null!==v&&v.isSendScreenSharing()},t.getDataStreamInfo=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.next=3,v.getStreamInfo();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setCloseShareDataOperate=function(e){if(v)return v.setCloseShareDataOperate(e)},t.getCloseShareDataOperate=function(){return null!==v&&v.getCloseShareDataOperate()},t.confInfoNotifyParamsExist=function(){return v&&v.confInfo},t.dataConfStatus=function(){return v?(g.info("dataConfStatus is ",v.dataConfStatus),v.dataConfStatus):(g.info("dataConfService is null"),h.DCONF_STATUS.NONE)},t.changeShareMonitorType=function(e){v&&v.changeShareMonitorType(e)},t.setShareAppHwnd=function(e){v?v.setShareAppHwnd(e):g.error("set share app error.data service is null")},t.getShareAppHwnd=function(){return g.info("get share app hwnd"),v?v.getShareAppHwnd():0},t.getShareAudio=function(){return g.info("get share audio"),!!v&&v.getShareAudio()},t.setShareAudio=function(e){return g.info("set share audio:",e),!!v&&v.setShareAudio(e)},t.setOldShareAppHwnd=function(e){v?v.setOldShareAppHwnd(e):g.error("set old app error.service is null")},t.getOldShareAppHwnd=function(){return v?v.getOldShareAppHwnd():0},t.isRecevingAppshare=function(){return!!v&&v.isRecevingAppshare()},t.bfcpWinAttach=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.abrupt("return",v.bfcpWinAttach(t));case 4:g.info("attach:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bfcpWinDetach=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.abrupt("return",v.bfcpWinDetach());case 4:g.info("detach:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showNativeShareSelectWnd=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.abrupt("return",v.showNativeShareSelectWnd());case 4:g.info("showNativeShareSelectWnd:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},188:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),f.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||i.nextTick(o,this)}function o(e){e.end()}var i=n(240),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var c=n(218);c.inherits=n(129);var u=n(322),f=n(267);c.inherits(r,u);for(var l=s(f.prototype),d=0;d<l.length;d++){var p=l[d];r.prototype[p]||(r.prototype[p]=f.prototype[p])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},191:function(e,t,n){e.exports={default:n(255),__esModule:!0}},194:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarManager=void 0;for(var a,o,i=n(135),s=r(i),c=n(123),u=r(c),f=n(1),l=r(f),d=n(69),p=r(d),h=n(2),g=r(h),v=n(4),m=r(v),_=n(5),C=r(_),w=n(153),S=(n(226),n(207)),I=n(166),E=n(208),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(E),b=n(330),T=constant.KEYPAD_CONST,y=(T.BTN_HIGH_LIGHT_TIME,T.ON_HOLD_TIME_STAMP,T.KEY_AUDIO_LIST),O=T.KEY_AUDIO_SRC,x=y.length,A=[],L=0;L<x;L++){var k=new Audio;k.src=O+y[L],k.preload="auto",A.push(k)}for(var R=0;R<x;R++){var M=new Audio;M.src=O+y[R],M.preload="auto",A.push(M)}var D=coreLogger.getLogger("conf")("logic/video/toolbarmanager"),P=t.ToolbarManager=(o=a=function(){function e(){(0,m.default)(this,e)}return(0,C.default)(e,null,[{key:"playDialAudio",value:function(e){var t=void 0;if(12===e&&(e=0),window.webView)window.webView.playRing(e+".wav",0);else if(this[e]?(t=A[Number(e)+x],this[e]=!1):(t=A[e],this[e]=!0),coreCommon.isMobile()){var n=new Media(O+y[Number(e)],function(){window.log("audio load success.")},function(){window.log("audio load failed.")});n.play()}else t&&(t.currentTime=0,t.play())}}]),e}(),a.rpChairman={stu:-1,time:Date.now(),timer:-1},a.selfMuteState=-1,a.clearParam=function(){clearTimeout(P.rpChairman.timer),P.rpChairman={stu:-1,time:Date.now(),timer:-1},P.selfMuteState=-1},a.setMicVol=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.index>=0&&(D.info("userClick to set mic device, index=",t.index),coreSetting.setAndSaveMicDevice(t.index)),t.isMute>=0&&(D.info("setMicVolNotify, param = "+(0,p.default)(t)),n=1===t.isMute,r=$getState().conf,a=r.isConfMicMute,o=r.isAllowUnmute,i=r.selfRole,s=r.isConfAllMute,c=$getState().login.isSupportAS,1===s&&1===a&&0===i&&0===o&&c?(D.info("unAllow unmute self mic"),coreConf.getSvcAtdManager().alertBox("CANNOT_BE_LIFTED_BY_YOURSELF",0),I.SvcAtdManager.setMuteState(!0,n)):P.setValueZeroFunc());case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setSpkVol=function(){var e=(0,g.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.index>=0&&(D.info("userClick to set spk device, index=",t.index),coreSetting.setAndSaveSpkDevice(t.index)),!(t.isMute>=0)){e.next=9;break}if(!$getState().call.isMuteSpk){e.next=7;break}return e.next=5,coreCommon.SpkControl.getInstance().muteSpk(!1);case 5:e.next=9;break;case 7:return e.next=9,coreCommon.SpkControl.getInstance().muteSpk(!0);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMicState=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),(window.CLIENTCONFIG.ISWIN||n>0)&&(D.info("setMicState = "+t),r=(0,u.default)({frameHwnd:n},{set_mic_state:t}),D.info("setMicState "+(0,p.default)(r)),S.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setSpkSate=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),(window.CLIENTCONFIG.ISWIN||n>0)&&(D.info("setSpkSate = "+t),r=(0,u.default)({frameHwnd:n},{set_spk_state:t}),D.info("setSpkSate "+(0,p.default)(r)),S.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setConfHandle=function(e){var t=0;if($getState().conf.videoFrameHwnd>0&&(t=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(t=N.getAvcFrameHandles()),t>0){var n=(0,u.default)({frameHwnd:t},{is_in_conf:""===e?0:1},{isSMCMeeting:$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING});D.info("setConfhanlde "+(0,p.default)(n)),S.NativeInterface.setParam(n)}else D.warn("setConfhanlde fail cause of  videoWnd = "+t)},a.setCameraState=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),n>0&&(D.info("setCameraState = "+t),r=(0,u.default)({frameHwnd:n},{set_camera_state:t}),D.info("setCameraState "+(0,p.default)(r)),S.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setValueZeroFunc=(0,g.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("userClick  mic mute btn"),t=$getState().myInfo.bind_no,n=$getState().conf,r=n.confHandle,a=n.isConfMicMute,o=n.selfNum,i=$getState().call,s=i.micValue,c=i.isMuteMic,""===r){e.next=24;break}if(!(a>1)){e.next=6;break}return D.info("middle mute state, do nothing..."),e.abrupt("return");case 6:if(D.info("userClick mute btn, change mute state: "+o+" bindNum: "+t),u=isNullOrEmpty(o)?t:o,0!==s){e.next=13;break}D.info("userClick mute btn, value is 0"),a&&(0,w.actionMuteAttendee)(!1,u,!0),e.next=22;break;case 13:if(D.info("userClick mute btn, change mute state: ",a),!c||a){e.next=17;break}return coreCommon.MicControl.getInstance().muteMic(!1),e.abrupt("return");case 17:if(!isNullOrEmpty(o)||c){e.next=20;break}return coreCommon.MicControl.getInstance().muteMic(!0),e.abrupt("return");case 20:c&&coreCommon.MicControl.getInstance().muteMic(!1),(0,w.actionMuteAttendee)(!a,u,!0);case 22:e.next=26;break;case 24:D.info("call mute self mic"),c?coreCommon.MicControl.getInstance().muteMic(!1):coreCommon.MicControl.getInstance().muteMic(!0);case 26:case"end":return e.stop()}},e,void 0)})),a.dialClk=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("dialClk, param = "+(0,p.default)(t)),n=void 0,r=t.num,a=$getState().call.callId,coreCall.actionDialDTMF(a,r),r<10?n=r:"*"===r?n=10:"#"===r?n=11:"+"===r&&(n=0),P.playDialAudio(n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.postponeConf=function(){var e=(0,g.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.updatePastponeTime(t.timeout)),coreConf.postponeConfSerivce(t.timeout);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.removeVideo=(0,g.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("removeVideo start"),t=$getState().call.callId,t?(coreCall.removeVideo(t),appService.showMainWindow(!0)):D.info("removeVideo callId is null, please check");case 3:case"end":return e.stop()}},e,void 0)})),a.setCameraStu=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a,o,i,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("setCameraStu, param = "+(0,p.default)(t)),!(t.index>=0)){e.next=7;break}return D.info("userClick to set cam device, index=",t.index),e.next=5,coreSetting.setAndSaveCamDevice(t.index);case 5:coreCommon.CameraControl.getInstance().switchCameraStateAction(!0),b.EncoderAdpt.onNotifyCameraStatus(!0);case 7:if(void 0===t.state){e.next=19;break}if(n=$getState().call,r=n.callStatus,a=n.cameraIsDisabled,D.info("userClick openCamera,callStatus = "+r),!(o=!("VIDEO_OUT"!==r&&!a))){e.next=15;break}return e.abrupt("return");case 15:coreCommon.CameraControl.getInstance().switchCameraStateAction(t.state),b.EncoderAdpt.onNotifyCameraStatus(t.state),i=window.CLIENTCONFIG.ISMOBILE?$getState().call.currentCamera:$getState().setting.camIndex,$getState().call.cameraDevicesList.length>0&&(s=$getState().call.cameraDevicesList[i],coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_CAMERA,params:[s.name,t.state?1:0]}));case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.applyOrReleasechairman=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D.info("applyOrReleasechairman, param = "+(0,p.default)(t)),n=$getState().conf.memberListInfo,r=P.getSelfOfNumber(n),t.applyStu!==constant.TOOLBAR_EVENT_TYPE.CHAIRMAN.RELEASE){e.next=8;break}return e.next=6,(0,w.actionReleaseChairman)(r);case 6:e.next=28;break;case 8:if(t.applyStu!==constant.TOOLBAR_EVENT_TYPE.CHAIRMAN.REQUEST){e.next=28;break}if(e.prev=9,a=t.pwd+"",(o=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=16;break}P.reRequestChairman(a,r),e.next=23;break;case 16:if(!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=22;break}return D.info("SMC first "),e.next=20,(0,w.actionRequestChairman)("",r);case 20:e.next=23;break;case 22:P.reRequestChairman(a,r);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),D.error("requestChairmanFuc",e.t0);case 28:case"end":return e.stop()}},e,void 0,[[9,25]])}));return function(t){return e.apply(this,arguments)}}(),a.reRequestChairman=function(){var e=(0,g.default)(l.default.mark(function e(t,n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D.info("reRequestChairman by [pwd]"),r=$getState().login.deployMode,e.next=4,(0,w.actionRequestChairman)(t,n);case 4:r===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.getSelfOfNumber=function(e){var t=void 0,n=!0,r=!1,a=void 0;try{for(var o,i=(0,s.default)(e);!(n=(o=i.next()).done);n=!0){var c=o.value;if(1===c.is_self){t=c.number;break}}}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}return t},a.handleReleaseChairmanResNotify=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("handleReleaseChairmanResNotify result = "+t.param),n=t.param.ret,r={state:0,result:n},a=$getState().conf.isBigConf,0===n?(window.CLIENTCONFIG.ISWIN?a?(I.SvcAtdManager.handleCancelWatch(),I.SvcAtdManager.alertBox("NATIVE_RELEASE_CHAIR_ENTER_ACTIVE_CONF",1)):I.SvcAtdManager.alertBox("NATIVE_SUCCESSFULLY_RELEASED_RIGHTS",1):window.CLIENTCONFIG.ISMOBILE?$getState().conf.isBigConf?window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS_BIGCONF,2,!1,"big-conf-toast"):window.ToastNew(language.SUCCESSFULLY_RELEASED_RIGHTS,2):window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS,5,!1,"pcToast",""),(0,w.setSmcFirstRequest)()):(D.error("failed to release the chairman ",n),window.CLIENTCONFIG.ISWIN?I.SvcAtdManager.alertBox("NATIVE_FAILED_RELEASE_THE_CHAIR",1):window.CLIENTCONFIG.ISMOBILE?alert(language.FAILED_RELEASE_THE_CHAIR):window.Toast(language.FAILED_RELEASE_THE_CHAIR,5,!1,"pcToast",""));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleRequestChairmanResNotify=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("handleRequestChairmanResNotify result = "+(0,p.default)(t.param)),n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.NEED_PASSWORD,a=t.param.ret,o=$getState().conf.showRepChairmanError,i=$getState().conf.showqusetchairman,0===a?(i&&$dispatch(coreUi.showqusetchairman()),o&&(D.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),window.CLIENTCONFIG.ISWIN?I.SvcAtdManager.alertBox("NATIVE_SUCCESSFULLY_APPLIED_CHAIR",1):window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2):window.Toast(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,5,!1,"pcToast","")):r&&coreConf.getIsSmcFirstRequestCharimanRest()?(coreConf.setIsSmcFirstRequestCharimanRest(!1),$dispatch(coreUi.showqusetchairman())):(D.error("failed to request the chairman ",a),window.CLIENTCONFIG.ISWIN?5===a&&I.SvcAtdManager.alertBox("IDS_TEXT_APPLY_CHAIRMAN_FAIL"):window.CLIENTCONFIG.ISMOBILE?window.CLIENTCONFIG.ENABLE_IT_MEETING?(0,w.popupRequestChairmanInputBox)():alert(language.APPLICATION_FAILED):window.Toast(language.APPLICATION_FAILED,5,!1,"pcToast",""),o||(D.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())));case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.isConfHasCharMain=(0,g.default)(l.default.mark(function e(){var t,n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$getState().call.callStatus,n=$getState().conf,r=n.confHandle,a=n.memberListInfo,o=!1,isNullOrEmpty(r)||"VIDEO_CONNECTED"!==t&&"CALL_CONNECTED"!==t||isNullOrEmpty(a)||(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),D.error("isConfHasCharMain:",e.t0);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])})),a.initDeviceStates=(0,g.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,f,d;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().call,n=t.isOpenCamera,r=t.cameraNum,a=$getState().conf.isConfMicMute,o=$getState().call,i=o.isMuteMic,s=o.isMuteSpk,c={isMuteSpk:s?1:0,mic_volume:a||i?0:100,camera_on:r>0?n:-1},f=$getState().conf.videoFrameHwnd,d=(0,u.default)({frameHwnd:f},{init_device_state:c}),D.info("initDeviceStates "+(0,p.default)(d)),S.NativeInterface.setParam(d);case 6:case"end":return e.stop()}},e,void 0)})),a.changeCameraStates=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={camera_on:t?1:0},r=$getState().conf.videoFrameHwnd,a=(0,u.default)({frameHwnd:r},{init_device_state:n}),D.info("changeCameraStates "+(0,p.default)(a)),S.NativeInterface.setParam(a);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setChairmanState=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return P.rpChairman.stu=-1,e.abrupt("return");case 3:if(n=I.SvcAtdManager.getVideoFramHwnd(),!$getState().conf.isVideoConf){e.next=23;break}r=-1,a=0,o=t.length;case 7:if(!(a<o)){e.next=14;break}if(1!==t[a].is_self){e.next=11;break}return r=t[a].role,e.abrupt("break",14);case 11:a++,e.next=7;break;case 14:if(-1!==r){e.next=17;break}return D.info("reportChairmanState not find self!!!"),e.abrupt("return");case 17:i=function(e){var t={state:e},r=(0,u.default)({frameHwnd:n},{set_chairman_state:t},{isSMCMeeting:$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING});D.info("reportChairmanState "+(0,p.default)(r)),S.NativeInterface.setParam(r)},s=Date.now()-P.rpChairman.time,D.info("amIChairman = "+r),P.rpChairman.stu!==r||s>5e3?(P.rpChairman.stu=r,P.rpChairman.time=Date.now(),clearTimeout(P.rpChairman.timer),D.info("reportChairmanState 111 tic = "+s),i(r)):s<5e3&&(clearTimeout(P.rpChairman.timer),P.rpChairman.timer=setTimeout(function(){P.rpChairman.stu=r,P.rpChairman.time=Date.now(),D.info("reportChairmanState 222"),i(r),clearTimeout(P.rpChairman.timer)},5e3-s)),e.next=24;break;case 23:window.CLIENTCONFIG.ISWIN&&(D.info("reportChairmanState for audio"),S.NativeInterface.setParam({set_chairman_state:{state:$getState().conf.selfRole}}));case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setAudioConfTip=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=coreCommon.getMembersNameTitle(t),r=(0,u.default)({audioConfTip:n}),D.debug("setAudioConfTip "+(0,p.default)(r)),S.NativeInterface.setParam(r);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMuteStateInAvc=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISWIN){e.next=14;break}n=-1,r=0,a=t.length;case 3:if(!(r<a)){e.next=10;break}if(1!==t[r].is_self){e.next=7;break}return n=t[r].is_mute?0:1,e.abrupt("break",10);case 7:r++,e.next=3;break;case 10:if(-1!==n){e.next=12;break}return e.abrupt("return");case 12:D.info("amIMute = "+n),P.selfMuteState!=n&&(P.selfMuteState=n,D.info("reportSelfMuteState "+(0,p.default)(n)),P.setMicState(n));case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangup=function(){var e=(0,g.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:D.info("hangup, param = "+(0,p.default)(t)),e.t0=t.leaveOption,e.next=e.t0===constant.TOOLBAR_EVENT_TYPE.HANGUP.LEAVECONF?4:e.t0===constant.TOOLBAR_EVENT_TYPE.HANGUP.DISSOLUTIONCONF?4:7;break;case 4:return(0,w.setSmcFirstRequest)(),P.hangupEndCurrentCall(t.leaveOption),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangupEndCurrentCall=function(){var e=(0,g.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().login.sipLoginOnly&&(D.info("hangupEndCurrentCall siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable())),n=$getState(),r=n.conf,a=r.confHandle,o=r.selfRole,i=n.call.callId,P.clearParam(),coreConf.isInConf()){e.next=9;break}return D.info("ConfrimNotify end call, callId=",i),e.next=7,coreCall.callHangup(i);case 7:e.next=18;break;case 9:if(!o||1!==t){e.next=15;break}return D.info("ConfrimNotify end conf, confHandle=",a),e.next=13,(0,w.actionEndConf)();case 13:e.next=18;break;case 15:return D.info("ConfrimNotify leave conf, confHandle=",a),e.next=18,(0,w.actionLeaveConf)();case 18:I.SvcAtdManager.destroyNativeWin();case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangupExitBtnClk=(0,g.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=t.call,r=n.callStatus,a=n.callId,o=t.conf,i=o.confHandle,s=o.selfRole,c=o.uportalTokenErr,u=t.login.sipLoginOnly,D.info("userClick HangUpBtn,confhandle = "+i+",selfRole = "+s+",callStatus = "+r+",uportal[Token]Err = "+desensitive(c)+",sipLoginOnly = "+u),!c||u){e.next=6;break}return(0,w.endCallAndLogout)(),e.abrupt("return");case 6:if(1!==s){e.next=10;break}"VIDEO_CONNECTED"!==r&&"CALL_CONNECTED"!==r||(0,w.handleShowEndConf)(!0),e.next=17;break;case 10:if(coreConf.isInConf()){e.next=15;break}return e.next=13,coreCall.callHangup(a);case 13:e.next=17;break;case 15:return e.next=17,window.confirm(language.CHOSE_LEAVE_CONF).then(function(){var e=(0,g.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=6;break}return e.next=3,(0,w.actionLeaveConf)();case 3:case 6:return e.abrupt("return");case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}},e,void 0)})),a.hangupConfirm=function(){var e=(0,g.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o)},195:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteLoginInfo=t.selectAccount=t.inputValueChange=t.valueChange=t.forgetPwd=t.miniApp=t.removeKeyDownListener=t.addKeyDownListener=t.noLoginJoinConference=t.showSettingMenu=t.doLogin=t.checkLoginInfo=t.getSyncLoginModel=t.getLoginModel=t.recoverAppCache=t.storeAppCache=t.getResumeFlag=t.sipResume=t.setOffline=t.resume=t.registerResumeEvent=t.logout=t.login=t.ipLogin=t.initLoginInfo=t.doLogout=t.clearResumeService=t.checkForceSwtichAccount=void 0;var a=n(185),o=r(a),i=n(136),s=r(i),c=n(311),u=r(c),f=n(363),l=r(f),d=n(167),p=r(d);t.checkForceSwtichAccount=o.checkForceSwtichAccount,t.clearResumeService=o.clearResumeService,t.doLogout=o.doLogout,t.initLoginInfo=o.initLoginInfo,t.ipLogin=o.ipLogin,t.login=o.login,t.logout=o.logout,t.registerResumeEvent=o.registerResumeEvent,t.resume=o.resume,t.setOffline=o.setOffline,t.sipResume=o.sipResume,t.getResumeFlag=o.getResumeFlag,t.storeAppCache=o.storeAppCache,t.recoverAppCache=o.recoverAppCache,t.getLoginModel=s.getLoginModel,t.getSyncLoginModel=s.getSyncLoginModel,t.checkLoginInfo=u.checkLoginInfo,t.doLogin=l.doLogin,t.showSettingMenu=l.showSettingMenu,t.noLoginJoinConference=l.noLoginJoinConference,t.addKeyDownListener=l.addKeyDownListener,t.removeKeyDownListener=l.removeKeyDownListener,t.miniApp=l.miniApp,t.forgetPwd=l.forgetPwd,t.valueChange=l.valueChange,t.inputValueChange=l.inputValueChange,t.selectAccount=p.selectAccount,t.deleteLoginInfo=p.deleteLoginInfo},198:function(e,t,n){e.exports=n(0)(133)},199:function(e,t,n){e.exports=n(0)(241)},200:function(e,t,n){e.exports=n(0)(589)},201:function(e,t,n){var r=n(11),a=n(202),o=n(130),i=n(27),s=n(203);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,l=6==e,d=5==e||l,p=t||s;return function(t,s,h){for(var g,v,m=o(t),_=a(m),C=r(s,h,3),w=i(_.length),S=0,I=n?p(t,w):c?p(t,0):void 0;w>S;S++)if((d||S in _)&&(g=_[S],v=C(g,S,m),e))if(n)I[S]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:I.push(g)}else if(f)return!1;return l?-1:u||f?f:I}}},202:function(e,t,n){e.exports=n(0)(236)},203:function(e,t,n){var r=n(204);e.exports=function(e,t){return new(r(e))(t)}},204:function(e,t,n){var r=n(15),a=n(205),o=n(6)("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},205:function(e,t,n){e.exports=n(0)(595)},206:function(e,t,n){var r=n(24);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},207:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NativeInterface=void 0;var a,o,i=n(123),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),p=r(d),h=n(226),g=(n(153),n(166)),v=coreLogger.getLogger("conf")("logic/nnativeWnd/NativeInterface"),m=(t.NativeInterface=(o=a=function e(){(0,p.default)(this,e)},a.setLocalWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("setLocalWindow callid = "+t+",wndHandle = "+n+",index = "+o),r=null,r=0===o?[{video_wnd_type:1,render:n,displaytype:1,startimage:""}]:[{video_wnd_type:1,render:n,displaytype:1,index:o,startimage:""}],e.next=5,coreCall.setVideoWindow(1,t,r);case 5:return a=e.sent,0!==a.result?v.info("Set local window failed, result = ",a.result):v.info("Set local window success, result = ",a.result),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setBFCPWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("setBFCPWindow callid="+t+",wndHandle="+n+",isData2Bfcp="+r),r){e.next=10;break}return a=[{video_wnd_type:3,render:n,displaytype:1,startimage:""}],e.next=5,coreCall.setVideoWindow(1,t,a);case 5:return o=e.sent,0!==o.result?v.info("Set bfcp window failed, result = ",o.result):v.info("Set bfcp window success, result = ",o.result),e.abrupt("return",o);case 10:return e.next=12,coreConf.bfcpWinAttach(n);case 12:return i=e.sent,v.info("attach win for data result: ",i),e.abrupt("return",i);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.setRemoteWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("setRemoteWindow callid="+t+",wndHandle="+n),r=[{video_wnd_type:0,render:n,displaytype:1,startimage:""}],e.next=4,coreCall.setVideoWindow(1,t,r);case 4:return a=e.sent,0!==a.result?v.info("setRemoteWindow failed, result = ",a.result):v.info("setRemoteWindow success, result = ",a.result),e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.initNativeScreen=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!!window.isHubEnv&&window.isHubEnv,v.info("initNativeScreen viewMode = "+t+", version = "+n+", isMaxHub = "+a),o=window.CLIENTCONFIG.NEW_APP_NAME,i=$getState().login.sipLoginOnly,v.info("initNativeScreen sipLoginOnly = "+i),e.next=7,(0,h.initNativeScreen)(t,n,r,a,c,o,i);case 7:if(s=e.sent,0===s.result){e.next=13;break}return v.info("Init native screen failed, result = ",s.result),e.abrupt("return",null);case 13:return v.info("Init native screen success, result = ",s.result),e.abrupt("return",s.param.frameHwnd);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.uninitNativeScreen=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.uninitNativeScreen)(t,r);case 2:return n=e.sent,0!==n.result?v.info("Uninit native screen failed, result = ",n.result):v.info("Uninit native screen success, result = ",n.result),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.initTimer=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.initTimer)(t,n);case 2:return r=e.sent,0!==r.result?v.info("init timer failed, result = ",r.result):v.info("init timer success, result = ",r.result),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.createWindows=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.createWindows)(t,r,a,o);case 2:if(n=e.sent,v.info("createWindows res = ",n),0===n.result){e.next=9;break}return v.info("Create windows failed, result = ",n.result),e.abrupt("return",null);case 9:return v.info("Create windows success, result = ",n.result),e.abrupt("return",n.param.hwndList);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.updateWindows=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.updateWindows)(t,n,r);case 2:if(a=e.sent,v.info("updateWindows, res = ",a),0===a.result){e.next=9;break}return v.info("Update windows failed, result = ",a.result),e.abrupt("return",null);case 9:return v.info("Update windows success, result = ",a.result),e.abrupt("return",a.param.hwndList);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.destoryWindows=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.destoryWindows)(t,n);case 2:if(r=e.sent,v.info("destoryWindows, res = ",r),0===r.result){e.next=9;break}return v.info("Destroy windows failed, result = ",r.result),e.abrupt("return",null);case 9:if(v.info("Destroy windows success, result = ",r.result),!r.param||!r.param.hwndList){e.next=14;break}return e.abrupt("return",r.param.hwndList);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setWindowHighlight=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setWindowHighlight)(t,n);case 2:return r=e.sent,v.info("setWindowHighlight, res = ",r),0!==r.result?v.info("Set window highlight failed, result = ",r.result):v.info("Set window highlight success, result = ",r.result),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setWindowsName=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setWindowsName)(t,n);case 2:return r=e.sent,v.info("setWindowsName, res = ",r),0!==r.result?v.info("Set windows name failed, result = ",r.result):v.info("Set windows name success, result = ",r.result),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setViewMode=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setViewMode)(t,n);case 2:return r=e.sent,v.info("setViewMode, res = ",r),0!==r.result?v.info("Set view mode failed, result = ",r.result):(v.info("Set view mode success, result = ",r.result),a=$getState().conf,o=a.svcPreViewMode,i=a.svcOnLineAttendances,s=o||constant.SVC_VIEW_MODE.BIG_SMALL_MODE,g.SvcAtdManager.setPageNum(s,i.length)),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setPageNum=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setPageNum)(t,n,r);case 2:return a=e.sent,v.info("setPageNum, res = ",a),0!==a.result?v.info("set page num failed, result = ",a.result):v.info("set page num success, result = ",a.result),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.getFrameHwnd=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.videoFrameHwnd,n={},n.param={},n.param.frameHwnd=t,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)})),a.getBfcpFrameHwnd=function(){var e=$getState().conf.bfcpFrameHwnd,t={};return t.param={},t.param.frameHwnd=e,t},a.setHightlightShareWnd=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setHightlightShareWnd)(t,n);case 2:if(r=e.sent,v.info("setHightlightShareWnd, res = ",r),0===r.result){e.next=9;break}return v.info("Set hightlight shareWnd failed, result = ",r.result),e.abrupt("return",null);case 9:return v.info("Set hightlight shareWnd success, result = ",r.result),e.abrupt("return",r.param.hwnd);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.getWindowIcon=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getWinIcon)(t);case 2:return n=e.sent,v.info("get Window Icon, res = ",n),0!==n.result?v.info("get Window Icon failed"):v.info("get Window Icon success, result = ",n.result),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getTransparentWindow=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getTransparentWindow)(t);case 2:return n=e.sent,v.info("getTransparentWindow, res = ",n),0!==n.result?v.info("Get Transparent Window hwnd failed, result = ",n.result):v.info("Get Transparent Window hwnd success, result = ",n.result),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getDataConfFrameWnd=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getDataConfFrameWnd)();case 2:return t=e.sent,v.info("getDataConfFrameWnd, res = ",t),0!==t.result?v.info("Get dataconfframe hwnd failed, result = ",t.result):v.info("Get dataconfframe hwnd success, result = ",t.result),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,void 0)})),a.setAvailableLayout=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setAvailableLayout)(t,n,r);case 2:return a=e.sent,v.info("setAvailableLayout, res = ",a),0!==a.result?v.info("set available layout failed, result = ",a.result):v.info("set available layout success, result = ",a.result),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.setBigconfDataInitRect=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setBigconfDataInitRect)(t,n);case 2:r=e.sent,v.info("setBigconfDataInitRect, res = ",r),0!==r.result?v.info("setBigconfDataInitRect failed, result = ",r.result):v.info("setBigconfDataInitRect success, result = ",r.result);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setParam=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,r=(0,s.default)({},t),r=(0,s.default)(r,{frameHwnd:n,isHaveSharePriviledge:m(),isSvcConf:$getState().conf.isSvcConf}),e.next=5,(0,h.setParam)(r);case 5:a=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.reportQos=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.reportQos)(a);case 4:o=e.sent,v.info("reportQos, res = ",o),0!==o.result?v.info("report qos failed, result = ",o.result):v.info("report qos success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.reportUserInfo=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.reportUserInfo)(a);case 4:o=e.sent,v.info("reportUserInfo, res = ",o),0!==o.result?v.info("reportUserInfo failed, result = ",o.result):v.info("reportUserInfo success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.showMessageBox=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.showMessageBox)(a);case 4:o=e.sent,v.info("showMessageBox, res = ",o),0!==o.result?v.info("showMessageBox failed, result = ",o.result):v.info("showMessageBox success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.destroyNativeWin=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.destroyNativeWin)();case 2:t=e.sent,v.info("destroyNativeWin, res = ",t),0!==t.result?v.info("destroyNativeWin failed, result = ",t.result):v.info("destroyNativeWin success, result = ",t.result);case 5:case"end":return e.stop()}},e,void 0)})),a.notifyGetWinSystemFonts=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.notifyGetWinSystemFonts)();case 2:if(t=e.sent,0===t.result){e.next=7;break}v.info("notifyGetWinSystemFonts failed, result = ",t.result),e.next=9;break;case 7:return v.info("notifyGetWinSystemFonts success, total = ",t.param.fontlist.length),e.abrupt("return",t.param.fontlist);case 9:case"end":return e.stop()}},e,void 0)})),a.notifyGetSystemInfo=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.notifyGetSystemInfo)();case 2:if(t=e.sent,v.info("notifyGetSystemInfo, res = ",t),0===t.result){e.next=8;break}v.info("notifyGetSystemInfo failed, result = ",t.result),e.next=9;break;case 8:return e.abrupt("return",t.param);case 9:case"end":return e.stop()}},e,void 0)})),a.setCustomMenu=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setCustomMenu)(t);case 2:if(n=e.sent,v.info("setCustomMenu, res = ",n),0===n.result){e.next=8;break}v.info("setCustomMenu failed, result = ",n.result),e.next=9;break;case 8:return e.abrupt("return",n.param);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o),function(){var e=$getState().conf.hasConFRight,t=$getState().conf.confHandle,n=!0;return""===t&&!1===e&&(n=!1),v.info("initNativeScreen isHaveSharePriviledge = "+n),n})},208:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCPURate=t.getAvcBfcpHwnd=t.getRemoteVideoHwnd=t.getLocalVideoHwnd=t.getAvcFrameHandles=t.setAvcNullForSvc=t.isAvcNativeExsit=t.setViewMode=t.switchAudioToMain=t.switchVideoToMain=t.switchVideoToMin=t.handleSwitchToVideo=t.setConfServerId=t.setSubject=t.closeCallInterface=t.nativeNotifyUpdateBfcpFrameWnd=t.closeBfcpFrame=t.initBfcpWindow=t.initRemotWindow=t.updateLocalwindowCallId=t.updateCameraList=t.initCallInterface=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(699),u=r(c),f=coreLogger.getLogger("conf")("logic/video/AVCNativeService"),l=null;t.initCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=8;break}return l=new u.default,e.next=4,l.initCallInterface(t,n,r);case 4:a=e.sent,0===a?f.info("initCallInterface int avc win suc"):(f.error("initCallInterface int avc win fail"),l=null),e.next=9;break;case 8:f.warn("initCallInterface avc win is exist");case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.updateCameraList=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("updateCameraList avc win no exist"),e.abrupt("return");case 5:l.updateCameraList(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateLocalwindowCallId=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("updateLocalwindowCallId avc win no exist"),e.abrupt("return");case 5:l.updateLocalwindowCallId(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initRemotWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("initRemotWindow avc win no exist"),e.abrupt("return");case 5:l.initRemotWindow(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initBfcpWindow=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===l&&(f.warn("initBfcpWindow avc win no exist"),l=new u.default),l.initBfcpWindow(t,n,r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.closeBfcpFrame=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeBfcpFrame avc win no exist"),e.abrupt("return");case 5:l.closeBfcpFrame();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.nativeNotifyUpdateBfcpFrameWnd=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeBfcpFrame avc win no exist"),e.abrupt("return");case 5:l.nativeNotifyUpdateBfcpFrameWnd(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.closeCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeCallInterface avc win no exist"),e.abrupt("return");case 5:return l.closeBfcpFrame(),e.next=8,l.closeCallInterface();case 8:t=e.sent,0===t?(f.info("closeCallInterface avc win suc"),l=null):f.error("closeCallInterface avc win fail");case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setSubject=function(e){if(null===l)return void f.warn("setSubject avc win no exist");l.setSubject(e)},t.setConfServerId=function(e){if(null===l)return void f.warn("setSubject avc win no exist");l.setConfServerId(e)},t.handleSwitchToVideo=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=8;break}return l=new u.default,e.next=4,l.handleSwitchToVideo(t);case 4:n=e.sent,0===n?f.info("handleSwitchToVideo int avc win suc"):(f.error("handleSwitchToVideo int avc win fail"),l=null),e.next=9;break;case 8:f.warn("handleSwitchToVideo avc win is exist");case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.switchVideoToMin=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchVideoToMin avc win no exist"),e.abrupt("return");case 5:l.switchVideoToMin();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.switchVideoToMain=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchVideoToMain avc win no exist"),e.abrupt("return");case 5:l.switchVideoToMain();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.switchAudioToMain=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchAudioToMain avc win no exist"),e.abrupt("return");case 5:l.switchAudioToMain();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setViewMode=function(e,t){null===l?f.warn("setViewMode avc win no exist"):l.setViewMode(e,t)},t.isAvcNativeExsit=function(){return!(null===l)},t.setAvcNullForSvc=function(){l=null,f.info("setAvcNullForSvc")},t.getAvcFrameHandles=function(){return null===l?0:l.getAvcFrameHandles()},t.getLocalVideoHwnd=function(){return null===l?0:l.getLocalVideoHwnd()},t.getRemoteVideoHwnd=function(){return null===l?0:l.getRemoteVideoHwnd()},t.getAvcBfcpHwnd=function(){return null===l?0:l.getAvcBfcpHwnd()},t.handleCPURate=function(e){return null===l?0:l.handleCPURate(e)}},210:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},211:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.unRegisterPush=t.registerPush=t.showUpdateHintsOrBar=t.reStartUpgrade=t.downloadUpgradeFile=t.queryVersionInfo=t.checkUpgrade=t.resumeUportalService=t.getOAuthTicket=t.actionGetCorpResourceAtomic=t.actionGetUploadInfo=t.uportalLogout=t.clearLocalDNSIp=t.frogetPassword=t.verifyVerificationCode=t.getVerifyCode=t.sendCaptchaResult=t.getCaptcha=t.requestVerificationCode=t.queryUserAccount=t.recordPrivacy=t.queryMediaXaddrFromServer=t.setLoginProxy=t.resetLoginInfo=t.refreshTokenCallback=t.changeLoginPassword=t.actionRefreshToken=t.startLoginDownLoadCaCert=t.startPortDetect=t.startFireWallDetect=t.fireWallDetect=t.updateStgAuthInfo=t.updateStgInfo=t.updateFireWallAndSipInfo=t.stgTunnelDisconnected=t.destroyStgTunnel=t.buildStgTunnel=t.checkIsFirstLogin=t.firstTimeLoginChangePassword=t.firstLoginChangePassword=t.setFistLoginInfo=void 0;var a=n(235),o=r(a),i=n(309),s=r(i),c=n(291),u=r(c),f=n(409),l=r(f),d=n(308),p=r(d),h=n(292),g=r(h),v=n(260),m=r(v),_=n(228);t.setFistLoginInfo=s.setFistLoginInfo,t.firstLoginChangePassword=s.firstLoginChangePassword,t.firstTimeLoginChangePassword=s.firstTimeLoginChangePassword,t.checkIsFirstLogin=s.checkIsFirstLogin,t.buildStgTunnel=o.buildStgTunnel,t.destroyStgTunnel=o.destroyStgTunnel,t.stgTunnelDisconnected=o.stgTunnelDisconnected,t.updateFireWallAndSipInfo=o.updateFireWallAndSipInfo,t.updateStgInfo=o.updateStgInfo,t.updateStgAuthInfo=o.updateStgAuthInfo,t.fireWallDetect=o.fireWallDetect,t.startFireWallDetect=o.startFireWallDetect,t.startPortDetect=o.startPortDetect,t.startLoginDownLoadCaCert=l.startLoginDownLoadCaCert,t.actionRefreshToken=u.actionRefreshToken,t.changeLoginPassword=u.changeLoginPassword,t.refreshTokenCallback=u.refreshTokenCallback,t.resetLoginInfo=u.resetLoginInfo,t.setLoginProxy=(0,_.getUportalApi)().setLoginProxy,t.queryMediaXaddrFromServer=u.queryMediaXaddrFromServer,t.recordPrivacy=u.recordPrivacy,t.queryUserAccount=u.queryUserAccount,t.requestVerificationCode=u.requestVerificationCode,t.getCaptcha=u.getCaptcha,t.sendCaptchaResult=u.sendCaptchaResult,t.getVerifyCode=u.getVerifyCode,t.verifyVerificationCode=u.verifyVerificationCode,t.frogetPassword=u.frogetPassword,t.clearLocalDNSIp=u.clearLocalDNSIp,t.uportalLogout=u.uportalLogout,t.actionGetUploadInfo=u.actionGetUploadInfo,t.actionGetCorpResourceAtomic=u.actionGetCorpResourceAtomic,t.getOAuthTicket=p.getOAuthTicket,t.resumeUportalService=u.resumeUportalService,t.checkUpgrade=g.checkUpgrade,t.queryVersionInfo=g.queryVersionInfo,t.downloadUpgradeFile=g.downloadUpgradeFile,t.reStartUpgrade=g.reStartUpgrade,t.showUpdateHintsOrBar=g.showUpdateHintsOrBar,t.registerPush=m.registerPush,t.unRegisterPush=m.unRegisterPush},213:function(e,t,n){n(31),n(22),n(23),n(214),n(215),n(216),n(217),e.exports=n(8).Map},214:function(e,t,n){"use strict";var r=n(180),a=n(149);e.exports=n(181)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(a(this,"Map"),0===e?0:e,t)}},r,!0)},215:function(e,t,n){var r=n(10);r(r.P+r.R,"Map",{toJSON:n(182)("Map")})},216:function(e,t,n){n(183)("Map")},217:function(e,t,n){n(184)("Map")},218:function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function r(e){return"boolean"==typeof e}function a(e){return null===e}function o(e){return null==e}function i(e){return"number"==typeof e}function s(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function u(e){return void 0===e}function f(e){return"[object RegExp]"===v(e)}function l(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===v(e)}function p(e){return"[object Error]"===v(e)||e instanceof Error}function h(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function v(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=a,t.isNullOrUndefined=o,t.isNumber=i,t.isString=s,t.isSymbol=c,t.isUndefined=u,t.isRegExp=f,t.isObject=l,t.isDate=d,t.isError=p,t.isFunction=h,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(132).Buffer)},220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNickName=t.resumeAllSipService=t.checkDetectFireWall=t.detectFireWall=t.stopSipRefresh=t.startSipRefresh=t.dealPcLogout=t.dealPcLogin=t.ipCallConfig=t.stopLocalServer=t.reLoginSipserver=t.unEnableBFCP=t.sipserverDeregister=t.clearnsipinfo=t.stgBuildforNoName=t.handletempsipconfinfo=t.registerLoginEvent=void 0;var r=n(229),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.registerLoginEvent=a.registerLoginEvent,t.handletempsipconfinfo=a.handletempsipconfinfo,t.stgBuildforNoName=a.stgBuildforNoName,t.clearnsipinfo=a.clearnsipinfo,t.sipserverDeregister=a.sipserverDeregister,t.unEnableBFCP=a.unEnableBFCP,t.reLoginSipserver=a.reLoginSipserver,t.stopLocalServer=a.stopLocalServer,t.ipCallConfig=a.ipCallConfig,t.dealPcLogin=a.dealPcLogin,t.dealPcLogout=a.dealPcLogout,t.startSipRefresh=a.startSipRefresh,t.stopSipRefresh=a.stopSipRefresh,t.detectFireWall=a.detectFireWall,t.checkDetectFireWall=a.checkDetectFireWall,t.resumeAllSipService=a.resumeAllSipService,t.getNickName=a.getNickName},221:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){b.info("<account_resume>"+e),window.console.warn(e)}function o(e){b.info("<account_resume_sip>"+e),window.console.warn(e)}function i(){window.updateLocalIp().then(function(){var e=(0,h.default)(d.default.mark(function e(t){var n,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,r=n.sipLoginOnly,window.CLIENTCONFIG.USE_IM&&coreIm.setEServerNetworkIsOk({flag:!0,info:"PCOnline"}),b.info("pc online siploginonly:",r),r?$({message:"PCOnline, sipLoginOnly"}):A({message:"PCOnline, ip:"+handleIp(t)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}function s(){a("<0_Info> pcOffline"),C(constant.APP_STATE.NETWORK_ERROR),a("<0_Info> waiting online"),window.CLIENTCONFIG.USE_IM&&coreIm.setEServerNetworkIsOk({flag:!1,info:"pcOffline"}),c().then(i)}function c(){var e=PromiseObject(),t=function t(n){a("<0_Info> online -> then"),window.removeEventListener("online",t),e.resolve(n)};return window.addEventListener("online",t),e}Object.defineProperty(t,"__esModule",{value:!0}),t.setAppResumeState=t.registerSipResultCallback=t.doSipResumeAndEserverDetect=t.clearResumeService=t.registerResumeEvent=t.sipResume=t.resetSipResumeFlag=t.meetinghwSipEnableToLogout=t.cleraQosMediaInfo=t.stopResume=t.resume=t.getResumeEnable=t.getResumeFlag=void 0;var u=n(3),f=r(u),l=n(1),d=r(l),p=n(2),h=r(p),g=function(){var e=(0,h.default)(d.default.mark(function e(t){var n,r,o,i,s,c,u,f;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().call.callStatus,e.next=3,(0,I.getLoginModel)();case 3:r=e.sent,e.t0=t.netType,e.next=e.t0===constant.NETWORK_TYPE.TYPE_NONE?7:e.t0===constant.NETWORK_TYPE.TYPE_WIFI?12:e.t0===constant.NETWORK_TYPE.TYPE_2G?12:e.t0===constant.NETWORK_TYPE.TYPE_3G?12:e.t0===constant.NETWORK_TYPE.TYPE_4G?12:37;break;case 7:return a("<0_Info> mobileNetworkChange -> offline"),C(constant.APP_STATE.NETWORK_ERROR),window.CLIENTCONFIG.USE_IM&&coreIm.setEServerNetworkIsOk({flag:!1,info:"mobileNetworkChange,no network"}),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(b.info(" xhx_se change local qos level setMicValue Zero"),$dispatch(coreUi.changeCallLocalQoslevel(0)),L()),e.abrupt("break",38);case 12:if(a("<0_Info> mobileNetworkChange -> online"),window.CLIENTCONFIG.USE_IM&&coreIm.setEServerNetworkIsOk({flag:!0,info:"mobileNetworkChange,has network"}),!t.newIp||"0.0.0.0"===t.newIp||q===t.newIp){e.next=21;break}C(constant.APP_STATE.RECONNECTING),o=r.sipLoginOnly,o?$({message:"mobileNetworkChange, sipLoginOnly, e:"+t}):A({message:"mobileNetworkChange, e:"+t}),q=t.newIp,e.next=36;break;case 21:if(!t.newIp||"0.0.0.0"===t.newIp){e.next=33;break}return e.next=24,Y(t);case 24:q=t.newIp,i=r.isSipRegSuc(),s=$getState().conf.confHandle,c=void 0===s||""===s,u=$getState().call.callStatus,f=!("VIDEO_CONNECTED"===u||"VIDEO_OUT"===u||"CALL_OUT"===u||"CALL_CONNECTED"===u),i&&f&&c&&(0,E.reConfigVideoAndDataSetting)(),e.next=36;break;case 33:return a("<0_Info> mobileNetworkChange -> offline, e:"+t),C(constant.APP_STATE.NETWORK_ERROR),e.abrupt("break",38);case 36:case 37:return e.abrupt("break",38);case 38:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,h.default)(d.default.mark(function e(){var t,n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.updateLocalIp();case 2:return e.next=4,(0,I.getLoginModel)();case 4:t=e.sent,a("<0_Info> pcSuspend"),navigator.onLine?(C(constant.APP_STATE.RECONNECTING),n=t.sipLoginOnly,n?$({message:"pcSuspend, sipLoginOnly"}):A({message:"pcSuspend online, ip:"+handleIp(window.localIp)})):(C(constant.APP_STATE.NETWORK_ERROR),a("<0_Info> pcSuspend offline, waiting onLine"),window.CLIENTCONFIG.USE_IM&&(coreIm.setEServerNetworkIsOk({flag:!1,info:"pcSuspend"}),c().then(i)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,h.default)(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING&&k?(a("<0_Info> sipRegisterNotify, registering"),n.useIM||C(constant.APP_STATE.RECONNECTING)):t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER||t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED&&0!==t.reasonCode?(a("<0_Info> sipRegisterNotify, unregister"),coreConf.isInReCall()||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&0===t.reasonCode||$({forceInitRetryTime:!1,message:"sipRegisterNotify, reason:"+t.reasonCode})):t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED&&0===t.reasonCode&&(a("<0_Info> sipRegisterNotify, registered"),n.useIM||C(constant.APP_STATE.ONLINE));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,h.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.CLIENTCONFIG.USE_IM&&coreIm.setEServerOffline({info:"handStgDisConnected"}),e.next=3,(0,I.getLoginModel)();case 3:t=e.sent,t.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER,(0,w.stopLocalServer)(),$({message:"StgDisConnected"});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),C=t.setAppResumeState=function(){var e=(0,h.default)(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,a("<0_Info> setAppResumeState, resume_status:${resume_status}"),t===constant.APP_STATE.ONLINE?(window.isOffline=!1,window.dispatchEvent(new Event("CloudLinkonline")),n.setAppState(t)):(window.isOffline=!0,window.dispatchEvent(new Event("CloudLinkoffline")),n.setAppState(t),n.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER),t!==constant.APP_STATE.NETWORK_ERROR||window.CLIENTCONFIG.USE_IM?!window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(language.THE_NETWORK_IS_ABNORMAL,!1):!window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(language.THE_NETWORK_IS_ABNORMAL,!0);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),w=n(220),S=n(241),I=n(136),E=n(230),N=n(235),b=coreLogger.getLogger("logic")("resume"),T=(t.getResumeFlag=function(){return y},t.getResumeEnable=function(){var e=(0,h.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T);case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),!1),y=!1,O=void 0,x=void 0,A=t.resume=function(){var e=(0,h.default)(d.default.mark(function e(t){var n,r,o,i,s,c,u,f,l,p=t.reloadTup,h=void 0!==p&&p,g=t.message;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a("<1_Start> message:"+g+", reloadTup:"+h),e.next=3,(0,I.getLoginModel)();case 3:if(n=e.sent,window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=7;break}e.next=10;break;case 7:if(T){e.next=10;break}return a("<5_Stop> isResumeEnable=false"),e.abrupt("return");case 10:if(window.dispatchEvent(new Event("CloudLinkresume")),!(r=n.loginDisable)){e.next=21;break}return a("<2_DoResume> wating for last resumePromise=false"),e.next=16,x;case 16:if(!((o=e.sent)&&o.result||!1===window.isOffline)){e.next=21;break}return C(constant.APP_STATE.ONLINE),a("<5_Stop> resumeFlag=false"),e.abrupt("return",y=!1);case 21:O&&O.end&&O.end(),y=!0,C(constant.APP_STATE.RECONNECTING),i=function(e){return a("<2_DoResume> retrytime:"+e),x=(0,S.login)(!0)},s=3e4,c=10,u=function(e){return e&&e.result||!1===window.isOffline},f=function(){a("<3_Success>"),C(constant.APP_STATE.ONLINE),y=!1},l=function(){a("<4_Fail> resumeTimesout"),C(constant.APP_STATE.RECONNECT_FAILED),setTimeout(A,1e4),y=!1};try{O=makeSure(i,u,s,c,f,l),O()}catch(e){a("<4_Fail> error:"+e.toString()),y=!1}case 31:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),L=(t.stopResume=function(){var e=(0,h.default)(d.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a("<6_StopResume> reason:"+t),O&&O.end instanceof Function&&O.end();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.cleraQosMediaInfo=function(){var e={audio:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}},video:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}},bfcp:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}}};$dispatch(coreUi.changeCallMediaInfo(e))}),k=!1,R=0,M=10,D=1e3,P=1e4,F=!1,U=!1,B=!1,W=null,G=null,V=0;window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(M=15,P=2e3,D=0);var H=t.meetinghwSipEnableToLogout=function(){var e=(0,h.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("[IT-Meeting] meetinghwSipEnableToLogout"),window.itWeLinkNotifyCallEnded(0,language.EADDR_FAIL_CONNECT),$getState().conf.confSubject?coreConf.actionLeaveConf():(window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),$=(t.resetSipResumeFlag=function(){var e=(0,h.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:k=!1;case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.sipResume=function(e){var t=e.forceInitRetryTime,n=void 0===t||t,r=e.message,a=void 0===r?"":r,i=function(){var e=(0,h.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R=0,k=!1,window.CLIENTCONFIG.USE_IM||C(constant.APP_STATE.ONLINE),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=6;break}return e.next=6,coreConf.confctrlInit();case 6:o("<4_Success>"),l.resolve();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),s=function(){return T?(U=!1,R>=M?F?(R=0,o("<5_Fail> reset retrytime: max times tried"),k=!1,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!coreConf.isInReCall()&&(window.itWeLinkNotifyCallEnded(0,language.EADDR_FAIL_CONNECT),window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT)),(0,I.getLoginModel)().then(function(e){e.useIM||C(constant.APP_STATE.RECONNECT_FAILED)}),void l.reject("max times tried")):(R=0,o("<5_Fail> reset retrytime: disaster recovery"),D=1e3,F=!0,k=!1,void(0,S.login)(!0)):(o("<5_Fail> will retry again..."),void u())):(o("<5_Fail> resume is unEnable, break resume"),void(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&H()))},c=function(e){return B=!0,new f.default(function(t,n){(0,I.getLoginModel)().then(function(r){var a=e/500,i=0;o("<3_Check> start, sip state:"+r.sipRegisterState+", count:"+a),G=setInterval(function(){i++,i>a?(i=0,clearInterval(G),B=!1,o("<3_Check> end, sip state :"+r.sipRegisterState),n()):(o("<3_Check> sip state :"+r.sipRegisterState),r.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED?(i=0,clearInterval(G),B=!1,t()):r.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING&&(i=0))},500)})})},u=function(){var e=(0,h.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o("<2_DoResume>"),e.next=3,(0,I.getLoginModel)();case 3:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=20;break}if(T){e.next=7;break}return e.abrupt("return");case 7:if(window.localIp&&"0.0.0.0"!==window.localIp){e.next=15;break}return o("<6_Stop> none network1"),V=0,window.meetingWHGetLocalIp(),setTimeout(function(){u()},500),e.abrupt("return");case 15:if(!window.localIp||"0.0.0.0"===window.localIp){e.next=20;break}if(1===V){e.next=20;break}return o("<2_DoResume> doSipResume again after 1s"),setTimeout(function(){V=1,u()},1e3),e.abrupt("return");case 20:return e.next=22,window.updateLocalIp(!0);case 22:if(!window.localIp||"0.0.0.0"!==window.localIp){e.next=27;break}return o("<6_Stop> none network2"),C(constant.APP_STATE.NETWORK_ERROR),k=!1,e.abrupt("return");case 27:if(t.sipRegisterState!==constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED){e.next=34;break}return R=0,o("<6_Stop> reset retrytime: already registered"),k=!1,e.abrupt("return");case 34:if(t.sipRegisterState!==constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING){e.next=39;break}return R=0,o("<6_Stop> reset retrytime: registering"),k=!1,e.abrupt("return");case 39:if(!window.resumeFromShut||!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isOffline){e.next=44;break}return C(constant.APP_STATE.ONLINE),window.resumeFromShut=!1,k=!1,e.abrupt("return");case 44:if(!/^login/.test(window.getRoute())){e.next=49;break}return R=0,o("<6_Stop> reset retrytime: user logout/in the login page"),k=!1,e.abrupt("return");case 49:k=!0,R++,o("<2_DoResume> retrytime: "+R),(0,N.checkStgReConnect)().then(w.reLoginSipserver).then(function(e){return e.result?c(P).then(i):f.default.reject(e)}).catch(function(e){o("<5_Fail> retrytime: "+R+", error:"+e),U=!0,W=setTimeout(s,Math.abs(R*D))});case 53:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();if(o("<0_Info> message:"+a+", forceInitRetryTime:"+n+"(true:reset retrytime, false:TUP send (data.notify=98305) message)"),!T)return o("<6_Stop> current is logout or kickout"),void(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&H());if(n&&(R=0,(0,I.getLoginModel)().then(function(e){e.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER})),k){if(o("<0_Info> currentInErrorSetTimeoutFlag:"+U+", currentInSipResultCheck:"+B),!U)return o("<0_Info> sipResume is excuting, no need to do again");U=!1,clearTimeout(W)}var l=PromiseObject();return o("<1_Start>"),k=!0,window.CLIENTCONFIG.USE_IM||C(constant.APP_STATE.RECONNECTING),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(V=0,window.meetingWHGetLocalIp(),setTimeout(function(){b.info("[IT-Meeting] meetinghw to do sipserverDeregister"),(0,w.sipserverDeregister)(),b.info("[IT-Meeting] meetinghw to do doSipResume"),u()},1e3)):u(),(0,I.getLoginModel)().then(function(e){if(!e.useIM)return l})});window.sipResume=$;var j=(t.registerResumeEvent=function(){var e=(0,h.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:T=!0,a("<0_Info> RegisterResumeEvent"),window.CLIENTCONFIG.ISMOBILE?window.addEventListener("networkchange",g):(window.electron.ipcRenderer.addListener("suspend",v),window.addEventListener("offline",s)),window.addEventListener("stgTunnelDisconnected",_);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.clearResumeService=function(){var e=(0,h.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a("<0_Info> ClearResumeService"),y=!1,T=!1,window.CLIENTCONFIG.ISMOBILE?window.removeEventListener("networkchange",g):(window.electron.ipcRenderer.removeListener("suspend",v),window.removeEventListener("offline",s)),window.removeEventListener("stgTunnelDisconnected",_);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),q=null,Y=t.doSipResumeAndEserverDetect=function(){var e=(0,h.default)(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,a("<0_Info> doSipResumeAndEserverDetect ,message:"+t),window.CLIENTCONFIG.ISMOBILE&&n.isMultiDeviceLogined||$({message:"doSipResumeAndEserverDetect"}),n.useIM&&T&&coreIm.checkEServerIsOnline();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.registerSipResultCallback=function(){window.removeEventListener("sipRegResultEvent",m),window.addEventListener("sipRegResultEvent",m)};window.handleResumeLogin=(0,h.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=window.getRoute(),"main/conference"===t&&(window.noactivity=!1,window.showPageLoading(!1),"function"==typeof window.resumeGetConfInterval&&window.resumeGetConfInterval()),""===t&&window.goRoute("main/conference");case 3:case"end":return e.stop()}},e,void 0)})),window.resume=A},224:function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function a(e){var t=r(e),n=t[0],a=t[1];return 3*(n+a)/4-a}function o(e,t,n){return 3*(t+n)/4-n}function i(e){for(var t,n=r(e),a=n[0],i=n[1],s=new d(o(e,a,i)),c=0,u=i>0?a-4:a,f=0;f<u;f+=4)t=l[e.charCodeAt(f)]<<18|l[e.charCodeAt(f+1)]<<12|l[e.charCodeAt(f+2)]<<6|l[e.charCodeAt(f+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===i&&(t=l[e.charCodeAt(f)]<<2|l[e.charCodeAt(f+1)]>>4,s[c++]=255&t),1===i&&(t=l[e.charCodeAt(f)]<<10|l[e.charCodeAt(f+1)]<<4|l[e.charCodeAt(f+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s}function s(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function c(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(s(r));return a.join("")}function u(e){for(var t,n=e.length,r=n%3,a=[],o=0,i=n-r;o<i;o+=16383)a.push(c(e,o,o+16383>i?i:o+16383));return 1===r?(t=e[n-1],a.push(f[t>>2]+f[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),a.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=u;for(var f=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,g=p.length;h<g;++h)f[h]=p[h],l[p.charCodeAt(h)]=h;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},225:function(e,t){t.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,c=(1<<s)-1,u=c>>1,f=-7,l=n?a-1:0,d=n?-1:1,p=e[t+l];for(l+=d,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=d,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=r;f>0;i=256*i+e[t+l],l+=d,f-=8);if(0===o)o=1-u;else{if(o===c)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,r),o-=u}return(p?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,s,c,u=8*o-a-1,f=(1<<u)-1,l=f>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=f):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),t+=i+l>=1?d/c:d*Math.pow(2,1-l),t*c>=2&&(i++,c/=2),i+l>=f?(s=0,i=f):i+l>=1?(s=(t*c-1)*Math.pow(2,a),i+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,a),i=0));a>=8;e[n+p]=255&s,p+=h,s/=256,a-=8);for(i=i<<a|s,u+=a;u>0;e[n+p]=255&i,p+=h,i/=256,u-=8);e[n+p-h]|=128*g}},226:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setCustomMenu=t.setNativeWndLogPath=t.changeNativeLangCode=t.notifyGetSystemInfo=t.notifyGetWinSystemFonts=t.notifyChangePassiveBidirectionStatus=t.notifyChangeActiveBidirectionStatus=t.notifyChangeAudientStatus=t.destroyNativeWin=t.showMessageBox=t.notifyPutHandup=t.notifyLockConfState=t.notifyLockConfResult=t.reportUserInfo=t.setBigconfDataInitRect=t.setParam=t.getWinIcon=t.notifyNativeLeaveConf=t.getWndRect=t.reportQos=t.reportChairmanStu=t.setAvailableLayout=t.getDataConfFrameWnd=t.getTransparentWindow=t.setHightlightShareWnd=t.getFrameHwnd=t.setPageNum=t.setViewMode=t.setWindowsName=t.setWindowHighlight=t.destoryWindows=t.updateWindows=t.createWindows=t.initTimer=t.uninitNativeScreen=t.initNativeScreen=void 0;var a=n(123),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(207),l=(r(f),n(153),coreLogger.getLogger("model")("model/nativewndService/index"));t.initNativeScreen=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o,i,c){var u,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return u=e.sent,e.next=5,u.initNativeScreen(t,n,r,a,o,i,c);case 5:return f=e.sent,e.abrupt("return",f);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),t.uninitNativeScreen=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.uninitNativeScreen(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.initTimer=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("wh_initTimer::",t,"  ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.initTimer(t,n);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.createWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a){var o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return o=e.sent,e.next=5,o.createWindows(t,n,r,a);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.updateWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.updateWindows(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.destoryWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.destoryWindows(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setWindowHighlight=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setWindowHighlight(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setWindowsName=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setWindowsName(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setViewMode=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setViewMode(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setPageNum=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.setPageNum(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.getFrameHwnd=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.getFrameHwnd();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setHightlightShareWnd=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setHightlightShareWnd(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getTransparentWindow=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getTransparentWindow(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getDataConfFrameWnd=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.getDataConfFrameWnd();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setAvailableLayout=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.setAvailableLayout(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.reportChairmanStu=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.reportChairmanStu(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.reportQos=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.reportQos(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getWndRect=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getWndRect(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyNativeLeaveConf=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyLeaveConf();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getWinIcon=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getWindowIcon(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setParam=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.default)({},t),n=(0,o.default)(n,{isSvcConf:$getState().conf.isSvcConf}),e.next=4,coreTup.getNativeWindowInstance();case 4:return r=e.sent,e.next=7,r.setParam(n);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setBigconfDataInitRect=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setBigconfDataInitRect(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.reportUserInfo=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().conf.memberListInfo,r=t.query_user_info_result.usernum,a=r.map(function(e){var t=-1,r=n.some(function(t){return t.number.replace("+86","")===e.replace("+86","")&&1===t.state}),a=n.some(function(t){return t.number.replace("+86","")===e.replace("+86","")&&5===t.state});return r&&(t=1),a&&(t=5),{number:e,state:t}}),t.query_user_info_result.usernum=a,e.next=6,coreTup.getNativeWindowInstance();case 6:return o=e.sent,e.next=9,o.reportUserInfo(t);case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyLockConfResult=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyLockConfResult(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyLockConfState=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyLockConfState(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyPutHandup=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyPutHandup(t);case 5:r=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.showMessageBox=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.showMessageBox(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.destroyNativeWin=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.destroyNativeWin();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.notifyChangeAudientStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangeAudientStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyChangeActiveBidirectionStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangeActiveBidirectionStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyChangePassiveBidirectionStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangePassiveBidirectionStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyGetWinSystemFonts=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyGetWinSystemFonts();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.notifyGetSystemInfo=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyGetSystemInfo();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.changeNativeLangCode=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("changeNativeLangCode start "),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.changeNativeLangCode(t);case 6:return r=e.sent,l.info("changeNativeLangCode end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setNativeWndLogPath=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("setNativeWndLogPath start "),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.setNativeWndLogPath(t);case 6:return r=e.sent,l.info("setNativeWndLogPath end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setCustomMenu=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("setCustomMenu start ",t),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.setCustomMenu(t);case 6:return r=e.sent,l.info("setCustomMenu end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetConfig=t.DFConfig=void 0;var r,a,o=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(273),c=coreLogger.getLogger("dataconf")("config"),u=t.DFConfig=(a=r=function e(){(0,i.default)(this,e)},r.platform=s.DFPLATFORM.platform,r.isWin=s.DFPLATFORM.isWin,r.isBigWin=s.DFPLATFORM.isWin,r.isMobile=s.DFPLATFORM.isMobile,r.isPc=s.DFPLATFORM.isPc,r.isMac=s.DFPLATFORM.isMac,r.isWinBase=s.DFPLATFORM.isWinBase,r.moduleName="DataConf",r.isAppShareEnabled=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin,r.pathSeparator=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin?"\\":"/",r.supportBuried=s.DFPLATFORM.isBigWin,r.userSipNumberRequestBigParams=s.DFPLATFORM.isMobile&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||s.DFPLATFORM.isBigWin,r.useSBC=!s.DFPLATFORM.isBigWin,r.decFr=function(){return s.DFPLATFORM.isMobile||2===window.cpu_core_num&&2===window.cpu_proc_num?3:30},r.encFr=function(){return 2===window.cpu_core_num&&2===window.cpu_proc_num?3:30},r.isDocShareEnabled=function(){var e=void 0!==window.enableDocShare?parseInt(window.enableDocShare,10):0;return c.info("openDocShareFlag  enableDocShare : "+window.enableDocShare),!isNullOrEmpty(e)&&1===e},r.whiteBoardShareEnable=s.DFPLATFORM.isWin,r.serverType=function(){return u.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING?1:3},r.shouldSendServerInfoNotify=function(){return window.CLIENTCONFIG.ENABLE_IT_MEETING},r.shouldPasscodeBase64=function(){return u.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING},r.captureType=function(){return s.DFPLATFORM.isMac?4:0===n(705).release().indexOf("10")?3:0},r.sendAnnotationEnable=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin,r.supportDataToBfcp=s.DFPLATFORM.isMac,r.deployMode=constant.MEETING_NET_TYPE.MEDIAX_MEETING,r.firewallType=window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?s.DATA_FIREWALL_MODE.SBC:s.DATA_FIREWALL_MODE.NULL,r.stgAddresslist="",r.devType=s.DFPLATFORM.isBigWin?11:1,r.dataCodeccVersion=5,a);t.resetConfig=function(){c.info("resetConfig start"),u.dataCodeccVersion=5,u.devType=s.DFPLATFORM.isBigWin?11:1}},228:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUportalApi=void 0;var a=n(141),o=r(a),i=n(142),s=r(i),c=n(119),u=r(c),f=n(120),l=r(f),d=n(121),p=r(d),h=n(69),g=r(h),v=n(1),m=r(v),_=n(2),C=r(_),w=n(4),S=r(w),I=n(407),E=r(I),N=n(136),b=n(165),T=n(308),y=n(235),O=n(309),x=n(211),A=n(415),L=coreLogger.getLogger("logic")("login/uportal"),k=function e(){var t=this;(0,S.default)(this,e),this.loadLastUportalInfoFromDB=(0,C.default)(m.default.mark(function e(){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"LastUportalLoginIP"});case 2:n=e.sent,r=n&&n.value&&JSON.parse(n.value)||{},t.value=r.value||"",t.serverKey=r.serverKey||"";case 6:case"end":return e.stop()}},e,t)})),this.loadLastUportalInfo=function(){var e=(0,C.default)(m.default.mark(function e(n){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isFirstLoad){e.next=4;break}return t.isFirstLoad=!1,e.next=4,t.loadLastUportalInfoFromDB();case 4:t.serverKey!==n&&(t.value=""),t.serverKey=n;case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.saveLastUportalInfo=function(){var e=(0,C.default)(m.default.mark(function e(n,r){var a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.serverKey!==n||t.value!==r){e.next=2;break}return e.abrupt("return",!0);case 2:return t.serverKey=n,t.value=r,a={serverKey:t.serverKey,value:t.value},e.abrupt("return",coreDb.saveLoginSetting({key:"LastUportalLoginIP",value:(0,g.default)(a)}));case 6:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.value="",this.serverKey="",this.isFirstLoad=!0},R=function e(){var t=this;(0,S.default)(this,e),this.switchProxy=(0,C.default)(m.default.mark(function e(){var n,r,a,o,i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.info("[ ProxyUtil ] switchProxy"),!t.switchingPromise){e.next=6;break}return L.info("[ ProxyUtil ] is switching proxy."),e.abrupt("return",t.switchingPromise);case 6:t.switchingPromise=new PromiseObject;case 7:return e.prev=7,e.next=10,coreAccount.getLoginModel();case 10:return n=e.sent,r=n.isSupportProxy,a=n.isUseSysProxy,o=n.proxyAddress,i=n.proxyPort,s=n.proxyAccount,e.next=18,coreSecurity.getPasswordManager();case 18:return c=e.sent,e.next=21,c.getPassword("proxyPassword");case 21:if(u=e.sent,t.lastProxyInfo={isSupportProxy:r,isUseSysProxy:a},!r){e.next=28;break}return e.next=26,coreAccount.setProxyInfo({isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:o,proxyPort:i,proxyAccount:s,proxyPassword:u});case 26:e.next=34;break;case 28:return e.next=30,window.getSystemProxy();case 30:if(!(f=e.sent)){e.next=34;break}return e.next=34,coreAccount.setProxyInfo({isSupportProxy:!0,isUseSysProxy:!0,proxyAddress:f.sysProxyAddress||"",proxyPort:f.sysProxyPort||"",proxyAccount:"",proxyPassword:""});case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(7),L.error("[ ProxyUtil ]",e.t0);case 39:t.switchingPromise.resolve(),t.switchingPromise=null;case 41:case"end":return e.stop()}},e,t,[[7,36]])})),this.resetProxy=(0,C.default)(m.default.mark(function e(){var n,r,a,o,i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.info("[ ProxyUtil ] resetProxy"),!t.lastProxyInfo){e.next=17;break}return e.next=4,coreAccount.getLoginModel();case 4:return n=e.sent,r=n.proxyAddress,a=n.proxyPort,o=n.proxyAccount,e.next=10,coreSecurity.getPasswordManager();case 10:return i=e.sent,e.next=13,i.getPassword("proxyPassword");case 13:return s=e.sent,c=t.lastProxyInfo,u=c.isSupportProxy,f=c.isUseSysProxy,e.next=17,coreAccount.setProxyInfo({isSupportProxy:u,isUseSysProxy:f,proxyAddress:r,proxyPort:a,proxyAccount:o,proxyPassword:s});case 17:t.lastProxyInfo=null;case 18:case"end":return e.stop()}},e,t)})),this.replaceProxyAddress=(0,C.default)(m.default.mark(function e(){var n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:n=e.sent,r=n.isSupportProxy,a=n.proxyAddress,r&&-1!==a.indexOf("huawei.com")&&(n.proxyAddress="proxycn2.huawei.com");case 5:case"end":return e.stop()}},e,t)})),this.lastProxyInfo=null,this.switchingPromise=null};window.isRepeateCall=!1;var M=function(t){function n(){var t=this;(0,S.default)(this,n);var r=(0,l.default)(this,(n.__proto__||(0,u.default)(n)).call(this));return r.getUportalLoginInfo=function(){var e=(0,C.default)(m.default.mark(function e(n,r,a,o){var i,s,c,u,f,l,d,p,h,g,v;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:if(i=e.sent,s=i.isOAuth,c=i.account,u=i.user_ticket,f=i.userTicket,l=i.authType,d=i.domain,1!==l){e.next=6;break}return e.abrupt("return",{auth_type:constant.AUTH_TYPE.TICKET,user_agent:window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:constant.USER_AGENT.PC,short_ticket:f,domain:d,auth_info:{user_name:"",password:""},auth_server:{server_type:0,server_url:a,server_port:parseInt(o),server_version:"V6R6C00",proxy_url:""}});case 6:return p="",n.indexOf("@")<0?(p="mobile",L.info("lgn acc is ",handlePhoneNumber(n))):n.length>4&&L.info("lgn acc is",n.length>4?n.substr(0,3)+"******"+n.substr(-4):"****"),L.info("login user_name_type =",p),h="",g="",i.isOAuth&&(u.length>40?h=u:g=u),v=window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:window.isHubEnv?constant.USER_AGENT.MAXHUB:"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC,L.info("uportal user_agent=",v),e.abrupt("return",{auth_type:s?constant.AUTH_TYPE.TICKET_WITH_USERNAME:constant.AUTH_TYPE.NORMAL,user_agent:v,user_tiket:h,short_ticket:g,user_name_type:p,src_of_psw:1,auth_info:{user_name:s?c:n,password:r},auth_server:{server_type:0,server_url:a,server_port:parseInt(o),server_version:"V6R6C00",proxy_url:""}});case 14:case"end":return e.stop()}},e,t)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),r.uportalLogin=function(){var e=(0,C.default)(m.default.mark(function e(n){var a,o,i,s,c,u,f,l,d,p,h=n.loginAccount,g=n.password,v=n.serverAddress,_=n.serverPort;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return a=e.sent,a.set({isInUportalLogin:!0,uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING}),e.next=6,coreTup.getUportalInstance();case 6:if(o=e.sent,o.setNotifyFunc(360459,r.refreshTokenCallback),i=a.isSupportCACertCheck,s=window.EXEC_PATH,i?window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.loginSetTlsParamsEx(s,1):o.loginSetTlsParams(s,1):window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.loginSetTlsParamsEx(s,0):o.loginSetTlsParams(s,0),window.CLIENTCONFIG.ISBIGWIN){e.next=14;break}return e.next=14,r.setLoginProxy(o);case 14:return c=void 0,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER]}),e.next=18,r.getUportalLoginInfo(h,g,v,_);case 18:if(u=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=27;break}return e.next=22,o.loginAuthorizeEx(u);case 22:f=e.sent,l=f.param,c=l,e.next=32;break;case 27:return e.next=29,o.loginAuthorize(u);case 29:d=e.sent,p=d.param,c=p;case 32:return(0,O.setFistLoginInfo)(c,h),r.loggerUportalLogin(c),e.abrupt("return",c);case 35:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),r.loggerUportalLogin=function(){var e=(0,C.default)(m.default.mark(function e(n){var a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,g.default)(n),o=JSON.parse(a),i=new Array("server_port","server_uri","server_num","auth_mode","corp_id","deploy_mode","display_name","dms_server","eab_server","expire","ItLoginAutoReg","ItPasswordModifyUrl","ItSignedUrl","ItUploadHeadImgUrl","group_server","is_first_login","is_free_user","left_days_of_pwd","media_type","num_of_site","onebox_app_id","onebox_server_addr","onebox_server_type","password_type","privacy_version","redirect_url","register_server","sip_domain","androidpush_uri","conf_type","conf_uri","eab_uri","eserver_uri","eserver_uri_backup","eua_server","http_proxy_uri","httpsproxy_uri","is_mainsite","is_siptls","is_srtp","maa_drproxy_uri","maa_proxy_uri","maa_uri","maa_uri_backup","ms_param_path_uri","ms_param_uri","onebox_address_uri","priority","prophoto_uri","push_gateway","server_name","sip_tls_uri","sip_uri","account","eserver_stg_uri","eserver_stg_uri_backup","maa_stg_uri","maa_stg_uri_backup","sip_stg_uri","stg_uri","svn_uri","tms_server","num_of_server","sbc_domain","site_name","tms_account","terminal_func_type","terminal_scene","user_id","result","user_type"),r.paraseJson(o,i),L.info("uportal login result:",o);case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),r.paraseJson=function(){var e=(0,C.default)(m.default.mark(function e(n,a){var o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o in n)i=n[o],"object"===(void 0===i?"undefined":(0,s.default)(i))?r.paraseJson(i,a):-1===a.indexOf(o)&&(n[o]="******");case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),r.updateSiteInfo=function(){var e=(0,C.default)(m.default.mark(function e(n){var r,a,i,s,c,u,f,l,d,p,h,g,v,_,C,w,S,I,E,b,T,y,O,x,k,R,M,D,P,F,U,B,W,G,V,H,$,j,q,Y,K,J,z,Q,X,Z,ee,te,ne,re,ae,oe,ie,se,ce,ue,fe,le,de,pe,he,ge,ve,me,_e,Ce,we,Se,Ie,Ee,Ne,be,Te,ye,Oe,xe,Ae,Le,ke,Re,Me,De,Pe,Fe,Ue,Be,We,Ge,Ve,He,$e,je,qe,Ye,Ke,Je,ze,Qe,Xe,Ze,et,tt,nt,rt,at,ot,it,st,ct,ut,ft,lt,dt,pt,ht,gt,vt,mt,_t,Ct,wt,St;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:for(r=e.sent,a=n.uportal_authorize_result.terminal_func_type,i=!0,s=n.uportal_authorize_result.terminal_scene,c=!!s&&"room"===s,(window.CLIENTCONFIG.ENABLE_IT_MEETING||c)&&(a=5),u="",-1!==a?(r.funcType=a,1===a?(u="soft mode",window.CLIENTCONFIG.USE_MEETING=!1,window.CLIENTCONFIG.USE_IM=!1,window.CLIENTCONFIG.USE_CALL=!0,window.CLIENTCONFIG.DEFAULT_MENU="contactGroups",window._currentRoute="/main/contactGroups",$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["contactGroups","myInfo"]):5===a?(u="te mode",window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!1,window.CLIENTCONFIG.USE_CALL=!0,window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference",$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["conference","contactGroups","myInfo"]):7===a&&(u="uc mode",window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!0,window.CLIENTCONFIG.USE_CALL=!0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(window.CLIENTCONFIG.DEFAULT_MENU="recent",window._currentRoute="/main/recent"):(window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference"),f=$getState().menu.currentNav,window.CLIENTCONFIG.DEFAULT_MENU!==f&&"nav"!==f&&f?coreCommon.switchNav(f):$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["recent","conference","contactGroups","myInfo"]),(0,A.setAppConfigList)(),L.info("functype == "+a+" "+u)):(window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!0,window.CLIENTCONFIG.USE_CALL=!0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(window.CLIENTCONFIG.DEFAULT_MENU="recent",window._currentRoute="/main/recent"):(window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference"),l=$getState().menu.currentNav,window.CLIENTCONFIG.DEFAULT_MENU!==l&&"nav"!==l?coreCommon.switchNav(l):$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["conference","recent","contactGroups","myInfo"],L.info("functype == -1")),d=n.uportal_authorize_result.all_sip_server.server_info,p=d.length<window.CLIENTCONFIG.CALL_D_MAX_IP_WHITE_LIST_COUNT?d.length:window.CLIENTCONFIG.CALL_D_MAX_IP_WHITE_LIST_COUNT,h=new Array,g=0;g<p;g++)v={server_address:d[g].server_uri,server_port:d[g].server_port},h.push(v);if($dispatch(coreUi.updateMenuInfo({menuList:window.CLIENTCONFIG.MOBILE_MENU_LIST})),!(_=n.uportal_authorize_result.site_info)||!_[0]){e.next=132;break}C=_[0],w=C.num_of_server,S=C.access_server,I=C.tms_account,E="",b="",T="",y="",O="",x="",k="",R="",M="",D="",P="",F="",U="",B="",W="",G="",V="",H="",$="",j="",q=S[0].conf_uri,Y=S[0].conf_type,Y&&"CMS"===Y&&!isNullOrEmpty(q)?(L.info("new conf AS is supported"),r.isSupportAS=!0,$dispatch(coreUi.changeAsAddress(q))):(L.info("new conf AS is not supported"),r.isSupportAS=!1),K=S[0].http_proxy_uri,isNullOrEmpty(K)||(r.ctdServerUri=K,r.confctrlUri=K,L.info("http_proxy_uri:"+K)),J=S[0].onebox_address_uri,z="CloudEC","Workplace"===window.CLIENTCONFIG.NEW_APP_NAME&&(z="espace"),Q=n.uportal_authorize_result.corp_id||"",J&&coreIm.setOfflineFileConfig(!0,{onebox_app_id:z,onebox_server_addr:J,corp_id:Q}),"supportRest"===I&&(i=!1),window.CLIENTCONFIG.ISBIGWIN&&(i=!0),X=0,Z=0;case 36:if(!(Z<w)){e.next=60;break}if(S&&S[Z]){e.next=39;break}return e.abrupt("continue",57);case 39:E+=S[Z].sip_uri,b+=S[Z].sip_tls_uri,T+=S[Z].svn_uri,M+=S[Z].stg_info.stg_uri,F+=S[Z].stg_info.sip_stg_uri,U+=S[Z].stg_info.eserver_stg_uri,B+=S[Z].stg_info.eserver_stg_uri_backup,W+=S[Z].maa_proxy_uri,G+=S[Z].maa_drproxy_uri,x+=S[Z].eserver_uri,k+=S[Z].eserver_uri_backup,y+=S[Z].httpsproxy_uri,D=S[0].stg_info.account,P=S[0].stg_info.password,H||(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(S[Z].tms_uri&&(H=S[Z].tms_uri),S[Z].tms_server&&(H=S[Z].tms_server)):H=S[Z].tms_server),$||($=S[Z].ms_param_uri),j||(j=S[Z].eua_server),Z<w-1&&(E+=";",b+=";",T+=";",M+=";",F+=";",U+=";",B+=";",W+=";",x+=";",k+=";",y+=";");case 57:Z++,e.next=36;break;case 60:if(L.info("sipUri:"+E+" sipTlsUri:"+b),X=w,U+=";",U+=B,x+=";",x+=k,W+=";",W+=G,window.isSupportiDo=i,L.info("uportal isSupportiDo: "+window.isSupportiDo),ee=n.uportal_authorize_result,te=ee.auth_token,ne=ee.sip_account,re=ee.sip_impi,ae=ee.sip_password,oe=ee.password_type,ie=ee.eab_server,se=ee.group_server,ce=ee.deploy_mode,ue=ee.sip_domain,fe=ee.auth_serinfo,le=ee.is_free_user,de=ee.privacy_version,pe=ee.user_type,he=n.uportal_authorize_result,ge=he.extra_parameters,ve=he.all_extra_parameter,isNullOrEmpty(ge)&&!isNullOrEmpty(ve)){me={};for(_e in ve)me[ve[_e].parameter_name]=ve[_e].parameter_value;ge=me}isNullOrEmpty(ge)||j||(j=ge.eua_server),Ce=ce,we="",Se="",Ie="",Ee="",ge&&(ge.ItPasswordModifyUrl&&(we=ge.ItPasswordModifyUrl),ge.ItLoginAutoReg&&(Se=ge.ItLoginAutoReg),ge.ItSignedUrl&&(Ie=ge.ItSignedUrl),ge.ItLoginAutoReg&&(Ee=ge.ItUploadHeadImgUrl)),Ce=0===ce?constant.MEETING_NET_TYPE.USM_MEETING:1===ce?constant.MEETING_NET_TYPE.SMC_MEETING:constant.MEETING_NET_TYPE.MEDIAX_MEETING,L.info("uportal get deploy_mode is "+ce+",envtype is "+Ce),Ne=x.split(";"),be=y.split(";"),Te=W.split(";").filter(function(e){return!!e}),L.info("updateSiteInfo eserverUriList.length: "+Ne.length+", httpsProxyList.length: "+be.length+", maaProxyUrlList.length: "+Te.length),Ne.length>0&&(R=Ne[0]),be.length>0&&(O=be[0]),Te.length>0&&(V=Te[0]),ye=0,Oe=R.split(":"),xe=(0,o.default)(Oe,2),Ae=xe[0],Le=xe[1],ke=V.split(":"),Re=(0,o.default)(ke,2),Me=Re[0],De=Re[1],Pe=E.split(";"),Fe=Pe[0]?Pe[0].split(":"):["",0],Ue=(0,o.default)(Fe,2),Be=Ue[0],We=Ue[1],Ge=Pe[1]?Pe[1].split(":"):["",0],Ve=(0,o.default)(Ge,2),He=Ve[0],$e=Ve[1],je=Pe[2]?Pe[2].split(":"):["",0],qe=(0,o.default)(je,2),Ye=qe[0],Ke=qe[1],Je=Pe[3]?Pe[3].split(":"):["",0],ze=(0,o.default)(Je,2),Qe=ze[0],Xe=ze[1],Ze=b.split(";"),et=Ze[0]?Ze[0].split(":"):["",0],tt=(0,o.default)(et,2),nt=tt[0],rt=tt[1],at=Ze[1]?Ze[1].split(":"):["",0],ot=(0,o.default)(at,2),it=ot[0],st=ot[1],ct=Ze[2]?Ze[2].split(":"):["",0],ut=(0,o.default)(ct,2),ft=ut[0],lt=ut[1],dt=Ze[3]?Ze[3].split(":"):["",0],pt=(0,o.default)(dt,2),ht=pt[0],gt=pt[1],vt="",e.t0=m.default.keys(_[0].access_server);case 104:if((e.t1=e.t0()).done){e.next=112;break}if(mt=e.t1.value,isNullOrEmpty(_[0].access_server[mt].push_gateway)){e.next=110;break}return L.info("push_gateway:",_[0].access_server[mt].push_gateway),vt=_[0].access_server[mt].push_gateway,e.abrupt("break",112);case 110:e.next=104;break;case 112:return _t={authToken:te,sipAccount:ne,sipImpi:re,sipPasswordType:oe,eabUri:ie,groupServer:se,mainSiteSum:X,currentNum:ye,eServerAddressAll:x,eServerAddress:Ae,eServerPort:parseInt(Le),sipServerAddress:Be,sipServerPort:parseInt(We),sipTlsServerAddress:nt,sipTlsPort:parseInt(rt),sipTlsServerBackup1:it,sipTlsPortBackup1:parseInt(st),sipTlsServerBackup2:ft,sipTlsPortBackup2:parseInt(lt),sipTlsServerBackup3:ht,sipTlsPortBackup3:parseInt(gt),sipDomain:ue,sipServerBackup1:He,sipServerPortBackup1:parseInt($e),sipServerBackup2:Ye,sipServerPortBackup2:parseInt(Ke),sipServerBackup3:Qe,sipServerPortBackup3:parseInt(Xe),sipUri:E,svnUri:T,httpsProxyAll:y,httpsProxy:O,stgUri:M,stgAccount:D,sipStgUri:F,eserverStgUri:U,deployMode:Ce,funcType:a,tmsServer:H,changeItPasswordUrl:we,itOAuthUrl:Se,itSignedUrl:Ie,itUploadHeadImgUrl:Ee,sipWhiteList:h,serverUportalAddress:fe.server_uri,serverUportalPort:fe.server_port,sipLoginissiptls:_[0].access_server[0].is_siptls,sipLoginissrtp:_[0].access_server[0].is_srtp,pushgwUri:vt,smcUri:$,isIwb:c,privacy_version:de,euaServer:j,maaProxyUrlAll:W,maaProxyAddress:Me,maaProxyPort:De,real_user_account:n.uportal_authorize_result.real_user_account},_t.isFreeUser=pe!==constant.REGISTER_USER_TYPE.FREE?0:1,L.info("isFreeUser: "+_t.isFreeUser),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&re.indexOf("@")&&(Ct=re.split("@")[0],window.sendSipNoToProto(Ct)),_t.show_account=r.account,(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||r.isSupportAS)&&(wt=n.uportal_authorize_result.real_user_account,_t.show_account=r.account,_t.account=wt),coreUt.utConfigAccountInfo({configAccount:_t.show_account}),e.next=121,coreSecurity.getPasswordManager();case 121:if(St=e.sent,e.t2=P,!e.t2){e.next=126;break}return e.next=126,St.setPassword("stgPassword",P);case 126:if(e.t3=ae,!e.t3){e.next=130;break}return e.next=130,St.setPassword("sipPassword",ae);case 130:return r.set(_t),e.abrupt("return",_t);case 132:return e.abrupt("return",{});case 133:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),r.uportalAllonline=(0,C.default)(m.default.mark(function e(){var n,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.getUportalRes(),a=n.param,e.next=4,(0,N.getLoginModel)();case 4:return o=e.sent,i=o.loginAccount,o.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,account:a.uportal_authorize_result.user_name||i}),e.next=9,r.updateSiteInfo(a);case 9:return s=e.sent,e.abrupt("return",{result:!0,loginInfo:s});case 11:case"end":return e.stop()}},e,t)})),r.setLoginProxy=function(){var e=(0,C.default)(m.default.mark(function e(n){var r,a,o,i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return r=e.sent,a=r.isSupportProxy,o=r.proxyAddress,i=r.proxyPort,s=r.proxyAccount,e.next=9,coreSecurity.getPasswordManager();case 9:return c=e.sent,e.next=12,c.getPassword("proxyPassword");case 12:if(u=e.sent,a||(o="",i="0",s="",u=""),f={server_port:parseInt(i),server_uri:o,user_name:s,password:u},L.info("setLoginProxy proxyAddress: "+o),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=21;break}return e.next=19,n.setLoginProxy(f);case 19:e.next=23;break;case 21:return e.next=23,n.setLoginProxyEx(f);case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),r.refreshTokenCallback=function(){var n=(0,C.default)(m.default.mark(function n(r){var a,o,i,s,c,u,f,l;return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,N.getLoginModel)();case 2:if(a=t.sent,!((o=r.param)&&0===o.result&&o.refresh_token_result&&o.refresh_token_result.auth_token)){t.next=34;break}if(L.info("refreshTokenSuccess"),$dispatch(coreUi.changeuportalTokenErr(!1)),coreCommon.dispatchModuleEvent("login",{event:"tokenUpdate",code:0,data:o.refresh_token_result.auth_token}),a.set({authToken:o.refresh_token_result.auth_token}),L.info("[check upgrade] for refresh [token]"),coreAccount.checkUpgrade({isFirstIn:!1,token:o.refresh_token_result.auth_token}),"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME||window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=17;break}return t.next=14,coreTup.getOfflineFileInstance();case 14:i=t.sent,s=new e(o.refresh_token_result.auth_token,"base64").toString(),i.refreshToken(s);case 17:if(L.info("refreshToken update stg info"),c=o.refresh_token_result.stg_account,u=o.refresh_token_result.stg_pwd,!c||!u){t.next=30;break}return a.set({stgAccount:c}),t.next=24,coreSecurity.getPasswordManager();case 24:if(f=t.sent,t.t0=u,!t.t0){t.next=29;break}return t.next=29,f.setPassword("stgPassword",u);case 29:(0,y.updateStgAuthInfo)({account:c,password:u});case 30:a.isHWUC||coreContact.refreshTocken(),coreCwmp.cwmpConfigToken().then(function(){L.info("refresh cwmp [token] sucess")},function(){L.info("refresh cwmp [token] failed")}),t.next=40;break;case 34:if(L.info("refresh failed "+o.result+" isRepeateCall"+window.isRepeateCall),!window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=38;break}return L.info("it welink refresh [token] no use here"),t.abrupt("return");case 38:l=9===o.result&&!0||!1,coreConf.UportalTokenErr(l);case 40:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}(),r.switchProxy=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.proxyUtil.switchProxy());case 1:case"end":return e.stop()}},e,t)})),r.resetProxy=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.proxyUtil.resetProxy());case 1:case"end":return e.stop()}},e,t)})),r.loginToUportal=(0,C.default)(m.default.mark(function e(){var n,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.innerLoginToUportal();case 2:if(n=e.sent,!n.result){e.next=5;break}return e.abrupt("return");case 5:if(n.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||n.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED){e.next=7;break}return e.abrupt("return",(0,b.LoginError)(n));case 7:return e.next=9,coreAccount.getLoginModel();case 9:if(a=e.sent,!(o=a.isResume)){e.next=13;break}return e.abrupt("return",(0,b.LoginError)(n));case 13:if(!coreCommon.isMobile()){e.next=15;break}return e.abrupt("return",(0,b.LoginError)(n));case 15:return e.next=17,r.switchProxy();case 17:return e.next=19,r.innerLoginToUportal();case 19:if(n=e.sent,n.result){e.next=24;break}return e.next=23,r.resetProxy();case 23:return e.abrupt("return",(0,b.LoginError)(n));case 24:case"end":return e.stop()}},e,t)})),r.innerLoginToUportal=(0,C.default)(m.default.mark(function e(){var n,a,o,i,s,c,u,f,l,d,p,h,g,v,_,C,w,S,I,E;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return n=e.sent,a=n.account,o=n.displayAccount,i=n.serverUportalAddress,s=n.serverUportalPort,c=n.isResume,u=n.tenantid,f=n.loginRecordList,l=n.sipLoginOnly,d=n.password,L.info("<account_login><3_uportal>begin"),e.next=7,coreSecurity.getPasswordManager();case 7:if(p=e.sent,window.isHubEnv){e.next=12;break}return e.next=11,p.getPassword("password");case 11:d=e.sent;case 12:if("Workplace"!==window.CLIENTCONFIG.NEW_APP_NAME||l){e.next=55;break}h=void 0,g=0;case 15:if(!(g<f.length)){e.next=22;break}if(u!==f[g].tenantid){e.next=19;break}return h=f[g],e.abrupt("break",22);case 19:g++,e.next=15;break;case 22:if(isNullOrEmpty(h)&&window.isHubEnv&&(h={account:a},o=a),!h){e.next=55;break}return v=h.thirdcertype?h.tenantid:"",L.info("sso login,tenantcn:"+handlePhoneNumber(h.tenantcn)+",thirdcertype:"+h.thirdcertype),e.next=28,coreAccount.ssoLogin({loginName:o,tenantid:v});case 28:if(_=e.sent,n.crypt_token=_&&_.recv_body.crypt_token,!_.result||!_.recv_body.crypt_token){e.next=41;break}if(n.user_ticket=_.recv_body.crypt_token,o=h.account,isNullOrEmpty(_.recv_body.meetingurl)){e.next=38;break}return e.next=36,coreAccount.getUrlHost(_.recv_body.meetingurl);case 36:i=e.sent,n.serverUportalAddress=i;case 38:n.isOAuth=!0,e.next=55;break;case 41:C=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,e.t0=parseInt(_.code),e.next=1101===e.t0?45:1103===e.t0?47:1146===e.t0?49:51;break;case 45:return C=constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",53);case 47:return C=constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR,e.abrupt("break",53);case 49:return C=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED,e.abrupt("break",53);case 51:return C=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,e.abrupt("break",53);case 53:return L.info("<account_login><3_uportal>end ok/failed"),e.abrupt("return",{result:!1,errorCode:C,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c});case 55:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=60;break}o=window.getLinkSmcUportalAccount?window.getLinkSmcUportalAccount:window.linkSmcW3Acc,d=window.getLinkSmcUportalPassword?window.getLinkSmcUportalPassword:window.linkSmcW3Pas,e.next=63;break;case 60:if(window.CLIENTCONFIG.ISBIGWIN){e.next=63;break}return e.next=63,r.IP.loadLastUportalInfo(i);case 63:w=i,r.IP.value.length>0&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&(L.info("[ loginToUportal ] login replace ip"),w=r.IP.value),S=void 0,I=2;case 67:if(!(I>0)){e.next=121;break}return L.info("[ loginToUportal ] login serverAddress:"+w+", serverPort:"+s),e.next=71,r.uportalLogin({loginAccount:o,password:d,serverAddress:w,serverPort:s});case 71:if(E=e.sent,L.info("[ loginToUportal ] result:"+E.result+";reloginCount:"+I),0!==E.result){e.next=80;break}return e.next=76,r.dealWithUportalLoginSuccess(E,w,o);case 76:return S=e.sent,e.abrupt("break",121);case 80:if(E.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_CA_VERIFY_FAILED){e.next=91;break}return e.next=83,r.dealWithUportalLoginFailed(E,o);case 83:return e.next=85,r.dealWithUportalLoginFailedAuth(a,d,w,s);case 85:if(S=e.sent,S.result){e.next=89;break}return L.info("[ loginToUportal ] download ca failed, exit login loop"),e.abrupt("break",121);case 89:e.next=119;break;case 91:if(E.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED){e.next=100;break}return I--,e.next=95,r.dealWithUportalLoginFailed(E,o);case 95:return S=e.sent,L.info("[ loginToUportal ] user or password wrong, exit login loop"),e.abrupt("break",121);case 100:if(E.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_SERVER_REDIRECT){e.next=113;break}return e.next=103,r.dealWithUportalLoginFailedRedirect(E,a,d);case 103:if(S=e.sent,!S.result||!S.serverInfo){e.next=109;break}w=S.serverInfo.address||w,s=S.serverInfo.port||s,e.next=111;break;case 109:return L.info("[ loginToUportal ] 302 failed, exit login loop"),e.abrupt("break",121);case 111:e.next=119;break;case 113:return e.next=115,r.dealWithUportalLoginFailed(E,o);case 115:S=e.sent,w=i,I--,L.info("[ loginToUportal ] reloginCount:"+I);case 119:e.next=67;break;case 121:return L.info("<account_login><3_uportal>end",S.result),e.abrupt("return",S);case 123:case"end":return e.stop()}},e,t)})),r.dealWithUportalLoginSuccess=function(){var e=(0,C.default)(m.default.mark(function e(n,a,o){var i,s,c,u,f,l,d,p,h,g,v;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:if(i=e.sent,s=i.sipLoginOnly,c=i.isOAuth,u=i.isResume,s||c||"Workplace"!==window.CLIENTCONFIG.NEW_APP_NAME||window.isHubEnv){e.next=6;break}return e.abrupt("return",r.dealWithAccountMutex());case 6:return x.actionGetCorpResourceAtomic.reset(),x.actionGetCorpResourceAtomic.wait(),f=n.uportal_authorize_result,l=f.user_name,d=f.onebox_app_id,p=f.onebox_server_addr,h=f.corp_id,p&&(h=h||"",coreIm.setOfflineFileConfig(!0,{onebox_app_id:d,onebox_server_addr:p,corp_id:h})),i.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,account:l||(c?i.account:o)}),e.next=14,r.updateSiteInfo(n);case 14:if(g=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,resultParams:[1,u?1:0],isTrackTimeCosts:!0}),i.isInUportalLogin=!1,g&&g.serverUportalAddress&&r.IP.value!==g.serverUportalAddress&&(window.CLIENTCONFIG.ISBIGWIN||r.IP.saveLastUportalInfo(a,g.serverUportalAddress),L.info("uportalAddrUpdate")),window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||window.isPluginEnv){e.next=23;break}if(!(0,O.checkIsFirstLogin)()||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=23;break}return i.setLoginStatus(!1,!1),(0,O.firstLoginChangePassword)(),e.abrupt("return",{result:!1,errorCode:"fistLoginReject",errorType:constant.LOGIN_ERROR_TYPE.common,isResume:u});case 23:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=36;break}if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=29;break}return e.next=28,window.isFloatWindow;case 28:e.t0=e.sent;case 29:if(!(v=e.t0)){e.next=34;break}L.info("the window is float "),e.next=36;break;case 34:return L.error("has no activity, login err!!!"),e.abrupt("return",{result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common});case 36:if(!window.isHubEnv||i.isIwb){e.next=39;break}return i.setLoginStatus(!1,!1),e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT,errorType:constant.LOGIN_ERROR_TYPE.common,isResume:u});case 39:return e.abrupt("return",{result:!0});case 40:case"end":return e.stop()}},e,t)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.dealWithUportalLoginFailedRedirect=function(){var e=(0,C.default)(m.default.mark(function e(n,a,o){var i,s,c,u,f,l,d,p,h,g;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:if(i=e.sent,s=n.uportal_authorize_result.redirect_url,i.OAuthUrl=s,L.info("[ O[Auth] ] enter the third ticket [auth], url:",desensitive(s)),"Huawei Meeting"!==window.CLIENTCONFIG.NEW_APP_NAME||-1!==s.indexOf("cloudportal")||window.isHubEnv){e.next=8;break}return e.abrupt("return",r.dealWithAccountMutex());case 8:if(i.isOAuth=!0,c=void 0,u=void 0,-1===s.indexOf("cloudportal")){e.next=23;break}if(f=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(l=f.exec(s))){e.next=19;break}d=l[1],p=l[2],h=l[3],c=d||p,u=h&&h||0,e.next=20;break;case 19:return e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:i.isResume});case 20:i.isOAuth=!1,e.next=30;break;case 23:return e.next=25,(0,T.getOAuthTicket)(a,o);case 25:return g=e.sent,e.next=28,(0,T.getOAuthAccount)(g);case 28:i.account=e.sent,i.user_ticket=g;case 30:return e.abrupt("return",{result:!0,serverInfo:{address:c,port:u}});case 31:case"end":return e.stop()}},e,t)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.dealWithUportalLoginFailedAuth=function(){var e=(0,C.default)(m.default.mark(function e(n,r,a,o){var i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,s="",c=!1,e.next=5,(0,N.getLoginModel)();case 5:if(u=e.sent,f=function(){var e=(0,C.default)(m.default.mark(function e(s){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.ret){e.next=5;break}return L.info("user click to start login download cacert"),e.next=4,(0,x.startLoginDownLoadCaCert)({account:n,password:r,serverAddress:a,serverPort:o});case 4:i=e.sent;case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=10,window.confirm(language.CA_CERT_IS_NOT_TRUSTED).then(f);case 10:e.next=14;break;case 12:return e.next=14,window.confirm(language.CA_CERT_IS_NOT_TRUSTED,!0).then(f);case 14:return null===i?(L.info("user cancel download cacert files"),c=!1,s="USER_CANCEL_DOWNLOAD_CA_CERT"):i&&0===i.result?(L.info("Download cacert success, re-login to uportal"),c=!0,s=""):(L.info("download cacert files failed"),c=!1,s=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR),e.abrupt("return",{result:c,errorCode:s,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u.isResume});case 16:case"end":return e.stop()}},e,t)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),r.dealWithUportalLoginFailed=function(){var e=(0,C.default)(m.default.mark(function e(n,a){var o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return o=e.sent,window.CLIENTCONFIG.ISBIGWIN||r.IP.saveLastUportalInfo("",""),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,resultParams:[0,n.result,o.isResume?1:0],isTrackTimeCosts:!0}),o.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_FAILED,account:o.isOAuth?o.account:a}),L.error("baseLogin:loginUportal result=",n.result),o.isInUportalLogin=!1,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.uportalLoginFailed(n.result),e.abrupt("return",{result:!1,errorCode:n.result,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:o.isResume});case 10:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),r.dealWithAccountMutex=(0,C.default)(m.default.mark(function e(){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return n=e.sent,n.isInUportalLogin=!1,n.setLoginStatus(!1,!1),L.info("[ loginToUportal ] login fail. workplace account can not login on huawe meeting"),alert(language.LOGIN_ERR_DISTINGUISH_HUAWEIMEETING_OR_WORKPLACE),e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DISTINGUISH_HUAWEIMEETING_OR_WORKPLACE,errorType:constant.LOGIN_ERROR_TYPE.common,isResume:n.isResume});case 8:case"end":return e.stop()}},e,t)})),r.IP=new k,r.proxyUtil=new R,r}return(0,p.default)(n,t),n}(E.default),D=void 0;t.getUportalApi=function(){return isNullOrEmpty(D)&&(D=new M),D}}).call(t,n(132).Buffer)},229:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTempMediaxPort=t.updateTempMediaxAddress=t.updateTempSipGetState=t.updateTempSipPwd=t.getNickName=t.saveNickName=t.updateTempSipNick=t.updateTempSipAccount=t.updateTempSipPort=t.updateTempSipServer=t.buildStg=t.clearFireWallStore=t.saveFireWall=t.updateFirewallMode=t.detectFireWall=t.checkDetectFireWall=t.resumeAllSipService=t.stopSipRefresh=t.startSipRefresh=t.dealPcLogout=t.dealPcLogin=t.ipCallConfig=t.stopLocalServer=t.reLoginSipserver=t.unEnableBFCP=t.sipserverDeregister=t.clearnsipinfo=t.stgBuildforNoName=t.getStgInfo=t.handleSipOnlyJoinConf=t.handleAccountJoinConf=t.handletempsipconfinfo=t.prepareHandletempsipconfinfo=t.registerLoginEvent=void 0;var a=n(69),o=r(a),i=n(127),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=(t.resumeAllSipService=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:return t=e.sent,coreCall.registerCallEvent(),coreCall.registerVideoEvent(),coreConf.getRegisterConfEventAtomic().wait(),e.next=8,coreConf.initializeDataConf();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.checkDetectFireWall=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.updateLocalIp();case 2:return t=e.sent,E.info(" start checkDetectFireWall "),e.next=6,coreDb.queryLoginSetting({key:"firewall"});case 6:if(n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)){e.next=22;break}if(r=JSON.parse(n.value),t!==r.ip){e.next=17;break}return E.info("detectFireWall local has store for ip :"+handleIp(t)),coreConf.setFireWallModeType(r.fireWallMode),N=r.fireWallMode,e.next=15,p(r.fireWallMode);case 15:e.next=20;break;case 17:return E.info("detectFireWall local has no store for ip :"+handleIp(t)),e.next=20,d(t);case 20:e.next=25;break;case 22:return E.info("detectFireWall local has no store for ip :"+handleIp(t)),e.next=25,d(t);case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.detectFireWall=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o,i,s,c,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(f)){e.next=4;break}return e.next=3,window.updateLocalIp();case 3:f=e.sent;case 4:return e.next=6,(0,w.getLoginModel)();case 6:if(t=e.sent,n=t.svnUri,r=t.useIM,a=t.stgUri,o=t.isMultiDeviceLogined,i=t.isMobile,void 0===a||""===a||";"===a||";;"===a||";;;"===a||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=29;break}if(s=void 0,!(c=t.isSupportProxy)){e.next=15;break}s={fire_wall_mode:0,result:0},e.next=18;break;case 15:return e.next=17,(0,_.startFireWallDetect)(n);case 17:s=e.sent;case 18:if(E.info("detectFireWall isSupportProxy:",c),!s||void 0===s.fire_wall_mode){e.next=26;break}return e.next=22,p(s.fire_wall_mode);case 22:return e.next=24,h(f,s.fire_wall_mode);case 24:e.next=27;break;case 26:E.error("firewall detect failed");case 27:e.next=32;break;case 29:E.info("reSetFireWallModeType"),coreConf.reSetFireWallModeType(),(0,_.updateFireWallAndSipInfo)(3);case 32:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),p=t.updateFirewallMode=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.setFireWallModeType(t),N=t,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==t){e.next=5;break}return e.next=5,k();case 5:(0,_.updateFireWallAndSipInfo)(t);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h=t.saveFireWall=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={ip:t,fireWallMode:n},a=(0,o.default)(r),E.info("detectFireWall save "+(0,o.default)({ip:handleIp(t),fireWallMode:n})),coreDb.saveLoginSetting({key:"firewall",value:a});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),g=(t.clearFireWallStore=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("fireWall: clear local store"),coreDb.saveLoginSetting({key:"firewall",value:""});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.buildStg=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o,i,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:if(t=e.sent,n=t.useIM,r=t.fireWallMode,n){e.next=22;break}if(constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==r&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==r){e.next=21;break}return a=t.stgUri,o=t.stgAccount,e.next=9,coreSecurity.getPasswordManager();case 9:return i=e.sent,e.next=12,i.getPassword("stgPassword");case 12:return c=e.sent,E.info("TE mode need buildStgTunnel， building"),e.next=16,(0,_.buildStgTunnel)({stgUri:a,stgAccount:o,stgPassword:c});case 16:if(f=e.sent,f.result){e.next=19;break}return e.abrupt("return",(0,w.LoginError)((0,s.default)({},f,{result:!1,errorCode:w.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:w.ErrorType.uportal})));case 19:e.next=22;break;case 21:E.info("firewall result is ok, no need to buildStgTunnel");case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(408)),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g),m=n(288),_=n(211),C=n(289),w=(n(291),n(165)),S=n(185),I=n(230),E=coreLogger.getLogger("logic")("login/sipServer"),N=2,b=(t.registerLoginEvent=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.setloginNotifyFunc(),E.info("registerLoginEvent, Observer subscribe TempSipConfInfo"),coreCommon.Observer.subscribe("TempSipConfInfo",T);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.prepareHandletempsipconfinfo=function(e){return 34===e.param.result?(window.ToastNew(language.GET_SIP_FAILED_INVALIDE_CONF,2),0):36===e.param.result?(window.ToastNew(language.END_CONFERENCE,2),0):37===e.param.result?(window.ToastNew(language.GET_SIP_FAILED_INPUT_TOO_MUCH_ERROR_PWD,2),0):35===e.param.result?(P(""),0):2===e.param.result?(P(""),0):3===e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):7===e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):33===e.param.result?(window.ToastNew(language.CALL_FAILED_OFFLINE,2),0):40===e.param.result?(window.ToastNew(language.THE_VMR_MEETING_HAS_NOT_YET_STARTED,2),0):39===e.param.result?(window.ToastNew(language.THE_MEETING_HAS_BEEN_LOCKED_DOWN,2),0):32===e.param.result?(window.ToastNew(language.CA_CERT_IS_NOT_TRUSTED_CONNECT_FAILED,2),0):0!==e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):1}),T=t.handletempsipconfinfo=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("handletempsipconfinfo",t.param.result),e.next=3,(0,w.getLoginModel)();case 3:if(n=e.sent,0===t.param.result){e.next=22;break}if($dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),t.param.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT){e.next=22;break}if(E.info("handletempsipconfinfo timeout,clear dns ip"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=21;break}return e.next=12,window.getMeetingDomain();case 12:return r=e.sent,a="",e.next=16,coreDb.queryLoginSetting({key:r});case 16:o=e.sent,o&&o.value&&(a=o.value),a&&(coreDb.saveLoginSetting({key:r,value:""}),coreConf.gettempuserinfo()),e.next=22;break;case 21:(0,_.clearLocalDNSIp)(n.urlOfGetSipInfo);case 22:return e.next=24,F(t.param.result);case 24:if(0!==b(t)){e.next=27;break}return P(""),e.abrupt("return");case 27:if(!(t.param.tempuser_info_result.length<=1)){e.next=30;break}return alert(language.GET_SIP_NOTHING),e.abrupt("return");case 30:if(i=n.sipOnlyType,s=t.param.tempuser_info_result,c=s.conf_id.length,f=n.isSupportAS,constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP!==i&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=52;break}if(!(c!==constant.MEDIA_X_ID_LENGTH&&!f||c===constant.MEDIA_X_ID_LENGTH&&f)){e.next=38;break}return window.confirm(language.CONF_NOT_IN_SAME_DEPARTMENT_AUTO).then(function(){var e=(0,l.default)(u.default.mark(function e(t){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=18;break}return e.next=3,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT);case 3:if(!window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return r={tempSipAccount:s.conf_id},n.set(r),e.next=8,D();case 8:return e.next=10,coreConf.getConfInfoFromDb();case 10:window.goRoute("noLoginJoinConference"),e.next=16;break;case 13:a={tempSipAccount:s.conf_id},n.set(a),coreAccount.noLoginJoinConference();case 16:e.next=19;break;case 18:$dispatch(coreUi.changeEnterConfState(!1));case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return");case 38:return $dispatch(coreUi.changeConfAcsNum(s.access_code)),$dispatch(coreUi.changeConfAcsId(s.conf_id)),e.next=42,coreConf.toggleChangeConfAcsPas(s.conf_pwd);case 42:return $dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),d={tempConfInfo:{chairman_pwd:s.chairman_pwd,user_role:s.user_role}},n.set(d),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),window.CLIENTCONFIG.ISMOBILE?$dispatch(coreUi.changeCurConfPage("mEnterConfPage")):$dispatch(coreUi.changeCurConfPage("Join")),coreConf.oneKeyEnterConf(s.access_code,s.conf_id,s.conf_pwd,!0),e.abrupt("return");case 52:p=s.account_info,isNullOrEmpty(p.account)?O(s):y(s);case 54:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=t.handleAccountJoinConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l,d,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.account_info,r={conf_id:t.conf_id,access_code:t.access_code,conf_pwd:t.conf_pwd,user_role:t.user_role,chairman_pwd:t.chairman_pwd},a={tempConfInfo:r,sipLoginOnly:!0},e.next=5,(0,w.getLoginModel)();case 5:return o=e.sent,o.set(a),i=t.user_role,1===i&&window.ToastNew(language.CONF_NO_INVITE_PEMISSIOM_TIP),s=$getState(),c=s.login,f=c.serverAddress,l=c.serverPort,d=n.access_url,isNullOrEmpty(n.second_access_url)||(isNullOrEmpty(d)?d=n.second_access_url:d+=","+n.second_access_url),isNullOrEmpty(d)&&(d=f),$dispatch(coreUi.changeConfTempAcsAccount(n.account)),e.next=16,coreSecurity.getPasswordManager();case 16:return p=e.sent,e.next=19,p.setPassword("password",n.password);case 19:return $dispatch(coreUi.changeTempAcsUportalAddress(d)),$dispatch(coreUi.changetempAcsUportalPort(l)),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),e.next=25,coreAccount.login({isResume:!1,isTempLogin:!0});case 25:$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=t.handleSipOnlyJoinConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l,d,p,h,g,v,C;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.next=3,x(t.site_info);case 3:return r=e.sent,e.next=6,(0,w.getLoginModel)();case 6:return a=e.sent,o={conf_id:t.conf_id,access_code:t.access_code,conf_pwd:t.conf_pwd},"supportRest"===t.site_info[0].tms_account&&(n=!1),window.CLIENTCONFIG.ISBIGWIN&&(n=!0),i={sipAccount:t.sip_account,sipDomain:t.sip_domain,sipImpi:t.sip_impi,sipPasswordType:t.password_type,sipServerAddress:t.site_info[0].access_server[0].sip_uri.split(":")[0],sipServerPort:parseInt(t.site_info[0].access_server[0].sip_uri.split(":")[1]),sipTlsServerAddress:isNullOrEmpty(t.site_info[0].access_server[0].sip_tls_uri)?"":t.site_info[0].access_server[0].sip_tls_uri.split(":")[0],sipTlsPort:isNullOrEmpty(t.site_info[0].access_server[0].sip_tls_uri)?"0":parseInt(t.site_info[0].access_server[0].sip_tls_uri.split(":")[1]),sipStgUri:t.site_info[0].access_server[0].stg_info.sip_stg_uri,sipUri:t.site_info[0].access_server[0].sip_uri,svnUri:r.svnUri,stgUri:r.stgUri,stgAccount:r.stgAccount,tempsipinfo:t,tempConfInfo:o,sipLoginOnly:!0,deployMode:3,sipLoginissiptls:t.site_info[0].access_server[0].is_siptls,sipLoginissrtp:t.site_info[0].access_server[0].is_srtp},t.uportal_uri.indexOf(":")>=0?(i.tempsipserverAddress=t.uportal_uri.split(":")[0],i.tempsipserverPort=parseInt(t.uportal_uri.split(":")[1])):(i.tempsipserverAddress=t.uportal_uri,i.tempsipserverPort=8443),window.isSupportiDo=n,E.info("handletempsipconfinfo isSupportiDo: "+window.isSupportiDo),a.set(i),e.next=17,coreSecurity.getPasswordManager();case 17:if(s=e.sent,e.t0=t.sip_password,!e.t0){e.next=22;break}return e.next=22,s.setPassword("sipPassword",t.sip_password);case 22:if(window.CLIENTCONFIG.ISMOBILE){e.next=71;break}if(c=r.svnUri,void 0===(f=r.stgUri)||""===f||";"===f||";;"===f||";;;"===f||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=66;break}return e.next=27,(0,_.startFireWallDetect)(c);case 27:if(!(l=e.sent)||void 0===l.fire_wall_mode){e.next=58;break}if(coreConf.setFireWallModeType(l.fire_wall_mode),N=l.fire_wall_mode,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==l.fire_wall_mode){e.next=34;break}return e.next=34,k();case 34:if((0,_.updateFireWallAndSipInfo)(l.fire_wall_mode),constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==l.fire_wall_mode&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==l.fire_wall_mode){e.next=55;break}return d=r.stgUri,p=r.stgAccount,e.next=39,coreSecurity.getPasswordManager();case 39:return h=e.sent,e.next=42,h.getPassword("stgPassword");case 42:return g=e.sent,E.info("TE mode need buildStgTunnel， building"),e.next=46,(0,_.buildStgTunnel)({stgUri:d,stgAccount:p,stgPassword:g});case 46:if(v=e.sent,v.result){e.next=53;break}return A(),alert(language.CALL_CALLING_FAILED),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.abrupt("return");case 53:e.next=56;break;case 55:E.info("firewall result is ok, no need to buildStgTunnel");case 56:e.next=64;break;case 58:return E.error("firewall detect failed"),A(),alert(language.CALL_CALLING_FAILED),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.abrupt("return");case 64:e.next=69;break;case 66:E.info("reSetFireWallModeType"),coreConf.reSetFireWallModeType(),(0,_.updateFireWallAndSipInfo)(3);case 69:e.next=72;break;case 71:E.info("handleSipOnlyJoinConf mobile no need to fireWallDetect");case 72:return C={result:!1},e.prev=73,e.next=76,(0,m.loginToSipServer)();case 76:C=e.sent,e.next=82;break;case 79:e.prev=79,e.t1=e.catch(73),E.error("handleSipOnlyJoinConf loginToSipServer try catch error = "+e.t1);case 82:C&&!1===C.result&&($dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),window.ToastNew(language.ENTER_CONF_FAIL,2),E.info("handleSipOnlyJoinConf loginToSipServer fail exit sipLoginOnly"));case 83:case"end":return e.stop()}},e,void 0,[[73,79]])}));return function(t){return e.apply(this,arguments)}}(),x=t.getStgInfo=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l,d,p,h,g,v,m,_;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",r="",a="",o="",i="",s="",c="",f="",l="",!t||!t[0]){e.next=28;break}d=t[0],p=d.num_of_server,h=d.access_server,g=p-1;case 4:if(!(g>=0)){e.next=20;break}if(h&&h[g]){e.next=7;break}return e.abrupt("continue",17);case 7:n+=h[g].sip_uri,r+=h[g].svn_uri,i+=h[g].stg_info.stg_uri,f+=h[g].stg_info.sip_stg_uri,l+=h[g].stg_info.eserver_stg_uri,s=h[0].stg_info.account,c=h[0].stg_info.password,o||(o=h[g].eserver_uri,a=h[g].httpsproxy_uri),a||(a=h[g].httpsproxy_uri),0!==g&&(n+=";",r+=";",i+=";",f+=";",l+=";");case 17:g--,e.next=4;break;case 20:return v={sipUri:n,svnUri:r,httpsProxy:a,eserverUri:o,stgUri:i,stgAccount:s,stgPassword:c,sipStgUri:f,eserverStgUri:l},e.next=23,coreSecurity.getPasswordManager();case 23:if(m=e.sent,e.t0=c,!e.t0){e.next=28;break}return e.next=28,m.setPassword("stgPassword",c);case 28:return _={sipUri:n,svnUri:r,httpsProxy:a,eserverUri:o,stgUri:i,stgAccount:s,stgPassword:c,sipStgUri:f,eserverStgUri:l},e.abrupt("return",_);case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),A=(t.stgBuildforNoName=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,c,f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:if(a=e.sent,o=(new Date).getTime(),i=void 0,void 0===t||""===t||";"===t||";;"===t||";;;"===t){e.next=8;break}return e.next=8,(0,_.startFireWallDetect)(a.svnUri);case 8:if(constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==N){e.next=16;break}if(void 0===t||""===t||";"===t||";;"===t||";;;"===t){e.next=16;break}return e.next=12,(0,_.buildStgTunnel)({stgUri:t,stgAccount:n,stgPassword:r});case 12:if(c=e.sent,c.result){e.next=16;break}return(0,C.handleUportalLoginFailed)((0,s.default)({},c,{isResume:f})),e.abrupt("return",{result:!1});case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.clearnsipinfo=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("clearsipinfo"),t={sipAccount:"",sipDomain:"",sipImpi:"",sipPassword:"",sipPasswordType:"",sipServerAddress:"",sipServerPort:"",sipStgUri:"",sipUri:"",tempsipinfo:"",tempConfInfo:"",sipLoginOnly:!1,deployMode:"",tempsipserverAddress:"",tempsipserverPort:"",tempSipAccount:"",tempsipPassword:"",sipLoginissiptls:0,sipLoginissrtp:1,tempSipNick:""},e.next=4,(0,w.getLoginModel)();case 4:return n=e.sent,n.set(t),E.info("clearsipinfo finished"),e.next=9,coreSecurity.getPasswordManager();case 9:return r=e.sent,e.next=12,r.setPassword("sipPassword","");case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),L=t.sipserverDeregister=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:return t=e.sent,n=t.sipImpi,E.info("sipserverDeregister"),e.next=7,coreTup.getCallInstance();case 7:if(r=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=13;break}return e.next=11,r.deRegisterForAccount(0);case 11:e.next=15;break;case 13:return e.next=15,r.deRegister(n);case 15:window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(window.setSipState("0"),a=!!window.pcLoginState(),t.isMultiDeviceLogined=a,E.info("isMultiDeviceLogined = "+a)),$dispatch(coreUi.changeDoSipReg(!1));case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),k=(t.unEnableBFCP=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("[ unEnableBFCP ]"),t={media:{enable_bfcp:0}},e.next=4,coreTup.getCallInstance();case 4:return n=e.sent,e.next=7,n.config(t);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reLoginSipserver=function(e){return E.info("[ reLoginSipserver ]"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(0,m.loginToSipServer)():L().then(m.loginToSipServer)},t.stopLocalServer=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("stop local server."),e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,e.next=6,t.stopLocalServer();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.ipCallConfig=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.skipLogin){e.next=2;break}return e.abrupt("return");case 2:return t=(0,I.configIPCallServer)(),e.next=5,coreTup.getCallInstance();case 5:return n=e.sent,e.next=8,n.config(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.dealPcLogin=function(){E.info("multi devices, deal pc login "),M().then(function(e){0===e.result&&(E.info("stop sip refresh success"),L())}),coreCommon.dispatchModuleEvent("sipOtherPCLogin"),coreConf.endPairWithPeripherals({tips:language.PAIR_CLOSED})};window.onlyInitHme=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:return t=e.sent,e.next=5,(0,I.configHMELog)();case 5:return n=e.sent,E.info("sip server login configHmeInfo=",n),e.next=9,t.setHMELog(n);case 9:case"end":return e.stop()}},e,void 0)})),window.onlyDoSipRegister=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("only do sip register."),!window.dontUnregister){e.next=10;break}if(E.info("sim call finish resume sip service."),!window.isOffline){e.next=8;break}return e.next=6,L();case 6:e.next=10;break;case 8:return E.info("sim call finish resume sip service."),e.abrupt("return");case 10:return e.next=12,(0,m.loginToRegSipServer)();case 12:E.info("relogin sipserverLogin end");case 13:case"end":return e.stop()}},e,void 0)}));var R=(t.dealPcLogout=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=t.call,r=n.saveCalleeInfo,a=n.isDoSipReg,E.info("multi devices, deal pc logout ","isDoSipReg:"+a),window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,!0){e.next=8;break}return e.next=5,M();case 5:return e.next=7,R();case 7:return e.abrupt("return");case 8:return(0,S.sipResume)({message:"PcLogout"}),isNullOrEmpty(r)&&window.ToastNew(language.MULTIDEVICE_PC_QUIT,3),e.next=12,coreConf.confctrlInit();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.startSipRefresh=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("start sip refresh."),e.next=3,(0,w.getLoginModel)();case 3:return t=e.sent,n=t.sipImpi,e.next=7,coreTup.getCallInstance();case 7:if(r=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.abrupt("return",r.refreshRegisterForAccount(0));case 10:return e.abrupt("return",r.startRefreshRegister(n));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),M=t.stopSipRefresh=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("stop sip refresh."),e.next=3,(0,w.getLoginModel)();case 3:return t=e.sent,n=t.sipImpi,e.next=7,coreTup.getCallInstance();case 7:if(r=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.abrupt("return",r.stopReForAccount(0));case 10:return e.abrupt("return",r.stopRefreshRegister(n));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),D=(t.updateTempSipServer=function(e){(0,w.getLoginModel)().then(function(t){t.tempsipserverAddress=e})},t.updateTempSipPort=function(e){(0,w.getLoginModel)().then(function(t){t.tempsipserverPort=e})},t.updateTempSipAccount=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:n=e.sent,n.tempSipAccount=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateTempSipNick=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:n=e.sent,n.tempSipNick=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveNickName=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={key:"noLoginNickName",value:t},coreDb.saveLoginSetting(n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getNickName=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"noLoginNickName"});case 2:return t=e.sent,e.next=5,(0,w.getLoginModel)();case 5:n=e.sent,isNullOrEmpty(t)||isNullOrEmpty(t.key)||isNullOrEmpty(t.value)?n.tempSipNick="":n.tempSipNick=t.value;case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),P=t.updateTempSipPwd=function(e){(0,w.getLoginModel)().then(function(t){t.tempsipPassword=e})},F=t.updateTempSipGetState=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:n=e.sent,n.tempsipGetState=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.updateTempMediaxAddress=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:n=e.sent,n.tempMediaxAddress=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateTempMediaxPort=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:n=e.sent,n.tempMediaxPort=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},230:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.serGroupPickupCfg=t.serPointPickupCfg=t.restoreMAAConfControl=t.reConfigVideoAndDataSetting=t.initVideoSettingParam=t.initVideoHardCodeParam=t.configBFCPForTLS=t.configBandwidthLimit=t.configSessionTimer=t.configBFCP=t.configVideo=t.configRTP=t.configMKI=t.configRejectCallType=t.configCall=t.configSip=t.configIPCallServer=t.configHMELog=void 0;var a=n(3),o=(r(a),n(123)),i=r(o),s=n(1),c=r(s),u=n(69),f=r(u),l=n(2),d=r(l),p=n(136),h=n(167),g=coreLogger.getLogger("logic")("common/sipCallConfig"),v=window.CLIENTCONFIG,m=(t.configHMELog=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=10,1===window.CLIENTCONFIG.IS_HME_DEBUG&&(t=200),window.hmeLogSizeMb&&(t=window.hmeLogSizeMb),n={audio_log_level:3,audio_max_size:10,video_log_level:3,video_max_size:t},g.info("HMEConfig =",(0,f.default)(n)),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configIPCallServer=function(){return{log_path:window.LOG_PATH,network:{local_ipv4:window.localIp,user_agent:"WeLink-Mobile"},audio:{audio_codec:"112,9,8,0,98,18",dtmf_mode:1,net_ate_level:2,audio_rfc2198:{switch:1,red_pt:121,red_level:3}},sip:{user_type:1,tls_rootcertpath:"",tls_server_certpath:"",tls_anonymous_enable:0,trans_mode:0}}},t.configSip=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u,f,l,d,h,_,C,w,S,I,E,N,b,T,y,O,x,A,L,k,R,M,D,P,F,U,B,W,G,V,H,$,j,q,Y,K,J,z,Q,X,Z,ee,te,ne=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getLoginModel)();case 2:if(t=e.sent,n=t.sipServerAddress,r=t.sipServerPort,a=t.sipTlsServerAddress,o=t.sipTlsPort,i=t.sipTlsServerBackup1,s=t.sipTlsPortBackup1,u=t.sipTlsServerBackup2,f=t.sipTlsPortBackup2,l=t.sipTlsServerBackup3,d=t.sipTlsPortBackup3,h=t.sipServerBackup1,_=t.sipServerPortBackup1,C=t.sipServerBackup2,w=t.sipServerPortBackup2,S=t.sipServerBackup3,I=t.sipServerPortBackup3,E=t.sipPasswordType,N=t.sipOutgoingAccCode,b=t.fireWallMode,T=t.sipDomain,y=t.serverAddress,O=t.sipLoginissiptls,x=t.sipLoginOnly,A=t.tempSipNick,L=t.sipTransMode,k=t.isSupportCACertCheck,R=t.sipWhiteList,M=t.deployMode,g.info("config sip param",n,r,h,_,C,w,S,I,a,o,i,s,u,f,l,d,desensitive(E),N,b,T,y),D=$getState().conf,P=D.confTempAcsNick,F=D.confTempAcsAccount,U=constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_LINE,B=window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:constant.USER_AGENT.PC,U=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===b?constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG:constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN===b?constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_INNERSVN:constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_LINE,g.info("config sip stgModeForCall "+U+", 0:sbc,1:stg,2:svn,3:butt"),window.CLIENTCONFIG.USE_IM||(B=window.CLIENTCONFIG.ISMOBILE?"Huawei TE Mobile":"Huawei TE Desktop"),g.info("config sip deployMode "+M),M===constant.MEETING_NET_TYPE.SMC_MEETING&&(B="CloudLink SoftClient"),1===window.SERVERCONFIG.HWUC&&(T=n),g.info("serverAddress ="+y+", sipServerAddress ="+n+", sipDomain"+T+", isForTempLogin = "+ne),W=coreCommon.isHuaweiCloud(y),ne&&(W=!0),x&&(W=1===O),G={account_pwd_type:parseInt(E)||0,account_label_name:isNullOrEmpty($getState().myInfo.name)?$getState().myInfo.account:$getState().myInfo.name},g.info("config sip account_label_name default "+isNullOrEmpty(G.account_label_name)+" "+isNullOrEmpty($getState().myInfo.name)+" "+isNullOrEmpty($getState().myInfo.account)),ne&&(g.info("config sip account_label_name forTempLogin "),G={account_pwd_type:parseInt(E)||0,account_label_name:isNullOrEmpty(P)?F:P}),x&&!isNullOrEmpty(A)&&(g.info("config sip account_label_name sipLoginOnly "),G={account_pwd_type:parseInt(E)||0,account_label_name:A}),!isNullOrEmpty(G.account_label_name)||x){e.next=29;break}return g.info("config sip account_label_name from contactModule "),e.next=25,coreContact.getContactByAccount(t.account);case 25:V=e.sent,g.info("config sip account_label_name from contactModule success"),G.account_label_name=getContactName(V),g.info("config sip account_label_name from util function");case 29:if(H="",isNullOrEmpty(G.account_label_name)||(H=G.account_label_name.length<=2?G.account_label_name.substr(0,1)+"**":G.account_label_name.substr(0,1)+"**"+G.account_label_name.substr(-1)),g.info("esight config siptls is null,use uportal siptlsmode is "+O+",account_label_name = "+H),W=1===O,U===constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG&&(W=!1),$=0,window.CLIENTCONFIG.ENABLE_IT_MEETING&&(W=!0,$=1),0===L&&(k=!1),j=W?1:L||0,g.info("config sip trans_mode : "+j+" , 1: tls: 0: udp"),q="",Y="",K="",J="",z="",Q="",X="",Z="",o>0&&O&&U!==constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG?(q=a,Y=o,K=i,J=s,z=u,Q=f,X=l,Z=d):(q=n,Y=W?5061:r||5060,K=h,J=W?5061:_||5060,z=C,Q=W?5061:w||5060,X=S,Z=W?5061:I||5060),g.info("sipTlsServerAddress , sipLoginissiptls : "+O+" realSipServerAddress:"+q+" , realSipServerPort : "+Y),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=56;break}return g.info("[IT-Meeting] update local IP before sip register."),$=0,e.next=54,window.updateLocalIp(!0);case 54:e.next=59;break;case 56:return g.info("config sip update local IP before sip register."),e.next=59,window.updateLocalIp(!0);case 59:if(g.info("config sip update local IP : "+handleIp(window.localIp)),ee=window.localIp,window.CLIENTCONFIG.ISBIGWIN){e.next=65;break}return e.next=64,m(q,Y);case 64:ee=e.sent;case 65:return te={log_path:window.LOG_PATH,network:{sip_svr_addr:T,sip_svr_port:Y,backup1_addr:isNullOrEmpty(K)?"":T,backup1_port:Y,backup2_addr:isNullOrEmpty(z)?"":T,backup2_port:Y,backup3_addr:isNullOrEmpty(X)?"":T,backup3_port:Y,local_ipv4:ee,local_sip_port:parseInt(v["Device.ComCfg.Sip.LocalPort"]),user_agent:B,force_dereg_disconnect_tls:1,net_environment:1===window.SERVERCONFIG.HWUC?8:0,proxy_addr:q,proxy_port:parseInt(Y),proxy_backup1_addr:K,proxy_backup1_port:parseInt(J),proxy_backup2_addr:z,proxy_backup2_port:parseInt(Q),proxy_backup3_addr:X,proxy_backup3_port:parseInt(Z)},account:G,call:{param_outgoingcode:N,cfg_firewall_mode:U,cfg_welink_symbol:window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?1:0,call_anonymous_enable:W?1:k?1:0,call_ipcall_enable:0,sip_keepalive_time:parseInt(v["Device.ComCfg.Sip.sipKeepaliveTime"]),bfcp_keepalive_time:parseInt(v["Device.ComCfg.Media.BfcpKeepaliveTime"])},sip:{audvie_mode:1,user_type:window.SERVERCONFIG.HWUC?0:1,trans_mode:j,tls_anonymous_enable:$,root_cert_path:window.EXEC_PATH+"\\",tls_version:7,regist_timeout:window.CLIENTCONFIG.ISBIGWIN?600:parseInt(v["Device.ComCfg.Sip.RegistExpires"]),white_list:R||"",white_list_count:R&&R.length>0?R.length:0,pai_priority:1,check_cseq:window.CLIENTCONFIG.ISBIGWIN?0:1},conf:{use_maa_confctrl:0,enable_ms_dataconf:1,ido_over_bfcp_version:parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.IsIdoBfcpRetransmission"])}},g.info("sip ido retransmission flag bit",parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.IsIdoBfcpRetransmission"])),e.abrupt("return",te);case 68:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,d.default)(c.default.mark(function e(t,n){var r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=window.localIp,!window.CLIENTCONFIG.ISWIN){e.next=10;break}return g.info("checkLocalIpAddr for win only, use tup api"),e.next=5,coreTup.getToolInstance();case 5:return a=e.sent,e.next=8,a.tupToolGetLocalIp(t,n,!1);case 8:o=e.sent,0===o.result&&""!==o.param.local_ip?(g.info("checkLocalIpAddr:tup ret:"+handleIp(r)),"0.0.0.0"===o.param.local_ip||"127.0.0.1"===o.param.local_ip||o.param.local_ip.startsWith("169.254.")?(r=window.localIp,g.info("checkLocalIpAddr: tup ret invalide, user nodejs:"+handleIp(r))):(r=o.param.local_ip,g.info("checkLocalIpAddr: user tup:"+handleIp(r)))):(r=window.localIp,g.info("checkLocalIpAddr: user nodejs:"+handleIp(r)));case 10:return g.info("checkLocalIpAddr: "+handleIp(r)),e.abrupt("return",r);case 12:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),_=(t.configCall=function(){var e=Number($getState().setting.micAgc),t=parseInt(v["Device.ComCfg.Media.StreamAutomaticallyHangUp"]),n=window.CLIENTCONFIG.ISMOBILE?window.DEFAULT_CAMERA_IMG_PATH:window.VIDEO_DEFAULT_IMG+"default_camera.bmp",r=Number($getState().call.cameraNum),a={audio:{audio_codec:"112,9,8,0,98,18",dtmf_mode:1,net_ate_level:2,send_empty_audio_pkt:1,netate_redpt_switch:0,audio_pkt_red_num_in_stg:{opus_repeat_num:1,other_repeat_num:2},audio_rfc2198:{switch:1,red_pt:121,red_level:3},audio_anr:3,audio_aec:1,audio_agc:e,ilbcmode:20,audio_band_limit:{lowest_band_width:64,lowest_audio_codec:"112,98,18",lower_band_width:384,lower_audio_codec:"112,98,18,9,8,0"},audio_port_range:{min_port:10002,max_port:65528}},media:{video_preview_type:0===r?0:2,lowbandwidth_ability:1,loose_port_nego:1,chan_upd_dyn:1,video_default_image:0===r?n:"",enable_audio_bfcp:window.isSupportiDo?1:0},call:{stream_detect_enable:t,stream_detect_inrval:5}};return g.info("configCallInfo =",(0,f.default)(a)),a},t.configRejectCallType=function(){var e={sip:{reject_type:2}};return g.info("config[sip][reject_type] = ",e),e},t.configMKI=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(v["Device.ComCfg.Media.EncryptCalloutUseMKI"]),n={media:{srtp_mki:t}},g.info("configMKIInfo =",(0,f.default)(n)),e.abrupt("return",n);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configRTP=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.sipLoginissrtp,r=t.sipLoginOnly,a=t.srtpMode,o=a,o=""!==v["Device.ComCfg.Media.priorityRtp"]?parseInt(v["Device.ComCfg.Media.priorityRtp"]):1===n?1:0,i=2,0===o&&(i=1),r&&(o=1===n?1:0),s={media:{srtp_mode:o,rtp_priority:i,merge_srtp_rtp:1,support_ec_direction:1}},g.info("configRTPInfo =",(0,f.default)(s)),e.abrupt("return",s);case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configVideo=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,I();case 3:return t.media=e.sent,n={},n.media=S(),r={},r.media=E(),a={},a.media=N(),o={media:{}},o.media=(0,i.default)({},t.media,n.media,r.media,a.media),g.info("configVideoInfo =",(0,f.default)(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configBFCP=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,C();case 3:return t.media=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),C=(t.configSessionTimer=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(v["Device.ComCfg.Sip.enableSessionTimer"]),n=parseInt(v["Device.ComCfg.Sip.SessionTime"]),r={sip:{sessiontimer_enable:t,session_time:n}},g.info("config[Session]TimerInfo =",desensitive(r)),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configBandwidthLimit=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(v["Device.ComCfg.Media.BandwidthLimit"]),n={media:{video_bitrate_limited:t}},g.info("configBandwidthLimitInfo =",n),e.abrupt("return",n);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u,f,l,d,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0,s=void 0,s=$getState().login,t=v.DATA_CONFIG_MEDIA_LEVEL,n=v.DATA_CONFIG_MEDIA_MAX_MBPS,r=v.DATA_CONFIG_MEDIA_MAX_BR,a=v.DATA_CONFIG_MEDIA_MAX_FS,o=4096,i=0,!window.CLIENTCONFIG.ISMOBILE){e.next=24;break}return e.next=11,coreTup.getCallInstance();case 11:if(u=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=19;break}return e.next=15,u.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 15:f=e.sent,0===f.result?(g.info("[IT-Meeting] mediaGetHdaccelerate success, hdencoder = "+f.param.hdaccelerate.hdencoder),i=f.param.hdaccelerate.hdencoder):g.error("[IT-Meeting] mediaGetHdaccelerate failed, result = "+f.result),e.next=23;break;case 19:return e.next=21,u.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 21:l=e.sent,0===l.result?(g.info("mediaGetHdaccelerate success, hdencoder = "+l.param.hd_accelerate.hdencoder),i=l.param.hd_accelerate.hdencoder):g.error("mediaGetHdaccelerate failed, result = "+l.result);case 23:o=b(i);case 24:return g.info("The default bandWidth is: "+o),d=void 0,window.CLIENTCONFIG.ISMOBILE?(o>=384?(t=22,n=27e3,r=v.DATA_CONFIG_MEDIA_MAX_BR,a=9e3):(t=20,n=10800,r=v.DATA_CONFIG_MEDIA_MAX_BR,a=3600),d={table_num:4,param_set:[{band_width:300,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:300,min_bit_rate:32},{band_width:192,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]}):(t=31,n=9e4,r=v.DATA_CONFIG_MEDIA_MAX_BR,a=9e3,d={table_num:6,param_set:[{band_width:512,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:512,min_bit_rate:32},{band_width:384,width:1920,height:1080,max_frame_rate:3,min_frame_rate:1,max_bit_rate:384,min_bit_rate:32},{band_width:256,width:1920,height:1080,max_frame_rate:2,min_frame_rate:1,max_bit_rate:256,min_bit_rate:32},{band_width:192,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]},window.CLIENTCONFIG.ISBIGWIN&&(t=40,n=246e3,r=v.DATA_CONFIG_MEDIA_MAX_BR,a=8192,d={table_num:8,param_set:[{band_width:1536,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:1536,min_bit_rate:32},{band_width:1152,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:1152,min_bit_rate:32},{band_width:512,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:512,min_bit_rate:32},{band_width:384,width:1920,height:1080,max_frame_rate:3,min_frame_rate:1,max_bit_rate:384,min_bit_rate:32},{band_width:256,width:1920,height:1080,max_frame_rate:2,min_frame_rate:1,max_bit_rate:256,min_bit_rate:32},{band_width:192,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]})),p=512,p=o<384?o/2:o<512?192:o<768?256:o<1152?384:o<2048?512:o<2880?768:o<3840?1536:o<5760?1920:o/2,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===s.fireWallMode&&(window.CLIENTCONFIG.ISMOBILE?p=o>=384?192:o/2:o>=768&&o<1024?p=192:o>=1024&&o<=4096&&(p=256)),e.abrupt("return",w(s,t,a,n,p,d));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),w=function(e,t,n,r,a,o){var i=window.CLIENTCONFIG,s=parseInt(i["Device.ComCfg.Media.BFCPMode"]);2===s&&(s=1);var c=coreCommon.isHuaweiCloud(e.serverAddress),u=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===e.fireWallMode,l=parseInt(i["Device.ComCfg.Media.DataNetRat"]),d=parseInt(i["Device.ComCfg.Media.DataKeyFrameIntervalNetRat"]);window.CLIENTCONFIG.ISMOBILE&&(l=5,d=0);var p=u?0:parseInt(i["Device.ComCfg.Media.DataHarq"]),h=c?0:parseInt(i["Device.ComCfg.Media.DataARS"]),v=c?0:parseInt(i["Device.ComCfg.Media.DataARSFrameSize"]),m=c?0:parseInt(i["Device.ComCfg.Media.DataARSFrameRate"]),_=c?0:parseInt(i["Device.ComCfg.Media.DataARSBitRate"]),C=c?0:parseInt(i["Device.ComCfg.Media.DataArsFec"]),w=c?0:parseInt(i["Device.ComCfg.Media.DataShaping"]),S=u?512:384,I={enable_bfcp:1,enable_data:1,aux_fir_response_interval:500,bfcp_param:{floor_ctrl:3,setup:3,trans_type:s},bfcp_port_range:{min_port:5070,max_port:5090,ulTlsPort:5071},data_framesize:{decode_framesize:16,framesize:3},data_framerate:{frame_rate:3,min_frame_rate:1},data_port_range:{min_port:10006,max_port:65532},data_level:{level:t,max_fs:n,max_mbps:r},data_datarate:{max_bw:a},tmmbr_threshold:{data_limit:S,min_data_bandwidth:64,min_video_bandwidth:64},data_codec:"106",data_arq:parseInt(i["Device.ComCfg.Media.DataArq"]),data_harq:p,data_errorcorrecting:i.DATA_CONFIG_MEDIA_DATA_ERRORCORRECTING,data_net_lossrate:l,data_keyframe_interval:d,data_ars:{ars:h,ars_ctrl_framesize:v,ars_ctrl_framerate:m,ars_ctrl_bitrate:_,ars_ctrl_fec:C,ars_data_shaping:w},data_h264_quality_level_table:{param_setnumber:4,quality_level_param_set:[{codec_name:"",pt:105,profile_idc:66,packet_mode:1,level_asymmetry:1,priority:3},{codec_name:"",pt:106,profile_idc:66,packet_mode:0,level_asymmetry:1,priority:4},{codec_name:"",pt:107,profile_idc:100,packet_mode:1,level_asymmetry:1,priority:1},{codec_name:"",pt:108,profile_idc:100,packet_mode:0,level_asymmetry:1,priority:2}]}};return I.data_resolution_table=o,g.info("media:BFCP参数 media =",(0,f.default)(I)),I},S=(t.configBFCPForTLS=function(){var e=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,p,v,m,_,C,w,S,I,E,N,b,y,O,x,A,L,k;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.decryptKMC(window.bfcpp);case 2:if(n=e.sent,r=n&&n.param&&n.param.PlainText||"",g.info("configBFCPForTLS mode : "+t+" path: "+window.EXEC_PATH),g.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===r?"failed":"success")),a=window.EXEC_PATH+"/BfcpTLS/",o=window.EXEC_PATH+"/BfcpTLS/server.pem",i=window.EXEC_PATH+"/BfcpTLS/server_key.pem","win"!==window.CLIENTCONFIG.PLATFORM&&"bigwin"!==window.CLIENTCONFIG.PLATFORM||(a=window.EXEC_PATH+"\\BfcpTLS\\",o=window.EXEC_PATH+"\\BfcpTLS\\server.pem",i=window.EXEC_PATH+"\\BfcpTLS\\server_key.pem"),window.CLIENTCONFIG.ISMOBILE){e.next=53;break}return e.next=13,coreDb.queryLoginSetting({key:"importCertificate"});case 13:return s=e.sent,e.next=16,coreDb.queryLoginSetting({key:"certificateName"});case 16:return u=e.sent,"{}"===s&&(s=null),"{}"===u&&(u=null),g.info("_importCertificate : "+s+" _certificateName: "+u),e.next=22,(0,h.loginforverificationCertificateLogic)();case 22:if(f=e.sent,g.info("是否存在:"+f),!f||isNullOrEmpty(s)||isNullOrEmpty(u)){e.next=40;break}if("false"!==s.value||""===u.value){e.next=38;break}return l=T(),e.next=29,coreSecurity.decryptKMC(l);case 29:n=e.sent,r=n&&n.param&&n.param.PlainText||"",g.info("使用导入的证书"),g.info("configBFCPForTLS mode : "+t+" path: "+APP_DATA_PATH),g.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===r?"failed":"success")),a=APP_DATA_PATH+"/ImpBfcpTLS/",o=APP_DATA_PATH+"/ImpBfcpTLS/server.pem",i=APP_DATA_PATH+"/ImpBfcpTLS/server_key.pem","win"!==window.CLIENTCONFIG.PLATFORM&&"bigwin"!==window.CLIENTCONFIG.PLATFORM||(a=APP_DATA_PATH+"\\ImpBfcpTLS\\",o=APP_DATA_PATH+"\\ImpBfcpTLS\\server.pem",i=APP_DATA_PATH+"\\ImpBfcpTLS\\server_key.pem");case 38:e.next=53;break;case 40:if("mac"!==window.CLIENTCONFIG.PLATFORM){e.next=53;break}if(d=window.path.join(window.APP_DATA_PATH,"deviceCertificate"),!fs.existsSync(d)||!fs.lstatSync(d).isDirectory()){e.next=53;break}if(p=window.path.join(d,"p4bfcp.txt"),v=window.path.join(d,"server.pem"),m=window.path.join(d,"server_key.pem"),!(fs.existsSync(p)&&fs.existsSync(v)&&fs.existsSync(m))){e.next=53;break}return _=fs.readFileSync(p).toString(),e.next=50,coreSecurity.decryptKMC(_);case 50:C=e.sent,w=C&&C.param&&C.param.PlainText||"",w&&(g.info("using refreshing device certificate"),r=w,a=d,o=v,i=m);case 53:if(!window.CLIENTCONFIG.ISMOBILE){e.next=83;break}if(g.info(" mobile 使用导入的证书"),S=$getState().login,I=S.mProveName,E=S.mSelectProve,E||""===I){e.next=83;break}return N=window.EXEC_PATH+"/impBfcpTLS",b=window.EXEC_PATH+"/impBfcpTLS/server.pem",e.next=61,(0,h.verificationCertificateLogic)(b);case 61:if(y=e.sent,g.info(" mobile login for is impt vc vcFlag: ",y),!y){e.next=83;break}g.info(" prove is ok "),O=void 0,e.next=72;break;case 69:O=e.sent,e.next=73;break;case 72:O=appService.mReadImptP4BFCP(N+"/p4bfcp.txt");case 73:return e.next=75,coreSecurity.decryptKMC(O);case 75:n=e.sent,r=n&&n.param&&n.param.PlainText||"",g.info("mobile 使用导入的证书"),g.info("configBFCPForTLS mode : "+t+" path: "+N),g.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===r?"failed":"success")),a=window.EXEC_PATH+"/impBfcpTLS/",o=window.EXEC_PATH+"/impBfcpTLS/server.pem",i=window.EXEC_PATH+"/impBfcpTLS/server_key.pem";case 83:return x=t?1:0,A=6,L=0,k={bfcp_tls_param:{bfcp_tls_ctrl_mode:x,tls_version:A,tls_verify_mode:L,root_cert_path:a,srv_cert_file:o,srv_private_kfile:i,srv_private_kfile_pw:r,clt_cert_file:o,clt_private_kfile:i,clt_private_kfile_pw:r}},e.abrupt("return",k);case 88:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=window.CLIENTCONFIG,t=$getState().login,n=t.fireWallMode,r=!1;constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===n&&(r=!0);var a=parseInt(e["Device.ComCfg.Media.VideoNetRat"]),o=parseInt(e["Device.ComCfg.Media.VideoKeyFrameIntervalNetRat"]),i=r?0:parseInt(e["Device.ComCfg.Media.VideoHarq"]);window.CLIENTCONFIG.ISMOBILE&&(a=20,o=150);var s={video_errorcorrecting:e.VIDEO_CONFIG_MEDIA_VIDEO_ERRORCORRECTING,video_arq:parseInt(e["Device.ComCfg.Media.VideoArq"]),video_harq:i,ec_pkt_in_rtp:parseInt(e["Device.ComCfg.Media.EcPktInRtp"]),net_lossrate:a,keyframe_interval:o};return g.info(" media:视频抗丢包配置参数 media =",(0,f.default)(s)),s}),I=(t.initVideoHardCodeParam=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,n=void 0,t=0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=14;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=6,coreTup.getCallInstance();case 6:return r=e.sent,e.next=9,r.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 9:a=e.sent,0===a.result?(g.info("hard code mediaGetHdaccelerate success, hdencoder = "+a.param.hdaccelerate.hdencoder),t=a.param.hdaccelerate.hdencoder):g.error("hard code mediaGetHdaccelerate failed, result = "+a.result),n=b(t);case 12:e.next=23;break;case 14:if(!window.CLIENTCONFIG.ISMOBILE){e.next=23;break}return e.next=17,coreTup.getCallInstance();case 17:return o=e.sent,e.next=20,o.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 20:i=e.sent,0===i.result?(g.info("hard code mediaGetHdaccelerate success, hdencoder = "+i.param.hd_accelerate.hdencoder),t=i.param.hd_accelerate.hdencoder):g.error("hard code mediaGetHdaccelerate failed, result = "+i.result),n=b(t);case 23:return s={},u=0,window.CLIENTCONFIG.ISMOBILE&&1===t&&n>256&&(u=1),l=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.CLIENTCONFIG.ISMOBILE?s.video_hdaccelerate={hd_encoder:u,hd_decoder:0}:(s.video_hdaccelerate={hd_encoder:u,hd_decoder:l},g.info("media:is hddecoder:"+l)),g.info("media:is hdencoder:"+u),g.info("media: media =",(0,f.default)(s)),e.abrupt("return",s);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initVideoSettingParam=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u,l,d,p,h,v,m,_,C,w,S,I,E,N;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0,s=void 0,t=coreCommon.isHuaweiCloud($getState().login.serverAddress),n=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_LEVEL,r=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_MBPS,a=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_BR,o=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_FS,i=4096,s=0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=21;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=18;break}return e.next=12,coreTup.getCallInstance();case 12:return u=e.sent,e.next=15,u.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 15:l=e.sent,0===l.result?(g.info("[IT-Meeting] mediaGetHdaccelerate success, hdencoder = "+l.param.hdaccelerate.hdencoder),s=l.param.hdaccelerate.hdencoder):g.error("[IT-Meeting] mediaGetHdaccelerate failed, result = "+l.result),i=b(s);case 18:g.info("The default bandWidth is: "+i),e.next=31;break;case 21:if(!window.CLIENTCONFIG.ISMOBILE){e.next=30;break}return e.next=24,coreTup.getCallInstance();case 24:return d=e.sent,e.next=27,d.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 27:p=e.sent,0===p.result?(g.info("mediaGetHdaccelerate success, hdencoder = "+p.param.hd_accelerate.hdencoder),s=p.param.hd_accelerate.hdencoder):g.error("mediaGetHdaccelerate failed, result = "+p.result),i=b(s);case 30:g.info("The default bandWidth is: "+i);case 31:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(i<1e3||window.netWorkType===constant.NETWORK_TYPE.TYPE_2G)&&(window.linkSmcIsVideo=!1,g.info("[IT-Meeting] bandwidth < 1000, join conference in audio",window.linkSmcIsVideo)),h=1500,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===$getState().login.fireWallMode&&(h=1280),!window.CLIENTCONFIG.ISMOBILE&&i>=1024&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==$getState().login.fireWallMode&&(n=40),!window.CLIENTCONFIG.ISWIN){e.next=45;break}return n=40,e.next=39,coreConf.registerNativeWndEvent();case 39:return e.next=41,coreConf.getNativeInterface().notifyGetSystemInfo();case 41:return v=e.sent,e.next=44,coreConf.unregisterNativeWndEvent();case 44:v&&(window.cpu_core_num=v.cpu_core_num,window.cpu_proc_num=v.cpu_proc_num,window.cpu_freq_mhz=v.cpu_freq_mhz,2===window.cpu_core_num&&(2===window.cpu_proc_num||window.cpu_freq_mhz<2e3)?(n=21,r=18400,o=920):2===window.cpu_core_num&&4===window.cpu_proc_num&&(n=32),g.info("set decode level by cpu cores and cpu freq:",n));case 45:return window.CLIENTCONFIG.ISMOBILE&&(n=30,r=72e3,o=3600,(t||window.CLIENTCONFIG.ENABLE_IT_MEETING)&&(n=21,r=18400,o=920)),m={video_level:{level:n,max_mbps:r,max_br:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_BR,max_fs:o},sdp_ct:i,video_svc_enable:window.CLIENTCONFIG.USE_MEETING?1:0,data_video_svc_cap:{pktmode:2},video_mtu:h,video_datarate:{max_bw:i},clarity_fluency_enable:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_CLARITY_FLUENCY_ENABLE,video_tatic:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_VIDEO_TATIC,video_h264_force_single_pt:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_H264_FORCE_SINGLE_PT,sec_version:{sec10:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec20:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec21:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec30:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION},video_port_range:{min_port:10004,max_port:65530}},_=void 0,C=void 0,w=void 0,S=void 0,I=void 0,w=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.TmmbrControl"]),S=0,window.CLIENTCONFIG.ISMOBILE?(_={is_video_bw_include_audio:1,is_video_bw_subduct_aux:1,is_h264_hp_same_with_bp:1,is_video_bw_subduct_aux_recv:0},1===s&&i>256&&(S=1),C=S?{table_num:11,param_set:[{band_width:1984,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2304,min_bit_rate:896,adjust_bit_rate:2304},{band_width:1856,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2176,min_bit_rate:896,adjust_bit_rate:2176},{band_width:1472,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1792,min_bit_rate:896,adjust_bit_rate:1792},{band_width:1408,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1728,min_bit_rate:896,adjust_bit_rate:1728},{band_width:960,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1260,min_bit_rate:896,adjust_bit_rate:1433},{band_width:704,width:960,height:544,max_frame_rate:20,min_frame_rate:15,max_bit_rate:896,min_bit_rate:640,adjust_bit_rate:1280},{band_width:448,width:640,height:368,max_frame_rate:20,min_frame_rate:15,max_bit_rate:640,min_bit_rate:448,adjust_bit_rate:900},{band_width:320,width:480,height:272,max_frame_rate:20,min_frame_rate:15,max_bit_rate:448,min_bit_rate:320,adjust_bit_rate:640},{band_width:192,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:320,min_bit_rate:32,adjust_bit_rate:400},{band_width:128,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:192,min_bit_rate:32,adjust_bit_rate:200},{band_width:64,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]}:{table_num:11,param_set:[{band_width:1984,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2304,min_bit_rate:448,adjust_bit_rate:900},{band_width:1856,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2176,min_bit_rate:448,adjust_bit_rate:900},{band_width:1472,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1792,min_bit_rate:448,adjust_bit_rate:900},{band_width:1408,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1728,min_bit_rate:448,adjust_bit_rate:900},{band_width:960,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1260,min_bit_rate:448,adjust_bit_rate:900},{band_width:704,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:896,min_bit_rate:448,adjust_bit_rate:900},{band_width:448,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:640,min_bit_rate:448,adjust_bit_rate:900},{band_width:320,width:480,height:270,max_frame_rate:20,min_frame_rate:15,max_bit_rate:448,min_bit_rate:320,adjust_bit_rate:640},{band_width:192,width:320,height:180,max_frame_rate:20,min_frame_rate:15,max_bit_rate:320,min_bit_rate:192,adjust_bit_rate:400},{band_width:128,width:176,height:98,max_frame_rate:20,min_frame_rate:15,max_bit_rate:192,min_bit_rate:32,adjust_bit_rate:200},{band_width:64,width:176,height:98,max_frame_rate:20,min_frame_rate:15,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]}):(_={is_video_bw_include_audio:1,is_video_bw_subduct_aux:1,is_h264_hp_same_with_bp:1,is_video_bw_subduct_aux_recv:0},C={table_num:11,param_set:[{band_width:1984,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:2304,min_bit_rate:896,adjust_bit_rate:2304},{band_width:1856,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:2176,min_bit_rate:896,adjust_bit_rate:2176},{band_width:1472,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1792,min_bit_rate:896,adjust_bit_rate:1792},{band_width:1408,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1728,min_bit_rate:896,adjust_bit_rate:1728},{band_width:960,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1280,min_bit_rate:896,adjust_bit_rate:1433},{band_width:704,width:960,height:540,max_frame_rate:30,min_frame_rate:22,max_bit_rate:896,min_bit_rate:640,adjust_bit_rate:900},{band_width:448,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:640,min_bit_rate:192,adjust_bit_rate:900},{band_width:320,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:512,min_bit_rate:192,adjust_bit_rate:640},{band_width:192,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:384,min_bit_rate:192,adjust_bit_rate:400},{band_width:128,width:512,height:288,max_frame_rate:15,min_frame_rate:10,max_bit_rate:192,min_bit_rate:96,adjust_bit_rate:200},{band_width:64,width:512,height:288,max_frame_rate:15,min_frame_rate:10,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]},E=window.localStorage.getItem("svc_video_level_tbl_id"),isNullOrEmpty(E)&&(E=0),(E<0||E>=3)&&(E=0),I=constant.SvcResolutionPCTable[E],window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(I=constant.SvcResolutionPCTable[constant.SVCResolutionLevel.STANDARD])),m.video_resolution_table=C,window.CLIENTCONFIG.ISBIGWIN||(m.svc_resolution_table=I),m.video_resolution_adj_num=4,m.fluid_control=w,m.bandwidth_calc_policy=_,N=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,m.video_hdaccelerate={hd_encoder:S,hd_decoder:N},window.CLIENTCONFIG.ISMOBILE?m.video_hdaccelerate={hd_encoder:S,hd_decoder:0}:(m.video_hdaccelerate={hd_encoder:S,hd_decoder:N},g.info("media:视频配置参数(设置降档表相关) media hard code:"+N)),g.info("media:视频配置参数(设置降档表相关) media =",(0,f.default)(m)),e.abrupt("return",m);case 61:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),E=function(){var e=window.CLIENTCONFIG,t=$getState().login,n=t.serverAddress,r=coreCommon.isHuaweiCloud(n),a=r?0:parseInt(e["Device.ComCfg.Media.VideoShaping"]),o={rtp_hdr_ext:1,video_ars:{ars:parseInt(e["Device.ComCfg.Media.VideoARS"]),ars_ctrl_framesize:parseInt(e["Device.ComCfg.Media.VideoARSFrameSize"]),ars_ctrl_framerate:parseInt(e["Device.ComCfg.Media.VideoARSFrameRate"]),ars_ctrl_bitrate:parseInt(e["Device.ComCfg.Media.VideoARSBitRate"]),ars_ctrl_fec:parseInt(e["Device.ComCfg.Media.VideoArsFec"]),ars_data_shaping:a}};return g.info("media:自动降速配置参数 media =",(0,f.default)(o)),o},N=function(){var e={h264_quality_level_table:{param_setnumber:4,quality_level_param_set:[{codec_name:"",pt:105,profile_idc:66,packet_mode:1,level_asymmetry:1,priority:3},{codec_name:"",pt:106,profile_idc:66,packet_mode:0,level_asymmetry:1,priority:4},{codec_name:"",pt:107,profile_idc:100,packet_mode:1,level_asymmetry:1,priority:1},{codec_name:"",pt:108,profile_idc:100,packet_mode:0,level_asymmetry:1,priority:2}]}};return g.info("media:BP/HP参数 media =",(0,f.default)(e)),e},b=(t.reConfigVideoAndDataSetting=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,I();case 3:return t.media=e.sent,e.next=6,coreTup.getCallInstance();case 6:return n=e.sent,e.next=9,n.config(t);case 9:return e.next=11,_();case 11:return r=e.sent,e.next=14,n.config(r);case 14:"android"===window.CLIENTCONFIG.PLATFORM&&(a=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,g.info("android hard decoder enter 1",a),window.isHardDecodeToNative(a));case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.restoreMAAConfControl=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return g.info("restoreMAAConfControl"),t={conf:{use_maa_confctrl:1}},e.next=6,coreTup.getCallInstance();case 6:n=e.sent,n.config(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=4096,n=window.netWorkType;return g.info("The current network type is: "+n+", bSupport Hdacc:"+e),n===constant.NETWORK_TYPE.TYPE_WIFI?t=parseInt(v["Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"]):n===constant.NETWORK_TYPE.TYPE_4G?t=parseInt(v["Device.ComCfg.Media.Mobile.4GTotalBandwidth"]):n===constant.NETWORK_TYPE.TYPE_3G&&(t=parseInt(v["Device.ComCfg.Media.Mobile.3GTotalBandwidth"])),t}),T=function(){g.info("getPFourbfcpLogic");try{var e=window.fs;if(e){var t=APP_DATA_PATH+"/ImpBfcpTLS",n=t+"/p4bfcp.txt";if(e.existsSync(n))return e.readFileSync(n).toString()}}catch(e){g.error("getPFourbfcpLogic",e.toString())}};t.serPointPickupCfg=function(){var e={service:{server_right:{type:7,active_accesscode:v["Device.ComCfg.Service.pointPickupActive"],deactive_accesscode:"",register:0,right:0}}};return g.info("serPointPickupCfg =",(0,f.default)(e)),e},t.serGroupPickupCfg=function(){var e={service:{server_right:{type:6,active_accesscode:v["Device.ComCfg.Service.groupPickupActive"],deactive_accesscode:"",register:0,right:0}}};return g.info("serGroupPickupCfg =",(0,f.default)(e)),e}},235:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildStg=t.startPortDetect=t.startFireWallDetect=t.checkStgReConnect=t.updateStgAuthInfo=t.portDetect=t.fireWallDetect=t.destroyStgTunnel=t.buildStgTunnel=t.updateFireWallAndSipInfo=t.updateStgInfo=t.stgTunnelDisconnected=void 0;var a=n(69),o=r(a),i=n(127),s=r(i),c=n(3),u=r(c),f=n(141),l=r(f),d=n(1),p=r(d),h=n(2),g=r(h),v=(t.startFireWallDetect=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r,a,o=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ startFireWallDetect ]  svnUri: "+t),e.next=3,(0,m.getLoginModel)();case 3:return n=e.sent,e.next=6,coreTup.getUportalInstance();case 6:return r=e.sent,a=new u.default(function(e,a){var i=function(){var t=(0,g.default)(p.default.mark(function t(r){var i;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=r.param,i&&0===i.result?(C.info("[ fireWallDetectResult ] success. The fireWall mode is  ",i.fire_wall_mode),n.fireWallDetectResult=i,e(i)):(C.error("[ fireWallDetectResult ] failed."),a((0,s.default)({},r,{result:!1,errorCode:m.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:m.ErrorType.uportal})));case 2:case"end":return t.stop()}},t,o)}));return function(e){return t.apply(this,arguments)}}();r.setNotifyFunc(360463,i),E(t)}),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.startPortDetect=function(){var e=(0,g.default)(p.default.mark(function e(t,n){var r,a,i,c=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ startPortDetect ] svnUri : "+t+", detectport"+n),e.next=3,(0,m.getLoginModel)();case 3:return r=e.sent,e.next=6,coreTup.getUportalInstance();case 6:return a=e.sent,i=new u.default(function(e,r){var i=function(){var t=(0,g.default)(p.default.mark(function t(n){var a;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:C.info("[ portDetectResult ]"),a=n.param,a?(C.info("portDetectResultdetect success. The fireWall mode is  "+(0,o.default)(a)),e(a)):(C.error("port detect failed."),r((0,s.default)({},n,{result:!1,errorCode:m.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:m.ErrorType.uportal})));case 3:case"end":return t.stop()}},t,c)}));return function(e){return t.apply(this,arguments)}}();a.setNotifyFunc(360475,i),N(t,n)}),e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.buildStg=function(){var e=(0,g.default)(p.default.mark(function e(){var t,n,r,a,o,i,c,f,l,d,h;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:if(t=e.sent,n=t.stgUri,r=t.stgAccount,a=t.useIM,o=t.fireWallMode,i=t.maaProxyAddress,c=t.isSupportProxy,!t.isHWUC){e.next=6;break}return e.abrupt("return",u.default.resolve());case 6:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.ISBIGWIN){e.next=8;break}return e.abrupt("return",u.default.resolve());case 8:if(!coreCommon.isMobile()){e.next=12;break}return C.info("[ buildStg ] mobile can not buildStg"),i&&!c&&(C.info("[ buildStg ] mobile use tls"),t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return",u.default.resolve());case 12:if(f=!1,void 0===n||""===n||";"===n||";;"===n||";;;"===n){e.next=38;break}if(C.info("[ buildStg ] uportal has stg stgUri;"),!c&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==o&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==o){e.next=33;break}return e.next=18,coreSecurity.getPasswordManager();case 18:return l=e.sent,e.next=21,l.getPassword("stgPassword");case 21:return d=e.sent,e.next=24,I({stgUri:n,stgAccount:r,stgPassword:d});case 24:if(h=e.sent,h.result){e.next=27;break}return e.abrupt("return",(0,m.LoginError)((0,s.default)({},h,{result:!1,errorCode:m.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:m.ErrorType.uportal})));case 27:return f=!0,t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return",h);case 33:t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),C.info("[ buildStg ]no need to buildStg, only build stg for im mode or fireWallMode is 0 or 1; useIM:"+a+" fireWallMode:"+o);case 36:e.next=42;break;case 38:return C.info("[ buildStg ]no stgUri, no need to buildStg"),t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return");case 42:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),m=n(165),_=n(220),C=coreLogger.getLogger("login")("stg"),w=t.stgTunnelDisconnected=function(){var e=(0,g.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("stgTunnelDisconnected"),e.next=3,(0,m.getLoginModel)();case 3:t=e.sent,t.set({isBuildStgSuc:!1}),window.dispatchEvent(new Event("stgTunnelDisconnected"));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),S=t.updateStgInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,d,h,g,v,_,w,S;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ updateStgInfo ]"),e.next=3,(0,m.getLoginModel)();case 3:if(n=e.sent,r=t.address,a=0===t.result,o=n.stgUri,i=n.eserverStgUri,s=0,c="",!a){e.next=27;break}if(u=i.split(";"),f=o.split(";"),d=f.length,r){e.next=18;break}c=u[0],s=0,e.next=27;break;case 18:h=0;case 19:if(!(h<d)){e.next=27;break}if(-1===f[h].indexOf(r)){e.next=24;break}return c=u[h],s=h,e.abrupt("break",27);case 24:h++,e.next=19;break;case 27:return g=c.split(":"),v=(0,l.default)(g,2),_=v[0],w=v[1],S={stgUriUsed:r,currentNum:s,isBuildStgSuc:a,eServerAddress:_,eServerPort:parseInt(w)},n.set(S),e.abrupt("return",S);case 31:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=(t.updateFireWallAndSipInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,d,h,g,v,_,w,S,I,E,N,b,T,y,O,x,A,L;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ updateFireWallAndSipInfo ]"),e.next=3,(0,m.getLoginModel)();case 3:n=e.sent,r=n.svnUri,a=n.sipStgUri,o=n.sipUri,i=r.split(";"),s=a.split(";"),c=o.split(";"),u="",u=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===t?s:constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN===t?i:c,f=u[0]?u[0].split(":"):["",0],d=(0,l.default)(f,2),h=d[0],g=d[1],v=u[1]?u[1].split(":"):["",0],_=(0,l.default)(v,2),w=_[0],S=_[1],I=u[2]?u[2].split(":"):["",0],E=(0,l.default)(I,2),N=E[0],b=E[1],T=u[3]?u[3].split(":"):["",0],y=(0,l.default)(T,2),O=y[0],x=y[1],A=!0,L={sipServerAddress:h,sipServerPort:parseInt(g),sipServerBackup1:w,sipServerPortBackup1:S,sipServerBackup2:N,sipServerPortBackup2:b,sipServerBackup3:O,sipServerPortBackup3:x,fireWallMode:t,isGetFirewallRes:A},n.set(L);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.buildStgTunnel=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,d,h,g,v,I,E,N,b,T=t.stgUri,y=t.stgAccount,O=t.stgPassword;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(C.info("[ buildStgTunnel ]"),C.info("<account_login><5_build_stg>begin"),n=T.split(";"),r=n.length,a=new Array,o=0;o<r;o++)i=n[o].split(":"),s=(0,l.default)(i,2),c=s[0],u=s[1],f={server_uri:c,server_port:parseInt(u)},a.push(f);return d=window.EXEC_PATH,h={stg_num:r,stg_servers:a,user_name:y,password:O,ca_path:""},e.next=10,coreTup.getUportalInstance();case 10:return g=e.sent,g.setNotifyFunc(360466,w),v=PromiseObject(),e.next=15,(0,m.getLoginModel)();case 15:return I=e.sent,I.shouldBuildStg=!0,e.next=19,g.buildStgTunnel(h,function(e){v.resolve(e)});case 19:return e.next=21,v;case 21:if(E=e.sent,N=E.param,0!==N.result){e.next=35;break}return e.next=26,(0,_.stopLocalServer)();case 26:return e.next=28,S(N);case 28:return b=e.sent,I.set({isBuildStgSuc:!0}),C.info("<account_login><5_build_stg>end ok"),C.info("buildStg build success."),e.abrupt("return",{result:!0,stgInfo:b});case 35:return I.set({isBuildStgSuc:!1}),C.info("<account_login><5_build_stg>end failed"),C.error("buildStg build fail."),e.abrupt("return",{result:!1,errorCode:m.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR});case 39:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),E=(t.destroyStgTunnel=function(){var e=(0,g.default)(p.default.mark(function e(){var t,n,r,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:return t=e.sent,C.info("[ destroyStgTunnel ]"),e.next=6,coreTup.getUportalInstance();case 6:return n=e.sent,r=PromiseObject(),n.destroyStgTunnel(function(e){r.resolve(e)}),e.next=11,r;case 11:if(a=e.sent,o=a.param,0!==o.result){e.next=19;break}return t.set({isBuildStgSuc:!1}),C.info("destroyStgTunnel success."),e.abrupt("return",{result:!0});case 19:C.error("destroyStgTunnel fail.");case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.fireWallDetect=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ fireWallDetect ]"),n=b(t,0),e.next=4,coreTup.getUportalInstance();case 4:r=e.sent,r.fireWallDetect(n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),N=t.portDetect=function(){var e=(0,g.default)(p.default.mark(function e(t,n){var r,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=b(t,n),e.next=3,coreTup.getUportalInstance();case 3:a=e.sent,a.portDetect(r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),b=function(e,t){for(var n=e.split(";"),r=n.length,a=new Array,o=0;o<r;o++){var i=n[o].split(":"),s=(0,l.default)(i,2),c=s[0],u=(s[1],{server_uri:c,server_port:t>0?t:0});a.push(u)}return{server_num:r,servers:a}};t.updateStgAuthInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r,a=t.account,o=t.password;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={user_name:a,password:o},e.next=3,coreTup.getUportalInstance();case 3:r=e.sent,r.updateStgAuthInfo(n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.checkStgReConnect=function(){var e=(0,g.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("checkStgReConnect "),e.next=3,(0,m.getLoginModel)();case 3:if(t=e.sent,t.isBuildStgSuc){e.next=15;break}return C.info("enter buildStg"),e.prev=6,e.next=9,v();case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(6),C.error("buildStg error"),"reconnect stg error";case 15:case"end":return e.stop()}},e,void 0,[[6,11]])}));return function(){return e.apply(this,arguments)}}()},239:function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,n){if(e&&u.isObject(e)&&e instanceof r)return e;var a=new r;return a.parse(e,t,n),a}function o(e){return u.isString(e)&&(e=a(e)),e instanceof r?e.format():r.prototype.format.call(e)}function i(e,t){return a(e,!1,!0).resolve(t)}function s(e,t){return e?a(e,!1,!0).resolveObject(t):t}var c=n(587),u=n(588);t.parse=a,t.resolve=i,t.resolveObject=s,t.format=o,t.Url=r;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(p),g=["'"].concat(h),v=["%","/","?",";","#"].concat(g),m=["/","?","#"],_=/^[+a-z0-9A-Z_-]{0,63}$/,C=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},I={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=n(589);r.prototype.parse=function(e,t,n){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),a=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(a),i=/\\/g;o[0]=o[0].replace(i,"/"),e=o.join(a);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var l=d.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],this.query=t?E.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=f.exec(s);if(p){p=p[0];var h=p.toLowerCase();this.protocol=h,s=s.substr(p.length)}if(n||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var N="//"===s.substr(0,2);!N||p&&S[p]||(s=s.substr(2),this.slashes=!0)}if(!S[p]&&(N||p&&!I[p])){for(var b=-1,T=0;T<m.length;T++){var y=s.indexOf(m[T]);-1!==y&&(-1===b||y<b)&&(b=y)}var O,x;x=-1===b?s.lastIndexOf("@"):s.lastIndexOf("@",b),-1!==x&&(O=s.slice(0,x),s=s.slice(x+1),this.auth=decodeURIComponent(O)),b=-1;for(var T=0;T<v.length;T++){var y=s.indexOf(v[T]);-1!==y&&(-1===b||y<b)&&(b=y)}-1===b&&(b=s.length),this.host=s.slice(0,b),s=s.slice(b),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var L=this.hostname.split(/\./),T=0,k=L.length;T<k;T++){var R=L[T];if(R&&!R.match(_)){for(var M="",D=0,P=R.length;D<P;D++)R.charCodeAt(D)>127?M+="x":M+=R[D];if(!M.match(_)){var F=L.slice(0,T),U=L.slice(T+1),B=R.match(C);B&&(F.push(B[1]),U.unshift(B[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=c.toASCII(this.hostname));var W=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+W,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[h])for(var T=0,k=g.length;T<k;T++){var V=g[T];if(-1!==s.indexOf(V)){var H=encodeURIComponent(V);H===V&&(H=escape(V)),s=s.split(V).join(H)}}var $=s.indexOf("#");-1!==$&&(this.hash=s.substr($),s=s.slice(0,$));var j=s.indexOf("?");if(-1!==j?(this.search=s.substr(j),this.query=s.substr(j+1),t&&(this.query=E.parse(this.query)),s=s.slice(0,j)):t&&(this.search="",this.query={}),s&&(this.pathname=s),I[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var W=this.pathname||"",q=this.search||"";this.path=W+q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=E.stringify(this.query));var i=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||I[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+a+n+i+r},r.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,a=Object.keys(this),o=0;o<a.length;o++){var i=a[o];n[i]=this[i]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),c=0;c<s.length;c++){var f=s[c];"protocol"!==f&&(n[f]=e[f])}return I[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!I[e.protocol]){for(var l=Object.keys(e),d=0;d<l.length;d++){var p=l[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||S[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",v=n.search||"";n.path=g+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),C=_||m||n.host&&e.pathname,w=C,E=n.pathname&&n.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],N=n.protocol&&!I[n.protocol];if(N&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),C=C&&(""===h[0]||""===E[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=h;else if(h.length)E||(E=[]),E.pop(),E=E.concat(h),n.search=e.search,n.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(N){n.hostname=n.host=E.shift();var b=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");b&&(n.auth=b.shift(),n.host=n.hostname=b.shift())}return n.search=e.search,n.query=e.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=E.slice(-1)[0],y=(n.host||e.host||E.length>1)&&("."===T||".."===T)||""===T,O=0,x=E.length;x>=0;x--)T=E[x],"."===T?E.splice(x,1):".."===T?(E.splice(x,1),O++):O&&(E.splice(x,1),O--);if(!C&&!w)for(;O--;O)E.unshift("..");!C||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),y&&"/"!==E.join("/").substr(-1)&&E.push("");var A=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(N){n.hostname=n.host=A?"":E.length?E.shift():"";var b=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");b&&(n.auth=b.shift(),n.host=n.hostname=b.shift())}return C=C||n.host&&E.length,C&&!A&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},240:function(e,t,n){"use strict";(function(t){function n(e,n,r,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,a)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(t,n(148))},241:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return W.info("[ checkHasProxyAndStgurl ]"),(0,L.getLoginModel)(function(e){return e.isSupportProxy&&!e.stgUri?(0,L.LoginError)({errorCode:k.UErrorCode.LOGIN_ERR_HAS_PROXY_NO_STG,errorType:constant.LOGIN_ERROR_TYPE.uportal}):s.default.resolve()})}function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];W.info("enableAutoLogin",e),window.CLIENTCONFIG.ISMOBILE?window.stroage.setFastLogin(e):remote.getGlobal("remoteVars").disable_auto_login=!e}Object.defineProperty(t,"__esModule",{value:!0}),t.checkShowPrivacy=t.ipLogin=t.checkForceSwtichAccount=t.initLoginInfo=t.reLogineServer=t.login=t.promiseToString=t.cancelLogin=t.makeLoginCancelable=t.loginPromise=void 0;var i=n(3),s=r(i),c=n(1),u=r(c),f=n(69),l=r(f),d=n(2),p=r(d),h=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.info("[ initServices ]"),e.next=3,(0,L.getLoginModel)();case 3:if(t=e.sent,n=t.useIM,r=t.useSip,a=t.isMultiDeviceLogined,o=t.useEsight,i=t.isMobile,W.info("login success initServices: ",{useIM:n,useSip:r,isMultiDeviceLogined:a,isMobile:i,useEsight:o}),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=13;break}return e.next=13,(0,D.resetSipResumeFlag)();case 13:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=26;break}if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=19;break}return e.next=18,window.isFloatWindow;case 18:e.t0=e.sent;case 19:if(!(s=e.t0)){e.next=24;break}W.info("the window is float "),e.next=26;break;case 24:return W.error("has no activity, login err!!!!!"),e.abrupt("return",(0,L.LoginError)({result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common}));case 26:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.info("[ checkDuplicateLogin ]"),e.next=3,(0,L.getLoginModel)();case 3:if(t=e.sent,!t.loginDisable||t.isTempLogin){e.next=8;break}return e.abrupt("return",(0,L.LoginError)({errorCode:"duplicateLogin",errorType:constant.LOGIN_ERROR_TYPE.common}));case 8:return t.setLoginStatus(!0),e.abrupt("return",s.default.resolve(t));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,i,c,f,l,d,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.info("[ prepareLogin ]"),W.info("<account_login><1_prepareLogin>begin"),window.mutiLanguage="FALSE",e.next=5,(0,L.getLoginModel)();case 5:if(t=e.sent,!t.isTempLogin){e.next=20;break}return W.info("prepareLogin: handle tempLogin info"),t.isTempLogin=!0,t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,n=$getState(),r=n.conf,a=r.confTempAcsAccount,i=r.confTempAcsUportalAddress,c=r.confTempAcsUportalPort,e.next=14,coreSecurity.getPasswordManager();case 14:return f=e.sent,e.next=17,f.getPassword("password");case 17:l=e.sent,t.set({account:a,displayAccount:a,password:l,serverAddress:i,serverPort:c}),t.set({password:l});case 20:if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,t.set({serverAddress:window.getLinkSmcUportalAddress,serverPort:window.getLinkSmcUportalPort})):(d=appService.getItUserInfo(),p=window.CLIENTCONFIG.DEFAULT_UPORTAL_SERVER,window.getUportalServer()&&(p=window.getUportalServer()),t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,t.set({loginAccount:d.contactsId,password:"*******",serverAddress:p,serverPort:8443}))),window.CLIENTCONFIG.ISMOBILE||o(!1),W.info("[ prepareLogin ] ok! "),W.info("<account_login><1_prepareLogin>end ok"),!window.CLIENTCONFIG.ISMOBILE){e.next=28;break}return e.abrupt("return",window.getCurrentNetWorkType());case 28:return e.abrupt("return",s.default.resolve(0));case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,o,i,s,c,f,l,d,p,h,g,v;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(W.info("[ checkLoginInfo ]"),W.info("<account_login><2_checkLoginInfo>begin"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,L.getLoginModel)();case 6:if(t=e.sent,1!==(n=t.authType)){e.next=12;break}return W.info("oAuth no need checkLoginInfo"),W.info("<account_login><2_checkLoginInfo>end ok"),e.abrupt("return");case 12:if(r=t.displayAccount,a=t.account,o=t.password,i=t.serverAddress,s=t.serverPort,c=t.isResume,f=t.isTempLogin,l=t.status,d=void 0,!c&&!l){e.next=22;break}return e.next=17,coreSecurity.getPasswordManager();case 17:return p=e.sent,e.next=20,p.getPassword("password");case 20:d=e.sent,t.password=d;case 22:if(window.CLIENTCONFIG.ISBIGWIN||window.isPluginEnv){e.next=30;break}if(h=d||t.password,r&&h){e.next=27;break}return W.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,L.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c}));case 27:if(-1===r.indexOf(" ")){e.next=30;break}return W.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,L.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_HAS_SPACE",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c}));case 30:if(coreUt.utConfigAccountInfo({configAccount:r}),i&&s){e.next=34;break}return W.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,L.LoginError)({result:!1,errorCode:"LOGIN_ADDRESS_OR_PORT_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c}));case 34:return t.isOAuth=!1,t.OAuthUrl="",t.serverPort=parseInt(s),e.next=39,coreSecurity.getPasswordManager();case 39:if(g=e.sent,e.t0=o,!e.t0){e.next=44;break}return e.next=44,g.setPassword("password",o);case 44:return e.next=46,coreHttp.initHttpTrans();case 46:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=60;break}if(e.t1=window.CLIENTCONFIG.ISMOBILE,!e.t1){e.next=52;break}return e.next=51,window.isFloatWindow;case 51:e.t1=e.sent;case 52:if(!(v=e.t1)){e.next=57;break}W.info("the window is float "),e.next=60;break;case 57:return W.error("has no activity, login err!!!"),W.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,L.LoginError)({result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common}));case 60:W.info("[ checkLoginInfo ] ok! "),W.info("<account_login><2_checkLoginInfo>end ok");case 62:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=3;break}return W.info("is big win can not doDetectFireWall"),e.abrupt("return");case 3:if(!coreCommon.isMobile()){e.next=6;break}return W.info("[ doDetectFireWall ] mobile can not doDetectFireWall"),e.abrupt("return");case 6:return W.info("[ doDetectFireWall ]"),W.info("<account_login><4_firewall>begin"),e.next=10,(0,L.getLoginModel)();case 10:return t=e.sent,t.isInDetectFireWall=!0,e.next=14,(0,y.checkDetectFireWall)();case 14:return n=e.sent,t.isInDetectFireWall=!1,coreCommon.dispatchModuleEvent("login",{event:"detectFirewall",code:0}),W.info("<account_login><4_firewall>end ok"),e.abrupt("return",n);case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:return t=e.sent,t.isInBuildStg=!0,e.next=6,(0,x.buildStg)();case 6:return n=e.sent,t.isInBuildStg=!1,coreCommon.dispatchModuleEvent("login",{event:"buildStg",code:0}),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.info("[ loginSuccess ]"),e.next=3,(0,L.getLoginModel)();case 3:t=e.sent,window.retryUportalLoginTimes=0,window.shouldStopRertyLogin=!0,window.baseTimeInterval=0,t.sipLoginOnly||(W.info("[ loginSuccess ] not sipLoginOnly, enableautologin!"),o()),t.isTempLogin||($(t.account,window.isHubEnv).then(function(){W.info("[maxhub] go into setLoginRecord"),(0,O.setLoginRecord)()}),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(n=window.getRoute(),isNullOrEmpty(window.handleJoinTempConfNoNameURL)),t.isMobile&&document.addEventListener("pause",M.storeAppCache,!1)),coreCommon.dispatchModuleEvent("login",{event:"uportal",code:0}),(0,M.storeAppCache)(),t.clearPassword(),coreIm.initChangeShowRecentInfo(),W.info("[ loginSuccess ] ok! "),t.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.FINISH;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=6;break}return W.info("[IT-Meeting] no need to loadConfigFromDB"),e.abrupt("return");case 6:return W.info("[ loadConfigFromDB ]"),t.isInLoadConfigFromDB=!0,e.next=10,(0,A.loadUserConfigFromDB)();case 10:t.isInLoadConfigFromDB=!1,window.CLIENTCONFIG.ISBIGWIN?(coreSetting.saveChrUploadState(!0),W.info("big win or maxhub chr is AUTO!")):window.isHubEnv&&coreSetting.saveChrUploadState(!0),W.info("[ loadConfigFromDB ] ok! ",handlePhoneNumber(t.account));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!t.isTempLogin){e.next=6;break}return W.info("[IT-Meeting] no need to initPrivateDB"),e.abrupt("return");case 6:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=9;break}return W.info("[bigwin] no need to initPrivateDB"),e.abrupt("return");case 9:return W.info("[ initPrivateDB ]"),t.isInInitPrivateDB=!0,e.next=13,coreDb.initSQLitePrivateDB({account:t.account});case 13:t.isInInitPrivateDB=!1,W.info("[ initPrivateDB ] ok! ",handlePhoneNumber(t.account));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:t=e.sent,window.CLIENTCONFIG.ISMOBILE&&(W.info("[ initMobileNative ]",handlePhoneNumber(t.account)),window.initMobileNative());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,o,i,s,c,f,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:return t=e.sent,isNullOrEmpty(t.real_user_account)||isNullOrEmpty(t.authToken)||(0,B.checkUpgrade)(!1,t.authToken,t.real_user_account),W.info("[ serviceReadyLoadData ]"),W.info("serviceReadyLoadData, set isOffline false"),window.isOffline=!1,t.setLoginStatus(!1,!0),(0,M.storeAppCache)(),n={key:"confPageShowType",value:"true"},e.next=12,coreDb.saveUserConfig(n);case 12:return r=t.isSupportAS,a={key:"asInfo",value:(0,l.default)(r)},e.next=16,coreDb.saveUserConfig(a);case 16:return coreCommon.dispatchModuleEvent("login",{event:"total",code:0}),e.next=19,(0,L.getLoginModel)();case 19:return o=e.sent,i=handlePhoneNumber(o.displayAccount),s=handlePhoneNumber(o.show_account),c=handlePhoneNumber(o.account),f={displayAccount:"",showAccount:"",account:""},isNullOrEmpty(i)||(f.displayAccount=i),isNullOrEmpty(s)||(f.showAccount=s),isNullOrEmpty(c)||(f.account=c),appService.debugInfoPrint(f),e.next=30,coreDb.queryUserConfigList({key:"hasOpenPush"});case 30:return d=e.sent,(isNullOrEmpty(d)||"true"===d[0].value)&&E(),e.next=34,(0,D.registerResumeEvent)();case 34:return(0,M.storeAppCache)(),W.info("serviceReadyLoadData, status = "+t.status),window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv||$getState().login.sipLoginOnly||(0,F.checkHuaweiPhonePushSetting)(),W.info("[ serviceReadyLoadData ] ok! "),e.abrupt("return",{result:!0});case 39:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.enableAutoLogin=o;var b=n(211),T=n(228),y=n(220),O=n(167),x=n(235),A=n(410),L=n(136),k=n(165),R=n(289),M=n(185),D=n(221),P=n(293),F=(n(260),n(310),n(413)),U=n(229),B=n(292),W=coreLogger.getLogger("logic")("login"),G=t.loginPromise={loginPromise:null,sipLoginPromise:null,eserverLoginPromise:null,umserverLoginPromise:null},V=t.makeLoginCancelable=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.LOGIN_PROMISE_KEY.main_login;W.info("<account_login_cancel>track start:"+t);var r=new PromiseObject;switch(n){case constant.LOGIN_PROMISE_KEY.main_login:G.loginPromise=r;break;case constant.LOGIN_PROMISE_KEY.sip_login:G.sipLoginPromise=r;break;case constant.LOGIN_PROMISE_KEY.eserver_login:G.eserverLoginPromise=r;break;case constant.LOGIN_PROMISE_KEY.umserver_login:G.umserverLoginPromise=r}return e.then(function(e){(0,L.getLoginModel)().then(function(n){W.info("<account_login_cancel>track end -> name:"+t+", hasCanceled : "+n.hasLoginCanceled),n.hasLoginCanceled?r.reject({isCanceled:!0}):r.resolve(e)})}).catch(function(e){(0,L.getLoginModel)().then(function(n){W.info("<account_login_cancel>track end -> name:"+t+", hasCanceled : "+n.hasLoginCanceled),n.hasLoginCanceled?r.reject({isCanceled:!0}):r.reject(e)})}),r},H=(t.cancelLogin=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:if(t=e.sent,t.hasLoginCanceled=!0,W.info("<account_login_cancel>do cancel start: "+H(G.loginPromise)+","+H(G.sipLoginPromise)+","+H(G.eserverLoginPromise)+","+H(G.umserverLoginPromise)),e.prev=5,isNullOrEmpty(G.loginPromise)){e.next=9;break}return e.next=9,G.loginPromise;case 9:if(isNullOrEmpty(G.sipLoginPromise)){e.next=12;break}return e.next=12,G.sipLoginPromise;case 12:if(isNullOrEmpty(G.eserverLoginPromise)){e.next=15;break}return e.next=15,G.eserverLoginPromise;case 15:if(isNullOrEmpty(G.umserverLoginPromise)){e.next=18;break}return e.next=18,G.umserverLoginPromise;case 18:W.info("<account_login_cancel>do cancel end"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),W.info("<account_login_cancel>do cancel end. "+(0,l.default)(e.t0));case 24:case"end":return e.stop()}},e,void 0,[[5,21]])}));return function(){return e.apply(this,arguments)}}(),t.promiseToString=function(e){return"("+!isNullOrEmpty(e)+","+(isNullOrEmpty(e)?"undefined":e.status)+")"});t.login=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,o,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:return t=e.sent,e.next=5,(0,L.getMyInfo)();case 5:return n=e.sent,t.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.LOGINING,t.isResume=i,t.isTempLogin=s,t.desc=c,r=(0,T.getUportalApi)().loginToUportal,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=(0,T.getUportalApi)().uportalAllonline,window.pcLoginState()&&(t.isMultiDeviceLogined=!0)),window.CLIENTCONFIG.ENABLE_IT_MEETING||((0,P.initService)("pre login"),!0===(o=n.isOffToLine)||i||coreUi.initAvatarMap()),e.abrupt("return",g().then(function(){return V(v(),"prepareLogin")}).then(function(){return V(m(),"checkLoginInfo")}).then(function(){return V(r(),"loginAuth")}).then(function(){return V(a(),"checkHasProxyAndStgurl")}).then(function(){return V(q(),"checkShowPrivacy")}).then(function(){return V(I(),"initPrivateDB")}).then(function(){return V(w(),"loginSuccess")}).then(function(){return V(_(),"doDetectFireWall")}).then(function(){return V(C(),"doBuildStg")}).then(function(){return V(S(),"loadConfigFromDB")}).then(function(){return V(h(),"initServices")}).then(function(){return V(N(),"serviceReadyLoadData")}).catch(R.handleLoginError));case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reLogineServer=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:return t=e.sent,W.info("[ reLogineServer ]",handlePhoneNumber(t.account)),e.abrupt("return",coreIm.reLoginToeServer().then(function(){return coreIm.registerEvent()}).then(function(){return W.info("[ reLogineServer ] ok! ",handlePhoneNumber(t.account)),!0}).catch(function(e){return!1}));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.startCallout=(0,p.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.dealStartCall(),W.info("startCallout, set isOffline false"),window.isOffline=!1,window.webView.switchToFront();case 4:case"end":return e.stop()}},e,void 0)})),window.handlePluginOneKeyConf=function(){var e=(0,p.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.handleJoinTempConfNoName(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.handlePluginTempUserInfo=(0,p.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:W.info("deal temp get user info 10"),t="",n=JSON.parse(t),window.oneKeyConfTempUserInfo(n);case 5:case"end":return e.stop()}},e,void 0)})),window.oneKeyConfTempUserInfo=function(){var e=(0,p.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},!t||void 0===t.result&&void 0===t.reslut?n=t:(n.param=t,void 0!=t.reslut&&(n.param.result=t.reslut)),(0,U.handletempsipconfinfo)(n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var $=function(){var e=(0,p.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return W.info("start maxhub init"),r={isAutoLogin:!0,isRememberPassword:!0},e.next=5,(0,L.getLoginModel)();case 5:a=e.sent,a.set(r),coreConf.initAsPairServer();case 8:return e.abrupt("return",s.default.resolve(0));case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),j=(t.initLoginInfo=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.info("[ initLoginInfo ]"),e.next=3,(0,O.loadLoginSetting)();case 3:return e.next=5,(0,O.loadLoginRecordList)();case 5:return t=e.sent,e.next=8,j();case 8:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=12;break}if(!window.anonymousJoinConf){e.next=12;break}return e.next=12,coreConf.resumeDeviceInfo();case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkForceSwtichAccount=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLoginModel)();case 2:t=e.sent,n=t.switchAccount,isNullOrEmpty(n)||isNullOrEmpty(n.tempAccount)||(r={displayAccount:n.tempAccount,account:n.tempAccount,password:"",serverAddress:n.tempServerAddress,serverPort:n.tempServerPort},t.set(r),a={},t.switchAccount=a);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());window.handleSwitchAccount=function(){var e=(0,p.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.account,r=t.serverAddress,a=t.serverPort,o=t.noNeedLogout,e.next=3,(0,L.getLoginModel)();case 3:if(i=e.sent,window.anonymousJoinConf||o){e.next=7;break}return e.next=7,(0,P.logout)(!0,!0);case 7:W.info("handleSwitchAccount update login info"),s={account:n,displayAccount:n,password:"",serverAddress:r,serverPort:a},c={tempAccount:n,tempServerAddress:r,tempServerPort:a},i.set(s),i.switchAccount=c;case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var q=(t.ipLogin=function(){var e=(0,p.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return W.info("debug info ipLogin begin"),coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreCall.registerCallEvent(),e.next=7,(0,y.ipCallConfig)();case 7:throttle((0,p.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e,void 0)})),1e3)(),W.info("debug info ipLogin end");case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkShowPrivacy=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,o,i,s,c,f,l,d,p,h,g;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=PromiseObject(),!window.CLIENTCONFIG.ISMOBILE){e.next=14;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=8;break}return e.next=5,appService.isLaunchFromPush();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=!1;case 9:if(n=e.t0,!window.CLIENTCONFIG.ISMOBILE||!n){e.next=14;break}return W.info("[checkShowPrivacy] skip for isLaunchFromPush : "+n),t.resolve(!0),e.abrupt("return",t);case 14:return e.next=16,(0,L.getLoginModel)();case 16:if(r=e.sent,a=r.account,o=r.isCheckPrivacy,i=r.isTempLogin,s=r.privacy_version,!(window.isHubEnv||o||window.CLIENTCONFIG.ISBIGWIN||i||window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv)){e.next=22;break}return W.error("this is maxhub environment or resume, uncheck privacy"),t.resolve(!0),e.abrupt("return",t);case 22:return e.prev=22,W.info("[checkShowPrivacy] start"),r.set({isCheckPrivacy:!0}),e.next=27,coreDb.queryLoginSetting({key:"firstLoginAccount"});case 27:return c=e.sent.value,e.next=30,coreDb.queryLoginSetting({key:a+"_privacyVersion"});case 30:if(f=e.sent.value,l=!!f,f=f||"V01.00",s=s||"V01.00",d=f.split("V")[1],p=s.split("V")[1],h={oprEvent:constant.OPR_EVENT_TYPE.PRIVACY,privacyver:s},void 0!==c){e.next=46;break}return e.next=40,coreDb.saveLoginSetting({key:"firstLoginAccount",value:a});case 40:return e.next=42,coreDb.saveLoginSetting({key:a+"_privacyVersion",value:s});case 42:(0,b.recordPrivacy)(h),t.resolve(!0),e.next=47;break;case 46:c!==a&&!l||p>d?(W.info("[checkShowPrivacy] show privacy"),g=function(){(0,b.recordPrivacy)(h),r.setLoginStatus(!0),p>=d&&coreDb.saveLoginSetting({key:a+"_privacyVersion",value:s}),t.resolve(!0)},delegate(g,"onAgreePrivacy"),r.setLoginStatus(!1,!0),window.goRoute("firstLoginPrivacy")):t.resolve(!0);case 47:return e.abrupt("return",t);case 50:return e.prev=50,e.t1=e.catch(22),W.error("[checkShowPrivacy] error",e.t1.toString()),t.resolve(!0),e.abrupt("return",t);case 55:case"end":return e.stop()}},e,void 0,[[22,50]])}));return function(){return e.apply(this,arguments)}}())},248:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SvcAttendanceManager=t.dealWithWatchConfList=t.handleSvcShowAttChangeMobile=t.handleSvcShowAttChange=t.handleSvcClickJSPage=t.handleSvcWatchChange=t.handleSvcLockWatch=t.handleSSRCURL=t.loggerPrintSSRC=t.loggerPrint=void 0;var a,o,i=n(403),s=r(i),c=n(4),u=r(c),f=n(123),l=r(f),d=n(69),p=r(d),h=n(1),g=r(h),v=n(2),m=r(v),_=n(648),C=coreLogger.getLogger("conf")("logic/video/svcAttendanceManager");window.hasDealAttendeeUpdateEvent=0,window.isChangeOfBroadcast=!1;window.multiStreamPageInfoChangeNotify=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,v,m,_,w,I,N,b,T,O,x,A,L,k,R,M,D;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("NativeToJS select watch case multiStreamMode="+t.multiStreamMode+",pageNo="+t.pageNo+",LargeVedioStatus="+t.LargeVedioStatus+",broadcastBeforeStatus="+t.broadcastBeforeStatus+",focusVedio="+handlePhoneNumber(t.focusVedio)),$dispatch(coreUi.changeSvcNativeToJS(t)),n=$getState().conf,r=n.svcMobileConfHandles,a=n.svcRecallorNot,o=n.ssrcRange,i=n.svcOnLineAttendances,s=n.svcSelfNumber,c=n.svcBandMode,u=n.svcMobileHandleNum,f=n.svcMaxWatchResolution,!a){e.next=6;break}return C.info("No Need send watch request"),e.abrupt("return");case 6:if(l=!1,d=$getState().call.callId,2!==t.multiStreamMode){e.next=16;break}return p=[{number:"",ssrc:0,width:0,height:0}],C.info("dataMode,setAllSvcVideoWindows,multiStreamMode=2, stop watch muiltivideo."),-2===t.pageNo&&(p[0].number="",p[0].ssrc=o.min,p[0].width=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360.width,p[0].height=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360.height,C.info("is in background, sendWatchRequest")),h={attendeeList:p,selfNum:s},e.next=15,coreConf.sendWatchSvcRequestService(h);case 15:return e.abrupt("return");case 16:return isNullOrEmpty(t.focusVedio)||1!==t.LargeVedioStatus||($dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:t.focusVedio}))),0===t.LargeVedioStatus&&($dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))),2===t.LargeVedioStatus&&(l=!0,1===t.broadcastBeforeStatus&&($dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})))),v={callid:d,infoid:0},e.next=22,coreTup.getCallInstance();case 22:return m=e.sent,e.next=25,m.getBasicCallInfo(v);case 25:if(_=e.sent,w=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,I=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,C.info("is support hd-encoder(0:NO, 1: YES) ",_.param.call_info.svc_is_support_hd_encoder),0===_.param.call_info.svc_is_support_hd_encoder?(w=$getState().conf.svcMobileSpeakerModeMaxLook,I=$getState().conf.svcMobileDivideModeMaxLook):(w=$getState().conf.svcHighPerformanceMobileSpeakerModeMaxLook,I=$getState().conf.svcHighPerformanceMobileDivideModeMaxLook),N=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,isNullOrEmpty(f)||(N.width=f.width,N.height=f.height),C.info("Nego level-id limit max resolution:",N),0!==t.multiStreamMode){e.next=53;break}return C.info("MaxSpeakerMode, eSight load max resolution= ",w),isNullOrEmpty(w)||(N=y.getRealResolution(N,w)),b=c<2?constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,C.info("Nego Bandwidth limit max resolution:",b),isNullOrEmpty(b)||(N=y.getRealResolution(N,b)),C.info("send request watch resolution:",N),T={render:r.remoteLargeViewIdx,ssrc_id:o.min,width:N.width,height:N.height,bSharpness:window.CLIENTCONFIG.SVC_SHARPENING_SWITCH?1:0},O=new Array,O.push(T),e.next=45,E(i[0],0,N,1,l,t.focusVedio);case 45:if(x=e.sent,C.info("handleSvcWatchChang result",x.result),0!==x.result){e.next=51;break}return e.next=50,coreCall.setAllSvcVideoWindows(1,d,O);case 50:$dispatch(coreUi.changeOldDidivePagerNo(0));case 51:e.next=83;break;case 53:if(1!==t.multiStreamMode){e.next=83;break}if(C.info("divideMode, eSight load max resolution= ",I),isNullOrEmpty(I)||(N=y.getRealResolution(N,I)),A=c<2?constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,C.info("Nego Bandwidth limit max resolution:",A),isNullOrEmpty(A)||(N=y.getRealResolution(N,A)),C.info("send request watch resolution:",N),L=window.CLIENTCONFIG.SVC_WINDOW_MAX_DIVIDE_NUM_PHONE,u&&(L=u),C.info("modelength",L),i=i.slice(1),k=t.pageNo,R=k%2,M=k%2,k===$getState().conf.svcOldDidivePagerNo?(R=3,$dispatch(coreUi.changeOldDidivePagerNo(0))):$dispatch(coreUi.changeOldDidivePagerNo(k)),!(k>=1)){e.next=83;break}if(D="",!(i.length>=k*L+1)){e.next=78;break}return D=i.slice((k-1)*L,k*L),e.next=74,E(D,1,N,R,!1,"",k);case 74:return e.next=76,S(D.length,d,N,R,M);case 76:e.next=83;break;case 78:return D=i.slice((k-1)*L),e.next=81,E(D,1,N,R,!1,"",k);case 81:return e.next=83,S(D.length,d,N,R,M);case 83:$dispatch(coreUi.changeConfViewMode(t.multiStreamMode)),$dispatch(coreUi.changeSvcShowPage(t.pageNo));case 85:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var w=t.loggerPrint=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a="";if(t&&!isNaN(t.length)&&t.length>0)for(var o=0;o<t.length;o++)!0===n?a=a+";name:"+(t[o].name?t[o].name.substr(0,1)+"**"+t[o].name.substr(-1):"")+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):!1===n?a=a+";number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):"PC"===n?a=a+";name:"+(t[o].name?t[o].name.substr(0,1)+"**"+t[o].name.substr(-1):"")+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):"SSRC"===n&&(a=a+";ssrc:"+t[o].ssrc+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):"")+",width="+t[o].width+",height="+t[o].height);C.info(e,a,r)};t.loggerPrintSSRC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="";if(t&&!isNaN(t.length)&&t.length>0){for(var a=0;a<t.length;a++)isNullOrEmpty(t[a].number)||(t[a].number=handlePhoneNumber(t[a].number));r=(0,p.default)(t)}C.info(e+r+n)};window.removeSvcVideoWindows=(0,m.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("svcCloseOrResumeCameta"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,m.default)(g.default.mark(function e(){var t,n,r,a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.svcVideoWindows,r=t.isSvcConf,a=$getState().call.callId,C.info("window.removeSvcVideoWindows"),!r){e.next=12;break}if(!(n.windowArray&&n.windowArray.length>=1)){e.next=12;break}o=0;case 6:if(!(o<n.windowArray.length)){e.next=12;break}return e.next=9,coreCall.removeSvcVideoWindow(a,0,n.windowArray[o].ssrc_id,!0);case 9:o++,e.next=6;break;case 12:case"end":return e.stop()}},e,void 0)})),n,null);case 3:case"end":return e.stop()}},e,void 0)})),window.reSetSvcVideoWindows=(0,m.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("svcCloseOrResumeCameta"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.svcVideoWindows,r=t.isSvcConf,a=$getState().call,o=a.callId,i=a.currentCamera,C.info("window.reSetSvcVideoWindows"),!r){e.next=20;break}if(window.CLIENTCONFIG.ISMOBILE,!0){e.next=16;break}if(s=$getState().call,c=s.isOpenCamera,u=s.currentCallId,f=s.isOpenCameraDe,C.info("Camera isOpenCamera = "+c),!c){e.next=13;break}return e.next=10,coreCall.setVideoIndex(i);case 10:C.info("Camera isOpenCamera = "+c+",callId = "+u+" isOpenCameraDe = "+f),e.next=14;break;case 13:C.info("Camera isOpenCamera = "+c+",callId = "+u+" isOpenCameraDe = "+f);case 14:e.next=20;break;case 16:return e.next=18,coreCall.setVideoIndex(i);case 18:return e.next=20,coreCall.setAllSvcVideoWindows(n.count,o,n.windowArray);case 20:case"end":return e.stop()}},e,void 0)})),n,null);case 3:case"end":return e.stop()}},e,void 0)}));var S=t.handleSSRCURL=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,v,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$getState().call.callId,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("addSvcVideoWindow start",t),n=new Array,r=$getState().conf,a=r.svcMobileConfHandles,o=r.usedSsrcList,i=r.svcBandMode,s=r.ssrcRange,c=s.min+1,-1===t)u=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,C.info("NumLength = -1 init ,lookRatio = ",u),0!==u.width&&0!==u.height||(C.info("NumLength = -1 lookRatio width or height is 0"),u={width:640,height:360}),f={render:a.remoteLargeViewIdx,ssrc_id:$getState().conf.ssrcRange.min,width:u.width,height:u.height,bSharpness:window.CLIENTCONFIG.SVC_SHARPENING_SWITCH?1:0},n.push(f);else for(l=1===S?0:3,d=0,1===w?d=0:0===w?d=3:3===w&&(d=6),p=s.min+t+d,p>s.max&&(d=0),0!==_.width&&0!==_.height||(C.info("lookRatio width or height is 0"),_={width:320,height:180}),h=0;h<t;h++)v={render:a.remoteViewIdx[h+l],ssrc_id:c+h+d,width:_.width,height:_.height,bSharpness:0},n.push(v);return e.next=7,coreCall.setAllSvcVideoWindows(n.length,m,n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=t.handleSvcLockWatch=function(e,t){C.info("handleSvcLockWatch",e,t.number?t.number.substr(0,3)+"****"+t.number.substr(-3):"");var n=$getState().conf.isBigConf,r=coreConf.isConfChairMan();if(n&&!r)return void C.info("handleSvcLockWatch in bigConf not ChairMan can not lockWatch");var a={mode:e,watchInfo:t};$dispatch(coreUi.changeSvcControlMode(e));var o=(0,l.default)({},t);$dispatch(coreUi.changeSvcSelectWatchInfo(o)),1===e?$dispatch(coreUi.changeIsSvcSelectMode(!0)):$dispatch(coreUi.changeIsSvcSelectMode(!1)),window.CLIENTCONFIG.ISMOBILE&&window.SvcLockWatch(a)},E=t.handleSvcWatchChange=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,v,m,_,S,I,E,T,y,O,x,A,L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,M=arguments.length>4&&void 0!==arguments[4]&&arguments[4],D=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:0);return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Array,r=$getState().conf,a=r.svcSelectWatchInfo,o=r.svcControlMode,i=r.svcViewMode,s=r.ssrcRange,c=r.usedSsrcList,u=r.broadCastInfo,f=r.svcSelfNumber,l=r.svcOnLineAttendances,d=r.isSameGradeMcu,p=null,0!==L){e.next=9;break}if(1!==o||M){if(h="",0===d&&l.length>1){for(v=0,m=0;m<l.length;m++)1===l[m].is_same_grade_mcu&&v++;1===v&&(h="M255T0",C.info("numberT enter"))}p={number:h,ssrc:s.min,width:k.width,height:k.height},M?C.info("sendWatchSvcRequest broad"):C.info("sendWatchSvcRequest spk")}else p={number:a.number,ssrc:s.min,width:k.width,height:k.height},C.info("sendWatchSvcRequest lock watch");n.push(p),b([]),e.next=28;break;case 9:if(1!==L){e.next=28;break}for(_=0,1===R?_=0:0===R?_=3:3===R&&(_=6),S=s.min+t.length+_,S>s.max&&(_=0),I="",E=$getState().conf.isBigConf,T=0;T<t.length;T++)I=1===D&&E?"":t[T].number,p={number:I,ssrc:s.min+1+T+_,width:k.width,height:k.height},n.push(p);y=!1,O=0;case 19:if(!(O<n.length)){e.next=26;break}if(1!==R&&3!==R||"M255T0"!==n[O].number){e.next=23;break}return y=!0,e.abrupt("break",26);case 23:O++,e.next=19;break;case 26:b(y?n:[]),C.info("sendWatchSvcRequest average");case 28:return w("sendWatchSvcRequest parameter：watchAttendees=",n,!1,f.substr(0,3)+"****"+f.substr(-3)),x={attendeeList:n,selfNum:f},e.next=32,coreConf.sendWatchSvcRequestService(x);case 32:return A=e.sent,0===A.result&&N(n),e.abrupt("return",A);case 35:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),N=(t.handleSvcClickJSPage=function(e){window.SvcClickJSPageNum(e)},t.handleSvcShowAttChange=function(e){$dispatch(coreUi.changeSvcShowAttendances(e))}),b=t.handleSvcShowAttChangeMobile=function(e){$dispatch(coreUi.changeSvcShowAttendancesMobile(e))},T=t.dealWithWatchConfList=function(){var e=constant.ACTIVE_USER.MOBILE,t=$getState().conf.svcOnLineAttendances;if(0===t.length)return void C.info("currentOnLineAttendances is empty return");var n=$getState().conf.svcActiveAttendances;C.info("dealWithWatchConfList  before currentOnLineAttendances  ",t.length);var r=[];0===n.length?r=(0,l.default)([],t):(r=sortPreAndOrigiArray(n,t),n=[]),n=r.length>e?(0,l.default)([],r.slice(0,e)):(0,l.default)([],r);for(var a=0;a<r.length;a++){var o=r[a];if(1===o.is_self){r.splice(a,1),r.unshift(o);break}}$dispatch(coreUi.changeSvcOnLineAttendances(r)),$dispatch(coreUi.changeSvcActiveAttendances(n)),C.info("dealWithWatchConfList  after currentOnLineAttendances  ",$getState().conf.svcOnLineAttendances.length)},y=t.SvcAttendanceManager=(o=a=function e(){(0,u.default)(this,e)},a.handleSvcAttendancesUpdateEvent=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("start handle svc Attendances update event",t.length),n=$getState().conf,r=n.ssrcRange,a=n.svcBigPicInfo,0!==window.hasDealAttendeeUpdateEvent||a.hasOwnProperty("ssrc")||(C.info("start handle svc Attendances handleSvcWatchIndNotify is not received!"),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:r.min}))),window.hasDealAttendeeUpdateEvent=1,window.isChangeOfBroadcast=!1,e.next=7,y.dealSvcAttendanceList(t);case 7:if(!(o=e.sent)||window.CLIENTCONFIG.ISMOBILE){e.next=18;break}if(C.info("svcShowAttendances is changed!"),i=$getState().conf,s=i.svcShowAttendances,c=i.svcViewMode,u=i.ssrcRange,f=i.svcBigPicInfo,l=i.svcOnLineAttendances,1===c&&(y.handleDivideModeWinSize(),y.dealDivideCanvasSize()),!(l.length>1)){e.next=15;break}return e.next=15,y.sendWatchSvcRequest(s);case 15:return e.next=17,y.setSvcVideoRender(s,"true");case 17:y.calcBigCanvasRatio();case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleSvcModeSwitch=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("Switch to svcViewMode:"+p+",maxSizeForPage:"+h),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isSvcShareMode,a=t.svcBigPicInfo,$dispatch(coreUi.changeConfViewMode(p)),1!==p&&(o=y.calcCanvas16And9Size(),$dispatch(coreUi.changeBigWinStyle(o)),C.info("changeBigWinStyle, canvasSize is ",o)),e.next=6,coreCall.closeAllSvcRemoteSocket();case 6:if($dispatch(coreUi.changeMaxSizeForPage(h)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeUsedSvcSSRCList([])),0!==p&&1!==p){e.next=20;break}return y.initSvcShowAttendances(n,h),1===p&&(y.handleDivideModeWinSize(),y.dealDivideCanvasSize()),i=$getState().conf.svcShowAttendances,e.next=15,y.sendWatchSvcRequest(i);case 15:return e.next=17,y.setSvcVideoRender(i);case 17:r&&0===p&&-3===a.ssrc&&(s=coreCall.getBigContainerSize(),s={width:s.width,height:s.height-54},coreCall.setSvcBFCPVideoRender(s)),e.next=38;break;case 20:c=null,u=new Array,f=0;case 23:if(!(f<n.length)){e.next=30;break}if(1!==n[f].is_self){e.next=27;break}return c=n[f],e.abrupt("break",30);case 27:f++,e.next=23;break;case 30:return l=y.constructSvcShowAttendanceInfo(c),l&&u.push(l),N(u),r&&-3===a.ssrc&&(d=coreCall.getBigContainerSize(),d={width:d.width,height:d.height-54},coreCall.setSvcBFCPVideoRender(d)),e.next=36,y.sendWatchSvcRequest(u);case 36:return e.next=38,y.setSvcVideoRender([]);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleSvcSelect=function(){var e=(0,m.default)(g.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,d,p,h,v,m;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("Select attendance name:,viewMode = "+n),r=$getState().conf,a=r.svcOnLineAttendances,o=r.ssrcRange,i=r.isSvcShareMode,s=r.svcShowPage,c=r.svcBandMode,u=r.svcBigPicInfo,f={number:t.number,is_mute:t.is_mute,name:t.name},d=(0,l.default)({},t),d.ssrc=o.min,0!==n){e.next=20;break}return u.hasOwnProperty("ssrc")&&-3===u.ssrc&&coreCall.resetBFCStatus($getState().call.callId,0),$dispatch(coreUi.changeIsShowMainScreen(!0)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcBigPicInfo(d)),$dispatch(coreUi.changeSvcSelectWatchInfo(f)),!i||0!==s||-3!==u.ssrc&&-2!==u.ssrc||(N([]),$dispatch(coreUi.changeUsedSvcSSRCList([])),y.initSvcShowAttendances(a,$getState().conf.maxSizeForPage)),p=$getState().conf.svcShowAttendances,e.next=16,y.sendWatchSvcRequest(p);case 16:return e.next=18,y.setSvcVideoRender(p);case 18:e.next=41;break;case 20:return e.next=22,coreCall.closeAllSvcRemoteSocket();case 22:return h=new Array,h.push(o.min),v=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===c&&(v=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeMaxSizeForPage(v)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeSvcBigPicInfo(d)),N([]),$dispatch(coreUi.changeUsedSvcSSRCList(h)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcSelectWatchInfo(f)),y.initSvcShowAttendances(a,v),m=$getState().conf.svcShowAttendances,e.next=39,y.sendWatchSvcRequest(m);case 39:return e.next=41,y.setSvcVideoRender(m);case 41:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.handleSvcShareClick=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShareData;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("handleSvcShareClick :svcBroadcastData:",s),t=$getState().conf,n=t.ssrcRange,r=t.svcOnLineAttendances,a=t.maxSizeForPage,o=t.shareScreenWH,$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeSvcBigPicInfo(s)),$dispatch(coreUi.changeUsedSvcSSRCList([])),y.initSvcShowAttendances(r,a),e.next=8,y.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 8:return e.next=10,y.setSvcVideoRender($getState().conf.svcShowAttendances);case 10:i={lastheight:o.lastheight+1,lastwidth:o.lastwidth+1},$dispatch(coreUi.changeShareScreenWH(i)),$dispatch(coreUi.changeIsShowMainScreen(!1));case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleSvcBFCClick=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf,n=t.ssrcRange,r=t.isSvcShareMode,a=t.svcBigPicInfo,o=t.svcShareData,i=t.svcOnLineAttendances,s=t.maxSizeForPage,c=t.svcViewMode,C.info("handleSvcBFCClick :svcBroadcastData:",o),$dispatch(coreUi.changeSvcBigPicInfo(o)),coreCall.resetBFCStatus($getState().call.callId,1),e.next=6,coreCall.closeSvcRemoteSocket(n.min);case 6:return $dispatch(coreUi.changeIsShowMainScreen(!1)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeUsedSvcSSRCList([])),y.initSvcShowAttendances(i,s),e.next=12,y.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 12:return e.next=14,y.setSvcVideoRender($getState().conf.svcShowAttendances);case 14:r&&(0,_.refreshShareSize)(a.ssrc);case 15:case"end":return e.stop()}},e,void 0)})),a.stopSvcShareOrBfcp=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("stopSvcShareOrBfcp"),t=$getState().conf,n=t.svcBigPicInfo,r=t.svcViewMode,a=t.svcShowPage,o=t.maxSizeForPage,i=t.ssrcRange,s=t.svcOnLineAttendances,c=t.isSvcShareMode,u=t.svcShareData,f=t.isShowMainScreen,!c){e.next=10;break}return $dispatch(coreUi.changeIsSvcShareMode(!1)),$dispatch(coreUi.changeSvcShareData({})),f?0===r&&0===a&&(C.info("stopSvcShareOrBfcp no need switch to video!"),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeSvcShowAttendances([])),y.initSvcShowAttendances(s,o)):(C.info("stopSvcShareOrBfcp need switch to video!"),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:i.min,name:""})),$dispatch(coreUi.changeSvcControlMode(0)),l=y.getBigCanvasSize(),$dispatch(coreUi.changeBigWinStyle(l)),C.info("stopSvcShareOrBfcp reset big containerSize is "+(0,p.default)(l)),$dispatch(coreUi.changeIsShowMainScreen(!0))),e.next=8,y.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 8:return e.next=10,y.setSvcVideoRender($getState().conf.svcShowAttendances);case 10:case"end":return e.stop()}},e,void 0)})),a.receviceSvcShareOrBfcp=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("receviceSvcShareOrBfcp"),t=$getState().conf,n=t.svcViewMode,r=t.svcShowAttendances,a=t.svcOnLineAttendances,o=t.svcBandMode,i=t.ssrcRange,1===n&&(s=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===o&&(s=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeMaxSizeForPage(s)),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeSvcShowAttendances([])),y.initSvcShowAttendances(a,s),r=$getState().conf.svcShowAttendances),$dispatch(coreUi.changeIsShowMainScreen(!1)),$dispatch(coreUi.changeIsSvcShareMode(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(1)),c=0===u?-2:-3,$dispatch(coreUi.changeSvcShareData({ssrc:c,name:f})),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:c,name:f})),e.next=12,coreCall.closeSvcRemoteSocket(i.min);case 12:return e.next=14,y.sendWatchSvcRequest(r);case 14:return e.next=16,y.setSvcVideoRender(r);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.resizeBfcWindow=function(){C.info("resizeBfcWindow");var e=$getState().conf.svcViewMode,t=coreCall.getBigContainerSize(),n=t.height-54;2===e&&(n=t.height),t={width:t.width,height:n},coreCall.setSvcBFCPVideoRender(t)},a.resizeBigSvcWindow=function(){C.info("resizeBigSvcWindow");var e=$getState().conf,t=e.ssrcRange;e.isSvcShareMode,e.svcOnLineAttendances;if(coreCall.getSvcRender(t.min)){var n=y.calcBigCanvasRatio();$dispatch(coreUi.changeBigWinStyle(n));var r=t.min+"_frame_share";C.info("resizeBigSvcWindow,bigCanvasSize is ",n),coreCall.setSvcRemoteVideoRender(t.min,r,n)}},a.resizeLocalBigWindow=function(){C.info("resizeBigSvcWindow");var e=$getState().conf;e.ssrcRange,e.isSvcShareMode,e.svcOnLineAttendances;if(coreCall.getSvcRender(-1)){var t=y.calcBigCanvasRatio();$dispatch(coreUi.changeBigWinStyle(t)),C.info("resizeBigSvcWindow,bigCanvasSize is ",t),coreCall.setSvcLocalVideoRender(t)}},a.changeSvcWindowSize=function(e,t){if(-1===e)coreCall.setSvcLocalVideoRender(t);else{var n=e+"_frame_share";coreCall.setSvcRemoteVideoRender(e,n,t)}},a.handleSvcSpeakerNotify=function(){for(var e=$getState().conf,t=e.confSpeaker,n=e.svcShowAttendances,r=(0,l.default)([],n),a=0;a<r.length;a++)r[a].is_speaker=!1;var o=!1;if(t.speaker.length>0)for(var i=t.speaker[0].number,s=0;s<r.length;s++)if(i===r[s].number){r[s].is_speaker=!0,o=!0;break}o&&N(r)},a.dealSvcAttendanceList=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,v,m,_,S,E,N,b,O,x,A,L,k,R;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("dealSvcAttendanceList start"),n=$getState().conf,r=n.svcControlMode,a=n.svcSelectWatchInfo,o=n.broadCastInfo,i=n.isSvcConf,s=n.svcOnLineAttendances,c=n.svcRecallorNot,u=n.serialMcuMemberList,f=n.isSameGradeMcu,l=n.svcViewMode,d=n.svcOldDidivePagerNo,h=n.isBigConf,v=n.svcActiveAttendances,m=y.getOnLineAttendances(t),h&&v&&v.length>0?(_=sortPreAndOrigiArray(v,m),$dispatch(coreUi.changeSvcOnLineAttendances(_))):$dispatch(coreUi.changeSvcOnLineAttendances(m)),"NOSelfNOWatch"!==(m=$getState().conf.svcOnLineAttendances)){e.next=7;break}return e.abrupt("return");case 7:if(S=new Array,E="",N="",window.CLIENTCONFIG.ISMOBILE)for(1===r&&(0,p.default)(m).indexOf(a.number)<0&&I(0,{number:a.number}),o.isBroadCast&&(0,p.default)(m).indexOf(o.broadCastList[0].number)<0&&(b={isBroadCast:!1,broadCastList:[]},$dispatch(coreUi.changeBroadCastInfo(b))),O=0;O<m.length;O++)E={name:m[O].name,number:m[O].number,role:m[O].role,is_mute:m[O].is_mute,is_self:m[O].is_self,is_same_grade_mcu:m[O].is_same_grade_mcu},N=N+","+m[O].number,S.push(E);else S=m;if($dispatch(coreUi.changeSvcOnLineAttendances(S)),!window.CLIENTCONFIG.ISMOBILE||!i){e.next=23;break}return x=$getState().conf.isBigConf,x&&(T(),S=$getState().conf.svcOnLineAttendances),c&&(w("recall updateVideoView",S),window.updateVideoView(S,!0),$dispatch(coreUi.changesvcRecallorNot(!1))),A=$getState().conf,L=!y.checkSerialConf(A),L&&$dispatch(coreUi.changeOldDidivePagerNo(1)),k={multiStreamMode:1,pageNo:1,LargeVedioStatus:-1,broadcastBeforeStatus:0,focusVedio:""},L&&0===f&&"0"!==A&&1===d&&1===l&&(C.info("send grade watch info"),window.multiStreamPageInfoChangeNotify(k),$dispatch(coreUi.changeMobileSerialNumber("0"))),(0,p.default)(S)!==(0,p.default)(s)&&(w("updateVideoView01",S),window.updateVideoView(S,!1)),e.abrupt("return");case 23:return e.next=25,y.handlePCSvcBroadcast(m);case 25:return R=e.sent,e.abrupt("return",R);case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handlePCSvcBroadcast=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,y.dealSvcBroadcastUpdate(t),0!==t.length){e.next=5;break}return C.info("onLineAttendances length is zero,please check."),e.abrupt("return",n);case 5:if(r=$getState().conf.svcViewMode,1===r&&t.length<3&&(a=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===$getState().conf.svcBandMode&&(a=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeMaxSizeForPage(a))),o=$getState().conf,i=o.svcShowAttendances,s=o.maxSizeForPage,c=o.svcViewMode,2!==c){e.next=24;break}u=null,f=new Array,l=0;case 12:if(!(l<t.length)){e.next=19;break}if(1!==t[l].is_self){e.next=16;break}return u=t[l],e.abrupt("break",19);case 16:l++,e.next=12;break;case 19:d=y.constructSvcShowAttendanceInfo(u),d&&f.push(d),N(f),e.next=25;break;case 24:1===c?0===i.length?($dispatch(coreUi.changeSvcShowPage(0)),n=y.initSvcShowAttendances(t,s)):n=y.updateDivideShowAttendances(t,i):0===c&&(0===i.length?($dispatch(coreUi.changeSvcShowPage(0)),n=y.initSvcShowAttendances(t,s)):n=y.updateBigSmallShowAttendances(t,i));case 25:return window.isChangeOfBroadcast&&(n=!0),e.abrupt("return",n);case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.dealSvcPageSwitch=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h,v,m,w,S,I,E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShowPage;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(C.info("dealSvcPageSwitch svcShowPage : "+E),$dispatch(coreUi.changeSvcShowPage(E)),t=$getState().conf,n=t.svcShowAttendances,r=t.svcViewMode,a=t.maxSizeForPage,o=t.svcOnLineAttendances,i=t.svcBigPicInfo,s=t.isSvcShareMode,c=t.svcShareData,u=new Array,f=y.getCanUseAttendancesPos(r,E,a,s),l=new Array,d=f;d<o.length;d++)l.push(o[d]);p=0;case 8:if(!(p<n.length)){e.next=15;break}return h=n[p].ssrc,e.next=12,coreCall.closeSvcRemoteSocket(h);case 12:p++,e.next=8;break;case 15:for(0!==r&&$dispatch(coreUi.changeUsedSvcSSRCList([])),v=a,0===r&&0===E?s&&-2!==i.ssrc&&-3!==i.ssrc&&(v-=1):1===r&&E>0&&(u.push(n[0]),v-=1),m=Math.min(v,l.length),w=0;w<m;w++)(S=y.constructSvcShowAttendanceInfo(l[w]))&&u.push(S);if(0===r)for(I=0;I<n.length;I++)y.removeSvcSSRC(n[I].ssrc);return N(u),1===r&&(y.handleDivideModeWinSize(),y.dealDivideCanvasSize()),0!==E||1!==n.length||!s||-2!==i.ssrc&&-3!==i.ssrc||(0,_.refreshShareSize)(i.ssrc),e.next=26,y.sendWatchSvcRequest(u);case 26:return e.next=28,y.setSvcVideoRender(u,"true","true");case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.initSvcShowAttendances=function(e,t){C.info("initSvcShowAttendances start");var n=$getState().conf,r=n.isSvcShareMode,a=n.svcBigPicInfo,o=new Array,i=!1;r&&-2!==a.ssrc&&-3!==a.ssrc&&(t-=1);for(var s=Math.min(t,e.length),c=0;c<s;c++){var u=y.constructSvcShowAttendanceInfo(e[c]);u&&o.push(u),i=!0}return N(o),w("initSvcShowAttendances end,newSvcShowAttendances:",o),i},a.updateBigSmallShowAttendances=function(e,t){w("updateBigSmallShowAttendances start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcViewMode,a=n.maxSizeForPage,o=n.svcShowPage,i=n.svcBigPicInfo,s=(n.isSvcBroadcastMode,n.svcBroadcastData,n.isSvcShareMode),c=!1,u=y.getCanUseAttendancesPos(r,o,a,s),f=(0,l.default)([],t),d=new Array,p=0;if(0===o){s&&-2!==i.ssrc&&-3!==i.ssrc&&(a-=1);if(1!==f[0].is_self&&1===e[0].is_self){w("updateBigSmallShowAttendances: add local attendance to svcShowAttendance",[e[0]],!1);var h=y.constructSvcShowAttendanceInfo(e[0]);f.splice(0,0,h),c=!0}for(var g=0;g<1;g++)d.push(f[g]);p=1}for(var v=y.getCanUseAttendances(u,e,f),m=p;m<f.length;m++){var S=$getState().conf,I=S.isSameGradeMcu,E=S.serialMcuMemberList;if(0===I&&0===f[m].is_same_grade_mcu){y.checkSerialConf(f[m].number)||(c=!0),E.length>0?d.push(f[m]):(!1,y.removeSvcSSRC(f[m].ssrc),c=!0)}else if(y.isOnline(f[m]))w("updateBigSmallShowAttendances:push old inline",[f[m]],!1),d.push(f[m]);else if(v.length>0){C.info("updateBigSmallShowAttendances:update old offline "+f[m].number.substr(0,3)+"****"+f[m].number.substr(-3)+" to inline "+v[0].number.substr(0,3)+"****"+v[0].number.substr(-3));var b=y.updateSvcShowAttendanceInfo(f[m],v[0]);d.push(b),v.splice(0,1),c=!0}else y.removeSvcSSRC(f[m].ssrc),c=!0}for(var T=0;T<v.length;T++)if(d.length<a){var O=y.constructSvcShowAttendanceInfo(v[T]);O&&(d.push(O),c=!0)}for(;d.length>a;)y.removeSvcSSRC(d[d.length-1].ssrc),d.pop(),c=!0;return 0!==d.length?N(d):($dispatch(coreUi.changeSvcShowPage(0)),y.initSvcShowAttendances(e,a),s&&(0,_.refreshShareSize)(i.ssrc)),w("updateBigSmallShowAttendances end,newSvcAttendancesTemp:",d),c},a.addRemoveBroadcast=function(e,t,n,r){C.info("addRemoveBroadcast",e);var a=!1;if(e){if(1!==n[0].is_broadcast||1===n[0].is_self){w("addRemoveBroadcast: add broadcast to svsShowAttendance",[r[0]],"PC");var o=y.constructSvcShowAttendanceInfo(r[0]);n.splice(0,0,o),a=!0}else if(n[0].number!==t.number){w("addRemoveBroadcast: update broadcast to attendance",[r[0]],"PC");var i=y.updateSvcShowAttendanceInfo(n[0],r[0]);n[0]=i,a=!0}}else 1===n[0].is_broadcast&&0===n[0].is_self&&(w("addRemoveBroadcast: delete broadcast from svsShowAttendance",[n[0]]),y.removeSvcSSRC(n[0].ssrc),n.splice(0,1),a=!0);return a},a.updateDivideShowAttendances=function(e,t){w("updateDivideShowAttendances start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=n.maxSizeForPage,o=n.svcViewMode,i=!1,s=(0,l.default)([],t),c=y.getCanUseAttendancesPos(o,r,a),u=y.getCanUseAttendances(c,e,t),f=new Array;if(e.length>0&&1===e[0].is_self&&y.isInSvcShowAttendances(e[0])<0){var d=y.constructSvcShowAttendanceInfo(e[0]);d&&f.push(d),i=!0}for(var p=0;p<s.length;p++){var h=(s[p].number,$getState().conf),g=h.isSameGradeMcu,v=h.serialMcuMemberList;if(0===g&&0===s[p].is_same_grade_mcu){y.checkSerialConf(s[p].number)||(i=!0),v.length>0?f.push(s[p]):(!1,y.removeSvcSSRC(s[p].ssrc),i=!0)}else if(y.isOnline(s[p]))w("updateDivideShowAttendances:push old inline",[s[p]],!1),f.push(s[p]);else if(u.length>0){C.info("updateDivideShowAttendances:update old offline "+handlePhoneNumber(s[p].number)+" to inline "+handlePhoneNumber(u[0].number));var m=y.updateSvcShowAttendanceInfo(s[p],u[0]);f.push(m),u.splice(0,1),i=!0}else y.removeSvcSSRC(s[p].ssrc),i=!0}for(var _=0;_<u.length&&f.length<a;_++){var S=y.constructSvcShowAttendanceInfo(u[_]);S&&(f.push(S),i=!0)}for(;f.length>a;)y.removeSvcSSRC(f[f.length-1].ssrc),f.pop(),i=!0;return f.length>1?N(f):($dispatch(coreUi.changeSvcShowPage(0)),y.initSvcShowAttendances(e,a)),w("updateDivideShowAttendances end --- newSvcAttendancesTemp:",f),i},a.setSvcVideoRender=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,v,m,_,w,S,I,E,N,b,T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true",O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcViewMode,a=n.svcBigPicInfo,o=n.svcDivideWinSize,i=n.ssrcRange,s=n.svcRenders,c=n.isSvcShareMode,u=n.svcShareData,f=n.svcOnLineAttendances,l=n.isOppsite,d=n.isShowMainScreen,C.info("setSvcVideoRender start, svcViewMode="+r+", old svcRenders length is "+s.length+",divisize w="+o.width+",h="+o.height),h=new Array,v={width:127,height:70},m=coreCall.getBigContainerSize(),0===r||2===r?m=y.calcBigCanvasRatio():1===r&&(v=y.handleRealCanvasSize(o.width,o.height)),_=void 0,(2!==r||!l)&&a.hasOwnProperty("ssrc")||"false"!==O){e.next=13;break}return e.next=10,coreCall.setSvcLocalVideoRender(m);case 10:_=e.sent,e.next=16;break;case 13:return e.next=15,coreCall.setSvcLocalVideoRender(v);case 15:_=e.sent;case 16:if(w={render:_,ssrc:-1},_&&(C.info("[SVC TupRender2]setSvcVideoRender,renderURI = local_frame_share "),h.push(w)),!(f.length>=2)){e.next=37;break}if(2!==f.length||c){e.next=23;break}C.info("no need set small render"),e.next=37;break;case 23:S=0;case 24:if(!(S<t.length)){e.next=37;break}if(1!==t[S].is_self){e.next=27;break}return e.abrupt("continue",34);case 27:return I=t[S].ssrc,E=t[S].ssrc+"_frame_share",1===r&&t[S].svcDivideCanvasSize&&0!==t[S].svcDivideCanvasSize.width&&0!==t[S].svcDivideCanvasSize.height&&(v=t[S].svcDivideCanvasSize),e.next=32,coreCall.setSvcRemoteVideoRender(I,E,v);case 32:_=e.sent,_&&(C.info("[SVC TupRender2]setSvcVideoRender,renderURI = "+E+",newRenderSize is "+(0,p.default)(v)),w={render:_,ssrc:t[S].ssrc},h.push(w));case 34:S++,e.next=24;break;case 37:if(0!==r&&2!==r||"NoBig"===T){e.next=50;break}if(N=i.min,b=i.min+"_frame_share",2!==r||!l){e.next=46;break}return e.next=43,coreCall.setSvcRemoteVideoRender(N,b,v);case 43:_=e.sent,e.next=49;break;case 46:return e.next=48,coreCall.setSvcRemoteVideoRender(N,b,m);case 48:_=e.sent;case 49:_&&(C.info("[SVC TupRender2]setSvcVideoRender,renderURI = "+b+",newRenderSize is "+(0,p.default)(m)),w={render:_,ssrc:N},h.push(w));case 50:if(d||!c||!u.hasOwnProperty("ssrc")||-3!==u.ssrc||"false"!==O){e.next=53;break}return e.next=53,coreCall.setSvcBFCPVideoRender(m);case 53:y.clearOldRenders(s,h),"true"===T&&h.length!==s.length&&coreCall.svcRedistributeVideoTmmbr($getState().call.callId),C.info("setSvcVideoRender end,new svcRenders.length ="+h.length+",flag="+T);case 56:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.clearOldRenders=function(){var e=(0,m.default)(g.default.mark(function e(t,n){var r,a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("clearOldRenders start,oldRenders length = "+t.length+",newRenders length = "+n.length),r=0;case 2:if(!(r<t.length)){e.next=19;break}a=!1,o=0;case 5:if(!(o<n.length)){e.next=12;break}if(t[r].ssrc!==n[o].ssrc){e.next=9;break}return a=!0,e.abrupt("break",12);case 9:o++,e.next=5;break;case 12:if(a){e.next=16;break}return C.info("clearOldRenders, close ssrc is "+t[r].ssrc),e.next=16,coreCall.closeSvcRemoteSocket(t[r].ssrc);case 16:r++,e.next=2;break;case 19:$dispatch(coreUi.changeSvcRenders(n));case 20:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setSvcLocalRender=(0,m.default)(g.default.mark(function e(){var t,n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("setSvcLocalRender start"),t=new Array,n=y.calcBigCanvasRatio(),$dispatch(coreUi.changeBigWinStyle(n)),e.next=6,coreCall.setSvcLocalVideoRender(n);case 6:r=e.sent,r&&(a={render:r,ssrc:-1},C.info("setSvcLocalRender,setSvcLocalVideoRender,renderURI = local_frame_share"),t.push(a),$dispatch(coreUi.changeSvcRenders(t))),C.info("setSvcLocalRender end");case 9:case"end":return e.stop()}},e,void 0)})),a.setDesktopMaxEncodeResolution=(0,m.default)(g.default.mark(function e(){var t,n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf.svcDesktopMaxEncode,!(isNullOrEmpty(t)||0===t.width&&0===t.height)){e.next=3;break}return e.abrupt("return");case 3:return"win"!==window.CLIENTCONFIG.PLATFORM&&"mac"!==window.CLIENTCONFIG.PLATFORM||(window.cpus&&window.cpus>=4?(1===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS||0===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS&&t.width>=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720.width)&&(t=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720),C.info("Svc_Esight_Config_CPUS")):(1===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS||0===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS&&t.width>=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_540.width)&&(t=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_540),C.info("Svc_Esight_Config_CPUS"))),n={svc_max_enc_res:{width:t.width,height:t.height}},C.info("Svc_Esight_Config setDesktopMaxEncodeResolution start, media= ",n),e.next=8,coreTup.getCallInstance();case 8:return r=e.sent,e.next=11,r.configSvcEncodeParam(n);case 11:case"end":return e.stop()}},e,void 0)})),a.setMobileMaxEncodeResolution=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcMobileMaxSoftEncode,a=n.svcMobileMaxHardEncode,!isNullOrEmpty(r)&&0!==r.width&&0!==r.height||!isNullOrEmpty(a)&&0!==a.width&&0!==a.height){e.next=4;break}return C.info("Svc_Esight_Config setMobileMaxEncodeResolution return"),e.abrupt("return");case 4:return o={callid:t,infoid:0},e.next=7,coreTup.getCallInstance();case 7:return i=e.sent,e.next=10,i.getBasicCallInfo(o);case 10:if(s=e.sent,0!==s.result){e.next=15;break}C.info("Svc_Esight_Config setMobileMaxEncodeResolution getBasicCallInfo success"),e.next=17;break;case 15:return C.info("Svc_Esight_Config setMobileMaxEncodeResolution getBasicCallInfo failed"),e.abrupt("return");case 17:if(c=void 0,0===s.param.call_info.svc_is_support_hd_encoder?(c=$getState().conf.svcMobileMaxSoftEncode,C.info("Svc_Esight_Config setMobileMaxEncodeResolution soft maxEncode= ",c)):(c=$getState().conf.svcMobileMaxHardEncode,C.info("Svc_Esight_Config setMobileMaxEncodeResolution hard maxEncode= ",c)),!(isNullOrEmpty(c)||0===c.width&&0===c.height)){e.next=21;break}return e.abrupt("return");case 21:return u={svc_max_enc_res:{width:c.width,height:c.height}},C.info("Svc_Esight_Config setMobileMaxEncodeResolution start"),e.next=25,i.configSvcEncodeParam(u);case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMaxWatchResolutionByLevelId=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={callid:t,infoid:2},r=void 0,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=11;break}return e.next=5,coreTup.getCallInstance();case 5:return a=e.sent,e.next=8,a.getBasicCallInfo(n);case 8:r=e.sent,e.next=14;break;case 11:return e.next=13,coreCall.getBasicCallInfoNew(n);case 13:r=e.sent;case 14:if(0!==r.result){e.next=18;break}C.info("Svc_Esight_Config setMaxWatchResolutionByLevelId getBasicCallInfo success"),e.next=20;break;case 18:return C.info("Svc_Esight_Config setMaxWatchResolutionByLevelId getBasicCallInfo failed"),e.abrupt("return");case 20:o=r.param.tx_main_video.width,i=r.param.tx_main_video.height,s={width:0,height:0},1280===o&&720===i?(s.width=1280,s.height=720):704===o&&576===i?(s.width=640,s.height=360):C.error("level-id info acheived is error"),0!==s.width&&0!==s.height&&$dispatch(coreUi.changeSvcMaxWatchResolution(s)),C.info("Svc_Esight_Config setMaxWatchResolutionByLevelId maxWatchResolution",s);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.sendWatchSvcRequest=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,v,m,_,S,I,E,N,b,T,O,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShowAttendances;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new Array,n={},r=$getState().conf,a=r.svcBigPicInfo,o=r.svcViewMode,i=r.ssrcRange,s=r.usedSsrcList,c=r.svcOnLineAttendances,u=r.svcControlMode,f=r.isSvcShareMode,d=r.isBigConf,p=r.svcShowPage,h=r.isSameGradeMcu,v=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720),m=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180),_=c.length>0?c[0].number:"0",S=0;case 7:if(!(S<c.length)){e.next=14;break}if(!c[S].is_self){e.next=11;break}return _=c[S].number,e.abrupt("break",14);case 11:S++,e.next=7;break;case 14:if(I=$getState().conf.svcDesktopSpeakerBigMaxLook,E=$getState().conf.svcMaxWatchResolution,isNullOrEmpty(I)||0===I.width||0===I.height||(v.width=I.width,v.height=I.height,C.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchAttendeeSize= ",v)),v=y.getRealResolution(v,E),m=y.getSmallWatchAttendeeSize(),N=null,0!==o&&2!==o||(C.info("sendWatchSvcRequest,add bigPic watch attendance start"),b="",1===u?a.ssrc>0?(y.isOnline(a)||y.checkSerialConf(a.number)?b=a.number:($dispatch(coreUi.changeSvcBigPicInfo({ssrc:i.min})),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeIsSvcSelectMode(!1))),2!==c.length||f||($dispatch(coreUi.changeIsSvcSelectMode(!1)),b=""),N={number:b,ssrc:i.min,width:v.width,height:v.height},t.push(N),C.info("sendWatchSvcRequest,add bigPic watch attendance "+b.substr(0,3)+"****"+b.substr(-3))):-2!==a.ssrc&&-3!==a.ssrc||(N={number:b,ssrc:0,width:v.width,height:v.height},t.push(N),C.info("sendWatchSvcRequest,add share watch attendance "+b.substr(0,3)+"****"+b.substr(-3))):(N={number:b,ssrc:i.min,width:v.width,height:v.height},t.push(N),C.info("sendWatchSvcRequest,add bigPic watch attendance "+b.substr(0,3)+"****"+b.substr(-3)))),!(c.length>=2)){e.next=35;break}if(2!==c.length||f){e.next=26;break}C.info("no need send small watch request"),e.next=35;break;case 26:T=0;case 27:if(!(T<x.length)){e.next=35;break}if(1!==x[T].is_self){e.next=30;break}return e.abrupt("continue",32);case 30:0===h&&0===x[T].is_same_grade_mcu?N={number:"M255T0",ssrc:x[T].ssrc,width:m.width,height:m.height}:(d&&0===p&&(x[T].number=""),N={number:x[T].number,ssrc:x[T].ssrc,width:m.width,height:m.height}),t.push(N);case 32:T++,e.next=27;break;case 35:w("sendWatchSvcRequest watchAttendees is ",t,"SSRC"),O={attendeeList:t,selfNum:_},coreConf.sendWatchSvcRequestService(O);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleWinResize=function(){var e=(0,m.default)(g.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("handleWinResize"),t=$getState().conf.svcShowAttendances,1===n&&(y.handleDivideModeWinSize(),y.dealDivideCanvasSize(),y.setSvcVideoRender(t));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.dealDivideCanvasSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;C.info("dealDivideCanvasSize");for(var t=y.calcCanvas16And9Size(e,constant.VIDEO_SIZE_BITE.SIZE_16_B_9),n=y.calcCanvas16And9Size(e,constant.VIDEO_SIZE_BITE.SIZE_9_B_16),r=$getState().conf.svcShowAttendances,a=0;a<r.length;a++)r[a].svcDivideCanvasSize&&r[a].svcDivideCanvasSize.width<r[a].svcDivideCanvasSize.height?r[a].svcDivideCanvasSize=n:r[a].svcDivideCanvasSize=t;N(r)},a.handleRealCanvasSize=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9;C.info("handleRealCanvasSize",e,t);var a=e,o=t,i=n,s=r,c=e/i,u=t/s,f={width:0,height:0};return c>u?(a=Math.floor(i*u),f={width:a,height:t}):(o=Math.floor(s*c),f={width:e,height:o}),f},a.getBigCanvasSize=function(){C.info("getBigCanvasSize");var e=$getState().conf,t=e.isSvcShareMode,n=e.svcOnLineAttendances,r=e.svcViewMode,a=coreCall.getBigContainerSize();return 0===r?t?n.length<=1?a.height=a.height-54:a.height=a.height-54-74:n.length<=2?a.height=a.height-54:a.height=a.height-54-74:2===r&&(a.height=a.height-54),a},a.calcBigCanvasRatio=function(){C.info("calcBigCanvasRatio");var e=$getState().conf,t=(e.isSvcShareMode,e.svcOnLineAttendances,e.svcViewMode,$getState().call.bigWinStyle),n=y.getBigCanvasSize();return n=t.width<t.height?y.handleRealCanvasSize(n.width,n.height,constant.VIDEO_SIZE_BITE.SIZE_9_B_16.width,constant.VIDEO_SIZE_BITE.SIZE_9_B_16.height):y.handleRealCanvasSize(n.width,n.height),$dispatch(coreUi.changeBigWinStyle(n)),n},a.calcCanvas16And9Size=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.VIDEO_SIZE_BITE.SIZE_16_B_9;C.info("calcCanvas16And9Size");var n=$getState().conf,r=n.svcDivideWinSize,a=n.svcViewMode,o=0,i=0;if(1===a)o=r.width,i=r.height;else{var s=y.getBigCanvasSize();o=s.width,i=s.height}var c=o,u=i,f=t.width,l=t.height;e&&0!==e.width&&0!==e.height&&(f=e.width,l=e.height);var d=y.handleRealCanvasSize(c,u,f,l);return d.width-=2,d.height-=2,d},a.handleDivideModeCanvasSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;C.info("handleDivideModeCanvasSize,originalWidth is "+t+",originalHeight is "+n);var r=$getState().conf.svcDivideWinSize,a=r.width,o=r.height,i=a,s=o,c=a/t,u=o/n,f={width:0,height:0};c>u?(i=Math.floor(t*u),f={width:i,height:o}):(s=Math.floor(n*c),f={width:a,height:s}),f.width-=2,f.height-=2;for(var l=$getState().conf.svcShowAttendances,d=0;d<l.length;d++)if(l[d].ssrc===e){l[d].svcDivideCanvasSize=f;var p=l[d].ssrc+"_frame_share";coreCall.setSvcRemoteVideoRender(l[d].ssrc,p,f);break}N(l)},a.handleDivideModeWinSize=function(){C.info("handleDivideModeWinSize");var e=$getState().conf.svcShowAttendances,t=coreCall.getBigContainerSize(),n={width:0,height:0};t={width:t.width,height:t.height-54-50},e.length>20?(n.width=Math.floor(t.width/5),n.height=Math.floor(t.height/5)):e.length>16?(n.width=Math.floor(t.width/5),n.height=Math.floor(t.height/4)):e.length>12?(n.width=Math.floor(t.width/4),n.height=Math.floor(t.height/4)):e.length>9?(n.width=Math.floor(t.width/4),n.height=Math.floor(t.height/3)):e.length>6?(n.width=Math.floor(t.width/3),n.height=Math.floor(t.height/3)):e.length>4?(n.width=Math.floor(t.width/3),n.height=Math.floor(t.height/2)):e.length>2?(n.width=Math.floor(t.width/2),n.height=Math.floor(t.height/2)):2===e.length&&(n.width=Math.floor(t.width/2),n.height=Math.floor(t.height)),$dispatch(coreUi.changeDivideWinSize(n))},a.constructSvcShowAttendanceInfo=function(e){if(C.info("constructSvcShowAttendanceInfo attendance number is "+e.number.substr(0,3)+"****"+e.number.substr(-3)),e){var t=$getState().conf,n=t.ssrcRange,r=t.usedSsrcList,a=-1;if(0===e.is_self){for(a=n.max;r.indexOf(a)>=0;)a--;if(a<n.min)return C.info("constructSvcShowAttendanceInfo ssrc "+a+" is not include in ssrcRange "+n.min+"-"+n.max),null;y.addSvcSSRC(a)}return{name:e.name,number:e.number,is_self:e.is_self,is_speaker:e.is_speaker,role:e.role,is_broadcast:e.is_broadcast,is_same_grade_mcu:e.is_same_grade_mcu,ssrc:a}}},a.updateSvcShowAttendanceInfo=function(e,t){var n="name:"+t.name.substr(0,1)+"**"+t.name.substr(-1)+",number:"+t.number.substr(0,3)+"****"+t.number.substr(-3);C.info("updateSvcShowAttendanceInfo oldAttendance:"+e.number.substr(0,3)+"****"+e.number.substr(-3)+", newAttendance:"+n);var r=(0,l.default)({},e);return r.name=t.name,r.number=t.number,r.is_self=t.is_self,r.role=t.role,r.is_same_grade_mcu=t.is_same_grade_mcu,r},a.getOnLineAttendances=function(e){for(var t=$getState().conf.isSameGradeMcu,n=new Array,r=$getState().conf.svcShowAttendances,a=!1,o=!1,i=new Array,s={name:"",number:"M255T0",is_self:0,is_broadcast:0,is_same_grade_mcu:0,role:0},c=0;c<e.length;c++){var u=0!=(e[c].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[c].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(5===e[c].state&&u){if(0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self){1===e[c].is_broadcast&&(s.is_broadcast=1,s.number=e[c].number),o=!0,i.push({number:e[c].number,is_mute:e[c].is_mute});continue}1===e[c].is_self?(a=!0,window.CLIENTCONFIG.ISMOBILE&&$dispatch(coreUi.changeSvcSelfNumber(e[c].number)),$dispatch(coreUi.changeSvcSelfName(e[c].name)),n.splice(0,0,e[c])):5===e[c].state&&u&&n.push(e[c])}for(var f=0;f<r.length;f++)r[f].number===e[c].number&&r[f].name!==e[c].name&&e[c].name&&(r[f].name=e[c].name)}return o?($dispatch(coreUi.changeSerialMemberList(i)),n.splice(1,0,s)):$dispatch(coreUi.changeSerialMemberList([])),N(r),w("getOnLineAttendances end,onLineAttendances:",n,"PC"),a?n:"NOSelfNOWatch"},a.dealSvcBroadcastUpdate=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i,c,u,f,l,d,p;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("dealSvcBroadcastUpdate start"),n=$getState().conf,r=n.isSvcBroadcastMode,a=n.svcBroadcastData,o=n.svcBigPicInfo,i=n.ssrcRange,c=n.svcViewMode,u=n.svcBandMode,0!==t.length){e.next=4;break}return e.abrupt("return");case 4:f=!1,l=0;case 6:if(!(l<t.length)){e.next=15;break}if(f=1===t[l].is_broadcast&&1!==t[l].is_self){e.next=10;break}return e.abrupt("continue",12);case 10:return(0,s.default)(a).length>0&&a.number===t[l].number?C.info("dealSvcBroadcastUpdate: the broadcast is the same"):(C.info("dealSvcBroadcastUpdate: control mode to broadcast mode"),d={name:t[l].name,number:t[l].number,is_self:t[l].is_self,is_speaker:t[l].is_speaker,role:t[l].role,ssrc:i.min,is_same_grade_mcu:t[l].is_same_grade_mcu},o.hasOwnProperty("ssrc")&&-3===o.ssrc&&coreCall.resetBFCStatus($getState().call.callId,0),$dispatch(coreUi.changeIsShowMainScreen(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(d)),$dispatch(coreUi.changeSvcBigPicInfo(d)),$dispatch(coreUi.changeSvcControlMode(0)),1===c&&(C.info("dealSvcBroadcastUpdate: switch control mode to broadcast mode and switch layout mode to BigAndSmall mode"),p=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===u&&(p=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeMaxSizeForPage(p)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(0))),window.isChangeOfBroadcast=!0),e.abrupt("break",15);case 12:l++,e.next=6;break;case 15:!f&&r&&(o.number===a.number&&(C.info("dealSvcBroadcastUpdate: control mode to mute mode"),$dispatch(coreUi.changeSvcControlMode(0))),C.info("dealSvcBroadcastUpdate: cancel broadcast mode"),$dispatch(coreUi.changeIsSvcBroadcastMode(!1)),$dispatch(coreUi.changeSvcBroadcastData({})),window.isChangeOfBroadcast=!0);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.isOnline=function(e){for(var t=$getState().conf.svcOnLineAttendances,n=!1,r=e.number,a=0;a<t.length;a++)if(r===t[a].number){n=!0;break}return n},a.isInSvcShowAttendances=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=$getState().conf.svcShowAttendances;t.length>0&&(n=t);for(var r=-1,a=0;a<n.length;a++){e.number;if(0===$getState().conf.isSameGradeMcu&&0===e.is_same_grade_mcu&&"M255T0",n[a].number===e.number){r=a;break}}return r},a.getCanUseAttendancesPos=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];C.info("getCanUseAttendancesPos maxSizeForPage:"+n+",isSvcShareMode:"+r);var a=0,o=$getState().conf.svcBigPicInfo;return 1===e?t>0&&(a=t*(n-1)+1):0===e&&(a=r&&o.hasOwnProperty("ssrc")&&-2!==o.ssrc&&-3!==o.ssrc?Math.max(0,t*n-1):t*n),a},a.getCanUseAttendances=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];C.info("getCanUseAttendances startPos:"+e);for(var r=!1,a=$getState().conf.isSameGradeMcu,o=0;o<n.length;o++)if(0===a&&0===n[o].is_same_grade_mcu){r=!0;break}for(var i=new Array,s=e;s<t.length;s++)r&&0===t[s].is_same_grade_mcu||0===t[s].is_self&&y.isInSvcShowAttendances(t[s],n)<0&&i.push(t[s]);return w("getCanUseAttendances end,canUseOnLineAttendances:",i,"PC"),i},a.addSvcSSRC=function(e){C.info("addSSRC: "+e,e);var t=$getState().conf.usedSsrcList,n=(0,l.default)([],t);n.push(e),$dispatch(coreUi.changeUsedSvcSSRCList(n))},a.removeSvcSSRC=function(){var e=(0,m.default)(g.default.mark(function e(t){var n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("removeSSRC: "+t,t),-1!==t){e.next=3;break}return e.abrupt("return");case 3:n=$getState().conf,r=n.usedSsrcList,a=n.svcRenders,o=(0,l.default)([],r),i=o.indexOf(t),o.splice(i,1),$dispatch(coreUi.changeUsedSvcSSRCList(o));case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getSmallWatchAttendeeSize=function(){C.info("getSmallWatchAttendeeSize");var e=$getState().conf,t=e.svcShowAttendances,n=e.svcViewMode,r=t.length-1,a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);if(1===n)if(r>=2&&r<=6){a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);var o=$getState().conf.svcDesktopDivideModeMaxLook2_6;a=y.getRealResolution(a,o)}else if(r>=7&&r<=16){a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var i=$getState().conf.svcDesktopDivideModeMaxLook7_16;a=y.getRealResolution(a,i)}else{a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var s=$getState().conf.svcDesktopDivideModeMaxLook17_24;a=y.getRealResolution(a,s)}else{var c=$getState().conf.svcDesktopSpeakerModeSmallMaxLook;a=y.getRealResolution(a,c)}var u=$getState().conf.svcMaxWatchResolution;return a=y.getRealResolution(a,u)},a.getRealResolution=function(e,t){var n=e;return!isNullOrEmpty(t)&&(t.width>0||t.height>0)&&n.width>t.width&&n.height>t.height&&(n.width=t.width,n.height=t.height,C.info("[getRealResolution]Svc_Esight_Config Destop esightConfigRes is worked,watchSize= ",n)),n},a.checkSerialConf=function(e){for(var t=!1,n=$getState().conf.serialMcuMemberList,r=0;r<n.length;r++)if(n[r].number===e){t=!0;break}return t},o)},249:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=0===e.param.ret;return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_EXTEND,extraTrackKey:null,resultParams:t?[1]:[0,e.param.ret]}),m.handleGetDataPostponeConf(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isMemberListNull=t.isUserEndConf=t.getInfoOfConf=t.getSsrcRange=t.isSvcConf=t.isDataConf=t.isVideoConf=t.getIsAvcMultiViewBroadcast=t.setIsAvcMultiViewBroadcast=t.getCurrentConfId=t.getSavedRecallInfo=t.getUpdatedParticipants=t.getIsRecall=t.setIsFirstEnterConf=t.getIsFirstEnterConf=t.setIsSmcFirstRequestCharimanRest=t.getIsSmcFirstRequestCharimanRest=t.cloudRecordRequest=t.changeActiveDirection=t.confctrlWatchAttendee=t.sendWatchSvcRequest=t.updateConfMemberList=t.handleTransToConfResult=t.handleSvcSeessionModify=t.handleCallEndedPostConf=t.handleConfEnded=t.broadcastAttendee=t.leaveConf=t.getConfMemberListContent=t.acceptConf=t.rejectConf=t.enterConfByIdOnlyService=t.enterConfInConfListService=t.oneKeyEnterConfService=t.handleConfBeTransferToConf=t.handleConfIncoming=t.handleConfInfoNotify=t.handleConfConnected=t.handleGetConfInfoRes=t.getConfInfoService=t.transferChairman=t.cancelConf=t.unSubscribeConfList=t.subscribeConfList=t.getConfList=t.getVRMList=t.setConfNotifyFunc=t.changeConfSelfRole=t.requestChairman=t.releaseChairman=t.handupService=t.postponeConf=t.lockConf=t.muteConf=t.muteAttendee=t.removeAttendee=t.callAttendee=t.hangupAttendee=t.addAttendee=t.reInviteAttendee=t.endConf=t.p2pTransferConf=t.isConfChairMan=t.isNeedUpdate2DataConf=t.isInConf=t.upgradeConf=t.createConf=t.confctrlInit=t.bookConf=void 0;var i=n(69),s=a(i),c=n(1),u=a(c),f=n(2),l=a(f),d=n(650),p=a(d),h=n(226),g=n(405),v=n(153),m=r(v),_=n(208),C=r(_),w=n(186),S=r(w),I=coreLogger.getLogger("confModel")("index"),E=null,N=constant.MEETING_NET_TYPE.MEDIAX_MEETING,b=null,T=(t.bookConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p.default(t,!1),e.next=3,n.bookConf(t.confSubject,t.groupUri,t.isMultiStream,t.mediaType,t.userType,t.start_time,t.conf_len,t.time_zone,t.noPassword,t.vmrConfId);case 3:return r=e.sent,n=null,I.info("bookConf,set confService null"),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confctrlInit=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:t=e.sent,n=t.isSupportAS,I.info("confctrlInit getConfList or subscribeConfList, isSupportAS = "+n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===E){e.next=3;break}return I.error("conf service is not null"),e.abrupt("return");case 3:return E=new p.default(t),e.next=6,E.createConf(t.confSubject,t.groupUri,t.isMultiStream,t.mediaType,t.userType,t.noPassword,t.deviceSet,t.vmrConfId);case 6:return n=e.sent,r=n.errorCode,0!==r&&(E=null,I.error("createConf fail ,set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.upgradeConf=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.error("upgradeConf start"),null!==E){e.next=4;break}return I.error("no conf service exist，can not upgradeConf"),e.abrupt("return");case 4:return S.setIsAutoStartScreenShare(!0),e.next=7,E.upgradeConf();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInConf=function(){return!(null===E)},t.isNeedUpdate2DataConf=function(){return null===E||null!==E&&!S.confInfoNotifyParamsExist()&&E.confInfo.mediaType<=16},t.isConfChairMan=function(){return null!==E&&1===E.confInfo.confRole},t.p2pTransferConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===E){e.next=3;break}return I.error("conf service is not null"),e.abrupt("return");case 3:return E=new p.default(t),void 0!==t.isAutoScreenShare?S.setIsAutoStartScreenShare(t.isAutoScreenShare):S.setIsAutoStartScreenShare(!1),e.next=7,E.p2pTransferConf(t);case 7:return n=e.sent,r=n.errorCode,0!==r&&(I.error("confService.p2pTransferConf fail,set confService null"),E=null),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endConf=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("endConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.endConf();case 5:return t=e.sent,I.info("endConf set confService null, res = "+t),E=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reInviteAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("reInviteAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.reInviteAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.addAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("addAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.addAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.hangupAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("hangupAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.hangupAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.callAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("callAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.callAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.removeAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("removeAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.removeAttendee(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.muteAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("muteAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.muteAttendee(t.isMute,t.attendee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.muteConf=function(){var e=(0,l.default)(u.default.mark(function e(t,n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("muteConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.muteConf(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.lockConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("lockConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.lockConf(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.postponeConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("postponeconf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.postponeConf(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handupService=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("handupService no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.handup(t.isHandup,t.attendee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.releaseChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("releaseChairman no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.releaseChairman(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("requestChairman no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.requestChairman(t.chairmanPwd,t.reqNumber);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeConfSelfRole=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==E&&(I.info("changeConfSelfRole "+t),E.confInfo.confRole=t,window.CLIENTCONFIG.ISMOBILE&&(I.info("notifyIsSelfChairManToNative "+t),window.notifyIsSelfChairManToNative(t)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setConfNotifyFunc=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("set confctrl service callback func"),e.next=3,coreTup.getConfCtrlInstance();case 3:t=e.sent,t.setMultiNotifyFunc(491564,V),t.setNotifyFunc(491525,$),t.setNotifyFunc(491577,j),t.setNotifyFunc(491538,K),t.setNotifyFunc(491545,Y),t.setNotifyFunc(491556,J),t.setNotifyFunc(491544,re),t.setNotifyFunc(491563,W),t.setNotifyFunc(491600,G),t.setNotifyFunc(491566,H),t.setNotifyFunc(491580,B),t.setNotifyFunc(491595,U),t.setNotifyFunc(491552,Q),t.setNotifyFunc(491553,z),t.setNotifyFunc(491554,o),t.setNotifyFunc(491578,Z),t.setNotifyFunc(491567,P),t.setNotifyFunc(491579,F),t.setNotifyFunc(491535,ee),t.setNotifyFunc(491531,R),t.setNotifyFunc(491529,X),t.setNotifyFunc(491548,M),t.setNotifyFunc(491598,k),t.setNotifyFunc(491533,ae),t.setNotifyFunc(491534,oe),t.setNotifyFunc(491599,D),t.setNotifyFunc(491562,te),t.setNotifyFunc(491557,ne),t.setNotifyFunc(491550,L),t.setNotifyFunc(491582,T),t.setNotifyFunc(491581,A),t.setNotifyFunc(491588,ie),t.setNotifyFunc(491570,ce),t.setNotifyFunc(491589,ue),t.setNotifyFunc(491603,q),t.setNotifyFunc(491601,x),t.setNotifyFunc(491571,le),t.setNotifyFunc(491609,fe),t.setNotifyFunc(491610,se);case 43:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){coreCommon.Observer.publish("AudientResult",e)}),y=function(e){for(var t=0,n=0,r=0;r<e.length;r++)t=e.charCodeAt(r),10===t?n+=2:t<127?n+=1:t>=128&&t<=2047?n+=2:t>=2048&&t<=65535&&(n+=3);return n},O=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().myInfo,r=n.account,a=n.name,I.info("confSignRequest attendee",t.substr(0,3)+"**"+t.substr(5,t.length)),I.info("confSignRequest account",r.substr(0,3)+"**"+r.substr(5,r.length)),I.info("confSignRequest name",a.substr(0,3)+"**"+a.substr(5,a.length)),o=parseInt((new Date).getTime()/1e3),I.info("confSignRequest date",o),e.next=8,E.confSignRequest(t,r,y(r),a,y(a),o);case 8:i=e.sent,I.info("confSignRequest",i),i&&0===i.result?window.CLIENTCONFIG.ISMOBILE?(I.info("mobile sign success"),setTimeout(function(){$dispatch(coreUi.createConfTipMsg([language.SIGNSUCCESS]))},3e3)):(I.info("window sign success"),s=$getState().conf.videoFrameHwnd,c=C.getAvcFrameHandles(),window.CLIENTCONFIG.ISWIN&&(f={frameHwnd:0!==s?s:c,dialog_type:1,content_id:"SIGNSUCCESS"},setTimeout(function(){(0,h.showMessageBox)(f)},3e3)),"mac"===window.CLIENTCONFIG.PLATFORM&&setTimeout(function(){window.Toast(language.SIGNSUCCESS,2,!1,"pcToast","")},3e3)):I.info("confSignRequest failed",i.result);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("confSignRequest data ",t),n=t.param.event_info,r=[],0===n.event_type&&0===n.open_switch&&(b=setInterval(function(){if(r=$getState().conf.memberListInfo,r.length>0)for(var e in r)if(r[e].is_self){O(r[e].number),clearInterval(b);break}},1e3));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),A=function(e){coreCommon.Observer.publish("ChangeDirectionResult",e)},L=function(e){var t=JSON.parse((0,s.default)(e));if(void 0!==t.param.number){var n="";n=t.param.number,t.param.number=handlePhoneNumber(n)}if(I.info("呼叫其他号码结果",t),E&&e.param&&e.param.reason){var r=E.localRemoveAttendee(e.param.number);r&&r.userInfo&&(e.param.userInfo=r.userInfo)}coreCommon.Observer.publish("callAttendeeResult",e)},k=function(e){coreCommon.Observer.publish("McuConfType",e)},R=function(e){coreCommon.Observer.publish("BroadcaseResult",e)},M=function(e){coreCommon.Observer.publish("inviteAttendeeResult",e)},D=function(e){coreCommon.Observer.publish("transferChairman",e)},P=function(e){coreCommon.Observer.publish("UportalBookConfResult",e)},F=function(e){coreCommon.Observer.publish("handleSvcWatchInd",e.param)},U=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("NonChairCtrlcaps",t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("handleSpeakerReport",t),7!==t.param.result&&115!==t.param.result||window.isSupportiDo||coreCommon.Observer.publish("UportalTokenErr",t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),W=(t.getVRMList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreTup.getConfCtrlInstance();case 4:return t=e.sent,e.next=7,coreAccount.getLoginModel();case 7:return n=e.sent,r=n.serverUportalAddress,a=n.serverUportalPort,e.next=12,t.getVRMList(r,a);case 12:o=e.sent,o&&0===o.result?I.info("get vmr list success"):I.info("get vmr list failed, result = "+o.result);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!((n=t.sipLoginOnly)||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.CLIENTCONFIG.ISBIGWIN)){e.next=7;break}return I.info("get conflist is it smc metting or bigwin or sipLoginOnly, return."),e.abrupt("return");case 7:return I.info("get conflist"),r={account_id:$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING?"":$getState().myInfo.account,conf_right:2,include_end:0,page_index:1,page_size:20},e.next=11,coreTup.getConfCtrlInstance();case 11:a=e.sent,a.getConfList(r);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.subscribeConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!(n=t.sipLoginOnly)&&!window.CLIENTCONFIG.ISBIGWIN){e.next=7;break}return I.warn("subscribeConfList is sipLoginOnly or bigwin, so return"),e.abrupt("return");case 7:return I.info("subscribe conf list ,as"),e.next=10,coreTup.getConfCtrlInstance();case 10:r=e.sent,r.subscribeConfList();case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.unSubscribeConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!(n=t.sipLoginOnly)&&!window.CLIENTCONFIG.ISBIGWIN){e.next=7;break}return I.warn("unSubscribeConfList is sipLoginOnly or bigwin, so return"),e.abrupt("return");case 7:return I.info("unsubscribe conf list ,as"),e.next=10,coreTup.getConfCtrlInstance();case 10:r=e.sent,r.unSubscribeConfList();case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.cancelConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("cancel the meeting,[coreConf]"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.cancelConf(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.transferChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("transfer chairman"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.transferChairman(t.confHandle,t.attendeeInfo);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getConfInfoService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("get confInfo"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.getConfInfo(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if(I.info("handleGetConfListRes: "+e.param.result),e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR)return void(window.CLIENTCONFIG.ENABLE_IT_MEETING&&e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED?window.refreshImToken():coreCommon.Observer.publish("UportalTokenErr",e));coreCommon.Observer.publish("ConfList",e.param)}),G=function(e){0!=e.param.result&&I.info("subscribe ConfList fail,error code= ",e.param.result)},V=t.handleGetConfInfoRes=function(e){if(I.info("handleGetConfInfoRes",e.param.result),e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR)return void coreCommon.Observer.publish("UportalTokenErr",e);if(coreCommon.Observer.publish("ConfInfo",e.param),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){var t=e.param?e.param.get_conf_info_result:null,n=t?t.conf_list_info:null;if(n&&n.guest_join_uri&&I.info("handleGetConfInfoRes has guest_join_uri = "+handlePhoneNumber(n.guest_join_uri)),n&&n.chairman_pwd&&I.info("handleGetConfInfoRes has chairman_pwd is "+n.chairman_pwd.substr(0,1)+"****"),t&&t.num_of_addendee>0){for(var r=t.attendee,a="",o=0;o<r.length;o++)a=a+r[o].name.substr(0,1)+"**"+r[o].name.substr(-1)+", ";I.info("handleGetConfInfoRes has attendee_name = "+a)}}constant.PAIR_STATE.PAIR_SUCCESS===$getState().synergismInfo.pairState&&(I.info("confinfo  end = "+(0,s.default)(e.param)),coreConf.getPairConfPasResult(e.param))},H=function(e){if(I.info("handleVMRConfResult: "+e.param.result),7===e.param.result)return window.CLIENTCONFIG.ENABLE_IT_MEETING?void 0:void coreCommon.Observer.publish("UportalTokenErr",e);coreCommon.Observer.publish("VMRConfResult",e.param)},$=function(e){E&&E.handleConfMTnumber(e)},j=(t.handleConfConnected=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=5;break}return e.next=3,E.handleConfConnected(t);case 3:e.next=11;break;case 5:if(I.error("confService is null, handleConfConnected"),!(t&&t.param&&t.param.handle)){e.next=11;break}return e.next=9,coreTup.getConfCtrlInstance();case 9:n=e.sent,n.leaveConf(t.param.handle);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if($getState().synergismInfo.inPairConf)return I.info("in pair conf, start handleConfRightResult"),void coreCommon.Observer.publish("pairInviteJoinConf",e);E&&E.handleConfRightResult(e)}),q=(t.handleConfInfoNotify=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info(" confinfonotify."),!E){e.next=6;break}return e.next=4,E.handleConfInfoNotify(t);case 4:e.next=12;break;case 6:if(I.info(" confinfonotify confservice is null"),!(t&&t.param&&t.param.handle)){e.next=12;break}return e.next=10,coreTup.getConfCtrlInstance();case 10:n=e.sent,n.leaveConf(t.param.handle);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("enter handleBigConfInfo"),E&&t.param&&t.param.type&&(I.info(" handleBigConfInfo data.param.type = "+t.param.type),E.handleBigConfInfo(t.param.type));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Y=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.isSameGradeMcu,a=n.isSvcConf,o=n.isAudience,0!==t.param.conf_status.num_of_participant||!a&&0!==r&&o){e.next=4;break}return I.info("don't attendeeListUpdate, isSvcConf = "+a+", isSameGradeMcu = "+r+", isAudience = "+o),e.abrupt("return");case 4:if(7!==t.param.result){e.next=9;break}if(I.error("CONFCTRL_E_EVT_ATTENDEE_LIST_UPDATE_IND,error result = 7"),window.isSupportiDo){e.next=9;break}return coreCommon.Observer.publish("UportalTokenErr",t),e.abrupt("return");case 9:if(!E||!E.isFirstGetMemberList||N!==constant.MEETING_NET_TYPE.SMC_MEETING){e.next=20;break}if(!t||0==(t.param.conf_status.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA)){e.next=14;break}E.isFirstGetMemberList=!1,e.next=20;break;case 14:if(!window.CLIENTCONFIG.ISBIGWIN||window.isSupportiDo){e.next=20;break}return coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreCommon.BigwinObserver.publish("OnJoinConfFailed"),coreCommon.BigwinObserver.publish("OnChangeHasSent",!0)),I.error("is Not DataConf, leave conf, confHandle=",confHandle),e.next=20,(0,v.actionLeaveConf)();case 20:E&&E.handleConfAttendeeListUpdate(t);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),K=function(e){E&&E.handleConfBroadCastLocal(e)},J=function(e){E&&E.handleMuteAttendeeResult(e)},z=function(e){E&&E.handleReleaseChairmanResult(e)},Q=function(e){E&&E.handleReqChairmanResult(e)},X=function(e){E&&E.handleEnterPwdToChairmanResult(e)},Z=(t.handleConfIncoming=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.confctrlInitAtomic.wait();case 2:if(null===E){e.next=11;break}if(I.error("already has conf, reject it"),!(t&&t.param&&t.param.handle)){e.next=10;break}return e.next=7,coreTup.getConfCtrlInstance();case 7:return n=e.sent,e.next=10,n.rejectConf(t.param.handle);case 10:return e.abrupt("return");case 11:return e.next=13,coreAccount.getLoginModel();case 13:r=e.sent,a=r.deployMode,a===constant.MEETING_NET_TYPE.SMC_MEETING?(I.info("conf incoming, handle = "+t.param.handle+", caller is "+handlePhoneNumber(t.param.conf_incoming_ind.number)+", mediaType is "+t.param.conf_incoming_ind.media_type),o={passcode:t.param.conf_incoming_ind.conf_id,confId:t.param.handle,callId:t.param.call_id,confSubject:t.param.conf_incoming_ind.subject,groupUri:t.param.conf_incoming_ind.group_uri,compereNumber:t.param.conf_incoming_ind.number,mediaType:t.param.conf_incoming_ind.media_type},E=new p.default(o)):E=new p.default,i=E.handleConfIncoming(t),i||(E=null,I.error("handleConfIncoming error, set confService null"));case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfBeTransferToConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("CONFCTRL_E_EVT_BE_TRANS_TO_CONF_IND,call transfer to conf, handle = "+t.param.handle+", mediaType is "+t.param.conf_info.media_type),null!==E){e.next=12;break}if(!(coreCall.getCallCount()>1||coreCall.getCallCount()<1)){e.next=10;break}if(I.warn("more than one call or no call, can not transfer to conf,getCallCount = "+coreCall.getCallCount()),!(t&&t.param&&t.param.handle)){e.next=9;break}return e.next=7,coreTup.getConfCtrlInstance();case 7:n=e.sent,n.leaveConf(t.param.handle);case 9:return e.abrupt("return");case 10:E=new p.default(null),E.setIsCallTransToConfTrue();case 12:return e.next=14,E.handleConfBeTransferToConf(t);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.oneKeyEnterConfService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.confctrlInitAtomic.wait();case 2:if(null===E){e.next=6;break}return I.error("conf service is not null in oneKeyEnterConfService"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 6:return E=new p.default(null),e.next=9,E.oneKeyEnterConf(t.confAcs,t.confId,t.confPwd,t.isVideo,t.deviceSet,t.isVMR);case 9:return n=e.sent,n||(E=null,I.error("oneKeyEnterConfService res = "+(0,s.default)(n)+"set confService null")),e.abrupt("return",n);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfInConfListService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===E){e.next=3;break}return I.error("conf service is not null in enterConfInConfList"),e.abrupt("return",!1);case 3:return E=new p.default(null),e.next=6,E.enterConfInConfList(t.confId,t.cycle_conf_id);case 6:return n=e.sent,n||(E=null,I.error("enterConfInConfListService fail,set confService null")),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===E){e.next=3;break}return I.error("conf service is not null in enterConfByIdOnlyService"),e.abrupt("return",!1);case 3:return E=new p.default(null),e.next=6,E.enterConfByIdOnly(t.confId,t.confPas,t.deviceSet);case 6:return n=e.sent,r=n.errorCode,0!==r&&(E=null,I.error("enterConfByIdOnlyService fail,set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.rejectConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("rejectConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.rejectConf(t);case 5:if(!(n=e.sent)||0!==n.result){e.next=12;break}return I.info("reject conf success,set confservice null"),E=null,e.abrupt("return",!0);case 12:return E=null,I.info("reject conf failed,set confservice null"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.acceptConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("acceptConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.acceptConf(t.confHandle,t.isVideoType);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getConfMemberListContent=function(){return null===E?void I.error("getConfMemberListContent no conf service exist"):E.getConfMemberListContent()},t.leaveConf=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("leaveConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.leaveConf(n);case 5:return t=e.sent,t&&0===t.result?(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_LEAVE,params:[1]}),coreConf.getConfInfoFromDb(),I.info("leave conf success,set confservice null")):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_LEAVE,params:[0,t.result]}),I.info("leave conf failed,set confservice null")),E=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.broadcastAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("broadcastAttendee no conf service exist"),e.abrupt("return");case 3:return $dispatch(coreUi.changeIsBroadByChairman(t.isBroadcast)),I.info("broadcastAttendee,isBroadcast is "+t.isBroadcast+",number is "+handlePhoneNumber(t.number)),e.next=7,E.broadcastAttendee(t.isBroadcast,t.number);case 7:if(!(n=e.sent)||0!==n.result){e.next=13;break}return I.info("broadcastAttendee success"),e.abrupt("return",n);case 13:return I.info("broadcastAttendee failed"),e.abrupt("return");case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfEnded=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.info("handleConfEnded confservice is null"),e.abrupt("return");case 3:return e.next=5,E.handleConfEnded(t);case 5:n=e.sent,n&&(S.beLeaveDataConf(),E=null,I.info("handleConfEnded,set confservice null"),coreConf.getConfInfoFromDb());case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleCallEndedPostConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=5;break}return e.next=3,E.handleCallEndedForOneKeyEnterConf(t);case 3:n=e.sent,n?(E=null,I.info("handleCallEndedPostConf,set confservice null")):I.warn("handleCallEndedPostConf callid is differ, no need to deal");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleSvcSeessionModify=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("handleSvcSeessionModify no conf service exist"),e.abrupt("return");case 3:E.handleSvcSeessionModify(t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){coreCommon.Observer.publish("HandleSvcConfWatchRet",e)}),ee=function(e){E?E.handleVideoWatchResult(e):I.error("handleVideoWatchResult,confService is null")},te=function(e){E?E.handleLockConfResult(e):I.error("handleLockConfResult,confService is null")},ne=function(e){E?E.handleHandupAttendeeResult(e):I.error("handleHandupAttendeeResult,confService is null")},re=function(e){if(7===e.param.result&&!window.isSupportiDo)return void coreCommon.Observer.publish("UportalTokenErr",e);E&&E.handleConfSpeakerNotify(e)},ae=(t.handleTransToConfResult=function(e){E&&E.handleTransToConfResult(e)},t.updateConfMemberList=function(e){E&&E.updateConfMemberList(e)},t.sendWatchSvcRequest=function(e){if(E)return E.sendWatchSvcRequest(e.attendeeList,e.selfNum);I.info("sendWatchSvcRequest confService is null,selfNum="+handlePhoneNumber(e.selfNum))},t.confctrlWatchAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("confctrlWatchAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.confctrlWatchAttendee(t);case 5:if(n=e.sent,r=de(),!n||0!==n.result){e.next=13;break}return coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,extraTrackKey:t,params:[r,handlePhoneNumber(t)]}),I.info("confctrlWatchAttendee success"),e.abrupt("return",n);case 13:return a=[r,handlePhoneNumber(t),0],n&&a.push(n.result),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,params:a}),I.info("confctrlWatchAttendee failed"),e.abrupt("return");case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){I.info("handleMultiViewBroadcast start"),coreCommon.Observer.publish("onMultiViewBroadcast",e.param)}),oe=function(e){I.info("handleCancelMultiViewBroadcast start"),coreCommon.Observer.publish("onMultiViewBroadcast",-1)},ie=(t.changeActiveDirection=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("changeActiveDirection no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.changeActiveDirection(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cloudRecordRequest=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return I.error("cloudRecordRequest no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.cloudRecordRequest(t.messageId,t.switchType);case 5:if(n=e.sent,I.info("reacrd cloudRecordRequest[3] res:",(0,s.default)(n)),!n||0!==n.result){e.next=12;break}return I.info("reacrd success"),e.abrupt("return",n);case 12:I.info("reacrd failed",n.rsp),m.handleShowErrorMsgBox(language.START_PAUSE_RECORDING_FAILED);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){I.info("reacrd start/stop reacrd result [1]",(0,s.default)(e)),coreCommon.Observer.publish("setRecordVideoResult",e)}),se=function(e){I.info("reacrd start/stop reacrd result [1]",(0,s.default)(e)),coreCommon.Observer.publish("recordVideoResult",e)},ce=function(e){I.info("reacrd handleConfStateDirectBroadCastIndresult [1]",(0,s.default)(e)),coreCommon.Observer.publish("confStateDirectBroadCastIndresult",e)},ue=function(e){I.info("reacrd handleRecordVideoStatusChairmanIndResult [1]",(0,s.default)(e)),coreCommon.Observer.publish("recordVideoStatusChairmanIndResult",e)},fe=function(e){coreCommon.Observer.publish("cancelConf",e)},le=(t.getIsSmcFirstRequestCharimanRest=function(){return null!==E&&E.getIsSmcFirstRequestCharimanRest()},t.setIsSmcFirstRequestCharimanRest=function(e){null!==E?E.setIsSmcFirstRequestCharimanRest(e):I.error("setIsSmcFirstRequestCharimanRest conservice is null")},t.getIsFirstEnterConf=function(){return null!==E&&E.getIsFirstEnterConf()},t.setIsFirstEnterConf=function(e){null!==E?E.setIsFirstEnterConf(e):I.error("setIsFirstEnterConf conservice is null")},t.getIsRecall=function(){return null!==E&&E.getIsRecall()},t.getUpdatedParticipants=function(){if(null!==E)return E.getUpdatedParticipants()},t.getSavedRecallInfo=function(){return null===E?"":E.getSavedRecallInfo()},function(e){E?E.handleConfstateLock(e):I.error("handleConfstateLock, confService is null")}),de=t.getCurrentConfId=function(){if(null===E)return"";var e=E.getCurrentConfId();return isNullOrEmpty(e)&&(e=""),e};t.setIsAvcMultiViewBroadcast=function(e){if(null===E)return void I.error("confctrlWatchAttendee no conf service exist");E.setIsAvcMultiViewBroadcast(e)},t.getIsAvcMultiViewBroadcast=function(){return null!==E&&E.getIsAvcMultiViewBroadcast()},t.isVideoConf=function(){return!!E&&E.isVideoConf()},t.isDataConf=function(){return!!E&&E.isDataConf()},t.isSvcConf=function(){return!!E&&E.getIsSvc()},t.getSsrcRange=function(){return E?E.getSsrcRange():{}},t.getInfoOfConf=function(e){return E?E.getConfInfo(e):null},t.isUserEndConf=function(){return!!E&&E.isUserEndConf()},t.isMemberListNull=function(){return!E||E.isMemberListNull()}},250:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyGetUpdateFiles=t.NotifyShareResult=t.NotifySkipLogin=t.NotifySipRegisterd=t.NotifySharingType=t.NotifyAppStared=t.NotifyLoginFailedEx=t.NotifyJoinConfFailedEx=t.NotifyDeviceListReady=t.NotifyCameraListUpdate=t.NotifySharingAppClouse=t.NotifyLocalCameraStatus=t.NotifyLocalCameraPull=t.NotifyLocalSpkPull=t.NotifyLocalMicPull=t.NotifyLocalSpkVolue=t.NotifyLocalMicVolue=t.NotifyLocalSPKStatus=t.NotifyLocalMICStatus=t.NotifyJoinConfFailed=t.NotifyMyLeaveConf=t.NotifyMyJoinConf=t.NotifyLocalStopSharing=t.NotifyLocalStartSharing=t.NotifyStopSharing=t.NotifyStartSharing=t.NotifyMyKickedOut=t.NotifyConfNoStart=t.NotifyConfTermination=t.NotifyLoginFailed=t.NotifyLoginSuccess=t.initMaxhubAPI=t.initBigWinAPI=t.clkAPIWebSocket=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(69),u=r(c),f=n(358),l=r(f),d=coreLogger.getLogger("api")("clkapi"),p=t.clkAPIWebSocket=null,h=function(e){var t=e.cmd;if(null!==p)switch(t){case 1601:d.info("CloudLink Login message"),coreCommon.BigwinObserver.publish("OnRunCloudLink",e),p.postRpsMessage(e,0);break;case 1621:coreCommon.BigwinObserver.publish("OnReloginCloudLink",e),p.postRpsMessage(e,0),d.info("CloudLink Relogin message");break;case 1602:d.info("Stop cloudlink message: ",e),coreCommon.BigwinObserver.publish("OnStopCloudLink",e),p.postRpsMessage(e,0);break;case 1603:d.info("Join conference message"),coreCommon.BigwinObserver.publish("OnJoinConference",e),p.postRpsMessage(e,0);break;case 1604:d.info("Leave conference message: ",e),coreCommon.BigwinObserver.publish("OnLeaveConference",e),p.postRpsMessage(e,0);break;case 1605:d.info("Start sharing message: ",e),coreCommon.BigwinObserver.publish("OnStartSharing",e),p.postRpsMessage(e,0);break;case 1606:d.info("Stop sharing message: ",e),coreCommon.BigwinObserver.publish("OnStopSharing",e),p.postRpsMessage(e,0);break;case 1607:var n={hWnd:851978};p.postRpsParamMessage(e,n,0);break;case 1608:p.postRpsMessage(e,0);break;case 1609:var r={user_name:""};coreCommon.BigwinObserver.publish("OnGetSharingUsername",r),d.info("sharing User name is: ",r.user_name),p.postRpsParamMessage(e,r,0);break;case 1610:d.info("ctrl local camera message: ",e),coreCommon.BigwinObserver.publish("OnCtrlLocalCamera",e),p.postRpsMessage(e,0);break;case 1611:coreCommon.BigwinObserver.publish("onBigWinVideoHwnd",e);break;case 1612:case 1613:p.postRpsMessage(e,0);break;case 1614:coreCommon.BigwinObserver.publish("OnSetMicValue",e),p.postRpsMessage(e,0);break;case 1615:coreCommon.BigwinObserver.publish("OnSetSpkValue",e),p.postRpsMessage(e,0);break;case 1616:var a={device_type:e.param.device_type,device_list:[]};coreCommon.BigwinObserver.publish("ongetDeviceList",e,a),p.postRpsParamMessage(e,a,0);break;case 1617:coreCommon.BigwinObserver.publish("OnSetDevice",e),p.postRpsMessage(e,0);break;case 1618:coreCommon.BigwinObserver.publish("onBigWinDataSharingHwnd",e);break;case 1619:var o={vol:""};coreCommon.BigwinObserver.publish("ongetMicValue",o),d.info("getMicValue ="+(0,u.default)(o)),p.postRpsParamMessage(e,o,0);break;case 1620:var i={vol:""};coreCommon.BigwinObserver.publish("ongetSpkValue",i),d.info("getMicValue ="+(0,u.default)(i)),p.postRpsParamMessage(e,i,0);break;case 1622:d.info("CloudLink SET RECV SHARE PARAM message: ",(0,u.default)(e)),coreCommon.BigwinObserver.publish("OnSetRecvShareParam",e),p.postRpsMessage(e,0);break;default:d.error("can not support cmd ",(0,u.default)(e))}},g=(t.initBigWinAPI=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:t.clkAPIWebSocket=p=e.sent,null!==p?(p.setCmdFunc(1601,h),p.setCmdFunc(1602,h),p.setCmdFunc(1603,h),p.setCmdFunc(1604,h),p.setCmdFunc(1605,h),p.setCmdFunc(1606,h),p.setCmdFunc(1607,h),p.setCmdFunc(1608,h),p.setCmdFunc(1609,h),p.setCmdFunc(1610,h),p.setCmdFunc(1611,h),p.setCmdFunc(1612,h),p.setCmdFunc(1613,h),p.setCmdFunc(1614,h),p.setCmdFunc(1615,h),p.setCmdFunc(1616,h),p.setCmdFunc(1617,h),p.setCmdFunc(1618,h),p.setCmdFunc(1619,h),p.setCmdFunc(1620,h),p.setCmdFunc(1621,h),p.setCmdFunc(1622,h),d.info("initBigWinAPI : Create WebSocket success.")):d.info("initBigWinAPI : Create WebSocket failed.");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=e.cmd;if(null!==p)switch(t){case 1601:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_RUN_CLOUDLINK"),coreCommon.BigwinObserver.publish("OnRunCloudLink",e),p.postRpsMessage(e,0);break;case 1604:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_LEAVE_CONFERENCE"),coreCommon.BigwinObserver.publish("OnLeaveConference",e),p.postRpsMessage(e,0);break;case 1623:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_LOGOUT"),coreCommon.BigwinObserver.publish("OnLogout",e),p.postRpsMessage(e,0);break;case 1624:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_CHANGE_LANGUAGE"),coreCommon.BigwinObserver.publish("OnChangeLanguage",e),p.postRpsMessage(e,0);break;case 1625:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_GET_MAIN_WND"),coreCommon.BigwinObserver.publish("OnGetMainWnd",e);break;case 1626:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_SHOW_OR_HIDE_MAIN_WND"),coreCommon.BigwinObserver.publish("OnShowOrHideMainWnd",e),p.postRpsMessage(e,0);break;case 1605:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_START_SHARING"),coreCommon.BigwinObserver.publish("OnStartSharing",e),p.postRpsMessage(e,0);break;case 1606:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_STOP_SHARING"),coreCommon.BigwinObserver.publish("OnStopSharing",e),p.postRpsMessage(e,0);break;case 1602:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_STOP_CLOUDLINK"),coreCommon.BigwinObserver.publish("OnStopCloudLink",e),p.postRpsMessage(e,0);break;case 1627:coreCommon.BigwinObserver.publish("OnEncryptValue",e);break;case 1628:coreCommon.BigwinObserver.publish("OnDecryptValue",e);break;case 1629:coreCommon.BigwinObserver.publish("OnCleanValue",e);break;case 1630:coreCommon.BigwinObserver.publish("OnWorkplaceLogin",e),p.postRpsMessage(e,0);break;default:d.error("can not support cmd ",(0,u.default)(e))}}),v=(t.initMaxhubAPI=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:t.clkAPIWebSocket=p=e.sent,null!==p?(p.setCmdFunc(1601,g),p.setCmdFunc(1604,g),p.setCmdFunc(1623,g),p.setCmdFunc(1624,g),p.setCmdFunc(1625,g),p.setCmdFunc(1626,g),p.setCmdFunc(1605,g),p.setCmdFunc(1606,g),p.setCmdFunc(1602,g),p.setCmdFunc(1627,g),p.setCmdFunc(1628,g),p.setCmdFunc(1629,g),p.setCmdFunc(1630,g),d.info("initMaxHubAPI : Create WebSocket success.")):d.info("initMaxHubAPI : Create WebSocket failed.");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.NotifyLoginSuccess=function(){var e={description:"NotifyLoginSuccess",nty:1701,result:0};null!==p&&(d.info("clk_NotifyLoginSuccess ",(0,u.default)(e)),p.postNotifyMessage(e))},t.NotifyLoginFailed=function(e){var t={description:"NotifyLoginFailed",nty:1702,result:e};null!==p&&(d.info("clk_NotifyLoginFailed ",(0,u.default)(t)),p.postNotifyMessage(t))}),m=(t.NotifyConfTermination=function(e){var t={description:"NotifyConfTermination",nty:1703,result:e};null!==p&&(d.info("clk_NotifyConfTermination ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyConfNoStart=function(e){var t={description:"NotifyConfNoStart",nty:1704,result:e};null!==p&&(d.info("clk_NotifyConfNoStart ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyMyKickedOut=function(e){var t={description:"NotifyMyKickedOut",nty:1705,result:e};null!==p&&(d.info("clk_NotifyMyKickedOut ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyStartSharing=function(e,t){var n={description:"NotifyStartSharing",nty:1706,result:e,param:{user_name:t}};null!==p&&(d.info("clk_NotifyStartSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyStopSharing=function(e,t){var n={description:"NotifyStopSharing",nty:1707,result:e,param:{user_name:t}};null!==p&&(d.info("clk_NotifyStopSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalStartSharing=function(e,t){var n={description:"NotifyLocalStartSharing",nty:1708,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifyLocalStartSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalStopSharing=function(e,t){var n={description:"NotifyLocalStopSharing",nty:1709,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifyLocalStopSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyMyJoinConf=function(e,t){var n={description:"NotifyMyJoinConf",nty:1710,result:e,param:{sip_number:t}};null!==p&&(d.info("clk_NotifyMyJoinConf ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyMyLeaveConf=function(e){var t={description:"NotifyMyLeaveConf",nty:1711,result:e};null!==p&&(d.info("clk_NotifyMyLeaveConf ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyJoinConfFailed=function(e){var t={description:"NotifyJoinConfFailed",nty:1712,result:e};null!==p&&(d.info("clk_NotifyJoinConfFailed ",(0,u.default)(t)),p.postNotifyMessage(t))});t.NotifyLocalMICStatus=function(e,t){var n={description:"NotifyLocalMICStatus",nty:1713,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalMICStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalSPKStatus=function(e,t){var n={description:"NotifyLocalSPKStatus",nty:1714,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalSPKStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalMicVolue=function(e,t){var n={description:"NotifyLocalMicVolue",nty:1715,result:e,param:{vol:t}};null!==p&&(d.info("clk_NotifyLocalMicVolue ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalSpkVolue=function(e,t){var n={description:"NotifyLocalSpkVolue",nty:1716,result:e,param:{vol:t}};null!==p&&(d.info("clk_NotifyLocalSpkVolue ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalMicPull=function(e,t,n){var r={description:"NotifyLocalMicPull",nty:1717,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalMicPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalSpkPull=function(e,t,n){var r={description:"NotifyLocalSpkPull",nty:1718,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalSpkPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalCameraPull=function(e,t,n){var r={description:"NotifyLocalCameraPull",nty:1719,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalCameraPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalCameraStatus=function(e,t){var n={description:"NotifyLocalCameraStatus",nty:1720,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalCameraStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifySharingAppClouse=function(e,t){var n={description:"NotifyLocalCameraPull",nty:1721,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifySharingAppClouse ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyCameraListUpdate=function(e){var t={description:"NotifyCameraListUpdate",nty:1722,result:e};null!==p&&(d.info("clk_NotifyCameraListUpdate ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyDeviceListReady=function(){var e={description:"NotifyDeviceListReady",nty:1723,result:0};null!==p&&(d.info("clk_NotifyDeviceListReady ",(0,u.default)(e)),p.postNotifyMessage(e))},t.NotifyJoinConfFailedEx=function(e){m(e),window.anonymousJoinConf&&window.bigWinCommonLogOut()},t.NotifyLoginFailedEx=function(e){v(e),window.anonymousJoinConf&&window.bigWinCommonLogOut()},t.NotifyAppStared=function(e){var t={description:"NotifyAppStared",nty:1724,result:e};d.info("NotifyAppStared: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifySharingType=function(e,t){var n={description:"NotifySharingType",nty:1725,result:e,param:{type:t}};d.info("NotifySharingType: ",(0,u.default)(n)),null!==p&&p.postNotifyMessage(n)},t.NotifySipRegisterd=function(e){var t={description:"NotifySipRegisterd",nty:1726,result:e,param:{ip:$getState().login.serverAddress,account:$getState().login.displayAccount}};d.info("NotifySipRegisterd: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifySkipLogin=function(e){var t={description:"NotifySkipLogin",nty:1727,result:e};d.info("NotifySkipLogin: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifyShareResult=function(e,t,n){var r={description:"NotifyShareResult",nty:1728,result:e,param:{param1:t,param2:n}};d.info("NotifyShareResult: ",(0,u.default)(r)),null!==p&&p.postNotifyMessage(r)},t.NotifyGetUpdateFiles=function(e,t){var n={description:"NotifyGetUpdateFiles",nty:1729,result:e,param:{paramStr:t}};d.info("NotifyGetUpdateFiles: ",(0,u.default)(n)),null!==p&&p.postNotifyMessage(n)}},253:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(119),o=r(a),i=n(341),s=r(i);t.default=function e(t,n,r){null===t&&(t=Function.prototype);var a=(0,s.default)(t,n);if(void 0===a){var i=(0,o.default)(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var c=a.get;if(void 0!==c)return c.call(r)}},255:function(e,t,n){n(31),n(22),n(23),n(256),n(257),n(258),n(259),e.exports=n(8).Set},256:function(e,t,n){"use strict";var r=n(180),a=n(149);e.exports=n(181)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(a(this,"Set"),e=0===e?0:e,e)}},r)},257:function(e,t,n){var r=n(10);r(r.P+r.R,"Set",{toJSON:n(182)("Set")})},258:function(e,t,n){n(183)("Set")},259:function(e,t,n){n(184)("Set")},260:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPush=t.unRegisterPush=t.DB_KEY_HAS_OPEN_PUSH=t.DB_KEY_APNS_CER_TYPE=t.DB_KEY_IOS_VOIP_TOKEN=t.DB_KEY_IOS_PUSH_TOKEN=t.DB_KEY_HW_PUSH_BADGE_CLASS_NAME=t.DB_KEY_HW_PUSH_TOKEN=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(136),l=(n(167),n(310)),d=coreLogger.getLogger("login")("push"),p=t.DB_KEY_HW_PUSH_TOKEN="hwPushToken",h=t.DB_KEY_HW_PUSH_BADGE_CLASS_NAME="hwPushBadgeClassName",g=t.DB_KEY_IOS_PUSH_TOKEN="iosPushToken",v=t.DB_KEY_IOS_VOIP_TOKEN="voipToken",m=t.DB_KEY_APNS_CER_TYPE="apnsCerType",_=t.DB_KEY_HAS_OPEN_PUSH="hasOpenPush";window.registerHWPush=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.webView.getLocalIp()||"0.0.0.0",!isNullOrEmpty(a)){e.next=6;break}return e.next=4,coreDb.queryLoginSetting({key:p});case 4:n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)||(a=n.value);case 6:if(!isNullOrEmpty(o)){e.next=11;break}return e.next=9,coreDb.queryLoginSetting({key:h});case 9:r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)||(o=r.value);case 11:return e.next=13,C(2,1,a,o,"","",t);case 13:return e.next=15,(0,l.registerEServerClientPush)(2,1,a,o,"","",t);case 15:coreDb.saveLoginSetting({key:p,value:a}),coreDb.saveLoginSetting({key:h,value:o});case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterHWClientPush=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.webView.getLocalIp()||"0.0.0.0",r=void 0,a=void 0,e.next=5,coreDb.queryLoginSetting({key:p});case 5:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(r=o.value),e.next=9,coreDb.queryLoginSetting({key:h});case 9:return i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(a=i.value),e.next=13,C(2,3,r,a,"","",n,"5",t);case 13:return e.next=15,(0,l.registerEServerClientPush)(2,3,r,a,"","",n);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.unRegisterPush=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=5;break}return e.next=3,window.unRegisterHWClientPush(t);case 3:e.next=8;break;case 5:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=8;break}return e.next=8,window.unRegisterIosPush(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.registerIosPush=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,u.default)(s.default.mark(function e(a){var o,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=5;break}return e.next=3,coreDb.queryLoginSetting({key:g});case 3:o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(t=o.value);case 5:if(!isNullOrEmpty(n)){e.next=10;break}return e.next=8,coreDb.queryLoginSetting({key:v});case 8:i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(n=i.value);case 10:if(!isNullOrEmpty(r)){e.next=15;break}return e.next=13,coreDb.queryLoginSetting({key:m});case 13:c=e.sent,isNullOrEmpty(c)||!c.hasOwnProperty("key")||!c.hasOwnProperty("value")||isNullOrEmpty(c.key)||isNullOrEmpty(c.value)||(r=c.value);case 15:return e.next=17,C(1,1,"","",t,n,a,r);case 17:return e.next=19,(0,l.registerEServerClientPush)(1,1,"","",t,n,a,r);case 19:coreDb.saveLoginSetting({key:g,value:t}),coreDb.saveLoginSetting({key:v,value:n});case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterIosPush=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,o,i,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,a=void 0,o="5",e.next=5,coreDb.queryLoginSetting({key:g});case 5:return i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(r=i.value),e.next=9,coreDb.queryLoginSetting({key:v});case 9:return c=e.sent,isNullOrEmpty(c)||!c.hasOwnProperty("key")||!c.hasOwnProperty("value")||isNullOrEmpty(c.key)||isNullOrEmpty(c.value)||(a=c.value),e.next=13,coreDb.queryLoginSetting({key:m});case 13:return u=e.sent,isNullOrEmpty(u)||!u.hasOwnProperty("key")||!u.hasOwnProperty("value")||isNullOrEmpty(u.key)||isNullOrEmpty(u.value)||(o=u.value),e.next=17,C(1,3,"","",r,a,n,o,t);case 17:return e.next=19,(0,l.registerEServerClientPush)(1,3,"","",r,a,n,o);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var C=t.registerPush=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,i,c,u){var l,p,h,g,v,m,C,w,S,I,E,N,b,T,y,O,x,A,L,k,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5",M=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info(" [ registerPush ] "),e.next=3,(0,f.getLoginModel)();case 3:return l=e.sent,p=l.account,h=l.authToken,g=l.serverAddress,v=l.serverPort,m=l.pushgwUri,e.next=7,coreSecurity.getPasswordManager();case 7:return C=e.sent,e.next=10,C.getPassword("password");case 10:if(w=e.sent,S=1,I="00:00",E="00:00",!isNullOrEmpty(r)||!isNullOrEmpty(i)){e.next=17;break}return d.info(" [ registerPush ] androidToken and iosDeviceToken is null"),e.abrupt("return");case 17:return isNullOrEmpty(a)&&(a=""),N="",N=l.isSupportAS?"https://"+m+"/PushAgent/push/registerpush":"https://"+g+":"+v+"/pushAgent/registerpush",b={user:p,deviceToken:1===t?i:r,pushType:t,flag:n,clientIP:u,language:window.langShortName,noPushStartTime:I,noPushEndTime:E,apnsServerType:1,apnsCerType:R,pushByTimeSwitch:S,heart_beat_time:30,android_token:1===t?i:r,appId:"1",pushClassName:a,voipToken:c,appMode:1,push_mode:1,imPushMode:1,callPushMode:0,pushIMActive:"welink://welinksoftclient/h5page?page=imDetail",pushCallActive:"welink://welinksoftclient/h5page?page=call"},e.next=23,coreHttp.sendSyncRequest({url:N,type:constant.REQUEST_TYPE.POST,header:{Authorization:"Basic "+h,"Content-Type":"application/json"},body:(0,o.default)(b),cipherlist:[50331695,50331701,50331708,50331709]});case 23:if(T=e.sent,y=T.param,O=y.recv_body,x=y.resp_code,A=y.result,!x){e.next=43;break}if(200!==(L=parseInt(x))){e.next=39;break}if(O=JSON.parse(O),!O.error){e.next=32;break}return d.error(" [ registerPush ] failed, errorCode:"+O.error+", info:"+O.error_description),e.abrupt("return");case 32:k=!0,1===n?k=!0:3===n&&(k=!1),(3===n&&M||1===n)&&coreDb.saveUserConfigList({key:_,value:k.toString()}),$dispatch(coreUi.changeHasOpenPush(k)),d.info(" [ registerPush ] result:",O),e.next=41;break;case 39:return d.error(" [ registerPush ] failed, request error, status code: "+x+", result: "+A),e.abrupt("return");case 41:e.next=44;break;case 43:d.error(" [ registerPush ] failed, status code:"+x);case 44:case"end":return e.stop()}},e,this)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}()},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCmptEvent=t.detectStopServer=t.detectStartServer=t.detectStopClientContinue=t.detectStartClientContinue=t.detectStopClient=t.detectStartClient=t.detectUnInit=t.detectInit=t.checkCertificateOverdue=t.verifyCertificate=void 0;var r=n(414),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.verifyCertificate=a.verifyCertificate,t.checkCertificateOverdue=a.checkCertificateOverdue,t.detectInit=a.detectInit,t.detectUnInit=a.detectUnInit,t.detectStartClient=a.detectStartClient,t.detectStopClient=a.detectStopClient,t.detectStartClientContinue=a.detectStartClientContinue,t.detectStopClientContinue=a.detectStopClientContinue,t.detectStartServer=a.detectStartServer,t.detectStopServer=a.detectStopServer,t.setCmptEvent=a.setCmptEvent},265:function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(n=this._events[e],i(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),a=u.length,c=0;c<a;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(a=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),a||(a=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var a=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,a,i,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=i;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},266:function(e,t,n){t=e.exports=n(322),t.Stream=t,t.Readable=t,t.Writable=n(267),t.Duplex=n(188),t.Transform=n(325),t.PassThrough=n(602)},267:function(e,t,n){"use strict";(function(t,r,a){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){y(t,e)}}function i(e){return M.from(e)}function s(e){return M.isBuffer(e)||e instanceof D}function c(){}function u(e,t){x=x||n(188),e=e||{};var r=t instanceof x;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,i=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){_(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function f(e){if(x=x||n(188),!(F.call(f,this)||this instanceof x))return new f(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),R.call(this)}function l(e,t){var n=new Error("write after end");e.emit("error",n),O.nextTick(t,n)}function d(e,t,n,r){var a=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),O.nextTick(r,o),a=!1),a}function p(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=M.from(t,n)),t}function h(e,t,n,r,a,o){if(!n){var i=p(t,r,a);r!==i&&(n=!0,a="buffer",r=i)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,s,r,a,o);return c}function g(e,t,n,r,a,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function v(e,t,n,r,a){--t.pendingcb,n?(O.nextTick(a,r),O.nextTick(b,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(a(r),e._writableState.errorEmitted=!0,e.emit("error",r),b(e,t))}function m(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function _(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if(m(n),t)v(e,n,r,t,a);else{var o=I(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||S(e,n),r?A(C,e,n,o,a):C(e,n,o,a)}}function C(e,t,n,r){n||w(e,t),t.pendingcb--,r(),b(e,t)}function w(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function S(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var s=0,c=!0;n;)a[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;a.allBuffers=c,g(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,f=n.encoding,l=n.callback;if(g(e,t,!1,t.objectMode?1:u.length,u,f,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),b(e,t)})}function N(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,O.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function b(e,t){var n=I(t);return n&&(N(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function T(e,t,n){t.ending=!0,b(e,t),n&&(t.finished?O.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function y(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var O=n(240);e.exports=f;var x,A=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:O.nextTick;f.WritableState=u;var L=n(218);L.inherits=n(129);var k={deprecate:n(601)},R=n(323),M=n(134).Buffer,D=a.Uint8Array||function(){},P=n(324);L.inherits(f,R),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:k.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var F;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!F.call(this,e)||this===f&&(e&&e._writableState instanceof u)}})):F=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(e,t,n){var r=this._writableState,a=!1,o=!r.objectMode&&s(e);return o&&!M.isBuffer(e)&&(e=i(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=c),r.ended?l(this,n):(o||d(this,r,e,n))&&(r.pendingcb++,a=h(this,r,o,e,t,n)),a},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||S(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||T(this,r,n)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=P.destroy,f.prototype._undestroy=P.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(148),n(599).setImmediate,n(139))},272:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MyInfo=t.resetMyInfo=t.getMyInfo=void 0;var a=n(119),o=r(a),i=n(4),s=r(i),c=n(5),u=r(c),f=n(120),l=r(f),d=n(121),p=r(d),h=n(1),g=r(h),v=n(2),m=r(v),_=void 0,C=(t.getMyInfo=function(){var e=(0,m.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _||(_=new w(C)),e.abrupt("return",_);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetMyInfo=function(){_=null},{language:"",languageCode:"",isReminder:!0,closeAppWays:"minimizeApp",isAutoCollectLogs:!0,hasAllowCollectLogs:!1,isAutoAcceptConf:!1,isAutoStart:!1,statusDesc:"",statusOptions:[],selectIndex:1,signature:"",isAutoResponseConf:!1,isOffToLine:!1,isAutoLeave:!0,account:"",address:"",age:"",bind_no:"",birthday:"",compareAccount:"",dept_id:"",dept_name_cn:"",dept_name_en:"",desc:"",email:"",espacenumber:"",etag:"",fax:"",gender:0,home_phone:"",image_id:"",image_sync_time:"",ip_phone:"",is_security:0,mobile:"",modify_time:"",name:"",native_name:"",office_phone:"",office_phone2:"",old_account:"",other_mobiles:"",other_phone:"",other_phone2:"",postcode:"",q_pin_yin:"",result_code:"",short_phone:"",staff_id:0,staff_no:"",state:"0",status:1,title:"",type:"0",uri:"",user_type:"0",voip:"",website:"",selfUserUri:"",show_account:""}),w=t.MyInfo=function(e){function t(e){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"notifyChanged",value:function(e){$dispatch(coreUi.updateMyInfo(e)),e&&e.languageCode&&coreCommon.dispatchModuleEvent("changeLanguage",e.languageCode)}}]),t}(coreCommon.ModuleCache)},273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DCONF_STATUS={NONE:0,JOINING:1,IN_CONF:2,JOIN_FAIL:3,LEAVING:4,LEFT:5},t.DFPLATFORM={platform:window.CLIENTCONFIG.PLATFORM,isWin:window.CLIENTCONFIG.ISWIN,isBigWin:window.CLIENTCONFIG.ISBIGWIN,isMac:window.CLIENTCONFIG.ISMAC,isMobile:window.CLIENTCONFIG.ISMOBILE,isPc:window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISMAC||window.CLIENTCONFIG.ISBIGWIN,isWinBase:window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISBIGWIN},t.IID_COMPONENT={BASE:0,DS:1,AS:2,WB:512},t.NATIVE_DATA_PARAMTYPE={CREATE_DOC_PAGE:0,SET_CURRENT_PAGE:1,SET_BG_COLOR:2,DELETE_PAGE:3,DELETE_DOC:4,SET_CANVAS_SIZE:5,SET_APP_BG_COLOR:6},t.DATA_FIREWALL_MODE={STG:0,SVN:1,SBC:2,NULL:3}},280:function(e,t,n){e.exports=n(0)(43)},283:function(e,t,n){function r(){a.call(this)}e.exports=r;var a=n(265).EventEmitter;n(129)(r,a),r.Readable=n(266),r.Writable=n(603),r.Duplex=n(604),r.Transform=n(605),r.PassThrough=n(606),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function o(){f||(f=!0,e.end())}function i(){f||(f=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===a.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",o),u.removeListener("close",i),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(u.on("end",o),u.on("close",i));var f=!1;return u.on("error",s),e.on("error",s),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e}},284:function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=r(e);if("string"!=typeof t&&(_.isEncoding===C||!C(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=a(e);var t;switch(this.encoding){case"utf16le":this.text=d,this.end=p,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=h,this.end=g,t=3;break;default:return this.write=v,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var a=i(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=i(t[r]))>=0?(a>0&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=i(t[r]),a>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0)}function c(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function u(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function d(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var _=n(134).Buffer,C=_.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=l,o.prototype.text=f,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},286:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dealWithSipNumber=t.setUnreadNumber=t.handleChangeBroadCastInfo=t.revertMemberToMuteState=t.setMemberToMuteState=t.calcMemberCount=t.dealWithConfSpeakerList=t.searchContactName=t.searchContact=t.updateMemberDetail=t.searchMemberDetail=t.attendeeSortFunc=t.unique=t.svcConfAttendeeSortFunc=t.dealWithMemberListDataRest=t.dealWithMemberListDataiDo=t.dealItShortNumber=void 0;var a=n(128),o=r(a),i=n(69),s=r(i),c=n(123),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=n(248),g=n(166),v=n(153),m=coreLogger.getLogger("conf")("logic/memberlist"),_=t.dealItShortNumber=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=34;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=3;break}return e.abrupt("return");case 3:for(r=$getState().myInfo,a={},o=0;o<t.length;o++)i="",t[o].userInfo&&(i=t[o].userInfo.account),t[o].number&&t[o].number.indexOf("@")>0&&(t[o].number=t[o].number.split("@")[0]),i&&t[o].userInfo.espacenumber&&t[o].userInfo.short_phone&&t[o].userInfo.espacenumber!==t[o].userInfo.short_phone&&t[o].number===t[o].userInfo.espacenumber&&(a[i]||(a[i]={},a[i].userInfo=t[o].userInfo));if(!n){e.next=18;break}e.t0=l.default.keys(a);case 8:if((e.t1=e.t0()).done){e.next=16;break}if(s=e.t1.value,a[s].userInfo.short_phone!==n.number){e.next=14;break}return m.info("data conf list -+--------already have this memeber:"+handlePhoneNumber(n.number)),n="",e.abrupt("return",!1);case 14:e.next=8;break;case 16:e.next=33;break;case 18:e.t2=l.default.keys(a);case 19:if((e.t3=e.t2()).done){e.next=33;break}c=e.t3.value,u=0;case 22:if(!(u<t.length)){e.next=31;break}if(t[u].number!==a[c].userInfo.short_phone){e.next=28;break}return a[c].userInfo.name=t[u].name,m.info("data+--------- findX---"+handlePhoneNumber(t[u].number)),t.splice(u,1),e.abrupt("break",31);case 28:u++,e.next=22;break;case 31:e.next=19;break;case 33:m.info("data conf list-+---------"+t.length);case 34:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),C=(t.dealWithMemberListDataiDo=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.default)([],$getState().conf.memberListInfo),r=$getState().conf.selfRole,a=C(t,n),o=a.enterMemberNames,i=a.leaveMemberNames,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealWithMemberListDataRest=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,p,h,g;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.default)([],$getState().conf.memberListInfo),r=$getState().conf.selfRole,a=w(t,n),o=a.enterMemberNames,i=a.leaveMemberNames,s=t.filter(function(e){return!n.some(function(t){return t.number===e.number})}),c=!1,0===n.length&&s.length>0&&!r&&(c=!0),e.next=8,S(s,n);case 8:return f=e.sent,d=f.addMemberNames,window.CLIENTCONFIG.ENABLE_IT_MEETING&&_(n),p=d?d.substring(0,d.length-1):"",h=o?o.substring(0,o.length-1):"",g=i?i.substring(0,i.length-1):"",E(c,p,h,g),e.abrupt("return",{currentMemberList:n});case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e,t){for(var n=$getState().conf.selfRole,r=($getState().login.sipLoginOnly,new Array),a=!1,o=e?e.length:0,i=0;i<o;++i){e[i].is_self&&($dispatch(coreUi.changeSelfNumInconf(e[i].number)),$dispatch(coreUi.changeConfMicMute(e[i].is_mute)),1===e[i].role&&1!==n?($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1)):1===n&&1!==e[i].role&&($dispatch(coreUi.changeConfRole(0)),coreConf.changeConfSelfRole(0))),e[i].is_mute&&(e[i].is_speaking=!1,e[i].speak_valume=0);var s=I(e[i].state);e[i].state=s;for(var c=0;c<t.length;c++){t[c];e[i].number===t[c].number&&(!0,t[c].userInfo.name=e[i].name,e[i].userInfo=t[c].userInfo)}if(isNullOrEmpty(e[i].userInfo)){var u={name:e[i].name,number:e[i].number,account:void 0,email:"",sms:""};window.CLIENTCONFIG.ENABLE_IT_MEETING&&x(e[i].number,e[i].name),e[i].userInfo=u}var f=0!=(e[i].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[i].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(1===e[i].is_broadcast&&f){var l={name:e[i].name,number:e[i].number,is_speaker:e[i].is_speaking,role:e[i].role,is_mute:e[i].is_mute,is_self:e[i].is_self};r.push(l),a=!0,!1===$getState().conf.broadCastInfo.isBroadCast&&$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))}}window.CLIENTCONFIG.ENABLE_IT_MEETING&&(_(e),$getState().login.isSupportAS||function(){for(var n=/^\+(86|991)/,r=0;r<t.length;r++){(function(r){var a=t[r]&&t[r].number?t[r].number:"";if(""===a)return"continue";a=a.replace(n,""),!e.some(function(e){var t=e&&e.number?e.number:"";return""!==(t=t.replace(n,""))&&t===a})&&(t[r].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,e.push(t[r]))})(r)}}());var d={isBroadCast:a,broadCastList:r};return m.info("isBroadCast ido =",a),D(d),{enterMemberNames:"",leaveMemberNames:"",memberList:e}}),w=function(e,t){for(var n=$getState().conf.selfRole,r=($getState().login.sipLoginOnly,""),a="",o=new Array,i=!1,s=!1,c=t?t.length:0,u=0;u<c;++u){var f=0,l=e?e.length:0;s=!1;for(var d=0;d<l;++d){if(t[u].number===e[d].number){s=!0;var p=I(e[d].state);t[u].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||p!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||e[d].is_self||(m.info("member entry: ",handlePhoneNumber(t[u].number)),r+=t[u].userInfo.name+","),t[u].hand_state=e[d].hand_state,t[u].is_deaf=e[d].is_deaf,t[u].is_mute=e[d].is_mute,t[u].media_type=e[d].media_type,t[u].role=e[d].role,t[u].state=p,t[u].is_self=e[d].is_self,t[u].participant_id=e[d].participant_id,t[u].is_broadcast=e[d].is_broadcast,t[u].userInfo.name=e[d].name;var h=0!=(e[d].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[d].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(1===e[d].is_broadcast&&h){var g={name:e[d].name,number:e[d].number,is_speaker:e[d].is_speaking,role:e[d].role,is_mute:e[d].is_mute,is_self:e[d].is_self};o.push(g),i=!0}e[d].is_self&&($dispatch(coreUi.changeSelfNumInconf(e[d].number)),$dispatch(coreUi.changeConfMicMute(e[d].is_mute)),1===e[d].role&&1!==n?($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1)):1===n&&1!==e[d].role&&($dispatch(coreUi.changeConfRole(0)),coreConf.changeConfSelfRole(0))),e[d].is_mute&&(t[u].is_speaking=!1,t[u].speak_valume=0);break}f++}f>=l&&(t[u].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&(m.info("member leave: ",handlePhoneNumber(t[u].number)),a+=t[u].userInfo.name+","),t[u].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,t[u].is_speaking=!1,t[u].speak_valume=0,s=!0),!1===s&&(t[u].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,t[u].is_speaking=!1,t[u].speak_valume=0)}var v={isBroadCast:i,broadCastList:o};return m.info("isBroadCast= rest ",i),D(v),{enterMemberNames:r,leaveMemberNames:a}},S=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,c,u,f,d,p;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",a=$getState().conf.selfRole,t)for(o=0;o<t.length;++o)m.info("member added: ",handlePhoneNumber(t[o].number)),t[o].is_self&&($dispatch(coreUi.changeConfMicMute(t[o].is_mute)),1===t[o].role&&1!==a&&($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1))),i={name:t[o].name,account:void 0,email:"",sms:""},x(t[o].number,t[o].name),c=I(t[o].state),c!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||t[o].is_self||(r+=i.name+","),u={name:t[o].name,number:t[o].number,userInfo:i,role:t[o].role,is_mute:t[o].is_mute,is_deaf:t[o].is_deaf,state:c,hand_state:t[o].hand_state,media_type:t[o].media_type,is_self:t[o].is_self,is_speaking:!1,speak_volume:0,participant_id:t[o].participant_id,is_broadcast:0},_(n,u)&&(m.info("data conf list add------------"+handlePhoneNumber(u.number)),n.push(u)),t[o].is_self&&$dispatch(coreUi.changeConfMicMute(t[o].is_mute));if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(f=$getState().conf.confServerId,window.confConnectInfo&&f&&1===window.confConnectInfo[f])){for(window.confConnectInfo[f]=2,d=[],p=0;p<n.length;p++)d[p]={},d[p].contactsId=n[p].userInfo.account,d[p].calleeNumber=n[p].number,d[p].displayName=n[p].name,n[p].userInfo.name&&(d[p].displayName=n[p].userInfo.name),m.info("data conf list add------------"+handlePhoneNumber(d[p].displayName));window.confRecordNotify(f,$getState().conf.confSubject,"","",(0,s.default)(d))}return e.abrupt("return",{addMemberNames:r});case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){return 0===e?constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF:1===e||2===e?constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING:constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT},E=function(e,t,n,r){var a="",i=$getState(),s=i.conf.msgList,c=[].concat((0,o.default)(s));e&&t?(a={attendees:t,type:constant.CONF_MSG_TYPE.TYPE_IN_CONFERENCE},c.find(function(e){return e.type===a.type})?m.info("repeat msg, ignor..."):(N(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(language.YOU_JOIN_CONFERENCE,2,null,!1))):t&&(m.info("new add member: ",handlePhoneNumber(t)),a={attendees:t,type:constant.CONF_MSG_TYPE.TYPE_ENTER_CONFERENCE},c.find(function(e){return e.type===a.type})?m.info("repeat new add msg, ignor..."):(N(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(t+language.JOINED_MEETING,2,null,!1))),n&&(a={attendees:n,type:constant.CONF_MSG_TYPE.TYPE_ENTER_CONFERENCE},N(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(n+language.JOINED_MEETING,2,null,!1)),r&&(a={attendees:r,type:constant.CONF_MSG_TYPE.TYPE_LEAVE_CONFERENCE},N(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(r+language.LEAVE_CONFERENCE,2,null,!1)),$dispatch(coreUi.updateConfMessage(c))},N=function(e,t){t.length>=3&&t.shift(),t.push(e)},b=(t.svcConfAttendeeSortFunc=function(e,t){var n=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;e.userInfo.q_pin_yin&&t.userInfo.q_pin_yin;return e.is_self<t.is_self?1:n&&e.state>t.state?1:-1},t.unique=function(e){var t={};return e.reduce(function(e,n){return t[n.number]||(t[n.number]=e.push(n)),e},[])},t.attendeeSortFunc=function(e,t){var n=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,r=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING;e.userInfo.q_pin_yin&&t.userInfo.q_pin_yin;return e.role>t.role?-1:e.role<t.role?1:e.is_self>t.is_self?-1:e.is_self<t.is_self?1:n&&e.state>t.state?1:n&&e.state<t.state?-1:r&&e.state<t.state?1:r&&e.state>t.state?-1:T(e,t)},function(e){var t="";try{e&&e.charCodeAt(0)<122&&e.charCodeAt(0)>48&&(t=e)}catch(e){m.error("checkPinYin error =",e)}return t}),T=function(e,t){var n=e.userInfo.name.charCodeAt(0)<122&&e.userInfo.name.charCodeAt(0)>48,r=t.userInfo.name.charCodeAt(0)<122&&t.userInfo.name.charCodeAt(0)>48;if(n>r)return-1;if(n<r)return 1;if(n)return y(e.userInfo.name,t.userInfo.name);var a=window.CLIENTCONFIG.ENABLE_IT_MEETING,o=a?b(e.userInfo.q_pin_yin):e.userInfo.q_pin_yin,i=a?b(t.userInfo.q_pin_yin):t.userInfo.q_pin_yin;return O(e.userInfo.name,t.userInfo.name,o,i)},y=function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n>r?1:n<r?-1:0},O=function(e,t,n,r){n||(n=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.pinyinUtil.getNamePinyin(e):window.pinyinUtil.getPinyin(e)),r||(r=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.pinyinUtil.getNamePinyin(t):window.pinyinUtil.getPinyin(t));var a=n&&r;return a&&n>r?1:a&&n<r?-1:e>t?-1:e<t?1:0},x=t.searchMemberDetail=function(e,t){var n=void 0;L(e,t).then(function(r){r&&1<=r.length&&(n=(0,u.default)({},r[0]),A(n,e,t))})},A=t.updateMemberDetail=function(e,t,n){var r=[].concat((0,o.default)($getState().conf.memberListInfo)),a=r.findIndex(function(e){return e.number!==e.name&&e.number===t&&(""===n||""!==n&&e.name===n)});-1!==a?(m.info("update userInfo after find: "+handlePhoneNumber(t)),(0,u.default)(r[a],{userInfo:e}),$dispatch(coreUi.changeMemberListInfo(r)),coreConf.updateConfMemberList(r),isNullOrEmpty($getState().conf.searchText)||(0,v.searchMemberList)($getState().conf.searchText,r)):m.info("can not find member in memberlist"+handlePhoneNumber(t))},L=t.searchContact=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.split("@")[0].replace("sip:",""),m.info("query contact from local by number: "+handlePhoneNumber(t)),e.next=4,coreDb.queryContactByNumber(t);case 4:if(r=e.sent,a=!1,r&&r.length>0?(m.info("query from local success: "+r.length),n&&n!==t&&(r=r.filter(function(e){return e.name===n})),r.length>1?r=[]:r.length<1&&(a=!0)):a=!0,!a){e.next=15;break}return m.info("can not find in local, query contact from server"),e.next=11,coreContact.searchServerContact(t);case 11:o=e.sent,i=o.userInformationList,s=i,s&&(m.info("query contact from server success: "+s.length),(0,u.default)(r,s),n&&n!==t&&(r=r.filter(function(e){return e.name===n})),r.length>1&&(r=[]));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),k=(t.searchContactName=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.toString(),r=t.toString(),!window.skipLogin){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,coreDb.queryContactByPhonenumberAccurate(t);case 6:if(!(a=e.sent)||!a[0]){e.next=13;break}m.info("find in local success"),r=a[0].name,a.length>1&&a.forEach(function(e){""===e.account&&(r=e.name)}),e.next=19;break;case 13:return m.info("can not find in local, query contact from server"),e.next=16,coreContact.queryServerContact(t);case 16:o=e.sent,i=o.param.name,i&&(r=i);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealWithConfSpeakerList=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,p,_,C;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.conf.memberListInfo,0!==r.length){e.next=3;break}return e.abrupt("return");case 3:for(a="",void 0===t.speaker&&(0,u.default)(t,{speaker:[]}),R(r);t.speaker.length>2;)t.speaker.pop();o=0;case 8:if(!(o<t.speaker.length)){e.next=34;break}if(!(t&&t.speaker[o]&&isNullOrEmpty(t.speaker[o].number))){e.next=12;break}return m.warn("speaker num is null, so continue"),e.abrupt("continue",31);case 12:i=!1,s=0;case 14:if(!(s<r.length)){e.next=23;break}if(t.speaker[o].number!==r[s].number){e.next=20;break}return(0,u.default)(t.speaker[o],{name:r[s].userInfo.name?r[s].userInfo.name:r[s].name,account:r[s].userInfo.account,isSelf:r[s].is_self}),r[s]=(0,u.default)({},r[s],{is_speaking:t.speaker[o].is_speaking,speak_valume:t.speaker[o].speak_valume}),i=!0,e.abrupt("break",23);case 20:s++,e.next=14;break;case 23:if(i){e.next=29;break}return m.info("conf member list do not have speaker detail, search it, numer is "+handlePhoneNumber(t.speaker[o].number)),e.next=27,L(P(t.speaker[o].number));case 27:c=e.sent,c&&1<=c.length&&(f=$getState(),d=f.myInfo.account,(0,u.default)(t.speaker[o],{name:c[0].name,account:c[0].account,isSelf:d===c[0].account}));case 29:(0,u.default)(t.speaker[o],{isToMuted:!1}),a+=handlePhoneNumber(t.speaker[o].number)+"#"+t.speaker[o].name.substr(0,1)+"**"+t.speaker[o].name.substr(-1)+" # ";case 31:o++,e.next=8;break;case 34:m.info("dealWithConfSpeakerList: "+a),$dispatch(coreUi.updateConfSpeaker(t)),window.CLIENTCONFIG.ISMOBILE&&$getState().conf.isSvcConf&&window.SvcSpeakerToNative(t),window.CLIENTCONFIG.ISMOBILE&&(p=k(t),isNullOrEmpty(p)?window.showCallTips(""):(_=language.ON_SPEAKING.format(p),window.showCallTips(_))),$dispatch(coreUi.changeMemberListInfo(r)),$getState().conf.isSvcConf&&(C=k(t),window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN?g.SvcAtdManager.handleSpeakerNotify(C):h.SvcAttendanceManager.handleSvcSpeakerNotify()),isNullOrEmpty($getState().conf.searchText)||(0,v.searchMemberList)($getState().conf.searchText,r);case 41:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if(e){var t=void 0;return 0!==e.num_of_speaker&&e.speaker instanceof Array&&(t=e.speaker[0].name),t}}),R=function(e){for(var t=0;t<e.length;t++)e[t]=(0,u.default)({},e[t],{is_speaking:!1,speak_valume:0})},M=(t.calcMemberCount=function(e){for(var t=0,n=0;n<e.length;n++)e[n].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&t++;m.info("calcMemberCount in "),g.SvcAtdManager.setConfUserInfo(t);var r=t.toString()+"/"+e.length.toString();$dispatch(coreUi.changeMeetingMembers(r)),m.info("current member count: "+r)},t.setMemberToMuteState=function(e,t){var n=$getState(),r=n.conf.memberListInfo,a=(0,u.default)([],r);m.info("set attendee tomute state, attendee="+handlePhoneNumber(e)+", isMute="+t);for(var o=0;o<a.length;++o)if(a[o].number===e){a[o].is_mute=t?constant.MUTE_STATE.MUTE_STATE_TOMUTE:constant.MUTE_STATE.MUTE_STATE_TOUNMUTE;break}$dispatch(coreUi.changeMemberListInfo(a)),isNullOrEmpty($getState().conf.searchText)||(0,v.searchMemberList)($getState().conf.searchText,a)},t.revertMemberToMuteState=function(e){var t=$getState(),n=t.conf.memberListInfo,r=(0,u.default)([],n);m.info("revert attendee tomute state, isMute="+e);for(var a=0;a<r.length;++a)r[a].is_mute>1&&(r[a].is_mute=e?constant.MUTE_STATE.MUTE_STATE_UNMUTE:constant.MUTE_STATE.MUTE_STATE_MUTE);$dispatch(coreUi.changeMemberListInfo(r)),isNullOrEmpty($getState().conf.searchText)||(0,v.searchMemberList)($getState().conf.searchText,r)},function(e,t){var n="";if(t.isBroadCast)if(t.broadCastList&&!isNaN(t.broadCastList.length)&&t.broadCastList.length>0)for(var r=0;r<t.broadCastList.length;r++)n=n+";ssrc"+(t.broadCastList[r].name.length>1?t.broadCastList[r].name.substr(0,1)+"**"+t.broadCastList[r].name.substr(-1):"**")+",number:"+handlePhoneNumber(t.broadCastList[r].number)+",is_self:"+t.broadCastList[r].is_self;else n=!1;m.info(e,n)}),D=t.handleChangeBroadCastInfo=function(e){if(window.CLIENTCONFIG.ISMOBILE){M("handleChangeBroadCastInfo",e);var t=$getState().conf.broadCastInfo,n=!1;if(t.isBroadCast!==e.isBroadCast?n=!0:t.broadCastList.length>0&&e.broadCastList.length>0?t.broadCastList[0].number!==e.broadCastList[0].number&&(n=!0):t.broadCastList.length!==e.broadCastList.length&&(n=!0),m.info("handleChangeBroadCastInfo flag ",n),n){var r=JSON.parse((0,s.default)(e));if(void 0!==r.broadCastList){var a="",o="";r.broadCastList.forEach(function(e){void 0!==e.name&&(a=e.name,e.name=handlePhoneNumber(a)),void 0!==e.number&&(o=e.number,e.number=handlePhoneNumber(o))})}if(m.info("handleChangeBroadCastInfo broadCastInfo ",(0,s.default)(r)),e.isBroadCast)for(var i=0;i<e.broadCastList.length;i++){var c=language.SVC_BROAD_CAST.format(e.broadCastList[i].name);m.info("JSToNativeToast isself  tempLanguage ",c.substr(0,5)+"***");var u=$getState().conf.isSvcConf;window.CLIENTCONFIG.ISMOBILE&&u&&window.JSToNativeToast(2e3,c),1!==e.broadCastList[i].is_self&&window.broadCastInfo(e)}else window.broadCastInfo(e)}}if(window.CLIENTCONFIG.ISMAC){var f=$getState().conf.broadCastInfo,l=!1;if(f.isBroadCast!==e.isBroadCast?l=!0:f.broadCastList.length>0&&e.broadCastList.length>0?f.broadCastList[0].number!==e.broadCastList[0].number&&(l=!0):f.broadCastList.length!==e.broadCastList.length&&(l=!0),e.isBroadCast&&l)for(var d=0;d<e.broadCastList.length;d++){var p=language.SVC_BROAD_CAST.format(e.broadCastList[d].name),h=$getState().conf.isSvcConf;h&&(m.info("mac broad toast message : ",p),window.Toast(p,5,!1,"pcToast",""))}}$dispatch(coreUi.changeBroadCastInfo(e))},P=(t.setUnreadNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{account:"",group_id:""},t=arguments[1];if(coreConf.isInConf()||!(coreCall.getCallCount()<=0)){var n=$getState(),r=n.conf.groupId,a=n.call,o=a.userInfo,i=a.screenState,s=n.recent.currentRecentInfo,c=e.account,u=e.group_id;r&&u&&r===u?(s&&s.group&&s.group.group_id===r&&("min"!==i&&"extra"!==i||(t=0)),m.info("set conf page unread num:"+t),0===t?$dispatch(coreUi.changeHasUnreadMsg(!1)):$dispatch(coreUi.changeHasUnreadMsg(!0))):c&&o&&c===o.account&&(s&&s.contact&&s.contact.account===c&&("min"!==i&&"extra"!==i||(t=0)),m.info("set call page unread num:"+t),0===t?$dispatch(coreUi.changeHasUnreadMsg(!1)):$dispatch(coreUi.changeHasUnreadMsg(!0)))}},t.dealWithSipNumber=function(e){if(isNullOrEmpty(e))return m.warn("number is empty. "),"";var t=e.toString();return-1!==t.indexOf("sip:")&&(t=t.substring(4)),-1!==t.indexOf("@")&&(t=t.split("@")[0]),t})},287:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.itmeetingSmallWin=t.itmeetingExtendConf=t.itmeetingChairman=t.itmeetingAcceptSharing=t.itmeetingShareScreen=t.itmeetingCreateConf=t.itmeetingJoinConf=t.meetingHWsetCaptureCamera=t.meetingHWcameraOnOrOff=t.meetingHWmicrophoneOnOrOff=t.meetingHWspeakerOnOrOff=t.meetingHWreCallTimeOut=t.startCallFailed=t.firstQosReport=t.meetingHWLeaveConf=t.sipRegisterFailed=t.uportalLoginFailed=t.qosAlertSend=t.meetingHWsaveIpParam=t.meetingHWJoinConf=void 0;var a=n(123),o=r(a),i=n(1),s=r(i),c=n(69),u=r(c),f=n(2),l=r(f),d=null,p=null,h="",g=null,v=!0,m=coreLogger.getLogger("logic")("meetingHWBuried"),_=function(){d=null,p=null,h="",v=!0,clearInterval(g)},C=function(){d=!0,p=null,v=!0},w=(t.meetingHWJoinConf=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="Telepresence_join_success",n="加入会议成功",m.info("joinConfData: ",h),r=$getState().conf.isVideoConf,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||(h.isVideoConf=r),a="string"==typeof h?h:(0,u.default)(h),C(),w(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(t,n,a):E(t,n,a);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.meetingHWsaveIpParam=function(e){h=e},t.qosAlertSend=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,f,l,h,g,v;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.isVideoConf,n=$getState().call.mediaInfo,r=n.audio,a=n.video,o={audioRecvBitRate:r.recv.bitRate,audioSendBitRate:r.send.bitRate,audioRecvLossFraction:r.recv.lost,audioSendLossFraction:r.send.lost,audioRecvDelay:r.recv.delay,audioSendDelay:r.send.delay,audioRecvJitter:r.recv.jitter,audioSendJitter:r.send.jitter},i={videoRecvBitRate:a.recv.bitRate,videoSendBitRate:a.send.bitRate,videoRecvResolutionRatio:a.recv.frameSize,videoSendResolutionRatio:a.send.frameSize,videoRecvFrameRate:a.recv.frameRate,videoSendFrameRate:a.send.frameRate,videoRecvLossFraction:a.recv.lost,videoSendLossFraction:a.send.lost,videoRecvDelay:a.recv.delay,videoSendDelay:a.send.delay,videoRecvJitter:a.recv.jitter,videoSendJitter:a.send.jitter},d&&null===p&&(c="string"==typeof o?o:(0,u.default)(o),f="Telepresence_qos_audio_alarm",l="通信音频状态Qos信息告警",t?(h="Telepresence_qos_video_alarm",g="通信视频状态Qos信息告警",v="string"==typeof i?i:(0,u.default)(i),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(I(f,l,c),I(h,g,v)):(E(f,l,c),E(h,g,v))):window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(f,l,c):E(f,l,c),p=!0,setTimeout(function(){p=null},6e4));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.uportalLoginFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_uportal_login_fail",r="uPortal登录失败",a={reason:t},o=(0,u.default)(a),I(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.sipRegisterFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_sip_register_fail",r="SIP注册失败",a={reason:t},o=(0,u.default)(a),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,o):E(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWLeaveConf=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="Telepresence_leave",n="离开会议",_(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(t,n,""):E(t,n,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d&&(g=setInterval(function(){S()},3e5));case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),S=(t.firstQosReport=function(){var e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v&&(m.info("firstQosReport"),S());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState().conf.sharePersonNum,t=$getState().call.mediaInfo,n=t.audio,r=t.video,a=t.bfcp,o=$getState().call.callStatus,i=0,s=0,c={audioRecvBitRate:n.recv.bitRate,audioSendBitRate:n.send.bitRate,audioRecvLossFraction:n.recv.lost,audioSendLossFraction:n.send.lost,audioRecvDelay:n.recv.delay,audioSendDelay:n.send.delay,audioRecvJitter:n.recv.jitter,audioSendJitter:n.send.jitter};for(var f in c)"- -"!==c[f]&&"--"!==c[f]&&(i+=1);if(8===i){var l="string"==typeof c?c:(0,u.default)(c);window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I("Telepresence_qos_audio_info","通话音频状态Qos信息",l):E("Telepresence_qos_audio_info","通话音频状态Qos信息",l),v=!1}if("VIDEO_CONNECTED"===o){var d={videoRecvBitRate:r.recv.bitRate,videoSendBitRate:r.send.bitRate,videoRecvResolutionRatio:r.recv.frameSize,videoSendResolutionRatio:r.send.frameSize,videoRecvFrameRate:r.recv.frameRate,videoSendFrameRate:r.send.frameRate,videoRecvLossFraction:r.recv.lost,videoSendLossFraction:r.send.lost,videoRecvDelay:r.recv.delay,videoSendDelay:r.send.delay,videoRecvJitter:r.recv.jitter,videoSendJitter:r.send.jitter};for(var p in d)"- -"!==d[p]&&"--"!==d[p]&&(s+=1);if(12===s){var h="string"==typeof d?d:(0,u.default)(d);window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I("Telepresence_qos_video_info","通话视频状态Qos信息",h):E("Telepresence_qos_video_info","通话视频状态Qos信息",h)}}if(""!==e){var g={dataRecvBitRate:a.recv.bitRate&&"--"!==a.recv.bitRate?a.recv.bitRate:-1,dataSendBitRate:a.send.bitRate&&"--"!==a.send.bitRate?a.send.bitRate:-1,dataRecvResolutionRatio:a.recv.frameSize&&"--"!==a.recv.frameSize?a.recv.frameSize:-1,dataSendResolutionRatio:a.send.frameSize&&"--"!==a.send.frameSize?a.send.frameSize:-1,dataRecvFrameRate:a.recv.frameRate&&"--"!==a.recv.frameRate?a.recv.frameRate:-1,dataSendFrameRate:a.send.frameRate&&"--"!==a.send.frameRate?a.send.frameRate:-1,dataRecvLossFraction:a.recv.lost&&"--"!==a.recv.lost?a.recv.lost:-1,dataSendLossFraction:a.send.lost&&"--"!==a.send.lost?a.send.lost:-1,dataRecvDelay:a.recv.delay&&"--"!==a.recv.delay?a.recv.delay:-1,dataSendDelay:a.send.delay&&"--"!==a.send.delay?a.send.delay:-1,dataRecvJitter:a.recv.jitter&&"--"!==a.recv.jitter?a.recv.jitter:-1,dataSendJitter:a.send.jitter&&"--"!==a.send.jitter?a.send.jitter:-1},m="string"==typeof g?g:(0,u.default)(g),_="Telepresence_qos_data_info";window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(_,"通话辅流状态Qos信息",m):E(_,"通话辅流状态Qos信息",m)}}),I=(t.startCallFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_make_call_fail",r="makeCall失败",a={reason:t},o=(0,u.default)(a),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,o):E(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWreCallTimeOut=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_abnormal_break",r="异常掉会",a={reason:t},o=(0,u.default)(a),_(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,o):E(n,r,o);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWspeakerOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_speaker",r="免提开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,""):E(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWmicrophoneOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_microphone",r="MIC开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,""):E(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWcameraOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_camera",r="摄像头开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,""):E(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWsetCaptureCamera=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_camera",r="",1===t?(n+="_back",r="切换为前置摄像头"):(n+="_front",r="切换为后置摄像头"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?I(n,r,""):E(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(t,n,r){var a,i,c,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:a=$getState(),i=a.login.sipImpi,c=a.conf.confSubject,i.indexOf("@")&&(i=i.split("@")[0]),i=""+i,c=c||"",f="win",""!==r?(r=JSON.parse(r),r=(0,o.default)({},r,{accessCode:""+window.linkSmcAccessCode,meetingId:""+window.linkSmcPasscode,meetingName:c,platform:f,sipNo:i}),r=(0,u.default)(r)):(r={accessCode:""+window.linkSmcAccessCode,meetingId:""+window.linkSmcPasscode,meetingName:c,platform:f,sipNo:i},r=(0,u.default)(r)),window.meetingWHBuriedReport(t,n,r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),E=(t.itmeetingJoinConf=function(){m.info("IT_MEETING joinconf bury point");var e={from:"workplace",version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE},t=(0,u.default)(e);E("Telepresence_join","加入会议",t)},t.itmeetingCreateConf=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING createConf bury point"),n=$getState().conf.isVideoConf,r="创建会议",a="Telepresence_create_conf",o={actionType:t,isVideoConf:n},i=(0,u.default)(o),E(a,r,i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingShareScreen=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING shareScreen bury point"),n="Telepresence_share",r="",t?(n+="_start",r="屏幕共享"):(n+="_stop",r="停止共享"),E(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingAcceptSharing=function(){m.info("IT_MEETING acceptSharing");E("Telepresence_receive_share","接收共享","")},t.itmeetingChairman=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING applyOrReleaseChairman bury point"),n="Telepresence_chairman",r="",t?(n+="_apply",r="申请主席"):(n+="_release",r="释放主席"),E(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingExtendConf=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING extendConf bury point"),n="Telepresence_extend_conf",r="延长会议",a={time:t},o=(0,u.default)(a),E(n,r,o);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingSmallWin=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING smallWin bury point"),n="Telepresence_smallwin",r="",t?(n+="_open",r="显示小画面"):(n+="_close",r="隐藏小画面"),E(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(t,n,r){var a,i,c,f,l,d,p,h,g,v;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=2;break}return e.abrupt("return");case 2:a=$getState(),i=a.login.sipImpi,c=a.conf.confSubject,i.indexOf("@")&&(i=i.split("@")[0]),i=""+i,c=c||"",f="win",l=$getState().conf.currentConfInfo,d=l.access_number,p=l.vmr_id,h=l.conf_id,g=isNullOrEmpty(d)?"":d,g&&g.indexOf("+")>-1&&(g=g.replace("+","00")),v=isNullOrEmpty(p)?h:p,v=isNullOrEmpty(v)?"":v,""!==r?(r=JSON.parse(r),r=(0,o.default)({},r,{accessCode:g,meetingId:v,meetingName:c,platform:f,sipNo:i}),r=(0,u.default)(r)):(r={accessCode:g,meetingId:v,meetingName:c,platform:f,sipNo:i},r=(0,u.default)(r)),window.ITMeetingBuriedReport(t,n,r);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}())},288:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sipLoginAtomicReset=t.sipLoginAtomic=t.sipserverLogin=t.loginToRegSipServer=t.loginToSipServer=void 0;var a=n(123),o=r(a),i=n(3),s=r(i),c=n(69),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.getCallInstance;case 2:t=e.sent,t.setNotifyFunc(98305,N);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.getCallInstance;case 2:t=e.sent,t.setNotifyFunc(98691,v);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,coreUt.utHandleServerError({isLocalError:n.isLocalError,requestId:n.requestId,serverName:n.serverName,serverApiName:n.serverApiName,errorCode:n.errorCode,errorDescription:n.errorDescription});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),m=t.loginToSipServer=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I=s,S.info("[ loginToSipServer ] _ignoreSipResult "+s),S.info("<account_login><7_sip>begin"),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER]}),e.next=6,(0,_.getLoginModel)();case 6:if(t=e.sent,n=t.isMultiDeviceLogined,r=t.isMobile,a=t.stgUri,o=t.sipLoginOnly,(0,C.registerSipResultCallback)(),
//! 移动端因为存在多终端登录场景，不在这里进行Sip注册了，在eServer登录完成后，获取到多终端登录的通知后，进行Sip注册；PC端不变；
S.info("[ loginToSipServer ] isMultiDeviceLogined:"+n+", isMobile:"+r+", sipLoginOnly:"+o),n&&r&&(S.info("[ loginToSipServer ] end login:"),t.setLoginStatus(!1,!0)),n&&r&&!o){e.next=24;break}return h(),e.next=15,E(t.isTempLogin);case 15:if(i=e.sent,S.info("[ confctrlInit ] start"),!t.useMetting||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=20;break}return e.next=20,coreConf.confctrlInit();case 20:return S.info("[ confctrlInit ] end"),e.abrupt("return",i);case 24:return e.abrupt("return",{result:!1});case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=(t.loginToRegSipServer=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(),e.next=3,E(!1);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(136)),C=n(185),w=n(230),S=coreLogger.getLogger("logic")("login/sipLogin"),I=!1,E=t.sipserverLogin=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o,i,c,f,d,p,h,v,m,C,I,E,N,b,T,y,O,x,A,L,k,R,M,D,P,F,U,B,W,G,V,H,$,j,q,Y,K,J,z,Q,X,Z,ee,te,ne,re,ae=arguments.length>0&&void 0!==arguments[0]&&arguments[0],oe=arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(oe)){e.next=4;break}return e.next=3,(0,_.getLoginModel)();case 3:oe=e.sent;case 4:return t=oe,n=t.sipImpi,r=t.sipAccount,a=t.sipLoginOnly,o=t.serverAddress,i=t.serverPort,c=t.deployMode,f=t.tempsipserverAddress,d=t.tempsipserverPort,oe.isInSipLogin=!0,e.next=8,coreSecurity.getPasswordManager();case 8:return p=e.sent,h=p.getPassword("sipPassword"),a&&(o=f,i=d),(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)&&(window.isSupportiDo=!0),e.next=14,new coreTup.getCallInstance;case 14:return v=e.sent,e.next=17,g();case 17:if(window.CLIENTCONFIG.ISMOBILE&&(window.sendToTupConfig(),S.info("[bfcp] sendToTupConfig success")),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=37;break}S.info("[IT-Meeting] tup service multiuser model open"),e.next=24;break;case 24:return e.next=26,v.initForMultiuser();case 26:return e.next=28,v.setEnableMutiUsed(1);case 28:return m={account:{account_enable_sip:1}},e.next=31,v.config(m);case 31:return e.next=33,v.setAccountIdEnable(0);case 33:return e.next=35,v.registerProcessNotifyForAccount(0);case 35:return e.next=37,v.setTupCallLogParams(3,5e3,1,window.LOG_PATH);case 37:return e.next=39,(0,w.configHMELog)();case 39:C=e.sent,S.info("sip server login configHmeInfo=",C),v.setHMELog(C),e.next=45;break;case 45:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=119;break}return e.next=48,(0,w.configSip)(ae);case 48:return I=e.sent,e.next=51,v.config(I);case 51:return e.next=54,coreSetting.initMediaDevice();case 54:return E=(0,w.configCall)(),e.next=57,v.config(E);case 57:return N=(0,w.configRejectCallType)(),e.next=60,v.config(N);case 60:return b=(0,w.serPointPickupCfg)(),S.info("pointPickup + "+(0,u.default)(b)),e.next=64,v.config(b);case 64:return T=(0,w.serGroupPickupCfg)(),S.info("groupPickup + "+(0,u.default)(T)),e.next=68,v.config(T);case 68:return e.next=70,(0,w.configMKI)();case 70:return y=e.sent,e.next=73,v.config(y);case 73:return e.next=75,(0,w.configRTP)();case 75:return O=e.sent,e.next=78,v.config(O);case 78:return e.next=80,(0,w.configVideo)();case 80:return x=e.sent,e.next=83,v.config(x);case 83:return e.next=85,(0,w.configBFCP)();case 85:return A=e.sent,e.next=88,v.config(A);case 88:return"android"===window.CLIENTCONFIG.PLATFORM&&(L=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.isHardDecodeToNative(L)),S.info("debug info config bfcp sip config"),k=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),R=!1,k!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&k!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(R=!0),e.next=95,(0,w.configBFCPForTLS)({bForceTLSMode:R});case 95:return M=e.sent,e.next=98,v.configBFCPTLSParam(M);case 98:return e.next=100,(0,w.configSessionTimer)();case 100:return D=e.sent,e.next=103,v.config(D);case 103:return e.next=105,(0,w.configBandwidthLimit)();case 105:return P=e.sent,e.next=108,v.config(P);case 108:if(S.info("First issue CHR config to call"),ae){e.next=114;break}return e.next=112,coreSetting.issuedChrConfigToCall();case 112:return e.next=114,coreSetting.issuedTerminalConfig();case 114:S.info("sip server login sipAccount=",handlePhoneNumber(r)),-1!==r.indexOf("sip:")&&(r=r.substring(4)),window.CLIENTCONFIG.ISMOBILE&&(S.info("set capRotateCtrlMode"),v.setCapRotateCtrlMode(1)),e.next=182;break;case 119:return F=[],e.next=122,(0,w.configSip)(ae);case 122:return U=e.sent,F.push(v.config(U)),e.next=127,coreSetting.initMediaDevice();case 127:return B=(0,w.configVideo)(),W=(0,w.configBFCP)(),G=(0,w.configCall)(),F.push(v.config(G)),V=(0,w.configRejectCallType)(),F.push(v.config(V)),H=(0,w.serPointPickupCfg)(),S.info("pointPickup + "+(0,u.default)(H)),F.push(v.config(H)),$=(0,w.serGroupPickupCfg)(),S.info("groupPickup + "+(0,u.default)($)),F.push(v.config($)),e.next=141,(0,w.configMKI)();case 141:return j=e.sent,F.push(v.config(j)),e.next=145,(0,w.configRTP)();case 145:return q=e.sent,F.push(v.config(q)),e.next=149,B;case 149:return Y=e.sent,F.push(v.config(Y)),e.next=153,W;case 153:return K=e.sent,F.push(v.config(K)),"android"===window.CLIENTCONFIG.PLATFORM&&(J=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.isHardDecodeToNative(J)),S.info("debug info config bfcp sip config"),z=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),Q=!1,z!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&z!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(Q=!0),e.next=162,(0,w.configBFCPForTLS)({bForceTLSMode:Q});case 162:return X=e.sent,e.next=165,v.configBFCPTLSParam(X);case 165:return e.next=167,(0,w.configSessionTimer)();case 167:return Z=e.sent,F.push(v.config(Z)),e.next=171,(0,w.configBandwidthLimit)();case 171:if(ee=e.sent,F.push(v.config(ee)),S.info("First issue CHR config to call"),ae){e.next=177;break}return e.next=177,s.default.all([coreSetting.issuedChrConfigToCall(),coreSetting.issuedTerminalConfig()]);case 177:return S.info("sip server login sipAccount=",handlePhoneNumber(r)),-1!==r.indexOf("sip:")&&(r=r.substring(4)),window.CLIENTCONFIG.ISMOBILE&&(S.info("set capRotateCtrlMode"),v.setCapRotateCtrlMode(1)),e.next=182,s.default.all(F);case 182:if(window.confCtrlLoaded||!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=185;break}return e.next=185,coreConf.confctrlInit();case 185:return e.next=187,h;case 187:if(te=e.sent,S.info("sip server login"),ne=void 0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=199;break}return re={sip_account_id:0,account:{account_auth_sip:{account:r,user_name:n,passwd:te}}},e.next=194,v.config(re);case 194:return e.next=196,v.registerForAccount(0);case 196:ne=e.sent,e.next=202;break;case 199:return e.next=201,v.register(n,r,te);case 201:ne=e.sent;case 202:if(S.info("hwTupCall.register sip",ne),0!==ne.result){e.next=209;break}return S.info("sip register execute success."),$dispatch(coreUi.changeDoSipReg(!0)),e.abrupt("return",{result:!0});case 209:return window.CLIENTCONFIG.ISBIGWIN?(coreConf.NotifyLoginFailedEx(1),S.info("big win login failed")):window.isHubEnv&&(coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_OTHER),S.info("maxhub sipserverLogin login failed")),S.error("sip register execute fail."),e.abrupt("return",{result:!1});case 212:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("[sip register]"),e.next=3,(0,_.getLoginModel)();case 3:n=e.sent,window.dispatchEvent((0,o.default)(new Event("sipRegResultEvent"),{registerState:t.param.register_state,reasonCode:t.param.reason_code})),S.info("[sip register] is_deregister: "+t.param.is_deregister+"->0:login,1:logout; reason_code:"+t.param.reason_code),n.sipRegisterState=t.param.register_state,constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED===t.param.register_state&&0===t.param.reason_code?(S.info("[sip register] ok"),S.info("<account_login><7_sip>end ok"),n.setLoginStatus(!1,!0),coreConf.initTupPairClient(),n.isInSipLogin=!1,b.resolve(),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,resultParams:[1,n.isResume?1:0],isTrackTimeCosts:!0})):constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING===t.param.register_state?(S.info("[sip register] registering"),n.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING):(n.setLoginStatus(!1,!0),constant.SIP_REGISTER_STATE.SIP_REGISTER_BUTT!==t.param.register_state&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&0!==t.param.reason_code&&coreConf.sipRegisterFailed(t.param.reason_code),$getState().login.sipLoginOnly&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(r=n.loginHistoryList,a=n.loginRecordList,coreAccount.showLoginInfo({loginInfo:a[0],loginHistoryList:r,loginRecordList:a})):(n.displayAccount="",n.password="")),S.error("[sip register] sip register not ok，sip offline"),n.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER,0===t.param.is_deregister&&(S.info("<account_login><7_sip>end failed"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,resultParams:[0,t.param.reason_code,n.isResume?1:0],isTrackTimeCosts:!1}),I?(n.isInSipLogin=!1,b.resolve()):(n.isInSipLogin=!1,b.reject({errorType:constant.LOGIN_ERROR_TYPE.sip,errorCode:"register_fail"})))),coreCommon.dispatchModuleEvent("sipRegResultEvent",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),b=PromiseObject();t.sipLoginAtomic=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,_.getLoginModel)().then(function(t){if(S.debug("[sipLoginAtomic]  status:"+t.sipRegisterState+" status: "+b.status),t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED)S.debug("[sipLoginAtomic]  already registered ");else if(t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER)try{return b=PromiseObject(),S.debug("[sipLoginAtomic] do sip login "),m(e),S.debug("[sipLoginAtomic] finish sip login "),b}catch(e){S.error("[sipLoginAtomic] exception: "+e.toString())}else S.debug("[sipLoginAtomic]  already registering ");return b})},t.sipLoginAtomicReset=function(){b=PromiseObject()}},289:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorTips=t.handleLoginError=t.handleCommonLoginFailed=t.handleUportalLoginFailed=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(195),l=n(221),d=n(290),p=coreLogger.getLogger("login")("uportal"),h=(coreLogger.getLogger("login")("sip"),coreLogger.getLogger("login")("eab"),coreLogger.getLogger("login")("common")),g=t.handleUportalLoginFailed=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i,c,u,g,v=t.errorCode;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:n=e.sent,r=n.isResume,h.info("handleUportalLoginFailed isResume "+r),a=function(e){return p.error((r?"Resume UportalLoginError":"UportalLoginError")+": ["+e+"]")},o=!1,i=!1,c=void 0,e.t0=v,e.next="LOGIN_ADDRESS_OR_PORT_EMPTY"===e.t0?11:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY"===e.t0?15:"LOGIN_ACCOUNT_HAS_SPACE"===e.t0?19:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT?23:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED?26:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR?29:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR?32:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SEARCH_SERVER_FAIL?35:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED?38:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR?43:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED?48:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR?52:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR?55:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR?58:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR?61:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_HAS_PROXY_NO_STG?64:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE?67:71;break;case 11:return c=language.LOGIN_ADDRESS_OR_PORT_EMPTY,a("LOGIN_ADDRESS_OR_PORT_EMPTY"),o=!0,e.abrupt("break",74);case 15:return c=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,a("LOGIN_ACCOUNT_OR_PASSWORD_EMPTY"),o=!0,e.abrupt("break",74);case 19:return c=language.LOGIN_ACCOUNT_HAS_SPACE,a("LOGIN_ACCOUNT_HAS_SPACE"),o=!0,e.abrupt("break",74);case 23:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 26:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_REQUEST_FAILED"),e.abrupt("break",74);case 29:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_DNS_ERROR"),e.abrupt("break",74);case 32:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_SERVICE_ERROR"),e.abrupt("break",74);case 35:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_SEARCH_SERVER_FAIL"),e.abrupt("break",74);case 38:return o=!0,i=!0,c=language.LOGIN_USERPWD_ERROR,a("LOGIN_ERR_AUTH_FAILED"),e.abrupt("break",74);case 43:return o=!0,i=!0,c=language.LOGIN_USERPWD_ERROR,a("LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR"),e.abrupt("break",74);case 48:return o=!0,c=language.LOGIN_ERR_ACCOUNT_LOCKED,a("LOGIN_ERR_ACCOUNT_LOCKED"),e.abrupt("break",74);case 52:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_STG_TUNNEL_BUILD_ERROR"),e.abrupt("break",74);case 55:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 58:return c=language.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR,a("LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR"),e.abrupt("break",74);case 61:return c=language.CALL_CALLING_FAILED,a("LOGIN_E_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 64:return c=language.LOGIN_E_ERR_AUTH_ERROR,a("LOGIN_ERR_HAS_PROXY_NO_STG"),e.abrupt("break",74);case 67:return o=!0,i=!0,c=language.RENEW_EXPIRED_REMINDER,a("LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE"),e.abrupt("break",74);case 71:return c=language.CALL_CALLING_FAILED,a("Unhandle errorCode:["+v+"]"),e.abrupt("break",74);case 74:if(h.info("logLoginError msg :",c),!window.CLIENTCONFIG.ISMOBILE||!window.stroage.isFastLogin()||r){e.next=83;break}return window.stroage.setFastLogin(!1),navigator.splashscreen&&navigator.splashscreen.hide(),e.next=80,(0,f.getLoginModel)();case 80:u=e.sent,u.clearPassword(),window.goRoute("loginCtn");case 83:if(o&&i&&(0,d.checkAndEndCall)().then(function(){h.info("up login check and end call ",i)}),!r||o){e.next=88;break}n.setLoginStatus(!1,!1),e.next=115;break;case 88:if(!r||i){e.next=94;break}return e.next=91,(0,l.stopResume)("handleUportalLoginFailed1");case 91:n.setLoginStatus(!1,!1),e.next=115;break;case 94:if(window.CLIENTCONFIG.ISBIGWIN){e.next=114;break}if(!window.isHubEnv){e.next=101;break}n.setLoginStatus(!1,!1),n.maxhubLoginError={serverType:0,errorCode:v},window.getRoute()&&"maxhubLogin"!==window.getRoute()&&delegate.logout(),e.next=112;break;case 101:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=106;break}g=c||"unknow error",window.itWeLinkNotifyCallEnded(0,g),e.next=112;break;case 106:if(n.setLoginStatus(!1,!1),h.info("handleUportalLoginFailed",c||"unknow error"),!r||!i){e.next=111;break}return e.next=111,(0,l.stopResume)("handleUportalLoginFailed2");case 111:alert(c||"unknow error",[constant.DIALOG_LOG_CODE.LOG_UPORTAL_LOGIN_FAILED]).then(function(){h.info("resetDisableLogin"),window.getRoute()&&"login"!==window.getRoute()&&"login/joinConfSIPOnly"!==window.getRoute()&&"login/noLoginJoinConference"!==window.getRoute()&&!1===window.CLIENTCONFIG.ISMOBILE&&delegate.logout(),window.CLIENTCONFIG.ISMOBILE&&i&&window.getRoute()&&"loginCtn"!==window.getRoute()&&delegate.logout()});case 112:e.next=115;break;case 114:n.setLoginStatus(!1,!1);case 115:return e.abrupt("return",c);case 116:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),v=t.handleCommonLoginFailed=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o=t.errorCode;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:n=e.sent,r=n.isResume,a=function(e){return h.error((r?"Resume Login Error":"Login Error")+": "+e)},e.t0=o,e.next="duplicateLogin"===e.t0?8:"fistLoginReject"===e.t0?10:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?12:17;break;case 8:return a("[ DuplicateLogin ] login oper failed, there is a login oper now..."),e.abrupt("break",18);case 10:return a("[ FistLoginReject ] fist login rejected, after changepassword will relogin..."),e.abrupt("break",18);case 12:return a("[ IWB2MaxHub ] this is maxhub tegrate enviroument, the account is not iwb account"),n.setLoginStatus(!1,!1),n.maxhubLoginError={serverType:0,errorCode:o},window.getRoute()&&"maxhubLogin"!==window.getRoute()&&delegate.logout(),e.abrupt("break",18);case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.handleLoginError=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("[ handleLoginError ]"+(0,o.default)(t)),h.info("<account_login><10_error>"+(0,o.default)(t)),e.next=4,(0,f.getLoginModel)();case 4:n=e.sent,$getState().login.sipLoginOnly&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(r=n.loginHistoryList,a=n.loginRecordList,coreAccount.showLoginInfo({loginInfo:a[0],loginHistoryList:r,loginRecordList:a})):(n.displayAccount="",n.password="")),n.clearInLoginState(),t&&t.errorType?(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(n.isResume?h.info("[IT-Meeting] login failed, resume login."):(h.info("[IT-Meeting] login failed, go back."),window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))),t.errorType===constant.LOGIN_ERROR_TYPE.common?(window.CLIENTCONFIG.ISBIGWIN?coreConf.NotifyLoginFailedEx(1):window.isHubEnv&&("LOGIN_ERR_IWB_MAXHUB_ACCOUNT"===t.errorCode?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_ACC_OR_PAS):coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_NETWORK),h.info("maxhub handleLoginError LOGIN_ERROR_TYPE.common errcode: "+t.errorCode)),v(t)):t.errorType===constant.LOGIN_ERROR_TYPE.uportal?(g(t),n.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.INIT,window.CLIENTCONFIG.ISBIGWIN?(window.shouldStopRertyLogin=!1,window.bigwinReTryLogin()):window.isHubEnv&&(t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_BAD_ACCESS_DURING_UPGRADE||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_INVALID_URL?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_NETWORK):t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_USER_NOT_EXISTS||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_USER_NOT_EXISTS||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_ACC_OR_PAS):coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_OTHER),h.info("maxhub handleLoginError LOGIN_ERROR_TYPE.uportal errcode: "+t.errorCode))):(t.errorType,constant.LOGIN_ERROR_TYPE.eabserver),coreCommon.dispatchModuleEvent("login",{event:t.errorType,code:t.errorCode})):(h.error("no exact error handle",t),n.setLoginStatus(!1,!1));case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getErrorTips=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("get error tips, server=",t+", errorCode=",n),r="",0!==t){e.next=44;break}e.t0=n,e.next=e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY?6:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY?8:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT?10:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED?12:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR?14:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR?16:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SEARCH_SERVER_FAIL?18:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED?20:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR?22:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED?24:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR?26:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR?28:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR?30:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR?32:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_HAS_PROXY_NO_STG?34:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE?36:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?38:40;break;case 6:return r=language.LOGIN_ADDRESS_OR_PORT_EMPTY,e.abrupt("break",42);case 8:return r=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",42);case 10:case 12:case 14:case 16:case 18:return r=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 20:case 22:return r=language.LOGIN_USERPWD_ERROR,e.abrupt("break",42);case 24:return r=language.LOGIN_ERR_ACCOUNT_LOCKED,e.abrupt("break",42);case 26:case 28:return r=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 30:return r=language.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR,e.abrupt("break",42);case 32:return r=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 34:return r=language.LOGIN_E_ERR_AUTH_ERROR,e.abrupt("break",42);case 36:return r=language.RENEW_EXPIRED_REMINDER,e.abrupt("break",42);case 38:return r=language.MAXHUB_INVALID_ACCOUTN,e.abrupt("break",42);case 40:return r=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 42:e.next=74;break;case 44:if(1!==t){e.next=74;break}e.t1=n,e.next=e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY?48:e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY?50:e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_LOCALIP_GET_FAILED?52:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_TIMEOUT?54:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_PASSWORD_ERROR?56:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_FAILED?58:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_NOT_EXIST?60:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_NEED_NEW_VERSION?62:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_NOT_ACTIVE?64:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_SUSPEND?66:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_LOCKED?68:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_EXPIRE?70:72;break;case 48:return r=language.LOGIN_ADDRESS_OR_PORT_EMPTY,e.abrupt("break",74);case 50:return r=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",74);case 52:case 54:return r=language.CALL_CALLING_FAILED,e.abrupt("break",74);case 56:case 58:case 60:return r=language.LOGIN_USERPWD_ERROR,e.abrupt("break",74);case 62:return r=language.LOGIN_NEED_NEW_VERSION,e.abrupt("break",74);case 64:case 66:case 68:case 70:return r=language.LOGIN_ACCOUNT_ERROR,e.abrupt("break",74);case 72:return r=language.CALL_CALLING_FAILED,e.abrupt("break",74);case 74:return e.abrupt("return",r);case 75:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()},290:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.endCurrentCall=t.checkAndEndCall=t.checkBeforeSetOffline=t.checkBeforeLogout=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(136),u=coreLogger.getLogger("logic")("login/checkBeforeLogout"),f=(t.checkBeforeLogout=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u.debug("checkBeforeLogout"),e.next=4,f(t);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",n);case 7:if(window.CLIENTCONFIG.ISMOBILE){e.next=20;break}return e.next=10,p(t);case 10:if(n=e.sent,u.info("checkResult checkFileTransFer"+n),n&&!1!==n.ret){e.next=14;break}return e.abrupt("return",!1);case 14:return e.next=16,d(t,r);case 16:if(n=e.sent,u.info("checkResult checkEditor :"+n),n){e.next=20;break}return e.abrupt("return",n);case 20:return e.abrupt("return",n);case 23:return e.prev=23,e.t0=e.catch(0),u.error("checkBeforeLogout",{type:t,e:e.t0.toJSON()}),e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,void 0,[[0,23]])}));return function(t){return e.apply(this,arguments)}}(),t.checkBeforeSetOffline=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u.debug("checkBeforeSetOffline"),e.next=4,f(t,r);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",n);case 7:if(window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return e.next=10,p(t,r);case 10:if(n=e.sent){e.next=13;break}return e.abrupt("return",n);case 13:return e.abrupt("return",n);case 16:return e.prev=16,e.t0=e.catch(0),u.error("checkBeforeSetOffline",{type:t,e:e.t0.toJSON()}),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,void 0,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getLoginModel)();case 2:if(t=e.sent,u.info(" checklogin : isInUportalLogin:"+t.isInUportalLogin+", isInInitPrivateDB:"+t.isInInitPrivateDB+", isInDetectFireWall:"+t.isInDetectFireWall+", isInLoadConfigFromDB:"+t.isInLoadConfigFromDB+", isInEserverLogin:"+t.isInEserverLogin+", isInSipLogin:"+t.isInSipLogin),!(t.isInUportalLogin||t.isInInitPrivateDB||t.isInDetectFireWall||t.isInLoadConfigFromDB||t.isInEserverLogin||t.isInSipLogin)){e.next=8;break}return n=language.COMMON_CHECK_LOGOUT_LOGINEXIST,alert(n),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u.info("checkCall"),!(coreCall.getCallCount()>0)){e.next=33;break}if(!(window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||window.isPluginEnv)){e.next=9;break}return e.next=6,l();case 6:window.endCallPromise=null,e.next=33;break;case 9:if(n="",r="LANG_NATIVE_CONFIRM_TITLE",t===constant.LOGOUT_TYPE.LOGOUT?n=language.COMMON_CHECK_LOGOUT_CALLEXIST:t===constant.LOGOUT_TYPE.EXIT?n=language.COMMON_CHECK_QUIT_CALLEXIST:t===constant.LOGOUT_TYPE.SETOFFLINE&&(n=language.COMMON_CHECK_QUIT_OFFLINE),!n){e.next=33;break}if(a=!1,!i){e.next=26;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=21;break}return e.next=18,window.confirm(n);case 18:a=e.sent,e.next=24;break;case 21:return e.next=23,window.confirm(n,r,!0);case 23:a=e.sent;case 24:e.next=27;break;case 26:a={ret:!0};case 27:if(!a.ret){e.next=32;break}return window.CLIENTCONFIG.ISMOBILE||appService.resetTrayMenu(),e.next=31,l();case 31:window.endCallPromise=null;case 32:return e.abrupt("return",a.ret);case 33:return"CALL_INCOMING"===$getState().call.callStatus&&coreUi.stopRing(),e.abrupt("return",!0);case 37:return e.prev=37,e.t0=e.catch(0),u.error("checkCall",{e:e.t0.toJSON()}),e.abrupt("return",!1);case 41:case"end":return e.stop()}},e,void 0,[[0,37]])}));return function(t){return e.apply(this,arguments)}}()),l=(t.checkAndEndCall=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u.info("checkAndEndCall"),!(coreCall.getCallCount()>0)){e.next=4;break}return e.abrupt("return",l());case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),u.error("checkAndEndCall",{e:e.t0.toJSON()}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,void 0,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),t.endCurrentCall=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.endCallPromise=new PromiseObject,setTimeout(function(){null!==window.endCallPromise&&window.endCallPromise.resolve()},5e3),t=$getState(),n=t.conf,r=n.confHandle,a=n.selfRole,i=t.call.callId,coreConf.isInConf()){e.next=9;break}return u.info("ConfrimNotify end call, callId=",i),e.next=7,coreCall.callHangup(i);case 7:e.next=12;break;case 9:return u.info("ConfrimNotify leave conf, confHandle=",r),e.next=12,coreConf.actionLeaveConf();case 12:return coreUi.selectBoxCancelDataNWin(),window.CLIENTCONFIG.ISMOBILE&&"mConfMemberPage"===(s=window.getRoute())&&window.goRoute("main/conference"),e.abrupt("return",window.endCallPromise);case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),d=function(e,t){try{var n=language.PRE_EXIT_CHECK_EDITOR,r=!0;return e===constant.LOGOUT_TYPE.LOGOUT&&(r=!0,n=language.PRE_LOGOUT_CHECK_EDITOR),t?coreIm.checkEditorBeforeLogout({showInfo:n,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:r}):coreIm.checkEditor({showInfo:n,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:r})}catch(e){return u.error("checkEditor check异常，强制通过",{e:e.toJSON()}),!0}},p=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=language.PRE_EXIT_CHECK_FILE_TRANSFER;e===constant.LOGOUT_TYPE.LOGOUT&&(n=language.PRE_LOGOUT_CHECK_FILE_TRANSFER);return coreIm.checkFileTransFer({showInfo:n,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:!0,isShowAlert:t})}catch(e){return u.error("checkFileTransFer  check异常，强制通过",{e:e.toJSON()}),!0}}},291:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.actionGetCorpResourceAtomic=t.getVerifyCodeAndSetUi=t.sendCaptchaResultAndSetUi=t.getCaptchaAndSetUi=t.getVerifyCode=t.sendCaptchaResult=t.getCaptcha=t.clearLocalDNSIp=t.setLocalDNSIp=t.getLocalDNSIp=t.frogetPassword=t.verifyVerificationCode=t.requestVerificationCode=t.queryUserAccount=t.recordPrivacy=t.actionGetUploadInfo=t.actionRefreshToken=t.changeLoginPassword=t.queryMediaXaddrFromServer=t.resumeUportalService=t.resetLoginInfo=void 0;var a=n(69),o=r(a),i=n(3),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(n),r=encodeURIComponent(r),a=r,e.next=5,(0,g.getLoginModel)();case 5:return o=e.sent,i=o.middleEndAddress,s=o.crypt_token,c="https://"+i+"/mcloud/mag/ProxyForText/wemiddle/api/v1/sso/personal_password_modify",w.info("change it pd url = :",c),e.next=12,coreHttp.sendSyncRequest({url:c,type:constant.REQUEST_TYPE.POST,header:{"Content-Type":"application/x-www-form-urlencoded",lang:"en",Cookie:"token="+s},body:"account="+t+"&oldPasswd="+n+"&newPasswd="+r+"&confirmPasswd="+a});case 12:return f=e.sent,e.abrupt("return",f);case 14:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),p=n(118),h=r(p),g=n(136),v=n(165),m=n(228),_=n(126),C=coreCommonComponent.Icon,w=coreLogger.getLogger("login")("uportal");window.refreshUportalToken=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nil;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},t.param={},t.param.result=0,t.param.refresh_token_result={},!window.webView||n){e.next=8;break}t.param.refresh_token_result.auth_token=window.webView.getImToken(),e.next=13;break;case 8:if(!(n&&n.indexOf("@")>0)){e.next=12;break}return e.next=11,coreSecurity.encode64(n);case 11:n=e.sent;case 12:t.param.refresh_token_result.auth_token=n;case 13:t.param.refresh_token_result.stg_account="",t.param.refresh_token_result.stg_pwd="",(0,m.getUportalApi)().refreshTokenCallback(t);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.resetLoginInfo=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={authToken:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerBackup2:"",sipServerPortBackup2:0,sipServerBackup3:"",sipServerPortBackup3:0,eabUri:"",groupServer:"",eServerAddressAll:"",eServerAddress:"",eServerPort:0,sipUri:"",svnUri:"",httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,smcUri:"",maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:""},e.next=3,coreSecurity.getPasswordManager();case 3:return n=e.sent,e.next=6,n.setPassword("stgPassword","");case 6:return e.next=8,n.setPassword("sipPassword","");case 8:return e.next=10,(0,g.getLoginModel)();case 10:r=e.sent,r.set(t);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resumeUportalService=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:t=e.sent,t.setNotifyFunc(360459,(0,m.getUportalApi)().refreshTokenCallback);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.queryMediaXaddrFromServer=function(e,t){return new s.default(function(){var n=(0,l.default)(u.default.mark(function n(r,a){var o,i,s,c,f;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.setNotifyFunc(360486,E),n.next=4,(0,g.getLoginModel)();case 4:o=n.sent,i=o.serverAddress,s=o.serverPort,c=function(e){if(e&&e.param&&0===e.param.result){if(isNullOrEmpty(e.param.mediax_result))return void r({result:1});var n=void 0,a=e.param.mediax_result.server_uri,o=e.param.mediax_result.cms_uri;if(a&&o)n=t?o:a,w.info("cmsAddr:",o,"mediaxAddr:",a,"is_cms_addr:",t);else if(a)n=a,t=0,w.info("mediaxAddr:",a);else{if(!o)return w.error("queryMediaXaddrFromServer mediaX address is empty!"),void r({result:1});n=o,t=1,w.info("cmsAddr:",o)}var s=n.split(":");w.info("queryMediaXaddrFromServer mediaX address success"),(0,g.getLoginModel)().then(function(e){e.tempMediaxAddress=s[0],e.tempMediaxPort=s[1]}),r({result:0,mediaxAddr:s[0],mediaxPort:parseInt(s[1]),isCmsAddr:t})}else e&&e.param&&e.param.result===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT&&N(i),w.error("queryMediaXaddrFromServer notify failed,errorcode:",e.param.result),r({result:1})},f=window.setTimeout(function(){w.error("queryMediaXaddrFromServer 6s time out"),r({result:1}),N(i)},6e3),I(i).then(function(t){isNullOrEmpty(t)||(i=t),e.getMediaxAccessAddr(i,parseInt(s),c).then(function(e){window.clearTimeout(f),e&&0!==e.result&&(w.error("queryMediaXaddrFromServer failed"),r({result:1}))})}),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),w.error("queryMediaXaddrFromServer",{e:n.t0.toJSON()}),r({result:1});case 16:case"end":return n.stop()}},n,void 0,[[0,12]])}));return function(e,t){return n.apply(this,arguments)}}())};window.getDnsResult=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="",t&&(r=JSON.parse(t),r.loginOnCurrentDnsResult&&(n=r.loginOnCurrentDnsResult,E(n)));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var S=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w.info("change [password] checkCall"),!$getState().call.showCallToolBar&&"VIDEO_OUT"!==$getState().call.callStatus&&"VIDEO_CONNECTED"!==$getState().call.callStatus){e.next=16;break}if(t="LANG_NATIVE_CONFIRM_TITLE",n=language.COMMON_CHECK_CHANGEPASSWORD_CALLEXIST,r=!1,!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=9,window.confirm(n);case 9:r=e.sent,e.next=15;break;case 12:return e.next=14,window.confirm(n,t,!0);case 14:r=e.sent;case 15:return e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(0),w.error("checkCall",{e:e.t0.toJSON()}),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,void 0,[[0,19]])}));return function(){return e.apply(this,arguments)}}();t.changeLoginPassword=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s,c,f,p,v,m,I,E,N;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:return a=e.sent,e.next=5,S();case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(window.navigator.onLine){e.next=11;break}return alert(language.LOGIN_RESUME_NETWORK_ERROR),e.abrupt("return");case 11:if(i=PromiseObject(),s=void 0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME){e.next=27;break}return c=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,w.info("change [pass]word result: "+n.result),s&&window.clearTimeout(s),n&&0===n.result?(coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),window.CLIENTCONFIG.ISMOBILE?window.alert(language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),i.resolve(!0)}):window.alert(language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),coreUi.showModal(h.default.createElement("div",{className:"loading-icon-bg"},h.default.createElement(C,{type:_.iconTypeMap.Loading,size:_.iconSizeMap.CLS_40,color:_.iconColorMap.COL_FFFFFF})),!1),i.resolve(!0)})):(r=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[r],2),i.resolve(!1));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setNotifyFunc(360449,c),e.next=18,(0,g.getLoginModel)();case 18:return f=e.sent,p=f.serverUportalAddress,v=f.serverUportalPort,e.next=23,a.changeLoginUportalPassword(t,n,r,p,v);case 23:m=e.sent,0!==m.result?(w.error("change lg in pd result:"+m.result),window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),i.resolve(!1)):s=window.setTimeout(function(){w.error("request  10s timeout"),i.resolve(!1)},1e4),e.next=31;break;case 27:return e.next=29,d(t,n,r);case 29:I=e.sent;try{I&&I.param&&I.param.recv_body?(E=JSON.parse(I.param.recv_body),w.info("change it pd result "+E.result+" errcode "+E.errorCode),"success"===E.result?(coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),window.alert(""+language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),i.resolve(!0)})):(N=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[E.errorCode]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[N],2),i.resolve(!1))):(w.error("change it pd callback is error"),window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),i.resolve(!1))}catch(e){window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),w.error("change it pd error. ",I)}case 31:return e.abrupt("return",i);case 32:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}();window.doingRefreshUportalToken=!1;var I=(t.actionRefreshToken=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w.info("[ actionRefreshToken ]"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=5;break}window.refreshImToken(),e.next=20;break;case 5:return e.next=7,(0,g.getLoginModel)();case 7:if(t=e.sent,n=t.curPortalState,w.info("[ actionRefreshToken ] curPortalState = ",n),window.doingRefreshUportalToken||n===constant.CUR_PORTAL_LOGIN_STATE.LOGINING){e.next=19;break}return window.doingRefreshUportalToken=!0,e.next=14,coreTup.getUportalInstance();case 14:r=e.sent,r.refreshToken(),setTimeout(function(){window.doingRefreshUportalToken=!1},2e4),e.next=20;break;case 19:w.info("refreshing uportal token. return don't send");case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.actionGetUploadInfo=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("actionGetUploadInfo"),e.next=3,coreTup.getUportalInstance();case 3:return r=e.sent,a=PromiseObject(),o=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,0!==n.result?(w.error("get upload info fail, result:"+n.result),a.resolve(n)):a.resolve(n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),r.setNotifyFunc(360491,o),i={req_info:{file_name:t,file_type:n}},e.next=10,r.getUploadInfo(i);case 10:return s=e.sent,0!==s.result&&(w.error("actionGetUploadInfo fail, result:"+s.result),a.resolve("request failed")),setTimeout(function(){a.resolve("request timeout")},1e4),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.recordPrivacy=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l,d,p=t.oprEvent,h=t.privacyver,v=t.chrtype;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("[ recordPrivacy ]"),e.next=3,(0,g.getLoginModel)();case 3:return n=e.sent,r=n.account,a=n.serverUportalAddress,o=n.serverUportalPort,e.next=7,coreTup.getUportalInstance();case 7:return i=e.sent,s=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,c=(new Date).format("yyyy-MM-dd hh:mm"),f={record_user:r,record_version:s,record_time:c,record_oprevent:p,server_url:a,port_num:parseInt(o),record_other:{}},h&&(f.record_other.privacyver=h),void 0!==v&&(f.record_other.chrtype=v),e.next=15,i.recordPrivacy(f);case 15:l=e.sent,0!==l.result&&w.error("record fail, result:"+l.result+"oprEvent:"+p),d=function(e){if(e&&0===e.param.result)return w.info("record success, oprEvent:"+p);w.error("record fail, result:"+e.param.result+"oprEvent:"+p)},i.setNotifyFunc(360481,d);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryUserAccount=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return n=e.sent,r=n.serverPort,a=n.serverUportalAddress,e.next=7,coreTup.getUportalInstance();case 7:return o=e.sent,w.info("tup init"),e.next=11,(0,m.getUportalApi)().setLoginProxy(o);case 11:return i=PromiseObject(),n.forgetPwdAccount!==t&&(n.forgetPwdAccount=t,n.isFrogetRedriect=!1),s=function(){var e=(0,l.default)(u.default.mark(function e(s){var c,f,l,d,p,h,g,m;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=s.param,38!==c.result||""===c.query_result.redirect_url){e.next=20;break}if(n.isFrogetRedriect=!0,f=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(l=f.exec(c.query_result.redirect_url))){e.next=11;break}d=l[1],p=l[2],h=l[3],a=d||p,r=h&&h||0,e.next=12;break;case 11:return e.abrupt("return",(0,v.LoginError)({result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:isResume}));case 12:return n.FrogetPwdUrl=a,n.FrogetPwdUrlPort=r,g={query_user_info:{server_url:a,server_port:parseInt(r),user_account:t}},e.next=17,o.queryUserAccount(g);case 17:m=e.sent,e.next=21;break;case 20:0!==c.result?(w.error("query user account fail, result:"+c.result),i.resolve(c)):i.resolve(c);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setNotifyFunc(360482,s),c={query_user_info:{server_url:a,server_port:parseInt(r),user_account:t}},e.next=18,o.queryUserAccount(c);case 18:return f=e.sent,0!==f.result&&(w.error("query user account fail, result:"+f.result),window.ToastNew(language.REQUEST_ERROR,2),i.resolve("request failed")),setTimeout(function(){i.resolve("request timeout")},1e4),e.abrupt("return",i);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestVerificationCode=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return a=e.sent,o=a.serverPort,i=a.serverUportalAddress,c=void 0,a.isFrogetRedriect&&(i=a.FrogetPwdUrl,o=a.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return f=e.sent,e.abrupt("return",new s.default(function(e,a){var s=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.param,w.info("request verification code result: "+r.result),c&&window.clearTimeout(c),0!==r.result&&r.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_CHANGEPWD_INVALID_TOKEN&&r.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_RESEND_WITHIN_3MIN_NOT_ALLOWED?(void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(r)):e(r);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();f.setNotifyFunc(360483,s);var d=constant.USER_AGENT.MOBILE;window.CLIENTCONFIG.ISMOBILE||(d="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC);var p={req_info:{server_url:i,server_port:parseInt(o),user_account:t,user_agent:d,send_mode:n,lang_type:r}};f.requestVerificationCode(p).then(function(t){0!==t.result?(w.error("requestVerificationCode fail, result:"+t.result),window.ToastNew(language.REQUEST_ERROR,2),e("request failed")):c=window.setTimeout(function(){w.error("request verification 5s time out"),e("request timeout")},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.verifyVerificationCode=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,a=r.serverPort,o=r.serverUportalAddress,i=void 0,r.isFrogetRedriect&&(o=r.FrogetPwdUrl,a=r.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return c=e.sent,e.abrupt("return",new s.default(function(e,r){var s=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.param,w.info("verify verification code result: "+r.result),i&&window.clearTimeout(i),0!==r.result?(coreUi.hideModal(),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(r)):e(r);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();c.setNotifyFunc(360484,s);var f={verify_info:{server_url:o,server_port:parseInt(a),user_account:t,verification_code:n}};c.verifyVerificationCode(f).then(function(t){0!==t.result?(w.error("verify verification code fail, result:"+t.result),coreUi.hideModal(),window.ToastNew(language.REQUEST_ERROR,2),e("request failed")):i=window.setTimeout(function(){w.error("verify verification 10s time out"),e("request timeout")},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.frogetPassword=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a,o){var i,c,f,d,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return i=e.sent,c=void 0,f=i.serverPort,d=i.serverUportalAddress,i.isFrogetRedriect&&(d=i.FrogetPwdUrl,f=i.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return p=e.sent,e.abrupt("return",new s.default(function(e,i){var s=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.param,w.info("froget request listener result: "+r.result),c&&window.clearTimeout(c),0!==r.result?(coreUi.hideModal(),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(r)):e(r);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();p.setNotifyFunc(360485,s);var h={pwd_info:{server_url:d,server_port:parseInt(f),user_account:t,new_pwd:n,pwd_type:r,lang_type:a,token:o}};p.frogetPassword(h).then(function(t){0!==t.result?(w.error("froget request fail, result:"+t.result),coreUi.hideModal(),e("request failed")):c=window.setTimeout(function(){w.error("froget pass word 15s time out"),e("request timeout")},15e3)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.getLocalDNSIp=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return w.warn("getLocalDNSIp domain is null"),e.abrupt("return");case 3:return e.next=5,coreDb.queryLoginSetting({key:"DNS:"+t});case 5:if(!(n=e.sent)||!n.value){e.next=11;break}return w.info("getLocalDNSIp suc"),e.abrupt("return",n.value);case 11:return w.info("getLocalDNSIp fail"),e.abrupt("return","");case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),E=t.setLocalDNSIp=function(e){return e&&e.param&&0===e.param.result&&e.param.dns_result?isNullOrEmpty(e.param.dns_result.domain_addr)||isNullOrEmpty(e.param.dns_result.ip_addr)?void w.warn("setLocalDNSIp domain or ip is null"):(w.info("tup report setLocalDNSIp"),void coreDb.saveLoginSetting({key:"DNS:"+e.param.dns_result.domain_addr,value:e.param.dns_result.ip_addr})):void w.warn("dns result is null, res = "+(0,o.default)(e))},N=t.clearLocalDNSIp=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return w.warn("clearLocalDNSIp ip is null"),e.abrupt("return");case 3:return w.info("clearLocalDNSIp"),n=[],e.next=7,coreDb.queryAllLoginSetting();case 7:r=e.sent,r.forEach(function(e){e.value===t&&-1!==e.key.indexOf("DNS:")&&n.push(e.key)}),w.info("clearLocalDNSIp server addr length = "+n.length),n.length>0&&n.forEach(function(e){coreDb.saveLoginSetting({key:e,value:""})});case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,i,s,c,f,l,d,p=t.method,h=void 0===p?"post":p,v=t.path,m=void 0===v?"":v,_=t.body,C=void 0===_?{}:_;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return n=e.sent,r=n.serverUportalAddress,a=n.serverUportalPort,i=n.isFrogetRedriect,s=n.FrogetPwdUrl,c=n.FrogetPwdUrlPort,f="https://"+r+":"+a+m,i&&(f="https://"+s+":"+c+m),l=constant.USER_AGENT.MOBILE,window.CLIENTCONFIG.ISMOBILE||(l="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC),d={url:f,type:"post"===h?constant.REQUEST_TYPE.POST:constant.REQUEST_TYPE.PUT,header:{"Content-Type":"application/json","User-Agent":l},body:(0,o.default)(C)},e.abrupt("return",d);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),T=t.getCaptcha=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("before getCaptcha"),n="/rest/usg/sso/v1/auth/slideverifycode/send",r=coreCommon.isMobile()?6:5,a=1,o={user:t,clientType:r,checkType:a},e.next=7,b({path:n,body:o});case 7:return i=e.sent,e.next=10,coreHttp.sendSyncRequest(i);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=t.sendCaptchaResult=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a){var o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("before sendCaptchaResult"),o="/rest/usg/sso/v1/auth/slideverifycode/check",i=coreCommon.isMobile()?6:5,s=1,c={user:t,clientType:i,token:n,pointX:r,slideTime:a,checkType:s},e.next=7,b({method:"put",path:o,body:c});case 7:return f=e.sent,e.next=10,coreHttp.sendSyncRequest(f);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),O=t.getVerifyCode=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("before getVerifyCode"),r="/rest/usg/ap/v1/verifycode/send",a="2052"===window.langcode?"zh-CN":"en-US",o={user:t,language:a,token:n},e.next=6,b({path:r,body:o});case 6:return i=e.sent,e.next=9,coreHttp.sendSyncRequest(i);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();t.getCaptchaAndSetUi=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return window.ToastNew(language.PC_PHONE_NUMBER_OR_ACCOUNT_NUMBER_CAN_NOT_EMPTY,2),e.abrupt("return");case 3:return e.next=5,T(t);case 5:if((n=e.sent)&&0===n.result){e.next=9;break}return w.info("getCaptcha result, tup result : ",n&&n.result),e.abrupt("return");case 9:if(r=n.param,a=r.recv_body,o=r.resp_code,w.info("getCaptcha result, server resp_code : ",o),i=a&&JSON.parse(a),s=i.data,c=i.returnMessage,f=i.requestId,w.info("getCaptcha result, requestId: ",f,", returnMessage: ",c),200!==o){e.next=19;break}return s.sliderResult=!1,e.next=17,(0,g.getLoginModel)();case 17:l=e.sent,l.manMachineCode=s;case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.sendCaptchaResultAndSetUi=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a,o,i,s){var c,f,l,d,p,h,v,m,_,C,S,I,E;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,n,r,a);case 2:if(c=e.sent,f=c.param,l=f.recv_body,d=f.resp_code,w.info("sendCaptcha result, tup result : ",c.result),w.info("sendCaptcha result, server resp_code : ",d),p=l&&JSON.parse(l),h=p.returnCode,v=p.returnMessage,m=p.requestId,_=p.data,w.info("sendCaptcha result, requestId: ",m,", returnMessage : ",v),200!==d){e.next=16;break}return C="000000000"===h,S="000000000"===h?_.token:"",I=!0,e.next=14,(0,g.getLoginModel)();case 14:E=e.sent,E.manMachineCode={verificationSuccess:C,sliderResult:I,shadowImage:o,cutImage:i,token:S,oldPointY:s};case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),t.getVerifyCodeAndSetUi=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,s,c,f,l,d,p,h,v,m;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,n);case 2:if(r=e.sent,a=r.param,o=a.recv_body,i=a.resp_code,w.info("getVerifyCode result, tup result : ",r.result),w.info("getVerifyCode result, server resp_code : ",i),s=o&&JSON.parse(o),c=s.returnCode,f=s.returnMessage,l=s.requestId,d=s.data,w.info("getVerifyCode result, requestId: ",l,", returnMessage : ",f),"000000000"!==c&&"206030004"!==c){e.next=19;break}return p=$getState().login.forgetPwdAccount,h=p.type===constant.FORGETPWDACCOUNTTYPE.ACCOUNT&&isNullOrEmpty(d.bindPhone),v={account:p.account,email:p.email,showaccount:h?d.bindEmail:p.showaccount,timeout:d.expire||d.sendLeftTime,type:h?constant.FORGETPWDACCOUNTTYPE.ACCOUNT_WITH_EMAL:p.type,useCaptcha:!0,bindPhone:d.bindPhone,bindEmail:d.bindEmail},e.next=14,(0,g.getLoginModel)();case 14:m=e.sent,m.forgetPwdAccount=v,window.CLIENTCONFIG.ISMOBILE?"SetNewPassword"!==window.getRoute()&&window.goRoute("/SetNewPassword"):"login/ResetPassword"!==window.getRoute()&&window.goRoute("/login/ResetPassword"),e.next=20;break;case 19:void 0!==constant.CLOUDUSG_ERROR_TIPS[c]?window.ToastNew(language[constant.CLOUDUSG_ERROR_TIPS[c]],2):window.ToastNew(language.REQUEST_ERROR,2);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();window.getCorpResourceResult=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.param||0!==t.param.result){e.next=10;break}return A&&window.clearTimeout(A),w.info("actionGetCorpResource success"),e.next=5,(0,g.getLoginModel)();case 5:n=e.sent,n.canRecordConf=t.param.corp_resource.conf_rec_right,x.resolve(coreCommon.ATOMIC_ACTION_RESULT.SUCCESS),e.next=12;break;case 10:x.reject(coreCommon.ATOMIC_ACTION_RESULT.FAILED),w.error("actionGetCorpResource fail, result:"+t.param.result);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var x=PromiseObject(),A=void 0,L=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w.info("[ actionGetCorpResource ]"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=6;break}return x=PromiseObject(),A=window.setTimeout(function(){w.error("actionGetCorpResource 10s time out"),x.resolve(coreCommon.ATOMIC_ACTION_RESULT.FAILED)},1e4),window.getCorpResourceInfo(),e.abrupt("return",x);case 6:return t=void 0,e.next=9,coreTup.getUportalInstance();case 9:return n=e.sent,e.abrupt("return",new s.default(function(e,r){var a=function(){var n=(0,l.default)(u.default.mark(function n(r){var a,o;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!r||0!==r.param.result){n.next=10;break}return t&&window.clearTimeout(t),a=r.param,n.next=5,(0,g.getLoginModel)();case 5:o=n.sent,o.canRecordConf=a.corp_resource.conf_rec_right,e(coreCommon.ATOMIC_ACTION_RESULT.SUCCESS),n.next=12;break;case 10:w.error("actionGetCorpResource fail, result:"+r.param.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED);case 12:case"end":return n.stop()}},n,void 0)}));return function(e){return n.apply(this,arguments)}}();n.setNotifyFunc(360492,a),n.getCorpResource().then(function(n){0!==n.result?(w.error("actionGetCorpResource fail, result:"+n.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)):t=window.setTimeout(function(){w.error("actionGetCorpResource 10s time out"),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.actionGetCorpResourceAtomic=new coreCommon.AtomicAction("actionGetCorpResource",L)},292:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compareVersion=t.dealUpdateVersionClickEx=t.hideProgressBarModal=t.dealInstallFailed=t.startInstallNewVer=t.getInCallingState=t.clearBarPageSet=t.showUpdateHintsOrBar=t.clickConfirmUpdate=t.dealDownloadFailed=t.downloadProcessNotify=t.clearDownloadClick=t.checkUpgrade=t.reStartUpgrade=t.clearAllUpdataState=t.changeUpdataState=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(123),u=r(c),f=n(69),l=r(f),d=n(118),p=r(d),h=n(211),g=n(136),v=n(165),m=coreLogger.getLogger("login")("upgrade"),_={clickDownload:!1,clickTimer:null,downloadResume:!1},C=t.changeUpdataState=function(e){m.info("change updata state, obj=",(0,l.default)(e)),(0,u.default)(_,e),m.info("updataState=",(0,l.default)(_))},w=(t.clearAllUpdataState=function(){_.clickTimer&&clearTimeout(_.clickTimer),_={clickDownload:!1,clickTimer:null,downloadResume:!1},m.info("clear updata state, updataState=",(0,l.default)(_))},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:return r=e.sent,a=PromiseObject(),i=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,360488===t.notify?b(n):360489===t.notify&&T(n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),r.setNotifyFunc(360488,i),r.setNotifyFunc(360489,i),c={download_info:{download_timeout:300,version_path:t,file_path:n,keep_download:f,local_file_size:l}},e.next=10,r.downloadUpgradeFile(c);case 10:return u=e.sent,0!==u.result&&(m.error("send downloadUpgradeFile fail, result:"+u.result),a.resolve("request failed")),setTimeout(function(){a.resolve("request timeout")},35e4),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),S=function(){return m.info("current platform is :win"),"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?"workplace-windows":"cloudlink-windows"},I=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,u,f,l,d,p,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return n=e.sent,r=n.serverAddress,a=n.serverPort,i=n.serverUportalAddress,c=n.serverUportalPort,e.next=6,coreTup.getUportalInstance();case 6:return u=e.sent,m.info("[check upgrade]tup init"),e.next=10,(0,h.setLoginProxy)(u);case 10:return f=PromiseObject(),l=function(){var e=(0,s.default)(o.default.mark(function e(n){var i,s,c,l,d,p,h,g;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=n.param)||38!==i.result||!i.query_version_result||""===i.query_version_result.redirect_url){e.next=17;break}if(s=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(c=s.exec(i.query_version_result.redirect_url))){e.next=10;break}l=c[1],d=c[2],p=c[3],r=l||d,a=p&&p||0,e.next=11;break;case 10:return e.abrupt("return",(0,v.LoginError)({result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:isResume}));case 11:return h={query_ver_info:{server_url:r,server_port:parseInt(a),user_account:t,software_type:S(),current_version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE}},e.next=14,u.queryVersionInfo(h);case 14:g=e.sent,e.next=18;break;case 17:0!==i.result?(m.error("query version fail, result:"+i.result),f.resolve(i)):f.resolve(i);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),u.setNotifyFunc(360487,l),d={query_ver_info:{server_url:isNullOrEmpty(_)?isNullOrEmpty(C.server_url)?n.serverAddress:C.server_url:i,server_port:isNullOrEmpty(_)?isNullOrEmpty(C.port)?parseInt(n.serverPort):parseInt(C.port):parseInt(c),user_account:t,software_type:S(),current_version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,token:_}},m.info("[check upgrade] queryVersionInfo: "),e.next=17,u.queryVersionInfo(d);case 17:return p=e.sent,setTimeout(function(){f.resolve("request timeout")},1e4),e.abrupt("return",f);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),E=(t.reStartUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,n=t.isWaitUpgrade,r=t.isPortalAfterCallUpgrade,!0===n&&!0===r&&(m.info("Soft start to upgrade after call ended"),t.isPortalAfterCallUpgrade=!1,window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():B());case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("checkUpgrade"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,s.default)(o.default.mark(function e(){var t,n,s,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("[check upgrade] start"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return m.info("the app is ENABLE_IT_MEETING is true, can not update by usg"),e.abrupt("return");case 4:if(!window.isHubEnv){e.next=6;break}return e.abrupt("return");case 6:if(!window.isPluginEnv){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,g.getLoginModel)();case 10:if(t=e.sent,isNullOrEmpty(a)||!t.sipLoginOnly){e.next=14;break}return m.info("[check upgrade] end: anonyumous join conference don't need deal non-forced upgrade"),e.abrupt("return");case 14:if(!window.webView||!window.IsGooglePlayPkg()){e.next=17;break}return m.info("[check upgrade] end: Android pkg check, the app is from google play, can not update by usg"),e.abrupt("return");case 17:if(!isNullOrEmpty(a)||t.isReqAddrChanged||r){e.next=20;break}return m.info("[check upgrade] end: addr not change, no need to query"),e.abrupt("return");case 20:if(!isNullOrEmpty(a)||!t.isAutoLogin){e.next=23;break}return m.info("[check upgrade] end: auto login no need to query"),e.abrupt("return");case 23:if(t.showContentType!==constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING){e.next=26;break}return m.info("[check upgrade] end: now is downloading, no need to query"),e.abrupt("return");case 26:return t.isReqAddrChanged=!1,e.next=29,I(i,a);case 29:if(n=e.sent,!(coreCommon.isPc()&&c&&n)||8!==n.result&&3!==n.result){e.next=39;break}return e.next=33,coreAccount.switchProxy();case 33:return e.next=35,I(i,a);case 35:if(n=e.sent,0===n.result){e.next=39;break}return e.next=39,coreAccount.resetProxy();case 39:if(0===n.result){e.next=42;break}return m.info("[check upgrade] end: queryVersionInfo res",n),e.abrupt("return");case 42:if(s=n,!1===t.isPortalUpgrade&&(m.info("[check upgrade]isPortalUpgrade become true"),t.isPortalUpgrade=!0),!s.query_version_result.is_consistent){e.next=47;break}return m.info("[check upgrade] end: current version is the newest"),e.abrupt("return");case 47:if(j(s.query_version_result.upgrading_version)){e.next=50;break}return m.info("[check upgrade] end: compareVersion false"),e.abrupt("return");case 50:t.isForceUpdate=s.query_version_result.is_force_upgrade,t.set({whatsNewCHN:s.query_version_result.version_description,whatsNewENG:s.query_version_result.version_description,downloadVersion:s.query_version_result.version_description,downloadUrl:s.query_version_result.version_path}),t.isForceUpdate?t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS:t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.WHATSNEWHINTS,isNullOrEmpty(a)||(t.isWaitUpgrade=!0),u=U(),u&&t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.FINISH&&t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.INIT?m.info("[check upgrade] end: User is in calling, not show hints"):(m.info("[check upgrade] end: User is not calling, start to show update hints"),k());case 56:case"end":return e.stop()}},e,void 0)})),n,null);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.clearDownloadClick=function(){m.info("clearDownloadClick in"),_.clickTimer&&clearTimeout(_.clickTimer),_.clickTimer=null,C({clickDownload:!1})}),N=function(){return!window.webView||!window.IsGooglePlayPkg()||(m.info("Android pkg check, the app is from google play, can not update by usg"),!1)},b=(function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("run at updateFileDownload"),!_.clickDownload){e.next=6;break}return m.info("userClick confirm download"),_.downloadResume?(F(t,!0),C({downloadResume:!1})):F(t),E(),e.abrupt("return");case 6:setTimeout(function(){m.info("start to show hints"),!1!==N()&&(0,g.getLoginModel)().then(function(e){e.isForceUpdate=n,e.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS,e.isWaitUpgrade=!0})},3e3);case 7:case"end":return e.stop()}},e,void 0)}))}(),t.downloadProcessNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m.info("start set download process ",(0,l.default)(t)),n=parseFloat(t.progress_info.total_file_size),r=parseFloat(t.progress_info.cur_file_size),!isNaN(n)&&!isNaN(r)){e.next=7;break}return m.error("size data error"),e.abrupt("return");case 7:return a=n<=0?0:parseInt(Math.round(r/n*1e4)/100),e.next=10,(0,g.getLoginModel)();case 10:i=e.sent,i.progressPercent=a,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),m.error("downloadProcessNotify, error:",e.t0);case 17:case"end":return e.stop()}},e,void 0,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()),T=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("get download result, params",(0,l.default)(t)),e.next=3,(0,g.getLoginModel)();case 3:n=e.sent,0===t.result?(m.info("download update file success"),B()):(m.info("download update file failed, result=",t.result+", info=",t.FaultString),C({downloadResume:!1}),y());case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=t.dealDownloadFailed=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,t.isUpdateError=!0,t.isUpdateErrorEx=!0,t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,k();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),O=t.clickConfirmUpdate=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("userClick confirm download update version"),e.next=3,(0,g.getLoginModel)();case 3:t=e.sent,n=t.isUpdateErrorEx,r=t.showContentType,a=t.progressPercent,!n&&~a?(m.info("downloding, no need restart"),t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,k()):(i=t.downloadUrl,F(i));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().common.modalContent,m.info("modalContent : ",t),e.next=4,(0,g.getLoginModel)();case 4:if(n=e.sent,isNullOrEmpty(t)||"progressbar"===t.key){e.next=11;break}if(m.info("model is not empty, [key]=",t.key),"addConf"!==t.key){e.next=11;break}return e.next=10,coreConf.toggleChangeConfAcsPas("");case 10:coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN);case 11:r=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getProgressBar}),coreUi.showModal(p.default.createElement(r,{key:"progressbar"}),!0,"",!1);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),A=function(){appService.openUrl("itms-apps://itunes.apple.com/cn/app/%E5%8D%8E%E4%B8%BA%E4%BC%9A%E8%AE%AE/id1354340495?mt=8")},L=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,n=t.curPortalState===constant.CUR_PORTAL_LOGIN_STATE.FINISH?language.LOG_OUT:language.LANG_NATIVE_CONFIRM_CANCEL,t.isForceUpdate?coreCommon.isIos()?window.notifyIosUpdateAlert("VERSION_UPDATE_TITLE",{buttonText:language.UPDATE_NOW}).then(function(e){e.ret&&(A(),k())}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:n,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?O():(m.info("userClick exit download update version ",t.curPortalState),t.curPortalState===constant.CUR_PORTAL_LOGIN_STATE.FINISH&&delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:language.UPDATE_LATER,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?coreCommon.isIos()?A():O():m.info("userClick cancel download update version")});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),k=t.showUpdateHintsOrBar=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=4;break}x(),e.next=8;break;case 4:return e.next=6,(0,g.getLoginModel)();case 6:t=e.sent,constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING===t.showContentType?window.goRoute("mUpdateVersionInfo"):L();case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),R=function(e){try{if(window.fs){window.fs.readdirSync(e).forEach(function(t){var n=e+"/"+t;window.fs.statSync(n).isDirectory()||window.fs.unlinkSync(n)})}}catch(e){m.error("delete file error",e)}},M=function(e){var t=[];if(window.fs){window.fs.readdirSync(e).forEach(function(n){t.push(e+"/"+n)})}return t},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="",n="";if(window.fs)if(t=window.path.join(window.APP_DATA_PATH,"update/").replace(/\\/g,"/"),window.fs.existsSync(t))if(e){var r=M(t);n=Array.isArray(r)&&1===r.length&&r[0]||"",m.info("this is resume download, find old update file=",n),""===n&&(m.info("not found valid file, delete all files"),R(t))}else m.info("not resume download, delete old update files"),R(t);else m.info("creat new update file"),window.fs.mkdir(t);else window.webView&&(t=window.UPGRADE_APK_PATH,e&&(n=window.getProcessFileName(t)));return{upgradeDir:t,fileNamePath:n}},P=t.clearBarPageSet=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,t.isUpdateError=!1,t.isUpdateErrorEx=!1,t.progressPercent=-1;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return n=e.sent,m.info("start update download, iskeep=",s),m.info("start request software version check"),r=D(s),a=r.upgradeDir,i=r.fileNamePath,m.info("confirm download, set update file path=",a),""!==a&&(""!==i?(m.info("get old file path=",i),coreCwmp.getComPressFileSize({filePath:i}).then(function(e){var n=e.fileSize;m.info("get old update file size=",n),w(t,a,!0,n)})):w(t,a)),e.next=10,P();case 10:n.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,k();case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),U=t.getInCallingState=function(){var e=$getState().call.callStatus;return"VIDEO_CONNECTED"===e||"VIDEO_OUT"===e||"CALL_OUT"===e||"CALL_CONNECTED"===e},B=t.startInstallNewVer=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=U()){e.next=6;break}m.info("User is not calling, start install soft version now"),setTimeout(function(){window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():W()},3e3),e.next=11;break;case 6:return e.next=8,(0,g.getLoginModel)();case 8:n=e.sent,m.info("User is in calling, save the state and wait for the call end"),n.isPortalAfterCallUpgrade=!0;case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),W=function(){if(window.fs){for(var e=window.path.join(window.APP_DATA_PATH,"update").replace(/\\/g,"/"),t=window.fs.readdirSync(e),n=0;n<t.length;n++){var r=t[n];if(-1!==(0,l.default)(r).indexOf(".exe")){m.info("start execute software upgrade file, upgrade file name=",r);return void V(e+"/"+r)}}m.info("software update file is not exist"),H(language.DID_NOT_FIND_THE_AVAILABLE_UPGRADE_FILE)}},G=function(e){var t=window.process.env.APPDATA+"\\CloudLink\\log\\language.txt";window.fs.writeFile(t,window.langcode,"utf8",function(t){t&&window.log("writeFile quiteInstallFile error =",t),window.spawn(e,["/verysilent","/suppressmsgboxes","/norestart"]).on("error",function(e){m.info("execute update file error, err=",e),H(language.PC_FILE_DAMAGE_DOWN_AGAIN)})})},V=function(e){try{var t=window.APP_DATA_PATH;appService.writeFile(t,"configfile.ini","language = "+window.langcode.toString()+"\r\npackageversion = "+window.CLIENTCONFIG.NEW_APP_NAME).then(function(n){m.info("set update tip language success, file=",n);var r=t+"/ShowInstallTip.exe";appService.isFileExist(r).then(function(n){if(n){m.info("execute ShowInstallTip");var r=t.slice(0,2),a=r+" && cd "+t+" && ShowInstallTip.exe";window.exec(a),G(e)}else m.info("update tip file does not exit"),G(e)})},function(t){m.info("set update tip language failed, err:"+t),G(e)})}catch(e){m.error("install update file error:",e),H(language.PC_FILE_DAMAGE_DOWN_AGAIN)}},H=t.dealInstallFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("intsall update file error, show download again prompt"),e.next=3,(0,g.getLoginModel)();case 3:n=e.sent,window.exec("taskkill /f /im ShowInstallTip.exe"),$(),n.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS,window.confirm(""+t,!0).then(function(e){e.ret&&(m.info("userClick to download update file again"),F(n.downloadUrl))});case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$=t.hideProgressBarModal=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().common.modalContent,isNullOrEmpty(t)||"progressbar"!==t.key?m.info("not update model, [key]=",t.key):(m.info("hide update model"),coreUi.hideModal());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),j=(t.dealUpdateVersionClickEx=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("userClick, show soft update state btn"),e.next=3,(0,g.getLoginModel)();case 3:t=e.sent,!1===t.isWaitUpgrade?(m.info("this is the latest software version"),window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.SOFT_UPGRADE_LATEST,2):(n=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getSoftVersionHint}),coreUi.showModal(p.default.createElement(n,null)))):k();case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.compareVersion=function(e){var t=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,n=t.split("."),r=e.split("."),a=Math.max(n.length,r.length);if(t===e)return!1;for(var o=0;o<a;o++){var i=o>=r.length?0:parseInt(r[o],10),s=o>=n.length?0:parseInt(n[o],10);if(i>s)return!0;if(i<s)return!1}return!1})},293:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){R.info("hideAlertAndConfirm"),window.hideConfirm&&window.hideConfirm(),window.hideAlert&&window.hideAlert(),window.hideNotifyConfirm&&window.hideNotifyConfirm(),window.clearDialogQueue&&window.clearDialogQueue()}function o(){return(0,I.getLoginModel)().then(function(e){return e.isBuildStgSuc?(0,C.destroyStgTunnel)():s.default.resolve(0)})}Object.defineProperty(t,"__esModule",{value:!0}),t.deRegisterService=t.clearState=t.quickLogout=t.logout=t.setOffline=t.doLogout=t.resetAllAtomicAction=t.initService=void 0;var i=n(3),s=r(i),c=n(131),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("clearObserversAndEvents"),e.next=3,coreConf.unregisterConfEvent();case 3:coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r=t.isBackLogin;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("logout success"),e.next=3,(0,I.getLoginModel)();case 3:n=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),coreUt.utConfigAccountInfo({configAccount:""}),r&&(window.ifLogOut=!0,n.showPwd=!1,n.sipOnlyType=0,!window.CLIENTCONFIG.ISMOBILE&&delegate.winHide(),!window.CLIENTCONFIG.ISMOBILE&&(0,y.initImportCertificate)(),window.CLIENTCONFIG.ISMOBILE&&(0,y.initMImportCertificate)(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(R.info("[IT-Meeting] IS_LINK_IT_SMC_MEETING go main"),window.goRoute("callMain"),R.info("[IT-Meeting] shutDownTupServer"),window.shutDownTupServer()):window.goRoute(window.CLIENTCONFIG.ISMOBILE?"loginCtn":window.isHubEnv?"maxhubLogin":"login")),coreCommon.isMobile()&&(n.logoutDisable=!1),coreCommon.isPc()&&setTimeout(function(){$dispatch(coreUi.dragSetEnable())},500);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.error("logout failed"),e.next=3,(0,I.getLoginModel)();case 3:t=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,resultParams:[0],isTrackTimeCosts:!0}),coreUt.utConfigAccountInfo({configAccount:""}),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.goRoute(window.CLIENTCONFIG.ISMOBILE?"loginCtn":window.isHubEnv?"maxhubLogin":"login"),coreCommon.isMobile()&&(t.logoutDisable=!1),coreCommon.isPc()&&setTimeout(function(){$dispatch(coreUi.dragSetEnable())},500);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("start deRegisterTupService"),e.next=3,(0,I.getLoginModel)();case 3:if(t=e.sent,window.CLIENTCONFIG.ISBIGWIN){e.next=11;break}return e.next=7,coreConf.endPairWithPeripherals();case 7:return e.next=9,coreConf.serverCloseAllPair();case 9:coreConf.uninitAsPairServer(),coreConf.handlePairClosed();case 11:if(!(n=t.isSupportAS)){e.next=15;break}return e.next=15,coreConf.unSubscribeConfList();case 15:return e.next=17,coreTup.getUportalInstance();case 17:return r=e.sent,e.next=20,r.uportalLogout();case 20:return e.next=22,coreConf.unInitConfCtrl();case 22:if(!window.CLIENTCONFIG.ISMOBILE){e.next=26;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=26;break}return e.next=26,(0,w.unEnableBFCP)();case 26:return e.next=28,(0,w.sipserverDeregister)();case 28:return e.next=30,coreCwmp.stopCwmpServerAndUnInit();case 30:return e.next=32,coreContact.eaddrUnint();case 32:if(!t.useIM){e.next=40;break}return a=$getState().recent.showRecentInfo.toString(),e.next=36,coreDb.saveUserConfig({key:"userInfoStatus",value:a});case 36:return e.next=38,coreIm.eserverLogout();case 38:return e.next=40,coreIm.umserverLogout();case 40:R.info("deRegisterTupService success");case 41:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=t.deRegisterService=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,R.info("start deRegisterService"),R.info("deRegisterService, set isOffline true"),window.isOffline=!0,window.CLIENTCONFIG.ISMOBILE){e.next=9;break}return e.next=7,coreSecurity.getHWTupSupport();case 7:t=e.sent,t.addCallBack({closeSupportSocket:function(){R.info(" closeSupportSocket set null")}});case 9:return window.isLoadLoginRecord=!1,(0,N.enableAutoLogin)(!1),e.next=13,m();case 13:return R.info("deRegisterService success"),e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(0),R.error("setOffline error",e.t0.toJSON&&e.t0.toJSON()),e.abrupt("return",s.default.resolve(!1));case 21:case"end":return e.stop()}},e,this,[[0,17]])}));return function(){return e.apply(this,arguments)}}(),C=n(211),w=n(220),S=n(229),I=n(136),E=n(290),N=n(185),b=n(221),T=n(362),y=n(167),O=n(260),x=n(272),A=n(230),L=n(288),k=n(241),R=coreLogger.getLogger("logic")("logout"),M=t.initService=function(e){coreIm.initImModelService(e),coreIm.initRecentService(e),coreIm.initOpenRecentData(e),coreContact.initTaskQueue({info:e}),coreIm.localTimeService.initLocalTimeService(e)},D=t.resetAllAtomicAction=function(){coreConf.getVmrInfoToDbAtomic().reset(),coreConf.getAsInfoToDbAtomic().reset(),(0,L.sipLoginAtomicReset)()},P=(t.doLogout=delegate(function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("doLogout"),e.next=3,(0,E.checkBeforeLogout)(t);case 3:if(!(n=e.sent)){e.next=21;break}return e.next=7,(0,I.getLoginModel)();case 7:return r=e.sent,coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),coreCommon.isMobile()&&(r.logoutDisable=!0),e.next=12,(0,k.cancelLogin)();case 12:return coreCommon.isPc()&&(0,S.clearFireWallStore)(),e.next=15,(0,A.restoreMAAConfControl)();case 15:return e.next=17,P(a);case 17:coreCommon.isPc()&&setTimeout(function(){$dispatch(coreUi.dragSetEnable())},500),coreCommon.isMobile()&&(r.logoutDisable=!1),r.isPortalUpgrade=!1,r.isReqAddrChanged=!1;case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),"doLogout"),t.setOffline=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("do setOffline"),e.next=3,(0,k.cancelLogin)();case 3:return e.next=5,(0,I.getLoginModel)();case 5:return t=e.sent,t.hasLoginCanceled=!1,e.next=9,(0,I.getMyInfo)();case 9:return n=e.sent,e.next=12,(0,E.checkBeforeSetOffline)(constant.LOGOUT_TYPE.SETOFFLINE,i);case 12:if(!0!==(r=e.sent)&&!0!==r.ret){e.next=34;break}return o&&(0,y.changeAutoLogin)(o),t.setAppState(constant.APP_STATE.DISCONNECTED),a=n.account,$dispatch(coreUi.updateContactStatusMap((0,u.default)({},a,{status:constant.ONLINE_STATUS.OFFLINE,desc:"",client_type:0}))),n.status=constant.ONLINE_STATUS.OFFLINE,$dispatch(coreUi.subscriptionAccountList([])),R.info("setOffline, change status is offline"),coreUi.clearLinkageStatusLogic(),e.next=24,h();case 24:return D(),e.next=27,(0,b.clearResumeService)();case 27:return e.next=29,(0,b.stopResume)("setOffline");case 29:return R.info("setOffline, set isOffline true"),window.isOffline=!0,e.abrupt("return",_());case 34:return e.abrupt("return",s.default.resolve(!1));case 35:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.logout=delegate(function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.next=3,(0,I.getLoginModel)();case 3:return t=e.sent,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,params:[]}),n=$getState(),r=n.conf.confTempAcsAccount,isNullOrEmpty(r)||($dispatch(coreUi.changeConfTempAcsAccount("")),t.displayAccount=""),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),coreCommon.isMobile()&&(t.logoutDisable=!0),window.stroage.setFastLogin(!1),e.prev=10,R.info("[ logout ] isBackLogin:"+i+",isKickout:"+s),coreCommon.isPc()&&appService.resetTrayMenu(),window.CLIENTCONFIG.ISMOBILE&&appService.cancelAllNotification(),e.next=16,(0,O.unRegisterPush)(!1);case 16:return window.skipLogin=!1,e.next=19,(0,b.clearResumeService)();case 19:return e.next=21,(0,b.stopResume)("logout");case 21:return(0,T.getMiddleEndApi)().stopRefreshMiddleEndToken(),e.next=24,h();case 24:return coreCall.exitFullScreen(),D(),e.next=28,coreConf.unInit();case 28:C.actionGetCorpResourceAtomic.reset(),!s&&(0,N.storeAppCache)(),$dispatch(coreUi.toggleMobileNetTip(!0)),t.isMobile&&document.removeEventListener("pause",N.storeAppCache,!1),e.next=39;break;case 34:return e.prev=34,e.t0=e.catch(10),R.error("logout exception: "+e.t0.toString()),R.error("logout handle cache error:",e.t0),e.abrupt("return",v());case 39:return e.abrupt("return",_().then((0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(),e.next=3,(0,C.resetLoginInfo)();case 3:return e.next=5,F();case 5:return e.abrupt("return",{isBackLogin:i});case 6:case"end":return e.stop()}},e,void 0)}))).then(g).catch(function(e){R.error("logout handle cache error:",e),v()}));case 40:case"end":return e.stop()}},e,void 0,[[10,34]])}));return function(){return e.apply(this,arguments)}}(),"logout")),F=(t.quickLogout=delegate((0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("[ quickLogout ]"),e.next=3,coreCwmp.stopCwmpServerAndUnInit();case 3:case"end":return e.stop()}},e,void 0)})),"quickLogout"),t.clearState=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.info("clearState"),coreSearch.clearGlobalData(),coreUi.clearReduxState(),M("logout clearState"),coreUi.initAvatarMap(),coreUi.hideModal(),(0,I.resetLoginModel)(),(0,x.resetMyInfo)();case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}())},302:function(e,t,n){e.exports=n(0)(89)},308:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(){return window.prompt({title:language.PROXY_TITLE,label:"Proxy UserName :",value:"username",inputAttrs:{type:"url"},type:"input"})}function o(){return window.prompt({title:language.PROXY_TITLE,label:"Proxy Password :",value:"password",inputAttrs:{type:"password"},type:"input"})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOAuthAccount=t.getOAuthTicket=void 0;var i=n(1),s=r(i),c=n(2),u=r(c),f=(function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return t=e.sent,e.next=5,a();case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,o();case 10:if(r=e.sent){e.next=13;break}return e.abrupt("return");case 13:return t.proxyAccount=n,e.next=16,coreSecurity.getPasswordManager();case 16:return i=e.sent,e.next=19,i.setPassword("proxyPassword",r);case 19:return e.next=21,(0,l.setProxyInfo)({isSupportProxy:!0,proxyAddress:t.proxyAddress,proxyPort:t.proxyPort,proxyAccount:n,proxyPassword:r});case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}},e,this)}))}(),n(136)),l=n(167),d=coreLogger.getLogger("login")("IT-ticket");t.getOAuthTicket=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,u,l,p,h,g,v;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info(" [ getOAuthTicket ] "),t=PromiseObject(),e.next=4,(0,f.getLoginModel)();case 4:return n=e.sent,r=n.OAuthClinetID,a=n.OAuthUrl,o=n.account,e.next=9,coreSecurity.getPasswordManager();case 9:return i=e.sent,e.next=12,i.getPassword("password");case 12:return c=e.sent,c=encodeURIComponent(c),e.next=16,coreHttp.sendSyncRequest({url:a,type:constant.REQUEST_TYPE.POST,header:{"Content-Type":"application/x-www-form-urlencoded"},body:"username="+o+"&password="+c+"&grant_type=password&client_id="+r,cipherlist:[50331695,50331701,50331708,50331709]});case 16:return u=e.sent,l=u.param,p=l.recv_body,h=l.resp_code,g=l.result,h?(v=parseInt(h),200===v?(p=JSON.parse(p),p.error&&(d.error(" [ getOAuthTicket ] failed, errorCode:"+p.error+", info:"+p.error_description),t.reject({result:!1,errorCode:f.UErrorCode.LOGIN_ERR_AUTH_FAILED,errorType:f.ErrorType.uportal,isResume:n.isResume})),t.resolve(n.user_ticket=p.access_token),d.info(" [ getOAuthTicket ] result")):(d.error(" [ getOAuthTicket ] failed, request error, status code: "+h+", result: "+g),t.reject({result:!1,errorCode:f.UErrorCode.LOGIN_ERR_REQUEST_FAILED,errorType:f.ErrorType.uportal,isResume:n.isResume}))):t.reject({result:!1,errorCode:f.UErrorCode.LOGIN_ERR_REQUEST_FAILED,errorType:f.ErrorType.uportal,isResume:n.isResume}),e.abrupt("return",t);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getOAuthAccount=function(){var t=(0,u.default)(s.default.mark(function t(n){var r,a,o;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d.info(" [ getO[Auth]Account ] "),!((r=n.split("."))instanceof Array)){t.next=8;break}return a=JSON.parse(new e(r[1],"base64").toString()),d.info(" [ getO[Auth]Account ] result",a.preferred_username.length>4?a.preferred_username.substr(0,3)+"******"+a.preferred_username.substr(-4):"****"),t.abrupt("return",a.preferred_username);case 8:return o=PromiseObject(),t.abrupt("return",o.reject("server config error"));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}).call(t,n(132).Buffer)},309:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.firstTimeLoginChangePassword=t.firstLoginChangePassword=t.checkIsFirstLogin=t.setFistLoginInfo=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return n=e.sent,e.next=5,n.setPassword("password",t);case 5:return e.next=7,(0,u.getLoginModel)();case 7:r=e.sent,r.password=t;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),u=n(195),f=n(167),l=coreLogger.getLogger("login")("firstLogin"),d={};t.setFistLoginInfo=function(e,t){d={is_first_login:e.uportal_authorize_result&&e.uportal_authorize_result.is_first_login,account:t,auth_token:e.uportal_authorize_result.auth_token}},t.checkIsFirstLogin=function(){return d.is_first_login},t.firstLoginChangePassword=function(){l.info("firstLoginChange[Password] enter."),window.CLIENTCONFIG.ISMOBILE?(window.goRoute("loginCtn"),navigator.splashscreen&&navigator.splashscreen.hide(),window.goRoute("/loginCtn/firstTimeChangePassword")):window.confirm(language.FIRST_LOGIN_CHANGE_PASSWORD,"SETTING_CHANGE_PASSWORD",!0).then(function(e){e.ret?coreSetting.showChangePassword(!0):coreDb.saveUserConfig({key:"isRemindNotNotify",value:"true"})})},t.firstTimeLoginChangePassword=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){var a,i,d,p,h,g;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.navigator.onLine){e.next=3;break}return alert(language.LOGIN_RESUME_NETWORK_ERROR),e.abrupt("return");case 3:return e.next=5,coreTup.getUportalInstance();case 5:return a=e.sent,i=PromiseObject(),d=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.param,l.info("change [pass]word result: "+n.result),!n||0!==n.result){e.next=13;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=7;break}window.alert(""+language.CHANGE_PASSWORD_SUCCESS_FIRST).then(function(e){c(r).then(function(){return i.resolve(!0)})}),e.next=11;break;case 7:return e.next=9,coreSecurity.getPasswordManager();case 9:a=e.sent,window.confirm(language.CHANGE_PASSWORD_SUCCESS_RELOGIN,!0).then(function(e){coreSetting.showChangePassword(!1),c(r).then(function(){e.ret?(l.info("[password] change success, reLogin"),i.resolve(!0)):(l.info("[password] change success, not login"),a.setPassword("password","").then(function(e){var t={isRememberPassword:!1,isAutoLogin:!1};(0,f.setLoginInfo)(t),(0,u.getLoginModel)().then(function(e){e.password=""}),document.getElementById("password").value="",i.resolve(!1)}))})});case 11:e.next=16;break;case 13:s=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[s],2),i.resolve(!1);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setNotifyFunc(360449,d),e.next=11,(0,u.getLoginModel)();case 11:return p=e.sent,h=p.serverUportalAddress,g=p.serverUportalPort,a.changeLoginUportalPassword(t,n,r,h,g),e.abrupt("return",i);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()},310:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerEServerClientPush=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(195),l=coreLogger.getLogger("push")("index");window.registerEServerHWPush=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.webView.getLocalIp()||"0.0.0.0",!isNullOrEmpty(a)){e.next=6;break}return e.next=4,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_TOKEN});case 4:n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)||(a=n.value);case 6:if(!isNullOrEmpty(o)){e.next=11;break}return e.next=9,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME});case 9:r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)||(o=r.value);case 11:return e.next=13,d(2,1,a,o,"","",t);case 13:coreDb.saveLoginSetting({key:DB_KEY_HW_PUSH_TOKEN,value:a}),coreDb.saveLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME,value:o});case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterEServerHWClientPush=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.webView.getLocalIp()||"0.0.0.0",n=void 0,r=void 0,e.next=5,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_TOKEN});case 5:return a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(n=a.value),e.next=9,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME});case 9:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(r=o.value),e.next=13,d(2,3,n,r,"","",t);case 13:case"end":return e.stop()}},e,void 0)})),window.registerEServerIosPush=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,u.default)(s.default.mark(function e(r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=5;break}return e.next=3,coreDb.queryLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN});case 3:a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(t=a.value);case 5:if(!isNullOrEmpty(n)){e.next=10;break}return e.next=8,coreDb.queryLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN});case 8:o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(n=o.value);case 10:return e.next=12,d(1,1,"","",t,n,r);case 12:coreDb.saveLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN,value:t}),coreDb.saveLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN,value:n});case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterEServerIosPush=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,r=void 0,e.next=4,coreDb.queryLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN});case 4:return a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(n=a.value),e.next=8,coreDb.queryLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN});case 8:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(r=o.value),e.next=12,d(1,3,"","",n,iosVoipToken,t);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));var d=t.registerEServerClientPush=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,i,c,u){var d,p,h,g,v,m,_,C,w,S,I,E,N,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if(!isNullOrEmpty(r)||!isNullOrEmpty(i)){e.next=5;break}return l.info(" [ registerClientPush ] androidToken and iosDeviceToken is null"),e.abrupt("return");case 5:return isNullOrEmpty(a)&&(a=""),e.next=8,(0,f.getLoginModel)();case 8:return d=e.sent,p=d.account,h=d.authToken,g=d.serverAddress,v=d.serverPort,m=d.proxyAddress,_=d.proxyPort,C=d.proxyAccount,w=1,S="00:00",I="00:00",E={user:p,device_token:1===t?i:r,push_type:t,opt:n,client_ip:u,language:window.langShortName,no_push_start_time:S,no_push_end_time:I,apns_server:1,apns_cert:b,push_by_time_switch:w,heart_beat_time:30,android_token:1===t?i:r,app_id:"1",push_class_name:a,voip_token:c,app_mode:1,push_mode:1,im_push_mode:1,call_push_mode:0,push_im_active:"welink://welinksoftclient/h5page?page=imDetail",push_call_active:"welink://welinksoftclient/h5page?page=call"},l.info("registerClientPush","registerClientPush"),e.next=17,coreIm.registerPush(E);case 17:N=e.sent,l.info("registerClientPush","registerClientPush result : "+(0,o.default)(N));case 19:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}();window.openConversationByMobile=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreIm.openImDetailByUrl(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},311:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkLoginInfo=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=(t.checkLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("checkLoginInfo 登录前check"),e.next=3,u.getLoginModel();case 3:return t=e.sent,n=/[`~!#$^&*()+=|\\\[\]\{\}:;'\,<>\/?]|[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[^\x00-\xff]/g,r=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[^\x00-\xff]/g,e.abrupt("return",!(n.test(t.displayAccount)||r.test(t.password)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(136)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=coreLogger.getLogger("logic")("login/loginPreCheck")},312:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.iosCursorDeal=t.checkOffLineIsInCall=t.getIsReminder=t.getCloseType=t.getCloseAppWays=t.setLocalOfflineStatus=t.pushStatusToEServer=t.publishStatus=t.loadEserverSignature=t.loadMyInfo=t.updateCurUser=t.checkLocalHasMyinfo=void 0;var a=n(131),o=r(a),i=n(69),s=r(i),c=n(127),u=r(c),f=n(128),l=r(f),d=n(1),p=r(d),h=n(2),g=r(h),v=n(185),m=n(195),_=n(364),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),w=n(136),S=coreLogger.getLogger("logic")("main/myInfo"),I=(t.checkLocalHasMyinfo=function(){var e=(0,g.default)(p.default.mark(function e(){var t,n,r,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("start checkLocalHasMyinfo"),!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,(0,m.getLoginModel)();case 5:return t=e.sent,e.next=8,coreDb.queryLoginSetting({key:"myinfo"});case 8:if(n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)){e.next=20;break}if(r=n.value,isNullOrEmpty(r)){e.next=20;break}if(a=JSON.parse(r),isNullOrEmpty(a)||t.account!==a.compareAccount){e.next=20;break}return S.info(" checkLocalHasMyinfo : has local myinfo last copy"),e.next=17,(0,w.getMyInfo)();case 17:return o=e.sent,o.set(a),e.abrupt("return",!0);case 20:return S.info(" checkLocalHasMyinfo : no copy"),e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateCurUser=function(){var e=(0,g.default)(p.default.mark(function e(t){var n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getMyInfo)();case 2:n=e.sent,t&&(n.name=t),n.set.apply(n,(0,l.default)(n));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.loadMyInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r,a,o,i,c,f,l,d,h,g,v,_,C;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:return n=e.sent,e.next=5,(0,w.getMyInfo)();case 5:if(r=e.sent,S.info("loadMyInfo"),a=n.sipImpi,isNullOrEmpty(a)||-1!==(o=a.indexOf("@"))&&(a=a.slice(0,o)),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=26;break}return i=window.getUportalRes(),c={},c.account=i.param.uportal_authorize_result.real_user_account,e.next=15,coreContact.getUserInfo(c.account);case 15:if(f=e.sent,l=f.param,!isNullOrEmpty(l)){e.next=24;break}return S.error("myinfo is null"),d=c.account.split("@")[0],r.account=c.account,r.name=d,r.bind_no=a,e.abrupt("return");case 24:return r.set((0,u.default)({},l)),e.abrupt("return");case 26:return e.next=28,coreContact.getUserInfo(t);case 28:if(h=e.sent,g=h.param,!isNullOrEmpty(g)){e.next=37;break}return S.error("myinfo is null"),v=n.displayAccount.split("@")[0],r.account=t,r.name=r.name||v,r.bind_no=a,e.abrupt("return");case 37:n.isSupportAS&&(g.account=n.account),g.dept_name_cn=g.dept_name_cn.replace(/\*/g,"-"),g.dept_name_en=g.dept_name_cn.replace(/\*/g,"-"),_=(0,u.default)({},g,{compareAccount:t}),C=(0,s.default)(_),coreDb.saveLoginSetting({key:"myinfo",value:C}),r.set(_);case 44:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.loadEserverSignature=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("query eserver sig start"),e.next=3,coreContact.queryEserverSignature(t);case 3:if(n=e.sent,isNullOrEmpty(n)||1!==n.result){e.next=7;break}return S.info("query eserver sig-nature failed"),e.abrupt("return");case 7:return e.next=9,(0,w.getMyInfo)();case 9:r=e.sent,r.set(n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),null),E=(t.publishStatus=function(){var e=(0,g.default)(p.default.mark(function e(t){var n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.getLoginModel)();case 3:return n=e.sent,e.next=6,(0,w.getMyInfo)();case 6:if(r=e.sent,n.useIM){e.next=10;break}return S.info("publishStatus, now is te mode,not do publishStatus"),e.abrupt("return");case 10:if(S.info("publishStatus,status:",t,"desc:",handlePhoneNumber(o)),t!==constant.ONLINE_STATUS.OFFLINE){e.next=23;break}return e.next=14,(0,v.setOffline)();case 14:if(!(a=e.sent)){e.next=20;break}return T("publishStatus OFFLINE"),e.abrupt("return",!0);case 20:return e.abrupt("return",!1);case 21:e.next=34;break;case 23:if(!window.isOffline){e.next=33;break}if(!n.loginDisable){e.next=27;break}return S.info("publishStatus, now loginDisable,not do login again"),e.abrupt("return",!1);case 27:return t===constant.ONLINE_STATUS.ONLINE&&(r.isOffToLine=!0),$dispatch(coreUi.updateUnreadSystemBulletin(0)),e.next=31,(0,v.login)(!1,!1,t,o);case 31:r.isOffToLine=!1,C.checkStatusOptions();case 33:return e.abrupt("return",E(t,o));case 34:e.next=40;break;case 36:return e.prev=36,e.t0=e.catch(0),S.error("publishStatus",e.t0),e.abrupt("return",!1);case 40:case"end":return e.stop()}},e,void 0,[[0,36]])}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,g.default)(p.default.mark(function e(t,n){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!coreIm.checkEServerOnlineNoToast("publishStatus")){e.next=6;break}return e.next=3,N(t,n);case 3:return e.abrupt("return",e.sent);case 6:return coreIm.setUserLoginStatus({status:t,desc:n}),r=PromiseObject(),I&&(S.info("publishStatus remove pre _addedEServerLoginSuccessFunction"),window.removeEventListener("eServerLoginSuccess",I),I=null),I=function(){var e=(0,g.default)(p.default.mark(function e(){var a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("publishStatus _addedEServerLoginSuccessFunction",(0,s.default)({status:t,desc:n})),window.removeEventListener("eServerLoginSuccess",I),I=null,a=coreIm.getUserLoginStatus(),e.next=6,N(a.status,a.desc);case 6:o=e.sent,r.resolve(o);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.addEventListener("eServerLoginSuccess",I),S.info("publishStatus add eServerLoginSuccess callback",(0,s.default)({status:t,desc:n})),setTimeout(function(){return r.resolve(!1)},35e3),e.abrupt("return",r);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),N=t.pushStatusToEServer=function(){var e=(0,g.default)(p.default.mark(function e(t,n){var r,a,i,c,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.CLIENTCONFIG.ISMOBILE?1:0,e.next=3,(0,w.getMyInfo)();case 3:if(a=e.sent,"number"!==Object.type(t)&&"string"!==Object.type(t)){e.next=20;break}return S.info("pushStatusToEServer",(0,s.default)({status:t,desc:n,client_type:r})),e.next=8,(0,m.getLoginModel)();case 8:return i=e.sent,e.next=11,coreIm.publishStatusToServer({status:t,desc:n});case 11:if(!(c=e.sent)||0!==c.result){e.next=20;break}return u=i.account,i.status=t,$dispatch(coreUi.updateContactStatusMap((0,o.default)({},u,{status:t,desc:n,client_type:r}))),a.status=t,a.statusDesc=n,b(t),e.abrupt("return",!0);case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),b=function(e){coreSetting.checkAutoLeave(e),$getState().setting.shouldResetTray&&appService.initMainTray()},T=t.setLocalOfflineStatus=function(){var e=(0,g.default)(p.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("setLocalOfflineStatus "+n),e.next=3,(0,w.getMyInfo)();case 3:t=e.sent,t.status=constant.ONLINE_STATUS.OFFLINE,coreIm.dealOfflineFileSendOrReceiveFail(),t.statusDesc="",t.selectIndex=4,$dispatch(coreUi.cleanContactStatusMap());case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.getCloseAppWays=function(){var e=(0,g.default)(p.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("userClick  main page quit btn"),t?coreCommon.quickCloseApp():coreCommon.closeApp();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getCloseType=function(){return window.localStorage.getItem("closeWays")},t.getIsReminder=function(){return window.localStorage.getItem("isReminder")},t.checkOffLineIsInCall=function(){var e=(0,g.default)(p.default.mark(function e(){var t,n,r,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S.info("click OffLint for checkAndEndCall"),t=$getState().call,n=t.showCallToolBar,r=t.callStatus,!n&&"VIDEO_CONNECTED"!==r&&"VIDEO_OUT"!==r&&"CALL_OUT"!==r&&"CALL_CONNECTED"!==r){e.next=7;break}return a=language.COMMON_EXIT_THE_PROMPT,window.CLIENTCONFIG.ISMOBILE||window.alert(a),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),S.error("click OffLint for checkAndEndCall"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),t.iosCursorDeal=function(){var e=(0,g.default)(p.default.mark(function e(t){var n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"ios"===window.CLIENTCONFIG.PLATFORM&&0===t.target.value.length&&(n=document.activeElement,"input"===n.nodeName.toLocaleLowerCase()&&setTimeout(function(){""===n.style.textShadow?n.style.textShadow="rgba(0, 0, 0, 0) 0 0 0":n.style.textShadow=""},20));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},313:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterVmrConfListInfo=t.hasVmrConfListInfo=t.joinVMRConfMetting=t.joinConfMetting=t.createNewConfMetting=t.joinConference=t.showMobileConfInfo=t.choseDevice=t.getIsToday=t.getIsSameDay=t.isShowTimer=t.getDateByTime=t.getWeekByTime=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=coreLogger.getLogger("components")("mobile/conference/libs"),u=t.getWeekByTime=function(e){var t=new Date(e).getDay();switch(t){case 0:t=language.MOBILE_SUNDAY;break;case 1:t=language.MOBILE_MONDAY;break;case 2:t=language.MOBILE_TUESDAY;break;case 3:t=language.MOBILE_WEDNESDAY;break;case 4:t=language.MOBILE_THURSDAY;break;case 5:t=language.MOBILE_FRIDAY;break;case 6:t=language.MOBILE_SATURDAY;break;default:t=null}return t},f=t.getDateByTime=function(e){var t=new Date,n=e.split(" ")[0],r=n.split("-"),a=r.join("/"),o=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();o=new Date(o.replace(/-/g,"/"));var i=new Date(n.replace(/-/g,"/")),s=i.getTime()-o.getTime(),c=u(e),f=parseInt(s/864e5),l="";if(0===f?l=language.TODAY+" "+c+" "+a:1===f&&(l=language.TOMORROW+" "+c+" "+a),l)return l;var d=t.getFullYear()===parseInt(r[0]);if(0!==f){(d?"":r[0]+language.YEAR)+((parseInt(r[1])<10?r[1].substr(1):r[1])+language.MONTH)+((parseInt(r[2])<10?r[2].substr(1):r[2])+language.DAY)}return l+" "+c+" "+a};t.isShowTimer=function(e,t){if(!isNullOrEmpty(t)){if(f(e.start_time)===f(t.start_time))return!1}return!0},t.getIsSameDay=function(e,t){return e.split(" ")[0]===t.split(" ")[0]},t.getIsToday=function(e){return new Date(e).toDateString()===(new Date).toDateString()},t.choseDevice=function(e,t){c.info("BLE: choose conf device, device name=",e.name),e&&e.name===language.CURRENT_EQUIPMENT?coreConf.enterConfInConfList(t):coreConf.enterConfInConfList(t,!0)},t.showMobileConfInfo=function(e){coreConf.changeCurrentConfInfo(e),coreConf.getConfInfo(e.conf_id,e.cycle_conf_id),coreConf.handleNotShowGeneralPas(!1),coreConf.handleNotShowChairPas(!1),window.goRoute("mConferenceInfo")},t.joinConference=function(e){return c.info("userClick enter conf in conflist page"),window.CLIENTCONFIG.ENABLE_IT_MEETING,constant.PAIR_STATE.PAIR_SUCCESS===$getState().synergismInfo.pairState?"pairConf":coreConf.enterConfInConfList(e)},t.createNewConfMetting=function(){c.info("userClick  conf create conf btn"),coreConf.saveConThemeName(!0),coreConf.initCreateMettingContent(),window.goRoute("ConCreateMeeting")},t.joinConfMetting=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.getConfInfoFromDb();case 2:window.goRoute("mEnterConfPage");case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.joinVMRConfMetting=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.getVRMList();case 2:window.goRoute("mMyVMRInfo");case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.hasVmrConfListInfo=function(e){return e.spec_vmr_num>0},t.filterVmrConfListInfo=function(e){var t=[],n=$getState(),r=n.myInfo.name,a=n.login.isFreeUser,o=r+language.CONFERENCE_SUBJECT_INFO;if(a!==constant.ACCOUNT_TYPE.IS_FREE){if(isNullOrEmpty(e.conf_id)||0!==e.vmr_status||t.push({idType:constant.AS_CONF_ID_TYPE_MAP.PERSONAL_CONF_ID,confId:e.conf_id,vmrId:e.vmr_id,confSubject:o,maxParties:0,vmrStatus:0}),e.spec_vmr_num>0){for(var i=e.spec_vmr_info,s=0;s<e.spec_vmr_num;s++)i&&i[s]&&!isNullOrEmpty(i[s].conf_id)&&t.push({idType:constant.AS_CONF_ID_TYPE_MAP.PRIVATE_CONF_ID,confId:i[s].conf_id,vmrId:i[s].vmr_id,confSubject:i[s].name,maxParties:i[s].max_parties,vmrStatus:i[s].vmr_status});t.push({idType:constant.AS_CONF_ID_TYPE_MAP.RANDOM_CONF_ID,confId:"",vmrId:"",confSubject:"",maxParties:0})}}else for(var c=e.spec_vmr_info,u=0;u<e.spec_vmr_num;u++)c&&c[u]&&!isNullOrEmpty(c[u].conf_id)&&t.push({idType:constant.AS_CONF_ID_TYPE_MAP.PRIVATE_CONF_ID,confId:c[u].conf_id,vmrId:c[u].vmr_id,confSubject:c[u].name,maxParties:c[u].max_parties,vmrStatus:c[u].vmr_status});return t}},322:function(e,t,n){"use strict";(function(t,r){function a(e){return F.from(e)}function o(e){return F.isBuffer(e)||e instanceof U}function i(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?M(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){R=R||n(188),e=e||{};var r=t instanceof R;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(V||(V=n(284).StringDecoder),this.decoder=new V(e.encoding),this.encoding=e.encoding)}function c(e){if(R=R||n(188),!(this instanceof c))return new c(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),P.call(this)}function u(e,t,n,r,o){var i=e._readableState;if(null===t)i.reading=!1,g(e,i);else{var s;o||(s=l(i,t)),s?e.emit("error",s):i.objectMode||t&&t.length>0?("string"==typeof t||i.objectMode||Object.getPrototypeOf(t)===F.prototype||(t=a(t)),r?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):f(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?f(e,i,t,!1):_(e,i)):f(e,i,t,!1))):r||(i.reading=!1)}return d(i)}function f(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&v(e)),_(e,t)}function l(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function p(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function h(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,v(e)}}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(G("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?k.nextTick(m,e):m(e))}function m(e){G("emit readable"),e.emit("readable"),N(e)}function _(e,t){t.readingMore||(t.readingMore=!0,k.nextTick(C,e,t))}function C(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(G("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function w(e){return function(){var t=e._readableState;G("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&D(e,"data")&&(t.flowing=!0,N(e))}}function S(e){G("readable nexttick read 0"),e.read(0)}function I(e,t){t.resumeScheduled||(t.resumeScheduled=!0,k.nextTick(E,e,t))}function E(e,t){t.reading||(G("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(G("flow",t.flowing);t.flowing&&null!==e.read(););}function b(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=T(e,t.buffer,t.decoder),n}function T(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?y(e,t):O(e,t),r}function y(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var o=n.data,i=e>o.length?o.length:e;if(i===o.length?a+=o:a+=o.slice(0,e),0===(e-=i)){i===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(i));break}++r}return t.length-=r,a}function O(e,t){var n=F.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,i),0===(e-=i)){i===o.length?(++a,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(i));break}++a}return t.length-=a,n}function x(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,k.nextTick(A,t,e))}function A(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var k=n(240);e.exports=c;var R,M=n(210);c.ReadableState=s;var D=(n(265).EventEmitter,function(e,t){return e.listeners(t).length}),P=n(323),F=n(134).Buffer,U=t.Uint8Array||function(){},B=n(218);B.inherits=n(129);var W=n(596),G=void 0;G=W&&W.debuglog?W.debuglog("stream"):function(){};var V,H=n(597),$=n(324);B.inherits(c,P);var j=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),c.prototype.destroy=$.destroy,c.prototype._undestroy=$.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e)},c.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=F.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},c.prototype.unshift=function(e){return u(this,e,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(e){return V||(V=n(284).StringDecoder),this._readableState.decoder=new V(e),this._readableState.encoding=e,this};var q=8388608;c.prototype.read=function(e){G("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return G("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?x(this):v(this),null;if(0===(e=h(e,t))&&t.ended)return 0===t.length&&x(this),null;var r=t.needReadable;G("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,G("length less than watermark",r)),t.ended||t.reading?(r=!1,G("reading or ended",r)):r&&(G("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=h(n,t)));var a;return a=e>0?b(e,t):null,null===a?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&x(this)),null!==a&&this.emit("data",a),a},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(e,t){function n(e,t){G("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function a(){G("onend"),e.end()}function o(){G("cleanup"),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("drain",v),e.removeListener("error",c),e.removeListener("unpipe",n),d.removeListener("end",a),d.removeListener("end",l),d.removeListener("data",s),m=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){G("ondata"),_=!1,!1!==e.write(t)||_||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==L(p.pipes,e))&&!m&&(G("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,_=!0),d.pause())}function c(t){G("onerror",t),l(),e.removeListener("error",c),0===D(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",f),l()}function f(){G("onfinish"),e.removeListener("close",u),l()}function l(){G("unpipe"),d.unpipe(e)}var d=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,G("pipe count=%d opts=%j",p.pipesCount,t);var h=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,g=h?a:l;p.endEmitted?k.nextTick(g):d.once("end",g),e.on("unpipe",n);var v=w(d);e.on("drain",v);var m=!1,_=!1;return d.on("data",s),i(e,"error",c),e.once("close",u),e.once("finish",f),e.emit("pipe",d),p.flowing||(G("pipe resume"),d.resume()),e},c.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)r[o].emit("unpipe",this,n);return this}var i=L(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},c.prototype.on=function(e,t){var n=P.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&v(this):k.nextTick(S,this))}return n},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var e=this._readableState;return e.flowing||(G("resume"),e.flowing=!0,I(this,e)),this},c.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(G("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(a){if(G("wrapped data"),n.decoder&&(a=n.decoder.write(a)),(!n.objectMode||null!==a&&void 0!==a)&&(n.objectMode||a&&a.length)){t.push(a)||(r=!0,e.pause())}});for(var a in e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var o=0;o<j.length;o++)e.on(j[o],this.emit.bind(this,j[o]));return this._read=function(t){G("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),c._fromList=b}).call(t,n(139),n(148))},323:function(e,t,n){e.exports=n(265).EventEmitter},324:function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var i=n(240);e.exports={destroy:r,undestroy:a}},325:function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);s.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){i(e,t,n)}):i(this,null,null)}function i(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=a;var s=n(188),c=n(218);c.inherits=n(129),c.inherits(a,s),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},326:function(e,t,n){(function(e,r){function a(e,n){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,e,r.depth)}function o(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function i(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,r){if(e.customInspect&&n&&T(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return C(a)||(a=c(e,a,r)),a}var o=u(e,n);if(o)return o;var i=Object.keys(n),g=s(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(n)),b(n)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(n);if(0===i.length){if(T(n)){var v=n.name?": "+n.name:"";return e.stylize("[Function"+v+"]","special")}if(I(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(N(n))return e.stylize(Date.prototype.toString.call(n),"date");if(b(n))return f(n)}var m="",_=!1,w=["{","}"];if(h(n)&&(_=!0,w=["[","]"]),T(n)){m=" [Function"+(n.name?": "+n.name:"")+"]"}if(I(n)&&(m=" "+RegExp.prototype.toString.call(n)),N(n)&&(m=" "+Date.prototype.toUTCString.call(n)),b(n)&&(m=" "+f(n)),0===i.length&&(!_||0==n.length))return w[0]+m+w[1];if(r<0)return I(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var S;return S=_?l(e,n,r,g,i):i.map(function(t){return d(e,n,r,g,t,_)}),e.seen.pop(),p(S,m,w)}function u(e,t){if(S(t))return e.stylize("undefined","undefined");if(C(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return _(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,a){for(var o=[],i=0,s=t.length;i<s;++i)L(t,String(i))?o.push(d(e,t,n,r,String(i),!0)):o.push("");return a.forEach(function(a){a.match(/^\d+$/)||o.push(d(e,t,n,r,a,!0))}),o}function d(e,t,n,r,a,o){var i,s,u;if(u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),L(r,a)||(i="["+a+"]"),s||(e.seen.indexOf(u.value)<0?(s=v(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),S(i)){if(o&&a.match(/^\d+$/))return s;i=JSON.stringify(""+a),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+s}function p(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function m(e){return null==e}function _(e){return"number"==typeof e}function C(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function S(e){return void 0===e}function I(e){return E(e)&&"[object RegExp]"===O(e)}function E(e){return"object"==typeof e&&null!==e}function N(e){return E(e)&&"[object Date]"===O(e)}function b(e){return E(e)&&("[object Error]"===O(e)||e instanceof Error)}function T(e){return"function"==typeof e}function y(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function O(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var k=/%[sdj%]/g;t.format=function(e){if(!C(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,i=String(e).replace(k,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])v(s)||!E(s)?i+=" "+s:i+=" "+a(s);return i},t.deprecate=function(n,a){function o(){if(!i){if(r.throwDeprecation)throw new Error(a);r.traceDeprecation?console.trace(a):console.error(a),i=!0}return n.apply(this,arguments)}if(S(e.process))return function(){return t.deprecate(n,a).apply(this,arguments)};if(!0===r.noDeprecation)return n;var i=!1;return o};var R,M={};t.debuglog=function(e){if(S(R)&&(R=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=r.pid;M[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else M[e]=function(){};return M[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=g,t.isNull=v,t.isNullOrUndefined=m,t.isNumber=_,t.isString=C,t.isSymbol=w,t.isUndefined=S,t.isRegExp=I,t.isObject=E,t.isDate=N,t.isError=b,t.isFunction=T,t.isPrimitive=y,t.isBuffer=n(353);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(129),t._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(139),n(148))},330:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EncoderAdpt=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("conf")("logic/video/svcManager"),u={LEVEL_INVALID:-1,LEVEL_LOW:0,LEVEL_HIGH:1},f={REQUEST_KEEP:0,REQUEST_CLOSE:1,REQUEST_OPEN:2},l={OFF:0,ON:1},d=[{width:1280,height:720,framerate:30,bitrate:2795},{width:960,height:540,framerate:20,bitrate:1430},{width:640,height:360,framerate:20,bitrate:730}],p=80,h=90,g=function(){function e(){(0,o.default)(this,e),this.continuousTime=0,this.continuousLevel=u.LEVEL_INVALID,this.punishTime=0,this.encoderLevel=0,this.punishCheck=-1,this.clearPunishCheck=!1,this.cameraRequest=f.REQUEST_KEEP,this.cameraStatus=l.ON,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraIsForceClose=!1,this.cameraAutoCloseEnable=!0,this.adpt_threshold=p,this.close_camera_threshold=h}return(0,s.default)(e,[{key:"clear",value:function(){this.continuousTime=0,this.continuousLevel=u.LEVEL_INVALID,this.punishTime=0,this.encoderLevel=0,this.punishCheck=-1,this.clearPunishCheck=!1,this.cameraRequest=f.REQUEST_KEEP,this.cameraStatus=l.ON,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraIsForceClose=!1,this.cameraAutoCloseEnable=!0,this.adpt_threshold=p,this.close_camera_threshold=h}},{key:"onNotifyCameraStatus",value:function(e){this.cameraIsForceClose&&e&&coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA_NOTIFY",1),this.cameraStatus=e?l.ON:l.OFF,this.cameraIsForceClose=!1,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraRequest=f.REQUEST_KEEP,this.cameraAutoCloseEnable=!1,c.info("onNotifyCameraStatus, cameraStatus: ",this.cameraStatus)}},{key:"calcLevel",value:function(e){return e>this.adpt_threshold?u.LEVEL_HIGH:u.LEVEL_LOW}},{key:"shouldDowngrade",value:function(){return this.continuousTime>=15&&this.continuousLevel===u.LEVEL_HIGH}},{key:"shouldUpgrade",value:function(){return this.continuousTime>=15+this.punishTime&&this.continuousLevel===u.LEVEL_LOW}},{key:"updateContinuousLevel",value:function(e){var t=this.calcLevel(e);return t!==this.continuousLevel?(this.continuousLevel=t,this.continuousTime=5):this.continuousTime+=5,e>this.close_camera_threshold?this.closeCameraReqCount++:this.closeCameraReqCount=0,e<70?this.openCameraReqCount++:this.openCameraReqCount=0,t}},{key:"check",value:function(e){var t=!1;return this.punishCheck>=0&&(this.punishCheck++,e>=this.adpt_threshold&&(this.punishTime=this.punishTime<480?2*(this.punishTime+15)-15:465,this.ResolutionDowngrade(),this.continuousTime=0,this.punishCheck=-1,t=!0,c.info("punish: ",this.punishTime)),this.punishCheck>=2&&(this.punishCheck=-1)),this.clearPunishCheck&&e<this.adpt_threshold&&(this.punishTime=0,this.clearPunishCheck=!1,t=!0,c.info("clear punish: ",this.punishTime)),t}},{key:"feed",value:function(e,t){if(3===t||4===t?(this.adpt_threshold=p+10,this.close_camera_threshold=h+10):(this.adpt_threshold=p,this.close_camera_threshold=h),c.info(">>>>>>>>>current cpu rate: ",e),this.updateContinuousLevel(e),this.closeCameraReqCount>=3&&this.cameraRequest===f.REQUEST_KEEP&&(this.cameraIsForceClose=!0,this.closeCameraReqCount=0),this.closeCameraReqCount>=3&&this.cameraRequest===f.REQUEST_CLOSE){if(this.cameraAutoCloseEnable)return this.closeCamera(),this.closeCameraReqCount=0,void(this.cameraRequest=f.REQUEST_OPEN);this.cameraStatus===l.ON&&this.closeCameraReqCount>8&&(coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA_NOTIFY",1),this.cameraIsForceClose=!0,this.closeCameraReqCount=0)}if(this.openCameraReqCount>=3&&this.cameraRequest===f.REQUEST_KEEP&&(this.openCameraReqCount=0,this.cameraIsForceClose=!1),this.openCameraReqCount>=3&&this.cameraRequest===f.REQUEST_OPEN&&(this.openCameraReqCount=0,this.cameraRequest=f.REQUEST_KEEP,this.cameraIsForceClose=!1),!this.check(e))if(this.shouldDowngrade())this.ResolutionDowngrade(),this.continuousTime=0;else if(this.shouldUpgrade()){var n=this.ResolutionUpgrade();this.continuousTime=0,n&&(this.punishCheck=0),this.punishTime&&(this.clearPunishCheck=!0)}}},{key:"ResolutionDowngrade",value:function(){if(c.info("resolution downgrade"),this.encoderLevel>=d.length-1)return c.info("can not downgrade encoder level"),this.cameraStatus===l.ON&&(this.cameraRequest=f.REQUEST_CLOSE),!1;this.encoderLevel++,this.encoderLevel>=d.length&&(this.encoderLevel=d.length-1),c.info("current encoder level[",this.encoderLevel,"]",d[this.encoderLevel]);var e=$getState().call.callId;return coreCall.setEncoderMaxCap(e,d[this.encoderLevel].width,d[this.encoderLevel].height,d[this.encoderLevel].framerate,d[this.encoderLevel].bitrate),!0}},{key:"ResolutionUpgrade",value:function(){if(c.info("resolution upgrade"),this.cameraStatus===l.OFF)return void c.info("camera is off, can not upgrade resolution.");if(this.encoderLevel<=0)return c.info("can not upgrade encoder level"),!1;if(2===window.cpu_core_num&&2===window.cpu_proc_num&&d[this.encoderLevel].height>360)return c.info("2 core 2 logical processors cpu, can not upgrade encoder level"),!1;this.encoderLevel--,this.encoderLevel<=0&&(this.encoderLevel=0),c.info("current encoder level[",this.encoderLevel,"]",d[this.encoderLevel]);var e=$getState().call.callId;return coreCall.setEncoderMaxCap(e,d[this.encoderLevel].width,d[this.encoderLevel].height,d[this.encoderLevel].framerate,d[this.encoderLevel].bitrate),!0}},{key:"closeCamera",value:function(){c.info("[CpuAdaptive]: closeCamera"),coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_CLOSE_CAMERA",1),this.cameraStatus=l.OFF;var e=$getState().call,t=e.callStatus,n=e.cameraIsDisabled;!("VIDEO_OUT"!==t&&!n)||(coreCommon.CameraControl.getInstance().switchCameraStateAction(l.OFF),this.cameraIsForceClose=!0,c.info("[CpuAdaptive]: closeCamera ok"))}},{key:"openCamera",value:function(){c.info("[CpuAdaptive]: openCamera"),coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA",1),this.cameraStatus=l.ON;var e=$getState().call,t=e.callStatus,n=e.cameraIsDisabled;!("VIDEO_OUT"!==t&&!n)||(coreCommon.CameraControl.getInstance().switchCameraStateAction(l.ON),this.cameraIsForceClose=!1,c.info("[CpuAdaptive]: openCamera"))}}]),e}();t.EncoderAdpt=new g},331:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"callToConfFail",value:function(){}},{key:"confIncoming",value:function(){}},{key:"confInfoNotify",value:function(){}},{key:"svcSeessionModify",value:function(){}},{key:"acceptConfStart",value:function(){}},{key:"rejectConf",value:function(){}},{key:"closeConfPage",value:function(){}},{key:"showExitConfTip",value:function(){}},{key:"notifyPluginConfEnd",value:function(){}},{key:"notifyPluginLogout",value:function(){}},{key:"showErrorMsgBox",value:function(){}},{key:"showCallOutPage",value:function(){}},{key:"showVideoOutPage",value:function(){}},{key:"showVideoConnectedPage",value:function(){}},{key:"showCallConnectedPage",value:function(){}},{key:"changeAudioToVideo",value:function(){}},{key:"changeVideoToAudio",value:function(){}},{key:"changeIsSvcConfS",value:function(){}},{key:"dealMemberList",value:function(){}}]),e}();t.default=c},341:function(e,t,n){e.exports={default:n(342),__esModule:!0}},342:function(e,t,n){n(343);var r=n(8).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},343:function(e,t,n){var r=n(280),a=n(344).f;n(137)("getOwnPropertyDescriptor",function(){return function(e,t){return a(r(e),t)}})},344:function(e,t,n){e.exports=n(0)(244)},353:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},357:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isInReCall=t.reCallSuc=t.reCallEnterConf=t.terminateReCall=t.reCallTerminate=t.reCallStart=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(703),u=r(c),f=n(249),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=coreLogger.getLogger("reCallModel")("index"),p=null,h=(t.reCallStart=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return d.info("savedRecallInfo is null, no need recall"),e.abrupt("return");case 3:if(null===p){e.next=6;break}return d.info("is already deal recall"),e.abrupt("return");case 6:if(!l.isUserEndConf()){e.next=9;break}return d.info("is in user endConf, no deal recall"),e.abrupt("return");case 9:p=new u.default(t,h),p.startReCall();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.reCallTerminate=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallStop"),e.abrupt("return");case 3:return e.next=5,p.reCallTerminate();case 5:p=null;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.terminateReCall=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallStop"),e.abrupt("return");case 3:return e.next=5,p.terminateReCall();case 5:p=null;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reCallEnterConf=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallEnterConf"),e.abrupt("return");case 3:p.reCallEnterConf();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reCallSuc=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallSuc"),e.abrupt("return");case 3:p.reCallSucToStopReCall(),p=null;case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInReCall=function(){return null!==p}},358:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(3),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("api")("clkapi"),p=null,h=null,g=new Array,v=function(e){null!==p&&p.sendToTup(e)},m=function(){function e(){var t=this;return(0,u.default)(this,e),h&&p&&0===p.readyState?(d.info("API WebSocket is connecting"),h):h=new s.default(function(e,n){p&&1===p.readyState?e(t):(p=new WebSocket("ws://localhost:"+(window.CLIENTCONFIG.API_PORT||"7685"),"clk_api_call_service_protocol"),p.onopen=function(){d.info("API WebSocket is opened"),e(t)},p.onclose=function(){d.info("API WebSocket is closed"),p=null},p.onerror=function(e){d.info("API WebSocket is error, e = "+(0,o.default)(e)),p=null},p.onmessage=function(e){var t=JSON.parse(e.data);1630===t.cmd?d.info("CloudLink Recive API message: CLIENT_CMD_WORKPLACE_LOGIN"):d.info("CloudLink Recive API message: ",t),t.cmd>0&&"function"==typeof g[t.cmd]&&g[t.cmd](t)})})}return(0,l.default)(e,[{key:"setCmdFunc",value:function(e,t){d.info("set cmd func, cmd = "+e),g[e]=t}},{key:"postRpsMessage",value:function(e,t){var n={description:e.description,rps:e.cmd,opt:e.opt,call:e.call,result:t};v(n),d.debug("CloudLink Rsp to proxy: description = "+n.description+", rps = "+n.rps+", opt = "+n.opt+", call = "+n.call+", result = "+n.result)}},{key:"postRpsParamMessage",value:function(e,t,n){var r={description:e.description,rps:e.cmd,opt:e.opt,call:e.call,result:n,param:t};v(r),d.debug("CloudLink Rsp param to proxy: description = "+r.description+", rps = "+r.rps+", opt = "+r.opt+", call = "+r.call+", result = "+r.result+", param = "+r.param)}},{key:"postNotifyMessage",value:function(e){d.debug(e.description,e),v(e)}}]),e}();t.default=m},359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAttendee=t.currentAccountIsRole=t.resetJoinConfValue=t.resetCreateConfValue=t.resetBookConfValue=t.resetDefaultValue=t.returnTimeCur=t.getDefaultDate=t.changeConfImmediatelyClearData=t.clearRecordInfoLogic=t.haveRecordedLogic=t.isReacrdLogic=t.setRecordSchednameLogic=t.isShowReacrdTypeLogic=t.toggleIsReacrdSwitch=t.changeShowType=t.changeStartTimeMobile=t.changeStartTimeMin=t.changeStartTimeHour=t.changeStartTime=t.changeConfLen=t.changeTimeZone=t.changeConfImmediately=t.toggleCreateMeetingPasswordOption=t.toggleCreateMeetingPasswordDefault=t.toggleIsBookSendSMS=t.toggleIsBookSendEmail=t.toggleCreateMeetingPassword=t.toggleCreateVideoConf=t.toggleVideoConf=t.changeCreateMeetingSubject=t.changeMeetingSubject=void 0;var r=n(128),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=coreLogger.getLogger("conf")("logic"),i=(t.changeMeetingSubject=function(e){return $dispatch(coreUi.changeConfSubject(e))},t.changeCreateMeetingSubject=function(e){return $dispatch(coreUi.changeCreateConfSubject(e))},t.toggleVideoConf=function(e){return $dispatch(coreUi.changeMeetingType(e))},t.toggleCreateVideoConf=function(e){return $dispatch(coreUi.changeCreateMeetingType(e))},t.toggleCreateMeetingPassword=function(e){return $dispatch(coreUi.changeCreateMeetingPassword(e))},t.toggleIsBookSendEmail=function(e){return $dispatch(coreUi.changeIsBookSendEmail(e))},t.toggleIsBookSendSMS=function(e){return $dispatch(coreUi.changeIsBookSendSMS(e))},t.toggleCreateMeetingPasswordDefault=function(e){return $dispatch(coreUi.changeCreateMeetingPasswordDefault(e))},t.toggleCreateMeetingPasswordOption=function(e){return $dispatch(coreUi.changeCreateMeetingPasswordOption(e))},t.changeConfImmediately=function(e){return $dispatch(coreUi.toggleConfImmediately(e))},t.changeTimeZone=function(e){return $dispatch(coreUi.updateTimeZone(e))}),s=t.changeConfLen=function(e){return $dispatch(coreUi.updateConfLen(e))},c=t.changeStartTime=function(e){return $dispatch(coreUi.updateStartTime(e))},u=t.changeStartTimeHour=function(e){return $dispatch(coreUi.updateStartTimeHour(e))},f=t.changeStartTimeMin=function(e){return $dispatch(coreUi.updateStartTimeMin(e))};t.changeStartTimeMobile=function(e){return $dispatch(coreUi.updateStartTimeMobile(e))},t.changeShowType=function(e){return $dispatch(coreUi.changeAttendeeShowType(e))},t.toggleIsReacrdSwitch=function(e){return $dispatch(coreUi.setIsReacrdSwitchType(e))},t.isShowReacrdTypeLogic=function(e){return $dispatch(coreUi.setIsShowReacrdType(e))},t.setRecordSchednameLogic=function(e){return $dispatch(coreUi.setRecordSchedname(e))},t.isReacrdLogic=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.info("createNewMeeting.isReacrdLogic() "+e),$dispatch(coreUi.setIsReacrd(e)),window.CLIENTCONFIG.ISMOBILE&&(o.info("mobile recording isReacrd: "+e),o.info("mobile recording recordType: "+t),e?window.setIsRecord(t):window.setIsRecord(e))},t.haveRecordedLogic=function(e){return $dispatch(coreUi.setHaveReacorded(e))},t.clearRecordInfoLogic=function(){return $dispatch(coreUi.clearRecordInfo())},t.changeConfImmediatelyClearData=function(){var e=new Date,t={year:e.getFullYear(),month:e.getMonth(),day:e.getDate()};i(0),s([1,0]),c(t),u(""),f("")},t.getDefaultDate=function(){var e=new Date,t=e;23===e.getHours()&&e.getMinutes()>15&&(t=new Date(e.getTime()+864e5));var n={year:t.getFullYear(),month:t.getMonth(),day:t.getDate()};o.info("default date is",t),c(n)},t.returnTimeCur=function(){var e=new Date,t=void 0,n=void 0,r=e.getHours(),a=e.getMinutes()+15;return t=a>30?23===r?0:r+1:r,n=(a>60?a-60:a)>30?0:30,coreConf.changeStartTimeHour(t),coreConf.changeStartTimeMin(n),t=parseInt(t)<10?"0"+t:""+t,n=parseInt(n)<10?"0"+n:""+n,t+":"+n},t.resetDefaultValue=function(){var e=window.getDefaultTimeZone(constant.TIME_ZONE_FLAG),t=$getState(),n=t.conf.isCreateMeetingPasswordDefault;coreConf.getDefaultDate(),$dispatch(coreUi.changeBookConfSubject("")),$dispatch(coreUi.updateTimeZone(e)),$dispatch(coreUi.updateConfLen([1,0])),coreConf.returnTimeCur(),$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),coreUi.clearSaveSelectBoxText(),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0)),$dispatch(coreUi.changeCreateMeetingPassword(n)),$dispatch(coreUi.changeConfAcsNum("")),$dispatch(coreUi.changeConfAcsId("")),coreConf.toggleChangeConfAcsPas(""),$dispatch(coreUi.updateStartTimeMobile("")),$dispatch(coreUi.meetingTypeValue(0))},t.resetBookConfValue=function(){var e=window.getDefaultTimeZone(constant.TIME_ZONE_FLAG),t=$getState(),n=t.conf,r=n.isCreateMeetingPasswordDefault,a=n.vmrConfResult;coreConf.getDefaultDate(),$dispatch(coreUi.changeBookConfSubject("")),$dispatch(coreUi.updateTimeZone(e)),$dispatch(coreUi.updateConfLen([1,0])),coreConf.returnTimeCur(),$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),coreUi.clearSaveSelectBoxText(),$dispatch(coreUi.changeCreateMeetingPassword(r)),$dispatch(coreUi.setUseFixedConfIDState(!0)),$dispatch(coreUi.changeIsBookSendSMS(!0)),$dispatch(coreUi.changeIsBookSendEmail(!0)),$dispatch(coreUi.changeCurConfIDItem({idType:1,vmrId:a.vmr_id,confId:a.conf_id,confSubject:"",maxParties:0}))},t.resetCreateConfValue=function(){var e=$getState(),t=e.conf,n=t.isCreateMeetingPasswordDefault,r=(t.vmrConfResult,t.curCreateConfIDItem),a=t.isCreateUseFixedConfID;$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),$dispatch(coreUi.changeCreateMeetingPassword(n)),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0)),$dispatch(coreUi.setCreateUseFixedConfIDState(a)),$dispatch(coreUi.changeCurCreateConfIDItem({idType:r.idType,vmrId:r.vmrId,confId:r.confId,confSubject:r.confSubject,maxParties:r.maxParties}))},t.resetJoinConfValue=function(){$dispatch(coreUi.changeConfAcsNum("")),$dispatch(coreUi.changeConfAcsId("")),coreConf.toggleChangeConfAcsPas(""),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0))},t.currentAccountIsRole=function(e,t){var n=$getState(),r=n.myInfo,a=r.bind_no,o=r.account,i=e.filter(function(e){return e.acount_id===a})[0];return!(!i||1!==i.role)||t===o},t.getAttendee=function(e){var t=[].concat((0,a.default)(e));return t.map(function(e,n){if(1===e.role){var r={acount_id:e.acount_id||"",email:"",is_mute:0,name:e.name||"",role:1,sms:"",type:0,number:e.number||"",user_account:e.user_account||"",user_uuid:e.user_uuid||""};t.splice(n,1),t.unshift(r)}}),t}},360:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.storeAppCache=t.recoverAppCache=void 0;var a=n(127),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(361),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d={myInfo:!0,menu:!0},p=(t.recoverAppCache=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.sysLogger.info("[ recoverAppCache ]"),e.next=3,l.get("reduxState");case 3:if(!(t=e.sent)){e.next=12;break}window.sysLogger.info("recoverAppCache 1");try{for(n in t)t.hasOwnProperty(n)&&d[n]&&($getState()[n]=t[n],"myInfo"===n&&(t[n].languageCode=window.langcode))}catch(e){window.sysLogger.info("recoverAppCache error")}return window.sysLogger.info("recoverAppCache 2"),window.sysLogger.info("[ recoverAppCache ] success"),e.abrupt("return",!0);case 12:return window.sysLogger.info("[ recoverAppCache ] no app cache"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.storeAppCache=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.sysLogger.info("[ storeAppCache ]"),t=$getState(),n={},r=p(t);for(a in r)r.hasOwnProperty(a)&&d[a]&&(n[a]=r[a]);return e.next=6,l.set("reduxState",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=(0,o.default)({},e);return t&&t.myInfo&&(t.myInfo.statusDesc=""),t&&t.setting&&(t.setting.shouldResetTray=!0),t&&t.menu&&(t.menu.rightMenuStyle.left="-9999px",t.menu.rightMenuStyle.top="-9999px"),t})},361:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.set=t.get=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(136),l=coreLogger.getLogger("account")("appCache"),d=t.get=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return r=e.sent,e.next=5,coreDb.queryLoginSetting({key:n?t:r.account+"_"+t});case 5:return a=e.sent,e.prev=6,e.abrupt("return",JSON.parse(a.value));case 10:e.prev=10,e.t0=e.catch(6),l.error("query login sertting parse error",e.t0);case 13:case"end":return e.stop()}},e,void 0,[[6,10]])}));return function(t,n){return e.apply(this,arguments)}}(),p=t.set=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return a=e.sent,e.next=5,coreDb.saveLoginSetting({key:r?t:a.account+"_"+t,value:(0,o.default)(n)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),h=t.remove=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return r=e.sent,e.next=5,coreDb.saveLoginSetting({key:n?t:r.account+"_"+t,value:""});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();window.appCache={get:d,set:p,remove:h}},362:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMiddleEndApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=n(136),m=n(412),_=r(m),C=coreLogger.getLogger("login")("MiddleEnd"),w=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.requestIDVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("requestIDVerificationCode"),e.next=3,(0,v.getLoginModel)();case 3:return n=e.sent,a=n.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/v1/users/login/"+t+"/code",c=constant.REQUEST_TYPE.GET,e.abrupt("return",r._sendSyncRequest({url:s,type:c}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.requestTenantUserList=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,s,c,u=t.phoneNumber,f=t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("requestTenantUserList"),e.next=3,(0,v.getLoginModel)();case 3:return n=e.sent,a=n.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/wemiddle/api/v1/mdmservice/pusers?phoneNumber="+u+"&vercode="+f,c=constant.REQUEST_TYPE.GET,e.abrupt("return",r._sendSyncRequest({url:s,type:c}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.ssoLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,s,c,u,f,l,d,p,h,g=t.loginName,m=t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(n=e.sent,a=n.password,window.isHubEnv){e.next=11;break}return e.next=7,coreSecurity.getPasswordManager();case 7:return s=e.sent,e.next=10,s.getPassword("password");case 10:a=e.sent;case 11:return a=encodeURIComponent(a),r.loginName=g,r.tenantid=m,C.info("ssoLogin"),e.next=17,(0,v.getLoginModel)();case 17:return c=e.sent,u=c.middleEndAddress,f="WeLink-meeting",window.isHubEnv&&(u="cloudlinkworkplace-api.huaweicloud.com",f=constant.USER_AGENT.MAXHUB_WORKPLACE),l="https://"+u+"/mcloud/mag/LoginAutoReg",C.info("ssoLogin user_agent=",f),d={"User-Agent":f,"Content-Type":"application/x-www-form-urlencoded"},p="loginName="+g+"&password="+a+"&publicKeyFlag=df",isNullOrEmpty(m)||(p+="&tenantid="+m),h=constant.REQUEST_TYPE.POST,e.abrupt("return",r._sendSyncRequest({url:l,type:h,header:d,body:p}).then(function(e){if(e.result){var t=e.recv_body.refresh_expires_in,n=isNullOrEmpty(t)?7200:parseInt(t);r.startRefreshMiddleEndToken(.5*n)}return e}));case 28:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r._sendSyncRequest=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreHttp.sendSyncRequest(t);case 2:if(!(n=e.sent)||128!==n.result){e.next=12;break}return e.next=6,coreAccount.switchProxy();case 6:return e.next=8,coreHttp.sendSyncRequest(t);case 8:if(0===(n=e.sent)){e.next=12;break}return e.next=12,coreAccount.resetProxy();case 12:return e.abrupt("return",r.dealWithRequestResult(n));case 13:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startRefreshMiddleEndToken=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.stopRefreshMiddleEndToken(),C.info("start refresh middle-end [token], interval:",t),r.refreshTokenTimer=setInterval((0,s.default)(o.default.mark(function e(){var t,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ssoLogin({loginName:r.loginName,tenantid:r.tenantid});case 2:if(t=e.sent,!t.result||!t.recv_body.access_token){e.next=14;break}return e.next=6,(0,v.getLoginModel)();case 6:return n=e.sent,n.user_ticket=t.recv_body.access_token||n.user_ticket,n.crypt_token=t.recv_body.crypt_token||n.crypt_token,C.info("refresh um crypttoken"),e.next=12,coreTup.getOfflineFileInstance();case 12:a=e.sent,a.refreshToken(n.crypt_token);case 14:case"end":return e.stop()}},e,i)})),1e3*t);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.stopRefreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("stop refresh middle-end [token]"),r.refreshTokenTimer&&(clearInterval(r.refreshTokenTimer),r.refreshTokenTimer=null);case 2:case"end":return e.stop()}},e,i)})),r.requestOauthUrl=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,a,s,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=c.company,f=void 0===u?"":u,l=c.account,d=void 0===l?"":l,p=c.clientType,h=void 0===p?1:p;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("requestOauthUrl"),e.next=3,(0,v.getLoginModel)();case 3:return t=e.sent,n=t.serverAddress,a="https://"+n+"/rest/usg/sso/v1/auth/authorizeInfo?domain="+f+"&username="+d+"&clientType="+h,s=constant.REQUEST_TYPE.GET,e.abrupt("return",coreHttp.sendSyncRequest({url:a,type:s}).then(function(e){return r.dealWithCloudPortalOauth(e)}));case 8:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.oAuthLogin=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.domain,a=n.userTicket,s=n.serverAddress,c=n.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("oAuthLogin"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,t.serverAddress=s,t.serverPort=c,t.domain=r,t.userTicket=a,t.authType=1,coreAccount.login({});case 10:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.getUrlHost=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=2;break}return e.abrupt("return","");case 2:return n=document.createElement("a"),n.href=t,e.abrupt("return",n.hostname||t);case 5:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.dealWithRequestResult=function(e){var t=0,n="",r=!1,a={};try{if(0===e.result)switch(e.param.resp_code){case 200:a=JSON.parse(e.param.recv_body),t=a.code||a.errorCode||0;break;case 302:t=302;break;default:t=-1}else t=-1;C.info("dealWithRequestResult: resp_code="+(e.param&&e.param.resp_code)+",result="+e.result)}catch(e){C.error("dealWithRequestResult",e.toString()),t=-1}switch(parseInt(t)){case-1:n=language.CALL_CALLING_FAILED;break;case 0:case 200:case 302:r=!0;break;case 1024:n=language.VERIFICATION_CODE_ERROR_SERVER;break;case 1101:n=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY;break;case 1103:n=language.LOGIN_USERPWD_ERROR;break;case 1146:n=language.LOGIN_ERR_ACCOUNT_LOCKED;break;case 2e3:case 2030:n=language.VERIFICATION_CODE_ERROR_SERVER;break;case 3005:n=language.VERIFICATION_CODE_ERROR_FREQUENTLY;break;case 3007:n=language.VERIFICATION_CODE_ERROR_SMS_FAILED;break;case 3010:n=language.VERIFICATION_CODE_ERROR_NUMBER_INCORRECT;break;case 3008:n=language.VERIFICATION_CODE_ERROR;break;case 10005:n=language.VERIFICATION_CODE_ERROR_NUMBER_DISABLED;break;case 10008:n=language.LOGIN_E_ERR_USER_NOT_EXISTS;break;default:n=language.CALL_CALLING_FAILED}return C.info("dealWithRequestResult: code="+t+",message="+(a.message||a.errorMessage)),{code:t,result:r,message:n,recv_body:a}},r.dealWithCloudPortalOauth=function(e){var t=0,n="",r=!1,a={};try{if(0===e.result)switch(e.param.resp_code){case 200:a=JSON.parse(e.param.recv_body),t=parseInt(a.returnCode)||0;break;case 302:t=302;break;default:t=-1}else t=-1;C.info("dealWithCloudPortalOauth: resp_code="+(e.param&&e.param.resp_code)+",result="+e.result)}catch(e){C.error("dealWithCloudPortalOauth",e.toString()),t=-1}switch(t){case-1:n=language.CALL_CALLING_FAILED;break;case 0:n=language.EADDR_SUCCESS,r=!0;break;case 1:n=language.REQUEST_ERROR;break;case 2:n=language.INNER_ERROR;break;case 3:n=language.WITHDRAW_PARAMETER_ERROR;break;case 4:n=language.REQUEST_ILLEGAL;break;case 5:n=language.FORGET_PWD_E_ERR_BAD_ACCESS_DURING_UPGRADE;break;case 206010014:case 206010023:n=language.COMPANY_NO_EXIT;break;case 20603e4:n=language.USER_DOES_NOT_EXIST;break;default:n=language.CALL_CALLING_FAILED}return C.info("dealWithCloudPortalOauth: code="+t+",message="+a.returnMessage),{code:t,result:r,message:n,recv_body:a}},a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(_.default),S=void 0;t.getMiddleEndApi=function(){return isNullOrEmpty(S)&&(S=new w),S}},363:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(){k.info("userClick  showSettingMenu  login setting");var e=window.remote.Menu,t=[{label:language.MOBILE_BASIC_SETTINGS,type:"normal",click:i},{label:language.COLLECT_LOG_FILES,type:"normal",click:s},{label:language.SOFT_COPYRIGHT_DESCRIPTION,type:"normal",click:c},{label:language.PRIVACY_TITLE,type:"normal",click:u}];window.CLIENTCONFIG.ISWIN&&t.push({label:language.NET_DETECT,type:"normal",click:S}),e.buildFromTemplate(t).popup(remote.getCurrentWindow())}function i(){k.info("goToLoginSetting"),window.goRoute("login/loginSetting")}function s(){k.info("collectLogsAndOpen"),coreLog.collectLogsAndOpen()}function c(){k.info("goToLoginCopyright"),window.goRoute("login/LoginCopyright")}function u(){k.info("goToLoginPrivacy"),window.goRoute("login/LoginPrivacy")}function f(){k.info("userClick click minimize btn"),appService.minimize()}function l(e,t){(0,L.getSyncLoginModel)().loginDisable||x.changeLoginInfo((0,g.default)({},e,t))}function d(e,t){t.target&&l(e,t.target.value||"")}function p(e){var t=$getState(),n=t.common,r=n.isShowModal,a=n.isShowNotifyModal,o=t.setting.isShowChangePassword,i=t.dialogModal.isShowDialog;e.altKey&&115===e.keyCode&&((0,y.getCloseAppWays)(),reactStopPropagation(e),e.preventDefault()),a||r||i||13!==e.keyCode||"login"!==window.getRoute()||o||w()}Object.defineProperty(t,"__esModule",{value:!0}),t.removeKeyDownListener=t.addKeyDownListener=t.forgetPwd=t.noLoginJoinConference=t.doLogin=void 0;var h=n(131),g=a(h),v=n(1),m=a(v),_=n(2),C=a(_),w=t.doLogin=function(){var e=(0,C.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("userClick  doLogin  login btn"),e.next=3,(0,L.getLoginModel)();case 3:if(t=e.sent,!(n=t.loginDisable)){e.next=8;break}return k.info("doLogin loginDisable",n),e.abrupt("return");case 8:return e.next=10,E.checkLoginInfo();case 10:if(r=e.sent,document.activeElement.blur(),!r){e.next=19;break}return t.authType=0,e.next=16,b.login();case 16:return e.abrupt("return",e.sent);case 19:a=language.ERROR_ACCOUNT_PWD,window.isHubEnv?t.maxhubLoginError={serverType:0,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR}:window.alert(language.ERROR_ACCOUNT_PWD);case 21:throw"";case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,C.default)(m.default.mark(function e(){var t;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.initNetDetect)();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:window.goRoute("login/NetDetection");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.noLoginJoinConference=function(){var e=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("userClick noLoginJoinConference  login page join conf"),e.next=3,(0,T.getNickName)();case 3:return e.next=5,coreConf.getConfInfoFromDb();case 5:return e.next=7,coreConf.changeConfInfoCardState(!1);case 7:window.goRoute("login/noLoginJoinConference");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.forgetPwd=function(){var e=(0,C.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("userCLick  forgetPwd  login page forget xx"),e.next=3,(0,L.getLoginModel)();case 3:t=e.sent,n=t.serverAddress,r=t.serverPort,a=n+":"+r,x.cannotLogin(a);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.addKeyDownListener=function(){var e=(0,C.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R=t,document.addEventListener("keydown",p);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.removeKeyDownListener=function(){var e=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R=Noop,document.removeEventListener("keydown",p);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.showSettingMenu=o,t.miniApp=f,t.valueChange=l,t.inputValueChange=d;var I=n(311),E=r(I),N=n(185),b=r(N),T=n(229),y=n(312),O=n(167),x=r(O),A=n(365),L=n(165),k=coreLogger.getLogger("logic")("login/uiController"),R=Noop},364:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkStatusOptions=t.SaveSigInfoAndQuit=t.saveUserInfo=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(136),u=coreLogger.getLogger("logic")("main/myInfo"),f=(t.saveUserInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.info("saveUserInfo"),e.abrupt("return",f(t));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.SaveSigInfoAndQuit=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.info("userClick  tap myInfo signature save btn"),f(t),window.history.back();case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getMyInfo)();case 2:if(n=e.sent,t!==n.signature){e.next=5;break}return e.abrupt("return");case 5:return r=["account","staff_no","name","native_name","q_pin_yin","gender","birthday","age","bind_no","mobile","home_phone","office_phone","short_phone","other_phone","voip","ip_phone","fax","email","website","signature","desc","address","image_id","postcode","is_security","title","dept_id","dept_name_en","dept_name_cn","image_sync_time","old_account","state","modify_time","other_phone2","other_mobiles"],a={},r.forEach(function(e){a[e]=isNullOrEmpty(n[e])?"":n[e]}),a.signature=t,e.next=11,(0,c.getLoginModel)();case 11:if(i=e.sent,!(s=i.isSupportAS)){e.next=19;break}return e.next=16,coreContact.uploadUserInfo({signature:t});case 16:e.t0=e.sent,e.next=22;break;case 19:return e.next=21,coreIm.setUserInfo(a);case 21:e.t0=e.sent;case 22:u=e.t0,(u&&u.result===constant.ERROR_CODE.Success||s&&u)&&(n.signature=t,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME&&coreContact.setSign(t));case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.checkStatusOptions=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getMyInfo)();case 2:return t=e.sent,e.next=5,coreDb.queryUserConfig({key:"CustomStatus"});case 5:n=e.sent,isNullOrEmpty(n)||(r=JSON.parse(n.value),t.statusOptions=r,u.info("check Status Options from storage sucess!"));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},365:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleClearData=t.startDetect=t.stopDetect=t.handleDetectDataNotify=t.initNetDetect=t.updataBtns=void 0;var a=n(123),o=r(a),i=n(69),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(261),p=n(261),h=coreLogger.getLogger("logic")("login/loginNetDetect"),g=t.updataBtns=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.BTN_STATUS.START,n=!1,r={cancel:{visible:!1,disabled:!1,class:"btn-cancel"},detect:{visible:!1,disabled:!1,class:"btn-detect"},retry:{visible:!1,disabled:!1,class:"btn-detect"},stop:{visible:!1,disabled:!1,class:"btn-stop"},done:{visible:!1,disabled:!1,class:"btn-detect"}};switch(t){case constant.BTN_STATUS.START:r.cancel.visible=!0,r.cancel.disabled=!1,r.detect.visible=!0,r.detect.disabled=!e,n=!0;break;case constant.BTN_STATUS.DETECTING:r.cancel.visible=!0,r.cancel.disabled=!0,r.stop.visible=!0,r.stop.disabled=!1,n=!0;break;case constant.BTN_STATUS.DONE:r.retry.visible=!0,r.retry.disabled=!1,r.done.visible=!0,r.done.disabled=!1,n=!0}n&&$dispatch(coreUi.setDetectBtns(r))},v=(t.initNetDetect=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("initNetDetect"),e.next=3,(0,d.detectInit)();case 3:if(t=e.sent,0===t.result){e.next=10;break}return h.info("initNetDetect detectInitRet ERR = "+t.result),e.next=8,(0,p.detectUnInit)();case 8:return I(t.result),e.abrupt("return",!1);case 10:return e.next=12,(0,d.setCmptEvent)({OnDetectDataNotify:m});case 12:return n={server_port:10100},e.next=15,(0,d.detectStartServer)(n);case 15:if(r=e.sent,0===r.result){e.next=24;break}return h.info("initNetDetect detectStartServerRet ERR = "+r.result),e.next=20,(0,p.detectStopServer)();case 20:return e.next=22,(0,p.detectUnInit)();case 22:return I(r.result,n.server_port),e.abrupt("return",!1);case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),-1),m=t.handleDetectDataNotify=function(e){h.info("handleDetectDataNotify data = "+(0,s.default)(e));var t=e.param,n=t.avg_delay_time,r=t.avg_jitter_time,a=t.avg_recv_loss_rate,o=t.avg_send_loss_rate,i=t.current_level,c=t.max_delay_time,u=t.max_jitter_time,f=t.max_recv_cont_loss_pkts,l=t.max_recv_loss_rate,d=t.max_send_cont_loss_pkts,p=t.max_send_loss_rate,m=(t.total_level,t.total_recv_pkt_loss_seconds),w=t.total_send_pkt_loss_seconds,S=$getState().common,I=S.curResLevel,E=S.ipDetectResList,N=S.netdetectMode,b=S.bandwidth,T=S.maxDelay,y=S.maxLoss,O=S.maxContinuousLoss,x=S.maxJitter,A=[].concat(E),L=N===constant.NET_DETECT_MODE.ADVANCED_MODE;if(L){c&&c>T&&(T=c,$dispatch(coreUi.setMaxDelay(T))),u&&u>x&&(x=u,$dispatch(coreUi.setMaxJitter(x)));var k=Math.max(d,f);k&&k>O&&(O=k,$dispatch(coreUi.setMaxContinuousLoss(O)));var R=Math.max(l,p);R&&R>y&&(y=R,$dispatch(coreUi.setMaxLoss(y)))}var M="  "+language.CALL_MEDIA_INFO_LOST+"(%):"+language.NET_DETECT_INFO_AVG+Math.max(a,o)+", "+language.NET_DETECT_INFO_MAX+Math.max(l,p)+" "+(L?"("+y+")":"")+"\n  "+language.LANG_QOS_DELAY+"  (ms):"+language.NET_DETECT_INFO_AVG+r+", "+language.NET_DETECT_INFO_MAX+u+" "+(L?"("+x+")":"")+"\n  "+language.LANG_QOS_JIITER+"  (ms):"+language.NET_DETECT_INFO_AVG+n+", "+language.NET_DETECT_INFO_MAX+c+" "+(L?"("+T+")":"")+"\n  "+language.NET_DETECT_INFO_MAX_CONTINUOUS_LOSS+": "+Math.max(f,d)+" "+(L?"("+O+")":"")+"\n  "+language.NET_DETECT_INFO_TOTAL_LOSS_CNT+": "+Math.max(m,w);if(N===constant.NET_DETECT_MODE.ADVANCED_MODE)clearTimeout(v),A[0].col=1,A[0].level=b,A[0].cont=M,$dispatch(coreUi.setIpDetectResList(A)),C=100,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+C+"%)")),v=setTimeout(function(){h.info("timeoutTimer curResLevel = "+I),_(!0)},2e4);else if(++I===i){clearTimeout(v),$dispatch(coreUi.setCurResLevel(i));for(var D=0;D<A.length;D++)if(A[D].level===i){if(A[D].cont===language.NET_DETECT_INFO_NOT_DETECT)return void h.info("停止检测后收到数据");5!==i&&(A[D+1].cont=language.NET_DETECT_INFO_DETECTING+"...",A[D+1].col=1),A[D].cont=M,A[D].col=1;break}$dispatch(coreUi.setIpDetectResList(A)),5===i?(g(!0,constant.BTN_STATUS.DONE),$dispatch(coreUi.setDisableIPInput(!1)),$dispatch(coreUi.setipDetectTipCont(language.PROMPT_OPEN_NETDETECT))):v=setTimeout(function(){h.info("timeoutTimer curResLevel = "+I),_(!0)},2e4)}},_=t.stopDetect=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("stopDetect detectStopClient"),t=$getState().common,n=t.curResLevel,r=t.ipDetectResList,a=t.netdetectMode,o=[].concat(r),clearTimeout(v),clearInterval(w),a!==constant.NET_DETECT_MODE.ADVANCED_MODE){e.next=11;break}return e.next=8,(0,p.detectStopClientContinue)();case 8:o[0].level!==n&&(o[0].cont=language.NET_DETECT_INFO_NOT_DETECT,o[0].col=0),e.next=15;break;case 11:if(a!==constant.NET_DETECT_MODE.NORMAL_MODE){e.next=15;break}return e.next=14,(0,p.detectStopClient)();case 14:for(i=0;i<o.length;i++)s&&i===n?(o[i].cont=language.NET_DETECT_INFO_TIME_OUT,o[i].col=2):i>=n&&(o[i].cont=language.NET_DETECT_INFO_NOT_DETECT,o[i].col=0);case 15:$dispatch(coreUi.setIpDetectResList(o)),g(!0,constant.BTN_STATUS.START),$dispatch(coreUi.setipDetectTipCont(language.PROMPT_OPEN_NETDETECT)),$dispatch(coreUi.setDisableIPInput(!1));case 19:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),C=0,w=-1,S=(t.startDetect=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,i,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().common,n=t.ipValue,r=t.packetLen,a=t.bandwidth,i=t.netdetectMode,c={str_server_ip:n,server_port:10100,client_port:10102},i===constant.NET_DETECT_MODE.ADVANCED_MODE&&(c=(0,o.default)(c,{pkt_len:parseInt(r),level:parseInt(a)})),h.info("startDetect param = "+(0,s.default)(c)),f=-1,i!==constant.NET_DETECT_MODE.ADVANCED_MODE){e.next=11;break}return e.next=8,(0,p.detectStartClientContinue)(c);case 8:f=e.sent,e.next=15;break;case 11:if(i!==constant.NET_DETECT_MODE.NORMAL_MODE){e.next=15;break}return e.next=14,(0,p.detectStartClient)(c);case 14:f=e.sent;case 15:if(0===f.result){e.next=22;break}return h.info("startDetect detectStartClientRet ERR = "+f.result),e.next=19,(0,p.detectStopClient)();case 19:return l=c.client_port,I(f.result,l+"|"+(l+1)+"|"+(l+2)),e.abrupt("return",!1);case 22:clearTimeout(v),v=setTimeout(function(){var e=$getState().common.curResLevel;h.info("timeoutTimer curResLevel = "+e),0===e&&_(!0)},2e4),i===constant.NET_DETECT_MODE.ADVANCED_MODE?($dispatch(coreUi.setMaxDelay(0)),$dispatch(coreUi.setMaxJitter(0)),$dispatch(coreUi.setMaxLoss(0)),$dispatch(coreUi.setMaxContinuousLoss(0)),C=0,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+C+"%)")),w=setInterval(function(){C<99?$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+ ++C+"%)")):C>=100&&(C=0,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+ ++C+"%)")))},100)):i===constant.NET_DETECT_MODE.NORMAL_MODE&&$dispatch(coreUi.setipDetectTipCont("")),g(!0,constant.BTN_STATUS.DETECTING),$dispatch(coreUi.setCurResLevel(0)),$dispatch(coreUi.setIpDetectResList(S())),$dispatch(coreUi.setDisableIPInput(!0)),$dispatch(coreUi.setMaxDelay(0)),$dispatch(coreUi.setMaxLoss(0));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState().common,t=e.netdetectMode,n=e.bandwidth;if(t===constant.NET_DETECT_MODE.ADVANCED_MODE){var r=1===n?"0.5M:":2===n?"1M:":3===n?"1.5M:":4===n?"2M:":5===n?"4M:":"8M:",a=n+1;return $dispatch(coreUi.setCurResLevel(n)),[{title:r,cont:"",col:1,level:a}]}for(var o=[],i=1;i<6;i++){var s="",c=language.NET_DETECT_INFO_PENDING_DETECT,u=i,f=0;5!==i?1===i?(s="512 Kbit/s:",c=language.NET_DETECT_INFO_DETECTING+"...",f=1):s=512*i+" Kbit/s:":s="4096 Kbit/s:",o.push({title:s,cont:c,col:f,level:u})}return o}),I=(t.handleClearData=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.detectStopClient)();case 2:return e.next=4,(0,p.detectStopServer)();case 4:return e.next=6,(0,p.detectUnInit)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";switch(e){case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_UNINIT_ERROR:n=language.DETECT_UNINIT_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_THREAD_ERROR:n=language.DETECT_THREAD_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_STARTED_ERROR:n=language.DETECT_STARTED_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_ERROR:n=language.DETECT_SOCKET_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_CONN_ERROR:n=language.DETECT_SOCKET_CONN_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_BIND_ERROR:n=language.DETECT_SOCKET_BIND_ERROR_INFO+t;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_TIMEOUT_ERROR:n=language.DETECT_TIMEOUT_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SRVBUSY_ERROR:n=language.DETECT_SRVBUSY_ERROR_INFO;break;default:n=language.DETECT_THREAD_ERROR_DEFOULT}window.alert(n)})},394:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return a.exec(e).slice(1)};t.resolve=function(){for(var t="",a=!1,o=arguments.length-1;o>=-1&&!a;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,a="/"===i.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+t||"."},t.normalize=function(e){var a=t.isAbsolute(e),o="/"===i(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!a).join("/"),e||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=r(e.split("/")),o=r(n.split("/")),i=Math.min(a.length,o.length),s=i,c=0;c<i;c++)if(a[c]!==o[c]){s=c;break}for(var u=[],c=s;c<a.length;c++)u.push("..");return u=u.concat(o.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(148))},403:function(e,t,n){e.exports={default:n(696),__esModule:!0}},404:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"getDeployMode",value:function(){return $getState().login.deployMode}},{key:"getIsUseITBuried",value:function(){return!!window.CLIENTCONFIG.ISBIGWIN}},{key:"getInterfaceToOneKeyEnterConf",value:function(){return e.getDeployMode()===constant.MEETING_NET_TYPE.MEDIAX_MEETING}},{key:"getInterfaceToStartVipCall",value:function(){return!(!window.CLIENTCONFIG.ISBIGWIN||isNullOrEmpty(window.confVip))}},{key:"getEnterDataConfInAdvance",value:function(){return!!(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.CLIENTCONFIG.ISBIGWIN&&window.isSupportiDo)}},{key:"changeMediaTypeToAudioData",value:function(){return!(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN||!1!==window.linkSmcIsVideo&&!1!==window.bigConfIsVideo)}}]),e}();t.default=c},405:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.refreshToken=t.confctrlInitAtomic=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=n(186),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=coreLogger.getLogger("conf")("ctrlinit"),p=function(){var e=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.confCtrlLoaded=!0,e.next=3,s.default.all([_(),C(),w(),v()]);case 3:return e.next=5,S();case 5:return e.next=7,I();case 7:return e.next=9,g();case 9:return m(),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=new coreCommon.AtomicAction("confctrlInit",p);t.confctrlInitAtomic=h;var g=(t.refreshToken=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("refresh[Token] tk length = "+desensitive(t.data.length)),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.setToken(t.data);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.stgAccount,r=t.stgUri,a=t.fireWallMode,i=t.deployMode,s="",e.next=10,coreSecurity.getPasswordManager();case 10:return c=e.sent,e.next=13,c.getPassword("stgPassword");case 13:return u=e.sent,r&&(s=r+","+n+","+u),d.info("initDataConf deployMode = "+i+",fireWallMode = "+a+",stgURL length = "+r.length),e.next=18,l.initDataConf(i,a,s);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),v=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=11;break}return e.next=3,coreAccount.getLoginModel();case 3:return t=e.sent,n=t.authToken,d.info("setInit[Token], tk length = "+desensitive(n.length)),e.next=8,coreTup.getConfCtrlInstance();case 8:return r=e.sent,e.next=11,r.setToken(n);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login.isSupportCACertCheck,e.next=3,coreAccount.getLoginModel();case 3:if(n=e.sent,r=n.isSupportAS,d.info("confCertificateCheck isSupportCACertCheck = "+t+",isSupportAS = "+r),r&&t){e.next=9;break}return d.info("no need set cert for confctrl"),e.abrupt("return");case 9:return e.next=11,coreTup.getConfCtrlInstance();case 11:return a=e.sent,i=window.EXEC_PATH,s={ca_cert_path:i,client_cert_path:"",client_key_path:"",client_privkey_pwd:"",verify_mode:1,verify_server_mode:0},e.next=16,a.confCertificateCheck(s);case 16:c=e.sent,0!==c.result?d.info("conf certificate check fail"):d.info("conf certificate check success");case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.deployMode,r=t.isSupportAS,a=window.isSupportiDo?1:0,d.info("setInitParam, deployMode = "+n+",confctrl_ido = "+a),i={init_param:{wait_msgp_thread:1,batch_update:0,connect_call:1,confctrl_ido:a,save_participant_list:n===constant.MEETING_NET_TYPE.MEDIAX_MEETING?1:0,use_rest_and_ido:r?1:0}},e.next=10,coreTup.getConfCtrlInstance();case 10:return s=e.sent,e.next=13,s.confCtrlInit(i);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.deployMode,d.info("setConfEnvType, deployMode = "+n),r=n===constant.MEETING_NET_TYPE.SMC_MEETING?4:3,e.next=8,coreTup.getConfCtrlInstance();case 8:return a=e.sent,e.next=11,a.setConfEnvType(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,f,l,p,h;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.isSupportAS,r=t.serverUportalAddress,a=t.serverUportalPort,i=t.asAddress,s=t.tempsipserverAddress,c=t.sipLoginOnly,u=t.confctrlUri,f="",l="",p="",c&&!n?(d.info("set sipLoginOnly address to use"),f=s,p=f,l=8443):n&&!isNullOrEmpty(i)?(d.info("set asAddress to use"),f=i.split(":")[0],l=i.split(":")[1],p=isNullOrEmpty(u)?f:u):(d.info("set medixAddress to use"),f=r,l=a,p=f),d.info("conf ctrl init, isSupportAS = "+n+",serverUportalAddress = "+f+",confctrlAddr = "+p+",serverPort = "+l+",asAddress = "+i+",sipLoginOnly = "+c),e.next=11,coreTup.getConfCtrlInstance();case 11:return h=e.sent,e.next=14,h.setServerParams(f,p,l);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.isSupportiDo){e.next=3;break}return d.info("setLocalConfName is no need in rest"),e.abrupt("return");case 3:return e.next=5,coreAccount.getLoginModel();case 5:if(t=e.sent,n=t.sipLoginOnly,r=t.account,a="",!n){e.next=13;break}a=$getState().login.tempSipNick,e.next=17;break;case 13:return e.next=15,coreContact.getContactByAccount(r);case 15:i=e.sent,a=getContactName(i);case 17:return s="",isNullOrEmpty(a)||(s=a.length<=2?a.substr(0,1)+"**":a.substr(0,1)+"**"+a.substr(-1)),d.info("setLocalConfName, sipLoginOnly = "+n+",userName = "+s),e.next=22,coreTup.getConfCtrlInstance();case 22:c=e.sent,c.setLocalConfName(a);case 24:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.isSupportProxy,r=t.proxyAddress,a=t.proxyPort,i=t.proxyAccount,e.next=3,coreSecurity.getPasswordManager();case 3:return s=e.sent,e.next=6,s.getPassword("proxyPassword");case 6:return c=e.sent,n||(d.info("is not support proxy"),r="",a="0",i="",c=""),u={port:parseInt(a),uri:r,user_name:i,password:c},d.info("proxy_param.uri = "+u.uri+",proxy_param.port = "+u.port),e.next=12,coreTup.getConfCtrlInstance();case 12:f=e.sent,f.confCtrlSetProxy(u);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setBleDeviceList=function(e){$dispatch(coreUi.changeBleDeviceList(e))},t.setPairDeviceInfo=function(e){$dispatch(coreUi.changePairDeviceInfo(e))},t.cleanPairDeviceInfo=function(){$dispatch(coreUi.clearPairDeviceInfo())},t.setAutoPairSwitch=function(e){$dispatch(coreUi.changeAutoPairSwitch(e))},t.setPairedDeviceInfo=function(e){$dispatch(coreUi.changePairedDeviceInfo(e))},t.setPairType=function(e){$dispatch(coreUi.changePairType(e))},t.setIsInPairConf=function(e){$dispatch(coreUi.changeInPairConf(e))},t.setPairDeviceConfInfo=function(e){$dispatch(coreUi.changePairDeviceConfInfo(e))},t.setNearestDevice=function(e){$dispatch(coreUi.changeNearestDevice(e))},t.setPairConfInfo=function(e){$dispatch(coreUi.changePairConfInfo(e))}},407:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.loginToUportal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.refreshTokenCallback=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setLoginProxy=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.uportalAllonline=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.switchProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.resetProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},408:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handlesipconfinfo=t.setloginNotifyFunc=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=(coreLogger.getLogger("model")("model/callService/index"),t.setloginNotifyFunc=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:t=e.sent,t.setNotifyFunc(360474,c);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handlesipconfinfo=function(e){coreCommon.Observer.publish("TempSipConfInfo",e)})},409:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.startLoginDownLoadCaCert=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(3),u=r(c),f=n(142),l=r(f),d=n(2),p=r(d),h=coreLogger.getLogger("login")("caCert");t.startLoginDownLoadCaCert=function(){var e=(0,p.default)(o.default.mark(function e(t){var n,r,a,i,c,f,d,p=t.account,g=t.password,v=t.serverAddress,m=t.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("startLoginDownLoadCaCert port is:",m),h.info("startLoginDownLoadCaCert port type is:",void 0===m?"undefined":(0,l.default)(m)),m&&m instanceof String&&(m=parseInt(m)),n={auth_type:0,user_agent:window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC,user_tiket:"1",auth_info:{user_name:p,password:g},auth_server:{server_type:0,server_url:v,server_port:m,server_version:"V6R6C00"}},r=window.EXEC_PATH,a={file_path:r,server_port:m,server_addr:v},e.next=8,coreTup.getUportalInstance();case 8:return i=e.sent,c=new u.default(function(e,t){i.downLoadCaCert(a,n,function(t){h.info("download ca cert files, ret=",(0,s.default)(t)),e(t)})}),e.next=12,c;case 12:return f=e.sent,d=f.param,e.abrupt("return",d);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserConfigFromDB=void 0;var r=n(411),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.loadUserConfigFromDB=a.loadUserConfigFromDB},411:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserConfigFromDB=void 0;var a=n(1),o=r(a),i=n(123),s=r(i),c=n(2),u=r(c),f=n(136),l=coreLogger.getLogger("logic")("login");t.loadUserConfigFromDB=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,coreSecurity.getPasswordManager();case 3:n=e.sent,coreDb.queryUserConfigList({all:""}).then(function(e){var r={};-1===e.findIndex(function(e){return"confPageShowType"===e.key})&&(l.info("db can not find the value of confPageShowType"),$dispatch(coreUi.changeConfPageShowType(!1))),e.forEach(function(e){if(0===e.key.indexOf("Device.ComCfg")&&(r[e.key]=e.value,t++),0===e.key.indexOf("Device.UICfg")&&coreCwmp.dealWithUICfgParam({paramName:e.key,paramValue:e.value}),"CHRPassword"===e.key){var a=JSON.parse(e.value);a.cipher&&a.salt&&n.setCipherPassword(e.key,a.cipher,a.salt)}if("experienceConfInfo"===e.key){var o=JSON.parse(e.value);o.cipher&&o.salt&&n.setCipherPassword("experienceConfPwd",o.cipher,o.salt),$dispatch(coreUi.changeExperienceConfId(o.confid))}if("isRemindNotNotify"===e.key&&("true"===e.value?$dispatch(coreUi.isNotNotifyChangePassword(!0)):$dispatch(coreUi.isNotNotifyChangePassword(!1))),"isOpenShock"===e.key&&("true"===e.value?$dispatch(coreUi.bOpenShock(!0)):$dispatch(coreUi.bOpenShock(!1))),"isIMRecieveRing"===e.key&&("true"===e.value?$dispatch(coreUi.bIMRecieveRing(!0)):$dispatch(coreUi.bIMRecieveRing(!1))),"isCallCommingRing"===e.key&&("true"===e.value?$dispatch(coreUi.bCallCommingRing(!0)):$dispatch(coreUi.bCallCommingRing(!1))),"checkedLanguage"===e.key&&$dispatch(coreUi.languageChooseValue(2===parseInt(e.value)?1:parseInt(e.value))),"hasOpenPush"===e.key&&("true"===e.value?$dispatch(coreUi.changeHasOpenPush(!0)):$dispatch(coreUi.changeHasOpenPush(!1))),"cmdkey"===e.key){var i=JSON.parse(e.value);void 0!==i[0]&&void 0!==i[1]&&void 0!==i[0].RPCName&&void 0!==i[1].RPCName&&(i[0].RPCName="Download",i[1].RPCName="Upload",$dispatch(coreUi.updateCmdKey(i)))}if("isAutoCollectLogs"===e.key){var s=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.isAutoCollectLogs=s})}if("hasAllowCollectLogs"===e.key){var c=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.hasAllowCollectLogs=c})}if("isAutoAcceptConf"===e.key){var u=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.isAutoAcceptConf=u})}if("enableDoubleScreen"===e.key){var d=coreSetting.stringToBoolean(e.value);$dispatch(coreUi.changeEnableDoubleScreen(d))}"confPageShowType"===e.key&&(l.info("the value of confPageShowType is",e.value),$dispatch(coreUi.changeConfPageShowType(e.value)))}),t>0&&(0,s.default)(window.CLIENTCONFIG,r)});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},412:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),g=r(h),v=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.requestIDVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.requestTenantUserList=function(){var e=(0,s.default)(o.default.mark(function e(t){t.phoneNumber,t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.ssoLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){t.loginName,t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startRefreshMiddleEndToken=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.stopRefreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.requestOauthUrl=function(){var e=(0,s.default)(o.default.mark(function e(t){t.company,t.account;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.oAuthLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){t.domain,t.code,t.serverAddress,t.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getUrlHost=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=v},413:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=this,n=l.default.createElement("div",{className:"upgrade-window-content-text-wrap"},l.default.createElement("ul",{className:"upgrade-window-content-text-detail-ul"},l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_1),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_2),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_3)));window.confirm(n,"EMUI_COME_CALL_NOTIFY_TITLE",!0,{leftButton:language.BTN_ENSURE_TO_SKIP,rightButton:language.BTN_ENSURE_TO_SET}).then(function(){var n=(0,u.default)(s.default.mark(function n(r){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r.ret,a?(coreDb.saveLoginSetting({key:d,value:"1"}),window.webView.goToSystemCloudLinkSetting()):(e+=1,coreDb.saveLoginSetting({key:p,value:e.toString()}));case 2:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}())}function o(e){var t=this,n=l.default.createElement("div",{className:"upgrade-window-content-text-wrap"},l.default.createElement("ul",{className:"upgrade-window-content-text-detail-ul"},l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_1),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_2),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_3)));window.confirm(n,"EMUI_COME_CALL_NOTIFY_TITLE",!0,{leftButton:language.BTN_ENSURE_TO_SKIP,rightButton:language.BTN_ENSURE_TO_SET}).then(function(){var n=(0,u.default)(s.default.mark(function n(r){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r.ret,a?(coreDb.saveLoginSetting({key:d,value:"1"}),window.webView.goToSystemCloudLinkSetting()):(e+=1,coreDb.saveLoginSetting({key:p,value:e.toString()}));case 2:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}())}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHuaweiPhonePushSetting=t.DB_KEY_SKIP_SETTING_COUNT=t.DB_KEY_HAS_SHOW_SETTING_DIALOG=void 0;var i=n(1),s=r(i),c=n(2),u=r(c),f=n(118),l=r(f),d=t.DB_KEY_HAS_SHOW_SETTING_DIALOG="has_show_setting_dialog",p=t.DB_KEY_SKIP_SETTING_COUNT="has_skip_setting_count";t.checkHuaweiPhonePushSetting=function(){coreDb.queryLoginSetting({key:d}).then(function(e){var t="0";isNullOrEmpty(e)||!e.hasOwnProperty("key")||!e.hasOwnProperty("value")||isNullOrEmpty(e.key)||isNullOrEmpty(e.value)||(t=e.value),"1"!==t&&coreDb.queryLoginSetting({key:p}).then(function(e){var t=0;isNullOrEmpty(e)||isNullOrEmpty(e.key)||isNullOrEmpty(e.value)||(t=parseInt(e.value)),t<2&&appService.getEMUI().then(function(e){""!==e&&(e.includes("5.")?o(t):a(t))})})})}},414:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setCmptEvent=t.detectStopServer=t.detectStartServer=t.detectStopClientContinue=t.detectStartClientContinue=t.detectStopClient=t.detectStartClient=t.detectUnInit=t.detectInit=t.checkCertificateOverdue=t.verifyCertificate=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=coreLogger.getLogger("logic")("login/cmpt");t.verifyCertificate=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&c.info("verifyCertificate param error!"),e.next=3,coreTup.getCmptInstance();case 3:return n=e.sent,e.next=6,n.verifyCertificate(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.checkCertificateOverdue=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&c.info("checkCertificateOverdue param error!"),e.next=3,coreTup.getCmptInstance();case 3:return n=e.sent,e.next=6,n.checkCertificateOverdue(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectInit=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectInit();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectUnInit=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectUnInit();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartClient=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return n=e.sent,e.next=5,n.detectStartClient(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopClient=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopClient();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartClientContinue=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return n=e.sent,e.next=5,n.detectStartClientContinue(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopClientContinue=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopClientContinue();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartServer=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return n=e.sent,e.next=5,n.detectStartServer(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopServer=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopServer();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setCmptEvent=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return n=e.sent,e.next=5,n.setCmptEvent(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return-1===window.CLIENTCONFIG.MENU_LIST.findIndex(function(t){return t===e})?0:1},a=[{route:"recent",isShow:r("recent"),enabled:1,dataTestid:"recentinfo000123"},{route:"conference",isShow:r("conference"),enabled:1,dataTestid:"conferenceinfo000123"},{route:"contactGroups",isShow:r("contactGroups"),enabled:1,dataTestid:"contactgpinfo000123"},{route:"work",isShow:r("work"),enabled:1,dataTestid:"work000123"}];t.setAppConfigList=function(){if(window.navBarConfiglist=a.concat(),!window.CLIENTCONFIG.USE_IM){var e=window.navBarConfiglist.findIndex(function(e){return"recent"===e.route});window.navBarConfiglist.splice(e,1);var t=window.navBarConfiglist[0];window.navBarConfiglist[1]=window.navBarConfiglist[1],window.navBarConfiglist[0]=t}if(!window.CLIENTCONFIG.USE_MEETING){var n=window.navBarConfiglist.findIndex(function(e){return"conference"===e.route});window.navBarConfiglist.splice(n,1)}};window.navBarConfiglist=a},416:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sendJoinPairResult=t.receiveJoinPairConf=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(153),u=coreLogger.getLogger("logic")("synergism/server/conf"),f=(t.receiveJoinPairConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.info("receiveJoinPairConf: id = ",t+", confId = ",n.confId+", confAcs = ",n.confAcs),!(coreCall.getCallCount()>0||coreConf.isInConf())){e.next=5;break}return u.info("receiveJoinPairConf: maxhub device is busy"),f(t,constant.PAIR_CONF_RESULT.BUSY),e.abrupt("return");case 5:return(0,c.toggleChangeConfAcsId)(n.confId),(0,c.toggleChangeConfAcsNum)(n.confAcs),e.next=9,(0,c.toggleChangeConfAcsPas)(n.confPas);case 9:return coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),e.next=12,(0,c.oneKeyEnterConf)(n.confAcs,n.confId,n.confPas,!0);case 12:if(!1!==(r=e.sent)){e.next=16;break}return f(t,constant.PAIR_CONF_RESULT.FAILED),e.abrupt("return");case 16:window.pairId=t;case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.sendJoinPairResult=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.pairId=0,r={description:"pair_join_conf_result",command_rsp:constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,param:{result:n,msg:{}}},e.next=4,coreCall.sendUniversalInfo(t,r);case 4:return a=e.sent,u.info("send join conf result command ret = ",a),e.abrupt("return",a.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},587:function(e,t,n){(function(e,r){var a;!function(o){function i(e){throw new RangeError(k[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(L,"."),r+s(e.split("."),t).join(".")}function u(e){for(var t,n,r=[],a=0,o=e.length;a<o;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<o?(n=e.charCodeAt(a++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--)):r.push(t);return r}function f(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:S}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?M(e/b):e>>1,e+=M(e/t);e>R*E>>1;r+=S)e=M(e/R);return M(r+(R+1)*e/(e+N))}function h(e){var t,n,r,a,o,s,c,u,d,h,g=[],v=e.length,m=0,_=y,C=T;for(n=e.lastIndexOf(O),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),g.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<v;){for(o=m,s=1,c=S;a>=v&&i("invalid-input"),u=l(e.charCodeAt(a++)),(u>=S||u>M((w-m)/s))&&i("overflow"),m+=u*s,d=c<=C?I:c>=C+E?E:c-C,!(u<d);c+=S)h=S-d,s>M(w/h)&&i("overflow"),s*=h;t=g.length+1,C=p(m-o,t,0==o),M(m/t)>w-_&&i("overflow"),_+=M(m/t),m%=t,g.splice(m++,0,_)}return f(g)}function g(e){var t,n,r,a,o,s,c,f,l,h,g,v,m,_,C,N=[];for(e=u(e),v=e.length,t=y,n=0,o=T,s=0;s<v;++s)(g=e[s])<128&&N.push(D(g));for(r=a=N.length,a&&N.push(O);r<v;){for(c=w,s=0;s<v;++s)(g=e[s])>=t&&g<c&&(c=g);for(m=r+1,c-t>M((w-n)/m)&&i("overflow"),n+=(c-t)*m,t=c,s=0;s<v;++s)if(g=e[s],g<t&&++n>w&&i("overflow"),g==t){for(f=n,l=S;h=l<=o?I:l>=o+E?E:l-o,!(f<h);l+=S)C=f-h,_=S-h,N.push(D(d(h+C%_,0))),f=M(C/_);N.push(D(d(f,0))),o=p(n,m,r==a),n=0,++r}++n,++t}return N.join("")}function v(e){return c(e,function(e){return x.test(e)?h(e.slice(4).toLowerCase()):e})}function m(e){return c(e,function(e){return A.test(e)?"xn--"+g(e):e})}var _=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var C,w=2147483647,S=36,I=1,E=26,N=38,b=700,T=72,y=128,O="-",x=/^xn--/,A=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=S-I,M=Math.floor,D=String.fromCharCode;C={version:"1.4.1",ucs2:{decode:u,encode:f},decode:h,encode:g,toASCII:m,toUnicode:v},void 0!==(a=function(){return C}.call(t,n,t,e))&&(e.exports=a)}()}).call(t,n(302)(e),n(139))},588:function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},589:function(e,t,n){"use strict";t.decode=t.parse=n(590),t.encode=t.stringify=n(591)},590:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var f=0;f<u;++f){var l,d,p,h,g=e[f].replace(s,"%20"),v=g.indexOf(n);v>=0?(l=g.substr(0,v),d=g.substr(v+1)):(l=g,d=""),p=decodeURIComponent(l),h=decodeURIComponent(d),r(i,p)?a(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},591:function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(i(e),function(i){var s=encodeURIComponent(a(i))+n;return o(e[i])?r(e[i],function(e){return s+encodeURIComponent(a(e))}).join(t):s+encodeURIComponent(a(e[i]))}).join(t):s?encodeURIComponent(a(s))+n+encodeURIComponent(a(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},596:function(e,t){},597:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){e.copy(t,n)}var o=n(134).Buffer,i=n(598);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)a(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},598:function(e,t){},599:function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var a=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(600),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(139))},600:function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[c]=r,s(c),c++}function a(e){delete u[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(f)setTimeout(i,0,e);else{var t=u[e];if(t){f=!0;try{o(t)}finally{a(e),f=!1}}}}if(!e.setImmediate){var s,c=1,u={},f=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},s=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;s=function(t){var n=l.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(i,0,e)}}(),d.setImmediate=r,d.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(139),n(148))},601:function(e,t,n){(function(t){function n(e,t){function n(){if(!a){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var a=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(139))},602:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);a.call(this,e)}e.exports=r;var a=n(325),o=n(218);o.inherits=n(129),o.inherits(r,a),r.prototype._transform=function(e,t,n){n(null,e)}},603:function(e,t,n){e.exports=n(267)},604:function(e,t,n){e.exports=n(188)},605:function(e,t,n){e.exports=n(266).Transform},606:function(e,t,n){e.exports=n(266).PassThrough},648:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.refreshShareSize=void 0;var a=n(1),o=r(a),i=n(2),s=r(i);t.refreshShareSize=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:-3===t?(n=coreCall.getBigContainerSize(),n={width:n.width,height:n.height-54-74},coreCall.setSvcBFCPVideoRender(n)):-2===t&&(r={lastheight:0,lastwidth:0},$dispatch(coreUi.changeShareScreenWH(r)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},649:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.JsInterface=t.unregisterNativeWndEvent=t.registerNativeWndEvent=void 0;var o,i,s=n(123),c=a(s),u=n(4),f=a(u),l=n(1),d=a(l),p=n(69),h=a(p),g=n(2),v=a(g),m=n(166),_=n(700),C=a(_),w=n(207),S=n(153),I=n(194),E=n(208),N=r(E),b=n(186),T=r(b),y=n(250),O=coreLogger.getLogger("conf")("logic/nativeWnd/JsInterface"),x=[],A=(t.registerNativeWndEvent=function(){var e=(0,v.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("registerNativeWndEvent"),C.default.setNativeWndNotifyFunc(),x=[],t=coreCommon.Observer.subscribe("handlePageSwitchNotify",A.handlePageSwitchNotify),x.push(t),t=coreCommon.Observer.subscribe("handleModeSwitchNotify",A.handleModeSwitchNotify),x.push(t),t=coreCommon.Observer.subscribe("handleWatchNotify",A.handleWatchNotify),x.push(t),t=coreCommon.Observer.subscribe("handleSetMicVol",A.handleSetMicVolNotify),x.push(t),t=coreCommon.Observer.subscribe("handleSetSpkVol",A.handleSetSpkVolNotify),x.push(t),t=coreCommon.Observer.subscribe("handleSetCamera",A.handleSetCameraNotify),x.push(t),t=coreCommon.Observer.subscribe("handleDial",A.handleDialNotify),x.push(t),t=coreCommon.Observer.subscribe("handleChairman",A.handleChairmanNotify),x.push(t),t=coreCommon.Observer.subscribe("handleConfReleaseChairman",A.handleReleaseChairmanResNotify),x.push(t),t=coreCommon.Observer.subscribe("handleConfRequestChairman",A.handleRequestChairmanResNotify),x.push(t),t=coreCommon.Observer.subscribe("handleHangup",A.handleHangupNotify),x.push(t),t=coreCommon.Observer.subscribe("handleSelectBoxSwitch",A.handleSelectBoxSwitchNotify),x.push(t),t=coreCommon.Observer.subscribe("OnSharingAppEnded",A.onSharingAppEnded),x.push(t),t=coreCommon.Observer.subscribe("handleAddMemberDialog",A.handleAddMemberDialog),x.push(t),t=coreCommon.Observer.subscribe("handleAttendanceDialog",A.handleAttendanceDialog),x.push(t),t=coreCommon.Observer.subscribe("handleShowQos",A.handleShowQos),x.push(t),t=coreCommon.Observer.subscribe("handleQueryUserInfo",A.handleQueryUserInfo),x.push(t),t=coreCommon.Observer.subscribe("handleConfCtrl",A.handleConfCtrl),x.push(t),t=coreCommon.Observer.subscribe("handleRemoveVideo",A.handleRemoveVideo),x.push(t),t=coreCommon.Observer.subscribe("handleConfRecording",A.handleConfRecording),x.push(t),t=coreCommon.Observer.subscribe("handleActiveBidirection",A.handleActiveBidirection),x.push(t),t=coreCommon.Observer.subscribe("handleCPURate",A.handleCPURate),x.push(t),t=coreCommon.Observer.subscribe("handleProgramSharing",A.handleProgramSharing),x.push(t),t=coreCommon.Observer.subscribe("handleShowVideoDevSettings",A.handleShowVideoDevSettings),x.push(t),t=coreCommon.Observer.subscribe("handleUpdateAuxHwnd",A.handleUpdateAuxHwnd),x.push(t),t=coreCommon.Observer.subscribe("handleMemberListMoving",A.handleMemberListMoving),x.push(t),t=coreCommon.Observer.subscribe("handleMemberListFocus",A.handleMemberListFocus),x.push(t),t=coreCommon.Observer.subscribe("handleMemberListWindowStatus",A.handleMemberListWindowStatus),x.push(t),t=coreCommon.Observer.subscribe("handleStartIMChat",A.handleStartIMChat),x.push(t),t=coreCommon.Observer.subscribe("handleNotifyDataIsBigHwnd",A.handleNotifyDataIsBigHwnd),x.push(t),t=coreCommon.Observer.subscribe("handleUserNotActive",A.handleNotifyUserNotActive),x.push(t),t=coreCommon.Observer.subscribe("handleOperateBrowserHwnd",A.handleNotifyOperateBrowserHwnd),x.push(t),t=coreCommon.Observer.subscribe("handleAlertBoxResult",A.handleAlertBoxResult),x.push(t),t=coreCommon.Observer.subscribe("handleStopWatchByNative",A.handleStopWatchByNative),x.push(t),t=coreCommon.Observer.subscribe("handleNativeUserClick",A.handleNativeUserClick),x.push(t),t=coreCommon.Observer.subscribe("handleMonitorNumber",A.handleMonitorNumber),t=coreCommon.Observer.subscribe("handleShareAudio",A.handleShareAudio),x.push(t),O.info("registerNativeWndEvent JsInterfaceTokens = "+(0,h.default)(x));case 77:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.unregisterNativeWndEvent=function(){var e=(0,v.default)(d.default.mark(function e(){var t,n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(O.info("unregisterNativeWndEvent"),t=0;t<x.length;t++)n=coreCommon.Observer.unsubscribeToken(x[t]),n?O.debug("unsubscribeToken success token = "+x[t]):O.debug("unsubscribeToken false token = "+x[t]);x=[];case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.JsInterface=(i=o=function e(){(0,f.default)(this,e)},o.handlePageSwitchNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t.pos-1)>=0&&m.SvcAtdManager.handlePageSwitch(n);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleModeSwitchNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t.layout,r=t.frameHwnd,a=$getState().conf.isSvcConf,n>0&&(a?(O.info("insrte handleModeSwitch to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.handleModeSwitch,{},null,n,r)):N.setViewMode(n,r)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleWatchNotify=function(e){if(!window.CLIENTCONFIG.ISBIGWIN){var t=$getState().conf,n=t.svcViewMode,r=t.isSvcBroadcastMode,a=t.isDataConfSharing,o=t.selfRole,i=$getState().call.iSreceivingBFCP;if(r&&!i&&!a&&!o){$dispatch(coreUi.changeIsSvcSelectMode(!1));var s={};return s=(0,c.default)(s,{isSvcSelectMode:!1}),void m.SvcAtdManager.setParam(s)}var u=e.hwnd;if(null===u||0===u)m.SvcAtdManager.handleCancelWatch();else{var f=m.SvcAtdManager.getAttendeeByHwnd(u);m.SvcAtdManager.handleWatch(n,f)}var l=$getState().conf,d=l.svcPreViewMode,p=l.svcOnLineAttendances,h=d||constant.SVC_VIEW_MODE.BIG_SMALL_MODE;m.SvcAtdManager.setPageNum(h,p.length)}},o.handleSetMicVolNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleSetMicVolNotify, param = "+(0,h.default)(t)),I.ToolbarManager.setMicVol(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleSetSpkVolNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleSetSpkVolNotify, param = "+(0,h.default)(t)),I.ToolbarManager.setSpkVol(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleSetCameraNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleSetCameraNotify, param = "+(0,h.default)(t)),I.ToolbarManager.setCameraStu(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleDialNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("handleDialNotify, param = "+(0,h.default)(t)),e.next=3,I.ToolbarManager.dialClk(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleChairmanNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleChairmanNotify, param = "+(0,h.default)(t)),I.ToolbarManager.applyOrReleasechairman(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleRequestChairmanResNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleRequestChairmanResNotify, res = "+(0,h.default)(t)),I.ToolbarManager.handleRequestChairmanResNotify(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.onSharingAppEnded=(0,v.default)(d.default.mark(function e(){var t,n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,b.getShareAppHwnd)(),n=(0,b.getCloseShareDataOperate)(),O.info("The SharingApp handle  is invalidate, Stop Sharing. hasCloseShareDataOperate:",n),n&&window.CLIENTCONFIG.ISBIGWIN||O.info("onSharingAppEnded,  stopShareScreen."),O.info("onSharingAppEnded ：",t),w.NativeInterface.setHightlightShareWnd(t,!1),(0,b.setShareAppHwnd)(0),(0,b.setOldShareAppHwnd)(0),$dispatch(coreUi.changeFirstActiveShareApp(!0));case 9:case"end":return e.stop()}},e,void 0)})),o.handleReleaseChairmanResNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleReleaseChairmanResNotify, res = "+(0,h.default)(t)),I.ToolbarManager.handleReleaseChairmanResNotify(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleHangupNotify=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("handleHangupNotify, param = "+(0,h.default)(t)),e.next=3,I.ToolbarManager.hangup(t);case 3:coreUi.selectBoxCancelDataNWin(),(0,S.cancleConfMemberlistMessage)();case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleAddMemberDialog=function(){var e=(0,v.default)(d.default.mark(function e(t){var n,r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState(),r=n.selectContact.selectcontactisshow,a=!1,isNullOrEmpty(t.move_only)||(a=t.move_only),o={x:t.coordinate.center_x,y:t.coordinate.center_y,w:t.coordinate.width,h:t.coordinate.height},a?r&&(coreUi.selectBoxCancelDataNWin(a),coreUi.initConfSelectBoxAddMember(o)):(O.info("userClick handleAddMemberDialog, param = "+(0,h.default)(t)+",selectcontactisshow = "+r),r?coreUi.selectBoxCancelDataNWin():coreUi.initConfSelectBoxAddMember(o));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleAttendanceDialog=function(){var e=(0,v.default)(d.default.mark(function e(t){var n,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("userClick The confmember openorclose process:","recevice to openorclose confmember :",t),n=!1,isNullOrEmpty(t.move_only)||(n=t.move_only),r={x:t.coordinate.left_top_x,y:t.coordinate.left_top_y,w:t.coordinate.width,h:t.coordinate.height,isMove:t.move_enable},(0,S.handleShowMemberList)(r,n),coreUi.hideConfRightMenuLogic();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleShowQos=function(e){1===e.show?($dispatch(coreUi.changeShowCallMediaInfo(!0)),coreCall.getCallMediaInfoOfNative()):$dispatch(coreUi.changeShowCallMediaInfo(!1))},o.handleQueryUserInfo=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.SvcAtdManager.getUserInfoByHwnd(t.hwnd);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleConfCtrl=function(e){m.SvcAtdManager.handleConfCtrl(e)},o.handleRemoveVideo=function(e){I.ToolbarManager.removeVideo(e),$getState().conf.isShowMemberListNew&&$dispatch(coreUi.changeIsShowMemberListNew())},o.handleActiveBidirection=function(){var e=(0,v.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("handleActiveBidirection, param = "+(0,h.default)(t)),e.next=3,coreConf.changeActiveDirection(t.dir);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleConfRecording=function(e){O.info("handleConfRecording, param = "+(0,h.default)(e));var t=$getState(),n=t.conf.isReacrd;e.flag&&0===n?(0,S.cloudRecordRequestFuc)(constant.DATA_CLOUD_RECORD_TYPE.TYPE_RECORD,constant.DATA_CLOUD_RECORD_TYPE.RECORD_START):e.flag||1!==n||(0,S.cloudRecordRequestFuc)(constant.DATA_CLOUD_RECORD_TYPE.TYPE_RECORD,constant.DATA_CLOUD_RECORD_TYPE.RECORD_END)},o.handleCPURate=function(e){$getState().conf.isSvcConf?m.SvcAtdManager.handleCPURate(e):N.handleCPURate(e)},o.handleProgramSharing=function(e){if(O.info("[maxhub] handleProgramSharing isSelfJoinedDataConf:",T.isSelfJoinedDataConf()),1!=T.isSelfJoinedDataConf()){O.info("handleProgramSharing fail, not in dataconf");var t={dialog_type:1,content_id:"LANG_NATIVE_NOT_IN_DATACONF"};return void w.NativeInterface.showMessageBox(0,t)}(0,y.NotifySharingType)(0,e.type)},o.handleShowVideoDevSettings=function(e){O.info("handleShowVideoDevSettings start"),coreUi.toggleShowAudioSetting()},o.handleMemberListMoving=function(e){O.info("handleMemberListMoving",e),e.is_meet_page_moving?coreIpcMainProcess.startWindowToMemberListMove():coreIpcMainProcess.endWindowToMemberListMove({x:e.coordinate.left_top_x,y:e.coordinate.left_top_y})},o.handleMemberListFocus=function(e){O.debug("handleMemberListFocus",e),e.is_nativewnd_focus&&window.ipcNativeClss.nativeFollowDisplay(e)},o.handleMemberListWindowStatus=function(e){O.info("handleMemberListWindowStatus",e),0===e.nativewnd_size?window.ipcNativeClss.nativeNormalimizeDisplay(e):1===e.nativewnd_size?window.ipcNativeClss.nativeMaxDisplay(e):2===e.nativewnd_size?window.ipcNativeClss.nativeFullScreenDisplay(e):3===e.nativewnd_size&&window.ipcNativeClss.nativeMinimizeDisplay(e)},o.handleStartIMChat=function(e){O.info("handleStartIMChat",e);var t=$getState().call.userInfo,n=$getState().conf.groupId;isNullOrEmpty(n)?isNullOrEmpty(t)?O.error("start chat failed because there is no groupid or userinfo.account!"):(O.info("userClick show contact chat,userinfo = "+handlePhoneNumber(t.account)),coreContact.openContactConversationByConf(t,!0),appService.showMainWindow(!0)):(O.info("userClick show group dialog btn"),coreIm.openGroupConversationByConf({group_id:n},!0),appService.showMainWindow(!0))},o.handleNotifyDataIsBigHwnd=function(e){O.info("handleNotifyDataIsBigHwnd",e),$getState().conf.isSvcConf?(O.info("insert nativeNotifyUpdateDataIsBigHwnd to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyUpdateDataIsBigHwnd,{},null,e.isBigHwnd)):N.nativeNotifyUpdateDataIsBigHwnd(e.isBigHwnd)},o.handleNotifyUserNotActive=function(e){O.info("handleNotifyUserActive",e);var t=e.isNotActive,n=new coreSetting.AutoLeaveSetting;isNullOrEmpty(t)||(1===t?n.start():n.stop())},o.handleNotifyOperateBrowserHwnd=function(e){O.info("NotifyOperateBrowserHwnd",e);var t=e.cmdShow;9===t?appService.showWindow():6===t&&appService.minimize()},o.handleAlertBoxResult=function(e){O.info("handleAlertBoxResult",e);var t=e.dialogID,n=e.result;"feedback"===t&&1===n&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_DATA_CONF_ERROR,language.SHARING_JOINCONF_FAIL)},o.handleStopWatchByNative=function(e){O.info("handleStopWatchByNative",e),$getState().conf.isSvcConf&&(O.info("handleStopWatchByNative start"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyIsStopWatchSvc,{},null,e.isStop))},o.handleNativeUserClick=function(e){coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_USER_CLICK,params:[e.window_name,e.button_id]})},o.handleMonitorNumber=function(e){O.info("handleMonitorNumber, param= ",(0,h.default)(e)),$dispatch(coreUi.changeMonitorNumber(e.monitor_num))},o.handleShareAudio=function(e){O.info("handleShareAudio, param= ",(0,h.default)(e)),1===e.share_aduio?T.setShareAudio(!0):T.setShareAudio(!1)},o.handleUpdateAuxHwnd=function(e){O.info("start bfcphwnd = "+e.bfcphwnd+", isBigwnd = "+e.isBigWnd),$getState().conf.isSvcConf?(O.info("insrte nativeNotifyUpdateBfcpFrameWnd to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyUpdateBfcpFrameWnd,{},null,e.bfcphwnd,e.isBigWnd)):N.nativeNotifyUpdateBfcpFrameWnd(e.bfcphwnd)},i))},650:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.confInfoMap=void 0;var o=n(3),i=a(o),s=n(1),c=a(s),u=n(69),f=a(u),l=n(2),d=a(l),p=n(123),h=a(p),g=n(135),v=a(g),m=n(4),_=a(m),C=n(5),w=a(C),S=n(166),I=n(404),E=a(I),N=n(702),b=a(N),T=n(357),y=r(T),O=n(704),x=a(O),A=n(186),L=r(A),k=n(287),R=coreLogger.getLogger("confModel")("service"),M=t.confInfoMap={CONF_HANDLE:"confHandle",CONF_SERVER_ID:"confServerId",CALL_ID:"confCallId",CONF_SUBJECT:"confSubject",GROUP_URI:"groupUri",MEDIA_TYPE:"mediaType",CONF_PASSCODE:"confPasscode",VMR_ID:"vmrId",DATA_RANDOM:"dataRandom",AC_TEMP_TOKEN:"acTmpToken",CONF_ACSSCODE:"confAcsscode",CONF_PWD_ENCODE:"confPwdEncode",CONF_ID_INPUT:"confIdInput",CONF_ROLE:"confRole",COMPERE_NUMBER:"compereNumber",IS_SMC_VMR:"isSmcVmr"},D={B_CONNECT_TO_CONF:"bConnectToConf",IS_SMC_FIRST_REQUEST_CHAIRMAN:"isSmcFirstRequestCharimanRest",IS_RECALL:"isRecall",IS_ALREADY_JOIN_CONF:"isAlreadyJoinConf",IS_AVC_MULTIVIEW_BROADCAST:"isAvcMultiViewBroadcast",IS_FIRST_ENTER_CONF:"isFirstEnterConf",IS_USER_END_CONF:"isUserEndConf",IS_NOTIFY_UI_CONF_CONNECTED:"isNotifyUIConfConnected",IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY:"isNeedNotifyUISvcSessionNotify"},P=function(){function e(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,_.default)(this,e),this.getUpdatedParticipants=function(){return n.confInfo.updatedParticipants};var a=(new Date).getTime(),o=formatDateYYYYMMDDHHMM(a),i=[];if(this.showModeTaskQueue=coreCommon.TaskQueue.getInstance("showModeTaskQueue"),t&&t.memberList&&t.memberList.length>0){var s=!0,c=!1,u=void 0;try{for(var f,l=(0,v.default)(t.memberList);!(s=(f=l.next()).done);s=!0){var d=f.value,p={number:d.number?d.number:d.bind_no,userInfo:d,role:d.bind_no===t.compereNumber?1:0,is_mute:0,is_deaf:0,state:constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,hand_state:0,media_type:0,is_self:d.bind_no===t.selfNumber,is_speaking:!1,speak_volume:0,participant_id:"",is_broadcast:0,type:isNullOrEmpty(d.type)?0:parseInt(d.type)};1===t.memberList.length&&17===t.mediaType&&""===p.number&&(p.number=d.short_phone),1!==t.memberList.length&&""!==t.groupUri&&p.number!==t.selfNumber&&""===p.number&&(p.number=d.short_phone),i.push(p)}}catch(e){c=!0,u=e}finally{try{!s&&l.return&&l.return()}finally{if(c)throw u}}}this.confInfo={confHandle:"",confServerId:"",confCallId:"",mediaType:"",members:i,confPasscode:"",isAllMute:0,numOfParticipant:0,confRole:0,groupUri:"",compereNumber:t?t.compereNumber:"",confSubject:"",startTime:o.time,date:o.date,updatedParticipants:[],recordType:t&&t.recordType||0,vmrId:"",dataRandom:"",acTmpToken:"",confAcsscode:"",confPwdEncode:"",confIdInput:"",isSmcVmr:!1},this.confFlag={bConnectToConf:!1,isRecall:!1,isSmcFirstRequestCharimanRest:!window.isSupportiDo&&$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,isAlreadyJoinConf:!1,isAvcMultiViewBroadcast:!1,isFirstEnterConf:!1,isUserEndConf:!1,isNotifyUIConfConnected:!1,isNeedNotifyUISvcSessionNotify:!1},this.isFirstGetMemberList=!0,this.isCallTransToConf=!1,r&&(this.setConfInfo(M.CONF_PASSCODE,t?t.passcode:""),this.setConfInfo(M.CONF_HANDLE,t?t.confId:""),this.setConfInfo(M.CALL_ID,t?t.callId:""),this.setConfInfo(M.MEDIA_TYPE,t?t.mediaType:""),this.setConfInfo(M.GROUP_URI,t?t.groupUri:""),this.updateConfSubject(t?t.confSubject:"")),this.svc={}}return(0,w.default)(e,[{key:"setIsCallTransToConfTrue",value:function(){this.isCallTransToConf=!0}},{key:"setConfInfo",value:function(e,t){var n={};n[e]=t,e===M.MEDIA_TYPE&&E.default.changeMediaTypeToAudioData()&&(n[e]=17);var r=(0,h.default)({},this.confInfo,n);this.confInfo=r,e!==M.CONF_HANDLE||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfHanlde",t),e!==M.CONF_SERVER_ID||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfServerId",t,this.getConfInfo(M.VMR_ID)),e!==M.VMR_ID||isNullOrEmpty(t)||coreCommon.Observer.publish("changeVmrId",t),e!==M.CONF_SUBJECT||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfSubject",t),e!==M.CALL_ID||isNullOrEmpty(t)||(coreCommon.CameraControl.getInstance().setCallId(t),coreCommon.SpkControl.getInstance().setCallId(t),coreCommon.MicControl.getInstance().setCallId(t),coreCommon.Observer.publish("changeCallId",t)),e!==M.CONF_ROLE||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfRole",t),e!==M.GROUP_URI||isNullOrEmpty(t)||coreCommon.Observer.publish("changeGroupUri",t)}},{key:"getConfInfo",value:function(e){return this.confInfo[e]}},{key:"setConfFlag",value:function(e,t){var n={};n[e]=t;var r=(0,h.default)({},this.confFlag,n);this.confFlag=r}},{key:"getConfFlag",value:function(e){return this.confFlag[e]}},{key:"isUserEndConf",value:function(){return this.getConfFlag(D.IS_USER_END_CONF)}},{key:"isVideoConf",value:function(){return coreCommon.isVideoConf(this.getConfInfo(M.MEDIA_TYPE))}},{key:"isDataConf",value:function(){return 0!=(this.getConfInfo(M.MEDIA_TYPE)&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA)}},{key:"getSsrcRange",value:function(){return isNullOrEmpty(this.svc)?{}:this.svc.getSsrcRange()}},{key:"getIsSmcFirstRequestCharimanRest",value:function(){return this.getConfFlag(D.IS_SMC_FIRST_REQUEST_CHAIRMAN)}},{key:"setIsSmcFirstRequestCharimanRest",value:function(e){this.setConfFlag(D.IS_SMC_FIRST_REQUEST_CHAIRMAN,e)}},{key:"setIsFirstEnterConf",value:function(e){this.setConfFlag(D.IS_FIRST_ENTER_CONF,e)}},{key:"getIsFirstEnterConf",value:function(){return this.getConfFlag(D.IS_FIRST_ENTER_CONF)}},{key:"getIsRecall",value:function(){return this.getConfFlag(D.IS_RECALL)}},{key:"isMemberListNull",value:function(){return isNullOrEmpty(this.confInfo.members)}},{key:"getIsSvc",value:function(){return!isNullOrEmpty(this.svc)}},{key:"cleanSvc",value:function(){this.svc={}}},{key:"getCurrentConfId",value:function(){return this.confInfo.confServerId}},{key:"setIsAvcMultiViewBroadcast",value:function(e){this.setConfFlag(D.IS_AVC_MULTIVIEW_BROADCAST,e)}},{key:"getIsAvcMultiViewBroadcast",value:function(){return this.getConfFlag(D.IS_AVC_MULTIVIEW_BROADCAST)}},{key:"getCallIdOfConf",value:function(){return this.getConfInfo(M.CALL_ID)}},{key:"getGroupIdOfConf",value:function(){return this.getConfInfo(M.GROUP_URI)}},{key:"utConfCreateStart",value:function(e){coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_CREATE,extraTrackKey:null,params:e})}},{key:"utConfCreateFinish",value:function(e){coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_CREATE,extraTrackKey:null,resultParams:e})}},{key:"utConfCreateOperation",value:function(e){coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_CREATE,params:e})}},{key:"createConf",value:function(){function e(e,n,r,a,o,i,s,c){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i,s,u){var l,d,p,h,g,m,_,C,w,S,I,E,N,b,T,y,O,x,A,L,k,P,F,U,B,W,G,V,H,$,j,q;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=1,d=1,s&&!0===s.isCloseCameraDe&&(coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),d=0),s&&!0===s.isMuteMicDe&&(coreCommon.MicControl.getInstance().setIsMuteMicDe(),l=0),p=this.confInfo.members.length,this.setConfFlag(D.B_CONNECT_TO_CONF,!1),h=[],g=$getState().conf.hasConFRight,m=$getState().conf.showvmrornot,_=g&&m?15:1,e.next=12,coreAccount.getLoginModel();case 12:for(C=e.sent,w=C.isSupportAS,S=$getState().conf.isCreateUseFixedConfID,I=$getState().conf.IsImGroupCreate,E=m?1:0,R.info("create conf,this mediax_conf_type is",_),N=!0,b=!1,T=void 0,e.prev=21,y=(0,v.default)(this.confInfo.members);!(N=(O=y.next()).done);N=!0)x=O.value,A={number:x.number,name:x.userInfo.name,acount_id:x.userInfo.account,role:x.role,is_mute:0,email:x.userInfo.email,sms:"",is_auto_invite:!x.is_self,type:w?parseInt(x.type):0},h.push(A);e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),b=!0,T=e.t0;case 29:e.prev=29,e.prev=30,!N&&y.return&&y.return();case 32:if(e.prev=32,!b){e.next=35;break}throw T;case 35:return e.finish(32);case 36:return e.finish(29);case 37:if(L=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.priorityRtp"]),k={create_conf_info:{subject:t,group_uri:n,multi_stream_flag:r,media_type:a,language:"2052"===window.langcode?0:1,conf_encrypt_mode:2!==L?0:1,user_type:o,num_of_attendee:p,attendee:h,nopassword:i,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:_,ex_config_info:{is_send_notify:0,is_send_sms:0,is_guest_free_pwd:i}}},$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING&&(k.create_conf_info.time_zone=getDefaultTimeZone(constant.TIME_ZONE_FLAG).toString()),w&&S&&!I&&(k.create_conf_info.vmr_flag=E,k.create_conf_info.vmr_id=u),this.setConfInfo(M.MEDIA_TYPE,a),!this.isVideoConf()){e.next=45;break}return e.next=45,coreCommon.CameraControl.getInstance().initSetVideoIndex();case 45:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(P="0",coreConf.itmeetingCreateConf(P)),e.next=48,coreTup.getConfCtrlInstance();case 48:return F=e.sent,U=this,B=new PromiseObject,F.setNotifyFunc(491546,function(e){e&&e.param&&e.param.handle===U.getConfInfo(M.CONF_HANDLE)&&B.resolve(e)}),e.next=54,F.createConf(k);case 54:if(W=e.sent,G="*****"+t.substr(4),V=0===k.create_conf_info.record_type?0:1,H=0===i?1:0,!W||0!==W.result){e.next=67;break}R.info("createConf send to tup suc, handle = "+W.param.handle+",subject = "+(isNullOrEmpty(t)?"":t.substr(0,1)+"***")),this.isVideoConf()?this.utConfCreateStart([a,G,l,d,V,H]):this.utConfCreateStart([a,G,l,H]),this.setConfInfo(M.CONF_HANDLE,W.param.handle),this.setConfInfo(M.CONF_ROLE,1),this.updateConfSubject(t),coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),e.next=72;break;case 67:return this.isVideoConf()?this.utConfCreateOperation([a,G,l,d,V,H,0,W.result]):this.utConfCreateOperation([a,G,l,H,0,W.result]),R.error("create conf failed, result = "+W.result),e.next=71,this.unInit();case 71:return e.abrupt("return",{errorCode:-1});case 72:return e.next=74,B;case 74:if($=e.sent,F.setNotifyFunc(491546,null),!$||!$.param||0!==$.param.ret){e.next=84;break}return $.param.create_conf_result?(j=$.param.create_conf_result,R.info("notify create conf success,CONFCTRL_E_EVT_CREATE_CONF_RESULT,conf_id = "+j.conf_id+",conf_role = "+j.conf_role+",media_type = "+j.media_type+",len of pas = "+j.password.length+",handle = "+$.param.handle),this.setConfInfo(M.CONF_ROLE,1),this.setConfInfo(M.CONF_SERVER_ID,j.conf_id),this.setConfInfo(M.MEDIA_TYPE,j.media_type),this.setConfInfo(M.CONF_PASSCODE,j.password)):R.warn("create_conf_result is null, res = "+(0,f.default)($)),q=$.param.create_conf_result,this.utConfCreateFinish([1,q.conf_id]),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,params:[constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_AFTER_CREATE,q.conf_id]}),e.abrupt("return",{errorCode:0});case 84:return R.info("notify create conf failed, ret = "+$.param.ret+",handle = "+$.param.handle),this.utConfCreateFinish([0,$.param.ret]),e.next=88,F.endConf($.param.handle);case 88:return e.next=90,this.unInit();case 90:return e.abrupt("return",{errorCode:$.param.ret});case 91:case"end":return e.stop()}},e,this,[[21,25,29,37],[30,,32,36]])}));return e}()},{key:"oneKeyEnterConf",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a){var o,i,s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&this.setConfInfo(M.IS_SMC_VMR,!0),u&&!0===u.isCloseCameraDe&&coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),u&&!0===u.isMuteMicDe&&coreCommon.MicControl.getInstance().setIsMuteMicDe(),u&&!0===u.isMuteSpkDe&&coreCommon.SpkControl.getInstance().setIsMuteSpkDe(),u&&!isNullOrEmpty(u.speakerMode)&&coreCommon.SpkControl.getInstance().setSpeakerModeDe(u.speakerMode),y.isInReCall()&&(R.info("oneKeyEnterConf caused by isRecall"),this.setConfFlag(D.IS_RECALL,!0)),!a){e.next=9;break}return e.next=9,coreCommon.CameraControl.getInstance().initSetVideoIndex();case 9:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.itmeetingJoinConf(),e.next=12,b.default.oneKeyEnterConfTup(t,n,r,a,f);case 12:if(o=e.sent,i=o.errorCode,s=o.callId,0!==i){e.next=27;break}if(this.setConfInfo(M.CALL_ID,s),coreCommon.Observer.publish("showVideoPreview"),this.setConfInfo(M.CONF_ACSSCODE,t),this.saveConfPas(r),coreCommon.SpkControl.getInstance().cancelSysSpkMute(),!a){e.next=24;break}return e.next=24,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 24:return e.abrupt("return",!0);case 27:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&coreCommon.Observer.publish("meetingHWstartCallFailed",i),e.next=30,this.unInit();case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"saveConfPas",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("saveConfPas"),e.next=3,coreSecurity.encryptKMC(t);case 3:n=e.sent,R.info("save enter conf param for recall,result = ",n.result),n&&0===n.result&&this.setConfInfo(M.CONF_PWD_ENCODE,n.param.CiperText);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSavedRecallInfo",value:function(){var e=this.getConfInfo(M.CONF_SERVER_ID),t=this.getConfInfo(M.IS_SMC_VMR);return isNullOrEmpty(this.getConfInfo(M.CONF_ACSSCODE))||isNullOrEmpty(e)?(R.warn("getSavedRecallInfo no pas"),""):{isVideo:this.isVideoConf(),confid:e,access_code:this.getConfInfo(M.CONF_ACSSCODE),conf_paswd:this.getConfInfo(M.CONF_PWD_ENCODE),call_type:1,isVMR:t}}},{key:"enterConfInConfList",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("enterConfInConfList . confId =",t),this.setConfInfo(M.CONF_SERVER_ID,t),r={page_index:1,page_size:100},r.sub_conf_id=n,r.conf_id=t,e.next=7,this.getConfInfoFromServer(r);case 7:if(!((a=e.sent)&&a.param&&a.param.get_conf_info_result&&a.param.get_conf_info_result.conf_list_info)){e.next=33;break}return o=a.param.get_conf_info_result.conf_list_info,i=o.conf_id,s=o.vmr_id,this.setConfInfo(M.MEDIA_TYPE,o.media_type),this.setConfInfo(M.CONF_SERVER_ID,i),this.setConfInfo(M.VMR_ID,s),this.setConfInfo(M.CONF_ACSSCODE,o.access_number),u=o.chairman_pwd,(""===u||isNaN(u))&&(u=o.general_pwd),t=isNullOrEmpty(s)?i:s,e.next=21,this.oneKeyEnterConf(o.access_number,t,u,this.isVideoConf());case 21:if(!(f=e.sent)){e.next=27;break}return R.info("enterConfInConfList oneKeyEnterConf suc"),e.abrupt("return",!0);case 27:return R.error("enterConfInConfList oneKeyEnterConf fail"),e.next=30,this.unInit();case 30:return e.abrupt("return",!1);case 31:e.next=37;break;case 33:return R.error("enterConfInConfList getConfInfoRes fail"),e.next=36,this.unInit();case 36:return e.abrupt("return",!1);case 37:case"end":return e.stop()}},e,this)}));return e}()},{key:"enterConfByIdOnly",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,l,d,p,h,g,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("enterConfByIdOnly . confId =",t),this.setConfInfo(M.CONF_ID_INPUT,t),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,a=new PromiseObject,r.setNotifyFunc(491594,function(e){a.resolve(e)}),e.next=9,r.getConfAuthInfo(t);case 9:if(!(o=e.sent)||0!==o.result){e.next=14;break}R.info("enterConfByIdOnly getConf[Auth]Info send to tup suc"),e.next=18;break;case 14:return R.error("enterConfByIdOnly getConf[Auth]Info send to tup fail,res = "+o.result),e.next=17,this.unInit();case 17:return e.abrupt("return",{errorCode:-1});case 18:return e.next=20,a;case 20:if(i=e.sent,r.setNotifyFunc(491594,null),i&&i.param){e.next=25;break}return R.info("get[Auth]Info fail, res = "+desensitive((0,f.default)(i))),e.abrupt("return",{errorCode:-2});case 25:if(0===i.param.result){e.next=30;break}return R.info("get[Auth]Info fail, res = "+desensitive((0,f.default)(i))),e.next=29,this.unInit();case 29:return e.abrupt("return",{errorCode:i.param.result});case 30:if(s=i.param.conf_authinfo,u=s.access_number,l=s.hasAccessNumber,d=s.needPassword,p=1===l?u:"",R.info("needPassword = "+d+",hasAccessNumber = "+l),0!==d&&isNullOrEmpty(n)){e.next=46;break}return h="",isNullOrEmpty(n)||(h=n),e.next=38,this.oneKeyEnterConf(p,t,h,!0,v);case 38:if(!(g=e.sent)){e.next=43;break}return e.abrupt("return",{errorCode:0,accessNum:p});case 43:return e.abrupt("return",{errorCode:-3,accessNum:p});case 44:e.next=49;break;case 46:return e.next=48,this.unInit();case 48:return e.abrupt("return",{errorCode:-4,isNeedPwd:!0,accessNum:p});case 49:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCallEndedForOneKeyEnterConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return R.error("callEndedForOne[Key]EnterConf data or data.param is null, = "+(0,f.default)(t)),e.abrupt("return",!1);case 3:if(t.param.call_id===this.getConfInfo(M.CALL_ID)){e.next=6;break}return R.warn("callEndedForOne[Key]EnterConf callid is differ,so return"),e.abrupt("return",!1);case 6:return n=t.param.reason_code,r=t.param.endcall_reason,this.getConfFlag(D.IS_RECALL)||coreCommon.Observer.publish("CallEndedInConf",n,r,this.getConfInfo(M.CALL_ID)),e.next=11,this.unInit();case 11:return window.CLIENTCONFIG.ISBIGWIN&&(4041===n&&(coreConf.NotifyConfNoStart(0),R.info("NotifyConfNoStart")),4042===n&&(coreConf.NotifyConfTermination(0),R.info("NotifyConfTermination"))),y.reCallEnterConf(),coreCall.deleteCallObject(this.getConfInfo(M.CALL_ID)),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"bookConf",value:function(){function e(e,n,r,a,o,i,s,c,u,f){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i,s,u,f,l){var d,p,h,g,m,_,C,w,S,I,E,N,b,T,y,O,x,A,L,k,M,P,F,U,B,W,G;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=this.confInfo.members.length,this.setConfFlag(D.B_CONNECT_TO_CONF,!1),p=[],e.next=5,coreAccount.getLoginModel();case 5:for(h=e.sent,g=h.isSupportAS,m=$getState().conf.isUseFixedConfID,_=!0,C=!1,w=void 0,e.prev=11,S=(0,v.default)(this.confInfo.members);!(_=(I=S.next()).done);_=!0)E=I.value,N=E.userInfo.mobile,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&N.indexOf("/")>-1&&(b=N.split("/"),N=b[0]),T={number:E.number,name:E.userInfo.name,acount_id:E.userInfo.account,role:E.role,is_mute:0,email:E.userInfo.email,sms:N,is_auto_invite:!0,type:g?parseInt(E.type):0},p.push(T);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),C=!0,w=e.t0;case 19:e.prev=19,e.prev=20,!_&&S.return&&S.return();case 22:if(e.prev=22,!C){e.next=25;break}throw w;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return y=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.priorityRtp"]),O=$getState().conf.hasConFRight,x=$getState().conf.showvmrornot,A=$getState().conf.isBookSendEmail,L=$getState().conf.isBookSendSMS,k=O&&x?15:1,M=x?1:0,R.info("book conf,this mediax_conf_type is",k),P={book_conf_info_uportal:{size:d,subject:t,group_uri:n,multi_stream_flag:r,media_type:a,start_time:i,conf_len:s,language:"2052"===window.langcode?0:1,conf_encrypt_mode:2!==y?0:1,user_type:o,num_of_attendee:d,attendee:p,time_zone:u.toString(),nopassword:f,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:k,ex_config_info:{is_send_notify:A,is_send_sms:L,is_guest_free_pwd:f}}},window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(F="1",coreConf.itmeetingCreateConf(F)),g&&m&&(P.book_conf_info_uportal.vmr_flag=M,P.book_conf_info_uportal.vmr_id=l),e.next=40,coreTup.getConfCtrlInstance();case 40:return U=e.sent,e.next=43,U.bookConf(P);case 43:return B=e.sent,W=0===f?1:0,G=2===this.confInfo.recordType?1:0,B&&0===B.result?(coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_BOOK,extraTrackKey:null,params:[a,t,i,s,u.toString(),W,G]}),R.info("bookConf success")):(coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_CONF_BOOK,params:[a,t,i,s,u.toString(),W,G,0,B.result]}),R.error("bookConf failed, result = "+B.result),window.ToastNew(language.CONFERENCE_BOOK_FAILED,2),window.clickCreateWorking=!1),e.abrupt("return",B);case 48:case"end":return e.stop()}},e,this,[[11,15,19,27],[20,,22,26]])}));return e}()},{key:"p2pTransferConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,l,d,p,h,g,m,_,C,w,S,I,E,N,b,T,y,O;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.confInfo.members.length,this.initMemberState(t),r=[],a=$getState().conf.hasConFRight,o=$getState().conf.showvmrornot,i=a&&o?15:1,e.next=8,coreAccount.getLoginModel();case 8:for(s=e.sent,u=s.isSupportAS,l=o?1:0,R.info("book conf,this mediax_conf_type is",i),d=!0,p=!1,h=void 0,e.prev=15,g=(0,v.default)(this.confInfo.members);!(d=(m=g.next()).done);d=!0)_=m.value,C=!0,(_.role||_.number===t.userInfo.number)&&(C=!1),w={number:_.number,name:_.userInfo.name,acount_id:_.userInfo.account,role:_.role,is_mute:0,email:_.userInfo.email,sms:"",is_auto_invite:C,type:u?parseInt(_.type):0},r.push(w);e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),p=!0,h=e.t0;case 23:e.prev=23,e.prev=24,!d&&g.return&&g.return();case 26:if(e.prev=26,!p){e.next=29;break}throw h;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return S={call_id:t.callId,create_conf_info:{subject:t.confSubject,group_uri:t.groupUri,multi_stream_flag:t.isMultiStream,media_type:t.mediaType,language:"2052"===window.langcode?0:1,user_type:t.userType,num_of_attendee:n,attendee:r,nopassword:t.noPassword,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:i}},u&&$getState().login.isFreeUser&&(S.create_conf_info.vmr_flag=l),e.next=35,coreTup.getConfCtrlInstance();case 35:return I=e.sent,E=this,N=new PromiseObject,I.setNotifyFunc(491546,function(e){e&&e.param&&e.param.handle===E.getConfInfo(M.CONF_HANDLE)&&N.resolve(e)}),e.next=41,I.p2pTransferConf(S);case 41:if(!(b=e.sent)||0!==b.result){e.next=51;break}T="*****"+t.confSubject.substr(4),R.info("p2pTransferConf success, confhandle = "+b.param.conf_handle+",confSubject = "+desensitive(T)),this.confInfo.confHandle=b.param.conf_handle,this.setConfInfo(M.CONF_ROLE,1),this.updateConfSubject(t.confSubject),coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),e.next=53;break;case 51:return R.error("p2pTransferConf failed, result = "+b.result),e.abrupt("return",{errorCode:-1});case 53:return e.next=55,N;case 55:if(y=e.sent,I.setNotifyFunc(491546,null),!y||!y.param||0!==y.param.ret){e.next=62;break}return y.param.create_conf_result?(O=y.param.create_conf_result,R.info("notify create conf success,CONFCTRL_E_EVT_CREATE_CONF_RESULT,conf_id = "+O.conf_id+",conf_role = "+O.conf_role+",media_type = "+O.media_type+",len of pas = "+O.password.length+",handle = "+y.param.handle),this.setConfInfo(M.CONF_ROLE,O.conf_role),this.setConfInfo(M.CONF_SERVER_ID,O.conf_id),this.setConfInfo(M.MEDIA_TYPE,O.media_type),this.setConfInfo(M.CONF_PASSCODE,O.password)):R.warn("create_conf_result is null, res = "+(0,f.default)(y)),e.abrupt("return",{errorCode:0});case 62:return R.info("notify create conf failed, ret = "+y.param.ret),e.abrupt("return",{errorCode:y.param.ret});case 64:case"end":return e.stop()}},e,this,[[15,19,23,31],[24,,26,30]])}));return e}()},{key:"initMemberState",value:function(e){if(R.info("init conf member state for p2p trans to conf"),e.selfInfo){var t=this.confInfo.members.findIndex(function(t){return e.selfInfo.account===t.userInfo.account});-1!==t&&(this.confInfo.members[t].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF)}}},{key:"upgradeConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={conf_handle:this.confInfo.confHandle,add_media:{media_type:16|this.confInfo.mediaType,group_uri:this.confInfo.groupUri}},e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.upgradeConf(t);case 6:if(!(r=e.sent)||0!==r.result){e.next=12;break}return R.info("upgrade conf success"),e.abrupt("return",!0);case 12:R.error("upgrade conf failed, result = "+r.result);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"endConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setConfFlag(D.IS_USER_END_CONF,!0),this.getConfFlag(D.B_CONNECT_TO_CONF)){e.next=5;break}return R.info("not connect to conf, request conf control [token] before end conf"),e.next=5,this.requestConfToken();case 5:if(t=!1,isNullOrEmpty(this.getConfInfo(M.CONF_HANDLE))){e.next=37;break}return R.info("endConf confHandle is exsit"),e.next=10,coreTup.getConfCtrlInstance();case 10:return n=e.sent,r=this,a=new PromiseObject,n.setNotifyFunc(491547,function(e){e&&e.param&&e.param.handle===r.getConfInfo(M.CONF_HANDLE)&&a.resolve(e)}),e.next=16,n.endConf(this.getConfInfo(M.CONF_HANDLE));case 16:if(t=e.sent,o=this.getCurrentConfId(),!t||0!==t.result){e.next=32;break}return R.info("endconf send to tup suc"),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,params:[o]}),i=setTimeout(function(){a.resolve({param:{ret:-1}})},3e3),e.next=24,a;case 24:s=e.sent,R.info("endconf result back,res = "+(0,f.default)(s)),clearTimeout(i),i=null,s&&s.param&&0===s.param.ret?(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,resultParams:[1]}),coreConf.getConfInfoFromDb()):coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,resultParams:[0,s.param.ret]}),t=!0,e.next=35;break;case 32:R.info("endconf send to tup fail,errorCode = "+(0,f.default)(t)),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_END,params:[0,t.result]}),t=!1;case 35:e.next=49;break;case 37:if(isNullOrEmpty(this.getConfInfo(M.CALL_ID))){e.next=48;break}return e.next=40,coreTup.getCallInstance();case 40:return u=e.sent,e.next=43,u.endCall(this.getConfInfo(M.CALL_ID));case 43:t=e.sent,R.info("endConf endcall res = "+(0,f.default)(t)),t=!(!t||0!==t.result),e.next=49;break;case 48:R.info("end conf do nothing");case 49:return e.next=51,this.unInit();case 51:return coreCall.deleteCallObject(this.getConfInfo(M.CALL_ID)),t?R.info("end conf success"):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_END,params:[0,t.result]}),R.error("end conf failed, result = "+t.result)),this.timeoutTimer=setTimeout(function(){R.info("endConf 500ms leave dataconf"),window.CLIENTCONFIG.ISMOBILE?L.beLeaveDataConf():L.terminateconf()},500),e.abrupt("return",t);case 55:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfMTnumber",value:function(e){coreCommon.Observer.publish("ConfMTnumber",e.param)}},{key:"handleConfConnected",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return R.error("handleConfConnected data is null"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.getConfInfo(M.CONF_HANDLE)===t.param.handle){e.next=6;break}return R.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 6:if(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN,params:["handleConfConnected",1]}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),R.info("handleConfConnected ",t.param.handle),coreCommon.BigwinObserver.publish("OnChangeHasSent",!1),this.setConfFlag(D.B_CONNECT_TO_CONF,!0),this.setConfInfo(M.CALL_ID,t.param.call_id),n=!1,t.param.connect_info&&(r=t.param.connect_info.conf_subject,R.info("conf connected! conf_subject = "+handlePhoneNumber(r.substr(0,3))+handlePhoneNumber(r.substr(3))+",media_type = "+t.param.connect_info.media_type+",is_svc_conf = "+t.param.connect_info.is_svc_conf),this.setConfInfo(M.MEDIA_TYPE,t.param.connect_info.media_type),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=""),this.updateConfSubject(r),n=1===t.param.connect_info.is_svc_conf),!window.isHubEnv){e.next=18;break}if(this.isVideoConf()){e.next=18;break}return R.info("not video conf in maxhub, return confConnected"),e.abrupt("return");case 18:if(!n){e.next=26;break}return R.info("handleConfConnected isSvc = "+n+",current isSvc = "+this.getIsSvc()),a=!1,this.getIsSvc()||(this.svc=new x.default,a=!0),this.svc.changeSsrcRange(t.param.connect_info),a&&coreCommon.Observer.publish("changeIsSvcConf"),e.next=26,this.svc.init(this.getConfInfo(M.CALL_ID));case 26:return!1===this.getConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED)&&(coreCommon.Observer.publish("ConfConnected",this.isCallTransToConf),this.setConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED,!0),!0===this.getConfFlag(D.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY)&&coreCommon.Observer.publish("SvcSessionModify")),e.next=29,this.joinConf();case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfInfoNotify",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return R.error("handleConfConnected data is null"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.confInfo.confHandle===t.param.handle){e.next=6;break}return R.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 6:if(n=!1,t.param.conf_info?(this.setConfInfo(M.VMR_ID,t.param.conf_info.vmr_id),this.setConfInfo(M.CONF_SERVER_ID,t.param.conf_info.conf_id),this.setConfInfo(M.MEDIA_TYPE,t.param.conf_info.media_type),this.setConfInfo(M.DATA_RANDOM,t.param.conf_info.data_random),this.setConfInfo(M.AC_TEMP_TOKEN,t.param.conf_info.acTmpToken),n=1===t.param.conf_info.is_svc_conf):R.error("handleConfInfoNotify data.param.conf_info is null"+(0,f.default)(t.param.conf_info)),!window.isHubEnv){e.next=12;break}if(this.isVideoConf()){e.next=12;break}return coreCommon.Observer.publish("confInfoNotifyIsNotVideoConf"),e.abrupt("return");case 12:if(window.isHubEnv&&(window.pairId&&0!==window.pairId&&(R.info("send maxhub pair join conf success"),coreConf.sendJoinPairResult({id:window.pairId,result:constant.PAIR_CONF_RESULT.SUCCESS})),R.info("send maxhub join conf success"),coreConf.NotifyMyJoinConf(0,"")),E.default.getEnterDataConfInAdvance()||this.enterDataConf(t),this.getDetailConfInfo(),!n){e.next=23;break}return R.info("handleConfInfoNotify isSvc = "+n+",current isSvc = "+this.getIsSvc()),r=!1,this.getIsSvc()||(this.svc=new x.default,r=!0),this.svc.changeSsrcRange(t.param.conf_info),r&&coreCommon.Observer.publish("changeIsSvcConf"),e.next=23,this.svc.init(t.param.call_id);case 23:!1===this.getConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED)&&(coreCommon.Observer.publish("ConfConnected",this.isCallTransToConf),this.setConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED,!0),!0===this.getConfFlag(D.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY)&&coreCommon.Observer.publish("SvcSessionModify")),coreCommon.Observer.publish("ConfInfoNotify");case 25:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSvcSeessionModify",value:function(e){if(isNullOrEmpty(e)||isNullOrEmpty(e.param)||isNullOrEmpty(e.param.svc_lables))return void R.error("handleSvcSeessionModify param is null,param = "+(0,f.default)(t));var t=e.param;if(1!==t.is_svccall)return void R.warn("handleSvcSeessionModify is not svcConf, no need deal");R.info("handleSvcSeessionModify isSvc = true, current isSvc = "+this.getIsSvc());var n=!1;this.getIsSvc()||(this.svc=new x.default,n=!0),this.svc.changeSsrcRange(t,!0),n&&(coreCommon.Observer.publish("changeIsSvcConf"),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreCommon.CameraControl.getInstance().resetCameraOrient()),!0===this.getConfFlag(D.IS_NOTIFY_UI_CONF_CONNECTED)?coreCommon.Observer.publish("SvcSessionModify"):this.setConfFlag(D.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY,!0)}},{key:"getConfInfoFromServer",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new PromiseObject,e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,a=function(e){if(e.param&&e.param.get_conf_info_result&&e.param.get_conf_info_result.conf_list_info){e.param.get_conf_info_result.conf_list_info.conf_id===s.getConfInfo(M.CONF_SERVER_ID)?(R.info("confInfo for getConfInfoFromServer suc"),n.resolve(e)):R.info("confInfo for getConfInfoFromServer wait for next")}else R.error("confInfo for getConfInfoFromServer error"),n.resolve(e)},r.setMultiNotifyFunc(491564,a),e.next=8,r.getConfInfo(t);case 8:return o=e.sent,o&&0===o.result?R.info("getConfInfoFromServer getConfInfo  send to tup suc"):(R.error("getConfInfoFromServer getConfInfo send to tup fail,res = "+o.result),n.resolve(!1)),e.next=12,n;case 12:return i=e.sent,r.getNotifyCallbacks(491564).remove(a),e.abrupt("return",i);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDetailConfInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(this.getSavedRecallInfo())||window.isSupportiDo){e.next=3;break}return R.info("no need to get confInfo"),e.abrupt("return");case 3:return t=this.getConfInfo(M.CONF_SERVER_ID),n={page_index:1,page_size:100},n.sub_conf_id="0",n.conf_id=t,e.next=9,this.getConfInfoFromServer(n);case 9:r=e.sent,r&&r.param&&r.param.get_conf_info_result&&r.param.get_conf_info_result.conf_list_info?(a=r.param.get_conf_info_result.conf_list_info,t=a.conf_id,o=a.vmr_id,this.setConfInfo(M.CONF_SERVER_ID,t),this.setConfInfo(M.VMR_ID,o),this.setConfInfo(M.CONF_ACSSCODE,a.access_number),i=a.chairman_pwd,(""===i||isNaN(i))&&(i=a.general_pwd),this.saveConfPas(i),s=a.conf_subject,R.info("handleGetConfInfoRes suc,confSubject = "+(s?s.substr(0,1)+"***":"")),this.updateConfSubject(s)):R.info("handleGetConfInfoRes fail");case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"enterDataConf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(isNullOrEmpty(e)){if(this.isDataConf()){R.info("[IT-Meeting] start enter data conf.");var t={};t.confKey=this.getConfInfo(M.CONF_PASSCODE),t.mediaType=this.getConfInfo(M.MEDIA_TYPE),t.confServerId=this.getConfInfo(M.CONF_SERVER_ID),t.confCallId=this.getConfInfo(M.CALL_ID),coreConf.handleSmcEnterDataConf(t)}}else if(window.CLIENTCONFIG.USE_MEETING&&(""!==this.getConfInfo(M.DATA_RANDOM)||this.isDataConf()))if(window.CLIENTCONFIG.ISMOBILE||(R.info(" confinfonotify  PC Logic  "),coreCommon.Observer.publish("OnConfInfoNotify",{})),E.default.getDeployMode()!==constant.MEETING_NET_TYPE.SMC_MEETING){var n=e.param.conf_info;n.getParamType=3,coreConf.joinDataConf(n,this.confInfo.confCallId)}else{var r={};r.confKey=this.getConfInfo(M.CONF_PASSCODE),r.confToken=this.getConfInfo(M.AC_TEMP_TOKEN),r.mediaType=this.getConfInfo(M.MEDIA_TYPE),r.confServerId=this.getConfInfo(M.CONF_SERVER_ID),r.confCallId=this.getConfInfo(M.CALL_ID),coreConf.handleSmcEnterDataConf(r)}}},{key:"handleConfRightResult",value:function(e){if(R.info("handleConfRightResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle)}},{key:"setSpeakerReport",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING){e.next=6;break}return R.info("setSpeakerReport, confHandle = ",this.confInfo.confHandle),e.next=4,coreTup.getConfCtrlInstance();case 4:t=e.sent,t.setSpeakerReport(this.confInfo.confHandle);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfAttendeeListUpdate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("handleConfAttendeeListUpdate, handle="+t.param.handle+", attendeeNum="+t.param.conf_status.num_of_participant),this.confInfo.confHandle===t.param.handle){e.next=4;break}return R.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 4:0===t.param.conf_status.num_of_participant&&(R.info("handleConfAttendeeListUpdate, clear AttendeeList"),t.param.conf_status.participants=[]),this.confInfo.updatedParticipants=t.param.conf_status.participants,t.param.conf_status.is_all_mute?this.confInfo.isAllMute=1:this.confInfo.isAllMute=0,this.confInfo.numOfParticipant=t.param.conf_status.num_of_participant,this.confInfo.confSubject=t.param.conf_status.subject,coreCommon.Observer.publish("AttendeeListUpdate",t.param.conf_status.participants,t.param.conf_status.subject,!1,t.param.conf_status.is_all_mute,t.param.conf_status.allow_unmute,t.param.conf_status.record_status,t.param.conf_status.record_type);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleBigConfInfo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("BigConfInfoNotify",t);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleVideoWatchResult",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.param||this.confInfo.confHandle===t.param.handle){e.next=3;break}return R.error("handleVideoWatchResult not same conf, ret.handle is = "+t.param.handle+",confInfo.confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:t&&t.param?(0===t.param.operation_rsp_reason?R.error("handleVideoWatchResult fail,hanlde = "+t.param.handle+",operation_rsp_reason = "+t.param.operation_rsp_reason):R.info("handleVideoWatchResult suc,hanlde = "+t.param.handle),coreCommon.Observer.publish("handleVideoWatchRes",t.param.operation_rsp_reason)):R.error("handleVideoWatchResult ret is null or ret.param is null");case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"lockConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("lockAttendee, operator isLock = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.lockConf(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleLockConfResult",value:function(e){if(R.info("handleLockConfResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("lockResult",e)}},{key:"handleConfstateLock",value:function(e){R.info("handleConfstateLock ",e.param.handle),coreCommon.Observer.publish("lockState",e)}},{key:"handup",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("handup, operator isHandup = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,e.next=6,r.handupAttendee(this.confInfo.confHandle,n,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleHandupAttendeeResult",value:function(e){if(R.info("handleHandupAttendeeResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("handupResult",e)}},{key:"muteAttendee",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.confInfo.members.find(function(e){return e.number===n})||R.error("not conf attendee, numer =",handlePhoneNumber(n)),R.info("muteAttendee, operator ismute = "+t+", attendee = "+handlePhoneNumber(n)),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,e.next=7,r.muteAttendee(this.confInfo.confHandle,t,n);case 7:return a=e.sent,a&&0===a.result?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE_ATTENDEE,params:[t?1:0,1]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE_ATTENDEE,params:[t?1:0,0,a.result]}),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMuteAttendeeResult",value:function(e){if(R.info("handleMuteAttendeeResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("MuteAttendeeResult",e)}},{key:"muteConf",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("muteConf, operator ismute = "+t+", isAllowUnmute = "+n+", confHandle = "+this.confInfo.confHandle),r=new PromiseObject,e.next=4,coreTup.getConfCtrlInstance();case 4:return a=e.sent,o=this,i=function(e){e&&e.param&&e.param.handle!==o.getConfInfo(M.CONF_HANDLE)?R.warn("not same conf, wait for next, confHandle is ",e.param.handle):r.resolve(e)},a.setNotifyFunc(491555,i),e.next=10,a.muteConf(this.confInfo.confHandle,t,n);case 10:if(!(s=e.sent)||0!==s.result){e.next=16;break}coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,params:[this.getCurrentConfId(),t?1:0]}),R.info("muteConf send to tup suc"),e.next=19;break;case 16:return R.error("muteconf send to tup fail, errorcode = "+s.result),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE,params:[t?1:0]}),e.abrupt("return",{errorCode:-1,to_mute:0===t});case 19:return e.next=21,r;case 21:if(u=e.sent,this.confInfo.isAllMute=u.param.to_mute,!u||!u.param||0!==u.param.ret){e.next=29;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,resultParams:[1]}),R.info("muteconf callback suc"),e.abrupt("return",{errorCode:0,to_mute:u.param.to_mute});case 29:return R.info("muteconf callback fail,error = "+(0,f.default)(u)),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,resultParams:[0,u.param.ret]}),e.abrupt("return",{errorCode:u.param.ret,to_mute:u.param.to_mute});case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfBroadCastLocal",value:function(e){R.info("handleConfBroadCastLocal ",e.param.handle),coreCommon.Observer.publish("IsBroadcastLocal",e)}},{key:"postponeConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("postponeConf,time = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.postponeConfTup(this.getConfInfo(M.CONF_HANDLE),t);case 6:r=e.sent,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(0,k.itmeetingExtendConf)(t),r&&0===r.result?(R.info("postponeConf suc"),a=this.getCurrentConfId(),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_EXTEND,extraTrackKey:null,params:[a,t]})):(R.info("postponeConf fail"),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_EXTEND,params:[t,0,r.result]}));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"releaseChairman",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("releaseChairman, confHandle = "+this.confInfo.confHandle),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(n=!1,coreConf.itmeetingChairman(n)),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,e.next=7,r.releaseChairman(this.confInfo.confHandle,t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleReleaseChairmanResult",value:function(e){if(R.info("handleReleaseChairmanResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);$getState().conf.isVideoConf;window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISMAC?coreCommon.Observer.publish("ReleaseChairmanResult",e):coreCommon.Observer.publish("handleConfReleaseChairman",e)}},{key:"requestChairman",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("requestChairman, confHandle = "+this.confInfo.confHandle),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=!0,coreConf.itmeetingChairman(r)),a=$getState().conf.memberListInfo,!(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF}))){e.next=8;break}window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2),e.next=13;break;case 8:return e.next=10,coreTup.getConfCtrlInstance();case 10:return i=e.sent,e.next=13,i.requestChairman(this.confInfo.confHandle,t,n);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleReqChairmanResult",value:function(e){if(R.info("handleReqChairmanResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);!$getState().conf.showqusetchairman||window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISMAC?coreCommon.Observer.publish("ReqChairmanResult",e):coreCommon.Observer.publish("handleConfRequestChairman",e)}},{key:"handleEnterPwdToChairmanResult",value:function(e){if(R.info("smc reqChairman result",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("EnterPwdToChairmanResult",e)}},{key:"reInviteAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("reInvite attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),n=void 0,r=this.confInfo.members.length,a=-1,e.next=6,coreAccount.getLoginModel();case 6:o=e.sent,i=o.isSupportAS,s=0;case 9:if(!(s<r)){e.next=18;break}if(this.confInfo.members[s].number!==t){e.next=15;break}return this.confInfo.members[s].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,n={number:t,name:this.confInfo.members[s].userInfo.name,acount_id:this.confInfo.members[s].userInfo.account,role:this.confInfo.members[s].role,is_mute:0,email:this.confInfo.members[s].userInfo.email,sms:this.confInfo.members[s].userInfo.sms,is_auto_invite:1,type:i?parseInt(this.confInfo.members[s].type):0},a=s,e.abrupt("break",18);case 15:++s,e.next=9;break;case 18:if(!n){e.next=31;break}return coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),u={num_of_attendee:1,attendee_info:[n]},e.next=23,coreTup.getConfCtrlInstance();case 23:return f=e.sent,e.next=26,f.inviteAttendee(this.confInfo.confHandle,u);case 26:l=e.sent,l&&0===l.result?coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,params:[this.getCurrentConfId()]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_INVITE,params:[0,l.result]}),(isNullOrEmpty(l)||0!==l.result)&&a>=0&&(this.confInfo.members[a].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0)),e.next=32;break;case 31:R.error("can not find conf member");case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"addAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,p,g,v,m,_,C,w,I,E,N;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("add attendee size = "+t.length+", confHandle = "+this.confInfo.confHandle),n=[],r=[],e.next=5,coreAccount.getLoginModel();case 5:a=e.sent,o=a.isSupportAS,i=0;case 8:if(!(i<t.length)){e.next=33;break}if(s=t[i],window.isSupportiDo){e.next=24;break}u=!1,f=this.confInfo.members.length,l=0;case 14:if(!(l<f)){e.next=22;break}if(this.confInfo.members[l].number!==s.number){e.next=19;break}return this.confInfo.members[l].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT?(R.info("attendee("+handlePhoneNumber(s.number)+") is quit state in conf, reinvite"),this.confInfo.members[l].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,d={number:s.number,name:this.confInfo.members[l].userInfo.name,acount_id:this.confInfo.members[l].userInfo.account,role:this.confInfo.members[l].role,is_mute:0,email:this.confInfo.members[l].userInfo.email,sms:this.confInfo.members[l].userInfo.sms,is_auto_invite:1,type:o?parseInt(this.confInfo.members[i].type):0},n.push(d)):R.info("attendee("+handlePhoneNumber(s.number)+") is already in conf, do nothing"),u=!0,e.abrupt("break",22);case 19:++l,e.next=14;break;case 22:if(!u){e.next=24;break}return e.abrupt("continue",30);case 24:p={number:s.number,userInfo:s,role:0,is_mute:0,is_deaf:0,state:constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,hand_state:0,media_type:0,is_self:0,is_speaking:!1,speak_volume:0,participant_id:"",is_broadcast:0},this.confInfo.members.push(p),this.confInfo.numOfParticipant++,s.number===s.bind_no&&r.push(s),g={number:s.number,name:s.name,acount_id:s.account,role:0,is_mute:0,email:s.email,sms:s.sms,is_auto_invite:1,type:o?parseInt(s.type):0},n.push(g);case 30:++i,e.next=8;break;case 33:if(!(n&&n.length>0)){e.next=66;break}window.isSupportiDo||coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),this.dealAddToGroup(r,this.confInfo.groupUri),v=[],m=!0,_=(0,h.default)([],$getState().conf.memberListInfo),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(_=_.filter(function(e){return e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT})),C=0;case 41:if(!(C<n.length)){e.next=55;break}m=!0,w=0;case 44:if(!(w<_.length)){e.next=51;break}if(n[C].number.replace("+86","")!==_[w].number.replace("+86","")||_[w].state==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT){e.next=48;break}return m=!1,e.abrupt("break",51);case 48:w++,e.next=44;break;case 51:m&&v.push(n[C]);case 52:C++,e.next=41;break;case 55:if(!(v.length>0)){e.next=64;break}return I={num_of_attendee:v.length,attendee_info:v},e.next=59,coreTup.getConfCtrlInstance();case 59:return E=e.sent,e.next=62,E.inviteAttendee(this.confInfo.confHandle,I);case 62:N=e.sent,isNullOrEmpty(N)||0!==N.result?(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_INVITE,[0,N.result]),R.error("invite attendees failed"),"win"===window.CLIENTCONFIG.PLATFORM&&S.SvcAtdManager.alertBox("LANG_NATIVE_INVITE_FAILED",1),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(language.LANG_NATIVE_INVITE_FAILED,4,!1,"pcToast",""),this.updateAttendeesToQuit(t)):(coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,params:[this.getCurrentConfId()]}),R.info("invite attendees succeed"));case 64:e.next=67;break;case 66:R.error("no attendee to invite");case 67:case"end":return e.stop()}},e,this)}));return e}()},{key:"hangupAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("userClick  hangup attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.hangupAttendee(this.confInfo.confHandle,t);case 6:r=e.sent,r&&0===r.result?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HANGUP,params:[1]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HANGUP,params:[0,r.result]});case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"callAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("call attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.callAttendee(this.confInfo.confHandle,t);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("remove attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.removeAttendee(this.confInfo.confHandle,t);case 6:return r=e.sent,R.info("bbbbbbbb remove attender",r),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"localRemoveAttendee",value:function(e){R.info("localRemoveAttendee attendeeNum ",handlePhoneNumber(e));var t=this.confInfo.members.length,n=null;if(!window.CLIENTCONFIG.ENABLE_IT_MEETING)for(var r=0;r<t;++r)if(this.confInfo.members[r].number===e){n=this.confInfo.members[r],this.confInfo.members.splice(r,1);break}return n}},{key:"updateAttendeesToQuit",value:function(e){for(var t=0;t<e.length;++t)for(var n=e[t],r=this.confInfo.members.length,a=0;a<r;++a)if(this.confInfo.members[a].number===n.number){this.confInfo.members[a].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;break}coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0)}},{key:"handleConfIncoming",value:function(e){if(isNullOrEmpty(e)||isNullOrEmpty(e.param)||isNullOrEmpty(e.param.conf_incoming_ind))return R.error("handleConfIncoming incomingInfo is null, incomingInfo = "+JSON.stringfy(e)),!1;R.info("conf incoming, handle = "+e.param.handle+", caller is "+handlePhoneNumber(e.param.conf_incoming_ind.number)+", mediaType is "+e.param.conf_incoming_ind.media_type),this.setConfInfo(M.CONF_SERVER_ID,e.param.conf_incoming_ind.conf_id),this.setConfInfo(M.CONF_HANDLE,e.param.handle),this.setConfInfo(M.CALL_ID,e.param.call_id),this.setConfInfo(M.GROUP_URI,e.param.conf_incoming_ind.group_uri),this.setConfInfo(M.COMPERE_NUMBER,e.param.conf_incoming_ind.number),this.setConfInfo(M.MEDIA_TYPE,e.param.conf_incoming_ind.media_type);var t=e.param.conf_incoming_ind.subject;!window.isSupportiDo&&isNullOrEmpty(t)&&(t=e.param.conf_incoming_ind.number+language.CONFERENCE_SUBJECT_INFO),R.info("handleConfIncoming subject = "+(t<2?t.substr(0,1)+"***":t.substr(0,1)+"***"+t.substr(-1))),this.updateConfSubject(t);var n={confHandle:this.getConfInfo(M.CONF_HANDLE),confSubject:this.getConfInfo(M.CONF_SUBJECT),compereNumber:this.getConfInfo(M.COMPERE_NUMBER),mediaType:this.getConfInfo(M.MEDIA_TYPE),groupUri:this.getConfInfo(M.GROUP_URI),isVideo:this.isVideoConf()};return coreCommon.Observer.publish("ConfIncoming",n),!0}},{key:"handleConfBeTransferToConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)&&!isNullOrEmpty(t.param)){e.next=3;break}return R.error("handleConfBeTransferToConf data.param error"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.isCallTransToConf&&coreCommon.CameraControl.getInstance().unInit(),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN,params:["handleConfBeTransferToConf",1]}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),this.setConfInfo(M.CONF_HANDLE,t.param.handle),this.setConfInfo(M.CALL_ID,t.param.call_id),t.param.conf_info?(this.updateConfSubject(t.param.conf_info.subject),this.setConfInfo(M.GROUP_URI,t.param.conf_info.group_uri),this.setConfInfo(M.MEDIA_TYPE,t.param.conf_info.media_type),isNullOrEmpty(this.getConfInfo(M.CONF_PASSCODE))&&this.setConfInfo(M.CONF_PASSCODE,t.param.conf_info.conf_id)):R.warn("handleConfBeTransferToConf data.param.conf_info error"+(0,f.default)(t.param)),!window.isHubEnv||this.getConfInfo(M.IS_VIDEO_CONF)){e.next=12;break}return R.info("not video conf in maxhub, return handleConfBeTransferToConf"),e.abrupt("return");case 12:return e.next=14,this.joinConf();case 14:if(!0!==this.getConfFlag(D.IS_RECALL)){e.next=32;break}if(R.info("start mute speak on recall"),e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=21;break}return e.next=20,window.isSimCardCall();case 20:e.t0=e.sent;case 21:if(!e.t0){e.next=31;break}return R.info("confTransferToConf now is in simcard call"),e.next=25,coreCommon.SpkControl.getInstance().muteSpk(!0,!1);case 25:return e.next=27,coreCall.muteMicAndSpeaker(1,1);case 27:return e.next=29,coreCall.switchAudioChannel(1);case 29:e.next=32;break;case 31:coreCommon.SpkControl.getInstance().muteSpkForIntervel(3700);case 32:E.default.getEnterDataConfInAdvance()&&this.enterDataConf();case 33:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateConfSubject",value:function(e){var t=this.getConfInfo(M.CONF_SUBJECT);isNullOrEmpty(e)||(t=e),isNullOrEmpty(t)&&(t=this.getConfInfo(M.CONF_ACSSCODE)),this.setConfInfo(M.CONF_SUBJECT,t)}},{key:"joinConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getConfFlag(D.IS_ALREADY_JOIN_CONF)){e.next=3;break}return R.info("already join conf, so return"),e.abrupt("return");case 3:if(this.setConfFlag(D.IS_ALREADY_JOIN_CONF,!0),R.info("join conf start"),y.reCallSuc(),window.webView&&window.webView.setKeepScreenOn(),!this.isVideoConf()){e.next=16;break}return coreCall.newCallObject(this.getConfInfo(M.CALL_ID),1),R.info("joinConf isVideoConf to deal camera"),e.next=12,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 12:return e.next=14,coreCommon.CameraControl.getInstance().resetCameraOrient(!0);case 14:e.next=17;break;case 16:coreCall.newCallObject(this.getConfInfo(M.CALL_ID),0);case 17:coreCommon.MicControl.getInstance().init(),coreCommon.SpkControl.getInstance().init(),R.info("video or video conf open speaker outer : "+window.otherAudioDevicesConnect),!window.otherAudioDevicesConnect&&this.isVideoConf()?coreCommon.SpkControl.getInstance().initSetSpeaker(!0):coreCommon.SpkControl.getInstance().initSetSpeaker(!1),coreCommon.SpkControl.getInstance().cancelSysSpkMute(),this.setConfFlag(D.IS_FIRST_ENTER_CONF,!0);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.confInfo.confHandle){e.next=3;break}return R.error("not same conf, confId = "+t+", confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:return R.info("reject conf, confHandle = "+t),e.next=6,coreTup.getConfCtrlInstance();case 6:return n=e.sent,e.next=9,n.rejectConf(t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptConf",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.confInfo.confHandle){e.next=3;break}return R.error("not same conf, confId = "+t+", confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:return R.info("accept conf, confHandle = "+t),e.next=6,coreTup.getConfCtrlInstance();case 6:return r=e.sent,e.next=9,r.acceptConf(t,n);case 9:if(a=e.sent,(0,h.default)(a,{groupUri:this.confInfo.groupUri}),!a||0!==a.result){e.next=16;break}if(!n){e.next=15;break}return e.next=15,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 15:coreCommon.SpkControl.getInstance().cancelSysSpkMute();case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"leaveConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("leave conf, confHandle = "+this.getConfInfo(M.CONF_HANDLE)+"callId = "+handlePhoneNumber(this.getConfInfo(M.CALL_ID))),$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING||window.isSmcFirstRequest||window.isSupportiDo||this.setConfFlag(D.IS_SMC_FIRST_REQUEST_CHAIRMAN,!0),R.info("leaveMobileDataConf type "+this.getConfInfo(M.MEDIA_TYPE)),e.next=5,L.leaveDataConf(a);case 5:if(t=!1,isNullOrEmpty(this.getConfInfo(M.CONF_HANDLE))){e.next=16;break}return e.next=9,coreTup.getConfCtrlInstance();case 9:return n=e.sent,e.next=12,n.leaveConf(this.confInfo.confHandle);case 12:t=e.sent,R.info("leave conf res "+(0,f.default)(t)),e.next=27;break;case 16:if(isNullOrEmpty(this.getConfInfo(M.CALL_ID))){e.next=26;break}return e.next=19,coreTup.getCallInstance();case 19:return r=e.sent,e.next=22,r.endCall(this.getConfInfo(M.CALL_ID));case 22:t=e.sent,R.info("leaveConf endcall res = "+(0,f.default)(t)),e.next=27;break;case 26:R.info("leave conf do nothing");case 27:if(coreCall.deleteCallObject(this.getConfInfo(M.CALL_ID)),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=37;break}if(0!==t.result){e.next=34;break}return e.next=32,this.unInit();case 32:e.next=35;break;case 34:R.info("hwTupConfCtrlSdk leaveconf fail");case 35:e.next=39;break;case 37:return e.next=39,this.unInit();case 39:return e.abrupt("return",t);case 40:case"end":return e.stop()}},e,this)}));return e}()},{key:"broadcastAttendee",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("broadcastAttendee, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,n=1===t?n:"",e.next=7,r.broadcastAttendee(this.confInfo.confHandle,t,n);case 7:return a=e.sent,a&&0===a.result?coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,params:[this.getCurrentConfId(),t?1:0]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,params:[t?1:0,0,a.result]}),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfEnded",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.param.handle===this.getConfInfo(M.CONF_HANDLE)){e.next=3;break}return R.error("not same conf, confId = "+t.param.handle+", confHandle = "+this.getConfInfo(M.CONF_HANDLE)),e.abrupt("return",0);case 3:return R.info("conf ended, confHandle = "+this.getConfInfo(M.CONF_HANDLE)),t&&t.param&&836===t.param.reason&&!isNullOrEmpty(this.getSavedRecallInfo())?coreCall.recallOrHangup(this.getSavedRecallInfo(),!1,""):(y.terminateReCall(),this.setConfInfo(M.CONF_SERVER_ID,""),this.setConfInfo(M.CONF_ACSSCODE,""),coreCommon.Observer.publish("ConfEnded",t)),coreCall.deleteCallObject(this.getConfInfo(M.CALL_ID)),e.next=8,this.unInit();case 8:return e.abrupt("return",1);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfSpeakerNotify",value:function(e){if(R.info("handleConfSpeakerNotify handle="+e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is "+e.param.handle);coreCommon.Observer.publish("ConfSpeakerNotify",e.param.floor_attendee_info)}},{key:"handleTransToConfResult",value:function(e){if(R.info("handleTransToConfResult handle=",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void R.error("not same conf, confHandle is "+e.param.handle);coreCommon.Observer.publish("TransToConfResult",e)}},{key:"updateConfMemberList",value:function(e){this.confInfo.members=e}},{key:"dealAddToGroup",value:function(e,t){if(e.length>0&&""!==this.confInfo.groupUri){for(var n=0,r=0;r<this.confInfo.members.length;r++)""!==this.confInfo.members[r].account&&n++;n+=e.length,n>100?coreCommon.Observer.publish("ExceedGroupMemNum"):coreCommon.Observer.publish("AddToGroupFromConf",e,t)}}},{key:"getConfMemberListContent",value:function(){for(var e=this.confInfo.members,t=e?e.length:0,n=language.NAME+"        "+language.NUMBER+"        "+language.LANG_QOS_STATE+"\r\n",r=n+"---------------------------------------------\r\n",a="",o=0;o<t;++o){var i=e[o].userInfo.name?e[o].userInfo.name:"null",s="null";switch(isNullOrEmpty(e[o].userInfo.number)?isNullOrEmpty(e[o].userInfo.bind_no)||(s=e[o].userInfo.bind_no):s=e[o].userInfo.number,e[o].state){case constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING:a=language.CONFERENCE_MEMBER_STATE_INVITING;break;case constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF:a=language.STATUS_IN_CONFERENCE;break;case constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT:a=language.LANG_NATIVE_HANGUP;break;default:a="null"}r+=i+"    "+s+"    "+a+"\r\n"}return r}},{key:"requestConfToken",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("request conf [token] ","confHandle:"+this.confInfo.confHandle),!this.confInfo.confRole||!this.confInfo.confPasscode){e.next=11;break}return t="",e.next=5,coreTup.getConfCtrlInstance();case 5:return n=e.sent,e.next=8,n.requestConfCtrlRight(this.confInfo.confHandle,this.confInfo.compereNumber,this.confInfo.confPasscode,t);case 8:return e.abrupt("return",e.sent);case 11:return R.warn("role is not compere or conf passcode is null"),e.abrupt("return");case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"sendWatchSvcRequest",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,p,h,g;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(t.length<=0)){e.next=3;break}return R.error("sendWatchSvcRequest param error, the attendeeList is empty"),e.abrupt("return",!1);case 3:return e.next=5,coreTup.getConfCtrlInstance();case 5:return r=e.sent,a={user_num:n,conf_handle:this.confInfo.confHandle,svc_watch_attendee:{count:t.length,attendee:t}},e.next=9,r.sendWatchSvcRequest(a);case 9:for(o=e.sent,i=new Array,s=!0,u=!1,f=void 0,e.prev=14,l=(0,v.default)(t);!(s=(d=l.next()).done);s=!0)p=d.value,h=p.number,-1===i.indexOf(h)&&i.push(handlePhoneNumber(h));e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),u=!0,f=e.t0;case 22:e.prev=22,e.prev=23,!s&&l.return&&l.return();case 25:if(e.prev=25,!u){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return g=i.join(),o&&0===o.result?(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_SVC,params:[1,g,1]}),R.info("sendWatchSvcRequest success",o.result)):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_SVC,params:[1,g,0,o.result]}),R.info("sendWatchSvcRequest failed",o.result)),e.abrupt("return",o);case 33:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29]])}));return e}()},{key:"confctrlWatchAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("confctrlWatchAttendee"),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.confctrlWatchAttendee(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeActiveDirection",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("changeActiviteDirection"),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.changeActiveDirection(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"cloudRecordRequest",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("cloudRecordRequest, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,e.next=6,r.cloudRecordRequest(this.confInfo.confHandle,t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"confSignRequest",value:function(){function e(e,n,r,a,o,i){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i){var s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("confSignRequest, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return s=e.sent,e.next=6,s.confSignRequest(this.confInfo.confHandle,t,n,r,a,o,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"unInitDeviceControl",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("unInitDeviceControl"),e.next=3,coreCommon.SpkControl.getInstance().makeSysSpkMute();case 3:coreCommon.CameraControl.getInstance().unInit(),coreCommon.SpkControl.getInstance().unInit(),coreCommon.MicControl.getInstance().unInit();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMobileBfcpStatus",value:function(){if(!window.CLIENTCONFIG.ISMOBILE)return void R.info("handleMobileBfcpStatus is no need for pc");R.info("[bfcp] handleMobileBfcpStatus"),$dispatch(coreUi.changeSendBfcp(!1)),$dispatch(coreUi.changeReceiveBfcp(!1))}},{key:"configMsDataConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("configMsDataconf "+t),n={conf:{enable_ms_dataconf:t}},e.next=4,coreTup.getCallInstance();case 4:return r=e.sent,e.next=7,r.config(n);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"stopBfcpData",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==$getState().call.iSreceivingBFCP){e.next=7;break}return R.info("stop bfcp call in end call"),$dispatch(coreUi.setBfcpReceiving(!1)),e.next=5,coreTup.getCallInstance();case 5:t=e.sent,t.stopData(this.getConfInfo(M.CALL_ID));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCanvasSocket",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("mac"!==window.CLIENTCONFIG.PLATFORM){e.next=4;break}return e.next=3,coreCall.closeAllSvcRemoteSocket();case 3:coreCall.closeSvcDataSocket();case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"unInit",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("unInit"),this.closeCanvasSocket(),this.handleMobileBfcpStatus(),e.next=5,this.configMsDataConf(1);case 5:this.stopBfcpData(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||coreCommon.SpkControl.getInstance().setHandsFree(!1),this.unInitDeviceControl(),window.refreshAtdlistTimer&&(clearInterval(window.refreshAtdlistTimer),window.refreshAtdlistTimer=null);case 9:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getPromise",value:function(){var e={};return e.promise=new i.default(function(t,n){e.resolve=t,e.reject=n}),e}}]),e}();t.default=P},651:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.p2pTransferConf=t.enterConfByIdOnlyService=t.enterConfInConfListService=t.oneKeyEnterConfService=t.createConf=t.endConf=t.leaveConf=t.setConfNotifyFuncAtomic=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(249),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=coreLogger.getLogger("confModel")("queue"),l=coreCommon.TaskQueue.getInstance("confServiceQueue"),d=coreCommon.TaskOptions.defaultOptions(),p=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("set confctrl service callback func"),e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,t.setMultiNotifyFunc(98311,g),t.setMultiNotifyFunc(98341,S),e.next=8,coreTup.getConfCtrlInstance();case 8:return n=e.sent,n.setNotifyFunc(491539,v),n.setNotifyFunc(491559,m),n.setNotifyFunc(491543,_),n.setNotifyFunc(491540,C),n.setNotifyFunc(491541,w),n.setNotifyFunc(491542,I),e.next=17,u.setConfNotifyFunc();case 17:return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=new coreCommon.AtomicAction("setConfNotifyFunc",p);t.setConfNotifyFuncAtomic=h;var g=(t.leaveConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("leaveConf add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.leaveConf,d,n,a),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.endConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("endConf add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.endConf,d,n),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("createConf add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.createConf,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.oneKeyEnterConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("oneKeyEnterConfService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.oneKeyEnterConfService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfInConfListService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("enterConfInConfListService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.enterConfInConfListService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("enterConfByIdOnlyService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.enterConfByIdOnlyService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.p2pTransferConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("p2pTransferConf add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.p2pTransferConf,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){f.info("handleCallEndedPostConf add in queue"),l.addTask(u.handleCallEndedPostConf,d,null,e)}),v=function(e){f.info("handleConfIncoming add in queue"),l.addTask(u.handleConfIncoming,d,null,e)},m=function(e){f.info("handleTransToConfResult add in queue"),l.addTask(u.handleTransToConfResult,d,null,e)},_=function(e){f.info("handleConfBeTransferToConf add in queue"),l.addTask(u.handleConfBeTransferToConf,d,null,e)},C=function(e){f.info("handleConfConnected add in queue"),l.addTask(u.handleConfConnected,d,null,e)},w=function(e){f.info("handleConfInfoNotify add in queue"),l.addTask(u.handleConfInfoNotify,d,null,e)},S=function(e){f.info("handleSvcSeessionModify add in queue"),l.addTask(u.handleSvcSeessionModify,d,null,e)},I=function(e){f.info("handleConfEnded add in queue"),l.addTask(u.handleConfEnded,d,null,e)}},652:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairStartEndMeeting=t.pairInviteAttendeeNotify=t.pairInviteJoinConf=t.pairCreatHandleAndGetToken=t.pairLinkageConfNotify=t.startPairMeeting=t.handleEndConf=t.pairLinkageConfStateNotify=t.pairCallStateNotify=t.pairSubscribeNotify=t.pairCtrSubscribe=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(153),u=n(406),f=n(194),l=coreLogger.getLogger("logic")("synergism/conference"),d=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a){var i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: start request conf ctrl [token], handle="+t+", number="+n),e.next=3,coreTup.getConfCtrlInstance();case 3:return i=e.sent,e.next=6,i.requestConfCtrlRight(t,n,r,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: creat pair conf handle, confId="+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.creatConfHandle(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: destroy pair conf handle, handle="+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.destroyConfHandle(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),g=(t.pairCtrSubscribe=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: request subscribe call state, switch=",t),n=$getState().synergismInfo.tokenIndex,e.next=4,coreCall.pairSubscribe(n,t);case 4:r=e.sent,0!==r.result?l.info("BLE: request subscribe call state failed, rsp=",r):l.info("BLE: request subscribe call state success");case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairSubscribeNotify=function(e){l.info("BLE: notify, get subscribe result"),0!==e.result&&l.info("BLE: notify, subscribe call state failed")},t.pairCallStateNotify=function(e){var t=e.callstate;l.info("BLE: notify, paired peripherals call state changed, callState=",t);var n=$getState().synergismInfo.pairState;if(constant.PAIR_STATE.PAIR_SUCCESS!==n)return void l.info("BLE: no paired peripherals, pair state=",n);var r=$getState().synergismInfo.pairedDeviceConf.callstate;if((0,u.setPairDeviceConfInfo)(e),$getState().synergismInfo.inPairConf)if(constant.PAIR_CALL_STATE.IN_CONFERENCE===t||constant.PAIR_CALL_STATE.ESTABLISHED===t){l.info("BLE: get conf established notify by paired peripherals, call state=",t);var a=$getState().synergismInfo.pairConfInfo.media_type;(0,c.handlePairJoinConf)(a)}else constant.PAIR_CALL_STATE.IDLE===t&&t!==r&&(l.info("BLE: get conf end notify by paired peripherals, old state=",r),_())},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: request open or close conf linkage, confId="+t+", switch="+n),r=$getState().synergismInfo.tokenIndex,e.next=4,coreCall.pairLinkage(r,n,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),v=(t.pairLinkageConfStateNotify=function(e){l.info("BLE: notify, linkage conf state changed");var t=$getState().synergismInfo.pairState;if(constant.PAIR_STATE.PAIR_SUCCESS!==t)return void l.info("BLE: no paired peripherals, pair state=",t);$dispatch(coreUi.changePairConfRole(e.ischairman))},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={number:n,role:0,is_mute:0,is_auto_invite:1},a={num_of_attendee:1,attendee_info:[r]},e.next=4,coreTup.getConfCtrlInstance();case 4:return i=e.sent,e.next=7,i.inviteAttendee(t,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(l.info("BLE: try to join conf failed"),""!==$getState().conf.confHandle&&(h($getState().conf.confHandle),$dispatch(coreUi.changeConfHandle("")),f.ToolbarManager.setConfHandle("")),e){var t=$getState().synergismInfo.pairConfInfo,n=g(t.conf_id,0);l.info("BLE: close linkage, ret=",n)}(0,u.setIsInPairConf)(!1),$dispatch(coreUi.changeCallStatus("")),(0,c.handleIsShowJoinButton)(!0),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changePairConfRole(0)),(0,u.setPairConfInfo)([]),coreCommon.showAlert(""+language.PAIR_JOIN_CONF_FAILED)},_=t.handleEndConf=function(){l.info("BLE: start to close conf page"),(0,u.setIsInPairConf)(!1),h($getState().conf.confHandle),$dispatch(coreUi.changeConfHandle("")),f.ToolbarManager.setConfHandle(""),$dispatch(coreUi.changePairConfRole(0)),(0,u.setPairConfInfo)([]),(0,c.handleClosePairConfPage)()},C=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start to end or leave meeting, confId="+t+", isEnd="+n),r=$getState().synergismInfo.tokenIndex,a=void 0,!n){e.next=9;break}return e.next=6,coreCall.pairLinkageEnd(r,t);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,coreCall.pairLinkageLeave(r,t);case 11:a=e.sent;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),w=(t.startPairMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start pair meeting"),(0,u.setPairConfInfo)(t),n=$getState().synergismInfo.pairedDeviceConf,constant.PAIR_CALL_STATE.IDLE===n.callstate||t.conf_id===n.confid){e.next=7;break}return l.info("BLE: paired peripherals is busy, remote conf id =",n.confid),m(!1),e.abrupt("return");case 7:return e.next=9,g(t.conf_id,1);case 9:if(r=e.sent,0===r.result){e.next=14;break}return l.info("BLE: send open linkage request failed, res=",r),m(!1),e.abrupt("return");case 14:l.info("BLE: send open linkage request success");case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairLinkageConfNotify=function(e){l.info("BLE: notify, get open or close linkage result"),0===e.result?(l.info("BLE: open or close linkage with peripherals success"),e.ison&&w($getState().synergismInfo.pairConfInfo)):(l.info("BLE: open or close linkage with peripherals failed"),e.ison&&m(!1))},t.pairCreatHandleAndGetToken=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: prepare to invite paired peripherals join meeting, conf id=",t.conf_id),e.next=3,p(t.conf_id);case 3:if(n=e.sent,0===n.result){e.next=8;break}return l.info("BLE: creat conf handle failed, res=",n),m(!0),e.abrupt("return");case 8:return r=n.param.conf_handle,$dispatch(coreUi.changeConfHandle(r)),f.ToolbarManager.setConfHandle(r),l.info("BLE: creat conf handle success, confHandle=",r),a=$getState().myInfo.bind_no,e.next=15,d(r,a,t.general_pwd,t.token);case 15:i=e.sent,0===i.result?((0,u.setIsInPairConf)(!0),l.info("BLE: send get conf ctrl [token] request success")):(l.info("BLE: send get conf ctrl [token] request failed, res=",i),m(!0));case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.pairInviteJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: notify, get request conf [token] result, res=",t),n=t.param,0!==n.result){e.next=21;break}if(r=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIR_SUCCESS===r){e.next=7;break}return l.info("BLE: no paired peripherals, pair state=",r),e.abrupt("return");case 7:if(a=$getState().synergismInfo.pairedDeviceConf,constant.PAIR_CALL_STATE.IDLE!==a.callstate){e.next=17;break}return l.info("BLE: paired peripherals is idle, start invite now, handle=",n.handle),i=$getState().synergismInfo.pairedDeviceInfo.sip_number,e.next=13,v(n.handle,i);case 13:s=e.sent,0===s.result?l.info("BLE: send invite request success"):(l.info("BLE: send invite request failed, ret=",s),m(!0)),e.next=19;break;case 17:l.info("BLE: paired peripherals is busy, not invite"),m(!0);case 19:e.next=23;break;case 21:l.info("BLE: get conf [token] failed"),m(!0);case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairInviteAttendeeNotify=function(e){0===e.ret?(l.info("BLE: notify, invite attendee success, handle=",e.handle),coreCall.handlePairCallResult()):(l.info("BLE: notify, invite attendee failed, param=",e),m(!0))},t.pairStartEndMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start to end or leave meeting, isEnd=",t),$getState().synergismInfo.inPairConf){e.next=4;break}return l.info("BLE: not in pair conf, can not end or leave meeting"),e.abrupt("return");case 4:return n=$getState().synergismInfo.pairConfInfo.conf_id,e.next=7,C(n,t);case 7:r=e.sent,0!==r.result?l.info("BLE: end or leave pair meeting failed, res=",r):(l.info("BLE: end or leave pair meeting success"),_());case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},653:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.closePair=t.getPairConfPasResult=t.joinPairConfNoPas=t.joinPairConf=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=n(654),l=n(153),d=n(655),p=coreLogger.getLogger("logic")("synergism/client/conf"),h=null,g=function(e){(0,f.clearCallbackFuncs)(constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF),(0,d.endPairWithPeripherals)(e)},v=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new s.default(function(){var e=(0,u.default)(o.default.mark(function e(n,r){var a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){p.info("joinPairConfResult: param=",e),h&&clearTimeout(h),constant.PAIR_CONF_RESULT.SUCCESS===e.result?n():r(constant.PAIR_CONF_RESULT.BUSY===e.result?language.PAIR_JOIN_CONF_BUSY:constant.PAIR_CONF_RESULT.INVALID===e.result?language.MAXHUB_INVALID_CONF:language.PAIR_JOIN_CONF_FAILED)},(0,f.setCallbackFuncs)(constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,a),i=void 0,i=""===t.chairman_pwd||isNaN(t.chairman_pwd)?t.general_pwd?t.general_pwd:"":t.chairman_pwd,s={command_seq:constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,param:{confId:isNullOrEmpty(t.vmr_id)?t.conf_id:t.vmr_id,confAcs:t.access_number,confPas:i}},p.info("sendJoinPairConf: confId = "+s.param.confId+", confAcs = "+s.param.confAcs),e.next=8,coreCall.sendUniversalInfo($getState().synergismInfo.tokenIndex,s);case 8:c=e.sent,0!==c.result?(p.info("sendJoinPairConf: send command failed, ret=",c),r(language.PAIR_JOIN_CONF_FAILED)):(h&&clearTimeout(h),h=setTimeout(function(){p.info("sendJoinPairConf: wait callback timeout, clear callback function"),r(language.PAIR_JOIN_CONF_FAILED)},1e4));case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),m=!1,_=t.joinPairConf=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=4;break}return p.info("joinPairConf: joining conf now, don't multiple click"),window.Toast(language.PAIR_JOIN_CONF_MULT,2,null,!1),e.abrupt("return");case 4:m=!0,$dispatch(coreUi.changePairConfInfo(t)),v(t).then(function(){m=!1,window.CLIENTCONFIG.ISMOBILE&&(window.goRoute("joinPairConfSuccess"),(0,d.endPairWithPeripherals)())},function(e){m=!1,g(e)});case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),C=!1;t.joinPairConfNoPas=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.info("joinPairConfNoPas: start join pair conf no [password]"),e.next=3,(0,l.getConfInfo)(t.conf_id,t.cycle_conf_id);case 3:C=!0;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getPairConfPasResult=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C&&(p.info("getPairConfPasResult: get pair conf info success, start enter conf"),n=t.get_conf_info_result.conf_list_info,_(n),C=!1);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.closePair=function(){if(m||C)return void p.info("closePair: joining conf now, return");(0,d.endPairWithPeripherals)(language.PAIR_CLOSED)}},654:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreLogger.getLogger("logic")("synergism/client/info"),a=new Array;t.setCallbackFuncs=function(e,t){r.info("set callback func, command = "+e),a[e]=t},t.clearCallbackFuncs=function(e){r.info("clear callback func, command = "+e),"function"==typeof a[e]&&(a[e]=null)},t.handleClientUniversalInfoNotify=function(e){r.info("handleClientUniversalInfoNotify, param = ",e);var t=JSON.parse(e.info),n=t.event_seq,o=t.command_rsp;n?r.info("unknow event, event_seq = ",n):o&&("function"==typeof a[o]?(a[o](t.param),a[o]=null):r.info("invalid command, command_rsp = ",o))}},655:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairClosedNotify=t.endPairWithPeripherals=t.endOldPairAndRepair=t.handlePairClosed=t.sendMakePair=t.queryPairInfo=t.startMakePair=t.startQRCodePair=t.startManualPair=t.startAutoBlePair=t.initTupPairClient=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(3),l=r(f),d=n(406),p=n(228),h=coreLogger.getLogger("logic")("synergism/client/pair"),g="",v=void 0,m=void 0,_=void 0,C=function(e){return new l.default(function(t,n){n(e)})},w=function(){var e=$getState().login.account,t="";if(window.CLIENTCONFIG.ISMOBILE)t=window.device.uuid+e;else{t=(window.cwmpLocalIp?window.cwmpLocalIp:window.localIp)+e}g=coreCommon.sha512(t),h.info("getUnicode: creat device unicode success")},S=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changePairType(constant.PAIR_TYPE.IDLE)),$dispatch(coreUi.changePairTokenIndex(-1)),(0,d.setPairedDeviceInfo)({}),$dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairState(constant.PAIR_STATE.IDLE));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),I=(t.initTupPairClient=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.pairEnable(1,1);case 2:t=e.sent,h.info("initTupPairClient: enable tup pair ret=",t),w(),S();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){window.CLIENTCONFIG.ISMOBILE&&window.confirm(language.FORCE_PAIR_TIPS).then(function(e){e.ret?(h.info("forcePairConfirm: userClick force pair"),window.CLIENTCONFIG.ENABLE_IT_MEETING?y(_,constant.PAIR_TYPE.QRCODE,!0):window.startScanQRCode(language.SCAN_QR_CODE_TIPS,!0)):h.info("forcePairConfirm: userClick cancel force pair")})}),E=function(e){if(h.info("dealPairFailed: reason=",e),e===constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_SUPPORT_FORCE)return S(),void I();window.CLIENTCONFIG.ISMOBILE&&$getState().synergismInfo.pairType!==constant.PAIR_TYPE.AUTO&&window.Toast(language.PAIRING_FAILED,2,null,!1),S()},N=function(e){var t=e.pair_session_res.id,n=e.pair_session_res.pair_result;if(h.info("dealPairSuccess: [token] id="+t+", device name="+n.device_name+", interval="+n.heartbeat_interval+", ip="+n.ip),$dispatch(coreUi.changePairTokenIndex(t)),(0,d.setPairedDeviceInfo)(n),h.info("dealPairSuccess: change pair state to <pair success>"),$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIR_SUCCESS)),coreSetting.setCurrentCode(""),window.CLIENTCONFIG.ISMOBILE){window.Toast(language.DEVICE_PAIRED_TOAST,2,null,!1);var r=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,a=r?"terminalPaired":"main/conference";window.getRoute()&&window.getRoute()!==a&&window.goRoute(a)}},b=(t.startAutoBlePair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("startAutoBlePair: start auto ble pair"),n=$getState().synergismInfo.pairState,r=2,t.id!==$getState().synergismInfo.nearestDevice.id?(t.count=1,(0,d.setNearestDevice)(t)):(t.count=t.count<r?t.count+1:r,(0,d.setNearestDevice)(t)),h.info("startAutoBlePair: the nearest device=",t),constant.PAIR_STATE.IDLE!==n){e.next=11;break}$dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairDeviceInfo(t)),T(t.advertising,constant.PAIR_TYPE.AUTO,!1),e.next=22;break;case 11:if(constant.PAIR_STATE.PAIR_SUCCESS!==n){e.next=21;break}if(a=$getState().synergismInfo.pairDevice,!(t.id!==a.id&&t.count>=r||i)){e.next=19;break}return h.info("startAutoBlePair: the nearest peripherals changed, try to change pair device, isOut ="+i+", old device="+a),e.next=17,k();case 17:o=e.sent,o?($dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairDeviceInfo(t)),T(t.advertising,constant.PAIR_TYPE.AUTO,!1)):h.info("startAutoBlePair: try to change pair peripherals failed");case 19:e.next=22;break;case 21:h.info("startAutoBlePair: in pairing or cancel pairing, quit auto pair");case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.startManualPair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("startManualPair: start manual pair, pairCode="+t+", isForce="+r),""!==t){e.next=4;break}return h.info("startManualPair: error, pair code is null"),e.abrupt("return");case 4:if(n=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIRING!==n&&constant.PAIR_STATE.CANCEL_PAIRING!==n){e.next=9;break}return h.info("startManualPair: in pairing or ending pair state, can not start new pair"),coreCommon.showAlert(""+language.IN_PAIRING_OR_ENDING_PAIR_STATE),e.abrupt("return");case 9:T(t,constant.PAIR_TYPE.MANUAL,r);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),T=(t.startQRCodePair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("startQRCodePair: pairCode="+t+", isForce="+a),""!==t){e.next=4;break}return h.info("startQRCodePair: pair code is null"),e.abrupt("return");case 4:if(n=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIRING!==n&&constant.PAIR_STATE.CANCEL_PAIRING!==n){e.next=9;break}return h.info("startQRCodePair: in pairing or canceling state, can not start new pair"),coreCommon.showAlert(""+language.IN_PAIRING_OR_ENDING_PAIR_STATE),e.abrupt("return");case 9:if(constant.PAIR_STATE.PAIR_SUCCESS!==n){e.next=13;break}return h.info("startQRCodePair: has paired, close old pair first"),e.next=13,k();case 13:if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.getRoute()&&"main/conference"!==window.getRoute()&&window.goRoute("main/conference"),window.switchToFront()),!window.CLIENTCONFIG.ENABLE_IT_MEETING||!window.pcLoginState()){e.next=32;break}h.info("PC state = "+window.pcLoginState()),e.next=20;break;case 20:return e.next=22,coreCall.callMultiTerminalCheck();case 22:if(r=e.sent,window.requestMultiTerminalPromise=null,!r){e.next=26;break}return e.abrupt("return");case 26:return e.next=28,coreCall.dealSipLoginCheck();case 28:window.requestSipLoginPromise=null,T(t,constant.PAIR_TYPE.QRCODE,a);case 30:e.next=33;break;case 32:T(t,constant.PAIR_TYPE.QRCODE,a);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.startMakePair=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("startMakePair: change pair state to <pairing>, pair type=",n+", isForce=",r),$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIRING)),$dispatch(coreUi.changePairType(n)),x(t).then(function(e){return A(e,r)},function(e){return C(e)}).then(function(e){N(e)},function(e){E(e)});case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),y=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIRING)),$dispatch(coreUi.changePairType(n)),A(t,r).then(function(e){N(e)},function(e){E(e)});case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(e){if(0===e.param.result&&0===e.param.pair_info.result_code){var t=e.param.pair_info;_=e.param.pair_info,h.info("queryPairInfoNotify: get peripherals info success, file path="+t.public_key_file+", remain lock time="+t.remain_lock_time+", remain times="+t.remain_times+", remote ip="+t.remote_ip),v(t)}else h.info("queryPairInfoNotify: get peripherals info failed, data=",e),m(constant.MAKE_PAIR_FAILED_REASON.FAILED)},x=t.queryPairInfo=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.default(function(){var e=(0,u.default)(s.default.mark(function e(n,r){var a,i,c,u,f,l,d,_,C,S,I,E,N;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v=n,m=r,e.next=4,coreTup.getUportalInstance();case 4:if(a=e.sent,a.setNotifyFunc(360476,O),i=$getState().login,c=i.isSupportProxy,u=i.proxyAddress,f=i.proxyPort,l=i.euaServer,d=i.account,h.info("[pair] queryPairInfo pairCode:",t),$getState().login.isSupportAS&&(l=(0,p.getUportalApi)().IP.value,h.info("[pair] euaServer isSupportAS env :",l)),l&&""!==l||(h.info("queryPairInfo: the eua server info is null"),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)),_=l.split(":"),C=_[0],S=_[1]?_[1]:8544,h.info("queryPairInfo server:",C),c||(u=null,f=null),""===g&&w(),I=window.cwmpLocalIp?window.cwmpLocalIp:window.localIp,E={uri:C,port:S,pairCode:t,unicode:g,localIp:I,proxyIp:u,proxyPort:f,filePath:window.APP_DATA_PATH,account:d},window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=23;break}window.webView.getPairInfo((0,o.default)(E)),e.next=27;break;case 23:return e.next=25,a.getPairInfo(C,S,t,g,I,u,f,window.APP_DATA_PATH,d);case 25:N=e.sent,0!==N.result?(h.info("queryPairInfo: send request failed, ret=",N),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)):h.info("queryPairInfo: send request success");case 27:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),A=t.sendMakePair=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new l.default(function(){var e=(0,u.default)(s.default.mark(function e(r,a){var o,i,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){var t=e.param;1===t.is_permit?(h.info("pairResultNotify: make pair success"),r(t)):t.reason===constant.SYNERGISM_FAIL_REASON.USER_NUM_LIMITED?(h.info("pairResultNotify: paired client over limit, support_force=",t.support_force),a(t.support_force?constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_SUPPORT_FORCE:constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_UNSUPPORT_FORCE)):(h.info("pairResultNotify: make pair failed, param=",t),a(constant.MAKE_PAIR_FAILED_REASON.FAILED))},e.next=3,coreTup.getCallInstance();case 3:return i=e.sent,i.setNotifyFunc(98658,o),h.info("sendMakePair: isForce=",n),e.next=8,coreCall.makePair($getState().login.account,t.tmpKey,t.public_key_file,t.remote_sip_num,n);case 8:c=e.sent,0!==c.result?(h.info("sendMakePair: send request failed, ret=",c),a(constant.MAKE_PAIR_FAILED_REASON.FAILED)):(u=c.param.id,$dispatch(coreUi.changePairTokenIndex(u)),h.info("sendMakePair: send request success, [token] id=",u));case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();window.getPairInfoResult=function(e){if(window.CLIENTCONFIG.ENABLE_IT_MEETING,!1){var t={result_code:e.pair_info_result.result_code,tmpKey:e.pair_info_result.tmpkey,public_key_file:e.pair_info_result.public_key_file,remain_lock_time:e.pair_info_result.remain_lock_time,remain_times:e.pair_info_result.remain_times,remote_sip_num:e.pair_info_result.remote_sip_num,remote_ip:e.pair_info_result.remote_ip},n={result:e.result,pair_info:t};return void O({param:n})}O(e)};var L=t.handlePairClosed=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("handlePairClosed: deal pair closed"),e.next=3,S();case 3:coreSetting.setIsResultVisible(!1),window.getRoute()&&"terminalPaired"===window.getRoute()&&window.goRoute("main/conference"),window.CLIENTCONFIG.ISMOBILE&&""!==t&&window.Toast(t,2,null,!1);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),k=(t.endOldPairAndRepair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("endOldPairAndRepair: start to end old pair and repair with peripherals, type="+t+", code=",n),e.next=3,k(language.PAIR_CLOSED);case 3:t===constant.PAIR_TYPE.AUTO||b(n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endPairWithPeripherals=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().synergismInfo.tokenIndex,h.info("endPairWithPeripherals: [token] index=",t),-1===t){e.next=11;break}return h.info("endPairWithPeripherals: change pair state to <cancel pairing>"),$dispatch(coreUi.changePairState(constant.PAIR_STATE.CANCEL_PAIRING)),e.next=7,coreCall.cancelPair(0,t);case 7:return n=e.sent,h.info("endPairWithPeripherals: send end pair with peripherals request, ret=",n),e.next=11,L(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.pairClosedNotify=function(e){h.info("pairClosedNotify: param=",e),constant.SYNERGISM_FAIL_REASON.SOFT_TERMINAL_INITIATE===e.reason?h.info("pairClosedNotify: the software initiative to close the pair"):L(language.PAIR_CLOSED)}},656:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.delConfInfoFromDb=t.getConfInfoFromDb=t.saveConfInfoToDb=t.changeConfInfoCardState=t.changeConfImmediately=t.toggleVideoConf=t.changeMeetingSubject=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(2),u=r(c),f=(t.changeMeetingSubject=function(e){return $dispatch(coreUi.changeConfSubject(e))},t.toggleVideoConf=function(e){return $dispatch(coreUi.changeMeetingType(e))},t.changeConfImmediately=function(e){return $dispatch(coreUi.toggleConfImmediately(e))},t.changeConfInfoCardState=function(e){return $dispatch(coreUi.toggleConfInfoCard(e))},t.saveConfInfoToDb=function(){var e=(0,u.default)(o.default.mark(function e(t,n){var r,a,i,c,u,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"confInfoList"});case 2:return r=e.sent,a=[],isNullOrEmpty(r)||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)?a=[{confName:n,confId:t}]:(i=JSON.parse(r.value),c=f(i,t),c instanceof Array?(a=c,c.length<5?a.unshift({confName:n,confId:t}):(a.pop(),a.unshift({confName:n,confId:t}))):a=[{confName:n,confId:t}]),u=(0,s.default)(a),l={key:"confInfoList",value:u},e.next=9,coreDb.saveLoginSetting(l);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getConfInfoFromDb=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"confInfoList"});case 2:t=e.sent,isNullOrEmpty(t)||isNullOrEmpty(t.key)||isNullOrEmpty(t.value)||(n=JSON.parse(t.value))instanceof Array&&$dispatch(coreUi.updateLatestConfInfo(n));case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.delConfInfoFromDb=function(){var e=(0,u.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={key:"confInfoList",value:""},e.next=3,coreDb.saveLoginSetting(t);case 3:$dispatch(coreUi.updateLatestConfInfo([]));case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e,t){return e.filter(function(n,r){n.confId===t&&e.splice(r,1)}),e})},69:function(e,t,n){e.exports={default:n(70),__esModule:!0}},696:function(e,t,n){n(697);var r=n(8).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},697:function(e,t,n){n(137)("getOwnPropertyNames",function(){return n(698).f})},698:function(e,t,n){e.exports=n(0)(596)},699:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(3),o=r(a),i=n(69),s=r(i),c=n(123),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=n(4),g=r(h),v=n(5),m=r(v),_=n(207),C=n(166),w=n(194),S=n(330),I=coreLogger.getLogger("conf")("logic/video/AVCNativeManager"),E=function(){function e(){(0,g.default)(this,e),this.needDestroy=!1,this.needDestroyBfcp=!1,this.needCreateRemoteWin=!1,this.needUpdateLocalWinCallId=!1,this.isInCreateBfcp=!1,this.callId=0,this.avcFrameHandles=0,this.localVideoHwnd=0,this.remoteVideoHwnd=0,this.avcBfcpHwnd=0}return(0,m.default)(e,[{key:"getAvcFrameHandles",value:function(){return this.avcFrameHandles}},{key:"getLocalVideoHwnd",value:function(){return this.localVideoHwnd}},{key:"getRemoteVideoHwnd",value:function(){return this.remoteVideoHwnd}},{key:"getAvcBfcpHwnd",value:function(){return this.avcBfcpHwnd}},{key:"initCallInterface",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n,r){var a,o,i,s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("initCallInterface callId = "+t+",mode = "+n+",version = "+r),e.next=3,_.NativeInterface.initNativeScreen(n,r,window.langcode);case 3:if(!((a=e.sent)>0)){e.next=32;break}if(!this.needDestroy){e.next=9;break}return I.info("initCallInterface needDestroy is true"),_.NativeInterface.uninitNativeScreen(a),e.abrupt("return",-1);case 9:if($getState().login.sipLoginOnly?delegate.winHide():delegate.winMinimize(),this.avcFrameHandles=a,o=[{type:0}],0===n&&(o[0].remoteUser=$getState().call.userInfo.name),0!==(i=this.localVideoHwnd)||0===n){e.next=21;break}return e.next=17,_.NativeInterface.createWindows(a,1,0,o);case 17:s=e.sent,I.info("localWnd 41"+s+",this.needUpdateLocalWinCallId = "+this.needUpdateLocalWinCallId),i=s[0].hwnd,this.needUpdateLocalWinCallId&&this.updateLocalwindowCallId(this.callId);case 21:return this.localVideoHwnd=i,i>0&&(I.info("NativeInterface.setLocalWindow"),_.NativeInterface.setLocalWindow(t,i)),c=$getState().conf.isEnterDataConf,C.SvcAtdManager.reportIsDataConf(c,!0),this.updateCameraList(),this.initAvcParams(),this.needCreateRemoteWin&&this.initRemotWindow(this.callId),C.SvcAtdManager.setIsSupportChatNative(a),e.abrupt("return",0);case 32:return I.info("init AVC video native frame failed,please check!"),e.abrupt("return",-1);case 34:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateCameraList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=-1,n=$getState().call.cameraDevicesList,t=-1===a?$getState().setting.camIndex:a,r={},r=(0,u.default)(r,{camera_devices:{camIndex:t,cameraDevicesList:n}}),this.setAvcParam(r);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"initAvcParams",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o,i,c,f,d,p,h,g,v,m,_,C,E,N,b,T,y,O,x,A,L,k,R,M,D;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.getCameraDevices();case 2:return t=$getState().conf,n=t.confSubject,r=t.confServerId,a=t.vmrId,o=t.memberListInfo,isNullOrEmpty(a)||(r=a),w.ToolbarManager.setChairmanState(o,!0),isNullOrEmpty(n)&&(n=$getState().call.userInfo.name,isNullOrEmpty(n)&&(n=$getState().call.userInfo.account)),i={set_window_title:{title:n,confID:r}},c=$getState().conf.setPreviewsCount,c>0&&(i=(0,u.default)(i,{set_conf_userinfo:{count:c}})),i=(0,u.default)(i,{vmr_right:!!$getState().conf.showvmrornot}),f=$getState().conf,d=f.isConfMicMute,p=f.currentConfInfo,h=$getState().call,g=h.isOpenCamera,v=h.isMuteMic,m=h.isMuteSpk,_=h.cameraNum,C=h.cameraDevicesList,E=h.spkDevicesList,N=h.micDevicesList,b=$getState().setting,T=b.camIndex,y=b.spkIndex,O=b.micIndex,x=v||d?0:100,m=m?1:0,e.next=17,coreAccount.getLoginModel();case 17:return A=e.sent,i=(0,u.default)(i,{isSupportAS:A.isSupportAS?1:0}),i=(0,u.default)(i,{init_device_state:{isMuteSpk:m,mic_volume:x,camera_on:_>0?g:-1}}),i=(0,u.default)(i,{camera_devices:{camIndex:T,cameraDevicesList:C}}),i=(0,u.default)(i,{mic_devices:{micIndex:O,micDevicesList:N}}),i=(0,u.default)(i,{spk_devices:{spkIndex:y,spkDevicesList:E}}),i=(0,u.default)(i,{set_use_meeting:{use_meeting:window.CLIENTCONFIG.USE_MEETING}}),i=(0,u.default)(i,{general_pwd:p.general_pwd?p.general_pwd:null}),i=(0,u.default)(i,{is_free_user:$getState().login.isFreeUser}),i=(0,u.default)(i,{is_in_conf:""===$getState().conf.confHandle?0:1}),L=$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING,k=$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,L?i=(0,u.default)(i,{has_delete_member:0}):k&&(i=(0,u.default)(i,{has_delete_member:1})),R=$getState().myInfo.enableDoubleScreen,i=(0,u.default)(i,{enableDoubleScreen:R}),M=JSON.parse((0,s.default)(i)),void 0!==M.set_window_title&&(D=M.set_window_title.title,M.set_window_title.title=D?D.substr(0,1)+"***":""),M.general_pwd=M.general_pwd?"***":"null",I.info("AVC initAvcParams param = "+(0,s.default)(M)),S.EncoderAdpt.clear(),i=(0,u.default)(i,{calc_cpu_rate:{open:1,duration_ms:5e3}}),e.next=40,this.setAvcParam(i);case 40:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateLocalwindowCallId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("updateLocalwindowCallId",t),n=this.localVideoHwnd,n>0?(I.info("NativeInterface.setLocalWindow"),_.NativeInterface.setLocalWindow(t,n)):(this.needUpdateLocalWinCallId=!0,this.callId=t,I.info("updateLocalwindowCallId need wait local avc win create"));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"initRemotWindow",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("initRemotWindow",t),!(this.avcFrameHandles>0)){e.next=13;break}if(n=[{type:1}],0!==(r=this.remoteVideoHwnd)){e.next=10;break}return e.next=7,_.NativeInterface.createWindows(this.avcFrameHandles,1,0,n);case 7:a=e.sent,r=a[0].hwnd,I.info("remoteHwnd 69",r,a);case 10:r>0&&(this.remoteVideoHwnd=r,_.NativeInterface.setRemoteWindow(t,r)),e.next=16;break;case 13:this.needCreateRemoteWin=!0,this.callId=t,I.info("initRemotWindow need wait avc win create");case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"initBfcpWindow",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,f,d,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("initBfcpWindow"),!(this.avcBfcpHwnd>0)){e.next=4;break}return I.info("AVC bfcp native frame have already created return!"),e.abrupt("return");case 4:if(!this.isInCreateBfcp){e.next=7;break}return I.info("AVC bfcp native frame is in creating return!"),e.abrupt("return");case 7:return this.isInCreateBfcp=!0,r=constant.AVC_VIEW_MODE.BFCP_MODE,e.next=11,_.NativeInterface.initNativeScreen(r,p,window.langcode,!0);case 11:if(!((a=e.sent)>0)){e.next=30;break}if(this.avcBfcpHwnd=a,this.isInCreateBfcp=!1,!$getState().conf.isDataConfSharing){e.next=19;break}return I.info("isDataConfSharing is true  destroy bfcpfHwnd "),this.closeBfcpFrame(),e.abrupt("return");case 19:if(!this.needDestroyBfcp){e.next=23;break}return I.info("initBfcpWindow need destroy bfcpfHwnd"),this.closeBfcpFrame(),e.abrupt("return");case 23:return e.next=25,_.NativeInterface.createWindows(a,1,0,[{type:2}]);case 25:o=e.sent,o&&o.length>0&&(_.NativeInterface.setBFCPWindow(t,o[0].hwnd,n),i=$getState().conf,s=i.confSubject,c=i.confServerId,f=i.vmrId,isNullOrEmpty(f)||(c=f),d=(0,u.default)({},{set_window_title:{title:s,confID:c}}),_.NativeInterface.setParam(d,a),C.SvcAtdManager.setIsSupportChatNative(a)),(!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN||window.isHubEnv)&&this.switchVideoToMin(),e.next=31;break;case 30:I.error("init bfcp avc win fail");case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeBfcpFrame",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.avcBfcpHwnd>0?(I.info("closeBfcpFrame close bfcp avc win"),_.NativeInterface.uninitNativeScreen(this.avcBfcpHwnd,!0),this.avcBfcpHwnd=0,this.needDestroyBfcp=!1,this.isInCreateBfcp=!1):this.isInCreateBfcp&&(I.info("closeBfcpFrame need destory bfcp avc win after create"),this.needDestroyBfcp=!0);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"nativeNotifyUpdateBfcpFrameWnd",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_.NativeInterface.setBFCPWindow($getState().call.callId,t,!1);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCallInterface",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.avcFrameHandles>0?(I.info("closeCallInterface close avc win"),appService.showMainWindow(!0),_.NativeInterface.uninitNativeScreen(this.avcFrameHandles),this.avcFrameHandles=0):(this.needDestroy=!0,I.info("closeCallInterface need destory avc win after create")),e.abrupt("return",0);case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"setAvcParam",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.avcFrameHandles>0&&t&&"{}"!==(0,s.default)(t)&&(I.info("NativeInterface.setParam is avcFrameHandles, avcFrameHandles"),_.NativeInterface.setParam(t,this.avcFrameHandles));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"setSubject",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("setSubject confSubject = "),n=$getState().conf,r=n.confServerId,a=n.vmrId,isNullOrEmpty(a)||(r=a),o=(0,u.default)({},{set_window_title:{title:t,confID:r}}),this.setAvcParam(o);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"setConfServerId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("setConfServerId confServerId = "+t),n=(0,u.default)({},{set_window_title:{title:$getState().conf.confSubject,confID:t}}),this.setAvcParam(n);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSwitchToVideo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===$getState().call.callId){e.next=3;break}return I.error("The callid is not find."),e.abrupt("return");case 3:return I.info("handleSwitchToVideo"),I.info("cwp init initCallInterface handleSwitchToVideo "),e.next=7,this.initCallInterface(t,1,1);case 7:return n=e.sent,this.initRemotWindow(t),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchVideoToMin",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return I.info("AVC video native frame no exist"),e.abrupt("return");case 3:if(I.info("switchVideoToMin in avc"),t=$getState().conf,n=t.isShowMinWin,r=t.svcMiniViewMode,!n){e.next=8;break}return window.isDataSharing&&(this.setViewMode(constant.AVC_VIEW_MODE.MIN_WIN_SINGLE),I.info("avc switchVideoToMin share owner is self,reSet layout = "+(constant.AVC_VIEW_MODE.MIN_WIN_SINGLE+256))),e.abrupt("return");case 8:0===r&&(r=constant.AVC_VIEW_MODE.MIN_WIN_SINGLE),this.setViewMode(r),I.info("changeIsShowMinWin true 3"),$dispatch(coreUi.changeIsShowMinWin(!0));case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchVideoToMain",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return I.info("AVC video native frame no exist"),e.abrupt("return");case 3:if(I.info("switchVideoToMain in avc"),t=$getState().conf.isShowMinWin){e.next=7;break}return e.abrupt("return");case 7:this.setViewMode(constant.AVC_VIEW_MODE.VIDEO_MODE),I.info("changeIsShowMinWin false 3"),$dispatch(coreUi.changeIsShowMinWin(!1));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchAudioToMain",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return I.info("AVC audio native frame no exist"),e.abrupt("return");case 3:if(I.info("switchAudioToMain in avc"),t=$getState().conf.isShowMinWin){e.next=7;break}return e.abrupt("return");case 7:this.setViewMode(constant.AVC_VIEW_MODE.AUDIO_MODE),I.info("changeIsShowMinWin false 3"),$dispatch(coreUi.changeIsShowMinWin(!1));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"setViewMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.avcFrameHandles,n>0&&(r=n),a=0,window.isDataSharing&&(a=256),r>0?(_.NativeInterface.setViewMode(r,t+a),[constant.AVC_VIEW_MODE.MIN_WIN_MIN,constant.AVC_VIEW_MODE.MIN_WIN_SINGLE,constant.AVC_VIEW_MODE.MIN_FLOAT_BIG_ONE].includes(t)&&$dispatch(coreUi.changeConfMiniViewMode(t))):I.info("video frame hwnd is 0,please check!");case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCPURate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.cpu&&(I.info("handleCPURate:",S.EncoderAdpt),S.EncoderAdpt.feed(t.cpu,t.version));case 1:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getPromise",value:function(){var e={};return e.promise=new o.default(function(t,n){e.resolve=t,e.reject=n}),e}}]),e}();t.default=E},70:function(e,t,n){var r=n(8),a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},700:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i=n(1),s=r(i),c=n(2),u=r(c),f=n(69),l=r(f),d=n(4),p=r(d),h=n(5),g=r(h),v=coreLogger.getLogger("model")("model/nativeWndService/nativeWndService"),m=(o=a=function(){function e(){(0,p.default)(this,e)}return(0,g.default)(e,null,[{key:"handlePageSwitch",value:function(e){v.info("handlePageSwitch,",e.param),coreCommon.Observer.publish("handlePageSwitch",e.param)}},{key:"handleSharingAppEnded",value:function(){coreCommon.Observer.publish("OnSharingAppEnded")}},{key:"handleNotifyNativeDataRenderSize",value:function(e){v.info("handleNotifyNativeDataRenderSize,",e.param),coreCommon.Observer.publish("handleNativeDataRenderSize",e)}},{key:"handleNotifyStartShare",value:function(e){v.info("handleNotifyStartShare",e.param),coreCommon.Observer.publish("OnNativeUserStartDataShare",e)}},{key:"handleNotifyStopShare",value:function(e){v.info("handleNotifyStopShare",e.param),coreCommon.Observer.publish("OnNativeUserStopDataShare",e)}},{key:"handleLeaveConf",value:function(e){v.info("handleLeaveConf"),coreCommon.Observer.publish("OnNativeUserLeaveConf",e)}},{key:"handleEndConf",value:function(e){v.info("handleEndConf"),coreCommon.Observer.publish("OnNativeUserEndConf",e)}},{key:"handleNotifyRequestControl",value:function(e){v.info("handleNotifyRequestControl"),coreCommon.Observer.publish("onNativeNotifyRequestControl",e)}},{key:"handleNotifyReleaseControl",value:function(e){v.info("handleNotifyReleaseControl"),coreCommon.Observer.publish("onNativeNotifyReleaseControl",e)}},{key:"handleNotifyShowConfMember",value:function(e){v.info("handleNotifyShowConfMember"),coreCommon.Observer.publish("onNativeNotifyShowConfMember",e)}},{key:"handleNotifyAddConfMember",value:function(e){v.info("handleNotifyAddConfMember"),coreCommon.Observer.publish("onNativeNotifyAddConfMember",e)}},{key:"handleSetMic",value:function(e){v.info("handleSetMic"),coreCommon.Observer.publish("onNativeNotifySetMic",e)}},{key:"handleSetSpeaker",value:function(e){v.info("handleSetSpeaker"),coreCommon.Observer.publish("onNativeNotifySetSpeaker",e)}},{key:"handleDataFirstFrameRecv",value:function(e){v.info("handleDataFirstFrameRecv start"),coreCommon.Observer.publish("onNativeNotifyDataFirstFrameRecv",e)}},{key:"handleWatchNotify",value:function(e){v.info("handleWatchNotify,",e.param),coreCommon.Observer.publish("handleWatchNotify",e.param)}},{key:"handlePageSwitchNotify",value:function(e){v.info("handlePageSwitchNotify,",e.param),coreCommon.Observer.publish("handlePageSwitchNotify",e.param)}},{key:"handleModeSwitchNotify",value:function(e){v.info("handleModeSwitchNotify,",e.param),coreCommon.Observer.publish("handleModeSwitchNotify",e.param)}},{key:"handleSetMicVol",value:function(e){v.info("handleSetMicVol",e.param),coreCommon.Observer.publish("handleSetMicVol",e.param)}},{key:"handleSetSpkVol",value:function(e){v.info("handleSetSpkVol",e.param),coreCommon.Observer.publish("handleSetSpkVol",e.param)}},{key:"handleSetCamera",value:function(e){v.info("handleSetCamera",e.param),coreCommon.Observer.publish("handleSetCamera",e.param)}},{key:"handleDial",value:function(e){v.info("handleDial",e.param),coreCommon.Observer.publish("handleDial",e.param)}},{key:"handleChairman",value:function(e){v.info("handleChairman",e.param),coreCommon.Observer.publish("handleChairman",e.param)}},{key:"handleHangup",value:function(e){v.info("handleHangup",e.param),coreCommon.Observer.publish("handleHangup",e.param)}},{key:"handleAddMemberDialog",value:function(e){v.info("handleAddMemberDialog",e.param),coreCommon.Observer.publish("handleAddMemberDialog",e.param)}},{key:"handleAttendanceDialog",value:function(e){v.info("handleAttendanceDialog",e.param),coreCommon.Observer.publish("handleAttendanceDialog",e.param)}},{key:"handleShowQos",value:function(e){v.info("handleShowQos",e),coreCommon.Observer.publish("handleShowQos",e.param)}},{key:"handleShowClient",value:function(e){v.info("handleShowClient",e),coreCommon.Observer.publish("onNativeNotifyShowClient",e)}},{key:"handleNotifyPrepareShowRemoteControl",value:function(e){v.info("handleNotifyPrepareShowRemoteControl",e),coreCommon.Observer.publish("onNativeNotifyPrepareRemoteControl",e)}},{key:"handleNotifyChairmanRemoteControl",value:function(e){v.info("handleNotifyChairmanRemoteControl",e),coreCommon.Observer.publish("onNativeNotifyChairmanRemoteControl",e)}},{key:"handleNotifyDataShareQuality",value:function(e){v.info("handleNotifyDataShareQuality ",e),coreCommon.Observer.publish("onNativeNotifyDataShareQuality",e)}},{key:"handleQueryUserInfo",value:function(e){v.info("handleQueryUserInfo "+(0,l.default)(e)),coreCommon.Observer.publish("handleQueryUserInfo",e.param)}},{key:"handleConfCtrl",value:function(e){coreCommon.Observer.publish("handleConfCtrl",e.param)}},{key:"handleCPURate",value:function(e){v.info("handleCPURate "+(0,l.default)(e)),coreCommon.Observer.publish("handleCPURate",e.param)}},{key:"handleActiveBidirection",value:function(e){v.info("handleActiveBidirection "+(0,l.default)(e)),coreCommon.Observer.publish("handleActiveBidirection",e.param)}},{key:"handleRemoveVideo",value:function(e){v.info("handleRemoveVideo "+(0,l.default)(e)),coreCommon.Observer.publish("handleRemoveVideo",e.param)}},{key:"handleConfRecording",value:function(e){v.info("handleConfRecording "+(0,l.default)(e)),coreCommon.Observer.publish("handleConfRecording",e.param)}},{key:"handleProgramSharing",value:function(e){v.info("handleProgramSharing "+(0,l.default)(e)),coreCommon.Observer.publish("handleProgramSharing",e.param)}},{key:"handleNotifyDataIsBigHwnd",value:function(e){v.info("handleNotifyDataIsBigHwnd "+(0,l.default)(e)),coreCommon.Observer.publish("handleNotifyDataIsBigHwnd",e.param)}},{key:"handleShowVideoDevSettings",value:function(e){v.info("handleShowVideoDevSettings "+(0,l.default)(e)),coreCommon.Observer.publish("handleShowVideoDevSettings",e.param)}},{key:"handleMemberListMoving",value:function(e){v.info("handleMemberListMoving"),coreCommon.Observer.publish("handleMemberListMoving",e.param)}},{key:"handleMemberListFocus",value:function(e){v.info("handleMemberListFocus"),coreCommon.Observer.publish("handleMemberListFocus",e.param)}},{key:"handleMemberListWindowStatus",value:function(e){v.info("handleMemberListWindowStatus"),coreCommon.Observer.publish("handleMemberListWindowStatus",e.param)}},{key:"handleStartIMChat",value:function(e){v.info("handleStartIMChat"),coreCommon.Observer.publish("handleStartIMChat",e.param)}},{key:"handleUserNotActive",value:function(e){v.info("handleUserNotActive"),coreCommon.Observer.publish("handleUserNotActive",e.param)}},{key:"handleOperateBrowserHwnd",value:function(e){v.info("handleOperateBrowserHwnd"),coreCommon.Observer.publish("handleOperateBrowserHwnd",e.param)}},{key:"handleAlertBoxResult",value:function(e){v.info("handleAlertBoxResult"),coreCommon.Observer.publish("handleAlertBoxResult",e.param)}},{key:"handleStopWatchByNative",value:function(e){v.info("handleStopWatchByNative"),coreCommon.Observer.publish("handleStopWatchByNative",e.param)}},{key:"handleNativeUserClick",value:function(e){coreCommon.Observer.publish("handleNativeUserClick",e.param)}},{key:"handleMonitorNumber",value:function(e){coreCommon.Observer.publish("handleMonitorNumber",e.param)}},{key:"handleShareAudio",value:function(e){coreCommon.Observer.publish("handleShareAudio",e.param)}},{key:"handleUpdateAuxHwnd",value:function(e){v.info("handleUpdateAuxHwnd "+(0,l.default)(e)),coreCommon.Observer.publish("handleUpdateAuxHwnd",e.param)}},{key:"handleUserCustomMenuClick",value:function(e){v.info("handleUserCustomMenuClick "+(0,l.default)(e)),coreCommon.dispatchModuleEvent("userCustomMenuClick",e.param)}}]),e}(),a.setNativeWndNotifyFunc=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:t=e.sent,t.setNotifyFunc(1,m.handleNotifyNativeDataRenderSize),t.setNotifyFunc(2,m.handleNotifyShowConfMember),t.setNotifyFunc(3,m.handleNotifyAddConfMember),t.setNotifyFunc(4,m.handleNotifyStartShare),t.setNotifyFunc(5,m.handleNotifyRequestControl),t.setNotifyFunc(6,m.handleNotifyReleaseControl),t.setNotifyFunc(9,m.handleLeaveConf),t.setNotifyFunc(10,m.handleEndConf),t.setNotifyFunc(11,m.handleSetMic),t.setNotifyFunc(12,m.handleSetSpeaker),t.setNotifyFunc(13,m.handleSharingAppEnded),t.setNotifyFunc(14,m.handleShowClient),t.setNotifyFunc(15,m.handleNotifyStopShare),t.setNotifyFunc(16,m.handleNotifyPrepareShowRemoteControl),t.setNotifyFunc(17,m.handleNotifyChairmanRemoteControl),t.setNotifyFunc(18,m.handleNotifyDataShareQuality),t.setNotifyFunc(19,m.handleDataFirstFrameRecv),t.setNotifyFunc(21,m.handleProgramSharing),t.setNotifyFunc(22,m.handleNotifyDataIsBigHwnd),t.setNotifyFunc(101,m.handleSetMicVol),t.setNotifyFunc(102,m.handleSetSpkVol),t.setNotifyFunc(103,m.handleSetCamera),t.setNotifyFunc(104,m.handleModeSwitchNotify),t.setNotifyFunc(105,m.handleDial),t.setNotifyFunc(106,m.handlePageSwitchNotify),t.setNotifyFunc(107,m.handleWatchNotify),t.setNotifyFunc(108,m.handleChairman),t.setNotifyFunc(109,m.handleHangup),t.setNotifyFunc(110,m.handleAddMemberDialog),t.setNotifyFunc(111,m.handleAttendanceDialog),t.setNotifyFunc(112,m.handleShowQos),t.setNotifyFunc(113,m.handleQueryUserInfo),t.setNotifyFunc(114,m.handleConfCtrl),t.setNotifyFunc(115,m.handleCPURate),t.setNotifyFunc(116,m.handleActiveBidirection),t.setNotifyFunc(117,m.handleRemoveVideo),t.setNotifyFunc(118,m.handleConfRecording),t.setNotifyFunc(119,m.handleShowVideoDevSettings),t.setNotifyFunc(120,m.handleUpdateAuxHwnd),t.setNotifyFunc(121,m.handleMemberListMoving),t.setNotifyFunc(122,m.handleMemberListFocus),t.setNotifyFunc(123,m.handleMemberListWindowStatus),t.setNotifyFunc(124,m.handleStartIMChat),t.setNotifyFunc(125,m.handleUserNotActive),t.setNotifyFunc(126,m.handleUserCustomMenuClick),t.setNotifyFunc(127,m.handleOperateBrowserHwnd),t.setNotifyFunc(128,m.handleAlertBoxResult),t.setNotifyFunc(129,m.handleStopWatchByNative),t.setNotifyFunc(130,m.handleNativeUserClick),t.setNotifyFunc(131,m.handleMonitorNumber),t.setNotifyFunc(132,m.handleShareAudio);case 54:case"end":return e.stop()}},e,void 0)})),o);t.default=m},701:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(3),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),p=r(d),h=n(5),g=r(h),v=n(249),m=n(227),_=n(706),C=r(_),w=n(273),S=n(707),I=r(S),E=n(709),N=r(E),b=coreLogger.getLogger("dataconf")("model"),T=function(){function e(){var t=this;(0,p.default)(this,e),this.setConfCtrlNotifyFunc=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getConfCtrlInstance();case 2:n=e.sent,n.setNotifyFunc(491593,t.handleGetDataConfResource);case 4:case"end":return e.stop()}},e,t)})),this.setDataConfNotifyFunc=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("set data confctrl service callback func"),!m.DFConfig.isPc){e.next=21;break}return e.next=4,coreTup.getdataConfInstance();case 4:n=e.sent,n.setNotifyFunc(40001001,t.handleJoinDataConfResult),n.setNotifyFunc(40001002,t.handleEndDataConfResult),n.setNotifyFunc(40001003,t.handleLeaveDataConfResult),n.setNotifyFunc(40001020,t.handlePingCompleteResult),n.setNotifyFunc(40001021,t.handlePingProgressResult),n.setNotifyFunc(40001109,t.handleUserEnterResult),n.setNotifyFunc(40001110,t.handleUserLeaveResult),n.setNotifyFunc(40000130,t.handleStarJoinConf),n.setNotifyFunc(40001010,t.handleFlowControlResult),n.setNotifyFunc(40001051,t.handleNetReportReportResult),n.setNotifyFunc(40001105,t.handleUserPresentChangeResult),n.setNotifyFunc(40001203,t.handleUserPhoneStatusResult),n.setNotifyFunc(40001229,t.handleOnConfMsgPhoneConfInfo),n.setNotifyFunc(40001062,t.handlePingCallback),n.setNotifyFunc(40001063,t.handleNewConfHandle),n.setNotifyFunc(40001233,t.handleNegoCapResult);case 21:case"end":return e.stop()}},e,t)})),this.joinDataConf=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n){e.next=2;break}return e.abrupt("return",s.default.reject("joinData params is null"));case 2:return coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,params:[coreConf.getCurrentConfId()]}),e.next=5,coreAccount.getMyInfo();case 5:if(r=e.sent,a=r.bind_no||"",b.info("joinDataConf  start, bind_no is "+handlePhoneNumber(a)+",  sip_num is "+handlePhoneNumber(n.sip_num)),t.dataConfStatus=w.DCONF_STATUS.JOINING,t.confInfo=n,!m.DFConfig.userSipNumberRequestBigParams){e.next=16;break}return e.next=13,t.getSipNumber();case 13:a=e.sent,e.next=17;break;case 16:a=isNullOrEmpty(n.sip_num)?a:n.sip_num;case 17:return t.myBindNo=a,e.next=20,t.requestBigParams(n);case 20:if(null!==(o=e.sent)){e.next=24;break}return t.handleJoinDataFail(),e.abrupt("return");case 24:return t.trackerGetServerIp(o.param.conf_param.server_ip),e.next=27,t.buildJoinParams(o.param,n);case 27:return i=e.sent,t.bigParam=i,m.DFConfig.shouldSendServerInfoNotify()&&coreCommon.Observer.publish("OnMeetingHWsaveIpParam",{sbcIP:i.conf_param.sbc_server_address,msIP:i.conf_param.server_ip}),t.selfUserUri=i.conf_param.user_uri,e.next=33,t.startJoinDataConf(i);case 33:b.info("start join data conf over");case 34:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.retryJoin=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataConfStatus===w.DCONF_STATUS.JOIN_FAIL){e.next=3;break}return b.info("retry join, status is not fail"),e.abrupt("return");case 3:if(!t.confInfo){e.next=8;break}return t.bigParamRequestCount=0,e.abrupt("return",t.joinDataConf(t.confInfo));case 8:b.info("retry join,confInfo is null");case 9:case"end":return e.stop()}},e,t)})),this.retryJoinOnStg=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("retry join on stg"),null!==t.bigParam&&null!==t.bigParam.conf_param){e.next=5;break}return b.info("retry join on stg fail,bigparam is null"),t.handleJoinDataFail(),e.abrupt("return");case 5:m.DFConfig.isMobile?t.bigParam.conf_param.firewallmode=m.DFConfig.firewallType:t.bigParam.firewallmode=m.DFConfig.firewallType,t.startJoinDataConf(t.bigParam);case 7:case"end":return e.stop()}},e,t)})),this.buildStgTunnelJoinData=(0,l.default)(u.default.mark(function e(){var n,r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("build stg tunnel for join data"),m.DFConfig.firewallType=w.DATA_FIREWALL_MODE.STG,e.next=4,coreAccount.getLoginModel();case 4:if(n=e.sent,r=n.stgAccount,void 0===(a=n.stgUri)||""===a||";"===a||";;"===a||";;;"===a){e.next=26;break}return e.next=10,coreSecurity.getPasswordManager();case 10:return o=e.sent,e.next=13,o.getPassword("stgPassword");case 13:return i=e.sent,b.info("building stg tunnel"),e.next=17,coreAccount.buildStgTunnel({stgUri:a,stgAccount:r,stgPassword:i});case 17:if(s=e.sent,s.result){e.next=23;break}return e.next=21,t.handleJoinDataFail();case 21:e.next=24;break;case 23:t.retryJoinOnStg();case 24:e.next=27;break;case 26:t.handleJoinDataFail();case 27:case"end":return e.stop()}},e,t)})),this.trackerGetServerIp=function(e){m.DFConfig.supportBuried&&coreCommon.Observer.publish("OnGetServerIp",e)},this.buildJoinParams=function(){var e=(0,l.default)(u.default.mark(function e(n,r){var a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.DFConfig.isPc?(n.firewallmode=m.DFConfig.firewallType,n.servertype=m.DFConfig.serverType(),n.confparam_url=r.conf_uri,n.language="zh-CN",n.stgaddress=m.DFConfig.stgAddresslist,m.DFConfig.isPc&&(isNullOrEmpty(n.conf_param.data_codec_ver)||"1.0"!==n.conf_param.data_codec_ver.toLowerCase())?n.conf_param.option=8388736:n.conf_param.option=8388608,m.DFConfig.useSBC||(n.conf_param.sbc_server_address="")):(n.conf_param.firewallmode=m.DFConfig.firewallType,n.conf_param.bigParamServerAddress=r.conf_uri),a=C.default.cutstr(n.conf_param.conf_name,30),o=C.default.cutstr(n.conf_param.user_name,30),n.conf_param.conf_name=a,n.conf_param.user_name=o,isNullOrEmpty(n.conf_param.user_uri)&&(b.info("user_uri is empty,set myBindNo = "+t.myBindNo),n.conf_param.user_uri=t.myBindNo),n.conf_param.bind_number=n.conf_param.user_uri,t.userBindNum=n.conf_param.bind_number,i=n.conf_param.data_codec_ver,!t.shouldSetCodeccVersion(i)){e.next=15;break}return e.next=12,t.buildCodeccParams();case 12:s=e.sent,m.DFConfig.isPc?n.codec_param=s:n.conf_param.codec_param=s,b.info("set codec param: ",s);case 15:return b.info(" confinfonotify conf_param :  ",{sbc_server_address:n.conf_param.sbc_server_address,server_ip:n.conf_param.server_ip,firemode:m.DFConfig.firewallType,M:n.conf_param.M,T:n.conf_param.T}),e.abrupt("return",n);case 17:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.buildCodeccParams=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.assignBandwidthForData(t.call_id);case 2:return n=e.sent,e.abrupt("return",{encodeVerType:30,maxBitRate:n,maxDecodeSizeWidth:1920,maxDecodeSizeHeight:1080,maxDecodeFrameRate:m.DFConfig.decFr(),maxEncodeSizeWidth:1920,maxEncodeSizeHeight:1080,maxEncodeFrameRate:m.DFConfig.encFr()});case 4:case"end":return e.stop()}},e,t)})),this.shouldSetCodeccVersion=function(e){var n=!0;return m.DFConfig.isPc&&(isNullOrEmpty(e)?(b.info("data_codec_ver is null"),m.DFConfig.isWin||m.DFConfig.isMac?t.setDataCodeccVersion(5):(t.setDataCodeccVersion(0),n=!1)):(b.info("dataCodecVersion = "+e),"1.0"===e.toLowerCase()?t.setDataCodeccVersion(0):("3.0"===e.toLowerCase()||e.toLowerCase(),t.setDataCodeccVersion(5)))),n},this.requestBigParams=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestBigParamFromTup(n);case 2:if(r=e.sent,!(r.param&&r.param.conf_param&&r.param.conf_param.conf_id&&""!==r.param.conf_param.conf_id)){e.next=7;break}return e.abrupt("return",r);case 7:if(!(t.bigParamRequestCount>=5)){e.next=12;break}return b.info(" retryGetDataConfBigParams 5 times , stop retry"),e.abrupt("return",null);case 12:return e.next=14,t.requestBigParams(n);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.requestBigParamFromTup=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.bigParamRequestCount++,b.info("getDataConfBigParams start times = "+t.bigParamRequestCount),r={conf_id:n.conf_id,conf_url:n.conf_uri,mcu_addr:{server_addr:"",server_port:0},random:n.data_random,passcode:n.passcode,password:n.password,sip_num:t.myBindNo,type:n.getParamType||3},e.next=5,coreTup.getConfCtrlInstance();case 5:return a=e.sent,e.next=8,a.getDataConfBigParam(r);case 8:return o=e.sent,b.info("getDataConfBigParams end times = "+t.bigParamRequestCount),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getSipNumber=(0,l.default)(u.default.mark(function e(){var n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return n=e.sent,r=n.sipImpi,b.info("sipImpi = ",r),a=r,isNullOrEmpty(a)||-1!==(o=a.indexOf("@"))&&(a=a.slice(0,o)),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,t)})),this.requestWBToken=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.requestWBToken(n):b.info("requestWBToken shareservice is null");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.advancedSetting=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.advancedSetting(n,r):b.info("advancedSetting shareservice is null");case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.setCallId=function(e){b.info("setCallId = ",e),t.call_id=e},this.getSelfAudioNumber=function(){if(""===t.selfAudioNumber)for(var e=(0,v.getUpdatedParticipants)(),n=0;n<e.length;++n){var r=e[n];1===r.is_self&&(t.selfAudioNumber=r.number,b.info("getSelfAudioNumber : "+handlePhoneNumber(t.selfAudioNumber)))}return t.selfAudioNumber},this.getNegoBandwidth=function(){return t.negoBandwidth},this.setDataCodeccVersion=function(e){m.DFConfig.dataCodeccVersion=e,b.info("dataCodeccVersion = "+e)},this.getDataCodeccVersion=function(){return m.DFConfig.dataCodeccVersion},this.startJoinDataConf=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info(" startJoinDataConf"),t.dataConfStatus===w.DCONF_STATUS.JOINING){e.next=4;break}return b.info("current dataConfStatus is"+t.dataConfStatus+", no need join dataconf "),e.abrupt("return");case 4:if(!m.DFConfig.isMobile){e.next=8;break}window.mobileStartJoinDataConf((0,o.default)(n.conf_param)),e.next=23;break;case 8:return e.next=10,coreTup.getCallInstance();case 10:return r=e.sent,r.setStgTunnel(t.call_id,0),e.next=14,coreTup.getdataConfInstance();case 14:return a=e.sent,i="<UserInfo><UserType>2</UserType></UserInfo>",n.conf_param.user_info=i,n.conf_param.user_info_len=i.length,n.conf_param.call_id=t.call_id,e.next=21,a.startjoinconf(n);case 21:s=e.sent,0===s.param.result?b.info("start conf success"):(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[0]}),b.error("start conf failed"));case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setLeftConfCallback=function(e){t.leftDataConfCallback=e},this.getApplist=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.getApplist():b.error("get applist error:shareservice is null");case 1:case"end":return e.stop()}},e,t)})),this.setDataCodecVersion=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:if(r=e.sent,!(t.m_confHandle>0&&t.m_user_id>0)){e.next=11;break}return b.info("setDataCodecVersion, m_confhandle : "+t.m_confHandle),e.next=7,r.setDataCodecVersion(t.m_confHandle,n);case 7:a=e.sent,0!==a.param.result?b.info("setDataCodecVersion failed, result = ",a.result):b.info("setDataCodecVersion success, result = ",a.result),e.next=12;break;case 11:b.error("setDataCodecVersion failed, m_confhandle : "+t.m_confHandle);case 12:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getUserAltId=function(e){return t.memberService?t.memberService.getUserAltId(e):""},this.getMemberNameByUserId=function(e){return t.memberService?t.memberService.getMemberNameByUserId(e):""},this.getBindnoByUserid=function(e){return t.memberService?t.memberService.getBindnoByUserid(e):""},this.getDataShareOwnerBindno=function(){return t.shareService&&""!==t.shareService.shareOwnerUserId?t.getBindnoByUserid(t.shareService.shareOwnerUserId):t.shareService&&t.shareService.wbService&&t.shareService.wbService.m_ownerUserid>0?(b.info("this.shareService.wbService.m_ownerUserid = ",t.shareService.wbService.m_ownerUserid),t.getBindnoByUserid(t.shareService.wbService.m_ownerUserid)):""},this.changeRemoteControl2Other=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.m_confHandle||""===n||null===t.shareService){e.next=4;break}if(0===(r=Number(t.getUserAltId(n)))){e.next=4;break}return e.abrupt("return",t.shareService.changeRemoteControl2Other(r));case 4:return b.error("dataconf setRemoteControl2Other fail ,confhandle : "+t.m_confHandle),e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.delRemoteControlPrivilege=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&t.shareService?(b.error("dataconf delRemoteControlPrivilege success ,confhandle : "+t.m_confHandle),r=void 0,r=void 0===n||""===n?Number(t.m_user_id):Number(t.getUserAltId(n)),t.shareService.delRemoteControlPrivilege(r)):b.error("dataconf delRemoteControlPrivilege fail ");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.rejectRemoteControlPrivilege=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&""!==n&&t.shareService&&(r=Number(t.getUserAltId(n)),t.shareService.rejectRemoteControlPrivilege(r));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.requestRemoteControlPrivilege=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&t.shareService&&t.shareService.requestRemoteControlPrivilege();case 1:case"end":return e.stop()}},e,t)})),this.inputWndMsg=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i){var s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.m_confHandle){e.next=7;break}return e.next=3,coreTup.getdataConfInstance();case 3:return s=e.sent,e.next=6,s.asInputwndmsg(t.m_confHandle,n,r,a,o,i);case 6:c=e.sent;case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),this.leaveconf=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("dataconf leaveconf ,confhandle = "+t.m_confHandle),0===t.m_confHandle||0===t.m_confHandle){e.next=10;break}return b.info("leaveconf call id = ",t.call_id),t.stopStgTunnel(),t.shareService.isDataShareStarted=!1,e.next=7,coreTup.getdataConfInstance();case 7:return n=e.sent,e.next=10,n.leaveconf(t.m_confHandle);case 10:case"end":return e.stop()}},e,t)})),this.terminateconf=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("dataconf terminateconf ,confhandle = "+t.m_confHandle),0===t.m_confHandle||0===t.m_confHandle){e.next=13;break}return b.info("leaveconf call id = ",t.call_id),t.stopStgTunnel(),e.next=6,coreTup.getdataConfInstance();case 6:return n=e.sent,e.next=9,n.terminateconf(t.m_confHandle);case 9:return e.next=11,t.releaseConfHandle();case 11:b.info("leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 13:case"end":return e.stop()}},e,t)})),this.setDataShareCanvasSize=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.error("setDataShareCanvasSize ,confhandle = "+t.m_confHandle),0===t.m_confHandle){e.next=6;break}return e.next=4,coreTup.getdataConfInstance();case 4:r=e.sent,r.setDataShareScreenParam(t.m_confHandle,{width:n.width,height:n.height});case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.stopStgTunnel=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=3,coreTup.getCallInstance();case 3:n=e.sent,n.setStgTunnel(t.call_id,3);case 5:case"end":return e.stop()}},e,t)})),this.handleFlowControlResult=function(e){b.error("handleFlowControlResult start")},this.handleNetReportReportResult=function(e){b.info("handleNetReportReportResult start")},this.handleUserPresentChangeResult=function(e){b.info("handleUserPresentChangeResult start")},this.handleUserPhoneStatusResult=function(e){b.info("handleUserPhoneStatusResult start")},this.handleOnConfMsgPhoneConfInfo=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=2;break}return e.abrupt("return");case 2:if(b.info("handleOnConfMsgPhoneConfInfo data = ",n),!n||!n.param||void 0===n.param.auxtokenresult){e.next=9;break}if(1!==n.param.auxtokenresult){e.next=9;break}return e.next=7,coreTup.getdataConfInstance();case 7:r=e.sent,r.sendNotifyAllUsersCloseSharingTab(t.m_confHandle,t.m_user_id,23);case 9:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleNewConfHandle=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.param.value1||0!==n.param.value2){e.next=9;break}return b.error("new confhandle success, confhandle : ",n.param.value1),t.m_confHandle=n.param.value1,t.shareService=new I.default(t.m_confHandle,t.call_id),t.shareService.memberService=t.memberService,e.next=7,t.shareService.initShareService();case 7:e.next=10;break;case 9:b.error("new confhandle fail, errcode : ",n.param.value2);case 10:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("handleJoinDataConfResult start"),!n.param.confHandle||0!==n.param.value1){e.next=8;break}return t.m_confHandle=n.param.confHandle,t.setDataConfParams({dataConfHandle:t.m_confHandle}),e.next=6,t.shareService.loadShareComponent();case 6:e.next=11;break;case 8:b.error("handleJoinDataConfResult  joindataconf fail, errcode : "+n.param.value1+"confHandle : "+n.param.confHandle),t.m_confHandle=n.param.confHandle,t.handleJoinDataFail();case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleEndDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("handleEndDataConfResult start"),!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=4;break}return b.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 4:t.isCascade?(b.info("PC cascade conf end data conf"),coreConf.actionLeaveConf()):t.beLeaveDataConf();case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleLeaveDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=3;break}return b.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 3:t.isCascade?(b.info("PC cascade conf leave data conf"),coreConf.actionLeaveConf()):(b.info("handleLeaveDataConfResult start"),t.beLeaveDataConf());case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.releaseConfHandle=(0,l.default)(u.default.mark(function e(){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.m_confHandle>0)){e.next=20;break}return b.info("releaseConfHandle start"),n=t.m_confHandle,t.m_confHandle=0,e.next=6,t.showNativeDataControl(!1);case 6:return e.next=8,t.closeNativeDataSharingWnd();case 8:return e.next=10,coreTup.getdataConfInstance();case 10:r=e.sent,r.releaseDataConfHandle(n),coreCommon.Observer.publish("OnReleaseHandle",{}),coreCommon.dispatchModuleEvent("pluginConfStateNotify",{state:constant.CLK_PLUGIN_CONFLIFECYCLE.END}),coreCommon.Observer.publish("onDataSharingStateChanged",!1),t.shareService=null,t.m_user_id=0,b.info("releaseConfHandle end"),e.next=21;break;case 20:b.info("releaseConfHandle: confHandle is null");case 21:case"end":return e.stop()}},e,t)})),this.getMyNumberfromContact=function(){for(var e=$getState(),t=e.conf.memberListInfo,n=0;n<t.length;n++)if(t[n].is_self)return t[n].number},this.getMyUserId=function(){return t.m_user_id},this.handlePingProgressResult=function(e){b.info("handlePingProgressResult start")},this.handleUserEnterResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return r=e.sent,e.next=5,coreAccount.getMyInfo();case 5:if(a=e.sent,o=r.sipAccount,i=a.bind_no,b.info("handleUserEnterResult start, sipAccount : "+handlePhoneNumber(o)+", useruri:"+handlePhoneNumber(n.param.user_alt_uri)+",userid:"+n.param.user_alt_id+",myBindNo:"+handlePhoneNumber(i)),!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=12;break}return b.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 12:s=!1,""===n.param.user_alt_uri||i!==n.param.user_alt_uri&&t.getSelfAudioNumber()!==n.param.user_alt_uri&&t.dataResourceUserNumber!==n.param.user_alt_uri&&t.selfUserUri!==n.param.user_alt_uri&&o!==n.param.user_alt_uri||(b.info("self enter"),0===t.m_user_id&&coreCommon.Observer.publish("handleSelfEnterResult",{}),t.m_user_id=n.param.user_alt_id,t.shareService.m_user_id=t.m_user_id,t.dataConfStatus=w.DCONF_STATUS.IN_CONF,s=!0,b.info("handleUserEnterResult setmyuserid : "+n.param.user_alt_id+",user_alt_uri : "+handlePhoneNumber(n.param.user_alt_uri))),t.memberService.addMember(n,s);case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleUserLeaveResult=function(e){if(b.info("handleUserLeaveResult start"),e.param.confHandle&&e.param.confHandle!==t.m_confHandle)return void b.error("confhandle is diff,old = "+t.m_confHandle+",new = "+e.param.confHandle);t.memberService.deleteMember(e),e.param.isSelf=e.param.user_alt_id===t.m_user_id,coreCommon.Observer.publish("dataUserleave",e)},this.handleNegoCapResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("onNegoCapResult data"+(0,o.default)(n)),t.negoBandwidth=n.param.capability.maxbitrate,window.CLIENTCONFIG.ISBIGWIN&&(r=n.param.capability.encodevertype,30===r?3===m.DFConfig.dataCodeccVersion?t.setDataCodeccVersion(3):t.setDataCodeccVersion(5):t.setDataCodeccVersion(0),b.info("use data codecc version ",m.DFConfig.dataCodeccVersion)),b.info("use bandwidth ",t.negoBandwidth);case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getDataConfResource=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f,l,d,p,h){var g,v,m;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g={conf_url:n,conf_id:r,nick_name:a,password:o,number:i,user_id:s,server_ip:c,pin_code:f,participant_id:l,server_type:d,language:p,data_site_bandwidth:h},b.info("getDataConfResource start, params : "),e.next=4,coreTup.getConfCtrlInstance();case 4:return v=e.sent,e.next=7,v.getDataConfResource(g);case 7:return m=e.sent,b.info("getDataConfResource end"),e.abrupt("return",m);case 10:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c,u,f,l,d){return e.apply(this,arguments)}}(),this.getDataConfBigParams=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c){var f,l,d,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:3;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f={conf_id:n,conf_url:r,mcu_addr:a,random:o,passcode:s,password:i,sip_num:c,type:p},b.info("getDataConfBigParams start"),e.next=4,coreTup.getConfCtrlInstance();case 4:return l=e.sent,e.next=7,l.getDataConfBigParam(f);case 7:return d=e.sent,b.info("getDataConfBigParams end"),e.abrupt("return",d);case 10:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),this.handleGetDataConfResource=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.info("handleGetDataConfResource start, new confparams  "),r=n.param.conf_params,a=null,r.ms_address&&(o=r.ms_address.split(":"),a=o.length>0?r.ms_address.split(":")[0]:r.ms_address),b.info("ms_address_without_port",a),b.info("handleGetDataConfResource sip number is :"+handlePhoneNumber(r.number)+", bind_no is :"+handlePhoneNumber(r.bind_number)),1===r.has_data_resource?(r.conf_id&&""!==r.conf_id&&"0"!==r.conf_id&&(t.bigParam.conf_param.conf_id=r.conf_id),t.bigParam.conf_param.M=r.M,t.bigParam.conf_param.T=r.T,r.user_id&&""!==r.user_id&&"0"!==r.user_id&&(t.bigParam.conf_param.user_id=r.user_id),isNullOrEmpty(r.number)||(t.bigParam.conf_param.user_uri=r.number),isNullOrEmpty(r.bind_number)||(t.bigParam.conf_param.bind_number=t.userBindNum),t.dataResourceUserNumber=r.number,t.bigParam.conf_param.server_ip=a,t.startJoinDataConf(t.bigParam),b.info("handleGetDataConfResource end , bigparam : ")):b.info("handleGetDataConfResource fail ");case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleServerTypeForGetResource=function(e,t){var n=m.DFConfig.firewallType===w.DATA_FIREWALL_MODE.STG?1:0;if(m.DFConfig.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING&&e&&t){var r=e.split(";");if(r.length>0)for(var a=0;a<r.length;a++)""!==r[a]&&t.split(":").length>0&&r[a].split(":").length>0&&t.split(":")[0]===r[a].split(":")[0]&&(n=1);n=m.DFConfig.firewallType===w.DATA_FIREWALL_MODE.STG?2:n}return n},this.handleBandwidthForGetResource=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!(m.DFConfig.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING||m.DFConfig.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING&&t.bigParam&&t.bigParam.conf_param&&t.bigParam.conf_param.server_data_cap)){e.next=5;break}return e.next=4,coreCall.assignBandwidthForData(t.call_id);case 4:n=e.sent;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e,t)})),this.handlePingCallback=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i,s,c,f,l,d,p,h,g,v,_,C,w;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("handlePingCallback data start"),!(r=n.param.dst_addr)||""===r){e.next=30;break}if(b.info("handlePingCallback param "),t.isCascade=!0,a=t.confInfo.conf_uri,o=a.indexOf("/",10),o>0&&(a=a.substr(0,o)),i=t.bigParam.conf_param,s=i.conf_id,c="1"===i.user_role?i.host_key:i.part_secure_conf_num,!m.DFConfig.shouldPasscodeBase64()){e.next=15;break}return e.next=14,coreSecurity.encode64(c);case 14:c=e.sent;case 15:return f=i.user_uri,l=i.user_name,d=r,p=i.user_id,h=i.pin_code,g=i.participant_id,v=i.sbc_server_address,_=0,C=t.handleServerTypeForGetResource(v,d),w=t.handleBandwidthForGetResource(),e.next=27,t.getDataConfResource(a,s,l,c,f,p,d,h,g,C,_,w);case 27:b.info("handlePingCallback  getDataConfResource param =",{confUrl:a,confId:s,number:f,userId:p,serverIp:d,participantId:g,serverType:C,language:_,dataSiteBandwidth:w}),e.next=32;break;case 30:b.info("handlePingCallback data error, dst_addr is null stgaddr"),m.DFConfig.stgAddresslist.length>0?(b.info("handlePingCallback  Need2BuildStgTunnel"),t.buildStgTunnelJoinData()):(b.info("handlePingCallback stgaddrlist empty, joindata fail"),t.handleJoinDataFail());case 32:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataFail=function(){coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[0]}),t.releaseConfHandle(),m.DFConfig.isPc?coreCommon.Observer.publish("OnJoinDataConfFail"):coreCommon.Observer.publish("onMobileJoinDataFail"),t.dataConfStatus=w.DCONF_STATUS.JOIN_FAIL},this.setDataShareScreenGDIEXType=function(){null!==t.shareService&&t.shareService.setDataShareScreenGDIEXType()},this.setCloseShareDataOperate=function(e){if(null!==t.shareService)return t.shareService.setCloseShareDataOperate(e)},this.getCloseShareDataOperate=function(){if(null!==t.shareService)return t.shareService.getCloseShareDataOperate()},this.getStreamInfo=function(){if(null!==t.shareService)return t.shareService.getStreamInfo()},this.isInScreenSharing=function(){return null!==t.shareService&&t.shareService.isInScreenSharing()},this.isSendScreenSharing=function(){return null!==t.shareService&&t.shareService.isSendScreenSharing()},this.resetConfSharingType=function(){if(null!==t.shareService)return t.shareService.resetConfSharingType()},this.setConfSharingType=function(e,n){if(null!==t.shareService)return t.shareService.setConfSharingType(e,n)},this.getDisplayInfo=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.getDisplayInfo());case 4:b.info("get display info share service is null");case 5:case"end":return e.stop()}},e,t)})),this.setDataConfShareRealRect=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.shareService&&(t.shareService.bigwinRealRectLeft=n,t.shareService.bigwinRealRectTop=r,t.shareService.bigwinRealRectRight=a,t.shareService.bigwinRealRectBottom=o);case 1:case"end":return e.stop()}},e,t)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),this.cancelSharingapp=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.cancelSharingapp(n));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setStart=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setStart());case 2:case"end":return e.stop()}},e,t)})),this.setAppShareScreenParam=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setAppShareScreenParam(n,r));case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.setSharingapp=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setSharingapp(n));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setDataShareScreenPicQuality=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=10;break}if(30!==n){e.next=6;break}return e.next=4,t.shareService.setDataShareScreenGDIEXType();case 4:e.next=8;break;case 6:return e.next=8,t.shareService.setDataShareScreenPicQuality(n);case 8:e.next=11;break;case 10:b.info("setDataShareScreenPicQuality failed,please check whether conf is dataConf!");case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.showNativeRemoteControl=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.showNativeRemoteControl(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.stopWBDoc=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.stopWBDoc();case 1:case"end":return e.stop()}},e,t)})),this.isInWBSharing=function(){return null!==t.shareService&&t.shareService.isInWBSharing()},this.isRecevingWBSharing=function(){return null!==t.shareService&&t.shareService.isRecevingWBSharing()},this.createWBNewDocAndPage=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.createWBNewDocAndPage());case 2:case"end":return e.stop()}},e,t)})),this.closeNativeDataSharingWnd=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.closeNativeDataSharingWnd());case 4:b.error("close data window error:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.createNativeDataSharingWnd=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f,l,d,p){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=6;break}return e.next=3,t.shareService.createNativeDataSharingWnd(n,r,a,o,i,s,c,f,l,d,p);case 3:return e.abrupt("return",e.sent);case 6:b.error("createNativeDataSharingWnd:share service is null");case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c,u,f,l){return e.apply(this,arguments)}}(),this.showNativeDataControl=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=6;break}return e.next=3,t.shareService.showNativeDataControl(n,r,a,o,i,s,c);case 3:return e.abrupt("return",e.sent);case 6:b.error("showNativeDataControl:share service is null");case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),this.getIsUsePrimarySize=function(){return null!==t.shareService&&t.shareService.isUsePrimarySize},this.changeIsUsePrimarySize=function(){null!==t.shareService&&(t.shareService.isUsePrimarySize=!t.shareService.isUsePrimarySize)},this.isRemoteControling=function(){return null!==t.shareService&&!0===t.shareService.isInRemoteControlling},this.getRemoteControlUserNum=function(){return t.shareService.remoteControlUserNum||""},this.isDataShareStarted=function(){return!!t.shareService&&t.shareService.isDataShareStarted},this.isReceivingDataShare=function(){return!!t.shareService&&t.shareService.isReceivingDataShare()},this.setDataNegoMaxCap=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f){var l,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:if(l=e.sent,!(t.m_confHandle>0&&t.m_user_id>0)){e.next=11;break}return b.info("setDataNegoMaxCap, m_confhandle : "+t.m_confHandle),e.next=7,l.setDataNegoMaxCap(t.m_confHandle,n,r,a,o,i,s,c,f);case 7:d=e.sent,0!==d.result?b.info("setDataNegoMaxCap failed, result = ",d.result):b.info("setDataNegoMaxCap success, result = ",d.result),e.next=12;break;case 11:b.error("setDataNegoMaxCap failed, m_confhandle : "+t.m_confHandle);case 12:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c){return e.apply(this,arguments)}}(),this.docShareCompLoadSucCallback=function(e){if(null===t.shareService||!(t.shareService.loadDocSharePromise instanceof s.default))return void b.info("data conf service init error");t.shareService.loadDocSharePromise.timeout(8e3,-1),t.shareService.loadDocSharePromise.then(function(t){b.info("docShareCompLoadSucCallback loadDocSharePromise success ",t),0===t&&e&&"function"==typeof e&&e()})},this.startShare=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.shareService.startShare(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isInSendDocSharing=function(){return!!t.shareService&&t.shareService.isInSendDocSharing()},this.isInReceiveDocSharing=function(){return null!==t.shareService&&t.shareService.isInReceiveDocSharing()},this.isRecevingSharing=function(){return null!==t.shareService&&t.shareService.isRecevingSharing()},this.stopDocSharing=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=5;break}return b.info("docshare stopDocSharing"),e.next=4,t.shareService.stopDocShare();case 4:t.resetConfSharingType();case 5:case"end":return e.stop()}},e,t)})),this.handleShareEnd=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.shareService?t.shareService.handleShareEnd(n):b.info("handle share end: share service is null");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setNativeDataControlStatus=function(e){t.shareService&&t.shareService.setNativeDataControlStatus(e)},this.isConfDataShareLoadSuccess=function(){return null!==t.shareService&&!0===t.shareService.hasLoadDataShareComp},this.getSharingType=function(){return null===t.shareService?(b.info("get sharing type shareService error"),-1):t.shareService.sharingType},this.stopShareScreen=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=3;break}return e.next=3,t.shareService.stopShareScreen();case 3:case"end":return e.stop()}},e,t)})),this.isConfDocShareLoadSuccess=function(){return null!==t.shareService&&t.shareService.loadDocSharePromise instanceof s.default&&"resolved"===t.shareService.loadDocSharePromise.status},this.getDocShareFilePath=function(){return t.shareService?t.shareService.docSharingFilePath:""},this.openDocShareFile=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:!window.CLIENTCONFIG.ISMOBILE&&t.shareService&&(b.info("openDocShareFile called"),t.shareService.openDocShareFile(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isJoiningDataConf=function(){return t.dataConfStatus===w.DCONF_STATUS.JOINING},this.isSelfJoinedDataConf=function(){return t.dataConfStatus===w.DCONF_STATUS.IN_CONF},this.isLeavingDataConf=function(){return t.dataConfStatus===w.DCONF_STATUS.LEAVING},this.getDataConfMemberList=function(){return t.memberService.dataUserList},this.leaveMobileDataConf=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(m.DFConfig.isMobile){b.info("leaveMobileDataConf android start"),e&&1===window.sipCreateLeaveConf?window.sipCreateLeaveConf=2:window.sipCreateLeaveConf=0;var n=$getState().call.callStatus;b.info("callStatus = "+n),"CALL_CONNECTED"===n&&coreConf.isInReCall()&&(b.info("DataConfService.leaveMobileDataConf(): SCREEN_ORIENTATION_PORTRAIT"),window.changeScreenOrientation(constant.SCREEN_ORIENTATION.SCREEN_ORIENTATION_PORTRAIT)),window.showWebView(),window.leaveMobileDataConf(e),coreCommon.Observer.publish("onMobileLeaveDataConf",{}),t.dataConfStatus=w.DCONF_STATUS.LEFT}},this.stopAllShare=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.DFConfig.whiteBoardShareEnable||!t.isInWBSharing()){e.next=4;break}return b.info("leaveDataConf stopWBDoc"),e.next=4,t.stopWBDoc();case 4:if(!m.DFConfig.isDocShareEnabled()||!t.isInSendDocSharing()){e.next=8;break}return b.info("leaveDataConf stopDocSharing"),e.next=8,t.stopDocSharing();case 8:if(!t.isInScreenSharing()||t.isReceivingDataShare()){e.next=13;break}return b.info("before stopShareScreen"),e.next=12,t.stopShareScreen();case 12:b.info("after stopShareScreen");case 13:case"end":return e.stop()}},e,t)})),this.leaveDataConf=function(){var e=(0,l.default)(u.default.mark(function e(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("leave data conf"),t.leaveMobileDataConf(n),e.next=4,t.stopAllShare();case 4:return e.next=6,t.leaveconf();case 6:return e.next=8,t.releaseConfHandle();case 8:b.info("leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 10:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),this.beLeaveDataConf=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("beLeaveDataConf type "),t.leaveMobileDataConf(),e.next=4,t.releaseConfHandle();case 4:b.info("be leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 6:case"end":return e.stop()}},e,t)})),this.handleNativeNotifyResetRenderRect=function(e){b.info("handleNativeNotifyResetRenderRect start"),t.shareService&&t.shareService.handleNativeNotifyResetRenderRect(e)},this.setDataConfParams=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("setDataConfParams,data ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.setDataConfParams(n);case 6:a=e.sent,b.info("setDataConfParams,ret = ",a);case 8:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isSelfSharing=function(){return t.shareService&&t.shareService.shareOwnerUserId===t.m_user_id},this.onMobileDataConfCallback=function(e){try{if(b.info("onMobileDataConfCallback receive : ",e.type),"joinDataResult"===e.type)b.info("publish onMobileJoinDataConf"),coreCommon.Observer.publish("onMobileJoinDataConf",{});else if("shareMemberChange"===e.type)b.info("shareMemberChange, userid : "+handlePhoneNumber(e.userid)),coreCommon.Observer.publish("onMobileShareUserIdChange",e.userid,e.username);else if("dataSharingFlag"===e.type)b.info("dataSharingFlag, flag : "+e.status),coreCommon.Observer.publish("onMobileSharingFlagChange",e.status);else if("regetbigparams"===e.type){b.info("regetbigparams, addr : "+e.bestaddr),coreCommon.Observer.publish("onMobileSharingFlagChange",e.bestaddr);var n={param:{dst_addr:""}};n.param={},n.param.dst_addr=e.bestaddr,"stgaddr"===e.bestaddr&&(n.param.dst_addr=t.bigParam.conf_param.stg_server_address),t.handlePingCallback(n)}else"onMobilePingCallback"===e.type?(b.info("onMobilePingCallback"),m.DFConfig.stgAddresslist&&m.DFConfig.stgAddresslist.length>0?(b.info("onMobilePingCallback  Need2BuildStgTunnel"),coreCommon.Observer.publish("OnNeed2BuildStgTunnel",{})):(b.info("onMobilePingCallback stgaddrlist empty, joindata fail"),coreCommon.Observer.publish("onMobileJoinDataFail",{}))):"joinDataFail"===e.type?(b.info("mobile joinDataFail"),coreCommon.Observer.publish("onMobileJoinDataFail",{})):"closecall"===e.type?(b.info("mobile onDataConfClosed leaveConf"),t.isCascade&&coreConf.actionLeaveConf(),m.DFConfig.shouldSendServerInfoNotify()&&coreCommon.Observer.publish("OnMeetingHWreCallTimeOut","call end by server abnormal hangup")):"confMsgOnPhoneEnterInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneEnterInd",e):"confMsgOnPhoneLeaveInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneLeaveInd",e):"confMsgOnPhoneCallAudioStatusInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneCallAudioStatusInd",e):"confMsgOnPhoneUriInd"===e.type&&coreCommon.Observer.publish("confMsgOnPhoneUriInd",e)}catch(e){b.error("onMobileDataConfCallback exception : ",e)}},this.changeShareMonitorType=function(e){t.shareService?t.shareService.shareMonitorType=e:b.error("changeShareMonitorType ,service is null")},this.setShareAppHwnd=function(e){b.info("set share app hwnd:"+e),t.shareService?t.shareService.shareAppHwnd=e:b.error("set share app error.service is null")},this.getShareAppHwnd=function(){return b.info("get share app hwnd"),t.shareService?t.shareService.shareAppHwnd:0},this.getShareAudio=function(){return b.info("get share audio"),!!t.shareService&&t.shareService.shareAudio},this.setShareAudio=function(e){b.info("set share audio:",e),t.shareService&&(t.shareService.shareAudio=e)},this.setOldShareAppHwnd=function(e){b.info("set old app hwnd:"+e),t.shareService?t.shareService.oldShareAppHwnd=e:b.error("set old app error.service is null")},this.getOldShareAppHwnd=function(){return b.info("get old app hwnd"),t.shareService?t.shareService.oldShareAppHwnd:0},this.setTransparentwindow=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.setTransparentwindow(n,r);case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.isRecevingAppshare=function(){return!!t.shareService&&t.shareService.isRecevingAppshare},this.setDataShareVersion=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.setDataShareVersion(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.bfcpWinAttach=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.bfcpWinAttach(n));case 4:b.info("attach:share service is null");case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.bfcpWinDetach=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.bfcpWinDetach());case 4:b.info("detach:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.showNativeShareSelectWnd=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.showNativeShareSelectWnd());case 4:b.info("showNativeShareSelectWnd:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.m_confHandle=0,this.m_user_id=0,this.selfAudioNumber="",this.dataResourceUserNumber="",this.call_id=0,this.isCascade=!1,this.negoBandwidth=0,this.confInfo={acTmpToken:"",conf_id:"",conf_uri:"",data_random:"",dateconf_uri:"",group_uri:"",is_svc_conf:1,media_type:0,password:"",subject:"",svc_lable:[],svc_lable_count:0,vmr_id:"",getParamType:3},this.confInfo=null,this.bigParam={conf_param:{M:1,T:1,access_code:"",cm_address:"",conf_id:"",conf_name:"",crypt_key:"",data_codec_bw:0,data_codec_ver:"",host_key:"",part_secure_conf_num:"",participant_id:"",pin_code:"",sbc_server_address:"",server_data_cap:"",server_ip:"",site_id:"",site_url:"",stg_server_address:"",user_id:"",user_name:"",user_role:8,user_uri:"",option:0,bind_number:""},firewallmode:3,servertype:3,confparam_url:"",language:"",stgaddress:"",codec_param:{encodeVerType:30,maxBitRate:2048,maxDecodeSizeWidth:1920,maxDecodeSizeHeight:1080,maxDecodeFrameRate:30,maxEncodeSizeWidth:1920,maxEncodeSizeHeight:1080,maxEncodeFrameRate:30}},this.bigParam=null,window.onMobileDataConfCallback=this.onMobileDataConfCallback,this.dataConfStatus=w.DCONF_STATUS.NONE,this.bigParamRequestCount=0,this.myBindNo="",this.selfUserUri="",this.userBindNum="",this.shareService=null,this.memberService=new N.default,this.leftDataConfCallback=null}return(0,g.default)(e,[{key:"closeWBTab",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareService){e.next=3;break}return e.next=3,this.shareService.closeWBTab();case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentStatusUpdate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:return n=e.sent,r="<root><component>"+t+"</component><index>"+this.m_user_id+"</index><sender>"+this.m_user_id+"</sender><status>1</status><src>2</src></root>",b.info("componentStatusUpdate ",r),e.next=7,n.confUpdateParam(this.m_confHandle,"uc_component_status_update",r);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateDataShareOwner",value:function(e){this.memberService&&this.memberService.updateDataShareOwner(e)}},{key:"handlePingCompleteResult",value:function(e){b.info("handlePingCompleteResult start")}},{key:"handleStarJoinConf",value:function(e){b.info("handleStarJoinConf")}}]),e}();t.default=T},702:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(2),u=r(c),f=n(3),l=r(f),d=n(4),p=r(d),h=n(5),g=r(h),v=n(404),m=r(v),_=coreLogger.getLogger("conf")("model/confutil"),C=function(){function e(){(0,p.default)(this,e)}return(0,g.default)(e,null,[{key:"getPromise",value:function(){var e={};return e.promise=new l.default(function(t,n){e.resolve=t,e.reject=n}),e}},{key:"oneKeyEnterConfTup",value:function(){function t(e,t,r,a){return n.apply(this,arguments)}var n=(0,u.default)(o.default.mark(function t(n,r,a,i){var c,u,f,l,d,p,h,g,v,C,w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c={errorCode:-1,callId:""},_.info("one[Key]EnterConfTup isVideo: "+i),t.next=4,coreTup.getCallInstance();case 4:if(u=t.sent,!m.default.getInterfaceToOneKeyEnterConf()){t.next=16;break}return f={pstconfparam:{confid:r,access_code:n,conf_paswd:a},call_type:!1===i?0:1},t.next=9,u.oneKeyEnterConf(f);case 9:l=t.sent,d=void 0,d=l&&0===l.result?["oneKeyEnterConf",1]:["oneKeyEnterConf",0,l.result],coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN,params:d}),l&&0===l.result?(c.errorCode=0,l&&l.param&&l.param.callID&&(c.callId=l.param.callID)):(l&&(c.errorCode=l.result),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),_.info("one[Key]EnterConf fail, res = "+(0,s.default)(l))),t.next=53;break;case 16:if(p=n+"*"+a+"#",w&&m.default.getDeployMode()===constant.MEETING_NET_TYPE.SMC_MEETING&&(p=n+r+"*"+a),h=e.getPromise(),u.setNotifyFunc(98308,function(e){h.resolve(e)}),g=e.getPromise(),u.setNotifyFunc(98306,function(e){g.resolve(e)}),v=null,!m.default.getInterfaceToStartVipCall()||!i){t.next=29;break}return t.next=26,u.startVipCall(p,i,this.callInfo.addrVip);case 26:v=t.sent,t.next=32;break;case 29:return t.next=31,u.startCall(p,i);case 31:v=t.sent;case 32:if(_.info("start call result = "+v.result),!v||0!==v.result){t.next=37;break}v.param&&(c.callId=v.param.call_id),t.next=40;break;case 37:return v&&(c.errorCode=v.result),u.setNotifyFunc(98308,null),t.abrupt("return",c);case 40:return t.next=42,g.promise;case 42:if(C=t.sent,_.info("CALL_E_EVT_CALL_STARTCALL_RESULT result = "+C.param.result),!C||!C.param||0!==C.param.result){t.next=51;break}return t.next=47,h.promise;case 47:c.errorCode=0,u.setNotifyFunc(98308,null),t.next=53;break;case 51:C&&C.param?c.errorCode=C.param.result:_.error("startCallResult fail ="+(0,s.default)(C)),u.setNotifyFunc(98308,null);case 53:return t.abrupt("return",c);case 54:case"end":return t.stop()}},t,this)}));return t}()}]),e}();t.default=C},703:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(4),f=a(u),l=n(5),d=a(l),p=n(651),h=r(p),g=n(249),v=r(g),m=n(186),_=r(m),C=coreLogger.getLogger("reCallModel")("impl"),w=function(){function e(t,n){(0,f.default)(this,e),this.recallTimer=null,this.savedRecallInfo=t,this.reCallTerminateCallBack=n,this.savedRecallConfStateInfo=null}return(0,d.default)(e,[{key:"saveStateBeforeRecall",value:function(){var e=$getState().call,t=e.isMuteMic,n=e.isSpeaker,r=e.isMuteSpk,a=e.isOpenCamera,o=$getState().conf.isConfMicMute,i={isMuteMicRecall:t||o,isMuteSpkRecall:r,isSpeaker:n,isCloseCameraRecall:!a};this.savedRecallConfStateInfo=i}},{key:"startReCall",value:function(){coreCall.changeNoStreamEndcall(0),this.saveStateBeforeRecall(),$dispatch(coreUi.changeIsRecalling(!0));var e=6e4;window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&($dispatch(coreUi.createConfTipMsg([language.READY_TO_RECALL])),e=45e3);var t=this;if(this.recallTimer=setTimeout(function(){window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?C.info("[IT-Meeting] recall more than 30s, stop recall and leave conf"):C.info("recall already keep more than 60s, leave conf"),t.reCallTerminateCallBack()},e),_.isSendScreenSharing()&&window.CLIENTCONFIG.ISWIN){$getState().login.sipLoginOnly?coreConf.getSvcAtdManager().alertBox("LOW_BW_END_SHARE",0,1):alert(language.LOW_BW_END_SHARE)}this.startReToConf()}},{key:"startReToConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("startReToConf"),t=!1,$getState().conf.isStartScreenShare&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(t=!0,window.sipCreateLeaveConf=1),e.next=5,h.leaveConf(t);case 5:C.info("leave conf suc"),$dispatch(coreUi.clearEnterConfInfo()),$dispatch(coreUi.changesvcRecallorNot(!0)),$dispatch(coreUi.changeSvcNativeToJS({})),this.reCallEnterConf();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallEnterConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t,n,r,a,o,s,c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,n=t.isSipRegSuc()){e.next=7;break}return C.error("reCallEnterConf,is not Registered, can not recall"),e.abrupt("return");case 7:return e.next=9,coreSecurity.decryptKMC(this.savedRecallInfo.conf_paswd);case 9:return r=e.sent,C.info("decryptKMC suc"),a=r&&r.param&&r.param.PlainText||"",o={isCloseCameraDe:this.savedRecallConfStateInfo.isCloseCameraRecall,isMuteMicDe:1===this.savedRecallConfStateInfo.isMuteMicRecall,isMuteSpkDe:this.savedRecallConfStateInfo.isMuteSpkRecall,speakerMode:this.savedRecallConfStateInfo.isSpeaker?1:0},s={confAcs:this.savedRecallInfo.access_code,confId:this.savedRecallInfo.confid,confPwd:a,isVideo:this.savedRecallInfo.isVideo,deviceSet:o,isVMR:this.savedRecallInfo.isVMR},e.next=16,h.oneKeyEnterConfService(s);case 16:c=e.sent,c?C.info("startReToConf suc"):(C.error("startReToConf fail, need to startReToConf again"),v.isInConf()||this.startReToConf());case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"terminateReCall",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("terminateReCall"),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallTerminate",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("reCallTerminate"),window.CLIENTCONFIG.ENABLE_IT_MEETING?window.itWeLinkNotifyCallEnded(0,language.THE_CALL_FAILED_CALL_ENDED):alert(language.THE_CALL_FAILED_CALL_ENDED),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(t="60s No Stream",coreConf.meetingHWreCallTimeOut(t)),coreConf.actionLeaveConf(),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallSucToStopReCall",value:function(){C.info("reCallSucToStopReCall"),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1))}}]),e}();t.default=w},704:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("conf/svc")("model"),p=function(){function e(){(0,u.default)(this,e),this.ssrcRange={min:0,max:24},this.needChangeSSRC=!1,this.isInited=!1}return(0,l.default)(e,[{key:"getSsrcRange",value:function(){return this.ssrcRange}},{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInited){e.next=3;break}return d.info("already init,so return"),e.abrupt("return");case 3:return d.info("svc init,callId = "+handlePhoneNumber(t)),this.isInited=!0,this.callId=t,window.hasDealAttendeeUpdateEvent=0,e.next=9,this.changeBandMode();case 9:return e.next=11,this.setResolution();case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeBandMode",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return d.info("changeBandMode is no need for bigwin"),e.abrupt("return");case 3:return d.info("changeBandMode start"),e.next=6,coreCall.getBasicBandInfo(this.callId);case 6:t=e.sent,d.info("svcModeBand is ",t),t>0&&t<1024?($dispatch(coreUi.changeSvcBandMode(constant.SVC_BAND_MODE.LOW_BAND)),window.CLIENTCONFIG.ISWIN?$dispatch(coreUi.changeConfViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)):$dispatch(coreUi.changeConfViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE))):t<2048&&t>=1024&&($dispatch(coreUi.changeSvcBandMode(constant.SVC_BAND_MODE.MIDDLE_BAND)),$dispatch(coreUi.changeMaxSizeForPage(constant.SVC_MAX_SIZE_FOR_PAGE.LOW_BS_MAX_SIZE)));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"setResolution",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("svc setResolution start"),window.CLIENTCONFIG.ISMOBILE?coreConf.getSvcAttendanceManager().setMobileMaxEncodeResolution(this.callId):coreConf.getSvcAttendanceManager().setDesktopMaxEncodeResolution(),e.next=4,coreConf.getSvcAttendanceManager().setMaxWatchResolutionByLevelId(this.callId);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeSsrcRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.needChangeSSRC)return void d.info("already needChangeSSRC, so return");t&&(this.needChangeSSRC=!0);var n={min:0,max:24};if(isNullOrEmpty(e.svc_lable)||(n={min:e.svc_lable[0],max:e.svc_lable[1]}),isNullOrEmpty(e.svc_lables)||(n={min:e.svc_lables[0],max:e.svc_lables[1]}),n.min>=n.max){var r=n.max;n.max=n.min,n.min=r}d.info("ssrcRange min is "+n.min+",max is "+n.max),this.ssrcRange=n,coreCommon.Observer.publish("changeSsrcRange",n)}}]),e}();t.default=p},705:function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},706:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"cutstr",value:function(e,t){var n=0,r=0,a=String();r=e.length;for(var o=0;o<r;o++){var i=e.charAt(o);if(n++,escape(i).length>4&&n++,a=a.concat(i),n>=t)return a=a.concat("...")}if(n<t)return e}}]),e}();t.default=c},707:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i,s=n(142),c=r(s),u=n(3),f=r(u),l=n(69),d=r(l),p=n(1),h=r(p),g=n(2),v=r(g),m=n(4),_=r(m),C=n(5),w=r(C),S=n(708),I=r(S),E=n(208),N=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(E),n(166)),b=n(227),T=n(273),y=coreLogger.getLogger("dataconf")("model"),O=(o=a=function(){function e(t,n){(0,_.default)(this,e),i.call(this),this.m_confHandle=t,this.callId=n,this.m_user_id=0,this.loadDocSharePromise=new PromiseObject,this.hasLoadDataShareComp=!1,this.isInRemoteControlling=!1,this.isUnderRemoteControlling=!1,this.remoteControlUserNum="",this.shareOwnerUserId="",this.m_component=0,this.isDataShareStarted=!1,this.isUsePrimarySize=!1,this.m_dspageid=0,this.m_dsdocid=0,this.m_pagewidth=0,this.m_pageheight=0,this.docSharingDocID=0,this.wbService=null,this.isRecevingAppshare=!1,this.docSharingFilePath="",this.bigwinRealRectLeft=0,this.bigwinRealRectRight=0,this.bigwinRealRectTop=0,this.bigwinRealRectBottom=0,this.sharingType=constant.ConfSharingType.None,this.isStoppingSharing=!1,this.memberService=null,this.hasCloseShareDataOperate=!1,this.shareAudio=!1,this.shareMonitorType=0,this.oldShareAppHwnd=0,this.shareAppHwnd=0,this.isSupportShareStrategy=!1}return(0,w.default)(e,[{key:"isRecevingWBSharing",value:function(){return this.isInWBSharing()&&this.wbService.m_ownerUserid!==this.m_user_id}},{key:"isRecevingDocSharing",value:function(){return this.isInDocSharing()&&this.docSharingDocID!==this.m_dsdocid}},{key:"isRecevingScreenSharing",value:function(){return this.isInScreenSharing()&&this.shareOwnerUserId!==this.m_user_id}},{key:"isSendScreenSharing",value:function(){return this.isInScreenSharing()&&this.shareOwnerUserId===this.m_user_id}},{key:"isRecevingSharing",value:function(){return this.isRecevingWBSharing()||this.isRecevingDocSharing()||this.isRecevingScreenSharing()}},{key:"closeWBTab",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(h.default.mark(function e(){var t;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:return t=e.sent,e.next=5,t.sendNotifyAllUsersCloseSharingTab(this.m_confHandle,this.m_user_id,25);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"BeStopedWBDoc",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(h.default.mark(function e(){var t,n,r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.wbService){e.next=13;break}if(t=this.wbService,!0!==t.m_isChairman){e.next=11;break}return n=t.m_docid,r=t.m_confHandle,this.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!1}),e.next=9,I.default.deleteWBDoc(this.confHandle,n);case 9:e.next=13;break;case 11:this.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!1});case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"dealInviteUserWBSharing",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("be invited to start WB share"),coreCommon.Observer.publish("OnDealInviteUserWBSharing");case 2:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),i=function(){var e=this;this.initShareService=(0,v.default)(h.default.mark(function t(){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.registerTupNotify();case 2:case"end":return t.stop()}},t,e)})),this.registerTupNotify=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("[share] registerTupNotify"),t.next=3,coreTup.getdataConfInstance();case 3:n=t.sent,n.setNotifyFunc(40001009,e.handleLoadComponentResult),n.setNotifyFunc(40001031,e.loadComponentReturn),n.setNotifyFunc(40002111,e.onAsOnScreenData),n.setNotifyFunc(40002166,e.onAsScreenDataToBfcpData),n.setNotifyFunc(40002112,e.onAsOnScreenSizeChange),n.setNotifyFunc(40002115,e.onAsOnScreenKeyFrameRecv),n.setNotifyFunc(40001215,e.handledevcapable),n.setNotifyFunc(40001008,e.handleUserMessageUpdateResult),n.setNotifyFunc(40002167,e.handleApplistResult),n.setNotifyFunc(40002201,e.handleDocShareDocNew),n.setNotifyFunc(40002206,e.handleDsCurrentPage),n.setNotifyFunc(40002801,e.handleWBOnNewDoc),n.setNotifyFunc(40002802,e.handleWBOnDeleteDoc),n.setNotifyFunc(40002805,e.handleWBOnCurrentPageInd),n.setNotifyFunc(40002806,e.handleWBOnCurrentPage),n.setNotifyFunc(40002205,e.handleDsCurrentPageInd),n.setNotifyFunc(40003e3,e.handleOperateTokenResult),n.setNotifyFunc(40002121,e.onAsOnSharingState),n.setNotifyFunc(40002122,e.onAsOnSharingSession),n.setNotifyFunc(40002162,e.handleDisplayInfoResult),n.setNotifyFunc(40002163,e.handleDecodeBfcpSuccessInDataConf),n.setNotifyFunc(40002151,e.handleSharingUserDefineMsg),n.setNotifyFunc(40002123,e.handlePrivilegeState);case 27:case"end":return t.stop()}},t,e)})),this.onAsOnScreenData=function(t){return t.param.confHandle&&t.param.confHandle!==e.m_confHandle?void y.error("confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle):e.isDataShareStarted?void coreCommon.Observer.publish("OnScreenData",t):void y.info("data share has stoped")},this.onAsScreenDataToBfcpData=function(t){return t.param.confHandle&&t.param.confHandle!==e.m_confHandle?void y.error("onAsScreenDataToBfcpData confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle):e.isDataShareStarted?void coreCommon.Observer.publish("OnScreenDataToBfcpData",t):void y.info("onAsScreenDataToBfcpData share has stoped")},this.onAsOnScreenSizeChange=function(t){if(t.param.confHandle&&t.param.confHandle!==e.m_confHandle)return void y.error("confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle);coreCommon.Observer.publish("OnSharingScreenSizeChange",t)},this.onAsOnScreenKeyFrameRecv=function(t){e.setDataConfParams({keyframerecv:1}),coreCommon.Observer.publish("onReceivedScreenKeyFrame",t),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_DESKTOP_SHARE_FIRST_FRAME,extraTrackKey:null,resultParams:[],isTrackTimeCosts:!0})},this.handledevcapable=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=JSON.parse((0,d.default)(n)),void 0!==r.param.m_phone_user_name&&(a=r.param.m_phone_user_name,r.param.m_phone_user_name=handlePhoneNumber(a)),r.param.m_binding_nid&&(o=r.param.m_binding_nid,r.param.m_binding_nid=handlePhoneNumber(o)),r.param.m_nDeviceID&&(i=r.param.m_nDeviceID,r.param.m_nDeviceID=handlePhoneNumber(i)),r.param.m_uri&&(s=r.param.m_uri,r.param.m_uri=handlePhoneNumber(s)),y.info("handledevcapable,data = ",r);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleUserMessageUpdateResult=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(y.info("handleUserMessageUpdateResult start",n),!n.param||"uc_component_status_update"!==n.param.msg_name){t.next=19;break}if(r=new DOMParser,!(a=n.param.msg)){t.next=19;break}if(o=r.parseFromString(a,"text/xml"),i=parseInt(o.getElementsByTagName("status")[0].childNodes[0].nodeValue),s=parseInt(o.getElementsByTagName("component")[0].childNodes[0].nodeValue),y.info("handleUserMessageUpdateResult status: "+i+" component: "+s),0!==i||0!==s){t.next=12;break}return y.info("webclient send 00,ignore"),t.abrupt("return");case 12:return t.next=14,coreTup.getNativeWindowInstance();case 14:c=t.sent,c.updateComponentStatus(s,i),e.m_component=s,u={component:s,status:i},coreCommon.Observer.publish("updateComponentStatus",u);case 19:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleApplistResult=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("applistResult",n);case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDocShareDocNew=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:y.info("DocShare handleDocShareDocNew ",n),coreCommon.Observer.publish("onMacRecvWhiteBoardOrDoc",{type:2}),e.docSharingDocID!==n.param.value1&&e.isExistAnySharing()&&coreCommon.Observer.publish("onCloseAllSharing",{});case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.isExistAnySharing=function(){return!0===e.isInWBSharing()||e.isInDocSharing()||e.isInScreenSharing()},this.isInWBSharing=function(){return null!==e.wbService&&(e.wbService.m_docid>0&&e.wbService.m_pageid>0&&e.wbService.m_ownerUserid>0)},this.isInDocSharing=function(){return e.m_dsdocid>0&&e.m_dspageid>0},this.isInScreenSharing=function(){return e.shareOwnerUserId>0&&!0===e.isDataShareStarted},this.isInSendDocSharing=function(){return y.info("isInSendDocSharing docSharingDocID = ",e.docSharingDocID),0!==e.docSharingDocID&&e.docSharingDocID===e.m_dsdocid},this.isInReceiveDocSharing=function(){return 0===e.docSharingDocID&&0!==e.m_dsdocid},this.handleDsCurrentPageInd=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b.DFConfig.isDocShareEnabled()){t.next=3;break}return y.info("handleDsCurrentPageInd doc share unenable"),t.abrupt("return");case 3:if(y.info("handleDsCurrentPageInd: ",n),e.m_component===T.IID_COMPONENT.DS){t.next=6;break}return t.abrupt("return");case 6:if(!n.param){t.next=14;break}return t.next=9,coreTup.getdataConfInstance();case 9:if(r=t.sent,0===n.param.value1||0===n.param.value2){t.next=13;break}return t.next=13,r.dsSetCurrentPage(e.m_confHandle,T.IID_COMPONENT.DS,n.param.value1,n.param.value2,0);case 13:0===n.param.value1&&(e.m_dsdocid=0,e.m_dspageid=0,a={docid:0,pageid:0},coreCommon.Observer.publish("onShowNativeDSPage",a));case 14:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDsCurrentPage=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b.DFConfig.isDocShareEnabled()){t.next=3;break}return y.info("handleDsCurrentPage doc share unenable"),t.abrupt("return");case 3:return y.info("handleDsCurrentPage: ",n),t.next=6,coreTup.getNativeWindowInstance();case 6:r=t.sent,r.setDsCurrentPage(n.param.confHandle,n.param.value1,n.param.value2),e.m_dsdocid=n.param.value1,e.m_dspageid=n.param.value2,a={docid:n.param.value1,pageid:n.param.value2,issender:e.m_dsdocid===e.docSharingDocID},coreCommon.Observer.publish("onShowNativeDSPage",a);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnNewDoc=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("handleWBOnNewDoc ",n);case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnDeleteDoc=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnCurrentPageInd=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(y.info("handleWBOnCurrentPageInd ",n),!(n.param.value1>0&&n.param.value2>0)){t.next=4;break}return t.next=4,e.setWBLocalCurrentPageLocal(n);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setWBLocalCurrentPageLocal=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.wbService){t.next=6;break}return y.info("setWBLocalCurrentPageLocal wbService not null"),e.wbService.m_docid=n.param.value1,e.wbService.m_pageid=n.param.value2,t.next=6,e.wbService.setWBLocalCurrentPageLocal();case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnCurrentPage=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:y.info("handleWBOnCurrentPage ",n),null!==e.wbService&&(e.wbService.m_isChairman?coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!0}):coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!0}));case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.stopWBDoc=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.wbService){t.next=16;break}if(!0!==e.wbService.m_isChairman){t.next=12;break}return n=e.wbService.m_docid,r=e.wbService.m_confHandle,e.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!1}),t.next=8,e.requestWBToken(!1);case 8:return t.next=10,I.default.deleteWBDoc(e.m_confHandle,n);case 10:t.next=14;break;case 12:e.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!1});case 14:coreCommon.Observer.publish("OnScreenSharingStateChange",0),e.shareAudio=!1;case 16:case"end":return t.stop()}},t,e)})),this.requestWBToken=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("requestWBTok isAdd ",n),t.next=3,coreTup.getdataConfInstance();case 3:return r=t.sent,t.next=6,r.asSetOperateToken(e.m_confHandle,e.m_user_id,!0===n?constant.DATA_CONF_SHARE_OPERATE_TYPE.ADD:constant.DATA_CONF_SHARE_OPERATE_TYPE.DELETE,constant.DATA_CONF_SHARE_TOKEN_TYPE.WHITE_BOARD_SHARE);case 6:a=t.sent,y.info("requestWBTok ret ",a);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.advancedSetting=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o,i,s,c;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,1!=n){t.next=12;break}return y.info("advancedSetting setShareAudio true"),t.next=7,a.setShareAudio(e.m_confHandle,1);case 7:o=t.sent,e.shareAudio=!0,y.info("advancedSetting setShareAudio result:",(0,d.default)(o)),t.next=18;break;case 12:return y.info("advancedSetting setShareAudio false"),t.next=15,a.setShareAudio(e.m_confHandle,0);case 15:i=t.sent,e.shareAudio=!1,y.info("advancedSetting setShareAudio result:",(0,d.default)(i));case 18:if(1!=r){t.next=26;break}return y.info("advancedSetting setShareStrategy 1"),t.next=22,a.setShareStrategy(e.m_confHandle,1);case 22:s=t.sent,y.info("advancedSetting setShareStrategy result:",(0,d.default)(s)),t.next=31;break;case 26:return y.info("advancedSetting setShareStrategy 0"),t.next=29,a.setShareStrategy(e.m_confHandle,0);case 29:c=t.sent,y.info("advancedSetting setShareStrategy result:",(0,d.default)(c));case 31:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.componentStatusUpdate=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,a="<root><component>"+n+"</component><index>"+e.m_user_id+"</index><sender>"+e.m_user_id+"</sender><status>1</status><src>2</src></root>",y.info("componentStatusUpdate ",a),t.next=7,r.confUpdateParam(e.m_confHandle,"uc_component_status_update",a);case 7:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.resetConfSharingType=function(){e.sharingType=constant.ConfSharingType.None,e.docSharingFilePath=""},this.setConfSharingType=function(t,n){switch(y.info("setConfSharingType share type: "+t+"  file path: "+n),e.docSharingFilePath="",t){case 0:e.sharingType=constant.ConfSharingType.Program;break;case 1:e.sharingType=constant.ConfSharingType.Document,e.docSharingFilePath=n;break;case 2:e.sharingType=constant.ConfSharingType.Desktop;break;default:e.sharingType=constant.ConfSharingType.None}},this.getStreamInfo=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,r=null,!(e.m_user_id>0)){t.next=10;break}return t.next=7,n.getStreamInfo(e.m_confHandle);case 7:r=t.sent,t.next=11;break;case 10:y.error("getStreamInfo failed, confHandle : "+e.m_confHandle);case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}},t,e)})),this.asStart=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info(" asStart"),t.next=3,coreTup.getdataConfInstance();case 3:r=t.sent,r.asSetSharetype(e.m_confHandle,0),window.CLIENTCONFIG.ISBIGWIN&&e.bigwinRealRectBottom>0?(y.info("setDataShareRealRect start11"),r.setDataShareRealRect(e.m_confHandle,e.bigwinRealRectLeft,e.bigwinRealRectTop,e.bigwinRealRectRight,e.bigwinRealRectBottom)):y.info("setDataShareRealRect start11 error, bottom : "+e.bigwinRealRectBottom),e.setDataShareScreenGDIEXType(),r.setDataCodecVersion(e.m_confHandle,b.DFConfig.dataCodeccVersion),r.asStart(e.m_confHandle),coreCommon.Observer.publish("OnSharingSessionStart",n);case 10:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataShareScreenGDIEXType=(0,v.default)(h.default.mark(function t(){var n,r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.m_confHandle>0)){t.next=10;break}return t.next=3,coreTup.getdataConfInstance();case 3:return n=t.sent,r=b.DFConfig.captureType(),y.info("setDataShareScreenGDIEXType,type = "+r),t.next=8,n.setDataShareScreenCaptureType(e.m_confHandle,r);case 8:a=t.sent,y.info("setDataShareScreenGDIType,ret = ",a);case 10:case"end":return t.stop()}},t,e)})),this.setDataShareScreenPicQuality=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.m_confHandle>0)){t.next=6;break}return y.info("setDataShareScreenPicQuality success, val : "+n),t.next=4,coreTup.getdataConfInstance();case 4:r=t.sent,r.setDataShareScreenPicQuality(e.m_confHandle,n);case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.startShare=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=36;break}return t.next=6,e.componentStatusUpdate(constant.ConfSharingType.Desktop);case 6:return t.next=8,coreTup.getCallInstance();case 8:return a=t.sent,a.setStgTunnel(e.callId,1),e.setCloseShareDataOperate(!1),y.info("startShareScreen start, confHandle : "+e.m_confHandle+",m_user_id:"+e.m_user_id),t.next=14,r.setDataCodecVersion(e.m_confHandle,b.DFConfig.dataCodeccVersion);case 14:return t.next=16,r.asSetOperateToken(e.m_confHandle,e.m_user_id,constant.DATA_CONF_SHARE_OPERATE_TYPE.ADD,constant.DATA_CONF_SHARE_TOKEN_TYPE.SCREEN_SHARE);case 16:if(o=t.sent,y.info("asSetOperate done"),!o||!o.param||void 0===o.param.result){t.next=32;break}if(0!==o.param.result){t.next=23;break}y.info("asSetOperate sucess"),t.next=30;break;case 23:if(103!==o.param.result){t.next=29;break}return t.next=26,r.asSetOwner(1,e.m_confHandle,e.m_user_id);case 26:y.info("asSetOwner ret done"),t.next=30;break;case 29:y.info("asSetOperate result"+o.param.result);case 30:t.next=33;break;case 32:y.error("asSetOperate fail "+(0,d.default)(o));case 33:30===n?r.setDataShareScreenPicQuality(e.m_confHandle,n):r.setDataShareScreenCaptureType(e.m_confHandle,b.DFConfig.captureType()),t.next=38;break;case 36:coreCommon.Observer.publish("OnStartShareFailed"),y.error("startShareScreen failed, confHandle : "+e.m_confHandle+",m_user_id:"+e.m_user_id);case 38:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.stopShareScreen=(0,v.default)(h.default.mark(function t(){var n,r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:y.info("stopShareScreen isStoppingSharing = "+e.isStoppingSharing),n=0;case 2:if(!(e.isStoppingSharing&&n<10)){t.next=8;break}return t.next=5,sleep(300);case 5:n++,t.next=2;break;case 8:return e.isStoppingSharing=!0,t.next=11,coreTup.getdataConfInstance();case 11:if(r=t.sent,!(e.m_user_id>0)){t.next=48;break}if(y.info("stopShareScreen start, confHandle : "+e.m_confHandle),!0===window.isByShareState){t.next=21;break}return t.next=17,r.asStop(e.m_confHandle);case 17:return t.next=19,e.stopDocShare();case 19:t.next=23;break;case 21:window.isByShareState=!1,y.info("set by share state false");case 23:return t.next=25,r.asSetOperateToken(e.m_confHandle,e.m_user_id,constant.DATA_CONF_SHARE_OPERATE_TYPE.DELETE,constant.DATA_CONF_SHARE_TOKEN_TYPE.SCREEN_SHARE);case 25:if(a=t.sent,y.info("release asSetOperateTok done"),!a||!a.param){t.next=41;break}if(0!==a.param.result){t.next=32;break}y.error("asSetOperateTok success "),t.next=39;break;case 32:if(103!==a.param.result){t.next=38;break}return t.next=35,r.asSetOwner(0,e.m_confHandle,e.m_user_id);case 35:y.info("release asSetOwner ret done"),t.next=39;break;case 38:y.error("asSetOperateTok err ",a);case 39:t.next=42;break;case 41:y.error("asSetOperateTok fail ",a);case 42:return t.next=44,r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id);case 44:y.info("stopShareScreen operate over"),coreCommon.Observer.publish("onStopShareFinished"),t.next=50;break;case 48:window.isByShareState=!1,y.error("stopShareScreen failed, confHandle : "+e.m_confHandle);case 50:e.isStoppingSharing=!1,e.shareAudio=!1;case 52:case"end":return t.stop()}},t,e)})),this.setShareType=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return y.info("setShareType start, confHandle : "+e.m_confHandle),t.next=7,r.asSetSharetype(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?y.info("setShareType failed, result = ",a.result):y.info("setShareType success, result = ",a.result),t.next=12;break;case 11:y.error("setShareType failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setSharingDisplay=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return y.info("setSharingDisplay, confHandle, "+e.m_confHandle+", index = "+n),t.next=7,r.asSetSharingDisplay(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?y.info("setSharingDisplay failed, result = ",a.result):y.info("setSharingDisplay success, result = ",a.result),t.next=12;break;case 11:y.error("setSharingDisplay failed, confHandle : "+e.m_confHandle+", index = "+n);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setTransparentwindow=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return y.info("setTransparentwindow start, m_congetDisplayInfofhandle : "+e.m_confHandle),t.next=7,a.asSetTransparentwindow(e.m_confHandle,n,r);case 7:o=t.sent,0!==o.param.result?y.info("setTransparentwindow failed, res = ",o):y.info("setTransparentwindow success"),t.next=12;break;case 11:y.error("setTransparentwindow failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.setAppShareScreenParam=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,!(e.m_user_id>0)){t.next=11;break}return y.info("setAppShareScreenParam start, confHandle : "+e.m_confHandle),t.next=7,a.setAppShareScreenParam(e.m_confHandle,n,r);case 7:o=t.sent,0!==o.result?y.info("setAppShareScreenParam failed, result = ",o.result):y.info("setAppShareScreenParam success, result = ",o.result),t.next=12;break;case 11:y.error("setAppShareScreenParam failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.setDataShareVersion=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return y.info("setDataShareVersion, confHandle : "+e.m_confHandle),t.next=7,r.setDataShareVersion(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?y.info("setDataShareVersion failed, result = ",a.result):y.info("setDataShareVersion success, result = ",a.result),t.next=12;break;case 11:y.error("setDataShareVersion failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.cancelSharingapp=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,y.info("cancelSharingapp start, confHandle : "+e.m_confHandle+",appwnd:"+n),t.next=6,r.asSetSharingapp(e.m_confHandle,n,0);case 6:a=t.sent,0!==a.result?y.info("cancelSharingapp failed, result = ",a.result):y.info("cancelSharingapp success, result = ",a.result);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setSharingapp=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,y.info("startShareScreen start, confHandle : "+e.m_confHandle+",appwnd:"+n),t.next=6,coreTup.getNativeWindowInstance();case 6:return a=t.sent,t.next=9,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:T.NATIVE_DATA_PARAMTYPE.SET_APP_BG_COLOR});case 9:return t.next=11,r.asSetSharingapp(e.m_confHandle,n,1);case 11:o=t.sent,0!==o.result?y.info("setSharingapp failed, result = ",o.result):y.info("setSharingapp success, result = ",o.result);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setStart=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,y.info("setStart start, confHandle : "+e.m_confHandle),e.setDataShareScreenGDIEXType(),t.next=7,n.asStart(e.m_confHandle);case 7:r=t.sent,0!==r.result?y.info("setStart failed, result = ",r.result):y.info("setStart success, result = ",r.result);case 9:case"end":return t.stop()}},t,e)})),this.setDataConfShareRealRect=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:n=t.sent,e.m_user_id>0&&(y.info("setDataConfShareRealRect, confHandle : "+e.m_confHandle),window.CLIENTCONFIG.ISBIGWIN&&e.bigwinRealRectBottom>0?(y.info("setDataConfShareRealRect start11"),n.setDataShareRealRect(e.m_confHandle,e.bigwinRealRectLeft,e.bigwinRealRectTop,e.bigwinRealRectRight,e.bigwinRealRectBottom)):y.info("setDataConfShareRealRect start11 error, bottom : "+e.bigwinRealRectBottom));case 4:case"end":return t.stop()}},t,e)})),this.handleOperateTokenResult=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(y.info("[BOM][debug] data: ",n),2===n.param.msg_type&&1===n.param.token_type&&4294967293===n.param.user_id?(r={param:{user_alt_uri:n.param.user_id,user_alt_id:n.param.user_id,user_name:"BFCP_USER"}},e.memberService.addMember(r,!1),$dispatch(coreUi.changeShareCapShowNameTips(!1))):3===n.param.msg_type&&1===n.param.token_type&&4294967293===n.param.user_id?(a={param:{user_alt_id:n.param.user_id}},$dispatch(coreUi.changeShareCapShowNameTips(!0))):2===n.param.msg_type&&4294967293!==n.param.user_id&&$dispatch(coreUi.changeShareCapShowNameTips(!0)),y.info("[BOM} isShowNameTips = "+$getState().conf.isShowNameTips),1!==n.param.token_type||1!==n.param.msg_type||0===n.param.result){t.next=8;break}coreCommon.Observer.publish("onRequestOperateTokenFail"),y.info("request data tok failed, stop share"),t.next=67;break;case 8:if(0!==n.param.token_type||2!==n.param.msg_type||0!==n.param.user_type){t.next=14;break}y.info("recv bfcp data from dataConf, callid: ",e.callId),coreCommon.Observer.publish("BFCPDecodeSuc",e.callId,!0),e.handleDataToBfcpStart(),t.next=67;break;case 14:if(0!==n.param.token_type||3!==n.param.msg_type||0!==n.param.user_type){t.next=19;break}coreCommon.Observer.publish("BFCPDataStopRec",!0),e.handleDataToBfcpStop(),t.next=67;break;case 19:if(2!==n.param.token_type){t.next=67;break}if(1!==n.param.msg_type){t.next=24;break}0===n.param.result?(y.info("whiteboard tok request success"),e.createWBNewDocAndPage()):y.info("whiteboard tok request failed"),t.next=67;break;case 24:if(2!==n.param.msg_type||0!==n.param.result){t.next=58;break}if(!(n.param.user_id>0)){t.next=55;break}return y.info("whiteboard tok owner flag, userid :",n.param.user_id),t.next=29,e.stopDocShare();case 29:if(!e.isInScreenSharing()){t.next=36;break}return y.info("stop prev share when recv WB token"),o={},o.param={},o.param.value2=0,t.next=36,e.screenDataShareEnded(o);case 36:if(null!==e.wbService){t.next=48;break}if(coreCommon.Observer.publish("onDataSharingStateChanged",!0),n.param.user_id!==e.m_user_id){t.next=43;break}return t.next=41,e.createWBNewDocAndPage();case 41:t.next=48;break;case 43:y.info("whiteboard receive"),coreCommon.Observer.publish("onReceiveWhiteBoardShare"),e.wbService=new I.default,e.wbService.m_confHandle=e.m_confHandle,e.wbService.m_isChairman=!1;case 48:null!==e.wbService&&(e.wbService.m_ownerUserid=n.param.user_id,y.info("wbService m_ownerUserid ",e.wbService.m_ownerUserid)),i=null!==e.wbService?e.memberService.getMemberNameByUserId(e.wbService.m_ownerUserid):"",coreCommon.Observer.publish("onMacRecvWhiteBoardOrDoc",{type:T.IID_COMPONENT.WB,name:i}),coreCommon.dispatchModuleEvent("pluginWhiteBoardSharingStateChangedNotify",!0),f.default.resolve().then((0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=null!==e.wbService?e.memberService.getBindnoByUserid(e.wbService.m_ownerUserid):"")){t.next=7;break}return t.next=5,coreContact.queryUserInfoByKeyWord({keyWord:n});case 5:r=t.sent,coreCommon.dispatchModuleEvent("pluginDataSharingPersonChangedNotify",{sharerName:i,shareAccount:r.show_account});case 7:case"end":return t.stop()}},t,e)}))),t.next=56;break;case 55:y.info("whiteboard tok owner flag fail,userid==0");case 56:t.next=67;break;case 58:if(3!==n.param.msg_type||0!==n.param.result){t.next=67;break}if(y.info("whiteboard tok release "),null===e.wbService){t.next=67;break}return coreCommon.dispatchModuleEvent("pluginWhiteBoardSharingStateChangedNotify",!1),t.next=64,e.BeStopedWBDoc();case 64:coreCommon.Observer.publish("onDataSharingStateChanged",!1),s=$getState().conf,c=s.svcViewMode,u=s.maxSizeForPage,c===constant.SVC_VIEW_MODE.DIVIDE_MODE&&window.CLIENTCONFIG.ISWIN&&u!==N.SvcAtdManager.getMaxSizeForPage(c)&&($dispatch(coreUi.changeMaxSizeForPage(N.SvcAtdManager.getMaxSizeForPage(c))),N.SvcAtdManager.RedrawVideoMain());case 67:y.info("receive operate result = "+n.param.result);case 68:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.createWBNewDocAndPage=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("createWBNewDocAndPage start"),t.next=3,e.prepareWBSharing();case 3:return t.next=5,new I.default;case 5:return e.wbService=t.sent,t.next=8,e.wbService.createWBNewDocAndPage(e.m_confHandle);case 8:return n=t.sent,!1===n&&(e.wbService=null),t.abrupt("return",n);case 11:case"end":return t.stop()}},t,e)})),this.prepareWBSharing=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,r="<LoadedCom><LoadedCom>512</LoadedCom></LoadedCom>",t.next=6,n.confUpdateParam(e.m_confHandle,"Param_UpdateLoadedCom",r);case 6:return t.next=8,e.componentStatusUpdate(constant.COMPONENT_IID.IID_COMPONENT_WB);case 8:case"end":return t.stop()}},t,e)})),this.prepareDocSharing=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,r="<LoadedCom><LoadedCom>1</LoadedCom></LoadedCom>",t.next=6,n.confUpdateParam(e.m_confHandle,"Param_UpdateLoadedCom",r);case 6:return t.next=8,e.componentStatusUpdate(constant.COMPONENT_IID.IID_COMPONENT_DS);case 8:case"end":return t.stop()}},t,e)})),this.setDocShareCurrentPage=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a){var o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n<0||r<0)){t.next=3;break}return y.info("DocShare set cur page param error!"),t.abrupt("return");case 3:return t.next=5,coreTup.getdataConfInstance();case 5:return o=t.sent,t.next=8,o.docShareGetPageIdByPageNo(e.m_confHandle,n,r);case 8:return i=t.sent,t.next=11,o.docShareSetCurPage(e.m_confHandle,n,i.param.pageNo,a?1:0);case 11:s=t.sent,y.info("tup_conf_ds_set_current_page res : ",s);case 13:case"end":return t.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.stopDocShare=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(y.info("stopDocShare start "),!(e.m_dsdocid>0)){t.next=16;break}if(!e.isInSendDocSharing()){t.next=11;break}return y.info("stopDocShare sender docshare"),t.next=6,coreTup.getdataConfInstance();case 6:return n=t.sent,t.next=9,n.docShareStop(e.m_confHandle,e.docSharingDocID);case 9:t.next=12;break;case 11:y.info("stopDocShare receiver docshare");case 12:e.docSharingDocID=0,e.m_dsdocid=0,r={docid:0,pageid:0},coreCommon.Observer.publish("onShowNativeDSPage",r);case 16:y.info("stopDocShare end");case 17:case"end":return t.stop()}},t,e)})),this.onAsOnSharingSession=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.param.confHandle||n.param.confHandle===e.m_confHandle){t.next=3;break}return y.error("confhandle is diff,old = "+e.m_confHandle+",new = "+n.param.confHandle),t.abrupt("return");case 3:if(y.info("onAsOnSharing[Session] , data : ",desensitive(n)),y.info("[BOM]onAsOnSharing[Session] this.m_user_id = "+e.m_user_id+", data.param.user_id = "+n.param.user_id),!n.param.user_id){t.next=37;break}return t.next=8,coreTup.getNativeWindowInstance();case 8:r=t.sent,r.updateComponentStatus(2,1),a=e.memberService.dataUserList,o="",i=0;case 13:if(!(i<a.length)){t.next=23;break}if(!a[i].user_id||a[i].user_id!==n.param.user_id){t.next=20;break}return o=a[i].user_num,s=n.param.user_id===e.m_user_id,e.shareOwnerUserId=n.param.user_id,coreCommon.Observer.publish("OnShareOwnerChange",{userNum:o,isSelf:s}),t.abrupt("break",23);case 20:i++,t.next=13;break;case 23:if(n.param.user_id!==e.m_user_id){t.next=35;break}if(!(e.shareAppHwnd>0)){t.next=31;break}y.info("onAsOnSharing[Session], setShareType and getApplist"),e.setShareType(1),e.getDisplayInfo(),e.getApplist(),t.next=33;break;case 31:return t.next=33,e.asStart(n);case 33:t.next=37;break;case 35:coreCommon.Observer.publish("ChangeFirstActiveShareApp",!0),y.info("onAsOnSharing[Session] asstart fail");case 37:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.onAsOnSharingState=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.param.confHandle||n.param.confHandle===e.m_confHandle){t.next=3;break}return y.error("confhandle is diff,old = "+e.m_confHandle+",new = "+n.param.confHandle),t.abrupt("return");case 3:if(y.info("[BOM]onAsOnSharingState , data : ",n),r=1===n.param.annoForbidden,a=1===n.param.controlForbidden,0===b.DFConfig.dataCodeccVersion&&(a=!1,r=!1),$dispatch(coreUi.changeShareCapAnnoForbidden(r)),$dispatch(coreUi.changeShareCapControlForbidden(a)),1!==n.param.value2){t.next=44;break}if(y.info("[BOM]onAsOnSharingState 他人发起屏幕共享收到的通知"),y.info("isDataSharing false 7"),e.isRecevingAppshare=1===n.param.value1,0===n.param.value1?(y.info("[BOM]onAsOnSharingState 屏幕共享"),coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!1,type:"screenShare",state:1}),o=coreConf.getCurrentConfId(),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DESKTOP_SHARE_FIRST_FRAME,extraTrackKey:null,params:[o]})):1===n.param.value1&&(y.info("[BOM]onAsOnSharingState 程序共享"),coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!1,type:"docShare",state:1})),window.isDataSharing=!1,!b.DFConfig.sendAnnotationEnable||n.param.annostate!==T.IID_COMPONENT.WB||!0!==e.isDataShareStarted){t.next=21;break}return y.info("onAsOnSharingState annostate, receive annotation"),e.setDataConfParamsInQueue({annostate:1}),t.abrupt("return");case 21:if(!b.DFConfig.sendAnnotationEnable||0!==n.param.annostate||!0!==e.isDataShareStarted){t.next=25;break}return y.info("onAsOnSharingState annostate,annotation stop"),e.setDataConfParamsInQueue({annostate:0}),t.abrupt("return");case 25:return e.isDataShareStarted=!0,y.info("onAsOnSharingState , receive datashare"),t.next=29,coreTup.getCallInstance();case 29:if(i=t.sent,i.setStgTunnel(e.callId,2),null===e.wbService){t.next=34;break}return t.next=34,e.stopWBDoc();case 34:if(!e.isInSendDocSharing()&&!e.isInReceiveDocSharing()){t.next=38;break}return t.next=37,e.stopDocShare();case 37:e.resetConfSharingType();case 38:coreCommon.Observer.publish("OnShareingStart",n),coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),s=e.memberService.getMemberNameByUserId(e.shareOwnerUserId),coreCommon.Observer.publish("OnRemoteScreenShare",s),t.next=68;break;case 44:if(2!==n.param.value2){t.next=67;break}if(y.info("[BOM]onAsOnSharingState 本人发起桌面共享和程序共享"),0===n.param.value1?coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!0,type:"screenShare",state:1}):1===n.param.value1&&coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!0,type:"docShare",state:1}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),y.info("onAsOnSharingState , start datashare"),!b.DFConfig.sendAnnotationEnable||n.param.annostate!==T.IID_COMPONENT.WB||!0!==e.isDataShareStarted){t.next=56;break}return y.info("onAsOnSharingState , self receive annotation"),t.next=53,e.setDataConfParamsInQueue({annostate:1});case 53:return t.abrupt("return");case 56:if(!b.DFConfig.sendAnnotationEnable||0!==n.param.annostate||!0!==e.isDataShareStarted){t.next=60;break}return y.info("onAsOnSharingState , self stop annotation"),e.setDataConfParamsInQueue({annostate:0}),t.abrupt("return");case 60:e.isDataShareStarted=!0,y.info("isDataSharing true 4"),window.isDataSharing=!0,coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),coreCommon.Observer.publish("OnSshareScreenOper",0),t.next=68;break;case 67:0===n.param.value2?e.isInScreenSharing()?(y.info("[BOM]onAsOnSharingState screenDataShareEnded"),e.screenDataShareEnded(n)):y.info("onAsOnSharingState prepare stop,but not isInScreenSharing,isDataShareStarted:"+e.isDataShareStarted):y.error("sharing state error");case 68:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataConfParamsInQueue=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=coreCommon.TaskQueue.getInstance(b.DFConfig.moduleName),a=coreCommon.TaskOptions.defaultOptions(),a.proxy=e,r.addTask(e.setDataConfParams,a,null,n);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.screenDataShareEnded=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("onAsOnSharingState , stop datashare"),n.isself=e.m_user_id===e.shareOwnerUserId,e.isDataShareStarted=!1,e.isRecevingAppshare=!1,e.shareOwnerUserId="",window.isByShareState=!0,y.info("set by share state true"),coreCommon.Observer.publish("OnShareingEnd",n),r={isself:n.isself,type:0===n.param.value1?"screenShare":"docShare",state:0},coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",r),coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),t.next=13,coreTup.getdataConfInstance();case 13:a=t.sent,y.info("start notify all user close sharing tab"),a.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id),y.info("notify all user close sharing tab finished");case 17:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDataToBfcpStart=(0,v.default)(h.default.mark(function t(){var n,r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.DFConfig.supportDataToBfcp){t.next=15;break}return y.info("data to bfcp info"),n=!1,r="",coreCommon.Observer.publish("OnShareOwnerChange",{userNum:r,isSelf:n}),coreCommon.Observer.publish("ChangeFirstActiveShareApp",!0),t.next=8,coreTup.getCallInstance();case 8:a=t.sent,a.setStgTunnel(e.callId,2),e.isDataShareStarted=!0,coreCommon.Observer.publish("OnShareingStart","to bfcp"),coreCommon.Observer.publish("OnScreenSharingStateChange",1),o={param:{width:1920,height:1080}},coreCommon.Observer.publish("OnSharingScreenSizeChange",o);case 15:case"end":return t.stop()}},t,e)})),this.handleDataToBfcpStop=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.DFConfig.supportDataToBfcp){t.next=11;break}return y.info("bfcp toke release"),n={isself:!1},e.isDataShareStarted=!1,e.shareOwnerUserId="",coreCommon.Observer.publish("OnShareingEnd",n),coreCommon.Observer.publish("OnScreenSharingStateChange",0),t.next=9,coreTup.getdataConfInstance();case 9:r=t.sent,r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id);case 11:case"end":return t.stop()}},t,e)})),this.handleShareEnd=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(r=n===e.shareOwnerUserId)){t.next=4;break}return y.info("user not sharing, ignore share end request. user id = "+n),t.abrupt("return");case 4:a={isself:n===e.m_user_id,param:{value2:0}},e.isDataShareStarted=!1,e.shareOwnerUserId="",coreCommon.Observer.publish("OnShareingEnd",a),coreCommon.Observer.publish("OnScreenSharingStateChange",a.param.value2);case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleLoadComponentResult=function(e){0===e.param.result&&y.info("send load component success")},this.loadComponentReturn=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isSupportShareStrategy=!1,y.info("[BOM][share] loadComponentReturn "+(0,d.default)(n)),n.param.value2!==T.IID_COMPONENT.DS){t.next=11;break}return t.next=5,coreTup.getdataConfInstance();case 5:r=t.sent,r.dsSetBgcolor(4294967295,n.param.confHandle,1),r.dsSetDispmode(n.param.confHandle,1,0),r.dsSetCanvasSize(n.param.confHandle,1,1,{cx:1682,cy:961}),t.next=38;break;case 11:if(n.param.value2!==T.IID_COMPONENT.WB){t.next=29;break}return t.next=14,coreTup.getNativeWindowInstance();case 14:return a=t.sent,t.next=17,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:2});case 17:return t.next=19,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:5});case 19:return t.next=21,coreTup.getdataConfInstance();case 21:return o=t.sent,o.dsSetDispmode(n.param.confHandle,512,0),t.next=25,e.regCustomerType(e.m_confHandle,T.IID_COMPONENT.AS);case 25:return t.next=27,e.initAnnotationResource(e.m_confHandle,T.IID_COMPONENT.AS,window.VIDEO_DEFAULT_IMG);case 27:t.next=38;break;case 29:if(n.param.value2!==T.IID_COMPONENT.AS){t.next=38;break}return e.hasLoadDataShareComp=!0,y.info("datashare component load success"),coreCommon.Observer.publish("OnJoinDataConf",n),t.next=35,coreTup.getdataConfInstance();case 35:i=t.sent,i.setDynaicAnnoBackGroundParam(e.m_confHandle),2===n.param.data&&(y.info("isSupportShareStrategy true"),e.isSupportShareStrategy=!0,e.setDataConfParamsInQueue({isSupportShareStrategy:!0}));case 38:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.openDocShareFile=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof n&&""!==n){t.next=3;break}return y.info("DocShare openDocShareFile param error , ",void 0===n?"undefined":(0,c.default)(n),",filepath:",n),t.abrupt("return");case 3:return t.next=5,e.prepareDocSharing();case 5:return r=t.sent,y.info("DocShare openDocShareFile ret1 =",r),t.next=9,e.startDocSharing(n);case 9:return a=t.sent,y.info("DocShare openDocShareFile ret2 =",a),t.next=13,e.setDocShareCurrentPage(e.docSharingDocID,0,!0);case 13:o=t.sent,y.info("DocShare openDocShareFile ret3 =",o),e.isInScreenSharing()&&(y.info("sendStopScreenShareUserDefineMsg"),e.sendStopScreenShareUserDefineMsg()),e.isInWBSharing()&&(y.info("sendStopWhiteBoardUserDefineMsg"),e.sendStopWhiteBoardUserDefineMsg());case 17:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.startDocSharing=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof n&&""!==n){t.next=3;break}return y.info("open doc share file param error!"),t.abrupt("return");case 3:return t.next=5,coreTup.getdataConfInstance();case 5:return r=t.sent,t.next=8,r.docShareOpenFile(e.m_confHandle,n);case 8:a=t.sent,y.info("tup_conf_ds_open res : ",a),coreCommon.Observer.publish("docShareOpenResultNotify",a.param.result),e.docSharingDocID=a.param.docId,y.info(" set docSharingDocID = ",e.docSharingDocID);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handlePrivilegeState=function(t){if(y.info("handlePrivilegeState start ",t),t.param.confHandle&&t.param.confHandle!==e.m_confHandle)return void y.error("confhandle is error,old = "+e.m_confHandle+",new = "+t.param.confHandle);if(t.param.user_id&&1===t.param.value1){var n=function(){var n=e.memberService.dataUserList;e:for(var r=0;r<n.length;r++){var a=function(r){if(n[r].user_id&&n[r].user_num&&n[r].user_id===t.param.user_id){var a=e.memberService.getBindnoByUserid(e.shareOwnerUserId);return y.info("shareOwnerUserId = ",e.shareOwnerUserId),(y.info("my user id = ",e.m_user_id),y.info("currentDataMem[i].user_id = ",n[r].user_id),1===t.param.value2?f.default.resolve().then((0,v.default)(h.default.mark(function t(){var a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreContact.queryUserInfoByKeyWord({keyWord:n[r].user_num});case 2:a=e.sent,coreCommon.dispatchModuleEvent("pluginGetRemoteControlPrivilegeNotify",{userName:a.name,userAccount:a.show_account});case 4:case"end":return e.stop()}},t,e)}))):0===t.param.value2&&f.default.resolve().then((0,v.default)(h.default.mark(function t(){var a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreContact.queryUserInfoByKeyWord({keyWord:n[r].user_num});case 2:a=e.sent,coreCommon.dispatchModuleEvent("pluginDelRemoteControlPrivilegeNotify",{userName:a.name,userAccount:a.show_account});case 4:case"end":return e.stop()}},t,e)}))),e.m_user_id===t.param.user_id)?(0===t.param.value2?(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="",y.info("handlePrivilegeState getRemoteControlPrivilege1")):1===t.param.value2&&(coreCommon.Observer.publish("OnRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!0,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=n[r].user_num,y.info("handlePrivilegeState getRemoteControlPrivilege2 ")),{v:{v:void 0}}):e.shareOwnerUserId!==e.m_user_id?(!0===e.isInRemoteControlling&&1===t.param.value2&&(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=""),4===t.param.value2&&(coreCommon.Observer.publish("OnBeRejectedRemoteControlPrivilege",{usernum:n[r].user_num}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=""),"break"):(0===t.param.value2?(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:n[r].user_num,isself:!1}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="",y.info("handlePrivilegeState OnDelRemoteControlPrivilege3")):1===t.param.value2&&(coreCommon.Observer.publish("OnRemoteControlPrivilege",{usernum:n[r].user_num,isself:!1}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!0,e.remoteControlUserNum=n[r].user_num,y.info("handlePrivilegeState OnRemoteControlPrivilege4 ")),3===t.param.value2&&(coreCommon.Observer.publish("OnRequestRemoteControlPrivilege",{usernum:n[r].user_num}),y.info("handlePrivilegeState OnRequestRemoteControlPrivilege ")),"break")}}(r);switch(a){case"break":break e;default:if("object"===(void 0===a?"undefined":(0,c.default)(a)))return a.v}}}();if("object"===(void 0===n?"undefined":(0,c.default)(n)))return n.v}},this.handleDisplayInfoResult=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(y.info("handleDisplayInfoResult, data = ",n),r=0,a=1,o=0,i=n.param.value1,s=n.param.pdisplay_info,c=0;c<i;c++)0!==s[c].bPrimaryMonitor?r=s[c].dwIndex:a=s[c].dwIndex;return o=1===e.shareMonitorType?r:a,y.info("shareMonitorType = "+e.shareMonitorType+", selectedIndex = "+o),t.next=11,coreTup.getdataConfInstance();case 11:u=t.sent,u.asSetSharingDisplay(e.m_confHandle,o);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDecodeBfcpSuccessInDataConf=function(){var t=(0,v.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.info("handleDecodeBfcpSuccessInDataConf = ",n),b.DFConfig.supportDataToBfcp&&coreCommon.Observer.publish("OnSharingScreenSizeChange",n);case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.sendStopScreenShareUserDefineMsg=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("sendStopScreenShareUserDefineMsg start"),t.next=3,coreTup.getdataConfInstance();case 3:if(n=t.sent,isNullOrEmpty(e.shareOwnerUserId)){t.next=7;break}return t.next=7,n.asSendUserDataUInt(e.m_confHandle,constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP,e.shareOwnerUserId,e.m_user_id);case 7:case"end":return t.stop()}},t,e)})),this.sendStopWhiteBoardUserDefineMsg=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("sendStopWhiteBoardUserDefineMsg start"),t.next=3,coreTup.getdataConfInstance();case 3:if(n=t.sent,isNullOrEmpty(e.shareOwnerUserId)){t.next=7;break}return t.next=7,n.asSendUserDataUInt(e.m_confHandle,constant.UserDefineType.AS_NOTICE_SHARING_WB_USER_STOP_TAB,e.shareOwnerUserId,e.m_user_id);case 7:case"end":return t.stop()}},t,e)})),this.handleSharingUserDefineMsg=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:y.info("handleSharingUserDefineMsg, data = ",n),r=n.param.value1,a=n.param.userId,t.t0=r,t.next=t.t0===constant.UserDefineType.CONF_INVITE_USER_DATA_SHARING?6:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP?8:t.t0===constant.UserDefineType.CONF_END_INVITE_USER_DATA_SHARING?10:t.t0===constant.UserDefineType.AS_NOTICE_INVITE_USER_WB_SHARING?12:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP_ACK?14:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_WB_USER_STOP_TAB?15:19;break;case 6:return e.dealInviteUserDataSharing(a),t.abrupt("break",20);case 8:return e.stopShareScreen(),t.abrupt("break",20);case 10:return e.stopShareScreen(!0),t.abrupt("break",20);case 12:return e.dealInviteUserWBSharing(),t.abrupt("break",20);case 14:return t.abrupt("break",20);case 15:return y.info("whiteboard tok release "),e.stopWBDoc(),e.closeWBTab(),t.abrupt("break",20);case 19:return t.abrupt("break",20);case 20:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.dealInviteUserDataSharing=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:r=t.sent,r.asSendUserDataUInt(e.m_confHandle,6,n,e.m_user_id);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataShareRealRect=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a,o){var i;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("setDataShareRealRect  start"),t.next=3,coreTup.getdataConfInstance();case 3:return i=t.sent,t.next=6,i.setDataShareRealRect(e.m_confHandle,n,r,a,o);case 6:case"end":return t.stop()}},t,e)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),this.createNativeDataSharingWnd=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a,o,i,s,c,u,f,l,d){var p,g,v,m,_,C;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("createNativeDataSharingWnd  start1"),t.next=3,coreTup.getNativeWindowInstance();case 3:return p=t.sent,g=0,v=0,m=null!==e.wbService?e.memberService.getMemberNameByUserId(e.wbService.m_ownerUserid):s,null!==e.wbService?(g=null!==e.wbService?e.wbService.m_docid:0,v=null!==e.wbService?e.wbService.m_pageid:0):0!==e.m_dsdocid&&(g=e.m_dsdocid,v=e.m_dspageid,d=T.IID_COMPONENT.DS),_=0!==e.m_dsdocid&&e.m_dsdocid===e.docSharingDocID,C="2052"===window.langcode?window.CLIENTCONFIG.NEW_APP_CHINEASE_NAME:window.CLIENTCONFIG.NEW_APP_NAME,t.next=12,p.createDataConfFrameWnd(n,r,a,e.m_confHandle,m,o,i,c,window.langcode,window.CLIENTCONFIG.ISBIGWIN,u,f,e.m_user_id,l,d,g,v,_,e.isRecevingAppshare,C,$getState().conf.isAnnoForbidden,$getState().conf.isControlForbidden,$getState().conf.isShowNameTips);case 12:case"end":return t.stop()}},t,e)}));return function(e,n,r,a,o,i,s,c,u,f,l){return t.apply(this,arguments)}}(),this.closeNativeDataSharingWnd=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.DFConfig.isWinBase){e.next=5;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:n=e.sent,n.DestroyDataConfFrameWnd();case 5:case"end":return e.stop()}},t,e)})),this.setNativeDataControlStatus=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.DFConfig.isWinBase){e.next=5;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:r=e.sent,r.setDataConfRemoteControlStatus(n);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleNativeNotifyResetRenderRect=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("handleNativeNotifyResetRenderRect,data = ",n),t.next=3,coreTup.getdataConfInstance();case 3:r=t.sent,r.setDataShareScreenParam(e.m_confHandle,{width:n.param.width,height:n.param.height});case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setNativeBigwinOriginShowRect=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0&&r>0)){e.next=8;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:return a=e.sent,e.next=6,a.setBigwinOriginShowRect(n,r);case 6:o=e.sent,y.info("setNativeBigwinOriginShowRect,ret = ",o);case 8:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.showNativeDataControl=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a,o,i,s,c){var u,f,l,d,p;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=null===e.wbService?0:e.wbService.m_docid,f=null===e.wbService?0:e.wbService.m_pageid,l=e.sharingType===constant.ConfSharingType.Program,t.next=5,coreTup.getNativeWindowInstance();case 5:return d=t.sent,t.next=8,d.showNativeDataControl(e.m_confHandle,n,r,window.langcode,l,a,o,i,e.m_user_id,s,c,u,f);case 8:p=t.sent,y.info("showNativeDataControl,ret = ",p);case 10:case"end":return t.stop()}},t,e)}));return function(e,n,r,a,o,i,s){return t.apply(this,arguments)}}(),this.showNativeRemoteControl=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("showNativeRemoteControl,data "),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.showNativeRemoteControl(n);case 6:a=e.sent,y.info("showNativeRemoteControl,ret = ",a);case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.regCustomerType=function(){var t=(0,v.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("regCustomerType start"),e.next=3,coreTup.getdataConfInstance();case 3:return a=e.sent,e.next=6,a.regCustomerType(n,r);case 6:o=e.sent,y.info("regCustomerType,ret = ",o);case 8:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.initAnnotationResource=function(){var t=(0,v.default)(h.default.mark(function t(n,r,a){var o,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("initAnnotationResource start"),e.next=3,coreTup.getdataConfInstance();case 3:return o=e.sent,e.next=6,o.initAnnotationResource(n,r,a);case 6:i=e.sent,y.info("initAnnotationResource,ret = ",i);case 8:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.bfcpWinAttach=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return y.info("bfcpWinAttach, confHandle : "+e.m_confHandle),t.next=7,r.bfcpWinAttach(e.m_confHandle,n);case 7:a=t.sent,y.info("bfcpWinAttach result: ",a),t.next=12;break;case 11:y.error("bfcpWinAttach failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.bfcpWinDetach=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_user_id>0)){t.next=11;break}return y.info("bfcpWinDetach, confHandle : "+e.m_confHandle),t.next=7,n.bfcpWinDetach(e.m_confHandle);case 7:r=t.sent,0!==r.result?y.info("bfcpWinDetach failed, result = ",r.result):y.info("bfcpWinDetach success, result = ",r.result),t.next=12;break;case 11:y.error("bfcpWinDetach failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.changeRemoteControl2Other=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("dataconf setRemoteControl2Other success ,confhandle : "+e.m_confHandle+",useraltid : "+n),t.next=3,coreTup.getdataConfInstance();case 3:return r=t.sent,t.next=6,r.asSetPrivilege(e.m_confHandle,n,1,1);case 6:return coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_AWARD_PRIVILEGE]}),t.abrupt("return",!0);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.delRemoteControlPrivilege=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,t.next=5,r.asSetPrivilege(e.m_confHandle,n,1,0);case 5:n===e.m_user_id?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_RELEASE_PRIVILEGE]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_FETCH_BACK_PRIVILEGE]});case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.rejectRemoteControlPrivilege=function(){var t=(0,v.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,t.next=5,r.asSetPrivilege(e.m_confHandle,n,1,4);case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.requestRemoteControlPrivilege=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_REQUEST_PRIVILEGE]}),t.next=3,coreTup.getdataConfInstance();case 3:return n=t.sent,t.next=6,n.asRequestPrivilege(e.m_confHandle,1);case 6:case"end":return t.stop()}},t,e)})),this.isReceivingDataShare=function(){return!0===e.isDataShareStarted&&e.m_user_id!==e.shareOwnerUserId},this.setDataConfParams=function(){var t=(0,v.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("setDataConfParams,data ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.setDataConfParams(n);case 6:a=e.sent,y.info("setDataConfParams,ret = ",a);case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.loadShareComponent=(0,v.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y.info("handleJoinDataConfResult loadComponent start"),t.next=3,coreTup.getdataConfInstance(0);case 3:return n=t.sent,t.next=6,n.loadComponent(e.m_confHandle,T.IID_COMPONENT.DS|T.IID_COMPONENT.AS|T.IID_COMPONENT.WB);case 6:y.info("handleJoinDataConfResult loadComponent end");case 7:case"end":return t.stop()}},t,e)})),this.setCloseShareDataOperate=function(t){e.hasCloseShareDataOperate=t},this.getCloseShareDataOperate=function(){return e.hasCloseShareDataOperate},this.getDisplayInfo=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return y.info("getDisplayInfo, m_confhandle, "+e.m_confHandle),t.next=7,n.asGetDisplayInfo(e.m_confHandle);case 7:r=t.sent,0!==r.result?y.info("getDisplayInfo failed, result = ",r.result):y.info("getDisplayInfo success, result = ",r.result),t.next=12;break;case 11:y.error("getDisplayInfo failed, m_confhandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.getApplist=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return y.info("getApplist start, m_confhandle : "+e.m_confHandle),t.next=7,n.asGetApplist(e.m_confHandle);case 7:r=t.sent,0!==r.param.result?y.info("getApplist failed, result = ",r):y.info("getApplist success, result = ",r),t.next=12;break;case 11:y.error("getApplist failed, m_confhandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.showNativeShareSelectWnd=(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("showNativeShareSelectWnd start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.showNativeShareSelectWnd();case 6:r=e.sent,y.info("showNativeShareSelectWnd,ret = ",r);case 8:case"end":return e.stop()}},t,e)}))},o);t.default=O},708:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=coreLogger.getLogger("dataconf")("model"),p=(o=a=function e(){var t=this;(0,l.default)(this,e),this.createWBNewDocAndPage=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("createWBNewDocAndPage start"),t.m_confHandle=n,e.next=4,coreTup.getNativeWindowInstance();case 4:return r=e.sent,e.next=7,r.controlWhiteBoard({confhandle:t.m_confHandle,paramtype:0});case 7:if(a=e.sent,d.info("createWBNewDoc docRet",a),!(a.param.docid>0&&a.param.pageid)){e.next=19;break}return t.m_docid=a.param.docid,t.m_pageid=a.param.pageid,e.next=14,r.controlWhiteBoard({confhandle:t.m_confHandle,docid:t.m_docid,pageid:t.m_pageid,issync:!0,paramtype:1});case 14:return o=e.sent,t.m_isChairman=!0,e.abrupt("return",!0);case 19:return d.info("createWBNewDoc fail, ret : ",a.param.result),e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setWBLocalCurrentPageLocal=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("setWBLocalCurrentPageLocal start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.controlWhiteBoard({confhandle:t.m_confHandle,docid:t.m_docid,pageid:t.m_pageid,issync:!1,paramtype:1});case 6:r=e.sent,0!==r.param.result&&d.info("setWBLocalCurrentPageLocal fail, ret : ",r.param.result);case 8:case"end":return e.stop()}},e,t)})),this.m_docid=0,this.m_pageid=0,this.m_confHandle=0,this.m_isChairman=!1,this.m_ownerUserid=0},a.deleteWBDoc=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("deleteWBDoc start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.controlWhiteBoard({confhandle:t,docid:n,paramtype:4});case 6:a=e.sent,0!==a.param.result&&d.info("deleteWBDoc fail, ret : ",a.param.result);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),o);t.default=p},709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function e(){var t=this;(0,a.default)(this,e),this.addMember=function(e,n){for(var r=t.dataUserList,a=!1,o=0;o<r.length;o++)if(r[o].user_id&&r[o].user_id===e.param.user_alt_id){a=!0;break}if(!a&&"phnagt"!==e.param.user_name&&0!==e.param.user_alt_id){var i={user_num:e.param.user_alt_uri,user_id:e.param.user_alt_id,user_name:e.param.user_name,is_self:n,is_share:!1,device_type:e.param.device_type};t.dataUserList.push(i)}},this.deleteMember=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e.param.user_alt_id){n.splice(r,1);break}},this.updateDataShareOwner=function(e){for(var n=0;n<t.dataUserList.length;n++)t.dataUserList[n].is_share=t.dataUserList[n].user_num===e},this.getBindnoByUserid=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e)return n[r].user_num.toString();return""},this.getMemberNameByUserId=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e)return n[r].user_name;return""},this.getUserAltId=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_num===e)return n[r].user_id.toString();return""},this.dataUserList=[]};t.default=o},710:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.rejectConf=t.confIncoming=t.svcSeessionModify=t.confInfoNotify=t.changeIsSvcConf=t.handleJoinConf=t.callToConfFail=t.p2pToJoinConf=t.callToConfStart=t.accpetConfSuc=t.acceptConfStart=t.clearAfterConfEnd=t.closeConfPage=t.showConfOutPage=t.closeLoadingPage=t.showLoadingPage=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(711),u=r(c),f=coreLogger.getLogger("UIConf")("index"),l=null;t.showLoadingPage=function(){null===l?(f.info("showLoadingPage new confUICtrl"),l=new u.default,l.showLoadingPage()):f.error("showLoadingPage confUICtrl is exsit")},t.closeLoadingPage=function(){null===l?f.error("closeLoadingPage, confUICtrl is not exsit"):(l.closeLoadingPage(),f.info("closeLoadingPage, set confUICtrl null"),l=null)},t.showConfOutPage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";null===l?(f.info("showConfPage new confUICtrl"),l=new u.default,l.showConfOutPage(e,t,n,r)):f.error("showConfPage confUICtrl is exsit")},t.closeConfPage=function(e,t,n,r){l?l.closeConfPage(e,t,n,r):f.error("closeConfPage confUICtrl is no exsit")},t.clearAfterConfEnd=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l?(l.clearAfterConfEnd(e,t,n,r),f.info("clearAfterConfEnd set confUICtrl null"),l=null):f.error("clearAfterConfEnd confUICtrl is no exsit")},t.acceptConfStart=function(){l?l.acceptConfStart():f.error("acceptConfStart, confUICtrl is not exsit")},t.accpetConfSuc=function(){l?l.accpetConfSuc():f.error("accpetConfSuc, confUICtrl is not exsit")},t.callToConfStart=function(e){null===l?(f.info("callToConfStart new confUICtrl"),l=new u.default,l.callToConfStart(e)):f.error("callToConfStart confUICtrl is exsit")},t.p2pToJoinConf=function(){if(null===l){var e=-1!==$getState().call.callStatus.indexOf("VIDEO");f.info("p2pToJoinConf new confUICtrl, isVideo = "+e),l=new u.default(e),l.p2pToJoinConf()}else f.info("p2pToJoinConf confUICtrl is exsit, is active call to conf"),l.p2pToJoinConf()},t.callToConfFail=function(e){l?(l.callToConfFail(e),f.info("callToConfFail set confUICtrl null"),l=null):f.error("callToConfFail confUICtrl is no exsit")},t.handleJoinConf=function(){l?l.handleJoinConf():f.error("handleJoinConf confUICtrl is not exist")},t.changeIsSvcConf=function(){l?l.changeIsSvcConf():f.error("changeIsSvcConf confUICtrl is not exist")},t.confInfoNotify=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=5;break}return e.next=3,l.confInfoNotify();case 3:e.next=6;break;case 5:f.error("confInfoNotify confUICtrl is not exist");case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.svcSeessionModify=function(){l?l.svcSeessionModify():f.error("svcSeessionModify confUICtrl is not exist")},t.confIncoming=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=7;break}return f.info("confInComing new confUICtrl"),l=new u.default,e.next=5,l.confIncoming(t);case 5:e.next=8;break;case 7:f.error("confInComing confUICtrl is exsit");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.rejectConf=function(e){l?(l.rejectConf(e),f.info("reject conf set confUICtrl null"),l=null):f.error("reject conf confUICtrl is no exsit")}},711:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(712),p=r(d),h=n(713),g=r(h),v=n(714),m=r(v),_=n(715),C=r(_),w=n(716),S=r(w),I=n(717),E=r(I),N=n(718),b=r(N),T=n(721),y=r(T),O=n(194),x=n(656),A=n(359),L=coreLogger.getLogger("UIConf")("impl"),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,u.default)(this,e),this.myStatusCtrl=window.CLIENTCONFIG.USE_IM?new p.default:null,this.upgradeCtrl=new m.default,this.userTrack=window.CLIENTCONFIG.ISBIGWIN?new g.default:null,this.sipLoginOnlyCtrl=$getState().login.sipLoginOnly?new C.default:null,this.confTempCtrl=isNullOrEmpty($getState().conf.confTempAcsAccount)?null:new S.default,this.platformCtrl=window.CLIENTCONFIG.ISMOBILE?new y.default:window.CLIENTCONFIG.ISMAC?new E.default:new b.default,this.filename=window.CLIENTCONFIG.ISMOBILE?"":"tempFile.txt",this.isVideo=t}return(0,l.default)(e,[{key:"changeIsSvcConf",value:function(){L.info("changeIsSvcConf"),this.platformCtrl.changeIsSvcConf()}},{key:"confIncoming",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("confIncoming"),this.myStatusCtrl&&this.myStatusCtrl.changeInConf(),$dispatch(coreUi.clearCallInfo()),$dispatch(coreUi.changeCallStatus("CALL_INCOMING")),n={isShow:!0,isUpdateToVideo:!1,callerName:t.confSubject,callerDepartment:"",callerNumber:t.compereNumber,callId:t.confHandle,confId:t.confHandle,callAccount:"",isVideo:t.isVideo?1:0,mediaType:t.mediaType,callType:t.isVideo?1:0},""===n.callerName&&(n.callerName=n.callerNumber),this.platformCtrl.confIncoming(t.isVideo),coreUi.showCallNotify(n),coreUi.incommingRing("In",!0),e.next=11,coreCall.callPermissionCheck(1===n.callType,!1);case 11:window.requestPermissionPromise&&(window.requestPermissionPromise=null);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"showLoadingPage",value:function(){L.info("showLoadingPage"),this.setIsInConf(!0),$dispatch(coreUi.changeEnterConfState(!0))}},{key:"closeLoadingPage",value:function(){L.info("closeLoadingPage"),this.setIsInConf(!1),$dispatch(coreUi.changeEnterConfState(!1))}},{key:"showConfOutPage",value:function(e,t,n,r){L.info("showConfOutPage, isVideo = "+e+",isCreateConf = "+t+",confSubject isNullOrEmpty = "+isNullOrEmpty(n)+",confAcs isNullOrEmpty = "+isNullOrEmpty(r)),this.setIsInConf(!0),$dispatch(coreUi.changeEnterConfState(!0)),isNullOrEmpty(n)?($dispatch(coreUi.changeUserInfo({number:r})),$dispatch(coreUi.changeCallNum(r))):$dispatch(coreUi.changeConfSubject(n)),this.userTrack&&this.userTrack.init(),this.myStatusCtrl&&this.myStatusCtrl.changeInConf(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.goMainPage(),e?this.showVideoOutPage():this.showCallOutPage(),this.showConfOutTip(e,t)}},{key:"callToConfStart",value:function(e){L.info("callToConfStart, isVideoConf = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConf(),coreCall.changeScreenState("middle"),$dispatch(coreUi.changeMeetingType(!1)),e?$dispatch(coreUi.changeCallStatus("VIDEO_TRANSTO_CONF")):$dispatch(coreUi.changeCallStatus("CALL_TRANSTO_CONF"))}},{key:"p2pToJoinConf",value:function(){var e=coreConf.getIsVideoConf();L.info("p2pToJoinConf, isVideoConf = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConf(),coreCall.setTransferFlagHandle(!1,"confTransferToConf"),this.hideDataShareButton(),e?this.showVideoConnectedPage():this.showCallConnectedPage(),this.dealSvcMemberList()}},{key:"callToConfFail",value:function(e){L.info("callToConfFail, errorCode = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConfFail();var t=$getState().call.callStatus,n="CALL_CONNECTED";"VIDEO_TRANSTO_CONF"===t&&(L.info("conf create result: transto video conf"),n="VIDEO_CONNECTED"),L.info("changeCallStatus",n),$dispatch(coreUi.changeCallStatus(n)),this.platformCtrl.callToConfFail(e,n),$dispatch(coreUi.clearConfInfo()),coreCall.resumeScreenStateWhenCallOrConfEnd()}},{key:"acceptConfStart",value:function(e){L.info("acceptConfStart"),coreUi.stopRing(),coreCall.changeScreenState("middle"),this.platformCtrl.acceptConfStart(),$getState().common.isShowModal?coreUi.hideModal():$getState().common.isShowPop?window.hideAlert&&window.hideAlert():$getState().common.isShowNotifyModal&&$dispatch(coreUi.hideNotifyModal());var t=$getState().notify.callNotify;t.isShow=!1,t.isUpdateToVideo=!1,coreUi.showCallNotify(t),this.platformCtrl.acceptConfStart(e)}},{key:"accpetConfSuc",value:function(){L.info("accpetConfSuc"),this.setIsInConf(!0)}},{key:"rejectConf",value:function(e){if(L.info("rejectConf,confhandle = "+e),coreUi.closeCallNotify(e),coreUi.stopRing(),coreCall.getCallCount()<=0&&$dispatch(coreUi.changeCallStatus("")),this.myStatusCtrl&&this.myStatusCtrl.revert(),coreCall.getCallCount()>0)return void L.info("dealAfterReject has been calling");this.platformCtrl.rejectConf(),$dispatch(coreUi.clearConfInfo())}},{key:"confInfoNotify",value:function(){var e=coreConf.getIsVideoConf();L.info("confInfoNotify, isVideoConf = "+e),this.saveConfInfo(),this.platformCtrl.confInfoNotify()}},{key:"svcSeessionModify",value:function(){L.info("svcSeessionModify"),this.platformCtrl.svcSeessionModify()}},{key:"handleJoinConf",value:function(){var e=$getState().call.callStatus,t=coreConf.getIsVideoConf();L.info("handleJoinConf,isVideoConf = "+t+",callStatus  = "+e),coreCall.setTransferFlagHandle(!1,"confTransferToConf"),coreConf.getIsRecall()||this.startTime(),this.hideDataShareButton(),t?(this.showVideoConnectedPage(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.joinVideoConf()):(this.showCallConnectedPage(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.joinAudioConf()),this.stopRing(),this.closeConfNotify(),this.dealSvcMemberList()}},{key:"closeConfPage",value:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];L.info("closeConfPage, isUserActive = "+e+",isEndConf = "+t+",reasonCode = "+n+",exitTip = "+r),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.dragSetDisable(),coreAccount.getLoginModel().then(function(e){e.sipLoginOnly=!1}),this.myStatusCtrl&&this.myStatusCtrl.revert(),this.sipLoginOnlyCtrl?this.platformCtrl.closeConfPage(e,t,""):this.platformCtrl.closeConfPage(e,t,"main/conference"),this.clearConfOutTip(),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("")),$dispatch(coreUi.changeEnterConfState(!1));var o=this;setTimeout(function(){a&&o.platformCtrl.showExitConfTip(n,r)},500),"extra"===$getState().call.screenState&&(delegate.resumeShow(!1),delegate.winMinimize()),coreCall.resumeScreenStateWhenCallOrConfEnd();var i=$getState().conf.confHandle;coreUi.closeCallNotify(i),coreUi.stopRing()}},{key:"clearAfterConfEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];L.info("clearAfterConfEnd isUserActive = "+e+",isEndConf = "+t+",reason = "+n+",isCallEnded = "+r),this.userTrack&&this.userTrack.confEnd(e,n,r),this.sipLoginOnlyCtrl&&(this.confTempCtrl?this.confTempCtrl.confEndLogout(e,t):this.sipLoginOnlyCtrl.confEndLogout()),this.platformCtrl.notifyPluginLogout(),e&&t&&this.recordConfErrorTip(),this.clearData(e),!this.sipLoginOnlyCtrl&&e&&t&&setTimeout(function(){coreConf.getConfList()},2e3),this.upgradeCtrl.checkAndStart()}},{key:"changeMediaType",value:function(e){L.info("changeMediaType ,old isVideo = "+this.isVideo+",new isVideo = "+e),$dispatch(coreUi.changeMeetingType(e)),this.isVideo&&!e&&(this.isVideo=!1,this.platformCtrl.changeVideoToAudio()),!this.isVideo&&e&&(this.isVideo=!0,this.platformCtrl.changeAudioToVideo())}},{key:"showCallOutPage",value:function(){L.info("showCallOutPage"),$dispatch(coreUi.changeCallToolBarShowStatus(!0)),$dispatch(coreUi.changeCallStatus("CALL_OUT")),this.changeMediaType(!1),this.platformCtrl.showCallOutPage()}},{key:"showVideoOutPage",value:function(){L.info("showVideoOutPage"),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_OUT")),this.changeMediaType(!0),this.platformCtrl.showVideoOutPage()}},{key:"showCallConnectedPage",value:function(){L.info("showCallConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!0)),$dispatch(coreUi.changeCallStatus("CALL_CONNECTED")),this.changeMediaType(!1),this.platformCtrl.showCallConnectedPage(),this.clearConfOutTip()}},{key:"showVideoConnectedPage",value:function(){L.info("showVideoConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),this.changeMediaType(!0),this.platformCtrl.showVideoConnectedPage(),this.clearConfOutTip()}},{key:"clearConfOutTip",value:function(){L.info("clearConfOutTip"),$dispatch(coreUi.createConfTipMsg([]))}},{key:"hideDataShareButton",value:function(){L.info("hideDataShareButton isInDataConf = "+coreConf.getIsDataConf()+",deploymode = "+$getState().login.deployMode),coreConf.getIsDataConf()&&$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING&&(L.info("is dataconf hideDataShareButton true"),$dispatch(coreUi.hideDataShareButton(!0)))}},{key:"stopRing",value:function(){L.info("stopRing"),coreUi.stopRing()}},{key:"closeConfNotify",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_HANDLE);L.info("closeConfNotify hanlde = "+e),coreUi.closeCallNotify(e)}},{key:"dealSvcMemberList",value:function(){L.info("dealSvcMemberList"),this.platformCtrl.dealMemberList()}},{key:"showConfOutTip",value:function(e,t){L.info("showConfOutTip, isVideo = "+e+",isCreateConf = "+t);var n="";n=t?e?language.CREATE_CONFERENCE:language.CREATE_VIOCE_CONFERENCE:language.METTING,$dispatch(coreUi.createConfTipMsg([n]))}},{key:"clearData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];L.info("clearData, isUserActive = "+e),e&&(window.isUserActiveClose=!0),this.setIsInConf(!1),this.cancleConfMemberlistMessage(),O.ToolbarManager.clearParam(),this.clearRecordInfoHandle(),this.changeStatusOfConference(!0),this.recoredOldPwd(""),$dispatch(coreUi.changCurrentPageInfo({currentPage:0,totalPage:1})),$dispatch(coreUi.setDataSharingFlag(!1)),$dispatch(coreUi.clearPhoneAddrInfo()),$dispatch(coreUi.clearEnterConfInfo()),$dispatch(coreUi.clearBuriedData()),$dispatch(coreUi.clearCallInfo()),coreCall.resetCallInfo(),$dispatch(coreUi.clearConfInfo()),L.info("clearData, clearConfInfo"),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN),L.info("clearData, changeConfAcsState"),isNullOrEmpty(this.filename)||(L.info("clearData, this.filename not nullOrEmpty"),appService.deleteFile(window.LOG_PATH,this.filename)),this.clearTaskQueue()}},{key:"recordConfErrorTip",value:function(){var e=$getState().conf,t=e.isShowRecordType,n=e.scheduserName,r=e.haveRecorded;L.info("recordConfErrorTip,isShowRecordType:",t);var a=$getState().myInfo.name,o=null;""!==n&&1===t&&1===r?(a===n?o="VIEW_MEETING_RECORDINGS":a!==n&&(o="VIEW_THE_CONFERENCE_RECORDING_FILE"),this.showErrorMsgBox(o)):""===n&&1===t&&1===r&&(o="VIEW_MEETING_RECORDING_FILE_ADMIN",this.showErrorMsgBox(o))}},{key:"showErrorMsgBox",value:function(e){L.info("showErrorMsgBox,errorTitle:",e),this.platformCtrl.showErrorMsgBox(e)}},{key:"clearTaskQueue",value:function(){L.info("clearTaskQueue MODULE_CONFERENCE"),coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE").clear()}},{key:"setIsInConf",value:function(e){e?L.info("setIsInConf isInconf true, need grayed join or createconf button"):L.info("setIsInConf isInConf false, need active join or createconf button"),$dispatch(coreUi.changeIsShowJoinButton(!e))}},{key:"startTime",value:function(){var e=(new Date).getTime();return e=parseInt(e/1e3),L.info("call start time =",e),$dispatch(coreUi.changetime(e)),e}},{key:"saveConfInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.info("saveConfInfo"),t=$getState().conf.confSubject,n=$getState().conf.confIdInput,!t||!n){e.next=6;break}return e.next=6,(0,x.saveConfInfoToDb)(n,t);case 6:$dispatch(coreUi.changeConfIdInput(""));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearRecordInfoHandle",value:function(){L.info("clearRecordInfoHandle"),(0,A.clearRecordInfoLogic)()}},{key:"changeStatusOfConference",value:function(e){L.info("changeStatusOfConference, IsleaveConf = "+e),$dispatch(coreUi.changeStatusOfConf(e))}},{key:"recoredOldPwd",value:function(e){L.info("recoredOldPwd"),$dispatch(coreUi.recoredOldPassword(e))}},{key:"cancleConfMemberlistMessage",value:function(){L.info("cancleConfMemberlistMessage"),$getState().conf.showqusetchairman&&$dispatch(coreUi.showqusetchairman());var e=$getState().conf.showRepChairmanError;e&&(L.info("showRepChairmanErrorbool",e),$dispatch(coreUi.showRepChairmanError()))}}]),e}();t.default=k},712:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("myStatusCtrl"),u=function(){function e(){(0,o.default)(this,e),this.isChangedInConf=!1,this.isReverted=!1,this.oldStatus=constant.ONLINE_STATUS.ONLINE,this.oldStatusDesc=""}return(0,s.default)(e,[{key:"changeInConf",value:function(){if(window.isOffline)return void c.info("changeInConf is offline, so return");if(this.isChangedInConf)return void c.info("already changedInConf,so return");this.isChangedInConf=!0;var e=$getState(),t=e.contactGroups.contact_status_map,n=e.myInfo,r=n.account,a=n.statusDesc;this.oldStatus=t[r]&&t[r].status,this.oldStatusDesc=a,c.info("enter conf saveOldStatus = "+this.oldStatus+",desc = "+this.oldStatusDesc+",changeInConf busy status = "+constant.ONLINE_STATUS.BUSY+",desc:","In meeting"),this.changeStatus(constant.ONLINE_STATUS.BUSY,"In meeting")}},{key:"callToConf",value:function(){return window.isOffline?void c.info("callToConf is offline, so return"):this.isChangedInConf?void c.info("already callToConf,so return"):(this.isChangedInConf=!0,this.oldStatus=$getState().call.oldStatus,this.oldStatusDesc=$getState().call.oldStatusDesc,c.info("callToConf saveOldStatus = "+this.oldStatus+",desc = "+this.oldStatusDesc+",callToConf busy status = "+constant.ONLINE_STATUS.BUSY+",desc:","In meeting"),void this.changeStatus(constant.ONLINE_STATUS.BUSY,"In meeting"))}},{key:"callToConfFail",value:function(){this.changeStatus(constant.ONLINE_STATUS.BUSY,"Calling")}},{key:"revert",value:function(){return window.isOffline?void c.info("revert is offline, so return"):this.isReverted?void c.info("already reverted, so return"):this.isChangedInConf?(this.isReverted=!0,c.info("leave conf restorestatus,status = "+this.oldStatus+",desc = "+this.oldStatusDesc),void(this.oldStatus!==constant.ONLINE_STATUS.OFFLINE&&this.changeStatus(this.oldStatus,this.oldStatusDesc))):void c.info("is not save status,no need to revert, so return")}},{key:"changeStatus",value:function(e,t){window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.webView&&(e===constant.ONLINE_STATUS.BUSY?window.webView.setTalkingState():window.webView.cancelTalkingState()),coreAccount.publishStatus({status:e,desc:t})}}]),e}();t.default=u},713:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(287),u=coreLogger.getLogger("UIConf")("UserTrack"),f=function(){function e(){(0,o.default)(this,e),this.inited=!1}return(0,s.default)(e,[{key:"init",value:function(){if(this.inited)return void u.warn("already inited,so return");coreConf.setServerIp(""),coreUi.showSearchPanel(!1),$dispatch(coreUi.changeHasSentState(!1)),this.inited=!0}},{key:"confEnd",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.CLIENTCONFIG.ENABLE_IT_MEETING&&(0,c.meetingHWLeaveConf)();var r=$getState().call.timer;if(window.CLIENTCONFIG.ISBIGWIN)if(n)coreConf.NotifyJoinConfFailedEx(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0)));else if(e){coreConf.buriedNormalEnd(0,!0,r)}else if(0===t){coreConf.buriedNormalEnd(1,!1,r)}else coreConf.buriedUnormalEnd(t,r)}}]),e}();t.default=f},714:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("UIConf")("UpgradeCtrl"),p=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,[{key:"checkAndStart",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("checkAndStart"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,t.isPortalUpgrade?coreAccount.reStartUpgrade():(coreCwmp.checkUpdateConfig(),coreCwmp.restartUpgrade());case 5:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=p},715:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("UIConf")("sipLoginOnlyCtrl"),p=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,[{key:"goMainPage",value:function(){d.info("goMainPage"),window.CLIENTCONFIG.ISMOBILE||window.goRoute("main")}},{key:"joinVideoConf",value:function(){d.info("sip only joinVideoConf"),window.CLIENTCONFIG.ISWIN&&(delegate.winHide(),appService.hideTrayClickShowMain())}},{key:"joinAudioConf",value:function(){d.info("joinAudioConf"),window.CLIENTCONFIG.ISWIN?(delegate.winHide(),appService.hideTrayClickShowMain()):appService.showMainWindow(!0)}},{key:"dragSetDisable",value:function(){d.info("confEnded siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable())}},{key:"dragSetEnable",value:function(){d.info("confEnded siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable())}},{key:"confEndLogout",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("confEndLogout"),e.next=3,coreAccount.clearResumeService();case 3:return e.next=5,coreAccount.stopResume("confEndLogout");case 5:return e.next=7,coreAccount.sipserverDeregister();case 7:return e.next=9,coreAccount.clearnsipinfo();case 9:if(!window.CLIENTCONFIG.ISMOBILE){e.next=13;break}setTimeout(function(){window.goRoute("loginCtn")},500),e.next=17;break;case 13:return e.next=15,coreAccount.deRegisterService();case 15:t=this,setTimeout(function(){window.goRoute("login"),t.dragSetEnable()},500);case 17:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=p},716:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("confTempCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"confEndLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.info("confEndLogout,isUserActive = "+e+",isEndConf = "+t),e&&t?setTimeout(function(){delegate.logout(!0,!0)},3e3):delegate.logout(!0,!0)}}]),e}();t.default=u},717:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(123),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(119),p=r(d),h=n(4),g=r(h),v=n(5),m=r(v),_=n(120),C=r(_),w=n(121),S=r(w),I=n(331),E=r(I),N=n(248),b=coreLogger.getLogger("UIConf")("macCtrl"),T=function(e){function t(){(0,g.default)(this,t);var e=(0,C.default)(this,(t.__proto__||(0,p.default)(t)).call(this));return e.isVideoOutPageExisted=!1,e}return(0,S.default)(t,e),(0,m.default)(t,[{key:"showVideoOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("showVideoOutPage"),this.isVideoOutPageExisted=!0,t=coreCall.getBigContainerSize(),t=coreCall.calcRealVideoSize({width:16,height:9},t),$dispatch(coreUi.changeBigWinStyle(t)),e.next=7,coreCall.setLocalVideoRender(t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeConfPage",value:function(){b.info("closeConfPage"),$dispatch(coreUi.changeShowPcConfInfoFlag(!1))}},{key:"showUnDecodeMask",value:function(){b.info("showUnDecodeMask");var e=this;this.timerNoDecodeSuc=setTimeout(function(){$dispatch(coreUi.setIsDecodeSuc()),clearTimeout(e.timerNoDecodeSuc)},3e3)}},{key:"showVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSvc=coreConf.getIsSvcConf(),b.info("showVideoConnectedPage isSvcConf = "+this.isSvc),!this.isSvc){e.next=7;break}return e.next=5,this.showSvcConfPage();case 5:e.next=9;break;case 7:return e.next=9,this.showAvcConfPage();case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"showAvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("showAvcConfPage in"),this.showUnDecodeMask(),!this.isVideoOutPageExisted){e.next=14;break}return t=coreCall.getBigContainerSize(),t=coreCall.calcRealVideoSize({width:16,height:9},t),$dispatch(coreUi.changeBigWinStyle(t)),e.next=8,coreCall.setRemoteVideoRender(t);case 8:return n={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(n)),e.next=12,coreCall.setVideoWH(!1,n);case 12:e.next=23;break;case 14:return r=coreCall.getBigContainerSize(),r=coreCall.calcRealVideoSize({width:16,height:9},r),$dispatch(coreUi.changeBigWinStyle(r)),e.next=19,coreCall.setRemoteVideoRender(r);case 19:return a={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(a)),e.next=23,coreCall.setLocalVideoRender(a);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"callToConfFail",value:function(e){b.info("callToConfFail errorTitle = "+e),coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e])}},{key:"changeIsSvcConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSvc){e.next=3;break}return b.info("changeIsSvcConf is already svc, so return"),e.abrupt("return");case 3:return b.info("changeIsSvcConf to svc"),this.isSvc=!0,e.next=7,this.showSvcConfPage();case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"showSvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("showSvcConfPage"),e.next=3,coreCall.closeAllSvcRemoteSocket();case 3:return e.next=5,coreCall.closeSvcDataSocket();case 5:$dispatch(coreUi.changeSvcOnLineAttendances([])),$dispatch(coreUi.changeSvcShowAttendances([])),$getState().conf.svcRecallorNot||N.SvcAttendanceManager.setSvcLocalRender();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r,a,i,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("svcSeessionModify"),t=coreConf.getSsrcRange(),e.next=4,coreCall.closeAllSvcRemoteSocket();case 4:n=(0,s.default)([],$getState().conf.svcShowAttendances),r=new Array,a=0;case 7:if(!(a<n.length)){e.next=17;break}if(1!==n[a].is_self){e.next=10;break}return e.abrupt("continue",14);case 10:for(i=t.max;r.indexOf(i)>=0;)i--;n[a].ssrc=i,r.push(i);case 14:a++,e.next=7;break;case 17:if(c=$getState().conf.svcBigPicInfo,c.hasOwnProperty("ssrc")&&(f=(0,s.default)([],c),f.ssrc=t.min,$dispatch(coreUi.changeSvcBigPicInfo(f))),b.info("handleSvcSeessionModify,newSsrcList is "+(0,o.default)(r)),$dispatch(coreUi.changeUsedSvcSSRCList(r)),$dispatch(coreUi.changeSvcShowAttendances(n)),!($getState().conf.svcOnLineAttendances.length>1)){e.next=25;break}return e.next=25,coreConf.getSvcAttendanceManager().sendWatchSvcRequest(n);case 25:return e.next=27,coreConf.getSvcAttendanceManager().setSvcVideoRender(n);case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"showErrorMsgBox",value:function(e){b.info("showErrorMsgBox, errorTitle = "+e),alert(language[e])}},{key:"showExitConfTip",value:function(e,t){if(b.info("showExitConfTip reasonCode = "+e+",errorTitle = "+t),0!==e){if(7===e)return;coreCommon.isNeedQuickFeedback(t)?window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):alert(t)}}}]),t}(E.default);t.default=T},718:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(123),u=r(c),f=n(2),l=r(f),d=n(119),p=r(d),h=n(4),g=r(h),v=n(5),m=r(v),_=n(120),C=r(_),w=n(121),S=r(w),I=n(208),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(I),N=n(194),b=n(166),T=n(719),y=r(T),O=n(720),x=r(O),A=n(331),L=r(A),k=n(226),R=coreLogger.getLogger("UIConf")("winCtrl"),M=function(e){function t(){(0,g.default)(this,t);var e=(0,C.default)(this,(t.__proto__||(0,p.default)(t)).call(this));return e.showVideoPreview=function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);R.info("showVideoPreview, call_id = "+handlePhoneNumber(e)),E.updateLocalwindowCallId(callId)},e.bigWinCtrl=window.CLIENTCONFIG.ISBIGWIN?new y.default:null,e.maxHubCtrl=window.isHubEnv?new x.default:null,e}return(0,S.default)(t,e),(0,m.default)(t,[{key:"registerNotify",value:function(){this.notifyIndex=coreCommon.Observer.subscribe("showVideoPreview",this.showVideoPreview)}},{key:"unRegisterNotify",value:function(){coreCommon.Observer.unsubscribeToken(this.notifyIndex)?R.info("unRegisterNotify success index = "+this.notifyIndex):R.error("unRegisterNotify fail index = "+this.notifyIndex)}},{key:"showVideoOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.bigWinCtrl){e.next=4;break}R.warn("showVideoOutPage no need for bigwin"),e.next=12;break;case 4:return R.info("showVideoOutPage"),t={set_window_title:{title:$getState().call.userInfo.name}},n=(0,u.default)({},t),n.set_window_title.title=handlePhoneNumber(n.set_window_title.title),r=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),R.info("showVideoOutPage init avc initCallInterface, call_id = "+r+"set_window_title = "+(0,s.default)(n)),e.next=12,E.initCallInterface(r,1,1);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"showCallOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.changeCallToolBarShowStatus(!1)),!this.bigWinCtrl){e.next=5;break}R.warn("showCallOutPage no need for bigwin"),e.next=13;break;case 5:return R.info("showCallOutPage"),t={set_window_title:{title:$getState().call.userInfo.name}},n=(0,u.default)({},t),n.set_window_title.title=handlePhoneNumber(n.set_window_title.title),R.info("showCallOutPage init avc initCallInterface, set_window_title = ",n),r=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),e.next=13,E.initCallInterface(r,0,1);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"showVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSvc=coreConf.getIsSvcConf(),R.info("showVideoConnectedPage isSvcConf = "+this.isSvc),!this.isSvc){e.next=6;break}this.showSvcConfPage(),e.next=8;break;case 6:return e.next=8,this.showAvcConfPage();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"showCallConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.changeCallToolBarShowStatus(!1)),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),R.info("showCallConnectedPage audio callId  = "+handlePhoneNumber(t)),!E.isAvcNativeExsit()){e.next=7;break}E.updateLocalwindowCallId(t),e.next=11;break;case 7:return window.isCreatingAVCFrame=!0,e.next=10,E.initCallInterface(t,constant.AVC_VIEW_MODE.AUDIO_MODE,constant.SVC_VERSION_FLAG.BASE);case 10:window.isCreatingAVCFrame=!1;case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"showAvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),R.info("showAvcConfPage avc callId  = "+handlePhoneNumber(t)),n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_SUBJECT),!E.isAvcNativeExsit()){e.next=10;break}E.updateLocalwindowCallId(t),E.setViewMode(constant.AVC_VIEW_MODE.VIDEO_MODE),E.setSubject(n),E.initRemotWindow(t),e.next=16;break;case 10:return window.isCreatingAVCFrame=!0,e.next=13,E.initCallInterface(t,constant.AVC_VIEW_MODE.VIDEO_MODE,constant.SVC_VERSION_FLAG.BASE);case 13:return e.next=15,coreConf.initRemotWindow(t);case 15:window.isCreatingAVCFrame=!1;case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"callToConfFail",value:function(e,t){N.ToolbarManager.setConfHandle(""),b.SvcAtdManager.isNativeUIExsit()?(R.info("callToConfFail handlePlatformMessageBox1 isVideo"),coreCommon.isNeedQuickFeedback(e)?b.SvcAtdManager.alertBox(e+language.FEEDBACK_MESSAGE_TIPS,2,0,"feedback",language.FEEDBACK):b.SvcAtdManager.alertBox(e,2)):(R.info("callToConfFail handlePlatformMessageBox2 "),coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e]))}},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreConf.getSsrcRange(),R.info("svcSeessionModify,ssrcRange min is "+t.min+",max is "+t.max),coreConf.getSvcAtdManager().handleSvcSsrcModify(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"showSvcConfPage",value:function(){this.confConnectedSvc();var e=this.getSvcViewMode(),t=this.getSvcVersionFlag(),n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);if(R.info("showSvcConfPage svcViewMode = "+e+",svcVersionFlag = "+t+"callId = "+handlePhoneNumber(n)),window.isCreatingAVCFrame)var r=0,a=setInterval(function(){window.isCreatingAVCFrame?++r>50&&(clearInterval(a),R.info("showSvcConfPage initVideoFrame in creatting AVCFrame time = "+100*r+",please check!!!"),b.SvcAtdManager.initVideoFrame(n,e,t)):(clearInterval(a),R.info("showSvcConfPage initVideoFrame after create AVCFrame time = "+100*r),b.SvcAtdManager.initVideoFrame(n,e,t))},100);else R.info("showSvcConfPage window.isCreatingAVCFrame = "+window.isCreatingAVCFrame),b.SvcAtdManager.initVideoFrame(n,e,t)}},{key:"changeIsSvcConf",value:function(){if(this.isSvc)return void R.info("changeIsSvcConf is already svc, so return");R.info("changeIsSvcConf to svc"),this.isSvc=!0,this.showSvcConfPage()}},{key:"changeVideoToAudio",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("changeVideoToAudio"),t=$getState().conf.isShowMemberListNew,t&&$dispatch(coreUi.changeIsShowMemberListNew()),b.SvcAtdManager.closeVideoFrame(),b.SvcAtdManager.closeBfcpFrame(),E.closeBfcpFrame(),e.next=8,E.setViewMode(constant.AVC_VIEW_MODE.AUDIO_MODE);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"confConnectedSvc",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.info("confConnectedSvc"),t=coreConf.getSsrcRange(),n={ssrc:t.min},$dispatch(coreUi.changeSvcBigPicInfo(n)),coreConf.getIsRecall()&&b.SvcAtdManager.handleSvcSsrcModify(t);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeConfPage",value:function(e,t){R.info("closeConfPage"),e||(0,k.notifyNativeLeaveConf)(),E.closeCallInterface(),b.SvcAtdManager.closeVideoFrame(),b.SvcAtdManager.closeBfcpFrame(),b.SvcAtdManager.clear(),this.bigWinCtrl&&this.bigWinCtrl.NotifyMyLeaveConf(0),this.maxHubCtrl&&this.maxHubCtrl.NotifyMyLeaveConf(0),$dispatch(coreUi.changeShowPcConfInfoFlag(!1))}},{key:"showExitConfTip",value:function(e,t){if(R.info("showExitConfTip reasonCode = "+e+",exitTip = "+t),0!==e){if(7===e)return;coreCommon.isNeedQuickFeedback(t)?window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):alert(t,2)}}},{key:"notifyPluginLogout",value:function(){R.info("notifyPluginLogout"),this.bigWinCtrl&&this.bigWinCtrl.commonLogOut()}},{key:"showErrorMsgBox",value:function(e){b.SvcAtdManager.isNativeUIExsit()?(R.info("showErrorMsgBox isNative"),b.SvcAtdManager.alertBox(e,2)):(R.info("showErrorMsgBox isJS"),alert(language[e]))}},{key:"dealMemberList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R.info("dealMemberList"),this.bigWinCtrl){e.next=8;break}if(!((t=$getState().conf.memberListInfo)&&t.length>0)||coreConf.isMemberListNull()){e.next=8;break}return R.info("handleSvcAtdList in confConnected, memberNum = "+t.length),n=this.sortByTime(t),e.next=8,b.SvcAtdManager.handleSvcAtdList(n);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSvcViewMode",value:function(){return R.info("getSvcViewMode"),this.bigWinCtrl?constant.SVC_VIEW_MODE.DIVIDE_MODE:this.maxHubCtrl?constant.SVC_VIEW_MODE.DIVIDE_MODE:constant.SVC_VIEW_MODE.BIG_SMALL_MODE}},{key:"getSvcVersionFlag",value:function(){return R.info("getSvcVersionFlag"),this.bigWinCtrl?constant.SVC_VERSION_FLAG.BIG:(this.maxHubCtrl,constant.SVC_VERSION_FLAG.BASE)}},{key:"sortByTime",value:function(e){R.info("sortByTime");var t=$getState().conf.svcOnLineAttendances;if(0===t.length)return e;for(var n=new Array,r=new Array,a=0;a<t.length;a++){for(var o=t[a],i=0;i<e.length;i++){var s=e[i];s.number!==o.number||5!==s.state||this.isInArray3(n,o.number)||r.push(s)}n.push(o.number)}for(var c=0;c<e.length;c++){var u=e[c];5===u.state&&n.indexOf(u.number)<0&&(r.push(u),n.push(u.number))}for(var f=0;f<e.length;f++){var l=e[f];n.indexOf(l.number)<0&&(r.push(l),n.push(l.number))}return r}},{key:"isInArray3",value:function(e,t){if(R.info("isInArray3"),e.indexOf&&"function"==typeof e.indexOf){if(e.indexOf(t)>=0)return!0}return!1}}]),t}(L.default);t.default=M},719:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(250),u=(coreLogger.getLogger("UIConf")("BigWinCtrl"),function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"NotifyMyLeaveConf",value:function(e){(0,c.NotifyMyLeaveConf)(e)}},{key:"commonLogOut",value:function(){window.bigWinCommonLogOut()}}]),e}());t.default=u},720:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(250),u=coreLogger.getLogger("UIConf")("MaxHubCtrl"),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"NotifyMyLeaveConf",value:function(e){u.info("NotifyMyLeaveConf rst = "+e),(0,c.NotifyMyLeaveConf)(e)}}]),e}();t.default=f},721:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(120),g=r(h),v=n(121),m=r(v),_=n(722),C=r(_),w=n(331),S=r(w),I=coreLogger.getLogger("UIConf")("mobileCtrl"),E=function(e){function t(){(0,l.default)(this,t);var e=(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.showVideoPreview=function(){var t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),n=coreConf.getIsSvcConf();I.info("showVideoPreview, call_id = "+handlePhoneNumber(t)+",isSvcConf = "+n),window.callStatusChangeNotify(t,"VIDEO_OUT",!1,!0,n,e.isPairConf)},e.iTMeetingCtrl=window.CLIENTCONFIG.ENABLE_IT_MEETING?new C.default:null,e.isPairConf=$getState().synergismInfo.inPairConf?1:0,e.isSvc=!1,e.notifyIndex="",e.registerNotify(),e}return(0,m.default)(t,e),(0,p.default)(t,[{key:"registerNotify",value:function(){this.notifyIndex=coreCommon.Observer.subscribe("showVideoPreview",this.showVideoPreview)}},{key:"unRegisterNotify",value:function(){coreCommon.Observer.unsubscribeToken(this.notifyIndex)?I.info("unRegisterNotify success index = "+this.notifyIndex):I.error("unRegisterNotify fail index = "+this.notifyIndex)}},{key:"showVideoOutPage",value:function(){I.info("showVideoOutPage"),this.goCallMainRoute()}},{key:"showCallOutPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),t=coreConf.getIsSvcConf();I.info("showCallOutPage, call_id = "+handlePhoneNumber(e)),window.callStatusChangeNotify(e,"CALL_OUT",!1,!0,t,this.isPairConf),this.goCallMainRoute()}},{key:"goCallMainRoute",value:function(){var e=window.getRoute();I.info("goCallMainRoute currentPage = "+e),"callMain"!==e&&"mConfMemberPage"!==e&&window.goRoute("callMain")}},{key:"callToConfFail",value:function(e,t){var n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);n||(n=$getState().call.callId);var r=coreConf.getIsSvcConf();I.info("callToConfFail errorTitle = "+e+",newCallStatus = "+t+",call_id = "+handlePhoneNumber(n)+",isSvcConf = "+r),this.iTMeetingCtrl&&(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?coreCall.endCallService(n):window.callOrConfEnded()),window.callStatusChangeNotify(n,t,!0,!0,r,this.isPairConf);var a=window.getRoute();"callMain"!==a&&"mConfMemberPage"!==a||(I.info("callToConfFail produceCallMemberList"),coreCall.produceCallMemberList()),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.ToastNew(language.CONFERENCE_CREATE_FAILED,2):coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e])}},{key:"confIncoming",value:function(e){var t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),n=coreConf.getIsSvcConf();I.info("confIncoming isVideo = "+e+",call_id = "+handlePhoneNumber(t)+",isSvcConf = "+n),this.iTMeetingCtrl&&window.switchToFront(),window.webView&&(e&&window.webView.initCallVideo(),window.webView.setFrontToLock()),this.goCallMainRoute(),window.callStatusChangeNotify(t,"CALL_INCOMING",!0,!0,n,this.isPairConf)}},{key:"changeAudioToVideo",value:function(){I.info("changeAudioToVideo"),window.webView&&window.webView.initCallVideo()}},{key:"changeVideoToAudio",value:function(){I.info("changeVideoToAudio"),window.webView&&window.webView.unInitCallVideo()}},{key:"showCallConnectedPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),t=coreConf.getIsSvcConf();I.info("showCallConnectedPage call_id = "+handlePhoneNumber(e)+",isSvcConf = "+t),window.callStatusChangeNotify(e,"CALL_CONNECTED",!0,!0,t,this.isPairConf),window.isInFloatWinMode()?I.info("showCallConnectedPage in float win mode not go call main "):this.goCallMainRoute()}},{key:"showVideoConnectedPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);this.isSvc=coreConf.getIsSvcConf(),I.info("showVideoConnectedPage call_id = "+handlePhoneNumber(e)+",isSvcConf = "+this.isSvc),this.recordDeviceOrient(),window.isSvcToNative(this.isSvc,e,!1),window.callStatusChangeNotify(e,"VIDEO_CONNECTED",!1,!0,this.isSvc,this.isPairConf),window.isInFloatWinMode()?I.info("showVideoConnectedPage in float win mode not go call main "):this.goCallMainRoute()}},{key:"recordDeviceOrient",value:function(){if(coreConf.getIsSvcConf())return void I.info("recordDeviceOrient no need for svcconf, so return");coreConf.getIsRecall()||I.info("recordDeviceOrient no need for not in recall,so return"),I.info("recordDeviceOrient");var e=$getState().call.deviceOrient;$dispatch(coreUi.recordMobileOrientChange(e))}},{key:"changeIsSvcConf",value:function(){if(this.isSvc)return void I.info("changeIsSvcConf is already svc, so return");var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);I.info("changeIsSvcConf to svc, call_id = "+handlePhoneNumber(e)+",this.isSvc = "+this.isSvc),this.isSvc=!0,window.isSvcToNative(this.isSvc,e,!0)}},{key:"confInfoNotify",value:function(){I.info("confInfoNotify"),this.iTMeetingCtrl&&this.iTMeetingCtrl.confInfoNotify()}},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.svcNativeToJS,I.info("svcSeessionModify =",t),isNullOrEmpty(t)?(n=$getState().conf.svcMobileConfHandles,!isNullOrEmpty(n.remoteLargeViewIdx)&&isNullOrEmpty(t)&&(I.info("SvcNativeToJS then handlessrc -1;"),coreConf.handleSSRCURL(-1))):window.multiStreamPageInfoChangeNotify(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptConfStart",value:function(e){I.info("acceptConfStart isVideoType =",e),window.webView&&1===e&&window.webView.initCallVideo()}},{key:"rejectConf",value:function(){I.info("rejectConf"),window.webView&&window.webView.releaseFrontToLock(),window.callOrConfEnded(),"callMain"===window.getRoute()&&(I.info("mobile end conf"),history.back())}},{key:"closeConfPage",value:function(e,t,n){var r=$getState().conf.isSvcConf?1:0,a=$getState().call.callId;I.info("closeConfPage isUserActive = "+e+",isEndConf = "+t+",isSvcConf = "+r+",call_id = "+handlePhoneNumber(a)+",backPage = "+n),window.callOrConfEnded();var o=$getState().call.callStatus;if("VIDEO_OUT"!==o&&"VIDEO_CONNECTED"!==o||window.callStatusChangeNotify(a,"VIDEO_END",!1,!0,r,this.isPairConf),this.iTMeetingCtrl)this.iTMeetingCtrl.closeConfPage(e,t);else{"loginCtn"!==window.getRoute()&&(isNullOrEmpty(n)||window.goRoute(n,!0))}this.unRegisterNotify()}},{key:"showExitConfTip",value:function(e,t){if(I.info("showExitConfTip reasonCode = "+e+",exitTip = "+t),this.iTMeetingCtrl)this.iTMeetingCtrl.showExitConfTip(e,t);else{if(7===e)return;0===e?window.ToastNew(t,2):coreCommon.isNeedQuickFeedback(t)?window.CLIENTCONFIG.ENABLE_IT_MEETING||window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):alert(t)}}},{key:"notifyPluginLogout",value:function(){I.info("notifyPluginLogout"),this.iTMeetingCtrl&&this.iTMeetingCtrl.endConfLogout()}},{key:"showErrorMsgBox",value:function(e){I.info("showErrorMsgBox errorTitle = "+e),alert(language[e])}}]),t}(S.default);t.default=E},722:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(723),u=r(c),f=coreLogger.getLogger("UIConf")("ITMeetingCtrl"),l=function(){function e(){(0,o.default)(this,e),this.hWITMeeting=window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?new u.default:null,this.callOutTimer=0,this.isSwitchedToBackMode=!1}return(0,s.default)(e,[{key:"confInfoNotify",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_SERVER_ID);e&&(window.confConnectInfo?window.confConnectInfo[e]||(window.confConnectInfo[e]=1):(window.confConnectInfo={},window.confConnectInfo[e]=1)),f.info("confConnected is confid :"+e),this.hWITMeeting&&this.hWITMeeting.confInfoNotify()}},{key:"closeConfPage",value:function(e,t){if(f.info("closeConfPage isUserActive  = "+e+",isEndConf = "+t),this.hWITMeeting)window.changeScreenOrientation(constant.SCREEN_ORIENTATION.SCREEN_ORIENTATION_PORTRAIT),window.switchToBackMode(),this.isSwitchedToBackMode=!0;else{var n=!0;window.requestPermissionPromise&&(n=!1,window.requestPermissionPromise.resolve(!1)),window.goRoute("main/conference"),n&&(e&&t||!e)&&(window.switchToBackMode(),this.isSwitchedToBackMode=!0)}}},{key:"showExitConfTip",value:function(e,t){f.info("showExitConfTip reasonCode  = "+e+",exitTip = "+t),this.isSwitchedToBackMode?window.itWeLinkNotifyCallEnded(e,t):0===e?window.ToastNew(t,2):alert(t)}},{key:"endConfLogout",value:function(){f.info("endConfLogout"),this.hWITMeeting&&this.hWITMeeting.endConfLogout()}}]),e}();t.default=l},723:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("HWITMeetingCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"confInfoNotify",value:function(){c.info("confInfoNotify");$getState().call.callStatus,coreConf.getIsSvcConf()}},{key:"endConfLogout",value:function(){c.info("[IT-Meeting] leave conf, dologout"),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT)}}]),e}();t.default=u},724:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.p2pTransToConfCreateGroup=t.confTransToConfRefreshRecent=t.acceptConfRefreshRecent=t.confInComingRefreshRecent=t.createConfToRefreshRecent=void 0;var a=n(123),o=r(a),i=n(128),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=coreLogger.getLogger("conf")("iMctrl"),p=(t.createConfToRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=3,p(t.group_id,!1,!0);case 3:e.next=7;break;case 5:return e.next=7,p(t.group_id,!1,!0);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confInComingRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("confInComingRefreshRecent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),e.next=4,p(t,!1,!0);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.acceptConfRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("acceptConfRefreshRecent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=5,p(t,!0,!0);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.confTransToConfRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("be trans to conf, refresh recent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),window.CLIENTCONFIG.ISMOBILE){e.next=7;break}return e.next=5,p(t,!0,!0,!0);case 5:e.next=9;break;case 7:return e.next=9,p(t,!1,!0,!0);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.p2pTransToConfCreateGroup=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a){var o,i,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=h(t,n,r,a),i=o.groupMemList,c=o.groupNumList,f=o.totalGroupList,l="",!window.CLIENTCONFIG.USE_IM){e.next=15;break}return e.next=5,g(i,f);case 5:if(l=e.sent,c&&c>0&&(d.info("add number to group"),coreGroup.addGroupPhoneMemberService({groupId:l,phoneList:[].concat((0,s.default)(c))})),!l){e.next=15;break}if(window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return e.next=11,p(l,!0,!0,!0);case 11:e.next=15;break;case 13:return e.next=15,p(l,!1,!0,!0);case 15:return e.abrupt("return",l);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("refresh recent by groupid: "+t),window.CLIENTCONFIG.USE_IM){e.next=3;break}return e.abrupt("return");case 3:if(!t){e.next=15;break}if(!r){e.next=12;break}return e.next=7,coreIm.createGroupConversation({group_id:t},!1,!0);case 7:a=e.sent,o=a.recent,i=a.group,coreIm.refreshRecentList(o),o.unread_num>0&&$dispatch(coreUi.changeHasUnreadMsg(!0));case 12:if(!n){e.next=15;break}return e.next=15,coreIm.openGroupConversationByConf({group_id:t},!1,!s);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),h=function(e,t,n,r){for(var a=[],i=[],s=[],c=0;c<e.length;c++)e[c].number===e[c].bind_no&&e[c].account!==n.account&&e[c].account!==t.account?a.push((0,o.default)({},e[c])):i.push({phone:e[c].number}),e[c].account!==n.account&&e[c].account!==t.account&&s.push((0,o.default)({},e[c]));if(n.bind_no===r){-1===a.findIndex(function(e){return e.account===n.account})&&a.push((0,o.default)({},n))}else i.push({phone:r});return s.push((0,o.default)({},n)),{groupMemList:a,groupNumList:i,totalGroupList:s}},g=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreGroup.createDiscussionGroup({list:t});case 2:if(!(n=e.sent)||!n.group_id){e.next=8;break}return d.info("p2p trans to conf create discuss group successed: ",n.group_id),e.abrupt("return",n.group_id);case 8:return d.info("p2p trans to conf create discuss group failed"),e.abrupt("return","");case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreLogger.getLogger("conf")("errorInConf");t.getCallEndedErrorTip=function(e,t){r.info("getCallEndedErrorTitle, reasonCode = "+e+",endcall_reason = "+t);return 404===e?language.ENTER_CONF_NO_FOUND:490===e?language.CONF_TIME_CONFLICT:4041===e?language.IT_CONF_NOT_STARTED:4042===e?language.IT_CONF_ENDED:t.indexOf("ConferenceIsLock")>-1?language.LANG_NATIVE_MEETING_LOCKED:t.indexOf("ServerError_allocate seat resource")>-1?language.CONF_RESOURCE_NULL:t.indexOf("11081006")>-1?language.PASSWORD_NOT_CORRECT:t.indexOf("11071058")>-1?language.VMR_MEETING_HAS_NOT_BEEN_HOLD_YET:language.ENTER_CONF_FAIL},t.getEnterConfByIdOnlyTip=function(e){r.info("getEnterConfByIdOnlyTip errorCode = "+e);return 11017===e?language.CONF_NOT_EXIST:-2===e?language.ENTER_CONF_FAIL:isNullOrEmpty(language[constant.AS_ERRORCODE_LOG_INFO[e]])?language.CONF_GET_AUTH_INFO_FAILED:language[constant.AS_ERRORCODE_LOG_INFO[e]]},t.getCreateConfFailTitle=function(e){r.info("getCreateConfFailTitle errorCode = "+e);return 285212898===e?language.CREATE_CONF_FAILED_REASON1:285212899===e?language.CREATE_CONF_FAILED_REASON2:285212900===e?language.CREATE_CONF_FAILED_REASON3:285212901===e?language.CREATE_CONF_FAILED_REASON4:3===e?language.CONFERENCE_CREATE_FAILED_BEACASE_OF_NETWORK:11047===e||11196===e?language.RECORDING_CONFERENCE_FUNCTION_IS_NOT_ENABLED:11085===e||11136===e||11071005===e?language.CONF_TIME_CONFLICT:795===e?language.INSUFFICIENT_RECORD_RESOURCES:50331819===e?language.RECORDING_VENUE_IS_NOT_INCLUDED:isNullOrEmpty(language[constant.AS_ERRORCODE_LOG_INFO[e]])?language.CONFERENCE_CREATE_FAILED:language[constant.AS_ERRORCODE_LOG_INFO[e]]},t.CREATE_CONF_ERR={SUCCESS:{code:0,msg:"成功"},OUT_MEMBER_LIMIT:{code:4001,msg:"与会人数超过最大限制"},MEMBER_EMPTY:{code:4002,msg:"与会人数为空，不能创建会议"},MULTI_DEVICE_LOGIN:{code:4003,msg:"有其他设备登录该账户，不能创建/加入会议"},OFFLINE:{code:4004,msg:"离线状态，不能创建/加入会议"},SIP_FAIL:{code:4005,msg:"协议注册失败"},EXIST_CONF:{code:4006,msg:"已经存在一路会议，不能创建/加入"},EXIST_CALL:{code:4007,msg:"已经存在一路呼叫，不能创建/加入"},EXIST_SIM_CALL:{code:4008,msg:"正在通话中"},PERMSSION_REJECT:{code:4009,msg:"移动端没有权限不能创建会议"},NET_2G:{code:4010,msg:"2G网络下不支持视频通话"},USER_CANCEL:{code:4011,msg:"3g/4g下用户取消创建会议"}}},855:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.remoteScreenShare=t.shareScreenOper=t.joinConfSuccess=t.joinConfFailed=t.setServerIp=t.stopCalcCPUUsage=t.startCalcCPUUsage=t.sendHttpPost=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(123),u=r(c),f=n(2),l=r(f),d=n(950),p=n(1716),h=coreLogger.getLogger("bigwinBuried")("buried"),g="",v=void 0,m=t.sendHttpPost=function(){var e=(0,l.default)(o.default.mark(function e(t,n){var r,a,i,c,f,l,p,g,v,m,_,C,w,S,I,E,N,b,T,y,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return h.error("client config is not bigwin."),e.abrupt("return");case 3:if(n){e.next=5;break}return e.abrupt("return");case 5:return r=$getState(),a=r.login,i=a.account,c=a.sipImpi,f=r.bigwinBuried.buried,l="",c.indexOf("@")&&-1!==(p=c.indexOf("@"))&&(l=c.slice(0,p)),g=new Date,v=g.getMonth()+1>=10?g.getMonth()+1:"0"+(g.getMonth()+1),m=g.getDate()>=10?g.getDate():"0"+g.getDate(),_=g.getHours()>=10?g.getHours():"0"+g.getHours(),C=g.getMinutes()>=10?g.getMinutes():"0"+g.getMinutes(),w=g.getSeconds()>=10?g.getSeconds():"0"+g.getSeconds(),S=g.getFullYear()+"-"+v+"-"+m+" "+_+":"+C+":"+w,I={accessCode:f.acccode,meetingId:f.passcode,meetingName:f.meetingName,userId:i,sipNo:l,timeUTC:S,timeZone:(new Date).getTimezoneOffset()/-60},E=(0,u.default)(I,n),E=(0,s.default)(E),e.next=20,coreSecurity.encode64(E);case 20:return N=e.sent,e.next=23,coreSecurity.encode64(N);case 23:N=e.sent,b=O||window.CLIENTCONFIG.BURIED_POST_ADDR,T=(0,d.createXMLHttpRequest)(),y=b+"?idsite=ConfCloudLink&action="+t+"&actiontype=commonlog&_id="+i+"&data="+N,T.open("POST",y,!0),T.send();case 29:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=navigator.userAgent.toLowerCase(),t="";return-1!==e.indexOf("nt 10.0")&&(t="windows 10"),-1!==e.indexOf("nt 6.2")&&(t="windows 8"),-1!==e.indexOf("nt 6.1")&&(t="windows 7"),-1!==e.indexOf("nt 6.0")&&(t="windows Vista"),-1!==e.indexOf("nt 5.1")&&(t="windows XP"),-1===e.indexOf("macintosh")&&-1===e.indexOf("mac os x")||(t="Mac"),-1!==e.indexOf("adobeair")&&(t="Adobe Air"),-1!==e.indexOf("linux")&&(t="Linux"),t};t.startCalcCPUUsage=function(){if(h.info("buried startCalcCpuUsage"),!window.CLIENTCONFIG.ISBIGWIN)return void h.error("client config is not bigwin.");v=setInterval(function(){(0,p.cpuUsage)(function(e){if((e=parseInt(100*e,10))>70){m("perfAlarm",{almType:0,almVal:e+"%",parmStr:"",parmStr1:""})}})},6e4)},t.stopCalcCPUUsage=function(){if(h.info("buried stopCalcCpuUsage"),!window.CLIENTCONFIG.ISBIGWIN)return void h.error("client config is not bigwin.");clearInterval(v)},t.setServerIp=function(e){g=e},t.joinConfFailed=function(){var e=(0,l.default)(o.default.mark(function e(){var t,n,r,a,i,s=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("buried joinConfFailed"),t=$getState(),n=t.bigwinBuried.buriedJoinConfVip,r=_(),g="",a={platform:r,browserType:"",browserVer:"",joinType:s,joinNumber:"",myIP:window.localIp,myCountry:"",myCity:"",myDC:"",myVIP:n,networkType:0,networkName:"",devMode:"",isCloudPC:!1,isiAccess:!1,isSBC:!1,sbcIP:"",mcuIP:g,msIP:g,version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,errId:"",errStr:"",parmStr:"",parmStr1:"",parmStr2:""},i="joinFail",m(i,a);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.joinConfSuccess=function(){var e=(0,l.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4096,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("buried buriedJoinConfSuccess"),t=$getState(),n=t.bigwinBuried.buried,r=t.conf,a=_(),i=1,r.isVideoConf?r.isSvcConf||(i=0):i=2,s={platform:a,browserType:"",browserVer:"",joinType:f,joinNumber:"",joinRole:l,myIP:window.localIp,myCountry:"",myCity:"",myDC:"",myVIP:n.joinConfVip,networkType:0,networkName:"",devMode:"",isCloudPC:!1,isiAccess:!1,isSBC:!1,sbcIP:"",mcuIP:g,msIP:g,version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,realRole:l,callBitRate:4096,negoBitRate:u,negoAVCaps:i,parmStr:"",parmStr1:"",parmStr2:""},c="joinSuccess",m(c,s);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.shareScreenOper=function(){var e=(0,l.default)(o.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("buried buriedShareScreenOper"),n={operType:t,shareType:a,parmStr:"",parmStr1:""},r="shareOper",m(r,n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.remoteScreenShare=function(){var e=(0,l.default)(o.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("buried buriedRemoteScreenShare"),n={shareType:a,remoteUser:t,parmStr:"",parmStr1:""},r="remoteShare",m(r,n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},947:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getConfShareUrl=t.dateConvertTo=t.maxhubSkipLogin=t.registerMaxhubEvent=t.OnCleanValue=t.OnWorkplaceLogin=t.OnDecryptValue=t.OnEncryptValue=t.onStopCloudLink=t.onShowOrHideMainWnd=t.onGetMainWnd=t.onChangeLanguage=t.onLogout=t.onLeaveConference=t.onRunCloudLink=t.NotifyCameraListUpdateEx=t.onJoinConfFailed=t.changeHasSent=t.OnBigWinSetRecvShareParam=t.OnBigWinSetDevice=t.onBiggetDeviceList=t.onBiggetSpkValue=t.onBiggetMicValue=t.onBigWinSetSpkValue=t.onBigWinSetMicValue=t.onBigWinSharingUsername=t.onBigWinDataSharingHwnd=t.onBigWinVideoHwnd=t.onBigWinCtrlLocalCamera=t.resumeDeviceInfo=t.onBigWinLeaveConference=t.onBigWinJoinConference=t.onBigWinReLogin=t.onBigWinRunCloudLink=t.registerBigWinEvent=t.initWebSocketAPI=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(153),l=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(f),n(250)),d=n(358),p=r(d),h=n(207),g=n(186),v=coreLogger.getLogger("conference")("index");window.confAccesscode="",window.confPasscode="",window.confVip="",window.ConfUsername="",window.loginPass="",window.anonymousJoinConf=!1;var m=null,_=function(){var e=$getState().call;m=new Object,["micValue","voiceValue","micDevicesList","spkDevicesList","cameraDevicesList"].forEach(function(t){e.hasOwnProperty(t)&&(m[t]=e[t])})},C=(t.initWebSocketAPI=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isHubEnv){e.next=5;break}return e.next=3,(0,l.initMaxhubAPI)();case 3:e.next=6;break;case 5:(0,l.initBigWinAPI)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.registerBigWinEvent=function(){v.info("registerBigWinEvent, BigwinObserver subscribe topics"),coreCommon.BigwinObserver.subscribe("OnRunCloudLink",C),coreCommon.BigwinObserver.subscribe("OnReloginCloudLink",w),coreCommon.BigwinObserver.subscribe("OnJoinConference",E),coreCommon.BigwinObserver.subscribe("OnLeaveConference",N),coreCommon.BigwinObserver.subscribe("OnCtrlLocalCamera",T),coreCommon.BigwinObserver.subscribe("OnSetMicValue",O),coreCommon.BigwinObserver.subscribe("OnSetSpkValue",x),coreCommon.BigwinObserver.subscribe("OnSetDevice",R),coreCommon.BigwinObserver.subscribe("ongetMicValue",A),coreCommon.BigwinObserver.subscribe("ongetSpkValue",L),coreCommon.BigwinObserver.subscribe("ongetDeviceList",k),coreCommon.BigwinObserver.subscribe("OnChangeHasSent",M),coreCommon.BigwinObserver.subscribe("OnJoinConfFailed",D),coreCommon.BigwinObserver.subscribe("onBigWinVideoHwnd",y),coreCommon.BigwinObserver.subscribe("OnStopCloudLink",P)},t.onBigWinRunCloudLink=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="2052",n=0===t.param.language?"1033":"2052",setLanguage(n),!isNullOrEmpty(t.param.uPartal_acc)&&!isNullOrEmpty(t.param.uPartal_url)){e.next=10;break}return v.info("uPartal_acc or uPartal_url is null"),window.anonymousJoinConf=!0,e.next=8,(new coreCall.CallManager).setCallNotifyFunc();case 8:return coreSetting.initMediaDevice(),e.abrupt("return");case 10:return r=t.param.uPartal_acc,a=t.param.uPartal_url,o=t.param.uPartal_port,window.anonymousJoinConf=!1,window.switchAccount=!1,e.next=17,window.handleSwitchAccount({account:r,serverAddress:a,serverPort:o,noNeedLogout:!0});case 17:return e.next=19,coreSecurity.getPasswordManager();case 19:return i=e.sent,e.next=22,i.setPassword("password",t.param.uPartal_pas);case 22:coreAccount.login({});case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());window.retryUportalLoginTimes=0,window.baseTimeInterval=0,window.shouldStopRertyLogin=!0,window.bigwinReTryLogin=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("window.shouldStopRertyLogin = "+window.shouldStopRertyLogin),!0!==window.shouldStopRertyLogin){e.next=3;break}return e.abrupt("return");case 3:window.retryUportalLoginTimes++,t=5,window.switchAccount&&(t=15),window.retryUportalLoginTimes<=t?(n=0,window.switchAccount?n=2:1===window.retryUportalLoginTimes?(n=parseInt(21*Math.random()+10,10),window.baseTimeInterval=n):n=window.baseTimeInterval*Math.pow(2,window.retryUportalLoginTimes),v.info("bigwinReTryLogin, retryUportalLoginTimes = "+window.retryUportalLoginTimes+" , totalTimes = "+t+" , timeInterval = "+n),setTimeout(function(){coreAccount.login({})},1e3*n)):(window.shouldStopRertyLogin=!0,(0,l.NotifyLoginFailedEx)(1),v.info("bigwinReTryLogin, try many times. retry times = "+window.retryUportalLoginTimes));case 7:case"end":return e.stop()}},e,void 0)}));var w=t.onBigWinReLogin=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWinReLogin: description="+t.description+",call="+t.call+",cmd="+t.cmd+",opt="+t.opt+",port="+t.param.port+",url="+t.param.url+",userno="+t.param.acc),e.next=3,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT);case 3:if(!1===(n=e.sent)){e.next=16;break}return r=t.param.acc,a=t.param.url,o=t.param.port,e.next=10,window.handleSwitchAccount({account:r,serverAddress:a,serverPort:o});case 10:return e.next=12,coreSecurity.getPasswordManager();case 12:return i=e.sent,e.next=15,i.setPassword("password",t.param.pas);case 15:setTimeout(function(){window.goRoute("loginCtn"),coreAccount.login({})},500);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"9"===t.substr(0,1)||"2"===t.substr(0,1)||"3"===t.substr(0,1)?window.bigConfIsVideo=!0:window.bigConfIsVideo=!1,v.info("setBigConfCalloutType, bigConfIsVideo: "+window.bigConfIsVideo);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().login.serverAddress,v.info("onBigWinJoinConference, uportal changed, old: "+n+" new: "+t.param.url+" isRelogin: "+o),window.confAccesscode=t.param.acccode,window.confPasscode=t.param.passcode,window.confVip=t.param.vip,window.ConfUsername=t.param.username,window.loginPass=t.param.pas,window.switchAccount=!0,e.next=10,window.handleSwitchAccount({account:t.param.acc,serverAddress:t.param.url,serverPort:t.param.port});case 10:if(!o){e.next=23;break}return e.next=13,coreSecurity.getPasswordManager();case 13:return r=e.sent,e.next=16,r.setPassword("password",t.param.pas);case 16:return e.next=18,coreAccount.getLoginModel();case 18:a=e.sent,a.isSupportProxy=!1,setTimeout(function(){window.goRoute("loginCtn"),coreAccount.login({})},500),e.next=23;break;case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),E=t.onBigWinJoinConference=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWinJoinConference: ",(0,o.default)(t)),e.next=3,S(t.param.passcode);case 3:if(window.delayDispatchRecvBFCP=!1,!window.anonymousJoinConf){e.next=8;break}return v.info("anonymous join "+window.anonymousJoinConf),I(t,!0),e.abrupt("return");case 8:if("VIDEO_OUT"!==$getState().call.callStatus&&"VIDEO_CONNECTED"!==$getState().call.callStatus){e.next=13;break}return v.error("CloudLink is in call status , can not start call."),coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0))),e.abrupt("return");case 13:return e.next=15,coreAccount.getLoginModel();case 15:if(n=e.sent,(r=n.isSipRegSuc())&&!window.isOffline){e.next=21;break}return v.info("CloudLink is offline. Relogin"),I(t,!0),e.abrupt("return");case 21:if(a=$getState().login.serverAddress,!isNullOrEmpty(t.param.url)&&a!==t.param.url){e.next=38;break}if(v.info("onBigWinJoinConference, address equal: "+a),i=t.param.vip?t.param.vip:"",$dispatch(coreUi.changeBuriedAccesscode(t.param.acccode)),$dispatch(coreUi.changeBuriedPasscode(t.param.passcode)),$dispatch(coreUi.changeBuriedJoinConfVip(i)),c=t.param.acccode+"*"+t.param.passcode,isNullOrEmpty(t.param.username)){e.next=34;break}return e.next=32,coreTup.getCallInstance();case 32:u=e.sent,u.configTUPCallCfgAccountName(t.param.username);case 34:v.info("setBigConfCalloutType, bigConfIsVideo: "+window.bigConfIsVideo),coreCall.CallOut(c,{number:c,addr_vip:i},window.bigConfIsVideo),e.next=39;break;case 38:I(t,!1);case 39:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.bigwinCommonLogic=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("onBigWin CloudLink, bigwinCommonLogic."),e.next=3,coreSecurity.getPasswordManager();case 3:return t=e.sent,e.next=6,t.setPassword("password",window.loginPass);case 6:window.loginPass="",v.info("onBigWin CloudLink, start login."),coreAccount.login({});case 9:case"end":return e.stop()}},e,void 0)}));var N=t.onBigWinLeaveConference=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.anonymousJoinConf&&_(),t=$getState(),n=t.conf.confHandle,v.info("onBigWin leave conf, confHandle=",n),window.CLIENTCONFIG.ISBIGWIN&&((0,g.setCloseShareDataOperate)(!0),v.info("onBigWinLeaveConference hasCloseShareDataOperate : true")),e.next=6,(0,f.actionLeaveConf)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),b=t.resumeDeviceInfo=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,u,f,l;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("resumeDeviceInfo begin"),e.next=3,(new coreCall.CallManager).setCallNotifyFunc();case 3:t=[{name:"cameraDevicesList",handler:changeCameraDevicesList},{name:"spkDevicesList",handler:changeSpkDevicesList},{name:"micDevicesList",handler:changeMicDevicesList}],n=0;case 5:if(!(n<t.length)){e.next=14;break}return r=t[n],e.next=9,coreAccount.get({key:r.name,isPublic:!0});case 9:a=e.sent,Array.isArray(a)&&(v.info(r.name,a),$dispatch(r.handler(a)));case 11:n++,e.next=5;break;case 14:o=[{name:"spkDevice-value",handler:setVoiceValue},{name:"micDevice-value",handler:setMicValue},{name:"spkDevices-selected",handler:setSpkIndex},{name:"micDevices-selected",handler:setMicIndex},{name:"cameraDevices-selected",handler:setVideoIndex}],i=0;case 16:if(!(i<o.length)){e.next=25;break}return c=o[i],e.next=20,coreAccount.get({key:c.name,isPublic:!0});case 20:u=e.sent,isNullOrEmpty(u)||(v.info(c.name,u),c.handler(u));case 22:i++,e.next=16;break;case 25:return e.next=27,coreAccount.get({key:"share-wnd-width",isPublic:!0});case 27:return f=e.sent,e.next=30,coreAccount.get({key:"share-wnd-height",isPublic:!0});case 30:l=e.sent,v.info("share-wnd-width",f),v.info("share-wnd-height",l),isNullOrEmpty(f)||isNullOrEmpty(l)||h.NativeInterface.setBigconfDataInitRect(f,l),m=null,v.info("resumeDeviceInfo end");case 36:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.bigWinCommonLogOut=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("bigWinCommonLogOut"),!window.anonymousJoinConf){e.next=14;break}return v.info("onBigWin anonymous logout before"),_(),t=!1,"login"===window.getRoute()&&(t=!0),window.loginPass="",e.next=9,appService.logOff();case 9:if(!t){e.next=13;break}return e.next=12,coreCommon.initDb();case 12:b();case 13:v.info("onBigWin anonymous logout end");case 14:case"end":return e.stop()}},e,void 0)}));var T=t.onBigWinCtrlLocalCamera=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.info("onBigWinCtrlLocalCamera: ",(0,o.default)(t)),n=$getState(),r=n.conf.confHandle,""!==r?coreCall.openOrOffCamera(t.param.bstop):v.error("onBigWin is not in conference, you can't control camera");case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=t.onBigWinVideoHwnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={hWnd:851978},r=null,1!==t.param.video_wnd){e.next=11;break}return a=(0,o.default)(t),v.info("onBigWinGetVHwnd data:",a),e.next=7,h.NativeInterface.getFrameHwnd();case 7:r=e.sent,n.hWnd=r.param.frameHwnd,e.next=12;break;case 11:n.hWnd=0;case 12:return v.info("onBigWinGetVHwnd hhwnd:",n.hWnd),i=null,e.next=16,new p.default;case 16:i=e.sent,i.postRpsParamMessage(t,n,0);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=(t.onBigWinDataSharingHwnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={hWnd:851978},r=null,$getState().conf.isDataConfSharing||!$getState().call.iSreceivingBFCP){e.next=7;break}v.info("getBfcpFrameHwnd"),r=h.NativeInterface.getBfcpFrameHwnd(),e.next=11;break;case 7:return v.info("getDataConfFrameWnd"),e.next=10,h.NativeInterface.getDataConfFrameWnd();case 10:r=e.sent;case 11:return v.info("onBigWinGetSharingHwnd 2data:",r),r&&r.param&&r.param.frameHwnd?n.hWnd=r.param.frameHwnd:v.error("onBigWinGetSharingHwnd value undefined!"),a=null,e.next=16,new p.default;case 16:a=e.sent,a.postRpsParamMessage(t,n,0);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.onBigWinSharingUsername=function(e){var t=$getState().conf.sharePersonName;return!$getState().conf.isDataConfSharing&&$getState().call.iSreceivingBFCP&&(t=""),e.user_name=t,e},t.onBigWinSetMicValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.param.vol,e.next=3,coreCall.setMicValue(n);case 3:return e.next=5,coreAccount.set({key:"micDevice-value",value:n,isPublic:!0});case 5:v.info("SetMicValue ="+n),isNullOrEmpty(m)||(m.micValue=n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),x=t.onBigWinSetSpkValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.param.vol,e.next=3,coreCall.setVoiceValue(n);case 3:return e.next=5,coreAccount.set({key:"spkDevice-value",value:n,isPublic:!0});case 5:v.info("SetSpkValue ="+n),isNullOrEmpty(m)||(m.voiceValue=n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),A=t.onBiggetMicValue=function(e){var t=m;return isNullOrEmpty(t)&&(t=$getState().call,v.info("onBiggetMicValue")),e.vol=t.micValue,v.info("getMicValue ="+e.vol),e.vol},L=t.onBiggetSpkValue=function(e){var t=m;return isNullOrEmpty(t)&&(t=$getState().call),e.vol=t.voiceValue,v.info("getSpkValue ="+e.vol),e.vol},k=t.onBiggetDeviceList=function(e,t){var n=m;isNullOrEmpty(n)&&(n=$getState().call);var r=e.param.device_type,a=[],o=[],i=[],s=[];switch(o=n.micDevicesList,i=n.spkDevicesList,s=n.cameraDevicesList,v.info("data =",e),v.info("micList =",o),v.info("spkList =",i),v.info("cameraList =",s),r){case 1:a=s;break;case 2:a=i;break;case 3:a=o;break;default:v.error("device type index is error, type is =",r)}v.info("device_list =:",a);for(var c=0;c<a.length;c++){var u={};u.device_id=a[c].index,u.device_name=a[c].name,t.device_list.push(u)}return t.device_list},R=t.OnBigWinSetDevice=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=1,r=2,a=3,v.info("data =",(0,o.default)(t)),i=t.param.device_type,c=t.param.device_id,e.t0=i,e.next=e.t0===n?9:e.t0===r?14:e.t0===a?19:24;break;case 9:return e.next=11,coreSetting.setVideoIndex(c);case 11:return e.next=13,coreAccount.set({key:"cameraDevices-selected",value:c,isPublic:!0});case 13:return e.abrupt("break",26);case 14:return e.next=16,coreSetting.setSpkIndex(c);case 16:return e.next=18,coreAccount.set({key:"spkDevices-selected",value:c,isPublic:!0});case 18:return e.abrupt("break",26);case 19:return e.next=21,coreSetting.setMicIndex(c);case 21:return e.next=23,coreAccount.set({key:"micDevices-selected",value:c,isPublic:!0});case 23:return e.abrupt("break",26);case 24:return v.error("device type index is error, type is =",i),e.abrupt("break",26);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),M=(t.OnBigWinSetRecvShareParam=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("OnBigWinSetRecvShareParam =:",(0,o.default)(t)),!t.param.width||!t.param.height){e.next=7;break}return e.next=4,coreAccount.set({key:"share-wnd-width",value:t.param.width,isPublic:!0});case 4:return e.next=6,coreAccount.set({key:"share-wnd-height",value:t.param.height,isPublic:!0});case 6:h.NativeInterface.setBigconfDataInitRect(t.param.width,t.param.height);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeHasSent=function(e){$dispatch(coreUi.changeHasSentState(e))}),D=t.onJoinConfFailed=function(){coreConf.buriedJoinConfFailed()},P=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=["cameraDevicesList","spkDevicesList","micDevicesList","spkDevice-value","micDevice-value","spkDevices-selected","micDevices-selected","cameraDevices-selected","share-wnd-width","share-wnd-height"],r=0;case 2:if(!(r<n.length)){e.next=9;break}return a=n[r],e.next=6,coreAccount.remove({key:a,isPublic:!0});case 6:r++,e.next=2;break;case 9:setTimeout(function(){try{appService.exitApp()}catch(e){v.error("closeApp",{e:e.toJSON()})}},500);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),F=(t.NotifyCameraListUpdateEx=function(e){(0,l.NotifyCameraListUpdate)(e);var t=$getState().call.cameraDevicesList;isNullOrEmpty(m)||(m.cameraDevicesList=t),coreAccount.set({key:"cameraDevicesList",value:t})},t.onRunCloudLink=function(e){v.info("onRunCloudLink: ",e.param.language);var t="2052";t=0===e.param.language?"1033":"2052",setLanguage(t)}),U=t.onLeaveConference=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),""===(n=t.conf.confHandle)){e.next=7;break}return v.info("onLeaveConference: confHandle=",n),e.next=5,(0,f.actionLeaveConf)();case 5:e.next=8;break;case 7:v.info("onLeaveConference: not in conf");case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),B=t.onLogout=function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT),coreAccount.changeAutoLogin()},W=t.onChangeLanguage=function(e){v.info("onChangeLanguage: ",e.param.language);var t="2052";t=0===e.param.language?"1033":"2052",coreConf.setNativeWndLogPath({logpath:window.LOG_PATH}),coreUi.choseLanguage(t)},G=t.onGetMainWnd=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={hWnd:0},r=win.getNativeWindowHandle(),n.hWnd=r.readUInt32LE(0),v.info("onGetMainWnd js main wnd:",n.hWnd),a=null,e.next=7,new p.default;case 7:a=e.sent,a.postRpsParamMessage(t,n,0);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),V=t.onShowOrHideMainWnd=function(e){v.info("onShowOrHideMainWnd: ",e.param),0===e.param.isShow?win.hide():(1===e.param.showSkip?$dispatch(coreUi.changeShowSkipBtn(!0)):$dispatch(coreUi.changeShowSkipBtn(!1)),win.show(),v.info("onShowOrHideMainWnd setAlwaysOnTop start"),win.setAlwaysOnTop(!0),win.setAlwaysOnTop(!1),v.info("onShowOrHideMainWnd setAlwaysOnTop end"))},H=t.onStopCloudLink=function(e){v.info("onStopCloudLink: ",(0,o.default)(e)),setTimeout(function(){try{appService.exitApp()}catch(e){v.error("onStopCloudLink:",{e:e.toJSON()})}},500)},$=t.OnEncryptValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,e.next=5,coreSecurity.encryptKMC(t.param.value);case 5:if(r=e.sent,t.param.value="",0!==r.result){e.next=15;break}return a={key:"MAXHUBKEY_"+t.param.key,value:r.param.CiperText},e.next=11,coreDb.saveEncryptValue(a);case 11:v.info("OnEncryptValue: enc succ"),n.postRpsMessage(t,0),e.next=17;break;case 15:v.info("OnEncryptValue: enc fail"),n.postRpsMessage(t,1e3);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),j=t.OnDecryptValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,r={key:"MAXHUBKEY_"+t.param.key},e.next=6,coreDb.queryEncryptValue(r);case 6:if(""!==(a=e.sent)){e.next=12;break}v.info("OnDecryptValue: query fail"),n.postRpsMessage(t,1e3),e.next=19;break;case 12:return v.info("OnDecryptValue: query succ"),e.next=15,coreSecurity.decryptKMC(a);case 15:o=e.sent,i=o&&o.param&&o.param.PlainText||"",v.info("OnDecryptValue retValue: "+i==""?"failed":"success"),""===i?(v.info("OnDecryptValue: dec fail"),n.postRpsMessage(t,1e3)):(v.info("OnDecryptValue: dec succ"),c={key:t.param.key,decrypt_vaule:i},n.postRpsParamMessage(t,c,0),c.decrypt_vaule="",i="");case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),q=t.OnWorkplaceLogin=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!1);case 2:if(!(n=e.sent)){e.next=16;break}return e.next=6,coreAccount.getLoginModel();case 6:return r=e.sent,r.set({account:t.param.acc||"",displayAccount:t.param.acc||"",password:t.param.pas||"",serverAddress:t.param.uPartal_url||"",serverPort:t.param.uPartal_port||""}),e.next=10,coreSecurity.getPasswordManager();case 10:a=e.sent,a.setPassword("password",t.param.pas),t.param.pas="",v.info("OnWorkplaceLogin set window.CLIENTCONFIG.NEW_APP_NAME is Workplace"),window.CLIENTCONFIG.NEW_APP_NAME="Workplace",coreAccount.doLogin();case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Y=t.OnCleanValue=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p.default;case 2:return n=e.sent,r={key:"MAXHUBKEY_"+t.param.key},e.next=6,coreDb.cleanEncryptValue(r);case 6:n.postRpsMessage(t,0);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),K=(t.registerMaxhubEvent=function(){v.info("registerMaxhubEvent, BigwinObserver subscribe topics"),coreCommon.BigwinObserver.subscribe("OnRunCloudLink",F),coreCommon.BigwinObserver.subscribe("OnLeaveConference",U),coreCommon.BigwinObserver.subscribe("OnLogout",B),coreCommon.BigwinObserver.subscribe("OnChangeLanguage",W),coreCommon.BigwinObserver.subscribe("OnGetMainWnd",G),coreCommon.BigwinObserver.subscribe("OnShowOrHideMainWnd",V),coreCommon.BigwinObserver.subscribe("OnStopCloudLink",H),coreCommon.BigwinObserver.subscribe("OnEncryptValue",$),coreCommon.BigwinObserver.subscribe("OnDecryptValue",j),coreCommon.BigwinObserver.subscribe("OnCleanValue",Y),coreCommon.BigwinObserver.subscribe("OnWorkplaceLogin",q)},t.maxhubSkipLogin=function(){v.info("userClick maxhub  skipLogin"),(0,l.NotifySkipLogin)(0)},t.dateConvertTo=function(e){if(null!==e&&void 0!==e){var t=e.split(" "),n=(new Date).getFullYear(),r=t[0].replace(/-/g,"/").split("/"),a=r[0],o=r[1],i=r[2];return a!==n.toString()?a+language.YEAR+o+language.MONTH+i+language.DAY+" "+t[1]:o+language.MONTH+i+language.DAY+" "+t[1]}});t.getConfShareUrl=function(e){var t=decodeURI("%0d%0a"),n=e.scheduser_name,r=e.conf_subject,a=e.conf_id,o=e.vmr_id,i=(e.general_pwd,e.guest_join_uri),s=e.start_time,c=e.end_time,u=K(s)+" - "+(s.split(" ")[0]===c.split(" ")[0]?c.split(" ")[1]:K(c)),f=isNullOrEmpty(o)?a:o;return""+language.NATIVE_CONF_THEME+r+t+language.NATIVE_CONF_TIME+u+t+language.NATIVE_CONF_SPONSOR+n+t+language.NATIVE_CONF_ID+f+t+language.NATIVE_CONF_LINK+(i||"")}},948:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.serverCloseAllPair=t.pairedOrCanceledResultNotify=t.receivePairReqNotify=t.creatQrCodeSvg=t.initTupPairServer=t.initAsPairServer=t.uninitAsPairServer=t.requestPairCode=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(286),l=n(228),d=coreLogger.getLogger("logic")("synergism/server"),p=null,h=3e5,g=[],v=null,m=null,_=null;"win"===window.CLIENTCONFIG.PLATFORM&&(_=n(1701));var C=function(){p&&clearInterval(p),p=null,h=3e5,g=[],v=null,m&&clearTimeout(m),m=null},w=t.requestPairCode=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,u,p,h,g,v;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("win"!==window.CLIENTCONFIG.PLATFORM){e.next=16;break}return t=$getState().login,n=t.account,r=t.authToken,a=t.sipAccount,o=t.euaServer,i=(0,f.dealWithSipNumber)(a),c=o?o.split(":"):"",u=c[1]?c[1]:8544,p=window.localIp,c=c[0],$getState().login.isSupportAS&&(c=(0,l.getUportalApi)().IP.value,u=8544,d.info("[pair] server euaServer isSupportAS env :",c)),h=window.path.join(window.EXEC_PATH,"/BfcpTLS/server.pem"),e.next=11,coreTup.getUportalInstance();case 11:return g=e.sent,e.next=14,g.getProjectionCode(c,u,n,r,i,p,h);case 14:v=e.sent,d.info("request pair code from eua server ret=",v);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),S=(t.uninitAsPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("start uninitAsPairServer"),C(),e.next=4,coreTup.getUportalInstance();case 4:t=e.sent,t.setNotifyFunc(360470,null);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initAsPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("win"===window.CLIENTCONFIG.PLATFORM){e.next=3;break}return d.info("cancel initPairServer, not windows platform"),e.abrupt("return");case 3:if(d.info("start request and refresh pair code"),C(),t=$getState().login.euaServer,$getState().login.isSupportAS&&(t=(0,l.getUportalApi)().IP.value,d.info("[pair] euaServer isSupportAS env :",t)),t&&""!==t){e.next=10;break}return d.info("the eua server is null"),e.abrupt("return");case 10:return d.info("the eua server is:",t),e.next=13,coreTup.getUportalInstance();case 13:return n=e.sent,n.setNotifyFunc(360470,I),e.next=17,w();case 17:p=setInterval(function(){d.info("It is time to refresh pair code, cycle=",h),w()},h);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initTupPairServer=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("start init tup call module as pair server"),e.next=3,coreCall.pairEnable(0,1);case 3:if(t=e.sent,0===t.result){e.next=7;break}return d.info("enable tup pair failed, ret=",t),e.abrupt("return");case 7:return e.next=9,coreSecurity.decryptKMC(window.bfcpp);case 9:return n=e.sent,r=n&&n.param&&n.param.PlainText||"",d.info("bfcpTLSP decrytp: "+(""===r?"failed":"success")),a={call:{pair_private_key:{private_key_file:window.path.join(window.EXEC_PATH,"/BfcpTLS/server_key.pem"),private_key_file_psw:r,private_key_file_psw_len:r.length}}},e.next=15,coreCall.setTUPCallCfg(a);case 15:t=e.sent,0!==t.result?d.info("config tup private [key] failed, ret=",t):d.info("init tup call module as pair server success");case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.creatQrCodeSvg=function(e){if(null!==_){var t=window.path.join(window.APP_DATA_PATH,"pairCode.svg").replace(/\\/g,"/"),n="cloudlink://welinksoftclient/h5page?page=synergism&pairCode="+e.pairCode;if(1===$getState().synergismInfo.QRMode){var r="ui://welink.im/qr?page=synergism&pairCode="+e.pairCode;n="cloudlinkproworkplace://cloudlinkpro.huawei.com/qr?uri="+encodeURIComponent(r),d.info("workplace mode qr code")}else if(2===$getState().synergismInfo.QRMode){var a="page=synergism&pairCode="+e.pairCode;n=$getState().synergismInfo.QRScheme+encodeURIComponent(a),d.info("other mode qr code")}var o=_.image(n,{type:"svg"}),i=window.fs.createWriteStream(t),s=o.pipe(i);s.on("error",function(e){d.error("refresh qr code svg failed, error=",e)}),s.on("finish",function(){d.info("refresh qr code svg success"),$dispatch(coreUi.changePairCodeInfo(e))})}}),I=function(e){if(d.info("getPairCodeNotify=",(0,o.default)(e)),0===e.param.result&&1===e.param.is_pair){var t=e.param.projection_code_result.project_code,n=e.param.projection_code_result.valid_time,r=e.param.projection_code_result.tmpKey;if(""!==t&&0!==n&&""!==r){var a={pairCode:t,validTime:n,tmpKey:r};d.info("Notify get pair code info=",a),v=$getState().synergismInfo.pairCodeInfo,m&&clearTimeout(m),m=setTimeout(function(){d.info("It is time to clean old pair code info"),v=null},3e4),S(a),n=5*n/8*1e3,h!==n&&(d.info("pair code valid time changed, set cycle="+n+", old cycle="+h),h=n,p&&clearInterval(p),p=setInterval(function(){d.info("It is time to refresh pair code, cycle=",h),w()},h))}}else d.info("Notify return failed, get pair code result=",e)},E=function(e){return e===$getState().synergismInfo.pairCodeInfo.tmpKey||!(!v||!v.tmpKey||v.tmpKey!==e)},N=function(e){for(var t=g.length,n=0;n<t;n++)if(g[n].id===e)return d.info("find client in paired list, index=",n+", id=",e),n;return-1},b=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.cancelPair(1,g[t].id);case 2:n=e.sent,d.info("break old pair rsp=",n),r=g.length,t<r&&(g.splice(t,1),d.info("delete client form paired list, index=",t+", old list length=",r+", new list length=",g.length));case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={isPermit:0,reason:0},!E(t.pair_key)){e.next=28;break}if(-1===N(t.id)){e.next=7;break}n.isPermit=1,n.reason=0,e.next=26;break;case 7:if(!(g.length>=1)){e.next=23;break}if(d.info("the paired device count is over limit"),1!==t.is_force){e.next=18;break}return d.info("deal force pair request"),r=0,e.next=14,b(r);case 14:n.isPermit=1,n.reason=0,e.next=21;break;case 18:d.info("paired client number over limit"),n.isPermit=0,n.reason=constant.SYNERGISM_FAIL_REASON.USER_NUM_LIMITED;case 21:e.next=26;break;case 23:d.info("check pair request valid success"),n.isPermit=1,n.reason=0;case 26:e.next=31;break;case 28:d.info("check pair request valid failed"),n.isPermit=0,n.reason=constant.SYNERGISM_FAIL_REASON.AUTH_FAIL;case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.receivePairReqNotify=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c,u,l,p;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("Notify, receive pair request, id=",t.id),n=$getState().login.sipAccount,r=(0,f.dealWithSipNumber)(n),a=getContactName($getState().myInfo),i=window.localIp,e.next=7,T(t);case 7:return c=e.sent,e.next=10,coreCall.pairPermit(t.id,c.isPermit,c.reason,i,r,a,300,1);case 10:u=e.sent,0===u.result&&1===c.isPermit?(l={id:t.id,name:t.display_name,ip:t.remote_ip,sip:t.sip_number},p=N(t.id),-1===p?(g.push(l),d.info("send peimit pair success, save client info, id=",l.id+", ip=",l.ip+"list length=",g.length)):(g.splice(p,1,l),d.info("send peimit pair success, refresh client info, index=",p+"id=",l.id+", ip=",l.ip+"list length=",g.length))):d.info("pair response=",(0,o.default)(c)+", ret=",u);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairedOrCanceledResultNotify=function(e){if(d.info("Notify get pair or cancel result, id=",e.id+", isPair=",e.is_paired+", reason=",e.reason),!e.is_paired){var t=N(e.id);-1!==t&&(d.info("delete client form paired list, index=",t),g.splice(t,1))}},t.serverCloseAllPair=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g.length>0)){e.next=9;break}d.info("start close all paired client"),t=0;case 3:if(!(t<g.length)){e.next=9;break}return e.next=6,b(t);case 6:t++,e.next=3;break;case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},949:function(e,t,n){"use strict";(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function i(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(w.isFunction(e)){if(E)return e.name;var t=e.toString(),n=t.match(b);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(E||!w.isFunction(e))return w.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function f(e){return c(u(e.actual),128)+" "+e.operator+" "+c(u(e.expected),128)}function l(e,t,n,r,a){throw new N.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function d(e,t){e||l(e,!0,t,"==",N.ok)}function p(e,t,n,s){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(i(e)&&i(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(e);return-1!==c&&c===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),g(e,t,n,s))}return n?e===t:e==t}function h(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(w.isPrimitive(e)||w.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=h(e),o=h(t);if(a&&!o||!a&&o)return!1;if(a)return e=I.call(e),t=I.call(t),p(e,t,n);var i,s,c=T(e),u=T(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;s>=0;s--)if(c[s]!==u[s])return!1;for(s=c.length-1;s>=0;s--)if(i=c[s],!p(e[i],t[i],n,r))return!1;return!0}function v(e,t,n){p(e,t,!0)&&l(e,t,n,"notDeepStrictEqual",v)}function m(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e){var t;try{e()}catch(e){t=e}return t}function C(e,t,n,r){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),a=_(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!a&&l(a,n,"Missing expected exception"+r);var o="string"==typeof r,i=!e&&w.isError(a),s=!e&&a&&!n;if((i&&o&&m(a,n)||s)&&l(a,n,"Got unwanted exception"+r),e&&a&&n&&!m(a,n)||!e&&a)throw a}var w=n(326),S=Object.prototype.hasOwnProperty,I=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),N=e.exports=d,b=/\s*function\s+([^\(\s]*)\s*/;N.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=s(t),o=r.indexOf("\n"+a);if(o>=0){var i=r.indexOf("\n",o+1);r=r.substring(i+1)}this.stack=r}}},w.inherits(N.AssertionError,Error),N.fail=l,N.ok=d,N.equal=function(e,t,n){e!=t&&l(e,t,n,"==",N.equal)},N.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",N.notEqual)},N.deepEqual=function(e,t,n){p(e,t,!1)||l(e,t,n,"deepEqual",N.deepEqual)},N.deepStrictEqual=function(e,t,n){p(e,t,!0)||l(e,t,n,"deepStrictEqual",N.deepStrictEqual)},N.notDeepEqual=function(e,t,n){p(e,t,!1)&&l(e,t,n,"notDeepEqual",N.notDeepEqual)},N.notDeepStrictEqual=v,N.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",N.strictEqual)},N.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",N.notStrictEqual)},N.throws=function(e,t,n){C(!0,e,t,n)},N.doesNotThrow=function(e,t,n){C(!1,e,t,n)},N.ifError=function(e){if(e)throw e};var T=Object.keys||function(e){var t=[];for(var n in e)S.call(e,n)&&t.push(n);return t}}).call(t,n(139))},950:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unnormalEnd=t.normalEnd=t.createXMLHttpRequest=void 0;var r=n(855),a=n(951),o=coreLogger.getLogger("bigwinBuried")("buried");t.createXMLHttpRequest=function(){var e=void 0;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){o.error("create XML http request Msxml2 error",t);try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){o.error("create XML http request MS error",e)}}return e},t.normalEnd=function(e,t,n){o.info("buried buriedNormalEnd");var i=parseInt((new Date).getTime()/1e3,10),s=i-n;o.info("总时间"+s);var c={endType:e,isUserEnd:t,holdTime:s};(0,r.stopCalcCPUUsage)(),(0,a.endConfSendQos)();(0,r.sendHttpPost)("normalEnd",c)},t.unnormalEnd=function(e,t){o.info("buried buriedUnormalEnd");var n=parseInt((new Date).getTime()/1e3,10),i=n-t;o.info("总时间"+i),o.info("end call reason :",e);var s={holdTime:i,errId:e};(0,r.stopCalcCPUUsage)(),(0,a.endConfSendQos)();(0,r.sendHttpPost)("abnormalEnd",s)}},951:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.endConfSendQos=t.startRecordQos=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(855),u=coreLogger.getLogger("bigwinBuried")("buried"),f=void 0,l=void 0,d=0,p=!1,h=void 0,g=void 0,v=function(){f={qosType:11,rcvTtlBytes:0,sndTtlBytes:0,rcvAvgBitR:0,sndAvgBitR:0,rcvMaxLossR:0,sndMaxLossR:0,rcvContLoss:0,sndContLoss:0,rcvMaxDelay:0,sndMaxDelay:0,rcvMaxJitter:0,sndMaxJitter:0},l={qosType:0,rcvTtlBytes:0,sndTtlBytes:0,rcvAvgBitR:0,sndAvgBitR:0,rcvMaxLossR:0,sndMaxLossR:0,rcvContLoss:0,sndContLoss:0,rcvMaxDelay:0,sndMaxDelay:0,rcvMaxJitter:0,sndMaxJitter:0},d=0,p=!1},m=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,h,g,v,m,_,C,w,S;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return u.error("client config is not bigwin."),e.abrupt("return");case 3:return e.next=5,coreTup.getCallInstance();case 5:return t=e.sent,e.next=8,t.getCallMediaParams({});case 8:n=e.sent,r=n.param,d++,a=r.svc_stream_info,r&&r.audio_stream_info&&(l.rcvTtlBytes=null!==r.audio_stream_info.bytes_received&&r.audio_stream_info.bytes_received>=l.rcvTtlBytes?r.audio_stream_info.bytes_received:l.rcvTtlBytes,l.sndTtlBytes=null!==r.audio_stream_info.bytes_sent&&r.audio_stream_info.bytes_sent>=l.sndTtlBytes?r.audio_stream_info.bytes_sent:l.sndTtlBytes,l.rcvAvgBitR=null!==r.audio_stream_info.recv_bit_rate&&r.audio_stream_info.recv_bit_rate>=l.rcvAvgBitR?r.audio_stream_info.recv_bit_rate:l.rcvAvgBitR,l.sndAvgBitR=null!==r.audio_stream_info.send_bit_rate&&r.audio_stream_info.send_bit_rate>=l.sndAvgBitR?r.audio_stream_info.send_bit_rate:l.sndAvgBitR,l.rcvMaxLossR=null!==r.audio_stream_info.recv_loss_fraction&&r.audio_stream_info.recv_loss_fraction>=l.rcvMaxLossR?r.audio_stream_info.recv_loss_fraction:l.rcvMaxLossR,l.sndMaxLossR=null!==r.audio_stream_info.send_loss_fraction&&r.audio_stream_info.send_loss_fraction>=l.sndMaxLossR?r.audio_stream_info.send_loss_fraction:l.sndMaxLossR,l.rcvMaxDelay=null!==r.audio_stream_info.recv_delay&&r.audio_stream_info.recv_delay>=l.rcvMaxDelay?r.audio_stream_info.recv_delay:l.rcvMaxDelay,l.sndMaxDelay=null!==r.audio_stream_info.send_delay&&r.audio_stream_info.send_delay>=l.sndMaxDelay?r.audio_stream_info.send_delay:l.sndMaxDelay,l.rcvMaxJitter=null!==r.audio_stream_info.recv_jitter&&r.audio_stream_info.recv_jitter>=l.rcvMaxJitter?r.audio_stream_info.recv_jitter:l.rcvMaxJitter,l.sndMaxJitter=null!==r.audio_stream_info.send_jitter&&r.audio_stream_info.send_jitter>=l.sndMaxJitter?r.audio_stream_info.send_jitter:l.sndMaxJitter),i=0,s=0,c=0,h=0,g=0,v=0,m=0,_=0,C=0,w=0;for(S in a)""===a[S].decode_name&&""===a[S].encode_name||(p=!0),i=null!==a[S].bytes_received&&a[S].bytes_received>=i?a[S].bytes_received:i,s=null!==a[S].bytes_sent&&a[S].bytes_sent>=s?a[S].bytes_sent:s,c=null!==a[S].video_recv_bit_rate&&a[S].video_recv_bit_rate/1e3>=c?a[S].video_recv_bit_rate/1e3:c,h=null!==a[S].video_send_bit_rate&&a[S].video_send_bit_rate/1e3>=h?a[S].video_send_bit_rate/1e3:h,g=null!==a[S].recv_loss_fraction&&a[S].recv_loss_fraction>=g?a[S].recv_loss_fraction:g,v=null!==a[S].send_loss_fraction&&a[S].send_loss_fraction>=v?a[S].send_loss_fraction:v,m=null!==a[S].recv_delay&&a[S].recv_delay>=m?a[S].recv_delay:m,_=null!==a[S].send_delay&&a[S].send_delay>=_?a[S].send_delay:_,C=null!==a[S].recv_jitter&&a[S].recv_jitter>=C?a[S].recv_jitter:C,w=null!==a[S].send_jitter&&a[S].send_jitter>=w?a[S].send_jitter:w;!0===p&&(f.rcvTtlBytes=f.rcvTtlBytes>=i?f.rcvTtlBytes:i,f.sndTtlBytes=f.sndTtlBytes>=s?f.sndTtlBytes:s,f.rcvAvgBitR=f.rcvAvgBitR>=c?f.rcvAvgBitR:c,f.sndAvgBitR=f.sndAvgBitR>=h?f.sndAvgBitR:h,f.rcvMaxLossR=f.rcvMaxLossR>=g?f.rcvMaxLossR:g,f.sndMaxLossR=f.sndMaxLossR>=v?f.sndMaxLossR:v,f.rcvMaxDelay=f.rcvMaxDelay>=m?f.rcvMaxDelay:m,f.sndMaxDelay=f.sndMaxDelay>=_?f.sndMaxDelay:_,f.rcvMaxJitter=f.rcvMaxJitter>=C?f.rcvMaxJitter:C,f.sndMaxJitter=f.sndMaxJitter>=w?f.sndMaxJitter:w);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.startRecordQos=function(){if(u.info("buried buriedStartRecordQos"),!window.CLIENTCONFIG.ISBIGWIN)return void u.error("client config is not bigwin.");v(),h=setInterval(function(){m()},5e3),g=setInterval(function(){!0===p&&(0,c.sendHttpPost)("qos",f),(0,c.sendHttpPost)("qos",l),v()},6e4)},t.endConfSendQos=function(){if(u.info("buried endConfSendQos"),!window.CLIENTCONFIG.ISBIGWIN)return void u.error("client config is not bigwin.");clearInterval(h),clearInterval(g),d<1||(!0===p&&(0,c.sendHttpPost)("qos",f),(0,c.sendHttpPost)("qos",l),v())}},952:function(e,t,n){"use strict";function r(e){o.info("checkConferenceId");var t=isNullOrEmpty(e);return t&&(o.info("userClick  checkConferenceId",language.ENTER_CONF_ACS_ID_NULL),window.alert(language.ENTER_CONF_ACS_ID_NULL)),t}function a(e){o.info("getExperienceConferenceInfo");var t=e.split("*"),n={confId:t[0]};return 2!==t.length||isNullOrEmpty(t[1])||(o.info("getExperienceConferenceInfo 有mi ma"),n.confPwd=t[1]),n}Object.defineProperty(t,"__esModule",{value:!0}),t.checkConferenceId=r,t.getExperienceConferenceInfo=a;var o=coreLogger.getLogger("logic")("conference/audio/joinConference")},953:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(123),i=a(o),s=n(150),c=a(s),u=n(133),f=a(u),l=n(1),d=a(l),p=n(2),h=a(p),g=n(4),v=a(g),m=n(5),_=a(m),C=n(166),w=n(208),S=r(w),I=n(186),E=r(I),N=n(207),b=n(194),T=n(250),y=n(227),O=coreLogger.getLogger("dataconf")("logic"),x=function(){function e(){var t=this;(0,v.default)(this,e),this.handleApplistResult=function(){var e=(0,h.default)(d.default.mark(function e(n){var r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(r=E.getShareAppHwnd())||!y.DFConfig.isAppShareEnabled){e.next=10;break}return e.next=4,t.processProgramList(n);case 4:a=e.sent,O.info("get program list , length = "+a.length),$dispatch(coreUi.changeSharingAppWindow(a)),t.toggleShowPickSharingWindow(),e.next=21;break;case 10:return e.next=12,E.setSharingapp(r);case 12:return e.next=14,N.NativeInterface.setHightlightShareWnd(r,!0);case 14:return o=e.sent,e.next=17,E.setAppShareScreenParam(9,{width:3,height:0});case 17:return e.next=19,E.setStart();case 19:$dispatch(coreUi.changeFirstActiveShareApp(!1)),o&&E.setTransparentwindow(o,7);case 21:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.processProgramList=function(){var e=(0,h.default)(d.default.mark(function e(n){var r,a,o,i,s,u,l,p,h,g,v,m,_,C,w;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,f.default)(n.param).map(function(e){return[String(e),n.param[e]]}),a=[],(0,f.default)(n.param).map(function(e){if(-1!==e.indexOf("hwnd")){var t=n.param[e];t>0&&a.push(t)}}),O.info("processProgramList getWindowIcon start "),o=new c.default,e.next=7,N.NativeInterface.getWindowIcon(a);case 7:i=e.sent,i&&(O.info("get window thumbnail result"),o=t.processProgramThumbnail(i.param,r)),O.info("processProgramList getWindowIcon end"),s=[],u={handler:0,title:language.SHARING_DESKTOP,thumbnail:window.__dirname+"/../resources/icon/share_desktop.png"},s.push(u),l={handler:0,title:language.LANG_NATIVE_WHITE_BOARD,thumbnail:window.__dirname+"/../resources/icon/whiteboard.png"},s.push(l),!0===y.DFConfig.isDocShareEnabled()&&(p={handler:0,title:language.DOCUMENT_SHARE,thumbnail:window.__dirname+"/../resources/icon/share_doc.png"},s.push(p)),h=0;case 17:if(!(h<r.length)){e.next=35;break}if(g=r[h],-1===g[0].indexOf("hwnd")||isNullOrEmpty(g[1])||!(g[1]>0)){e.next=32;break}v=g[0].replace("hwnd",""),m="wndTitle"+v,_=0;case 23:if(!(_<r.length)){e.next=32;break}if(C=r[_],C[0]!==m){e.next=29;break}return w={handler:g[1],title:C[1],thumbnail:o.get(g[0])},"CloudLink"!==w.title&&"华为会议"!==w.title&&"Huawei Meeting"!==w.title&&void 0!==w.thumbnail&&s.push(w),e.abrupt("break",32);case 29:_++,e.next=23;break;case 32:h++,e.next=17;break;case 35:return e.abrupt("return",s);case 36:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.processProgramThumbnail=function(e,t){var n=new c.default;if(!isNullOrEmpty(e)){O.info("processProgramThumbnail start ");for(var r=0;r<e.length;r++)for(var a=e[r],o=parseInt(a.hwnd),i=0;i<t.length;i++){var s=t[i],u=parseInt(s[1]);if(o===u){n.set(s[0],a.path);break}}O.info("processProgramThumbnail end")}return n},this.toggleShowPickSharingWindow=function(){$getState().conf.isShowPickSharingWindow?$dispatch(coreUi.togglePickSharingWindow(!1)):$dispatch(coreUi.togglePickSharingWindow(!0))},this.showPickSharingWindow=function(){if(!isNullOrEmpty(window.pickSharingWin))return void t.hidePickSharingWindow();O.info("testwhite pickSharingWin new windows");var e=new remote.BrowserWindow({useContentSize:!0,height:454,width:570,alwaysOnTop:!0,resizable:!1,minimizable:!1,maximizable:!1,autoHideMenuBar:!0,fullscreenable:!1,title:language.LANG_NATIVE_START_SHARE}),r=n(239).format({protocol:"file",slashes:!0,pathname:n(394).join(window.__dirname,"pickSharingWindow.html")});e.loadURL(r),window.pickSharingWin=e,e.on("closed",function(){window.pickSharingWin=null,t.hidePickSharingWindow()}),e.once("ready-to-show",function(e){O.info("testwhite pickSharingWin ready to show"),$dispatch(coreUi.togglePickSharingWindow(!0))}),e.webContents.on("did-finish-load",function(){isNullOrEmpty(window.pickSharingWin)||isNullOrEmpty(window.pickSharingWin.getURL())||O.info("testwhite pickSharingWin did-finish-load"),$dispatch(coreUi.togglePickSharingWindow(!0))})},this.hidePickSharingWindow=function(){$dispatch(coreUi.togglePickSharingWindow(!1))},this.openShareScreen=(0,h.default)(d.default.mark(function e(){var n,r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf,r=n.isSvcConf,a=n.setShareQuality,o={},a=100===a?1:40===a?0:2,o=(0,i.default)(o,{share_quality:a}),C.SvcAtdManager.setParam(o);case 5:case"end":return e.stop()}},e,t)})),this.resumeVideoWhenDataEnd=function(){},this.onRequestOperateTokenFail=function(){C.SvcAtdManager.alertBox(language.SHARE_FAILED,3),t.proxy.stopShareScreen()},this.updateComponentStatus=function(){var e=(0,h.default)(d.default.mark(function e(n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("docshare updateComponentStatus: ",n),r=n.component,r!==constant.COMPONENT_IID.IID_COMPONENT_DS&&r!==constant.COMPONENT_IID.IID_COMPONENT_AS&&r!==constant.COMPONENT_IID.IID_COMPONENT_WB&&t.proxy.changeDataConfShowMode(constant.SHOW_DATACONF_MODE.SHOW_DATACONF_NONE);case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleReceiveScreenKeyFrame=function(e){t.onAsOnRecvFirstFrame(e)},this.onAsOnRecvFirstFrame=function(){var e=(0,h.default)(d.default.mark(function e(n){var r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("recv first frame"),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.notifyDataRecvFirstFrame();case 6:a=e.sent,O.info("onAsOnRecvFirstFrame,ret = ",a);case 8:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleDataShareEnd=function(){},this.switchVideoFloating=function(){},this.resumeVideoWhenDataEnd=function(){},this.proxy=null}return(0,_.default)(e,[{key:"registerDataEvent",value:function(){var e=new coreCommon.ObserverOpts(y.DFConfig.moduleName);e.target=this,coreCommon.Observer.subscribe("updateComponentStatus",this.updateComponentStatus,e)}},{key:"closeBfcpFrameForSharingSession",value:function(){}},{key:"closeBfcpFrameForOwnerChanged",value:function(){C.SvcAtdManager.closeBfcpFrame(),S.closeBfcpFrame()}},{key:"clearBfcpTimer",value:function(){}},{key:"closeAppShare",value:function(){}},{key:"initDeviceStates",value:function(){b.ToolbarManager.initDeviceStates()}},{key:"handleBfcpForChangeMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,h.default)(d.default.mark(function e(t,n){var r,a,o,i,s;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$getState().conf,a=r.bfcpFrameHwnd,o=r.isSvcConf,i=$getState().call.avcBfcpHwnd,s=0,!((s=o?a:i)>0)){e.next=10;break}return O.info("changeDataConfShowMode bfcpFrameHwnd = "+s+" ,destoryBFCPFram"),e.next=8,C.SvcAtdManager.closeBfcpFrame();case 8:return e.next=10,S.closeBfcpFrame();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCloseNativeDataWnd",value:function(e,t){O.info("handleCloseNativeDataWnd")}},{key:"onJoinDataConfFail",value:function(){function e(){return t.apply(this,arguments)}var t=(0,h.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.proxy.handleJoinDataConfFail();case 2:coreConf.isInConf()&&C.SvcAtdManager.alertBox(language.SHARING_JOINCONF_FAIL+language.FEEDBACK_MESSAGE_TIPS,2,0,"feedback",language.FEEDBACK);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleWindowForStopShareScreen",value:function(){coreCall.exitFullScreen(),remote.ipcMain.removeListener("toggle-menu-show-message",this.proxy.toggleShowDataControlMenu),$dispatch(coreUi.showDataConfCmdNotify({},!1))}},{key:"handleNativeNotifyDataFirstFrameRecv",value:function(){E.setShareAppHwnd(0),E.setOldShareAppHwnd(0);var e=$getState().conf.sharePersonName;O.info("recv first frame, notify to proxy other share is start",e),(0,T.NotifyStartSharing)(0,e)}}]),e}();t.default=x}});