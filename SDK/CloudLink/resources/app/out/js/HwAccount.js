webpackJsonp([12],{100:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwAccountSdk=void 0;var a=r(123),o=n(a),i=r(4),s=n(i),u=r(1644),c=n(u),d=r(361),l=r(1645),f=r(1647),p=r(228);t.HwAccountSdk=function e(){(0,s.default)(this,e),this.getAccountApi=f.getAccountApi,(0,o.default)(this,c.default),(0,o.default)(this,(0,d.getMiddleEndApi)().getApiList()),(0,o.default)(this,l.verification.getApiList()),(0,o.default)(this,(0,f.getAccountApi)().getApiList()),(0,o.default)(this,(0,p.getUportalApi)().getApiList())}},118:function(e,t,r){e.exports=r(0)(0)},119:function(e,t,r){e.exports={default:r(145),__esModule:!0}},120:function(e,t,r){e.exports=r(0)(45)},121:function(e,t,r){e.exports=r(0)(47)},123:function(e,t,r){e.exports=r(0)(562)},126:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=coreCommonComponent.Icon,a=n.iconSizeMap,o=n.iconColorMap,i=n.iconHoverMap,s=n.iconTypeMap;t.default=n,t.iconSizeMap=a,t.iconColorMap=o,t.iconHoverMap=i,t.iconTypeMap=s},127:function(e,t,r){e.exports=r(0)(57)},129:function(e,t,r){"use strict";t.__esModule=!0;var n=r(143),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,a.default)(e)}},130:function(e,t,r){e.exports=r(0)(238)},131:function(e,t,r){"use strict";(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return i(this,e,t,r)}function i(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,r,n):"string"==typeof t?d(e,t,r):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return s(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}function c(e,t){if(s(t),e=a(e,t<0?0:0|_(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|w(t,r);e=a(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function l(e,t){var r=t.length<0?0:0|_(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function f(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=l(e,t),e}function p(e,t){if(o.isBuffer(t)){var r=0|_(t.length);return e=a(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?a(e,0):l(e,t);if("Buffer"===t.type&&Q(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function w(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(n)return K(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return x(this,t,r);case"latin1":case"binary":return b(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function E(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function h(e,t,r,n,a){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:I(e,t,r,n,a);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):I(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function I(e,t,r,n,a){function o(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}var i=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,s/=2,u/=2,r/=2}var c;if(a){var d=-1;for(c=r;c<s;c++)if(o(e,c)===o(t,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===u)return d*i}else-1!==d&&(c-=c-d),d=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var l=!0,f=0;f<u;f++)if(o(e,c+f)!==o(t,f)){l=!1;break}if(l)return c}return-1}function m(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[r+i]=s}return i}function L(e,t,r,n){return $(K(t,e.length-r),e,r,n)}function C(e,t,r,n){return $(Y(t),e,r,n)}function T(e,t,r,n){return C(e,t,r,n)}function N(e,t,r,n){return $(j(t),e,r,n)}function S(e,t,r,n){return $(q(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?z.fromByteArray(e):z.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var o=e[a],i=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s<=r){var u,c,d,l;switch(s){case 1:o<128&&(i=o);break;case 2:u=e[a+1],128==(192&u)&&(l=(31&o)<<6|63&u)>127&&(i=l);break;case 3:u=e[a+1],c=e[a+2],128==(192&u)&&128==(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:u=e[a+1],c=e[a+2],d=e[a+3],128==(192&u)&&128==(192&c)&&128==(192&d)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&d)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),a+=s}return y(n)}function y(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function b(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",o=t;o<r;++o)a+=V(e[o]);return a}function k(e,t,r){for(var n=e.slice(t,r),a="",o=0;o<n.length;o+=2)a+=String.fromCharCode(n[o]+256*n[o+1]);return a}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,a,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-r,2);a<o;++a)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function G(e,t,r,n){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-r,4);a<o;++a)e[r+a]=t>>>8*(n?a:3-a)&255}function D(e,t,r,n,a,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,a){return a||D(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,a){return a||D(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function W(e){if(e=H(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||1/0;for(var r,n=e.length,a=null,o=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&o.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function q(e,t){for(var r,n,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,a=r%256,o.push(a),o.push(n);return o}function j(e){return z.toByteArray(W(e))}function $(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function X(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var z=r(224),J=r(225),Q=r(210);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return i(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return u(null,e,t,r)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var i=e[r];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a),a+=i.length}return n},o.byteLength=w,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,a){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;for(var i=a-n,s=r-t,u=Math.min(i,s),c=this.slice(n,a),d=e.slice(t,r),l=0;l<u;++l)if(c[l]!==d[l]){i=c[l],s=d[l];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return h(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return h(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,e,t,r);case"utf8":case"utf-8":return L(this,e,t,r);case"ascii":return C(this,e,t,r);case"latin1":case"binary":return T(this,e,t,r);case"base64":return N(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var a=t-e;n=new o(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],a=1,o=0;++o<t&&(a*=256);)n+=this[e+o]*a;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},o.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],a=1,o=0;++o<t&&(a*=256);)n+=this[e+o]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=t,a=1,o=this[e+--n];n>0&&(a*=256);)o+=this[e+--n]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var o=r-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a,i=n-r;if(this===e&&r<t&&t<n)for(a=i-1;a>=0;--a)e[a+t]=this[a+r];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=o.isBuffer(e)?e:K(new o(e,n).toString()),u=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(139))},132:function(e,t,r){e.exports=r(0)(620)},135:function(e,t,r){e.exports={default:r(150),__esModule:!0}},136:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.resetMyInfo=t.getMyInfo=t.UErrorCode=t.LoginInfo=t.LoginError=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.ErrorType=t.EAErrorCode=t.registerLoginEvent=void 0;var a=r(164),o=n(a),i=r(272),s=n(i);t.registerLoginEvent=o.UErrorCode,t.EAErrorCode=o.EAErrorCode,t.ErrorType=o.ErrorType,t.getLoginModel=o.getLoginModel,t.getSyncLoginModel=o.getSyncLoginModel,t.resetLoginModel=o.resetLoginModel,t.LoginError=o.LoginError,t.LoginInfo=o.LoginInfo,t.UErrorCode=o.UErrorCode,t.getMyInfo=s.getMyInfo,t.resetMyInfo=s.resetMyInfo},137:function(e,t,r){var n=r(10),a=r(8),o=r(138);e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",i)}},138:function(e,t,r){e.exports=r(0)(59)},139:function(e,t,r){e.exports=r(0)(86)},141:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(170),o=n(a),i=r(135),s=n(i);t.default=function(){function e(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=(0,s.default)(e);!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},142:function(e,t,r){e.exports=r(0)(84)},143:function(e,t,r){e.exports={default:r(158),__esModule:!0}},145:function(e,t,r){r(146),e.exports=r(8).Object.getPrototypeOf},146:function(e,t,r){var n=r(130),a=r(147);r(137)("getPrototypeOf",function(){return function(e){return a(n(e))}})},147:function(e,t,r){e.exports=r(0)(585)},150:function(e,t,r){r(23),r(22),e.exports=r(151)},151:function(e,t,r){var n=r(9),a=r(26);e.exports=r(8).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},158:function(e,t,r){r(22),r(159),e.exports=r(8).Array.from},159:function(e,t,r){"use strict";var n=r(11),a=r(10),o=r(130),i=r(32),s=r(33),u=r(27),c=r(160),d=r(26);a(a.S+a.F*!r(34)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,l,f=o(e),p="function"==typeof this?this:Array,_=arguments.length,g=_>1?arguments[1]:void 0,w=void 0!==g,v=0,E=d(f);if(w&&(g=n(g,_>2?arguments[2]:void 0,2)),void 0==E||p==Array&&s(E))for(t=u(f.length),r=new p(t);t>v;v++)c(r,v,w?g(f[v],v):f[v]);else for(l=E.call(f),r=new p;!(a=l.next()).done;v++)c(r,v,w?i(l,g,[a.value,v],!0):a.value);return r.length=v,r}})},160:function(e,t,r){"use strict";var n=r(25),a=r(161);e.exports=function(e,t,r){t in e?n.f(e,t,a(0,r)):e[t]=r}},161:function(e,t,r){e.exports=r(0)(79)},164:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return w.default.reject(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginInfo=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.ErrorType=t.ErrorCode=t.EAErrorCode=t.UErrorCode=void 0;var o=r(119),i=n(o),s=r(4),u=n(s),c=r(5),d=n(c),l=r(120),f=n(l),p=r(121),_=n(p),g=r(3),w=n(g),v=r(1),E=n(v),h=r(2),I=n(h);t.LoginError=a;var m=(t.UErrorCode=constant.UPORTAL_LOGIN_ERROR,t.EAErrorCode=constant.EADDR_LOGIN_ERROR,t.ErrorCode=constant.LOGIN_COMMON_ERROR,t.ErrorType=constant.LOGIN_ERROR_TYPE,coreLogger.getLogger("logic")("login/model/login")),L=void 0,C=(t.getLoginModel=function(){var e=(0,I.default)(E.default.mark(function e(){return E.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L||(L=new T(C)),e.abrupt("return",L);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getSyncLoginModel=function(){return L||(L=new T(C)),L},t.resetLoginModel=function(){L=null,m.info("<account_login>12_reset_loginmodel")},{shouldExitApp:"true",displayAccount:"",account:"",tenantid:"",verificationNumber:"",verificationCode:"",loadPwd:!1,folder:!0,showPwd:!1,showLangSet:!1,isSaveLangChange:!1,oldLangCode:"",isSaveAddress:!1,middleEndAddress:"",serverAddress:"",serverPort:"",_serverUportalAddress:"",_serverUportalPort:"",uportalLoginState:0,sipRegisterState:0,authToken:"",isRememberPassword:window.CLIENTCONFIG.ISMOBILE,isAutoLogin:!1,loginHistoryList:[],loginRecordList:[],isLoading:!1,loginDisable:!1,logoutDisable:!1,isCapslock:!1,isOffline:!1,passwordType:"",eabUri:"",groupServer:"",sipUri:"",svnUri:"",currentNum:0,mainSiteSum:0,httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,isFreeUser:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerLocal:"",sipServerPortLocal:0,eServerAddressAll:"",eServerAddress:"",eServerPort:0,socketMode:0,isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1,maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",shouldBuildStg:!1,isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,appstate:constant.APP_STATE.DISCONNECTED,funcType:0,deployMode:0,lastDeployMode:0,tmsServer:"",tmsAccount:"",tmsPwd:"",sipLoginOnly:!1,sipLoginissiptls:0,sipLoginissrtp:1,pushgwUri:"",sipOnlyType:0,isMultiDeviceLogined:!1,switchAccount:{},tempsipinfo:{},tempConfInfo:{},tempsipserverAddress:"",tempsipserverPort:"",tempMediaxAddress:"",tempMediaxPort:"",tempNoNameMediaxAddress:"",tempNoNameMediaxPort:"",tempSipAccount:"",tempSipNick:"",tempsipPassword:"",tempsipGetState:0,sipOnlyurlInfo:{},isSupportCACertCheck:!0,isShowShareRecommendationCircle:!0,sipTransMode:0,sipWhiteList:null,srtpMode:0,smcUri:"",certificateUrl:"",keysUrl:"",certificateName:"",selectCertificate:!0,mProveUrl:"",mkeysUrl:"",mProveName:"",mSelectProve:!0,mZipUrl:"",isIwb:!1,maxhubLoginError:{},euaServer:"",whetherInLoginRecordList:!1,showPullRecordList:!1,isCloudec:!1,isOAuth:!1,OAuthUrl:"",OAuthAccountUrl:"",changeItPasswordUrl:"",FrogetPwdUrl:"",FrogetPwdUrlPort:0,isFrogetRedriect:!1,forgetPwdAccount:"",sysProxyAddress:"",sysProxyPort:0,isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:"",proxyPort:"",proxyAccount:"",proxyPassword:"",real_user_account:"",itOAuthUrl:"",itSignedUrl:"",itUploadHeadImgUrl:"",isPortalUpgrade:!1,isWaitUpgrade:!1,isPortalAfterCallUpgrade:!1,progressPercent:-1,isUpdateError:!1,whatsNewCHN:"",whatsNewENG:"",showContentType:0,isForceUpdate:!1,downloadVersion:"",downloadUrl:"",isReqAddrChanged:!1,isSupportAS:!1,show_account:"",curPortalState:0,manMachineCode:{},isUserClickUploadComplaints:!1,canRecordConf:!1,ctdServerUri:"",confctrlUri:"",ssoLoginTypeCheckedValue:0,authType:0}),T=t.LoginInfo=function(e){function t(e){var r=this;(0,u.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.hasLoginCanceled=!1,n.useSip=!0,n.useEsight=!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,n.checkSipState=(0,I.default)(E.default.mark(function e(){var t;return E.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isSipRegSuc()){e.next=2;break}return e.abrupt("return");case 2:return t=n,m.info("checkSipState: sip is not registered."),n.prepareSipForCallOrConf=!0,e.abrupt("return",new w.default(function(e){var r=5,n=setInterval(function(){(r<1||t.isSipRegSuc())&&(t.prepareSipForCallOrConf=!1,clearInterval(n),e()),r-=1,m.info("checkSipState: retry: "+(5-r))},1e3)}));case 6:case"end":return e.stop()}},e,r)})),n}return(0,_.default)(t,e),(0,d.default)(t,[{key:"notifyChanged",value:function(e){coreCommon.dispatchModuleEvent("login_model",e)}},{key:"isSipRegSuc",value:function(){return this.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED}},{key:"setLoginStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];m.info("[ setLoginStatus ] flag:",e,", result:",t,", isResume:",this.isResume);var r=void 0;e?r=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECTING:!0===t?r=constant.APP_STATE.ONLINE:!1===t&&(r=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECT_FAILED),this.set({loginDisable:e,appstate:r})}},{key:"setAppState",value:function(e){m.info("[ appstate ]",e),this.appstate=e}},{key:"getstate",value:function(e){return e?$getState().login[e]:$getState().login}},{key:"clearInLoginState",value:function(){this.set({isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1})}},{key:"update",value:function(e){this.dispatch(e)}},{key:"clearPassword",value:function(){this.password="",this.proxyPassword="",this.sipPassword=""}},{key:"serverUportalAddress",get:function(){return this._serverUportalAddress||this.serverAddress},set:function(e){this._serverUportalAddress=e}},{key:"serverUportalPort",get:function(){return this._serverUportalPort||this.serverPort},set:function(e){this._serverUportalPort=e}},{key:"loginType",get:function(){return window.SERVERCONFIG.HWUC},set:function(e){window.SERVERCONFIG.HWUC=e}},{key:"isMobile",get:function(){return window.CLIENTCONFIG.ISMOBILE},set:function(e){window.CLIENTCONFIG.ISMOBILE=e}},{key:"isHWUC",get:function(){return window.SERVERCONFIG.HWUC===constant.LOGIN_TYPE.HWUC},set:function(e){}},{key:"useIM",get:function(){return!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&window.CLIENTCONFIG.USE_IM},set:function(e){window.CLIENTCONFIG.USE_IM=e}},{key:"useMetting",get:function(){return window.CLIENTCONFIG.USE_MEETING},set:function(e){window.CLIENTCONFIG.USE_MEETING=e}},{key:"useEab",get:function(){return window.SERVERCONFIG.HWUC!==constant.LOGIN_TYPE.HWUC&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&!this.sipLoginOnly},set:function(e){}},{key:"asAddress",get:function(){return $getState().conf.asAddress}},{key:"OAuthClinetID",get:function(){return window.CLIENTCONFIG.IT_WELINK_CLIENT_ID},set:function(e){window.CLIENTCONFIG.IT_WELINK_CLIENT_ID=e}},{key:"defaultRoute",get:function(){if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)return"callMain";var e="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME;return $getState().menu.menuList&&$getState().menu.menuList instanceof Array&&$getState().menu.menuList[0]?!e&&$getState().menu.menuList.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+$getState().menu.menuList[0]:window.CLIENTCONFIG.MOBILE_MENU_LIST&&window.CLIENTCONFIG.MOBILE_MENU_LIST instanceof Array&&window.CLIENTCONFIG.MOBILE_MENU_LIST[0]?!e&&window.CLIENTCONFIG.MOBILE_MENU_LIST.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+window.CLIENTCONFIG.MOBILE_MENU_LIST[0]:e?"main/"+window.navMobileConfiglist[0].route:"main/"+window.navMobileConfiglist[1].route},set:function(e){}}]),t}(coreCommon.ModuleCache)},1644:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=r(1),o=n(a),i=r(69),s=n(i),u=r(2),c=n(u),d=function(){var e=(0,c.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.event,e.next="eserver"===e.t0?3:"total"===e.t0?15:30;break;case 3:if(e.prev=3,!window.CLIENTCONFIG.ISMOBILE){e.next=7;break}return e.next=7,h();case 7:return e.next=9,(0,v.makeLoginCancelable)(I(),"loadEserverSignature",constant.LOGIN_PROMISE_KEY.sip_login);case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(3),E.info("<account_login>10_end "+(0,s.default)(e.t1));case 14:return e.abrupt("break",31);case 15:return e.prev=15,e.next=18,(0,p.getLoginModel)();case 18:if(r=e.sent,r.useIM&&window.CLIENTCONFIG.ISMOBILE){e.next=22;break}return e.next=22,h();case 22:return e.next=24,(0,v.makeLoginCancelable)((0,_.loadMyInfo)(r.account),"loadMyInfo",constant.LOGIN_PROMISE_KEY.sip_login);case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(15),E.info("<account_login>10_end "+(0,s.default)(e.t2));case 29:case 30:return e.abrupt("break",31);case 31:case"end":return e.stop()}},e,this,[[3,11],[15,26]])}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.ENABLE_IT_MEETING||!window.sipUseByOther){e.next=8;break}window.sipUseByOther=!1,E.info("[ initSipService ] cur user sip kick by other mobile."),e.next=22;break;case 8:if(!t.useSip||t.isMultiDeviceLogined&&t.isMobile){e.next=19;break}if(t.isResume){e.next=15;break}return E.info("[ initSipService ]",handlePhoneNumber(t.account)),e.next=13,(0,g.sipLoginAtomic)(!0).then(function(){E.info("[ initSipService ] ok! ",handlePhoneNumber(t.account)),window.CLIENTCONFIG.ENABLE_IT_MEETING||(window.isHubEnv?(coreConf.initTupPairServer(),window.maxhubShareAppParam=null):window.CLIENTCONFIG.ISBIGWIN||coreConf.initTupPairClient())});case 13:e.next=17;break;case 15:return e.next=17,(0,w.sipResume)();case 17:e.next=22;break;case 19:E.info("[ initSipService ] end login:"),t.setLoginStatus(!1,!0),coreCommon.dispatchModuleEvent("sipMultiDeviceLogined");case 22:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=44;break}if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=31;break}return e.next=26,window.getMeetingDomain();case 26:return r=e.sent,e.next=29,window.parserIPAddress(r);case 29:n=e.sent,n?coreDb.saveLoginSetting({key:r,value:n}):E.info("get host name ip fail");case 31:if(coreConf.getRegisterConfEventAtomic().wait(),!t.useMetting||t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED){e.next=35;break}return e.next=35,coreConf.initializeDataConf();case 35:if(window.confCtrlLoaded){e.next=38;break}return e.next=38,coreConf.confctrlInit();case 38:if(a=$getState().login.sipLoginOnly,a||window.CLIENTCONFIG.ISBIGWIN||coreConf.getVRMList(),isNullOrEmpty(window.handleJoinTempConfNoNameURL)){e.next=44;break}return e.next=43,window.handleJoinTempConfNoName(window.handleJoinTempConfNoNameURL);case 43:window.handleJoinTempConfNoNameURL=null;case 44:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getLoginModel)();case 2:if(t=e.sent,!t.useEab){e.next=9;break}return E.info("[ prepareEabService ]",handlePhoneNumber(t.account)),e.next=7,(0,_.checkLocalHasMyinfo)();case 7:r=e.sent,E.info("[ prepareEabService ] ok! local has last myinfo copy:",r);case 9:return e.abrupt("return",0);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),p=r(136),_=r(312),g=r(288),w=r(221),v=r(241),E=coreLogger.getLogger("account")("moduleMessager");coreCommon.registeModuleListener("login",d);var h=function(){return(0,v.makeLoginCancelable)(f(),"prepareEabService",constant.LOGIN_PROMISE_KEY.sip_login).then(function(){(0,v.makeLoginCancelable)(l(),"initSipService",constant.LOGIN_PROMISE_KEY.sip_login)})},I=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("start loadEserverSignature upon eserver login event"),e.next=3,(0,p.getLoginModel)();case 3:if(t=e.sent,r=t.isSupportAS){e.next=9;break}return e.next=8,(0,_.loadEserverSignature)(t.account);case 8:return e.abrupt("return",e.sent);case 9:E.info("isSupportAS is true, do not load sig-nature from eserver");case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},1645:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.verification=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(119),c=n(u),d=r(4),l=n(d),f=r(120),p=n(f),_=r(121),g=n(_),w=r(195),v=r(1646),E=n(v),h=coreLogger.getLogger("login")("IDVerification"),I=function(e){function t(){var e,r,n,a,i=this;(0,l.default)(this,t);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(d))),n.dealWithVerificationInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,s,u,c,d,l,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("The user lists length",t.length),!(t.length<=0)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,w.getLoginModel)();case 5:r=e.sent,n=r.loginRecordList,n=n.slice(0),a=0;case 9:if(!(a<n.length)){e.next=16;break}return s=n[a].account,e.next=13,coreAccount.deleteLoginInfo(s);case 13:a++,e.next=9;break;case 16:for(u=[],c=[],d=0;d<t.length;d++)l=t[d],f={account:l.welinkAccount||l.loginName,display_account:l.loginName,tenantcn:l.tenantCn,tenanten:l.tenantEn,thirdaccount:l.loginName,tenantid:l.tenantId,thirdcertype:l.thirdCerType,time_stamp:(new Date).getTime()},u.push(f),c.push(f.display_account),coreDb.saveLoginRecord(f);coreAccount.showLoginInfo({loginInfo:u[0],loginHistoryList:c,loginRecordList:u});case 19:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.startCountdown=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.callback;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.currentCount=t,n.callback=a,n.timer&&clearInterval(n.timer),n.timer=setInterval(function(){n.currentCount>0?(n.currentCount--,n.callback&&n.callback(n.currentCount)):(clearInterval(n.timer),n.timer=null)},r);case 4:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.setCountdownCallback=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.callback=t,e.abrupt("return",n.currentCount);case 2:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.resetCountdown=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.currentCount=0,n.callback=null,n.timer&&clearInterval(n.timer);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(E.default);t.verification=new I},1646:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(119),c=n(u),d=r(4),l=n(d),f=r(120),p=n(f),_=r(121),g=n(_),w=function(e){function t(){var e,r,n,a,i=this;(0,l.default)(this,t);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(d))),n.dealWithVerificationInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.startCountdown=function(){var e=(0,s.default)(o.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.callback;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.setCountdownCallback=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.resetCountdown=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=w},1647:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AccountImpl=t.getAccountApi=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(119),c=n(u),d=r(4),l=n(d),f=r(120),p=n(f),_=r(121),g=n(_),w=r(136),v=r(291),E=r(220),h=r(195),I=r(241),m=r(166),L=r(211),C=r(221),T=r(312),N=r(290),S=r(293),O=r(359),R=r(229),y=r(360),x=r(195),b=r(230),A=r(1648),k=r(292),P=r(362),M=r(289),U=r(312),G=r(363),D=r(364),F=r(1649),B=n(F),W=r(166),H=void 0,V=(t.getAccountApi=function(){return isNullOrEmpty(H)&&(H=new V),H},t.AccountImpl=function(e){function t(){var e,r,n,a,i=this;(0,l.default)(this,t);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(d))),n.initCallLog=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=7;break}return e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,r={log_path:window.LOG_PATH,enable_json_log:window.CLIENTCONFIG.TUP_ENABLE_JSON_LOG||0},e.next=7,t.config(r);case 7:case"end":return e.stop()}},e,i)})),n.getLoginModel=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getSyncLoginModel=function(){return(0,w.getSyncLoginModel)()},n.getMyInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getMyInfo)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getLocalDNSIp=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.domain;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getLocalDNSIp)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.getNickName=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.getNickName)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.noLoginJoinConference=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.noLoginJoinConference)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.login=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.isResume,n=void 0!==r&&r,a=t.isTempLogin,s=void 0!==a&&a,u=t.desc,c=void 0===u?"":u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.login)(n,s,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.makeLoginCancelable=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.promise,n=t.name,a=t.loginPromiseKey,s=void 0===a?constant.LOGIN_PROMISE_KEY.main_login:a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.makeLoginCancelable)(r,n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.cancelLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.cancelLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.sipResume=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.forceInitRetryTime,n=void 0===r||r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.sipResume)(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.deleteLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.deleteLoginInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.showLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.loginInfo,n=t.loginHistoryList,a=t.loginRecordList;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.showLoginInfo)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.showUpdateHintsOrBar=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.showUpdateHintsOrBar)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.checkUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.isFirstIn,n=void 0!==r&&r,a=t.token,s=void 0===a?"":a,u=t.userAccount,c=void 0===u?"":u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.checkUpgrade)(n,s,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.publishStatus=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.status,n=t.desc,a=void 0===n?"":n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.publishStatus)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.registerResumeEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.registerResumeEvent)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearResumeService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.clearResumeService)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.reStartUpgrade=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.reStartUpgrade)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.checkAndEndCall=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.checkAndEndCall)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.setOffline=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.cancelAutoLogin,n=void 0!==r&&r,a=t.shouldUninitDb,s=void 0!==a&&a,u=t.isShowAlert,c=void 0===u||u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.setOffline)(n,s,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.changeAutoLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.changeAutoLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearState=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.clearState)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.meetinghwSipEnableToLogout=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.meetinghwSipEnableToLogout)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.resetSipResumeFlag=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.resetSipResumeFlag)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.actionRefreshToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.actionRefreshToken)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.initLoginInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.initLoginInfo)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.recoverAppCache=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.recoverAppCache)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.resume=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.reloadTup,n=void 0!==r&&r,a=t.message;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.resume)({reloadTup:n,message:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.stopSipRefresh=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.stopSipRefresh)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.startSipRefresh=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.startSipRefresh)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.updateCurUser=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.name;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.updateCurUser)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.verificationCertificateLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.url;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.verificationCertificateLogic)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.initImportCertificate=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.initImportCertificate)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.setInitSelectCertificateLogic=function(){var e=(0,s.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.setInitSelectCertificateLogic)(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),n.dbInitCertificateLogic=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.dbInitCertificateLogic)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.recordPrivacy=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.oprEvent,n=t.privacyver,a=t.chrtype;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.recordPrivacy)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.sipserverDeregister=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.sipserverDeregister)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearnsipinfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.clearnsipinfo)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.stopResume=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.stopResume)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.logout=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.isBackLogin,n=void 0===r||r,a=t.isKickout,s=void 0!==a&&a,u=t.isClearLoginRecord,c=void 0===u||u,d=t.teModeMark,l=void 0!==d&&d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.logout)(n,s,c,l);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.queryMediaXaddrFromServer=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.uportalService,n=t.is_cms_addr;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.queryMediaXaddrFromServer)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.registerLoginEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.registerLoginEvent)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getResumeEnable=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getResumeEnable)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.updateTempSipNick=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.name;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.updateTempSipNick)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.endCurrentCall=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.endCurrentCall)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.deRegisterService=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.shouldUninitDb,n=void 0===r||r,a=t.teModeMark,s=void 0!==a&&a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.deRegisterService)(n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.get=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.key,n=t.isPublic;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.get)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.set=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.key,n=t.value,a=t.isPublic;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.set)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.remove=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.key,n=t.isPublic;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.remove)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.doLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.doLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.setIsCACertCheckSupport=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.setIsCACertCheckSupport)(t));case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.updateTempSipAccount=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.updateTempSipAccount)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.updateTempSipPwd=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.data;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.updateTempSipPwd)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setServerAddress=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.serverAddress,n=t.serverPort,a=t.middleEndAddress;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.setServerAddress)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.buildStgTunnel=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.stgUri,n=t.stgAccount,a=t.stgPassword;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.buildStgTunnel)({stgUri:r,stgAccount:n,stgPassword:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.initVideoHardCodeParam=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.initVideoHardCodeParam)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.configBFCPForTLS=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.bForceTLSMode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.configBFCPForTLS)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.configRTP=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.configRTP)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.initVideoSettingParam=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.initVideoSettingParam)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.configBFCP=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.configBFCP)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.doSipResumeAndEserverDetect=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.message;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.doSipResumeAndEserverDetect)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.refreshIsMultiDeviceLogined=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.bMultiDeviceLogined;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.refreshIsMultiDeviceLogined)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.handleMultiDeviceMsg=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.handleMultiDeviceMsg)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setLocalOfflineStatus=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.setLocalOfflineStatus)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getOAuthTicket=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getOAuthTicket)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.unRegisterPush=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.isOperate;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.unRegisterPush)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.configMKI=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.configMKI)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.configSessionTimer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.configSessionTimer)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.configBandwidthLimit=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.configBandwidthLimit)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.hideProgressBarModal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.hideProgressBarModal)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clickConfirmUpdate=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.clickConfirmUpdate)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.inputValueChange=function(e){var t=e.type,r=e.event;return(0,P.inputValueChange)(t,r)},n.getErrorTips=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.server,n=t.errorCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.getErrorTips)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.handleKickPcSuc=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.handleKickPcSuc)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.saveNickName=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.data;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.saveNickName)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.iosCursorDeal=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.event;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.iosCursorDeal)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.firstTimeLoginChangePassword=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.account,n=t.oldPassword,a=t.newPassword;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.firstTimeLoginChangePassword)(r,n,a));case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setMSelectItLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.selectProve;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.setMSelectItLogic)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.clearImptZipUrlDataLogic=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.clearImptZipUrlDataLogic)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.mobileImptProveLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.pwd,n=t.mProveUrl,a=t.mkeysUrl;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.mobileImptProveLogic)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.setLoginInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.openInAppBrowserMobile=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.url,n=void 0===r?"":r,a=t.opts,s=void 0===a?"register":a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.openInAppBrowserMobile)(n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.changeLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.changeLoginInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setTempMediaxInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.setTempMediaxInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setProxyInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.setProxyInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.selectAccount=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.selectAccount)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.ipLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.ipLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.updateTempSipGetState=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.updateTempSipGetState)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.dealUpdateVersionClickEx=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.dealUpdateVersionClickEx)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearBarPageSet=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.clearBarPageSet)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.changeLoginPassword=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.account,n=t.oldPass,a=t.newPass;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.changeLoginPassword)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.checkBeforeLogout=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.type,n=t.isLogout,a=void 0===n||n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.checkBeforeLogout)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.SaveSigInfoAndQuit=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.SaveSigInfoAndQuit)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.initNetDetect=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.initNetDetect)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getCaptchaAndSetUi=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getCaptchaAndSetUi)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setImportCertificate=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.setImportCertificate)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.hideServerAddress=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.hideServerAddress)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getCloseAppWays=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getCloseAppWays)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.setCertificateCheckLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.setCertificateCheckLogic)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.getVerifyCodeAndSetUi=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.user,n=t.token;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getVerifyCodeAndSetUi)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.sendCaptchaResultAndSetUi=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.user,n=t.token,a=t.pointX,s=t.slideTime,u=t.shadowImage,c=t.cutImage,d=t.oldPointY;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.sendCaptchaResultAndSetUi)(r,n,a,s,u,c,d);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.updateTempMediaxAddress=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.updateTempMediaxAddress)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.updateTempMediaxPort=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.updateTempMediaxPort)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.valueChange=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.type,n=t.value;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.valueChange)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.addKeyDownListener=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.addKeyDownListener)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.isAccountAutoLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.isAccountAutoLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.initPcFirstPage=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.initPcFirstPage)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.actionGetUploadInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.fileName,n=t.fileType;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.actionGetUploadInfo)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.configHMELog=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.configHMELog)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.queryUserAccount=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.userAccount;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.queryUserAccount)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.verifyVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.userAccount,n=t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.verifyVerificationCode)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.frogetPassword=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.userAccount,n=t.newPassword,a=t.passwordType,s=t.languageType,u=t.tokenInfo;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.frogetPassword)(r,n,a,s,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.requestVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.userAccount,n=t.sendMode,a=t.languageType;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.requestVerificationCode)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.isInLoginRecordList=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.displayaccount;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.isInLoginRecordList)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.removeKeyDownListener=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.removeKeyDownListener)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getLinkSSOLoginService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new B.default);case 1:case"end":return e.stop()}},e,i)})),n.settingPageSetLoginRecord=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.settingPageSetLoginRecord)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.forgetPwd=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.forgetPwd)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.saveUserInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.saveUserInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.hideImportCertificateModal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.hideImportCertificateModal)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearSelectCertificateOrkeysLogic=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.clearSelectCertificateOrkeysLogic)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.saveImportCertificateLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.certificateUrl,n=t.keysUrl,a=t.pwd;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.saveImportCertificateLogic)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.saveBeforeLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.certificateUrl,n=void 0===r?"":r,a=t.keysUrl,s=void 0===a?"":a,u=t.inputDom;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.saveBeforeLogic)(n,s,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.uploadCertificateFile=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.type;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,W.uploadCertificateFile)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.handleClearData=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.handleClearData)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.startDetect=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.startDetect)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.stopDetect=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.isTimeout,n=void 0!==r&&r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.stopDetect)(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.showImportCertificateContact=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.content,n=t.isShowModalMask,a=void 0===n||n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.showImportCertificateContact)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.checkOffLineIsInCall=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.checkOffLineIsInCall)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getCorpResource=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.actionGetCorpResourceAtomic.wait();case 2:return e.next=4,(0,w.getLoginModel)();case 4:return t=e.sent,e.abrupt("return",t.canRecordConf);case 6:case"end":return e.stop()}},e,i)})),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(coreLazyLoad.AccountApi))},1648:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleRefreshTokenSuc=t.handleKickPcSuc=t.handleMultiDeviceMsg=t.refreshIsMultiDeviceLogined=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(220),c=r(185),d=r(136),l=coreLogger.getLogger("logic")("login/bridge"),f=t.refreshIsMultiDeviceLogined=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.info("refreshIsMultiDeviceLogined ","bMultiDeviceLogined:"+t),(0,d.getLoginModel)().then(function(e){e.isMultiDeviceLogined=t});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.handleMultiDeviceMsg=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("handleMultiDeviceMsg"),window.CLIENTCONFIG.ISMOBILE){e.next=4;break}return l.debug("no deal"),e.abrupt("return");case 4:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=7;break}return l.info("it welink no deal"),e.abrupt("return");case 7:return e.next=9,(0,d.getMyInfo)();case 9:return r=e.sent,n=r.account,e.next=13,(0,d.getLoginModel)();case 13:if(a=e.sent,i=a.isMultiDeviceLogined,t.param.user!==n){e.next=29;break}if(1!==t.param.event_type){e.next=22;break}return e.next=19,f(!0);case 19:(0,u.dealPcLogin)(),e.next=29;break;case 22:if(i){e.next=25;break}return l.info("not multi devices, return"),e.abrupt("return");case 25:return e.next=27,f(!1);case 27:return e.next=29,(0,u.dealPcLogout)();case 29:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.refreshRegister=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.sipUseByOther=!1,e.next=3,(0,c.registerResumeEvent)();case 3:(0,u.dealPcLogout)();case 4:case"end":return e.stop()}},e,void 0)})),window.stopRegister=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,u.sipserverDeregister)(),l.info("stopRegister, set isOffline true"),window.isOffline=!0;case 3:case"end":return e.stop()}},e,void 0)}));t.handleKickPcSuc=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("handleKickPcSuc"),e.next=3,(0,d.getLoginModel)();case 3:if(t=e.sent,window.CLIENTCONFIG.ISMOBILE){e.next=7;break}return l.debug("no deal"),e.abrupt("return");case 7:if(r=t.isMultiDeviceLogined){e.next=11;break}return l.info("not multi devices, return"),e.abrupt("return");case 11:return e.next=13,f(!1);case 13:return e.next=15,(0,u.dealPcLogout)();case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handleRefreshTokenSuc=function(){coreCall.callAfterPCKickout()}},1649:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(4),c=n(u),d=coreLogger.getLogger("LOGIN")("LINKLOGIN"),l=null,f=function e(){var t=this;return(0,c.default)(this,e),this.init=function(){d.info("link sso login init"),window.handleSSOLoginByLink=t.handleSSOLoginByLink},this.handleSSOLoginUrl=function(){var e=(0,s.default)(o.default.mark(function e(r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d.info("handleSSOLoginUrl"),t.handleSSOLoginByLink(r);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleSSOLoginByLink=function(e){if(d.info("handleSSOLoginByLink"),isNullOrEmpty(e))return void d.error("handleSSOLoginUrl error: url is null");t.checkSSOLoginByLink(e)},this.checkSSOLoginByLink=function(){var e=(0,s.default)(o.default.mark(function e(r){var n,a,i,s,u,c,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("checkSSOLoginByLink"),!t.checkHasProvicyPageShow()){e.next=4;break}return d.info("checkProvicyPageShow"),e.abrupt("return");case 4:t.checkHasUportalLogin()?(d.info("uportal has login"),window.alert(language.HAS_ACCOUNT_LOGINING)):(d.info("no account login"),n=coreCommon.getUrlVars(r),a=n.server_url,i=void 0===a?"cloudec.huawei.com":a,s=n.port,u=void 0===s?"8443":s,c=n.domain,l=n.code,coreAccount.oAuthLogin({serverAddress:i,serverPort:u,userTicket:l,domain:c}));case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.checkHasProvicyPageShow=function(){var e=window.localStorage.getItem("isFirstInstall");return window.CLIENTCONFIG.PRIVACY_VERSION_VALUE!==e&&!window.CLIENTCONFIG.ENABLE_IT_MEETING&&(d.info("[checkProvicyPageShow] local has First install before license, enter conf after access license"),!0)},this.checkHasUportalLogin=function(){var e=$getState(),t=e.login.uportalLoginState;return constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS===t},l||(l=this,this.url=null,this.init()),l};t.default=f},166:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){window.InAppBrowserRef.executeScript({code:'document.body.style.overflow="hidden"'}),/.*inappbrowserref_close_url.*/.test(e.url)&&(L.info("openInAppBrowserMobile close_url"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i)),/.*inappbrowserref_success_url.*/.test(e.url)&&(window.InAppBrowserRef.close(),window.alertRegisterSuccess("REGISTER_TITLE"),L.info("register account success"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i))}function o(e){window.InAppBrowserRef.executeScript({code:'document.body.style.overflow="hidden"'}),/.*inappbrowserref_close_url.*/.test(e.url)&&(L.info("openInAppBrowserMobile close_url"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i)),/.*inappbrowserref_success_url.*/.test(e.url)&&(window.InAppBrowserRef.close(),window.ToastNew(language.CHANGE_PASSWORD_SUCCESS_FIRST,2),L.info("change [password] success"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i))}function i(){S({loadPwd:!1}),alert(language.LOGIN_RESUME_NETWORK_ERROR),L.info("openInAppBrowserMobile loaderror"),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i),window.InAppBrowserRef.close()}function s(){window.InAppBrowserRef.show(),window.setTimeout(function(){return S({loadPwd:!1})},500),clearTimeout(window.openBrowerTimer)}Object.defineProperty(t,"__esModule",{value:!0}),t.initPcFirstPage=t.isAccountAutoLogin=t.isPcFirstInstall=t.isInLoginRecordList=t.initMImportCertificate=t.clearImptZipUrlDataLogic=t.cancelImpSelectDone=t.mobileImptProveLogic=t.setMSelectItLogic=t.setMProveNameAndSelectItLogic=t.setMSaveZipUrlLogic=t.setMProveAndKeyLogic=t.probeImportCertificateLogic=t.loginforverificationCertificateLogic=t.dbInitCertificateLogic=t.verificationCertificateLogic=t.setInitSelectCertificateLogic=t.initImportCertificate=t.setImportCertificate=t.setCertificateCheckLogic=t.saveSelectCertificateNameLogic=t.saveBeforeLogic=t.saveImportCertificateLogic=t.clearSelectCertificateOrkeysLogic=t.updateKeysUrlLogic=t.updateCertificateUrlLogic=t.uploadCertificateFile=t.hideImportCertificateModal=t.showImportCertificateContact=t.changeAutoLogin=t.deleteLoginPwd=t.deleteLoginInfo=t.setProxyInfo=t.setTempProxyInfo=t.setTempMediaxInfo=t.setServerAddress=t.setIsCACertCheckSupport=t.changeLoginInfo=t.renewFolderState=t.deleteLoginPWD=t.setLoginInfoSync=t.setLoginInfo=t.settingPageSetLoginRecord=t.setLoginRecord=t.openInAppBrowserMobile=t.cannotLogin=t.selectAccount=t.loadLoginSetting=t.initLoginStateFromConsole=t.showLoginInfo=t.loadLoginRecordList=t.hideServerAddress=t.showServerAddress=void 0;var u=r(135),c=n(u),d=r(123),l=n(d),f=r(3),p=n(f),_=r(1),g=n(_),w=r(2),v=n(w),E=r(118),h=(n(E),r(195)),I=r(136),m=r(261),L=coreLogger.getLogger("logic")("loginset"),C=(t.showServerAddress=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];L.info("userClick setAddressAndPort menu"),$dispatch(coreUi.showModal(e,t))},t.hideServerAddress=function(){var e=(0,v.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreLogger.getLogger("Click")("ServerAddress"),t.info("userClick cancel ServerAddress setting"),G(),window.goRoute("login");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.loadLoginRecordList=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISMOBILE||!window.isLoadLoginRecord){e.next=3;break}return!0===window.ifLogOut&&!0===window.isConfLogOut&&y(),e.abrupt("return",p.default.resolve(!1));case 3:return e.next=5,coreDb.queryAllLoginRecord();case 5:if(t=e.sent,0!==t.length){e.next=8;break}return e.abrupt("return");case 8:return r=[],t.forEach(function(e){var t=e.display_account;r.push(t)}),n=t[0].isAutoLogin,a=t[0].isMaxhubWorkplace,L.info("loadLoginRecordList isMaxhubWorkplace:",a),1===a&&window.isHubEnv&&(L.info("set window.CLIENTCONFIG.NEW_APP_NAME true for maxhub workplace login"),window.CLIENTCONFIG.NEW_APP_NAME="Workplace"),e.next=16,C(t[0],r,t);case 16:return window.isLoadLoginRecord=!0,e.abrupt("return",n);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showLoginInfo=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i,s,u,c,d,f,p,_,w;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:return a=e.sent,o=t.display_account,i=t.account,s=t.tenantid,u=t.encryptPassword,c=t.strUserRandom,d=t.isRememberPassWord,f=t.isAutoLogin,e.next=6,coreSecurity.decrypt({cipher:u,strSalt:c});case 6:return p=e.sent,a.password=p,_={displayAccount:o,account:i,tenantid:s,isRememberPassword:d,isAutoLogin:f,strUserRandom:c,encryptPassword:u},r&&(_.loginHistoryList=r),n&&(_.loginRecordList=n),w=isNullOrEmpty(p),(0,l.default)(_,{showPwd:w}),e.next=15,S(_);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}()),T=t.initLoginStateFromConsole=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCommon.getConsoleUrlVars();case 2:return t=e.sent,e.next=5,(0,h.getLoginModel)();case 5:if(r=e.sent,isNullOrEmpty(t)){e.next=15;break}if(n=t.page,isNullOrEmpty(n)||"login"!==n){e.next=15;break}return a=t.account,o=t.serverAddress,i=parseInt(t.serverPort),s={displayAccount:a,serverAddress:o,serverPort:i},r.set(s),e.abrupt("return",{serverAddress:o,serverPort:i});case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),N=(t.loadLoginSetting=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,d,l,f,p,_,w,v,E,h,I,m,C,N,O,R,y,x,b,A,k,P,M,U,G,D,F,B,W;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,e.next=3,T();case 3:return s=e.sent,e.next=6,coreCommon.getSystemProxySetting();case 6:if(u=e.sent,isNullOrEmpty(s)){e.next=13;break}t=s.serverAddress,r=s.middleEndAddress||window.SERVERCONFIG.MIDDLE_END_ADDRESS,n=s.serverPort,e.next=71;break;case 13:return e.next=15,coreDb.queryAllLoginSetting();case 15:return c=e.sent,d=c.find(function(e){return"serverAddress"===e.key}),l=c.find(function(e){return"middleEndAddress"===e.key}),f=c.find(function(e){return"serverPort"===e.key}),t=d?d.value:window.SERVERCONFIG.LOGIN_ADDRESS,r=l?l.value:window.SERVERCONFIG.MIDDLE_END_ADDRESS,n=d?f.value:window.SERVERCONFIG.LOGIN_PORT,p=c.find(function(e){return"tempMediaxAddress"===e.key}),_=c.find(function(e){return"tempMediaxPort"===e.key}),a=p?p.value:window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS,o=_?_.value:window.CLIENTCONFIG.TEMP_MEDIAX_PORT,w=c.find(function(e){return"lastDeployMode"===e.key}),i=w?parseInt(w.value):0,e.next=30,S({serverAddress:t,middleEndAddress:r,serverPort:n,tempMediaxAddress:a,tempMediaxPort:o,lastDeployMode:i});case 30:if(v=void 0,E=void 0,h=void 0,I=void 0,m=void 0,C=void 0,N=void 0,O=void 0,R=c.find(function(e){return"isSupportProxy"===e.key}),y=c.find(function(e){return"isUseSysProxy"===e.key}),x=c.find(function(e){return"proxyAddress"===e.key}),b=c.find(function(e){return"proxyPort"===e.key}),A=c.find(function(e){return"proxyAccount"===e.key}),k=c.find(function(e){return"proxyPassword"===e.key}),P=c.find(function(e){return"prxoyRandom"===e.key}),v=R?R.value:"0",E=y?y.value:"0",h=x?x.value:"",I=b?b.value:"",m=A?A.value:"",C=k?k.value:"",N=P?P.value:"",M=c.find(function(e){return"isSupportCACertCheck"===e.key}),U=M?M.value:"1",G=c.find(function(e){return"setIsShowShareRecommendationCircle"===e.key}),D=G?G.value:"1",L.info("loadLoginSetting [decrypt]"),""===C){e.next=58;break}return e.next=53,coreSecurity.getPasswordManager();case 53:return F=e.sent,B=F.setCipherPassword("proxyPassword",C,N),e.next=57,B.decryptPassword();case 57:C=e.sent;case 58:if(L.info("loadLoginSetting end [decrypt]"),L.info("systemProxySetting111: "),L.info("isUseSysProxyValue: ",E),"1"!==v||"1"!==E||isNullOrEmpty(u)){e.next=69;break}return h=u.proxyServer,I=u.proxyPort,v="1",E="1",W=[{key:"proxyAddress",value:h},{key:"proxyPort",value:I},{key:"isSupportProxy",value:v},{key:"isUseSysProxy",value:E}],e.next=69,coreDb.saveLoginSettings({args:W});case 69:return e.next=71,S({isSupportProxy:"1"===v,isUseSysProxy:"1"===E,proxyAddress:h,proxyPort:I,sysProxyAddress:isNullOrEmpty(u)?"":u.proxyServer,sysProxyPort:isNullOrEmpty(u)?"":u.proxyPort,proxyAccount:m,isSupportCACertCheck:"1"===U,isShowShareRecommendationCircle:window.CLIENTCONFIG.NEW_FUNCTION_RECOMMENDATION&&"1"===D});case 71:window.SERVERCONFIG.MIDDLE_END_ADDRESS=r,window.SERVERCONFIG.LOGIN_ADDRESS=t,window.SERVERCONFIG.LOGIN_PORT=n,window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS=a,window.CLIENTCONFIG.TEMP_MEDIAX_PORT=o,window.SERVERCONFIG.HWUC=0;case 77:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.selectAccount=function(){var e=(0,v.default)(g.default.mark(function e(t){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginRecord({display_account:t});case 2:return r=e.sent,e.next=5,C(r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cannotLogin=function(e){L.info("login click forgetbutton ,open uportal from browser.");var t=1036===window.langcode?"fr_FR":1033===window.langcode?"en_US":"zh_CN",r="https://"+e+"/portal/forgetPassword.sraction?language="+t;appService.openUrl(r)},t.openInAppBrowserMobile=function(){var e=(0,v.default)(g.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"register";return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.openBrowerTimer&&clearTimeout(window.openBrowerTimer),window.openBrowerTimer=setTimeout(function(){S({loadPwd:!1}),window.InAppBrowserRef&&window.InAppBrowserRef.close(),alert(language.LOGIN_RESUME_NETWORK_ERROR)},2e4),L.info("openInAppBrowserMobile url="+t.substr(0,20)),window.offline?(L.info("openInAppBrowserMobile,network is unreachable"),alert(language.LOGIN_RESUME_NETWORK_ERROR)):(window.InAppBrowserRef=cordova.InAppBrowser.open(t,"_blank","location=no,zoom=no,useWideViewPort=no,toolbar=no,hidden=yes"),"register"===r?window.InAppBrowserRef.addEventListener("loadstart",a):"fogetPassword"===r&&window.InAppBrowserRef.addEventListener("loadstart",o),window.InAppBrowserRef.addEventListener("loadstop",s),window.InAppBrowserRef.addEventListener("loaderror",i)),L.info("openInAppBrowserMobile over");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setLoginRecord=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,d,f,p,_,w,v,E,I,m,C,T;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:return t=e.sent,r=t.displayAccount,n=t.account,a=t.tenantid,o=t.isRememberPassword,i=t.isAutoLogin,s=t.serverAddress,u=t.serverPort,c=t.deployMode,d=t.loginRecordList,e.next=14,coreSecurity.getPasswordManager();case 14:return f=e.sent,e.next=17,f.getPassword("password");case 17:if(p=e.sent,_=void 0,w=void 0,!(o=o||window.CLIENTCONFIG.ISMOBILE)){e.next=26;break}return e.next=23,coreSecurity.saveUserWithCrypt({strUserPwd:p,strAccount:n});case 23:v=e.sent,_=v.res,w=v.realRandom;case 26:return E={},d.forEach(function(e){e.tenantid!==a||isNullOrEmpty(a)||(E=e)}),e.next=30,coreDb.queryLoginRecord({account:n});case 30:if(I=e.sent,m=0,window.isHubEnv&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME||!isNullOrEmpty(I)&&I.isMaxhubWorkplace)&&(m=1),L.info("setLoginRecord isMaxhubWorkplace:",m),C={display_account:r,account:n,tenantcn:E.tenantcn||"",tenanten:E.tenanten||"",thirdaccount:E.thirdaccount||"",tenantid:a,thirdcertype:E.thirdcertype||!1,encryptPassword:o?_:"",strUserRandom:o?w:"",isRememberPassWord:o,isAutoLogin:i,time_stamp:(new Date).getTime(),isMaxhubWorkplace:m},isNullOrEmpty(E.account)||E.account===n){e.next=38;break}return e.next=38,coreDb.deleteLoginRecord({account:E.account});case 38:return e.next=40,coreDb.saveLoginRecord((0,l.default)(I,C));case 40:return T=[{key:"serverAddress",value:s},{key:"serverPort",value:u},{key:"lastDeployMode",value:c}],e.next=43,coreDb.saveLoginSettings({args:T});case 43:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.settingPageSetLoginRecord=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,d,f;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:return t=e.sent,r=t.account,n=t.isRememberPassword,a=t.isAutoLogin,e.next=8,coreSecurity.getPasswordManager();case 8:return o=e.sent,e.next=11,o.getPassword("password");case 11:if(i=e.sent,s=void 0,u=void 0,!n){e.next=19;break}return e.next=16,coreSecurity.saveUserWithCrypt({strUserPwd:i,strAccount:r});case 16:c=e.sent,s=c.res,u=c.realRandom;case 19:return d={encryptPassword:n?s:"",strUserRandom:n?u:"",isRememberPassWord:n,isAutoLogin:a,time_stamp:(new Date).getTime()},e.next=22,coreDb.queryLoginRecord({account:r});case 22:return f=e.sent,e.next=25,coreDb.saveLoginRecord((0,l.default)(f,d));case 25:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.saveLoginRecord=function(){N(),window.stroage.setFastLogin(!0)};var S=t.setLoginInfo=function(e){(0,h.getLoginModel)().then(function(t){t.set(e)})},O=t.setLoginInfoSync=function(e){(0,h.getSyncLoginModel)().set(e)},R=(t.deleteLoginPWD=function(e){e={password:""},(0,h.getLoginModel)().then(function(t){t.set(e)})},t.renewFolderState=function(e){(0,h.getLoginModel)().then(function(t){t.set(e)})},t.changeLoginInfo=function(e){var t=(0,h.getSyncLoginModel)(),r=e,n=r.displayAccount,a=r.isAutoLogin,o=r.isRememberPassword,i=(0,h.getSyncLoginModel)(),s=i.displayAccount,u=i.loginHistoryList,c=i.isRememberPassword,d=(0,h.getSyncLoginModel)(),f=d.showPwd;if(void 0===n&&!1===f&&void 0===a&&void 0===o&&(""===t.password||""===s&&""!==e.password)){(0,l.default)(e,{showPwd:!0})}if(void 0!==n&&n!==s){if(u.findIndex(function(e){return e===n})>-1)return e={displayAccount:n,account:window.SERVERCONFIG.HWUC?n.toLowerCase():n},void O(e);e={displayAccount:n,account:window.SERVERCONFIG.HWUC?n.toLowerCase():n,password:"",isRememberPassword:"",isAutoLogin:"",showPwd:""!==n},t.password=""}else a?e.isRememberPassword=!0:o||void 0===o||c===o||(e.isAutoLogin=!1);delete e.password,O(e)},t.setIsCACertCheckSupport=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isSupportCACertCheck,n=[{key:"isSupportCACertCheck",value:r?"1":"0"}],e.next=4,coreDb.bulkPutLoginSetting({settinglist:n});case 4:return e.next=6,S({isSupportCACertCheck:r});case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),new PromiseObject);window.getSystemProxy=function(){return window.electron.ipcRenderer.send("getSystemProxy-event"),R},window.updateSystemProxy=function(e){if(isNullOrEmpty(e))return void R.reject();var t=void 0;t="mac"===window.CLIENTCONFIG.PLATFORM?e.split("\n"):e.split(":");var r=void 0,n=void 0;isNullOrEmpty(t)||(t.length>=2?(r=t[0],n=t[1]):1===t.length?(r=t[1],n=""):(r="",n=""),S({sysProxyAddress:r,sysProxyPort:n}),R.resolve({sysProxyAddress:r,sysProxyPort:n})),R.reject()};var y=(t.setServerAddress=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:return a=e.sent,a.serverAddress===t&&a.serverPort===r||(L.info("entity.isReqAddrChanged in"),a.isReqAddrChanged=!0),o=[],i={},window.isHubEnv&&(i.serverAddress=t),isNullOrEmpty(t)||(o.push({key:"serverAddress",value:t}),i.serverAddress=t),isNullOrEmpty(r)||(o.push({key:"serverPort",value:r}),i.serverPort=r),isNullOrEmpty(n)||(o.push({key:"middleEndAddress",value:n}),i.middleEndAddress=n),e.next=12,coreDb.bulkPutLoginSetting({settinglist:o});case 12:return e.next=14,S(i);case 14:window.SERVERCONFIG.MIDDLE_END_ADDRESS=n||window.SERVERCONFIG.MIDDLE_END_ADDRESS,window.SERVERCONFIG.LOGIN_ADDRESS=t,window.SERVERCONFIG.LOGIN_PORT=r,window.SERVERCONFIG.HWUC=0,coreCommon.sha512(t)===constant.SERVER_ADDRESS_SHA512.HWUC?window.SERVERCONFIG.HWUC=1:window.SERVERCONFIG.HWUC=0;case 19:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),t.setTempMediaxInfo=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tempMediaxAddress,n=t.tempMediaxPort,e.next=3,S({tempMediaxAddress:r,tempMediaxPort:n});case 3:window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS=r,window.CLIENTCONFIG.TEMP_MEDIAX_PORT=n,coreConf.saveTempMediaxInfo();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setTempProxyInfo=function(){var e=(0,v.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({proxyAddress:t.proxyAddress,proxyPort:t.proxyPort});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setProxyInfo=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a,o,i,s,u,c,d,l,f;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isSupportProxy,n=t.isUseSysProxy,a=t.proxyAddress,o=t.proxyPort,i=t.proxyAccount,s=t.proxyPassword,e.next=3,coreSecurity.getPasswordManager();case 3:return u=e.sent,e.next=6,u.getPassword("proxyPassword");case 6:return c=e.sent,e.next=9,u.setPassword("proxyPassword",s);case 9:return d=e.sent,e.next=12,(0,h.getLoginModel)();case 12:return l=e.sent,l.isSupportProxy===r&&l.proxyAddress===a&&l.proxyPort===o&&l.proxyAccount===i&&c===s||(L.info("entity.isReqAddrChanged in here"),l.isReqAddrChanged=!0),f=[{key:"isSupportProxy",value:r?"1":"0"},{key:"isUseSysProxy",value:n?"1":"0"},{key:"proxyAddress",value:a},{key:"proxyPort",value:o},{key:"proxyAccount",value:i},{key:"proxyPassword",value:d.cipher},{key:"prxoyRandom",value:d.salt}],e.next=17,coreDb.bulkPutLoginSetting({settinglist:f});case 17:return e.next=19,S({isSupportProxy:r,isUseSysProxy:n,proxyAddress:a,proxyPort:o,proxyAccount:i});case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteLoginInfo=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:if(r=e.sent,n=r.displayAccount,a=r.loginHistoryList,o=r.loginRecordList,i=o.find(function(e){return e.display_account===t}),isNullOrEmpty(i)){e.next=29;break}return e.next=10,coreDb.deleteLoginRecord({account:i.account});case 10:if(s=a.findIndex(function(e){return e===t}),a.splice(s,1),s=o.findIndex(function(e){return e.display_account===t}),o.splice(s,1),n!==t){e.next=17;break}return e.next=17,S({tenantid:"",displayAccount:"",account:"",password:"",isRememberPassword:"",isAutoLogin:""});case 17:return e.next=19,coreDb.releaseSQliteDBHandler();case 19:return e.prev=19,e.next=22,appService.deleteUserDir(i.account);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(19),L.info("deleteUserDir",e.t0);case 27:e.next=30;break;case 29:L.error("delete account failed");case 30:case"end":return e.stop()}},e,void 0,[[19,24]])}));return function(t){return e.apply(this,arguments)}}(),t.deleteLoginPwd=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,d,f,p,_,w,v;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,L.info(""),0!==t.length){e.next=6;break}return e.abrupt("return");case 6:return r=[],t.forEach(function(e){var t=e.display_account;r.push(t)}),n=t[0],a=n.display_account,o=n.account,i=n.tenantid,s="",u=!1,c=!1,d={display_account:a,account:o,tenantid:i,encryptPassword:"",strUserRandom:"",isRememberPassWord:u,isAutoLogin:c,time_stamp:(new Date).getTime()},e.next=15,coreDb.queryLoginRecord({account:o});case 15:return f=e.sent,e.next=18,coreDb.saveLoginRecord((0,l.default)(f,d));case 18:return e.next=20,coreDb.queryAllLoginRecord();case 20:if(p=e.sent,0!==p.length){e.next=23;break}return e.abrupt("return");case 23:return _=[],p.forEach(function(e){var t=e.display_account;_.push(t)}),w={displayAccount:a,account:o,password:s,loginHistoryList:_,isRememberPassword:u,isAutoLogin:c},window.ifLogOut=!1,e.next=29,(0,h.getLoginModel)();case 29:return v=e.sent,v.password="",e.next=33,S(w);case 33:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),x=(t.changeAutoLogin=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,d,f,p,_,w,v,E,h;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return");case 5:return r=[],t.forEach(function(e){var t=e.display_account;r.push(t)}),n=t[0],a=n.display_account,o=n.account,i=n.tenantid,s=n.encryptPassword,u=n.strUserRandom,c=n.isRememberPassWord,d=n.isAutoLogin,L.info(""),f=!1,p={display_account:a,account:o,tenantid:i,encryptPassword:"",strUserRandom:u,isRememberPassWord:!1,isAutoLogin:f,time_stamp:(new Date).getTime()},e.next=13,coreDb.queryLoginRecord({account:o});case 13:return _=e.sent,e.next=16,coreDb.saveLoginRecord((0,l.default)(_,p));case 16:return e.next=18,coreDb.queryAllLoginRecord();case 18:if(w=e.sent,0!==w.length){e.next=21;break}return e.abrupt("return");case 21:return v=[],w.forEach(function(e){var t=e.display_account;v.push(t)}),E={displayAccount:a,account:o,password:"",loginHistoryList:v,isRememberPassword:c,isAutoLogin:f,status:void 0},window.ifLogOut=!1,e.next=27,coreSecurity.getPasswordManager();case 27:return h=e.sent,h.setPassword("password",""),e.next=31,S(E);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showImportCertificateContact=function(){var e=(0,v.default)(g.default.mark(function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("userClick showImportCertificateContact menu"),$dispatch(coreUi.showModal(t,r));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.hideImportCertificateModal=function(){var e=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("userClick hideImportCertificateModal menu"),coreUi.hideModal();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),b=(t.uploadCertificateFile=function(){var e=(0,v.default)(g.default.mark(function e(t){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("uploadCertificateFile "),r={},r.properties=["openFile"];try{window.electron.remote.dialog.showOpenDialog(r,function(e){if(!isNullOrEmpty(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=(0,c.default)(e);!(n=(i=s.next()).done);n=!0){var u=i.value;r.push(u)}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}t===constant.IMPORT_CERTIFICATE_TYPE.CERTIFICATE_TYPE?b(1===r.length&&r[0]||[]):t===constant.IMPORT_CERTIFICATE_TYPE.KEYS_TYPE&&A(1===r.length&&r[0]||[])}})}catch(e){L.error("uploadCertificateFile",e.toString())}case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateCertificateUrlLogic=function(e){(0,h.getLoginModel)().then(function(t){t.certificateUrl=e})}),A=t.updateKeysUrlLogic=function(e){(0,h.getLoginModel)().then(function(t){t.keysUrl=e})},k=t.clearSelectCertificateOrkeysLogic=function(){var e=(0,v.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:t=e.sent,t.certificateUrl="",t.keysUrl="";case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),P=(t.saveImportCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i,s,u,c,d,l,f,p,_,w,v;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.info("saveImportCertificateLogic "),e.prev=1,a=window.fs,o=window.path,i="",s="",u="",c="",o&&(i=o.win32.basename(t),s=o.win32.basename(r)),""!==i&&""!==s){e.next=9;break}return alert(language.CERTIFICATE_NAME_OR_KEY_NAME_CANNOT_BE_NULL),e.abrupt("return",!1);case 9:if(u=o.extname(i),c=o.extname(s),".pem"===u&&".pem"===c){e.next=14;break}return alert(language.ILLEGAL_CERTIFICATE_FORMAT_PLEASE_RESELECT),e.abrupt("return",!1);case 14:return e.next=16,F(t);case 16:if(d=e.sent){e.next=20;break}return alert(language.INCORRECT_OR_INVALID_CERTIFICATE),e.abrupt("return",!1);case 20:if(!a){e.next=34;break}return l=APP_DATA_PATH+"/ImpBfcpTLS",f=l+"/"+i,p=l+"/"+s,_=l+"/p4bfcp.txt",a.existsSync(l)?(w=a.readdirSync(l),w.forEach(function(e){a.unlinkSync(l+"/"+e)})):a.mkdirSync(l),e.next=28,P(t,f);case 28:return e.next=30,P(r,p);case 30:return e.next=32,coreSecurity.encryptKMC(n);case 32:v=e.sent,0===v.result&&a.writeFile(_,v.param.CiperText,function(e){if(e)throw e});case 34:return e.abrupt("return",!0);case 37:e.prev=37,e.t0=e.catch(1),L.error("saveImportCertificateLogic",e.t0.toString());case 40:case"end":return e.stop()}},e,void 0,[[1,37]])}));return function(t,r,n){return e.apply(this,arguments)}}(),function(){var e=(0,v.default)(g.default.mark(function e(t,r){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("readeContentToWriteFile ");try{fs.readFile(t,function(e,t){if(e)throw e;fs.writeFile(r,t,function(e){if(e)throw e})})}catch(e){L.error("readeContentToWriteFile",e.toString())}case 2:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),M=(t.saveBeforeLogic=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments[2];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=window.fs,r=window.path,n="",a="",o="p4bfcp.txt",r&&(n=r.win32.basename(s),a=r.win32.basename(u)),t&&(i=APP_DATA_PATH+"/ImpBfcpTLS",t.readdir(i,function(e,t){t.includes(n)&&t.includes(a)&&t.includes(o)?window.alert(language.IMPORT_DEVICE_CERTIFICATE_SUCCESSFULLY).then(function(e){e.ret&&(k(),c.value="",x(),M(n),U(!1))}):window.alert(language.FAILED_IMPORT_DEVICE_CERTIFICATE_PLEASE_RE_IMPORT).then(function(e){e.ret&&(k(),c.value="")})}))}catch(e){L.error("saveBeforeLogic",e.toString())}case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.saveSelectCertificateNameLogic=function(e){L.info("saveSelectCertificateNameLogic",e),(0,h.getLoginModel)().then(function(t){t.certificateName=e})}),U=t.setCertificateCheckLogic=function(){var e=(0,v.default)(g.default.mark(function e(t){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("setCertificateCheckLogic",t),e.next=3,(0,h.getLoginModel)();case 3:r=e.sent,r.selectCertificate=t;case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),G=(t.setImportCertificate=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a,o,i,s,u,c;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("setImportCertificate"),r=t.selectCertificate,n=t.certificateName,e.next=4,coreDb.queryLoginSetting({key:"importCertificate"});case 4:return a=e.sent,e.next=7,coreDb.queryLoginSetting({key:"certificateName"});case 7:if(o=e.sent,"{}"===a&&(a=null),"{}"===o&&(o=null),isNullOrEmpty(a)||isNullOrEmpty(o)){e.next=25;break}if(o.value===n){e.next=16;break}return i=[{key:"certificateName",value:n}],e.next=15,coreDb.saveLoginSettings({args:i});case 15:M(n);case 16:if((s="true"===a.value)===r){e.next=23;break}return u=[{key:"importCertificate",value:r}],e.next=21,coreDb.saveLoginSettings({args:u});case 21:return e.next=23,U(r);case 23:e.next=30;break;case 25:return c=[{key:"importCertificate",value:r},{key:"certificateName",value:n}],e.next=28,coreDb.saveLoginSettings({args:c});case 28:return e.next=30,D(r,n);case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initImportCertificate=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("initImportCertificate"),e.prev=1,e.next=4,coreDb.queryLoginSetting({key:"importCertificate"});case 4:return t=e.sent,e.next=7,coreDb.queryLoginSetting({key:"certificateName"});case 7:if(r=e.sent,L.debug("initImportCertificate",t,r),"{}"===t&&(t=null),"{}"===r&&(r=null),L.debug("new initImportCertificate",t,r),isNullOrEmpty(t)||isNullOrEmpty(r)){e.next=16;break}if(""===r.value){e.next=16;break}return e.next=16,D("true"===t.value,r.value);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),L.error("initImportCertificate",e.t0.toString());case 21:case"end":return e.stop()}},e,void 0,[[1,18]])}));return function(){return e.apply(this,arguments)}}()),D=t.setInitSelectCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(t,r){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("setInitSelectCertificateLogic"),e.next=3,(0,h.getLoginModel)();case 3:n=e.sent,n.selectCertificate=t,n.certificateName=r;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),F=t.verificationCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("verificationCertificateLogic"),e.prev=1,e.next=4,(0,m.verifyCertificate)(t);case 4:if(r=e.sent,0===r.result){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,(0,m.checkCertificateOverdue)(t);case 11:if(n=e.sent,a=n.param&&n.param.expire_time,o=a.ulUTCSec+"000",i=(new Date).getTime,!(0===n.result&&i-o>0)){e.next=17;break}return e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 20:e.prev=20,e.t0=e.catch(1),L.error("verificationCertificateLogic",e.t0.toString());case 23:case"end":return e.stop()}},e,void 0,[[1,20]])}));return function(t){return e.apply(this,arguments)}}(),B=t.dbInitCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("dbInitCertificateLogic"),t=[{key:"importCertificate",value:""},{key:"certificateName",value:""}],e.next=4,coreDb.saveLoginSettings({args:t});case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.loginforverificationCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L.info("loginforverificationCertificateLogic"),e.prev=1,t=window.fs,r=!0,!t){e.next=29;break}if(n=APP_DATA_PATH+"/ImpBfcpTLS",a=n+"/server.pem",t.existsSync(n)){e.next=12;break}L.debug(""),r=!1,e.next=29;break;case 12:if(o=t.readdirSync(n),!(o.includes("server.pem")&&o.includes("server_key.pem")&&o.includes("p4bfcp.txt"))){e.next=27;break}return e.next=16,F(a);case 16:if(i=e.sent){e.next=25;break}return L.debug(""),e.next=21,D(!0,"");case 21:r=!1,o.forEach(function(e){t.unlinkSync(n+"/"+e)}),t.rmdirSync(n),B();case 25:e.next=29;break;case 27:L.debug("ImpBfcpTLS"),r=!1;case 29:return e.abrupt("return",r);case 32:e.prev=32,e.t0=e.catch(1),L.error("loginforverificationCertificateLogic",e.t0.toString());case 35:case"end":return e.stop()}},e,void 0,[[1,32]])}));return function(){return e.apply(this,arguments)}}();window.handleJoinImpVcName=function(e){if(!window.isOffline)return void alert(language.IN_CASE_ONLINE_YOU_CANNOT_IMPORT_CERTIFICATE);isNullOrEmpty(e)?window.ToastNew(language.FAILED_TO_IMPORT_THE_CERTIFICATE,2):(window.goRoute("loginCtn"),q(),window.confirm(language.DOES_THE_DETECTION_ATTACHMENT_HAVE_CERTIFICATE).then(function(t){if(t.ret){window.MLoad(language.DURING_THE_SURVEY_PLEASE_WAIT,!0,"probeLoad");var r=null;clearTimeout(r),r=setTimeout(function(){appService.unzipOfZipPackage(e)},2e3)}}))},window.setProbeZipPackageResult=function(e){W(e)};var W=function(e){switch(window.removeMLoad(),e.resultCode){case constant.PROBE_COMPRESSED_PACKAGE.PROBE_NOT_EXIST:alert(language.IMPORTED_FILE_DOES_NOT_EXIST);break;case constant.PROBE_COMPRESSED_PACKAGE.PROBE_NO_CERTIFICATE_EXIST:alert(language.CERTIFICATE_DOES_NOT_EXIST);break;case constant.PROBE_COMPRESSED_PACKAGE.PROBE_CERTIFICATE_EXIST:H(e);break;default:window.ToastNew(language.PROBE_FAILED,2)}},H=t.probeImportCertificateLogic=function(e){new p.default(function(t){window.MLoad(language.SUCCESSFUL_DETECTION_IMPORT,!0,"probeLoad"),V(e.serverPem,e.serverKeyPem),K(e.zipUrl),t("OK")}).then(function(e){if("OK"===e){new p.default(function(e){window.MLoad(language.AUTOMATIC_MATCHING_COMPLETED,!1,"probeLoad"),e("Y")}).then(function(e){if("Y"===e){var t=null;clearTimeout(t),t=setTimeout(function(){window.goRoute("mLoginMoreSet"),window.goRoute("mImportCertificate"),window.goRoute("mSelectImpCertPage"),window.removeMLoad()},1e3)}})}})},V=t.setMProveAndKeyLogic=function(e,t){L.info("setMProveAndKeyLogic"),(0,h.getLoginModel)().then(function(r){r.mProveUrl=e,r.mkeysUrl=t})},K=t.setMSaveZipUrlLogic=function(e){L.info("setMSaveZipUrlLogic"),(0,h.getLoginModel)().then(function(t){t.mZipUrl=e})},Y=t.setMProveNameAndSelectItLogic=function(e,t){L.info("setMProveNameAndSelectItLogic"),(0,h.getLoginModel)().then(function(r){r.mProveName=e,r.mSelectProve=t})};t.setMSelectItLogic=function(){var e=(0,v.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("setMSelectItLogic"),(0,h.getLoginModel)().then(function(e){e.mSelectProve=t});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.mobileImptProveLogic=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.encryptKMC(t);case 2:if(a=e.sent,0!==a.result){e.next=9;break}return e.next=6,(0,h.getLoginModel)();case 6:o=e.sent,i=o.mZipUrl,appService.mImptProve(a.param.CiperText,r,n,i);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}();window.sendSetInitialValueToProbeResult=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(t)||""===t.serverPem){e.next=8;break}return r=window.EXEC_PATH+"/"+t.imptPath,n=r+"/"+t.serverPem,e.next=5,F(n);case 5:a=e.sent,L.info("sendSetInitialValueToProbeResult : ",a),a?Y(t.serverPem,!1):L.info(language.INCORRECT_OR_INVALID_CERTIFICATE);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.sendIsImportSuccessfulResult=function(e){if("200"===e.imptResultCode&&""!==e.serverName){L.info(""),window.MLoad(language.IMPORT_CERTIFICATE_SUCCESSFULLY,!1,"probeLoad");var t=null;clearTimeout(t),t=setTimeout(function(){window.history.back(),Y(e.serverName,!1),window.removeMLoad()},1e3)}else alert(language.IMPORT_FAILED_PLEASE_TRY_AGAIN)};var q=(t.cancelImpSelectDone=function(){L.info("userClick  back btn"),window.goRoute("mImportCertificate")},t.clearImptZipUrlDataLogic=function(){var e=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:V("",""),K("");case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.initMImportCertificate=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:t=e.sent,r=t.mSelectProve,appService.logoutAndFreeLoginInitProve(r);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.actionLogoutAndFreeloginHandler=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(t)||""===t.serverPem){e.next=8;break}return r=window.EXEC_PATH+"/"+t.imptPath,n=r+"/"+t.serverPem,e.next=5,F(n);case 5:a=e.sent,L.info("sendSetInitialValueToProbeResult : ",a),a?Y(t.serverPem,!1):L.info("");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.unzipOfZipPackageResult=function(e,t,r,n){W({serverPem:e||"",serverKeyPem:t||"",resultCode:r||"0",zipUrl:""})},window.mImptProveResult=function(e,t){if("200"===t&&""!==e){L.info(""),window.MLoad(language.IMPORT_CERTIFICATE_SUCCESSFULLY,!1,"probeLoad");var r=null;clearTimeout(r),r=setTimeout(function(){window.history.back(),Y(e,!1),window.removeMLoad()},1e3)}else alert(language.IMPORT_FAILED_PLEASE_TRY_AGAIN)},window.initJudgeDirExistProveResult=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=8;break}return a=window.EXEC_PATH+"/"+r,o=a+"/"+t,e.next=5,F(o);case 5:i=e.sent,L.info("sendSetInitialValueToProbeResult : ",i),i?Y(t,!1):L.info(language.INCORRECT_OR_INVALID_CERTIFICATE);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}();t.isInLoginRecordList=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:return r=e.sent,n=r.some(function(e){return e.account===t}),e.next=6,(0,h.getLoginModel)();case 6:a=e.sent,a.whetherInLoginRecordList=n;case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.isPcFirstInstall=function(){var e=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.getItem("");case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isAccountAutoLogin=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return",!1);case 5:return r=t[0].isAutoLogin,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initPcFirstPage=function(){var e=(0,v.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.CLIENTCONFIG.PRIVACY_VERSION_VALUE,window.CLIENTCONFIG.ISBIGWIN||(t=window.localStorage.getItem("isFirstInstall")),"2052"===window.langcode&&(window.document.title=window.CLIENTCONFIG.NEW_APP_CHINEASE_NAME),!window.isHubEnv){e.next=10;break}delegate(function(){(0,I.getMyInfo)().then(function(e){e.languageCode=window.langcode})},"updateLanguage"),window.goRoute("maxhubLogin"),coreCommon.verificationCertificate(),coreConf.NotifyAppStared(0),e.next=31;break;case 10:if(!window.isPluginEnv){e.next=16;break}return e.next=13,coreCommon.initLogin(!1);case 13:L.info("init plugin first page"),e.next=31;break;case 16:if(window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===t){e.next=26;break}return L.info("First install or privacy statement updated"),appService.showMainWindow(!1),e.next=21,appService.initLoginTray();case 21:return e.next=23,window.setLoginSize();case 23:window.CLIENTCONFIG.ISBIGWIN?window.goRoute("login"):(window.goRoute("firstLoginPrivacy"),appService.showMainWindow(!0)),e.next=31;break;case 26:if(window.CLIENTCONFIG.ISBIGWIN){e.next=29;break}return e.next=29,window.setLoginSize();case 29:window.goRoute("login"),coreCommon.verificationCertificate();case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},170:function(e,t,r){e.exports={default:r(171),__esModule:!0}},171:function(e,t,r){r(23),r(22),e.exports=r(172)},172:function(e,t,r){var n=r(16),a=r(6)("iterator"),o=r(17);e.exports=r(8).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||o.hasOwnProperty(n(t))}},185:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.registerSipResultCallback=t.sipResume=t.resume=t.registerResumeEvent=t.getResumeFlag=t.clearResumeService=t.logout=t.setOffline=t.doLogout=t.enableAutoLogin=t.login=t.ipLogin=t.initLoginInfo=t.checkForceSwtichAccount=t.recoverAppCache=t.storeAppCache=void 0;var a=r(359),o=n(a),i=r(241),s=n(i),u=r(293),c=n(u),d=r(221),l=n(d);t.storeAppCache=o.storeAppCache,t.recoverAppCache=o.recoverAppCache,t.checkForceSwtichAccount=s.checkForceSwtichAccount,t.initLoginInfo=s.initLoginInfo,t.ipLogin=s.ipLogin,t.login=s.login,t.enableAutoLogin=s.enableAutoLogin,t.doLogout=c.doLogout,t.setOffline=c.setOffline,t.logout=c.logout,t.clearResumeService=l.clearResumeService,t.getResumeFlag=l.getResumeFlag,t.registerResumeEvent=l.registerResumeEvent,t.resume=l.resume,t.sipResume=l.sipResume,t.registerSipResultCallback=l.registerSipResultCallback},195:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteLoginInfo=t.selectAccount=t.inputValueChange=t.valueChange=t.forgetPwd=t.miniApp=t.removeKeyDownListener=t.addKeyDownListener=t.noLoginJoinConference=t.showSettingMenu=t.doLogin=t.checkLoginInfo=t.getSyncLoginModel=t.getLoginModel=t.recoverAppCache=t.storeAppCache=t.getResumeFlag=t.sipResume=t.setOffline=t.resume=t.registerResumeEvent=t.logout=t.login=t.ipLogin=t.initLoginInfo=t.doLogout=t.clearResumeService=t.checkForceSwtichAccount=void 0;var a=r(185),o=n(a),i=r(136),s=n(i),u=r(311),c=n(u),d=r(362),l=n(d),f=r(166),p=n(f);t.checkForceSwtichAccount=o.checkForceSwtichAccount,t.clearResumeService=o.clearResumeService,t.doLogout=o.doLogout,t.initLoginInfo=o.initLoginInfo,t.ipLogin=o.ipLogin,t.login=o.login,t.logout=o.logout,t.registerResumeEvent=o.registerResumeEvent,t.resume=o.resume,t.setOffline=o.setOffline,t.sipResume=o.sipResume,t.getResumeFlag=o.getResumeFlag,t.storeAppCache=o.storeAppCache,t.recoverAppCache=o.recoverAppCache,t.getLoginModel=s.getLoginModel,t.getSyncLoginModel=s.getSyncLoginModel,t.checkLoginInfo=c.checkLoginInfo,t.doLogin=l.doLogin,t.showSettingMenu=l.showSettingMenu,t.noLoginJoinConference=l.noLoginJoinConference,t.addKeyDownListener=l.addKeyDownListener,t.removeKeyDownListener=l.removeKeyDownListener,t.miniApp=l.miniApp,t.forgetPwd=l.forgetPwd,t.valueChange=l.valueChange,t.inputValueChange=l.inputValueChange,t.selectAccount=p.selectAccount,t.deleteLoginInfo=p.deleteLoginInfo},210:function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},211:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.unRegisterPush=t.registerPush=t.showUpdateHintsOrBar=t.reStartUpgrade=t.downloadUpgradeFile=t.queryVersionInfo=t.checkUpgrade=t.resumeUportalService=t.getOAuthTicket=t.actionGetCorpResourceAtomic=t.actionGetUploadInfo=t.uportalLogout=t.clearLocalDNSIp=t.frogetPassword=t.verifyVerificationCode=t.getVerifyCode=t.sendCaptchaResult=t.getCaptcha=t.requestVerificationCode=t.queryUserAccount=t.recordPrivacy=t.queryMediaXaddrFromServer=t.setLoginProxy=t.resetLoginInfo=t.refreshTokenCallback=t.changeLoginPassword=t.actionRefreshToken=t.startLoginDownLoadCaCert=t.startPortDetect=t.startFireWallDetect=t.fireWallDetect=t.updateStgAuthInfo=t.updateStgInfo=t.updateFireWallAndSipInfo=t.stgTunnelDisconnected=t.destroyStgTunnel=t.buildStgTunnel=t.checkIsFirstLogin=t.firstTimeLoginChangePassword=t.firstLoginChangePassword=t.setFistLoginInfo=void 0;var a=r(235),o=n(a),i=r(309),s=n(i),u=r(291),c=n(u),d=r(407),l=n(d),f=r(308),p=n(f),_=r(292),g=n(_),w=r(260),v=n(w),E=r(228);t.setFistLoginInfo=s.setFistLoginInfo,t.firstLoginChangePassword=s.firstLoginChangePassword,t.firstTimeLoginChangePassword=s.firstTimeLoginChangePassword,t.checkIsFirstLogin=s.checkIsFirstLogin,t.buildStgTunnel=o.buildStgTunnel,t.destroyStgTunnel=o.destroyStgTunnel,t.stgTunnelDisconnected=o.stgTunnelDisconnected,t.updateFireWallAndSipInfo=o.updateFireWallAndSipInfo,t.updateStgInfo=o.updateStgInfo,t.updateStgAuthInfo=o.updateStgAuthInfo,t.fireWallDetect=o.fireWallDetect,t.startFireWallDetect=o.startFireWallDetect,t.startPortDetect=o.startPortDetect,t.startLoginDownLoadCaCert=l.startLoginDownLoadCaCert,t.actionRefreshToken=c.actionRefreshToken,t.changeLoginPassword=c.changeLoginPassword,t.refreshTokenCallback=c.refreshTokenCallback,t.resetLoginInfo=c.resetLoginInfo,t.setLoginProxy=(0,E.getUportalApi)().setLoginProxy,t.queryMediaXaddrFromServer=c.queryMediaXaddrFromServer,t.recordPrivacy=c.recordPrivacy,t.queryUserAccount=c.queryUserAccount,t.requestVerificationCode=c.requestVerificationCode,t.getCaptcha=c.getCaptcha,t.sendCaptchaResult=c.sendCaptchaResult,t.getVerifyCode=c.getVerifyCode,t.verifyVerificationCode=c.verifyVerificationCode,t.frogetPassword=c.frogetPassword,t.clearLocalDNSIp=c.clearLocalDNSIp,t.uportalLogout=c.uportalLogout,t.actionGetUploadInfo=c.actionGetUploadInfo,t.actionGetCorpResourceAtomic=c.actionGetCorpResourceAtomic,t.getOAuthTicket=p.getOAuthTicket,t.resumeUportalService=c.resumeUportalService,t.checkUpgrade=g.checkUpgrade,t.queryVersionInfo=g.queryVersionInfo,t.downloadUpgradeFile=g.downloadUpgradeFile,t.reStartUpgrade=g.reStartUpgrade,t.showUpdateHintsOrBar=g.showUpdateHintsOrBar,t.registerPush=v.registerPush,t.unRegisterPush=v.unRegisterPush},220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNickName=t.resumeAllSipService=t.checkDetectFireWall=t.detectFireWall=t.configSipIp=t.stopSipRefresh=t.startSipRefresh=t.dealPcLogout=t.dealPcLogin=t.ipCallConfig=t.stopLocalServer=t.reLoginSipserver=t.unEnableBFCP=t.sipserverDeregister=t.clearnsipinfo=t.stgBuildforNoName=t.handletempsipconfinfo=t.registerLoginEvent=void 0;var n=r(229),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);t.registerLoginEvent=a.registerLoginEvent,t.handletempsipconfinfo=a.handletempsipconfinfo,t.stgBuildforNoName=a.stgBuildforNoName,t.clearnsipinfo=a.clearnsipinfo,t.sipserverDeregister=a.sipserverDeregister,t.unEnableBFCP=a.unEnableBFCP,t.reLoginSipserver=a.reLoginSipserver,t.stopLocalServer=a.stopLocalServer,t.ipCallConfig=a.ipCallConfig,t.dealPcLogin=a.dealPcLogin,t.dealPcLogout=a.dealPcLogout,t.startSipRefresh=a.startSipRefresh,t.stopSipRefresh=a.stopSipRefresh,t.configSipIp=a.configSipIp,t.detectFireWall=a.detectFireWall,t.checkDetectFireWall=a.checkDetectFireWall,t.resumeAllSipService=a.resumeAllSipService,t.getNickName=a.getNickName},221:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){T.info(e),window.console.warn(e)}function o(){window.updateLocalIp().then(function(e){(0,m.getLoginModel)().sipLoginOnly?(a("[ pcSuspend online -> sipLoginOnly sipResume ]"),V()):(a("[ online -> resume ] resume ip: "),y({message:"PCOnline"}))})}function i(){a("[ pc offline ]"),E(constant.APP_STATE.NETWORK_ERROR),a("[ offline ->  waiting online ]"),s().then(o)}function s(){var e=PromiseObject(),t=function t(r){a("[ online -> then ]"),window.removeEventListener("online",t),e.resolve(r)};return window.addEventListener("online",t),e}Object.defineProperty(t,"__esModule",{value:!0}),t.setAppResumeState=t.registerSipResultCallback=t.doSipResumeAndEserverDetect=t.clearResumeService=t.registerResumeEvent=t.sipResume=t.resetSipResumeFlag=t.meetinghwSipEnableToLogout=t.cleraQosMediaInfo=t.stopResume=t.resume=t.getResumeEnable=t.getResumeFlag=void 0;var u=r(3),c=n(u),d=r(1),l=n(d),f=r(2),p=n(f),_=function(){var e=(0,p.default)(l.default.mark(function e(t){var r,n,o,i,s,u,c,d;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=$getState().call.callStatus,e.next=3,(0,m.getLoginModel)();case 3:n=e.sent,e.t0=t.netType,e.next=e.t0===constant.NETWORK_TYPE.TYPE_NONE?7:e.t0===constant.NETWORK_TYPE.TYPE_WIFI?11:e.t0===constant.NETWORK_TYPE.TYPE_2G?11:e.t0===constant.NETWORK_TYPE.TYPE_3G?11:e.t0===constant.NETWORK_TYPE.TYPE_4G?11:35;break;case 7:return a("[ mobileNetworkChange -> offline ]"),E(constant.APP_STATE.NETWORK_ERROR),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(T.info(" xhx_se change local qos level setMicValue Zero"),$dispatch(coreUi.changeCallLocalQoslevel(0)),x()),e.abrupt("break",36);case 11:if(a("[ mobileNetworkChange -> online ]"),!t.newIp||"0.0.0.0"===t.newIp||Y===t.newIp){e.next=19;break}E(constant.APP_STATE.RECONNECTING),o=n.sipLoginOnly,o?(a("[ mobileNetworkChange -> sipLoginOnly sipResume ]",t),V()):(a("[ mobileNetworkChange -> sipLoginOnly resume ]",t),y({message:"mobileNetworkChange"})),Y=t.newIp,e.next=34;break;case 19:if(!t.newIp||"0.0.0.0"===t.newIp){e.next=31;break}return e.next=22,q(t);case 22:Y=t.newIp,i=n.isSipRegSuc(),s=$getState().conf.confHandle,u=void 0===s||""===s,c=$getState().call.callStatus,d=!("VIDEO_CONNECTED"===c||"VIDEO_OUT"===c||"CALL_OUT"===c||"CALL_CONNECTED"===c),i&&d&&u&&(0,L.reConfigVideoAndDataSetting)(),e.next=34;break;case 31:return a("[ mobileNetworkChange -> offline ]",t),E(constant.APP_STATE.NETWORK_ERROR),e.abrupt("break",36);case 34:case 35:return e.abrupt("break",36);case 36:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(l.default.mark(function e(){var t,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.updateLocalIp();case 2:return e.next=4,(0,m.getLoginModel)();case 4:t=e.sent,a("[ pcSuspend ]"),navigator.onLine?(E(constant.APP_STATE.RECONNECTING),r=t.sipLoginOnly,r?(a("[ pcSuspend online -> sipLoginOnly sipResume ]"),V()):(a("[ pcSuspend online ->  resume ]  resume ip: ",window.localIp),y({message:"pcSuspend"}))):(E(constant.APP_STATE.NETWORK_ERROR),a("[ pcSuspend offline ->  waiting onLine ]"),window.CLIENTCONFIG.USE_IM&&s().then(o));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,p.default)(l.default.mark(function e(t){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:r=e.sent,t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING&&b?(a("[ sipRegisterNotify ] registering"),r.useIM||E(constant.APP_STATE.RECONNECTING)):t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER||t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED&&0!==t.reasonCode?(a("[ sipRegisterNotify ] unregister"),coreConf.isInReCall()||(a("[ sipRegisterNotify ] => sipresume in sipRegisterNotify",t.reasonCode),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&0===t.reasonCode||V(!1))):t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED&&0===t.reasonCode&&(a("[ sipRegisterNotify ] registered"),r.useIM||E(constant.APP_STATE.ONLINE));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:t=e.sent,t.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER,(0,h.stopLocalServer)(),V();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),E=t.setAppResumeState=function(){var e=(0,p.default)(l.default.mark(function e(t){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:r=e.sent,t===constant.APP_STATE.ONLINE?(T.info("setAppResumeState, set isOffline false"),window.isOffline=!1,window.dispatchEvent(new Event("CloudLinkonline")),r.setAppState(t),a("[ setAppResumeState ] Enable all service")):(T.info("setAppResumeState, set isOffline true"),window.isOffline=!0,window.dispatchEvent(new Event("CloudLinkoffline")),r.setAppState(t),a("[ setAppResumeState ] Disable all service"),window.CLIENTCONFIG.USE_IM&&(a("publish [ offline ] status"),coreIm.setEServerOffline()),r.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER),t!==constant.APP_STATE.NETWORK_ERROR||window.CLIENTCONFIG.USE_IM?!window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(language.THE_NETWORK_IS_ABNORMAL,!1):!window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(language.THE_NETWORK_IS_ABNORMAL,!0);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h=r(220),I=r(241),m=r(136),L=r(230),C=r(235),T=coreLogger.getLogger("logic")("resume"),N=(t.getResumeFlag=function(){return S},t.getResumeEnable=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N);case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),!1),S=!1,O=void 0,R=void 0,y=t.resume=function(){var e=(0,p.default)(l.default.mark(function e(t){var r,n,o,i,s,u,c,d,f,p=t.reloadTup,_=void 0!==p&&p,g=t.message;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("<account_resume><1_Start> message:"+g+", reloadTup:"+_),e.next=3,(0,m.getLoginModel)();case 3:if(r=e.sent,window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=7;break}e.next=10;break;case 7:if(N){e.next=10;break}return T.info("<account_resume><5_Stop> isResumeEnable=false"),e.abrupt("return");case 10:if(window.dispatchEvent(new Event("CloudLinkresume")),!(n=r.loginDisable)){e.next=21;break}return T.info("<account_resume><0_Info> wating for last resumePromise=false"),e.next=16,R;case 16:if(!((o=e.sent)&&o.result||!1===window.isOffline)){e.next=21;break}return E(constant.APP_STATE.ONLINE),T.info("<account_resume><5_Stop> resumeFlag=false"),e.abrupt("return",S=!1);case 21:O&&O.end&&O.end(),S=!0,E(constant.APP_STATE.RECONNECTING),i=function(e){return T.info("<account_resume><2_DoResume> retrytime:"+e),R=(0,I.login)(!0)},s=3e4,u=10,c=function(e){return e&&e.result||!1===window.isOffline},d=function(){T.info("<account_resume><3_Success>"),E(constant.APP_STATE.ONLINE),S=!1},f=function(){T.error("resume failed, try again..."),T.info("<account_resume><4_Fail> resumeTimesout"),E(constant.APP_STATE.RECONNECT_FAILED),setTimeout(y,1e4),S=!1};try{O=makeSure(i,c,s,u,d,f),O()}catch(e){a("resume exception : "+e.toString()),S=!1}case 31:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),x=(t.stopResume=function(){var e=(0,p.default)(l.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.info("<account_resume><6_StopResume> reason:"+t),O&&O.end instanceof Function&&O.end();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.cleraQosMediaInfo=function(){var e={audio:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}},video:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}},bfcp:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}}};$dispatch(coreUi.changeCallMediaInfo(e))}),b=!1,A=0,k=10,P=1e3,M=1e4,U=!1,G=!1,D=!1,F=null,B=null,W=0;window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(k=15,M=2e3,P=0);var H=t.meetinghwSipEnableToLogout=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.info("[IT-Meeting] meetinghwSipEnableToLogout"),window.itWeLinkNotifyCallEnded(0,language.EADDR_FAIL_CONNECT),$getState().conf.confSubject?coreConf.actionLeaveConf():(window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),V=(t.resetSipResumeFlag=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b=!1;case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.sipResume=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A=0,b=!1,window.CLIENTCONFIG.USE_IM||E(constant.APP_STATE.ONLINE),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=6;break}return e.next=6,coreConf.confctrlInit();case 6:a("[ sipResume success ]"),i.resolve();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r=function(){return N?(G=!1,A>=k?U?(A=0,a("[ retrytime reset due to max times tried ]"),a("[ sipResume stoped, max times tried ]"),b=!1,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!coreConf.isInReCall()&&(window.itWeLinkNotifyCallEnded(0,language.EADDR_FAIL_CONNECT),window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT)),(0,m.getLoginModel)().then(function(e){e.useIM||E(constant.APP_STATE.RECONNECT_FAILED)}),void i.reject("max times tried")):(A=0,a("[ retrytime reset due to disaster tolerance ]"),P=1e3,U=!0,b=!1,void(0,I.login)(!0)):(a("[ sipResume failed, will retry again... ]"),void o())):(a("[ resume failed, but resume is unEnable, break resume ]"),void(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&H()))},n=function(e){return D=!0,new c.default(function(t,r){(0,m.getLoginModel)().then(function(n){var o=e/500,i=0;a("check sip state:"+n.sipRegisterState+", check count: "+o),B=setInterval(function(){i++,i>o?(i=0,clearInterval(B),D=!1,a("check sip state end:"+n.sipRegisterState),r()):(a("check sip state:"+n.sipRegisterState),n.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED?(i=0,clearInterval(B),D=!1,t()):n.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING&&(i=0))},500)})})},o=function(){var e=(0,p.default)(l.default.mark(function e(){var i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:if(i=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=19;break}if(N){e.next=6;break}return e.abrupt("return");case 6:if(window.localIp&&"0.0.0.0"!==window.localIp){e.next=14;break}return a("[ sipResume stoped, is none network ]"),W=0,window.meetingWHGetLocalIp(),setTimeout(function(){o()},500),e.abrupt("return");case 14:if(!window.localIp||"0.0.0.0"===window.localIp){e.next=19;break}if(1===W){e.next=19;break}return a("[ after one second to doSipResume ]"),setTimeout(function(){W=1,o()},1e3),e.abrupt("return");case 19:return e.next=21,window.updateLocalIp(!0);case 21:if(!window.localIp||"0.0.0.0"!==window.localIp){e.next=26;break}return a("[ sipResume stoped, is none network ]"),E(constant.APP_STATE.NETWORK_ERROR),b=!1,e.abrupt("return");case 26:if(i.sipRegisterState!==constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED){e.next=34;break}return A=0,a("[ retrytime reset due to already registered ]"),a("[ sipResume stoped, already registered ]"),b=!1,e.abrupt("return");case 34:if(i.sipRegisterState!==constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING){e.next=40;break}return A=0,a("[ retrytime reset due to registering ]"),a("[ sipResume stoped, registering ]"),b=!1,e.abrupt("return");case 40:if(!window.resumeFromShut||!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isOffline){e.next=45;break}return E(constant.APP_STATE.ONLINE),window.resumeFromShut=!1,b=!1,e.abrupt("return");case 45:if(!/^login/.test(window.getRoute())){e.next=51;break}return A=0,a("[ retrytime reset due to in the login page ]"),a("[ sipResume stoped, user logout ]"),b=!1,e.abrupt("return");case 51:b=!0,a("[ doSipResume ]"),A++,a("sipResume retrytime "+A),(0,C.checkStgReConnect)().then(h.reLoginSipserver).then(function(e){return e.result?n(M).then(t):c.default.reject(e)}).catch(function(e){T.error("sipResume Error",e),a("sipResume retrytime "+A),G=!0,F=setTimeout(r,Math.abs(A*P))});case 56:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();if(a("[ sipResume ]"),!N)return a("[ sipResume current is logout or kickout, no resume ]"),void(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&H());if(e?(A=0,a("[ retrytime reset due to forceInitRetryTime ]"),(0,m.getLoginModel)().then(function(e){e.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER})):a("[ exec due to SipRegResultNotify => TUP send (data.notify=98305) message ]"),b){if(a("[ currentInErrorSetTimeoutFlag ] "+G),a("[ currentInSipResultCheck ] "+D),!G)return a("[ sipResume is excuting, no need to do again ]");G=!1,clearTimeout(F)}var i=PromiseObject();return a("[ sipResume start ]"),b=!0,window.CLIENTCONFIG.USE_IM||E(constant.APP_STATE.RECONNECTING),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(W=0,window.meetingWHGetLocalIp(),setTimeout(function(){T.info("[IT-Meeting] meetinghw to do sipserverDeregister"),(0,h.sipserverDeregister)(),T.info("[IT-Meeting] meetinghw to do doSipResume"),o()},1e3)):o(),(0,m.getLoginModel)().then(function(e){if(!e.useIM)return i})});window.sipResume=V;var K=(t.registerResumeEvent=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:N=!0,a("[ RegisterResumeEvent ]"),window.CLIENTCONFIG.ISMOBILE?window.addEventListener("networkchange",_):(window.electron.ipcRenderer.addListener("suspend",g),window.addEventListener("offline",i)),window.addEventListener("stgTunnelDisconnected",v);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.clearResumeService=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a("[ ClearResumeService ]"),S=!1,N=!1,window.CLIENTCONFIG.ISMOBILE?window.removeEventListener("networkchange",_):(window.electron.ipcRenderer.removeListener("suspend",g),window.removeEventListener("offline",i)),window.removeEventListener("stgTunnelDisconnected",v);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Y=null,q=t.doSipResumeAndEserverDetect=function(){var e=(0,p.default)(l.default.mark(function e(t){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:r=e.sent,a("[ doSipResumeAndEserverDetect -> sipResume ]",t),window.CLIENTCONFIG.ISMOBILE&&r.isMultiDeviceLogined||V(),r.useIM&&N&&(a("[ doSipResumeAndEserverDetect -> eServerDetect ]",t),coreIm.checkEServerIsOnline());case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.registerSipResultCallback=function(){window.removeEventListener("sipRegResultEvent",w),window.addEventListener("sipRegResultEvent",w)};window.handleResumeLogin=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=window.getRoute(),"main/conference"===t&&(window.noactivity=!1,window.showPageLoading(!1),"function"==typeof window.resumeGetConfInterval&&window.resumeGetConfInterval()),""===t&&window.goRoute("main/conference");case 3:case"end":return e.stop()}},e,void 0)})),window.resume=y},224:function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function a(e){var t=n(e),r=t[0],a=t[1];return 3*(r+a)/4-a}function o(e,t,r){return 3*(t+r)/4-r}function i(e){for(var t,r=n(e),a=r[0],i=r[1],s=new f(o(e,a,i)),u=0,c=i>0?a-4:a,d=0;d<c;d+=4)t=l[e.charCodeAt(d)]<<18|l[e.charCodeAt(d+1)]<<12|l[e.charCodeAt(d+2)]<<6|l[e.charCodeAt(d+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===i&&(t=l[e.charCodeAt(d)]<<2|l[e.charCodeAt(d+1)]>>4,s[u++]=255&t),1===i&&(t=l[e.charCodeAt(d)]<<10|l[e.charCodeAt(d+1)]<<4|l[e.charCodeAt(d+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function s(e){return d[e>>18&63]+d[e>>12&63]+d[e>>6&63]+d[63&e]}function u(e,t,r){for(var n,a=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(s(n));return a.join("")}function c(e){for(var t,r=e.length,n=r%3,a=[],o=0,i=r-n;o<i;o+=16383)a.push(u(e,o,o+16383>i?i:o+16383));return 1===n?(t=e[r-1],a.push(d[t>>2]+d[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(d[t>>10]+d[t>>4&63]+d[t<<2&63]+"=")),a.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=c;for(var d=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,g=p.length;_<g;++_)d[_]=p[_],l[p.charCodeAt(_)]=_;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},225:function(e,t){t.read=function(e,t,r,n,a){var o,i,s=8*a-n-1,u=(1<<s)-1,c=u>>1,d=-7,l=r?a-1:0,f=r?-1:1,p=e[t+l];for(l+=f,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+l],l+=f,d-=8);for(i=o&(1<<-d)-1,o>>=-d,d+=n;d>0;i=256*i+e[t+l],l+=f,d-=8);if(0===o)o=1-c;else{if(o===u)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,n),o-=c}return(p?-1:1)*i*Math.pow(2,o-n)},t.write=function(e,t,r,n,a,o){var i,s,u,c=8*o-a-1,d=(1<<c)-1,l=d>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,_=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),t+=i+l>=1?f/u:f*Math.pow(2,1-l),t*u>=2&&(i++,u/=2),i+l>=d?(s=0,i=d):i+l>=1?(s=(t*u-1)*Math.pow(2,a),i+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,a),i=0));a>=8;e[r+p]=255&s,p+=_,s/=256,a-=8);for(i=i<<a|s,c+=a;c>0;e[r+p]=255&i,p+=_,i/=256,c-=8);e[r+p-_]|=128*g}},228:function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUportalApi=void 0;var a=r(141),o=n(a),i=r(142),s=n(i),u=r(119),c=n(u),d=r(120),l=n(d),f=r(121),p=n(f),_=r(69),g=n(_),w=r(1),v=n(w),E=r(2),h=n(E),I=r(4),m=n(I),L=r(405),C=n(L),T=r(136),N=r(164),S=r(308),O=r(235),R=r(309),y=r(211),x=r(413),b=coreLogger.getLogger("logic")("login/uportal"),A=function e(){var t=this;(0,m.default)(this,e),this.loadLastUportalInfoFromDB=(0,h.default)(v.default.mark(function e(){var r,n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"LastUportalLoginIP"});case 2:r=e.sent,n=r&&r.value&&JSON.parse(r.value)||{},t.value=n.value||"",t.serverKey=n.serverKey||"";case 6:case"end":return e.stop()}},e,t)})),this.loadLastUportalInfo=function(){var e=(0,h.default)(v.default.mark(function e(r){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isFirstLoad){e.next=4;break}return t.isFirstLoad=!1,e.next=4,t.loadLastUportalInfoFromDB();case 4:t.serverKey!==r&&(t.value=""),t.serverKey=r;case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.saveLastUportalInfo=function(){var e=(0,h.default)(v.default.mark(function e(r,n){var a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.serverKey!==r||t.value!==n){e.next=2;break}return e.abrupt("return",!0);case 2:return t.serverKey=r,t.value=n,a={serverKey:t.serverKey,value:t.value},e.abrupt("return",coreDb.saveLoginSetting({key:"LastUportalLoginIP",value:(0,g.default)(a)}));case 6:case"end":return e.stop()}},e,t)}));return function(t,r){return e.apply(this,arguments)}}(),this.value="",this.serverKey="",this.isFirstLoad=!0},k=function e(){var t=this;(0,m.default)(this,e),this.switchProxy=(0,h.default)(v.default.mark(function e(){var r,n,a,o,i,s,u,c,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.info("[ ProxyUtil ] switchProxy"),e.next=3,coreAccount.getLoginModel();case 3:return r=e.sent,n=r.isSupportProxy,a=r.isUseSysProxy,o=r.proxyAddress,i=r.proxyPort,s=r.proxyAccount,e.next=11,coreSecurity.getPasswordManager();case 11:return u=e.sent,e.next=14,u.getPassword("proxyPassword");case 14:if(c=e.sent,t.lastProxyInfo={isSupportProxy:n,isUseSysProxy:a,proxyAddress:o,proxyPort:i,proxyAccount:s,proxyPassword:c},!n){e.next=21;break}return e.next=19,coreAccount.setProxyInfo({isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:"",proxyPort:"",proxyAccount:"",proxyPassword:""});case 19:e.next=27;break;case 21:return e.next=23,window.getSystemProxy();case 23:if(!(d=e.sent)){e.next=27;break}return e.next=27,coreAccount.setProxyInfo({isSupportProxy:!0,isUseSysProxy:!0,proxyAddress:d.sysProxyAddress||"",proxyPort:d.sysProxyPort||"",proxyAccount:"",proxyPassword:""});case 27:case"end":return e.stop()}},e,t)})),this.resetProxy=(0,h.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.info("[ ProxyUtil ] resetProxy"),!t.lastProxyInfo){e.next=3;break}return e.abrupt("return",coreAccount.setProxyInfo(t.lastProxyInfo));case 3:t.lastProxyInfo=null;case 4:case"end":return e.stop()}},e,t)})),this.lastProxyInfo=null};window.isRepeateCall=!1;var P=function(t){function r(){var t=this;(0,m.default)(this,r);var n=(0,l.default)(this,(r.__proto__||(0,c.default)(r)).call(this));return n.getUportalLoginInfo=function(){var e=(0,h.default)(v.default.mark(function e(r,n,a,o){var i,s,u,c,d,l,f,p,_,g,w;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:if(i=e.sent,s=i.isOAuth,u=i.account,c=i.user_ticket,d=i.userTicket,l=i.authType,f=i.domain,1!==l){e.next=6;break}return e.abrupt("return",{auth_type:constant.AUTH_TYPE.TICKET,user_agent:window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:constant.USER_AGENT.PC,short_ticket:d,domain:f,auth_info:{user_name:"",password:""},auth_server:{server_type:0,server_url:a,server_port:parseInt(o),server_version:"V6R6C00",proxy_url:""}});case 6:return p="",r.indexOf("@")<0?(p="mobile",b.info("lgn acc is ",handlePhoneNumber(r))):r.length>4&&b.info("lgn acc is",r.length>4?r.substr(0,3)+"******"+r.substr(-4):"****"),b.info("login user_name_type =",p),_="",g="",i.isOAuth&&(c.length>40?_=c:g=c),w=window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:window.isHubEnv?constant.USER_AGENT.MAXHUB:"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC,b.info("uportal user_agent=",w),e.abrupt("return",{auth_type:s?constant.AUTH_TYPE.TICKET_WITH_USERNAME:constant.AUTH_TYPE.NORMAL,user_agent:w,user_tiket:_,short_ticket:g,user_name_type:p,src_of_psw:1,auth_info:{user_name:s?u:r,password:n},auth_server:{server_type:0,server_url:a,server_port:parseInt(o),server_version:"V6R6C00",proxy_url:""}});case 14:case"end":return e.stop()}},e,t)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.uportalLogin=function(){var e=(0,h.default)(v.default.mark(function e(r){var a,o,i,s,u,c,d,l,f,p,_=r.loginAccount,g=r.password,w=r.serverAddress,E=r.serverPort;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:return a=e.sent,a.set({isInUportalLogin:!0,uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING}),e.next=6,coreTup.getUportalInstance();case 6:if(o=e.sent,o.setNotifyFunc(360459,n.refreshTokenCallback),i=a.isSupportCACertCheck,s=window.EXEC_PATH,i?window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.loginSetTlsParamsEx(s,1):o.loginSetTlsParams(s,1):window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.loginSetTlsParamsEx(s,0):o.loginSetTlsParams(s,0),window.CLIENTCONFIG.ISBIGWIN){e.next=14;break}return e.next=14,n.setLoginProxy(o);case 14:return u=void 0,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER]}),e.next=18,n.getUportalLoginInfo(_,g,w,E);case 18:if(c=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=27;break}return e.next=22,o.loginAuthorizeEx(c);case 22:d=e.sent,l=d.param,u=l,e.next=32;break;case 27:return e.next=29,o.loginAuthorize(c);case 29:f=e.sent,p=f.param,u=p;case 32:return(0,R.setFistLoginInfo)(u,_),n.loggerUportalLogin(u),e.abrupt("return",u);case 35:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.loggerUportalLogin=function(){var e=(0,h.default)(v.default.mark(function e(r){var a,o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,g.default)(r),o=JSON.parse(a),i=new Array("server_port","server_uri","server_num","auth_mode","corp_id","deploy_mode","display_name","dms_server","eab_server","expire","ItLoginAutoReg","ItPasswordModifyUrl","ItSignedUrl","ItUploadHeadImgUrl","group_server","is_first_login","is_free_user","left_days_of_pwd","media_type","num_of_site","onebox_app_id","onebox_server_addr","onebox_server_type","password_type","privacy_version","redirect_url","register_server","sip_domain","androidpush_uri","conf_type","conf_uri","eab_uri","eserver_uri","eserver_uri_backup","eua_server","http_proxy_uri","httpsproxy_uri","is_mainsite","is_siptls","is_srtp","maa_drproxy_uri","maa_proxy_uri","maa_uri","maa_uri_backup","ms_param_path_uri","ms_param_uri","onebox_address_uri","priority","prophoto_uri","push_gateway","server_name","sip_tls_uri","sip_uri","account","eserver_stg_uri","eserver_stg_uri_backup","maa_stg_uri","maa_stg_uri_backup","sip_stg_uri","stg_uri","svn_uri","tms_server","num_of_server","sbc_domain","site_name","tms_account","terminal_func_type","terminal_scene","user_id","result","user_type"),n.paraseJson(o,i),b.info("uportal login result:",o);case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.paraseJson=function(){var e=(0,h.default)(v.default.mark(function e(r,a){var o,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o in r)i=r[o],"object"===(void 0===i?"undefined":(0,s.default)(i))?n.paraseJson(i,a):-1===a.indexOf(o)&&(r[o]="******");case 1:case"end":return e.stop()}},e,t)}));return function(t,r){return e.apply(this,arguments)}}(),n.updateSiteInfo=function(){var e=(0,h.default)(v.default.mark(function e(r){var n,a,i,s,u,c,d,l,f,p,_,g,w,E,h,I,m,L,C,N,S,O,R,y,A,k,P,M,U,G,D,F,B,W,H,V,K,Y,q,j,$,X,z,J,Q,Z,ee,te,re,ne,ae,oe,ie,se,ue,ce,de,le,fe,pe,_e,ge,we,ve,Ee,he,Ie,me,Le,Ce,Te,Ne,Se,Oe,Re,ye,xe,be,Ae,ke,Pe,Me,Ue,Ge,De,Fe,Be,We,He,Ve,Ke,Ye,qe,je,$e,Xe,ze,Je,Qe,Ze,et,tt,rt,nt,at,ot,it,st,ut,ct,dt,lt,ft,pt,_t,gt,wt,vt,Et,ht,It,mt;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:for(n=e.sent,a=r.uportal_authorize_result.terminal_func_type,i=!0,s=r.uportal_authorize_result.terminal_scene,u=!!s&&"room"===s,(window.CLIENTCONFIG.ENABLE_IT_MEETING||u)&&(a=5),c="",-1!==a?(n.funcType=a,1===a?(c="soft mode",window.CLIENTCONFIG.USE_MEETING=!1,window.CLIENTCONFIG.USE_IM=!1,window.CLIENTCONFIG.USE_CALL=!0,window.CLIENTCONFIG.DEFAULT_MENU="contactGroups",window._currentRoute="/main/contactGroups",$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["contactGroups","myInfo"]):5===a?(c="te mode",window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!1,window.CLIENTCONFIG.USE_CALL=!0,window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference",$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["conference","contactGroups","myInfo"]):7===a&&(c="uc mode",window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!0,window.CLIENTCONFIG.USE_CALL=!0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(window.CLIENTCONFIG.DEFAULT_MENU="recent",window._currentRoute="/main/recent"):(window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference"),d=$getState().menu.currentNav,window.CLIENTCONFIG.DEFAULT_MENU!==d&&"nav"!==d&&d?coreCommon.switchNav(d):$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["recent","conference","contactGroups","myInfo"]),(0,x.setAppConfigList)(),b.info("functype == "+a+" "+c)):(window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!0,window.CLIENTCONFIG.USE_CALL=!0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(window.CLIENTCONFIG.DEFAULT_MENU="recent",window._currentRoute="/main/recent"):(window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference"),l=$getState().menu.currentNav,window.CLIENTCONFIG.DEFAULT_MENU!==l&&"nav"!==l?coreCommon.switchNav(l):$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["conference","recent","contactGroups","myInfo"],b.info("functype == -1")),f=r.uportal_authorize_result.all_sip_server.server_info,p=f.length<window.CLIENTCONFIG.CALL_D_MAX_IP_WHITE_LIST_COUNT?f.length:window.CLIENTCONFIG.CALL_D_MAX_IP_WHITE_LIST_COUNT,_=new Array,g=0;g<p;g++)w={server_address:f[g].server_uri,server_port:f[g].server_port},_.push(w);if($dispatch(coreUi.updateMenuInfo({menuList:window.CLIENTCONFIG.MOBILE_MENU_LIST})),!(E=r.uportal_authorize_result.site_info)||!E[0]){e.next=132;break}h=E[0],I=h.num_of_server,m=h.access_server,L=h.tms_account,C="",N="",S="",O="",R="",y="",A="",k="",P="",M="",U="",G="",D="",F="",B="",W="",H="",V="",K="",Y="",q=m[0].conf_uri,j=m[0].conf_type,j&&"CMS"===j&&!isNullOrEmpty(q)?(b.info("new conf AS is supported"),n.isSupportAS=!0,$dispatch(coreUi.changeAsAddress(q))):(b.info("new conf AS is not supported"),n.isSupportAS=!1),$=m[0].http_proxy_uri,isNullOrEmpty($)||(n.ctdServerUri=$,n.confctrlUri=$,b.info("http_proxy_uri:"+$)),X=m[0].onebox_address_uri,z="CloudEC","Workplace"===window.CLIENTCONFIG.NEW_APP_NAME&&(z="espace"),J=r.uportal_authorize_result.corp_id||"",X&&coreIm.setOfflineFileConfig(!0,{onebox_app_id:z,onebox_server_addr:X,corp_id:J}),"supportRest"===L&&(i=!1),window.CLIENTCONFIG.ISBIGWIN&&(i=!0),Q=0,Z=0;case 36:if(!(Z<I)){e.next=60;break}if(m&&m[Z]){e.next=39;break}return e.abrupt("continue",57);case 39:C+=m[Z].sip_uri,N+=m[Z].sip_tls_uri,S+=m[Z].svn_uri,P+=m[Z].stg_info.stg_uri,G+=m[Z].stg_info.sip_stg_uri,D+=m[Z].stg_info.eserver_stg_uri,F+=m[Z].stg_info.eserver_stg_uri_backup,B+=m[Z].maa_proxy_uri,W+=m[Z].maa_drproxy_uri,y+=m[Z].eserver_uri,A+=m[Z].eserver_uri_backup,O+=m[Z].httpsproxy_uri,M=m[0].stg_info.account,U=m[0].stg_info.password,V||(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(m[Z].tms_uri&&(V=m[Z].tms_uri),m[Z].tms_server&&(V=m[Z].tms_server)):V=m[Z].tms_server),K||(K=m[Z].ms_param_uri),Y||(Y=m[Z].eua_server),Z<I-1&&(C+=";",N+=";",S+=";",P+=";",G+=";",D+=";",F+=";",B+=";",y+=";",A+=";",O+=";");case 57:Z++,e.next=36;break;case 60:if(b.info("sipUri:"+C+" sipTlsUri:"+N),Q=I,D+=";",D+=F,y+=";",y+=A,B+=";",B+=W,window.isSupportiDo=i,b.info("uportal isSupportiDo: "+window.isSupportiDo),ee=r.uportal_authorize_result,te=ee.auth_token,re=ee.sip_account,ne=ee.sip_impi,ae=ee.sip_password,oe=ee.password_type,ie=ee.eab_server,se=ee.group_server,ue=ee.deploy_mode,ce=ee.sip_domain,de=ee.auth_serinfo,le=ee.is_free_user,fe=ee.privacy_version,pe=ee.user_type,_e=r.uportal_authorize_result,ge=_e.extra_parameters,we=_e.all_extra_parameter,isNullOrEmpty(ge)&&!isNullOrEmpty(we)){ve={};for(Ee in we)ve[we[Ee].parameter_name]=we[Ee].parameter_value;ge=ve}isNullOrEmpty(ge)||Y||(Y=ge.eua_server),he=ue,Ie="",me="",Le="",Ce="",ge&&(ge.ItPasswordModifyUrl&&(Ie=ge.ItPasswordModifyUrl),ge.ItLoginAutoReg&&(me=ge.ItLoginAutoReg),ge.ItSignedUrl&&(Le=ge.ItSignedUrl),ge.ItLoginAutoReg&&(Ce=ge.ItUploadHeadImgUrl)),he=0===ue?constant.MEETING_NET_TYPE.USM_MEETING:1===ue?constant.MEETING_NET_TYPE.SMC_MEETING:constant.MEETING_NET_TYPE.MEDIAX_MEETING,b.info("uportal get deploy_mode is "+ue+",envtype is "+he),Te=y.split(";"),Ne=O.split(";"),Se=B.split(";").filter(function(e){return!!e}),b.info("updateSiteInfo eserverUriList.length: "+Te.length+", httpsProxyList.length: "+Ne.length+", maaProxyUrlList.length: "+Se.length),Te.length>0&&(k=Te[0]),Ne.length>0&&(R=Ne[0]),Se.length>0&&(H=Se[0]),Oe=0,Re=k.split(":"),ye=(0,o.default)(Re,2),xe=ye[0],be=ye[1],Ae=H.split(":"),ke=(0,o.default)(Ae,2),Pe=ke[0],Me=ke[1],Ue=C.split(";"),Ge=Ue[0]?Ue[0].split(":"):["",0],De=(0,o.default)(Ge,2),Fe=De[0],Be=De[1],We=Ue[1]?Ue[1].split(":"):["",0],He=(0,o.default)(We,2),Ve=He[0],Ke=He[1],Ye=Ue[2]?Ue[2].split(":"):["",0],qe=(0,o.default)(Ye,2),je=qe[0],$e=qe[1],Xe=Ue[3]?Ue[3].split(":"):["",0],ze=(0,o.default)(Xe,2),Je=ze[0],Qe=ze[1],Ze=N.split(";"),et=Ze[0]?Ze[0].split(":"):["",0],tt=(0,o.default)(et,2),rt=tt[0],nt=tt[1],at=Ze[1]?Ze[1].split(":"):["",0],ot=(0,o.default)(at,2),it=ot[0],st=ot[1],ut=Ze[2]?Ze[2].split(":"):["",0],ct=(0,o.default)(ut,2),dt=ct[0],lt=ct[1],ft=Ze[3]?Ze[3].split(":"):["",0],pt=(0,o.default)(ft,2),_t=pt[0],gt=pt[1],wt="",e.t0=v.default.keys(E[0].access_server);case 104:if((e.t1=e.t0()).done){e.next=112;break}if(vt=e.t1.value,isNullOrEmpty(E[0].access_server[vt].push_gateway)){e.next=110;break}return b.info("push_gateway:",E[0].access_server[vt].push_gateway),wt=E[0].access_server[vt].push_gateway,e.abrupt("break",112);case 110:e.next=104;break;case 112:return Et={authToken:te,sipAccount:re,sipImpi:ne,sipPasswordType:oe,eabUri:ie,groupServer:se,mainSiteSum:Q,currentNum:Oe,eServerAddressAll:y,eServerAddress:xe,eServerPort:parseInt(be),sipServerAddress:Fe,sipServerPort:parseInt(Be),sipTlsServerAddress:rt,sipTlsPort:parseInt(nt),sipTlsServerBackup1:it,sipTlsPortBackup1:parseInt(st),sipTlsServerBackup2:dt,sipTlsPortBackup2:parseInt(lt),sipTlsServerBackup3:_t,sipTlsPortBackup3:parseInt(gt),sipDomain:ce,sipServerBackup1:Ve,sipServerPortBackup1:parseInt(Ke),sipServerBackup2:je,sipServerPortBackup2:parseInt($e),sipServerBackup3:Je,sipServerPortBackup3:parseInt(Qe),sipUri:C,svnUri:S,httpsProxyAll:O,httpsProxy:R,stgUri:P,stgAccount:M,sipStgUri:G,eserverStgUri:D,deployMode:he,funcType:a,tmsServer:V,changeItPasswordUrl:Ie,itOAuthUrl:me,itSignedUrl:Le,itUploadHeadImgUrl:Ce,sipWhiteList:_,serverUportalAddress:de.server_uri,serverUportalPort:de.server_port,sipLoginissiptls:E[0].access_server[0].is_siptls,sipLoginissrtp:E[0].access_server[0].is_srtp,pushgwUri:wt,smcUri:K,isIwb:u,privacy_version:fe,euaServer:Y,maaProxyUrlAll:B,maaProxyAddress:Pe,maaProxyPort:Me,real_user_account:r.uportal_authorize_result.real_user_account},Et.isFreeUser=pe!==constant.REGISTER_USER_TYPE.FREE?0:1,b.info("isFreeUser: "+Et.isFreeUser),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&ne.indexOf("@")&&(ht=ne.split("@")[0],window.sendSipNoToProto(ht)),Et.show_account=n.account,(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||n.isSupportAS)&&(It=r.uportal_authorize_result.real_user_account,Et.show_account=n.account,Et.account=It),coreUt.utConfigAccountInfo({configAccount:Et.show_account}),e.next=121,coreSecurity.getPasswordManager();case 121:if(mt=e.sent,e.t2=U,!e.t2){e.next=126;break}return e.next=126,mt.setPassword("stgPassword",U);case 126:if(e.t3=ae,!e.t3){e.next=130;break}return e.next=130,mt.setPassword("sipPassword",ae);case 130:return n.set(Et),e.abrupt("return",Et);case 132:return e.abrupt("return",{});case 133:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.uportalAllonline=(0,h.default)(v.default.mark(function e(){var r,a,o,i,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.getUportalRes(),a=r.param,e.next=4,(0,T.getLoginModel)();case 4:return o=e.sent,i=o.loginAccount,o.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,account:a.uportal_authorize_result.user_name||i}),e.next=9,n.updateSiteInfo(a);case 9:return s=e.sent,e.abrupt("return",{result:!0,loginInfo:s});case 11:case"end":return e.stop()}},e,t)})),n.setLoginProxy=function(){var e=(0,h.default)(v.default.mark(function e(r){var n,a,o,i,s,u,c,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:return n=e.sent,a=n.isSupportProxy,o=n.proxyAddress,i=n.proxyPort,s=n.proxyAccount,e.next=9,coreSecurity.getPasswordManager();case 9:return u=e.sent,e.next=12,u.getPassword("proxyPassword");case 12:if(c=e.sent,a||(o="",i="0",s="",c=""),d={server_port:parseInt(i),server_uri:o,user_name:s,password:c},b.info("setLoginProxy proxyAddress: "+o),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=21;break}return e.next=19,r.setLoginProxy(d);case 19:e.next=23;break;case 21:return e.next=23,r.setLoginProxyEx(d);case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.refreshTokenCallback=function(){var r=(0,h.default)(v.default.mark(function r(n){var a,o,i,s,u,c,d,l;return v.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,T.getLoginModel)();case 2:if(a=t.sent,!((o=n.param)&&0===o.result&&o.refresh_token_result&&o.refresh_token_result.auth_token)){t.next=34;break}if(b.info("refreshTokenSuccess"),$dispatch(coreUi.changeuportalTokenErr(!1)),coreCommon.dispatchModuleEvent("login",{event:"tokenUpdate",code:0,data:o.refresh_token_result.auth_token}),a.set({authToken:o.refresh_token_result.auth_token}),b.info("[check upgrade] for refresh [token]"),coreAccount.checkUpgrade({isFirstIn:!1,token:o.refresh_token_result.auth_token}),"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME||window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=17;break}return t.next=14,coreTup.getOfflineFileInstance();case 14:i=t.sent,s=new e(o.refresh_token_result.auth_token,"base64").toString(),i.refreshToken(s);case 17:if(b.info("refreshToken update stg info"),u=o.refresh_token_result.stg_account,c=o.refresh_token_result.stg_pwd,!u||!c){t.next=30;break}return a.set({stgAccount:u}),t.next=24,coreSecurity.getPasswordManager();case 24:if(d=t.sent,t.t0=c,!t.t0){t.next=29;break}return t.next=29,d.setPassword("stgPassword",c);case 29:(0,O.updateStgAuthInfo)({account:u,password:c});case 30:a.isHWUC||coreContact.refreshTocken(),coreCwmp.cwmpConfigToken().then(function(){b.info("refresh cwmp [token] sucess")},function(){b.info("refresh cwmp [token] failed")}),t.next=40;break;case 34:if(b.info("refresh failed "+o.result+" isRepeateCall"+window.isRepeateCall),!window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=38;break}return b.info("it welink refresh [token] no use here"),t.abrupt("return");case 38:l=9===o.result&&!0||!1,coreConf.UportalTokenErr(l);case 40:case"end":return t.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}(),n.switchProxy=(0,h.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.proxyUtil.switchProxy());case 1:case"end":return e.stop()}},e,t)})),n.resetProxy=(0,h.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.proxyUtil.resetProxy());case 1:case"end":return e.stop()}},e,t)})),n.loginToUportal=(0,h.default)(v.default.mark(function e(){var r,a,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.innerLoginToUportal();case 2:if(r=e.sent,!r.result){e.next=5;break}return e.abrupt("return");case 5:if(r.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT){e.next=7;break}return e.abrupt("return",(0,N.LoginError)(r));case 7:return e.next=9,coreAccount.getLoginModel();case 9:if(a=e.sent,!(o=a.isResume)){e.next=13;break}return e.abrupt("return",(0,N.LoginError)(r));case 13:return e.next=15,n.switchProxy();case 15:return e.next=17,n.innerLoginToUportal();case 17:if(r=e.sent,r.result){e.next=22;break}return e.next=21,n.resetProxy();case 21:return e.abrupt("return",(0,N.LoginError)(r));case 22:case"end":return e.stop()}},e,t)})),n.innerLoginToUportal=(0,h.default)(v.default.mark(function e(){var r,a,o,i,s,u,c,d,l,f,p,_,g,w,E,h,I,m,L,C;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:return r=e.sent,a=r.account,o=r.displayAccount,i=r.serverUportalAddress,s=r.serverUportalPort,u=r.isResume,c=r.tenantid,d=r.loginRecordList,l=r.sipLoginOnly,f=r.password,b.info("<account_login><3_uportal>begin"),e.next=7,coreSecurity.getPasswordManager();case 7:if(p=e.sent,window.isHubEnv){e.next=12;break}return e.next=11,p.getPassword("password");case 11:f=e.sent;case 12:if("Workplace"!==window.CLIENTCONFIG.NEW_APP_NAME||l){e.next=55;break}_=void 0,g=0;case 15:if(!(g<d.length)){e.next=22;break}if(c!==d[g].tenantid){e.next=19;break}return _=d[g],e.abrupt("break",22);case 19:g++,e.next=15;break;case 22:if(isNullOrEmpty(_)&&window.isHubEnv&&(_={account:a},o=a,f=f),!_){e.next=55;break}return w=_.thirdcertype?_.tenantid:"",b.info("sso login,tenantcn:"+handlePhoneNumber(_.tenantcn)+",thirdcertype:"+_.thirdcertype),e.next=28,coreAccount.ssoLogin({loginName:o,password:f,tenantid:w});case 28:if(E=e.sent,r.crypt_token=E&&E.recv_body.crypt_token,!E.result||!E.recv_body.crypt_token){e.next=41;break}if(r.user_ticket=E.recv_body.crypt_token,o=_.account,isNullOrEmpty(E.recv_body.meetingurl)){e.next=38;break}return e.next=36,coreAccount.getUrlHost(E.recv_body.meetingurl);case 36:i=e.sent,r.serverUportalAddress=i;case 38:r.isOAuth=!0,e.next=55;break;case 41:h=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,e.t0=parseInt(E.code),e.next=1101===e.t0?45:1103===e.t0?47:1146===e.t0?49:51;break;case 45:return h=constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",53);case 47:return h=constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR,e.abrupt("break",53);case 49:return h=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED,e.abrupt("break",53);case 51:return h=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,e.abrupt("break",53);case 53:return b.info("<account_login><3_uportal>end ok/failed"),e.abrupt("return",{result:!1,errorCode:h,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u});case 55:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=60;break}o=window.getLinkSmcUportalAccount?window.getLinkSmcUportalAccount:window.linkSmcW3Acc,f=window.getLinkSmcUportalPassword?window.getLinkSmcUportalPassword:window.linkSmcW3Pas,e.next=63;break;case 60:if(window.CLIENTCONFIG.ISBIGWIN){e.next=63;break}return e.next=63,n.IP.loadLastUportalInfo(i);case 63:I=i,n.IP.value.length>0&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&(b.info("[ loginToUportal ] login replace ip"),I=n.IP.value),m=void 0,L=2;case 67:if(!(L>0)){e.next=121;break}return b.info("[ loginToUportal ] login serverAddress:"+I+", serverPort:"+s),e.next=71,n.uportalLogin({loginAccount:o,password:f,serverAddress:I,serverPort:s});case 71:if(C=e.sent,b.info("[ loginToUportal ] result:"+C.result+";reloginCount:"+L),0!==C.result){e.next=80;break}return e.next=76,n.dealWithUportalLoginSuccess(C,I,o);case 76:return m=e.sent,e.abrupt("break",121);case 80:if(C.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_CA_VERIFY_FAILED){e.next=91;break}return e.next=83,n.dealWithUportalLoginFailed(C,o);case 83:return e.next=85,n.dealWithUportalLoginFailedAuth(a,f,I,s);case 85:if(m=e.sent,m.result){e.next=89;break}return b.info("[ loginToUportal ] download ca failed, exit login loop"),e.abrupt("break",121);case 89:e.next=119;break;case 91:if(C.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED){e.next=100;break}return L--,e.next=95,n.dealWithUportalLoginFailed(C,o);case 95:return m=e.sent,b.info("[ loginToUportal ] user or password wrong, exit login loop"),e.abrupt("break",121);case 100:if(C.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_SERVER_REDIRECT){e.next=113;break}return e.next=103,n.dealWithUportalLoginFailedRedirect(C,a,f);case 103:if(m=e.sent,!m.result||!m.serverInfo){e.next=109;break}I=m.serverInfo.address||I,s=m.serverInfo.port||s,e.next=111;break;case 109:return b.info("[ loginToUportal ] 302 failed, exit login loop"),e.abrupt("break",121);case 111:e.next=119;break;case 113:return e.next=115,n.dealWithUportalLoginFailed(C,o);case 115:m=e.sent,I=i,L--,b.info("[ loginToUportal ] reloginCount:"+L);case 119:e.next=67;break;case 121:return b.info("<account_login><3_uportal>end",m.result),e.abrupt("return",m);case 123:case"end":return e.stop()}},e,t)})),n.dealWithUportalLoginSuccess=function(){var e=(0,h.default)(v.default.mark(function e(r,a,o){var i,s,u,c,d,l,f,p,_,g,w;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:if(i=e.sent,s=i.sipLoginOnly,u=i.isOAuth,c=i.isResume,s||u||"Workplace"!==window.CLIENTCONFIG.NEW_APP_NAME||window.isHubEnv){e.next=6;break}return e.abrupt("return",n.dealWithAccountMutex());case 6:return y.actionGetCorpResourceAtomic.reset(),y.actionGetCorpResourceAtomic.wait(),d=r.uportal_authorize_result,l=d.user_name,f=d.onebox_app_id,p=d.onebox_server_addr,_=d.corp_id,p&&(_=_||"",coreIm.setOfflineFileConfig(!0,{onebox_app_id:f,onebox_server_addr:p,corp_id:_})),i.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,account:l||(u?i.account:o)}),e.next=14,n.updateSiteInfo(r);case 14:if(g=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,resultParams:[1,c?1:0],isTrackTimeCosts:!0}),i.isInUportalLogin=!1,g&&g.serverUportalAddress&&n.IP.value!==g.serverUportalAddress&&(window.CLIENTCONFIG.ISBIGWIN||n.IP.saveLastUportalInfo(a,g.serverUportalAddress),b.info("uportalAddrUpdate")),window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||window.isPluginEnv){e.next=23;break}if(!(0,R.checkIsFirstLogin)()||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=23;break}return i.setLoginStatus(!1,!1),(0,R.firstLoginChangePassword)(),e.abrupt("return",{result:!1,errorCode:"fistLoginReject",errorType:constant.LOGIN_ERROR_TYPE.common,isResume:c});case 23:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=36;break}if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=29;break}return e.next=28,window.isFloatWindow;case 28:e.t0=e.sent;case 29:if(!(w=e.t0)){e.next=34;break}b.info("the window is float "),e.next=36;break;case 34:return b.error("has no activity, login err!!!"),e.abrupt("return",{result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common});case 36:if(!window.isHubEnv||i.isIwb){e.next=39;break}return i.setLoginStatus(!1,!1),e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT,errorType:constant.LOGIN_ERROR_TYPE.common,isResume:c});case 39:return e.abrupt("return",{result:!0});case 40:case"end":return e.stop()}},e,t)}));return function(t,r,n){return e.apply(this,arguments)}}(),n.dealWithUportalLoginFailedRedirect=function(){var e=(0,h.default)(v.default.mark(function e(r,a,o){var i,s,u,c,d,l,f,p,_,g;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:if(i=e.sent,s=r.uportal_authorize_result.redirect_url,i.OAuthUrl=s,b.info("[ O[Auth] ] enter the third ticket [auth], url:",desensitive(s)),"Huawei Meeting"!==window.CLIENTCONFIG.NEW_APP_NAME||-1!==s.indexOf("cloudportal")||window.isHubEnv){e.next=8;break}return e.abrupt("return",n.dealWithAccountMutex());case 8:if(i.isOAuth=!0,u=void 0,c=void 0,-1===s.indexOf("cloudportal")){e.next=23;break}if(d=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(l=d.exec(s))){e.next=19;break}f=l[1],p=l[2],_=l[3],u=f||p,c=_&&_||0,e.next=20;break;case 19:return e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:i.isResume});case 20:i.isOAuth=!1,e.next=30;break;case 23:return e.next=25,(0,S.getOAuthTicket)(a,o);case 25:return g=e.sent,e.next=28,(0,S.getOAuthAccount)(g);case 28:i.account=e.sent,i.user_ticket=g;case 30:return e.abrupt("return",{result:!0,serverInfo:{address:u,port:c}});case 31:case"end":return e.stop()}},e,t)}));return function(t,r,n){return e.apply(this,arguments)}}(),n.dealWithUportalLoginFailedAuth=function(){var e=(0,h.default)(v.default.mark(function e(r,n,a,o){var i,s,u,c,d;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,s="",u=!1,e.next=5,(0,T.getLoginModel)();case 5:if(c=e.sent,d=function(){var e=(0,h.default)(v.default.mark(function e(s){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.ret){e.next=5;break}return b.info("user click to start login download cacert"),e.next=4,(0,y.startLoginDownLoadCaCert)({account:r,password:n,serverAddress:a,serverPort:o});case 4:i=e.sent;case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=10,window.confirm(language.CA_CERT_IS_NOT_TRUSTED).then(d);case 10:e.next=14;break;case 12:return e.next=14,window.confirm(language.CA_CERT_IS_NOT_TRUSTED,!0).then(d);case 14:return null===i?(b.info("user cancel download cacert files"),u=!1,s="USER_CANCEL_DOWNLOAD_CA_CERT"):i&&0===i.result?(b.info("Download cacert success, re-login to uportal"),u=!0,s=""):(b.info("download cacert files failed"),u=!1,s=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR),e.abrupt("return",{result:u,errorCode:s,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c.isResume});case 16:case"end":return e.stop()}},e,t)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.dealWithUportalLoginFailed=function(){var e=(0,h.default)(v.default.mark(function e(r,a){var o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:return o=e.sent,window.CLIENTCONFIG.ISBIGWIN||n.IP.saveLastUportalInfo("",""),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,resultParams:[0,r.result,o.isResume?1:0],isTrackTimeCosts:!0}),o.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_FAILED,account:o.isOAuth?o.account:a}),b.error("baseLogin:loginUportal result=",r.result),o.isInUportalLogin=!1,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.uportalLoginFailed(r.result),e.abrupt("return",{result:!1,errorCode:r.result,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:o.isResume});case 10:case"end":return e.stop()}},e,t)}));return function(t,r){return e.apply(this,arguments)}}(),n.dealWithAccountMutex=(0,h.default)(v.default.mark(function e(){var r;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getLoginModel)();case 2:return r=e.sent,r.isInUportalLogin=!1,r.setLoginStatus(!1,!1),b.info("[ loginToUportal ] login fail. workplace account can not login on huawe meeting"),alert(language.LOGIN_ERR_DISTINGUISH_HUAWEIMEETING_OR_WORKPLACE),e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DISTINGUISH_HUAWEIMEETING_OR_WORKPLACE,errorType:constant.LOGIN_ERROR_TYPE.common,isResume:r.isResume});case 8:case"end":return e.stop()}},e,t)})),n.IP=new A,n.proxyUtil=new k,n}return(0,p.default)(r,t),r}(C.default),M=void 0;t.getUportalApi=function(){return isNullOrEmpty(M)&&(M=new P),M}}).call(t,r(131).Buffer)},229:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTempMediaxPort=t.updateTempMediaxAddress=t.updateTempSipGetState=t.updateTempSipPwd=t.getNickName=t.saveNickName=t.updateTempSipNick=t.updateTempSipAccount=t.updateTempSipPort=t.updateTempSipServer=t.buildStg=t.clearFireWallStore=t.saveFireWall=t.updateFirewallMode=t.detectFireWall=t.checkDetectFireWall=t.resumeAllSipService=t.stopSipRefresh=t.startSipRefresh=t.dealPcLogout=t.dealPcLogin=t.configSipIp=t.ipCallConfig=t.stopLocalServer=t.reLoginSipserver=t.unEnableBFCP=t.sipserverDeregister=t.clearnsipinfo=t.stgBuildforNoName=t.getStgInfo=t.handleSipOnlyJoinConf=t.handleAccountJoinConf=t.handletempsipconfinfo=t.prepareHandletempsipconfinfo=t.registerLoginEvent=void 0;var a=r(69),o=n(a),i=r(127),s=n(i),u=r(1),c=n(u),d=r(2),l=n(d),f=(t.resumeAllSipService=function(){var e=(0,l.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:return t=e.sent,coreCall.registerCallEvent(),coreCall.registerVideoEvent(),coreConf.getRegisterConfEventAtomic().wait(),e.next=8,coreConf.initializeDataConf();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.checkDetectFireWall=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.updateLocalIp();case 2:return t=e.sent,C.info(" start checkDetectFireWall "),e.next=6,coreDb.queryLoginSetting({key:"firewall"});case 6:if(r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)){e.next=22;break}if(n=JSON.parse(r.value),t!==n.ip){e.next=17;break}return C.info("detectFireWall local has store for ip :"+handleIp(t)),coreConf.setFireWallModeType(n.fireWallMode),T=n.fireWallMode,e.next=15,p(n.fireWallMode);case 15:e.next=20;break;case 17:return C.info("detectFireWall local has no store for ip :"+handleIp(t)),e.next=20,f(t);case 20:e.next=25;break;case 22:return C.info("detectFireWall local has no store for ip :"+handleIp(t)),e.next=25,f(t);case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.detectFireWall=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n,a,o,i,s,u,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(d)){e.next=4;break}return e.next=3,window.updateLocalIp();case 3:d=e.sent;case 4:return e.next=6,(0,I.getLoginModel)();case 6:if(t=e.sent,r=t.svnUri,n=t.useIM,a=t.stgUri,o=t.isMultiDeviceLogined,i=t.isMobile,void 0===a||""===a||";"===a||";;"===a||";;;"===a||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=29;break}if(s=void 0,!(u=t.isSupportProxy)){e.next=15;break}s={fire_wall_mode:0,result:0},e.next=18;break;case 15:return e.next=17,(0,E.startFireWallDetect)(r);case 17:s=e.sent;case 18:if(C.info("detectFireWall isSupportProxy:",u),!s||void 0===s.fire_wall_mode){e.next=26;break}return e.next=22,p(s.fire_wall_mode);case 22:return e.next=24,_(d,s.fire_wall_mode);case 24:e.next=27;break;case 26:C.error("firewall detect failed");case 27:e.next=32;break;case 29:C.info("reSetFireWallModeType"),coreConf.reSetFireWallModeType(),(0,E.updateFireWallAndSipInfo)(3);case 32:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),p=t.updateFirewallMode=function(){var e=(0,l.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.setFireWallModeType(t),T=t,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==t){e.next=5;break}return e.next=5,A();case 5:(0,E.updateFireWallAndSipInfo)(t);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_=t.saveFireWall=function(){var e=(0,l.default)(c.default.mark(function e(t,r){var n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={ip:t,fireWallMode:r},a=(0,o.default)(n),C.info("detectFireWall save "+(0,o.default)({ip:handleIp(t),fireWallMode:r})),coreDb.saveLoginSetting({key:"firewall",value:a});case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),g=(t.clearFireWallStore=function(){var e=(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("fireWall: clear local store"),coreDb.saveLoginSetting({key:"firewall",value:""});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.buildStg=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n,a,o,i,u,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:if(t=e.sent,r=t.useIM,n=t.fireWallMode,r){e.next=22;break}if(constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==n&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==n){e.next=21;break}return a=t.stgUri,o=t.stgAccount,e.next=9,coreSecurity.getPasswordManager();case 9:return i=e.sent,e.next=12,i.getPassword("stgPassword");case 12:return u=e.sent,C.info("TE mode need buildStgTunnel building"),e.next=16,(0,E.buildStgTunnel)({stgUri:a,stgAccount:o,stgPassword:u});case 16:if(d=e.sent,d.result){e.next=19;break}return e.abrupt("return",(0,I.LoginError)((0,s.default)({},d,{result:!1,errorCode:I.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:I.ErrorType.uportal})));case 19:e.next=22;break;case 21:C.info("firewall result is ok, no need to buildStgTunnel");case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r(406)),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(g),v=r(288),E=r(211),h=r(289),I=(r(291),r(164)),m=r(185),L=r(230),C=coreLogger.getLogger("logic")("login/sipServer"),T=2,N=(t.registerLoginEvent=function(){var e=(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.setloginNotifyFunc(),C.info("registerLoginEvent, Observer subscribe TempSipConfInfo"),coreCommon.Observer.subscribe("TempSipConfInfo",S);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.prepareHandletempsipconfinfo=function(e){return 34===e.param.result?(window.ToastNew(language.GET_SIP_FAILED_INVALIDE_CONF,2),0):36===e.param.result?(window.ToastNew(language.END_CONFERENCE,2),0):37===e.param.result?(window.ToastNew(language.GET_SIP_FAILED_INPUT_TOO_MUCH_ERROR_PWD,2),0):35===e.param.result?(U(""),0):2===e.param.result?(U(""),0):3===e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):7===e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):33===e.param.result?(window.ToastNew(language.CALL_FAILED_OFFLINE,2),0):40===e.param.result?(window.ToastNew(language.THE_VMR_MEETING_HAS_NOT_YET_STARTED,2),0):39===e.param.result?(window.ToastNew(language.THE_MEETING_HAS_BEEN_LOCKED_DOWN,2),0):32===e.param.result?(window.ToastNew(language.CA_CERT_IS_NOT_TRUSTED_CONNECT_FAILED,2),0):0!==e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):1}),S=t.handletempsipconfinfo=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,d,f,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("handletempsipconfinfo",t.param.result),e.next=3,(0,I.getLoginModel)();case 3:if(r=e.sent,0===t.param.result){e.next=22;break}if($dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),t.param.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT){e.next=22;break}if(C.info("handletempsipconfinfo timeout,clear dns ip"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=21;break}return e.next=12,window.getMeetingDomain();case 12:return n=e.sent,a="",e.next=16,coreDb.queryLoginSetting({key:n});case 16:o=e.sent,o&&o.value&&(a=o.value),a&&(coreDb.saveLoginSetting({key:n,value:""}),coreConf.gettempuserinfo()),e.next=22;break;case 21:(0,E.clearLocalDNSIp)(r.urlOfGetSipInfo);case 22:return e.next=24,G(t.param.result);case 24:if(0!==N(t)){e.next=27;break}return U(""),e.abrupt("return");case 27:if(!(t.param.tempuser_info_result.length<=1)){e.next=30;break}return alert(language.GET_SIP_NOTHING),e.abrupt("return");case 30:if(i=r.sipOnlyType,s=t.param.tempuser_info_result,u=s.conf_id.length,d=r.isSupportAS,constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP!==i&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=52;break}if(!(u!==constant.MEDIA_X_ID_LENGTH&&!d||u===constant.MEDIA_X_ID_LENGTH&&d)){e.next=38;break}return window.confirm(language.CONF_NOT_IN_SAME_DEPARTMENT_AUTO).then(function(){var e=(0,l.default)(c.default.mark(function e(t){var n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=18;break}return e.next=3,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT);case 3:if(!window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return n={tempSipAccount:s.conf_id},r.set(n),e.next=8,M();case 8:return e.next=10,coreConf.getConfInfoFromDb();case 10:window.goRoute("noLoginJoinConference"),e.next=16;break;case 13:a={tempSipAccount:s.conf_id},r.set(a),coreAccount.noLoginJoinConference();case 16:e.next=19;break;case 18:$dispatch(coreUi.changeEnterConfState(!1));case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return");case 38:return $dispatch(coreUi.changeConfAcsNum(s.access_code)),$dispatch(coreUi.changeConfAcsId(s.conf_id)),e.next=42,coreConf.toggleChangeConfAcsPas(s.conf_pwd);case 42:return $dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),f={tempConfInfo:{chairman_pwd:s.chairman_pwd,user_role:s.user_role}},r.set(f),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),window.CLIENTCONFIG.ISMOBILE?$dispatch(coreUi.changeCurConfPage("mEnterConfPage")):$dispatch(coreUi.changeCurConfPage("Join")),coreConf.oneKeyEnterConf(s.access_code,s.conf_id,s.conf_pwd,!0),e.abrupt("return");case 52:p=s.account_info,isNullOrEmpty(p.account)?R(s):O(s);case 54:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=t.handleAccountJoinConf=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,d,l,f,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.account_info,n={conf_id:t.conf_id,access_code:t.access_code,conf_pwd:t.conf_pwd,user_role:t.user_role,chairman_pwd:t.chairman_pwd},a={tempConfInfo:n,sipLoginOnly:!0},e.next=5,(0,I.getLoginModel)();case 5:return o=e.sent,o.set(a),i=t.user_role,1===i&&window.ToastNew(language.CONF_NO_INVITE_PEMISSIOM_TIP),s=$getState(),u=s.login,d=u.serverAddress,l=u.serverPort,f=r.access_url,isNullOrEmpty(r.second_access_url)||(isNullOrEmpty(f)?f=r.second_access_url:f+=","+r.second_access_url),isNullOrEmpty(f)&&(f=d),$dispatch(coreUi.changeConfTempAcsAccount(r.account)),e.next=16,coreSecurity.getPasswordManager();case 16:return p=e.sent,e.next=19,p.setPassword("password",r.password);case 19:return $dispatch(coreUi.changeTempAcsUportalAddress(f)),$dispatch(coreUi.changetempAcsUportalPort(l)),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),e.next=25,coreAccount.login({isResume:!1,isTempLogin:!0});case 25:$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),R=t.handleSipOnlyJoinConf=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,d,l,f,p,_,g,w,h;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,e.next=3,y(t.site_info);case 3:return n=e.sent,e.next=6,(0,I.getLoginModel)();case 6:return a=e.sent,o={conf_id:t.conf_id,access_code:t.access_code,conf_pwd:t.conf_pwd},"supportRest"===t.site_info[0].tms_account&&(r=!1),window.CLIENTCONFIG.ISBIGWIN&&(r=!0),i={sipAccount:t.sip_account,sipDomain:t.sip_domain,sipImpi:t.sip_impi,sipPasswordType:t.password_type,sipServerAddress:t.site_info[0].access_server[0].sip_uri.split(":")[0],sipServerPort:parseInt(t.site_info[0].access_server[0].sip_uri.split(":")[1]),sipTlsServerAddress:isNullOrEmpty(t.site_info[0].access_server[0].sip_tls_uri)?"":t.site_info[0].access_server[0].sip_tls_uri.split(":")[0],sipTlsPort:isNullOrEmpty(t.site_info[0].access_server[0].sip_tls_uri)?"0":parseInt(t.site_info[0].access_server[0].sip_tls_uri.split(":")[1]),sipStgUri:t.site_info[0].access_server[0].stg_info.sip_stg_uri,sipUri:t.site_info[0].access_server[0].sip_uri,svnUri:n.svnUri,stgUri:n.stgUri,stgAccount:n.stgAccount,tempsipinfo:t,tempConfInfo:o,sipLoginOnly:!0,deployMode:3,sipLoginissiptls:t.site_info[0].access_server[0].is_siptls,sipLoginissrtp:t.site_info[0].access_server[0].is_srtp},t.uportal_uri.indexOf(":")>=0?(i.tempsipserverAddress=t.uportal_uri.split(":")[0],i.tempsipserverPort=parseInt(t.uportal_uri.split(":")[1])):(i.tempsipserverAddress=t.uportal_uri,i.tempsipserverPort=8443),window.isSupportiDo=r,C.info("handletempsipconfinfo isSupportiDo: "+window.isSupportiDo),a.set(i),e.next=17,coreSecurity.getPasswordManager();case 17:if(s=e.sent,e.t0=t.sip_password,!e.t0){e.next=22;break}return e.next=22,s.setPassword("sipPassword",t.sip_password);case 22:if(window.CLIENTCONFIG.ISMOBILE){e.next=71;break}if(u=n.svnUri,void 0===(d=n.stgUri)||""===d||";"===d||";;"===d||";;;"===d||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=66;break}return e.next=27,(0,E.startFireWallDetect)(u);case 27:if(!(l=e.sent)||void 0===l.fire_wall_mode){e.next=58;break}if(coreConf.setFireWallModeType(l.fire_wall_mode),T=l.fire_wall_mode,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==l.fire_wall_mode){e.next=34;break}return e.next=34,A();case 34:if((0,E.updateFireWallAndSipInfo)(l.fire_wall_mode),constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==l.fire_wall_mode&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==l.fire_wall_mode){e.next=55;break}return f=n.stgUri,p=n.stgAccount,e.next=39,coreSecurity.getPasswordManager();case 39:return _=e.sent,e.next=42,_.getPassword("stgPassword");case 42:return g=e.sent,C.info("TE mode need buildStgTunnel building"),e.next=46,(0,E.buildStgTunnel)({stgUri:f,stgAccount:p,stgPassword:g});case 46:if(w=e.sent,w.result){e.next=53;break}return x(),alert(language.CALL_CALLING_FAILED),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.abrupt("return");case 53:e.next=56;break;case 55:C.info("firewall result is ok, no need to buildStgTunnel");case 56:e.next=64;break;case 58:return C.error("firewall detect failed"),x(),alert(language.CALL_CALLING_FAILED),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.abrupt("return");case 64:e.next=69;break;case 66:C.info("reSetFireWallModeType"),coreConf.reSetFireWallModeType(),(0,E.updateFireWallAndSipInfo)(3);case 69:e.next=72;break;case 71:C.info("handleSipOnlyJoinConf mobile no need to fireWallDetect");case 72:return h={result:!1},e.prev=73,e.next=76,(0,v.loginToSipServer)();case 76:h=e.sent,e.next=82;break;case 79:e.prev=79,e.t1=e.catch(73),C.error("handleSipOnlyJoinConf loginToSipServer try catch error = "+e.t1);case 82:h&&!1===h.result&&($dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),window.ToastNew(language.ENTER_CONF_FAIL,2),C.info("handleSipOnlyJoinConf loginToSipServer fail exit sipLoginOnly"));case 83:case"end":return e.stop()}},e,void 0,[[73,79]])}));return function(t){return e.apply(this,arguments)}}(),y=t.getStgInfo=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,d,l,f,p,_,g,w,v,E;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",n="",a="",o="",i="",s="",u="",d="",l="",!t||!t[0]){e.next=28;break}f=t[0],p=f.num_of_server,_=f.access_server,g=p-1;case 4:if(!(g>=0)){e.next=20;break}if(_&&_[g]){e.next=7;break}return e.abrupt("continue",17);case 7:r+=_[g].sip_uri,n+=_[g].svn_uri,i+=_[g].stg_info.stg_uri,d+=_[g].stg_info.sip_stg_uri,l+=_[g].stg_info.eserver_stg_uri,s=_[0].stg_info.account,u=_[0].stg_info.password,o||(o=_[g].eserver_uri,a=_[g].httpsproxy_uri),a||(a=_[g].httpsproxy_uri),0!==g&&(r+=";",n+=";",i+=";",d+=";",l+=";");case 17:g--,e.next=4;break;case 20:return w={sipUri:r,svnUri:n,httpsProxy:a,eserverUri:o,stgUri:i,stgAccount:s,stgPassword:u,sipStgUri:d,eserverStgUri:l},e.next=23,coreSecurity.getPasswordManager();case 23:if(v=e.sent,e.t0=u,!e.t0){e.next=28;break}return e.next=28,v.setPassword("stgPassword",u);case 28:return E={sipUri:r,svnUri:n,httpsProxy:a,eserverUri:o,stgUri:i,stgAccount:s,stgPassword:u,sipStgUri:d,eserverStgUri:l},e.abrupt("return",E);case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),x=(t.stgBuildforNoName=function(){var e=(0,l.default)(c.default.mark(function e(t,r,n){var a,o,i,u,d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:if(a=e.sent,o=(new Date).getTime(),i=void 0,void 0===t||""===t||";"===t||";;"===t||";;;"===t){e.next=8;break}return e.next=8,(0,E.startFireWallDetect)(a.svnUri);case 8:if(constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==T){e.next=16;break}if(void 0===t||""===t||";"===t||";;"===t||";;;"===t){e.next=16;break}return e.next=12,(0,E.buildStgTunnel)({stgUri:t,stgAccount:r,stgPassword:n});case 12:if(u=e.sent,u.result){e.next=16;break}return(0,h.handleUportalLoginFailed)((0,s.default)({},u,{isResume:d})),e.abrupt("return",{result:!1});case 16:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),t.clearnsipinfo=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("clearsipinfo"),t={sipAccount:"",sipDomain:"",sipImpi:"",sipPassword:"",sipPasswordType:"",sipServerAddress:"",sipServerPort:"",sipStgUri:"",sipUri:"",tempsipinfo:"",tempConfInfo:"",sipLoginOnly:!1,deployMode:"",tempsipserverAddress:"",tempsipserverPort:"",tempSipAccount:"",tempsipPassword:"",sipLoginissiptls:0,sipLoginissrtp:1,tempSipNick:""},e.next=4,(0,I.getLoginModel)();case 4:return r=e.sent,r.set(t),C.info("clearsipinfo finished"),e.next=9,coreSecurity.getPasswordManager();case 9:return n=e.sent,e.next=12,n.setPassword("sipPassword","");case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),b=t.sipserverDeregister=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:return t=e.sent,r=t.sipImpi,C.info("sipserverDeregister"),e.next=7,coreTup.getCallInstance();case 7:if(n=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=13;break}return e.next=11,n.deRegisterForAccount(0);case 11:e.next=15;break;case 13:return e.next=15,n.deRegister(r);case 15:window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(window.setSipState("0"),a=!!window.pcLoginState(),t.isMultiDeviceLogined=a,C.info("isMultiDeviceLogined = "+a)),$dispatch(coreUi.changeDoSipReg(!1));case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),A=(t.unEnableBFCP=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ unEnableBFCP ]"),t={media:{enable_bfcp:0}},e.next=4,coreTup.getCallInstance();case 4:return r=e.sent,e.next=7,r.config(t);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reLoginSipserver=function(e){return C.info("[ reLoginSipserver ]"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(0,v.loginToSipServer)():b().then(v.loginToSipServer)},t.stopLocalServer=function(){var e=(0,l.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("stop local server."),e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,e.next=6,t.stopLocalServer();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.ipCallConfig=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.skipLogin){e.next=2;break}return e.abrupt("return");case 2:return t=(0,L.configIPCallServer)(),e.next=5,coreTup.getCallInstance();case 5:return r=e.sent,e.next=8,r.config(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configSipIp=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("configSipIp"),e.next=3,(0,L.sipIpConfig)();case 3:return t=e.sent,e.next=6,coreTup.getCallInstance();case 6:return r=e.sent,e.next=9,r.config(t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.dealPcLogin=function(){C.info("multi devices, deal pc login "),P().then(function(e){0===e.result&&(C.info("stop sip refresh success"),b())}),coreCommon.dispatchModuleEvent("sipOtherPCLogin"),coreConf.endPairWithPeripherals({tips:language.PAIR_CLOSED})};window.onlyInitHme=(0,l.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:return t=e.sent,e.next=5,(0,L.configHMELog)();case 5:return r=e.sent,C.info("sip server login configHmeInfo=",r),e.next=9,t.setHMELog(r);case 9:case"end":return e.stop()}},e,void 0)})),window.onlyDoSipRegister=(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("only do sip register."),!window.dontUnregister){e.next=10;break}if(C.info("sim call finish resume sip service."),!window.isOffline){e.next=8;break}return e.next=6,b();case 6:e.next=10;break;case 8:return C.info("sim call finish resume sip service."),e.abrupt("return");case 10:return e.next=12,(0,v.loginToRegSipServer)();case 12:C.info("relogin sipserverLogin end");case 13:case"end":return e.stop()}},e,void 0)}));var k=(t.dealPcLogout=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),r=t.call,n=r.saveCalleeInfo,a=r.isDoSipReg,C.info("multi devices, deal pc logout ","isDoSipReg:"+a),window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,!0){e.next=8;break}return e.next=5,P();case 5:return e.next=7,k();case 7:return e.abrupt("return");case 8:return(0,m.sipResume)(),isNullOrEmpty(n)&&window.ToastNew(language.MULTIDEVICE_PC_QUIT,3),e.next=12,coreConf.confctrlInit();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.startSipRefresh=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("start sip refresh."),e.next=3,(0,I.getLoginModel)();case 3:return t=e.sent,r=t.sipImpi,e.next=7,coreTup.getCallInstance();case 7:if(n=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.abrupt("return",n.refreshRegisterForAccount(0));case 10:return e.abrupt("return",n.startRefreshRegister(r));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),P=t.stopSipRefresh=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("stop sip refresh."),e.next=3,(0,I.getLoginModel)();case 3:return t=e.sent,r=t.sipImpi,e.next=7,coreTup.getCallInstance();case 7:if(n=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.abrupt("return",n.stopReForAccount(0));case 10:return e.abrupt("return",n.stopRefreshRegister(r));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),M=(t.updateTempSipServer=function(e){(0,I.getLoginModel)().then(function(t){t.tempsipserverAddress=e})},t.updateTempSipPort=function(e){(0,I.getLoginModel)().then(function(t){t.tempsipserverPort=e})},t.updateTempSipAccount=function(){var e=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:r=e.sent,r.tempSipAccount=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateTempSipNick=function(){var e=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:r=e.sent,r.tempSipNick=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveNickName=function(){var e=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={key:"noLoginNickName",value:t},coreDb.saveLoginSetting(r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getNickName=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"noLoginNickName"});case 2:return t=e.sent,e.next=5,(0,I.getLoginModel)();case 5:r=e.sent,isNullOrEmpty(t)||isNullOrEmpty(t.key)||isNullOrEmpty(t.value)?r.tempSipNick="":r.tempSipNick=t.value;case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),U=t.updateTempSipPwd=function(e){(0,I.getLoginModel)().then(function(t){t.tempsipPassword=e})},G=t.updateTempSipGetState=function(){var e=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:r=e.sent,r.tempsipGetState=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.updateTempMediaxAddress=function(){var e=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:r=e.sent,r.tempMediaxAddress=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateTempMediaxPort=function(){var e=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:r=e.sent,r.tempMediaxPort=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},230:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.serGroupPickupCfg=t.serPointPickupCfg=t.restoreMAAConfControl=t.reConfigVideoAndDataSetting=t.initVideoSettingParam=t.initVideoHardCodeParam=t.configBFCPForTLS=t.configBandwidthLimit=t.configSessionTimer=t.configBFCP=t.configVideo=t.configRTP=t.configMKI=t.configRejectCallType=t.configCall=t.sipIpConfig=t.configSip=t.configIPCallServer=t.configHMELog=void 0;var a=r(3),o=(n(a),r(123)),i=n(o),s=r(1),u=n(s),c=r(69),d=n(c),l=r(2),f=n(l),p=r(136),_=r(166),g=coreLogger.getLogger("logic")("common/sipCallConfig"),w=window.CLIENTCONFIG,v=(t.configHMELog=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=10,1===window.CLIENTCONFIG.IS_HME_DEBUG&&(t=200),window.hmeLogSizeMb&&(t=window.hmeLogSizeMb),r={audio_log_level:3,audio_max_size:10,video_log_level:3,video_max_size:t},g.info("HMEConfig =",(0,d.default)(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configIPCallServer=function(){return{log_path:window.LOG_PATH,network:{local_ipv4:window.localIp,user_agent:"WeLink-Mobile"},audio:{audio_codec:"112,9,8,0,98,18",dtmf_mode:1,net_ate_level:2,audio_rfc2198:{switch:1,red_pt:121,red_level:3}},sip:{user_type:1,tls_rootcertpath:"",tls_server_certpath:"",tls_anonymous_enable:0,trans_mode:0}}},t.configSip=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r,n,a,o,i,s,c,d,l,f,_,E,h,I,m,L,C,T,N,S,O,R,y,x,b,A,k,P,M,U,G,D,F,B,W,H,V,K,Y,q,j,$,X,z,J,Q,Z,ee,te,re=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getLoginModel)();case 2:if(t=e.sent,r=t.sipServerAddress,n=t.sipServerPort,a=t.sipTlsServerAddress,o=t.sipTlsPort,i=t.sipTlsServerBackup1,s=t.sipTlsPortBackup1,c=t.sipTlsServerBackup2,d=t.sipTlsPortBackup2,l=t.sipTlsServerBackup3,f=t.sipTlsPortBackup3,_=t.sipServerBackup1,E=t.sipServerPortBackup1,h=t.sipServerBackup2,I=t.sipServerPortBackup2,m=t.sipServerBackup3,L=t.sipServerPortBackup3,C=t.sipPasswordType,T=t.sipOutgoingAccCode,N=t.fireWallMode,S=t.sipDomain,O=t.serverAddress,R=t.sipLoginissiptls,y=t.sipLoginOnly,x=t.tempSipNick,b=t.sipTransMode,A=t.isSupportCACertCheck,k=t.sipWhiteList,P=t.deployMode,g.info("config sip param",r,n,_,E,h,I,m,L,a,o,i,s,c,d,l,f,desensitive(C),T,N,S,O),M=$getState().conf,U=M.confTempAcsNick,G=M.confTempAcsAccount,D=constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_LINE,F=window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:constant.USER_AGENT.PC,D=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===N?constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG:constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN===N?constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_INNERSVN:constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_LINE,g.info("config sip stgModeForCall "+D+", 0:sbc,1:stg,2:svn,3:butt"),window.CLIENTCONFIG.USE_IM||(F=window.CLIENTCONFIG.ISMOBILE?"Huawei TE Mobile":"Huawei TE Desktop"),g.info("config sip deployMode "+P),P===constant.MEETING_NET_TYPE.SMC_MEETING&&(F="CloudLink SoftClient"),1===window.SERVERCONFIG.HWUC&&(S=r),g.info("serverAddress ="+O+", sipServerAddress ="+r+", sipDomain"+S+", isForTempLogin = "+re),B=coreCommon.isHuaweiCloud(O),re&&(B=!0),y&&(B=1===R),W={account_pwd_type:parseInt(C)||0,account_label_name:isNullOrEmpty($getState().myInfo.name)?$getState().myInfo.account:$getState().myInfo.name},g.info("config sip account_label_name default "+isNullOrEmpty(W.account_label_name)+" "+isNullOrEmpty($getState().myInfo.name)+" "+isNullOrEmpty($getState().myInfo.account)),re&&(g.info("config sip account_label_name forTempLogin "),W={account_pwd_type:parseInt(C)||0,account_label_name:isNullOrEmpty(U)?G:U}),y&&!isNullOrEmpty(x)&&(g.info("config sip account_label_name sipLoginOnly "),W={account_pwd_type:parseInt(C)||0,account_label_name:x}),!isNullOrEmpty(W.account_label_name)||y){e.next=29;break}return g.info("config sip account_label_name from contactModule "),e.next=25,coreContact.getContactByAccount(t.account);case 25:H=e.sent,g.info("config sip account_label_name from contactModule success"),W.account_label_name=getContactName(H),g.info("config sip account_label_name from util function");case 29:if(V="",isNullOrEmpty(W.account_label_name)||(V=W.account_label_name.length<=2?W.account_label_name.substr(0,1)+"**":W.account_label_name.substr(0,1)+"**"+W.account_label_name.substr(-1)),g.info("esight config siptls is null,use uportal siptlsmode is "+R+",account_label_name = "+V),B=1===R,D===constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG&&(B=!1),K=0,window.CLIENTCONFIG.ENABLE_IT_MEETING&&(B=!0,K=1),0===b&&(A=!1),Y=B?1:b||0,g.info("config sip trans_mode : "+Y+" , 1: tls: 0: udp"),q="",j="",$="",X="",z="",J="",Q="",Z="",o>0&&R&&D!==constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG?(q=a,j=o,$=i,X=s,z=c,J=d,Q=l,Z=f):(q=r,j=B?5061:n||5060,$=_,X=B?5061:E||5060,z=h,J=B?5061:I||5060,Q=m,Z=B?5061:L||5060),g.info("sipTlsServerAddress , sipLoginissiptls : "+R+" realSipServerAddress:"+q+" , realSipServerPort : "+j),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=56;break}return g.info("[IT-Meeting] update local IP before sip register."),K=0,e.next=54,window.updateLocalIp(!0);case 54:e.next=59;break;case 56:return g.info("config sip update local IP before sip register."),e.next=59,window.updateLocalIp(!0);case 59:if(g.info("config sip update local IP : "+handleIp(window.localIp)),ee=window.localIp,window.CLIENTCONFIG.ISBIGWIN){e.next=65;break}return e.next=64,v(q,j);case 64:ee=e.sent;case 65:return te={log_path:window.LOG_PATH,network:{sip_svr_addr:S,sip_svr_port:j,backup1_addr:isNullOrEmpty($)?"":S,backup1_port:j,backup2_addr:isNullOrEmpty(z)?"":S,backup2_port:j,backup3_addr:isNullOrEmpty(Q)?"":S,backup3_port:j,local_ipv4:ee,local_sip_port:parseInt(w["Device.ComCfg.Sip.LocalPort"]),user_agent:F,force_dereg_disconnect_tls:1,net_environment:1===window.SERVERCONFIG.HWUC?8:0,proxy_addr:q,proxy_port:parseInt(j),proxy_backup1_addr:$,proxy_backup1_port:parseInt(X),proxy_backup2_addr:z,proxy_backup2_port:parseInt(J),proxy_backup3_addr:Q,proxy_backup3_port:parseInt(Z)},account:W,call:{param_outgoingcode:T,cfg_firewall_mode:D,cfg_welink_symbol:window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?1:0,call_anonymous_enable:B?1:A?1:0,call_ipcall_enable:0,sip_keepalive_time:parseInt(w["Device.ComCfg.Sip.sipKeepaliveTime"]),bfcp_keepalive_time:parseInt(w["Device.ComCfg.Media.BfcpKeepaliveTime"])},sip:{audvie_mode:1,user_type:window.SERVERCONFIG.HWUC?0:1,trans_mode:Y,tls_anonymous_enable:K,root_cert_path:window.EXEC_PATH+"\\",tls_version:7,regist_timeout:window.CLIENTCONFIG.ISBIGWIN?600:parseInt(w["Device.ComCfg.Sip.RegistExpires"]),white_list:k||"",white_list_count:k&&k.length>0?k.length:0,pai_priority:1,check_cseq:window.CLIENTCONFIG.ISBIGWIN?0:1},conf:{use_maa_confctrl:0,enable_ms_dataconf:1,ido_over_bfcp_version:parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.IsIdoBfcpRetransmission"])}},g.info("sip ido retransmission flag bit",parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.IsIdoBfcpRetransmission"])),e.abrupt("return",te);case 68:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,f.default)(u.default.mark(function e(t,r){var n,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.localIp,window.CLIENTCONFIG.ISMOBILE){e.next=9;break}return e.next=4,coreTup.getToolInstance();case 4:return a=e.sent,e.next=7,a.tupToolGetLocalIp(t,r,!1);case 7:o=e.sent,n=0===o.result&&""!==o.param.local_ip?o.param.local_ip:window.localIp;case 9:return g.info("checkLocalIpAddr: "+handleIp(n)),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),E=(t.sipIpConfig=function(){var e=(0,f.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={network:{local_ipv4:window.localIp}},e.abrupt("return",t);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configCall=function(){var e=Number($getState().setting.micAgc),t=parseInt(w["Device.ComCfg.Media.StreamAutomaticallyHangUp"]),r=window.CLIENTCONFIG.ISMOBILE?window.DEFAULT_CAMERA_IMG_PATH:window.VIDEO_DEFAULT_IMG+"default_camera.bmp",n=Number($getState().call.cameraNum),a={audio:{audio_codec:"112,9,8,0,98,18",dtmf_mode:1,net_ate_level:2,send_empty_audio_pkt:1,netate_redpt_switch:0,audio_pkt_red_num_in_stg:{opus_repeat_num:1,other_repeat_num:2},audio_rfc2198:{switch:1,red_pt:121,red_level:3},audio_anr:3,audio_aec:1,audio_agc:e,ilbcmode:20,audio_band_limit:{lowest_band_width:64,lowest_audio_codec:"112,98,18",lower_band_width:384,lower_audio_codec:"112,98,18,9,8,0"},audio_port_range:{min_port:10002,max_port:65528}},media:{video_preview_type:0===n?0:2,lowbandwidth_ability:1,loose_port_nego:1,chan_upd_dyn:1,video_default_image:0===n?r:"",enable_audio_bfcp:window.isSupportiDo?1:0},call:{stream_detect_enable:t,stream_detect_inrval:5}};return g.info("configCallInfo =",(0,d.default)(a)),a},t.configRejectCallType=function(){var e={sip:{reject_type:2}};return g.info("config[sip][reject_type] = ",e),e},t.configMKI=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(w["Device.ComCfg.Media.EncryptCalloutUseMKI"]),r={media:{srtp_mki:t}},g.info("configMKIInfo =",(0,d.default)(r)),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configRTP=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r,n,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,r=t.sipLoginissrtp,n=t.sipLoginOnly,a=t.srtpMode,o=a,o=""!==w["Device.ComCfg.Media.priorityRtp"]?parseInt(w["Device.ComCfg.Media.priorityRtp"]):1===r?1:0,i=2,0===o&&(i=1),n&&(o=1===r?1:0),s={media:{srtp_mode:o,rtp_priority:i,merge_srtp_rtp:1,support_ec_direction:1}},g.info("configRTPInfo =",(0,d.default)(s)),e.abrupt("return",s);case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configVideo=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r,n,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,L();case 3:return t.media=e.sent,r={},r.media=m(),n={},n.media=C(),a={},a.media=T(),o={media:{}},o.media=(0,i.default)({},t.media,r.media,n.media,a.media),g.info("configVideoInfo =",(0,d.default)(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configBFCP=function(){var e=(0,f.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,h();case 3:return t.media=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),h=(t.configSessionTimer=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(w["Device.ComCfg.Sip.enableSessionTimer"]),r=parseInt(w["Device.ComCfg.Sip.SessionTime"]),n={sip:{sessiontimer_enable:t,session_time:r}},g.info("config[Session]TimerInfo =",desensitive(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configBandwidthLimit=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(w["Device.ComCfg.Media.BandwidthLimit"]),r={media:{video_bitrate_limited:t}},g.info("configBandwidthLimitInfo =",r),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,f.default)(u.default.mark(function e(){var t,r,n,a,o,i,s,c,d,l,f,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,s=void 0,s=$getState().login,t=w.DATA_CONFIG_MEDIA_LEVEL,r=w.DATA_CONFIG_MEDIA_MAX_MBPS,n=w.DATA_CONFIG_MEDIA_MAX_BR,a=w.DATA_CONFIG_MEDIA_MAX_FS,o=4096,i=0,!window.CLIENTCONFIG.ISMOBILE){e.next=24;break}return e.next=11,coreTup.getCallInstance();case 11:if(c=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=19;break}return e.next=15,c.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 15:d=e.sent,0===d.result?(g.info("[IT-Meeting] mediaGetHdaccelerate success, hdencoder = "+d.param.hdaccelerate.hdencoder),i=d.param.hdaccelerate.hdencoder):g.error("[IT-Meeting] mediaGetHdaccelerate failed, result = "+d.result),e.next=23;break;case 19:return e.next=21,c.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 21:l=e.sent,0===l.result?(g.info("mediaGetHdaccelerate success, hdencoder = "+l.param.hd_accelerate.hdencoder),i=l.param.hd_accelerate.hdencoder):g.error("mediaGetHdaccelerate failed, result = "+l.result);case 23:o=N(i);case 24:return g.info("The default bandWidth is: "+o),f=void 0,window.CLIENTCONFIG.ISMOBILE?(o>=384?(t=22,r=27e3,n=w.DATA_CONFIG_MEDIA_MAX_BR,a=9e3):(t=20,r=10800,n=w.DATA_CONFIG_MEDIA_MAX_BR,a=3600),f={table_num:4,param_set:[{band_width:300,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:300,min_bit_rate:32},{band_width:192,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]}):(t=31,r=9e4,n=w.DATA_CONFIG_MEDIA_MAX_BR,a=9e3,f={table_num:6,param_set:[{band_width:512,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:512,min_bit_rate:32},{band_width:384,width:1920,height:1080,max_frame_rate:3,min_frame_rate:1,max_bit_rate:384,min_bit_rate:32},{band_width:256,width:1920,height:1080,max_frame_rate:2,min_frame_rate:1,max_bit_rate:256,min_bit_rate:32},{band_width:192,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]},window.CLIENTCONFIG.ISBIGWIN&&(t=40,r=246e3,n=w.DATA_CONFIG_MEDIA_MAX_BR,a=8192,f={table_num:8,param_set:[{band_width:1536,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:1536,min_bit_rate:32},{band_width:1152,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:1152,min_bit_rate:32},{band_width:512,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:512,min_bit_rate:32},{band_width:384,width:1920,height:1080,max_frame_rate:3,min_frame_rate:1,max_bit_rate:384,min_bit_rate:32},{band_width:256,width:1920,height:1080,max_frame_rate:2,min_frame_rate:1,max_bit_rate:256,min_bit_rate:32},{band_width:192,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]})),p=512,p=o<384?o/2:o<512?192:o<768?256:o<1152?384:o<2048?512:o<2880?768:o<3840?1536:o<5760?1920:o/2,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===s.fireWallMode&&(window.CLIENTCONFIG.ISMOBILE?p=o>=384?192:o/2:o>=768&&o<1024?p=192:o>=1024&&o<=4096&&(p=256)),e.abrupt("return",I(s,t,a,r,p,f));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),I=function(e,t,r,n,a,o){var i=window.CLIENTCONFIG,s=parseInt(i["Device.ComCfg.Media.BFCPMode"]);2===s&&(s=1);var u=coreCommon.isHuaweiCloud(e.serverAddress),c=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===e.fireWallMode,l=parseInt(i["Device.ComCfg.Media.DataNetRat"]),f=parseInt(i["Device.ComCfg.Media.DataKeyFrameIntervalNetRat"]);window.CLIENTCONFIG.ISMOBILE&&(l=5,f=0);var p=c?0:parseInt(i["Device.ComCfg.Media.DataHarq"]),_=u?0:parseInt(i["Device.ComCfg.Media.DataARS"]),w=u?0:parseInt(i["Device.ComCfg.Media.DataARSFrameSize"]),v=u?0:parseInt(i["Device.ComCfg.Media.DataARSFrameRate"]),E=u?0:parseInt(i["Device.ComCfg.Media.DataARSBitRate"]),h=u?0:parseInt(i["Device.ComCfg.Media.DataArsFec"]),I=u?0:parseInt(i["Device.ComCfg.Media.DataShaping"]),m=c?512:384,L={enable_bfcp:1,enable_data:1,aux_fir_response_interval:500,bfcp_param:{floor_ctrl:3,setup:3,trans_type:s},bfcp_port_range:{min_port:5070,max_port:5090,ulTlsPort:5071},data_framesize:{decode_framesize:16,framesize:3},data_framerate:{frame_rate:3,min_frame_rate:1},data_port_range:{min_port:10006,max_port:65532},data_level:{level:t,max_fs:r,max_mbps:n},data_datarate:{max_bw:a},tmmbr_threshold:{data_limit:m,min_data_bandwidth:64,min_video_bandwidth:64},data_codec:"106",data_arq:parseInt(i["Device.ComCfg.Media.DataArq"]),data_harq:p,data_errorcorrecting:i.DATA_CONFIG_MEDIA_DATA_ERRORCORRECTING,data_net_lossrate:l,data_keyframe_interval:f,data_ars:{ars:_,ars_ctrl_framesize:w,ars_ctrl_framerate:v,ars_ctrl_bitrate:E,ars_ctrl_fec:h,ars_data_shaping:I},data_h264_quality_level_table:{param_setnumber:4,quality_level_param_set:[{codec_name:"",pt:105,profile_idc:66,packet_mode:1,level_asymmetry:1,priority:3},{codec_name:"",pt:106,profile_idc:66,packet_mode:0,level_asymmetry:1,priority:4},{codec_name:"",pt:107,profile_idc:100,packet_mode:1,level_asymmetry:1,priority:1},{codec_name:"",pt:108,profile_idc:100,packet_mode:0,level_asymmetry:1,priority:2}]}};return L.data_resolution_table=o,g.info("media:BFCP media =",(0,d.default)(L)),L},m=(t.configBFCPForTLS=function(){var e=(0,f.default)(u.default.mark(function e(t){var r,n,a,o,i,s,c,d,l,f,p,w,v,E,h,I,m,L,C,T,N,O,R,y,x,b,A;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.decryptKMC(window.bfcpp);case 2:if(r=e.sent,n=r&&r.param&&r.param.PlainText||"",g.info("configBFCPForTLS mode : "+t+" path: "+window.EXEC_PATH),g.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===n?"failed":"success")),a=window.EXEC_PATH+"/BfcpTLS/",o=window.EXEC_PATH+"/BfcpTLS/server.pem",i=window.EXEC_PATH+"/BfcpTLS/server_key.pem","win"!==window.CLIENTCONFIG.PLATFORM&&"bigwin"!==window.CLIENTCONFIG.PLATFORM||(a=window.EXEC_PATH+"\\BfcpTLS\\",o=window.EXEC_PATH+"\\BfcpTLS\\server.pem",i=window.EXEC_PATH+"\\BfcpTLS\\server_key.pem"),window.CLIENTCONFIG.ISMOBILE){e.next=53;break}return e.next=13,coreDb.queryLoginSetting({key:"importCertificate"});case 13:return s=e.sent,e.next=16,coreDb.queryLoginSetting({key:"certificateName"});case 16:return c=e.sent,"{}"===s&&(s=null),"{}"===c&&(c=null),g.info("_importCertificate : "+s+" _certificateName: "+c),e.next=22,(0,_.loginforverificationCertificateLogic)();case 22:if(d=e.sent,g.info(":"+d),!d||isNullOrEmpty(s)||isNullOrEmpty(c)){e.next=40;break}if("false"!==s.value||""===c.value){e.next=38;break}return l=S(),e.next=29,coreSecurity.decryptKMC(l);case 29:r=e.sent,n=r&&r.param&&r.param.PlainText||"",g.info(""),g.info("configBFCPForTLS mode : "+t+" path: "+APP_DATA_PATH),g.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===n?"failed":"success")),a=APP_DATA_PATH+"/ImpBfcpTLS/",o=APP_DATA_PATH+"/ImpBfcpTLS/server.pem",i=APP_DATA_PATH+"/ImpBfcpTLS/server_key.pem","win"!==window.CLIENTCONFIG.PLATFORM&&"bigwin"!==window.CLIENTCONFIG.PLATFORM||(a=APP_DATA_PATH+"\\ImpBfcpTLS\\",o=APP_DATA_PATH+"\\ImpBfcpTLS\\server.pem",i=APP_DATA_PATH+"\\ImpBfcpTLS\\server_key.pem");case 38:e.next=53;break;case 40:if("mac"!==window.CLIENTCONFIG.PLATFORM){e.next=53;break}if(f=window.path.join(window.APP_DATA_PATH,"deviceCertificate"),!fs.existsSync(f)||!fs.lstatSync(f).isDirectory()){e.next=53;break}if(p=window.path.join(f,"p4bfcp.txt"),w=window.path.join(f,"server.pem"),v=window.path.join(f,"server_key.pem"),!(fs.existsSync(p)&&fs.existsSync(w)&&fs.existsSync(v))){e.next=53;break}return E=fs.readFileSync(p).toString(),e.next=50,coreSecurity.decryptKMC(E);case 50:h=e.sent,I=h&&h.param&&h.param.PlainText||"",I&&(g.info("using refreshing device certificate"),n=I,a=f,o=w,i=v);case 53:if(!window.CLIENTCONFIG.ISMOBILE){e.next=83;break}if(g.info(" mobile "),m=$getState().login,L=m.mProveName,C=m.mSelectProve,C||""===L){e.next=83;break}return T=window.EXEC_PATH+"/impBfcpTLS",N=window.EXEC_PATH+"/impBfcpTLS/server.pem",e.next=61,(0,_.verificationCertificateLogic)(N);case 61:if(O=e.sent,g.info(" mobile login for is impt vc vcFlag: ",O),!O){e.next=83;break}g.info(" prove is ok "),R=void 0,e.next=72;break;case 69:R=e.sent,e.next=73;break;case 72:R=appService.mReadImptP4BFCP(T+"/p4bfcp.txt");case 73:return e.next=75,coreSecurity.decryptKMC(R);case 75:r=e.sent,n=r&&r.param&&r.param.PlainText||"",g.info("mobile "),g.info("configBFCPForTLS mode : "+t+" path: "+T),g.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===n?"failed":"success")),a=window.EXEC_PATH+"/impBfcpTLS/",o=window.EXEC_PATH+"/impBfcpTLS/server.pem",i=window.EXEC_PATH+"/impBfcpTLS/server_key.pem";case 83:return y=t?1:0,x=6,b=0,A={bfcp_tls_param:{bfcp_tls_ctrl_mode:y,tls_version:x,tls_verify_mode:b,root_cert_path:a,srv_cert_file:o,srv_private_kfile:i,srv_private_kfile_pw:n,clt_cert_file:o,clt_private_kfile:i,clt_private_kfile_pw:n}},e.abrupt("return",A);case 88:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=window.CLIENTCONFIG,t=$getState().login,r=t.fireWallMode,n=!1;constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===r&&(n=!0);var a=parseInt(e["Device.ComCfg.Media.VideoNetRat"]),o=parseInt(e["Device.ComCfg.Media.VideoKeyFrameIntervalNetRat"]),i=n?0:parseInt(e["Device.ComCfg.Media.VideoHarq"]);window.CLIENTCONFIG.ISMOBILE&&(a=20,o=150);var s={video_errorcorrecting:e.VIDEO_CONFIG_MEDIA_VIDEO_ERRORCORRECTING,video_arq:parseInt(e["Device.ComCfg.Media.VideoArq"]),video_harq:i,ec_pkt_in_rtp:parseInt(e["Device.ComCfg.Media.EcPktInRtp"]),net_lossrate:a,keyframe_interval:o};return g.info(" media: media =",(0,d.default)(s)),s}),L=(t.initVideoHardCodeParam=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r,n,a,o,i,s,c,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,r=void 0,t=0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=14;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=6,coreTup.getCallInstance();case 6:return n=e.sent,e.next=9,n.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 9:a=e.sent,0===a.result?(g.info("hard code mediaGetHdaccelerate success, hdencoder = "+a.param.hdaccelerate.hdencoder),t=a.param.hdaccelerate.hdencoder):g.error("hard code mediaGetHdaccelerate failed, result = "+a.result),r=N(t);case 12:e.next=23;break;case 14:if(!window.CLIENTCONFIG.ISMOBILE){e.next=23;break}return e.next=17,coreTup.getCallInstance();case 17:return o=e.sent,e.next=20,o.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 20:i=e.sent,0===i.result?(g.info("hard code mediaGetHdaccelerate success, hdencoder = "+i.param.hd_accelerate.hdencoder),t=i.param.hd_accelerate.hdencoder):g.error("hard code mediaGetHdaccelerate failed, result = "+i.result),r=N(t);case 23:return s={},c=0,window.CLIENTCONFIG.ISMOBILE&&1===t&&r>256&&(c=1),l=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.CLIENTCONFIG.ISMOBILE?s.video_hdaccelerate={hd_encoder:c,hd_decoder:0}:(s.video_hdaccelerate={hd_encoder:c,hd_decoder:l},g.info("media:is hddecoder:"+l)),g.info("media:is hdencoder:"+c),g.info("media: media =",(0,d.default)(s)),e.abrupt("return",s);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initVideoSettingParam=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r,n,a,o,i,s,c,l,f,p,_,w,v,E,h,I,m,L,C,T;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,s=void 0,t=coreCommon.isHuaweiCloud($getState().login.serverAddress),r=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_LEVEL,n=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_MBPS,a=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_BR,o=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_FS,i=4096,s=0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=21;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=18;break}return e.next=12,coreTup.getCallInstance();case 12:return c=e.sent,e.next=15,c.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 15:l=e.sent,0===l.result?(g.info("[IT-Meeting] mediaGetHdaccelerate success, hdencoder = "+l.param.hdaccelerate.hdencoder),s=l.param.hdaccelerate.hdencoder):g.error("[IT-Meeting] mediaGetHdaccelerate failed, result = "+l.result),i=N(s);case 18:g.info("The default bandWidth is: "+i),e.next=31;break;case 21:if(!window.CLIENTCONFIG.ISMOBILE){e.next=30;break}return e.next=24,coreTup.getCallInstance();case 24:return f=e.sent,e.next=27,f.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 27:p=e.sent,0===p.result?(g.info("mediaGetHdaccelerate success, hdencoder = "+p.param.hd_accelerate.hdencoder),s=p.param.hd_accelerate.hdencoder):g.error("mediaGetHdaccelerate failed, result = "+p.result),i=N(s);case 30:g.info("The default bandWidth is: "+i);case 31:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(i<1e3||window.netWorkType===constant.NETWORK_TYPE.TYPE_2G)&&(window.linkSmcIsVideo=!1,g.info("[IT-Meeting] bandwidth < 1000, join conference in audio",window.linkSmcIsVideo)),_=1500,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===$getState().login.fireWallMode&&(_=1280),!window.CLIENTCONFIG.ISMOBILE&&i>=1024&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==$getState().login.fireWallMode&&(r=40),!window.CLIENTCONFIG.ISWIN){e.next=45;break}return r=40,e.next=39,coreConf.registerNativeWndEvent();case 39:return e.next=41,coreConf.getNativeInterface().notifyGetSystemInfo();case 41:return w=e.sent,e.next=44,coreConf.unregisterNativeWndEvent();case 44:w&&(window.cpu_core_num=w.cpu_core_num,window.cpu_proc_num=w.cpu_proc_num,window.cpu_freq_mhz=w.cpu_freq_mhz,2===window.cpu_core_num&&(2===window.cpu_proc_num||window.cpu_freq_mhz<2e3)?(r=21,n=18400,o=920):2===window.cpu_core_num&&4===window.cpu_proc_num&&(r=32),g.info("set decode level by cpu cores and cpu freq:",r));case 45:return window.CLIENTCONFIG.ISMOBILE&&(r=30,n=72e3,o=3600,(t||window.CLIENTCONFIG.ENABLE_IT_MEETING)&&(r=21,n=18400,o=920)),v={video_level:{level:r,max_mbps:n,max_br:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_BR,max_fs:o},sdp_ct:i,video_svc_enable:window.CLIENTCONFIG.USE_MEETING?1:0,data_video_svc_cap:{pktmode:2},video_mtu:_,video_datarate:{max_bw:i},clarity_fluency_enable:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_CLARITY_FLUENCY_ENABLE,video_tatic:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_VIDEO_TATIC,video_h264_force_single_pt:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_H264_FORCE_SINGLE_PT,sec_version:{sec10:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec20:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec21:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec30:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION},video_port_range:{min_port:10004,max_port:65530}},E=void 0,h=void 0,I=void 0,m=void 0,L=void 0,I=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.TmmbrControl"]),m=0,window.CLIENTCONFIG.ISMOBILE?(E={is_video_bw_include_audio:1,is_video_bw_subduct_aux:1,is_h264_hp_same_with_bp:1,is_video_bw_subduct_aux_recv:0},1===s&&i>256&&(m=1),h=m?{table_num:11,param_set:[{band_width:1984,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2304,min_bit_rate:896,adjust_bit_rate:2304},{band_width:1856,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2176,min_bit_rate:896,adjust_bit_rate:2176},{band_width:1472,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1792,min_bit_rate:896,adjust_bit_rate:1792},{band_width:1408,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1728,min_bit_rate:896,adjust_bit_rate:1728},{band_width:960,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1260,min_bit_rate:896,adjust_bit_rate:1433},{band_width:704,width:960,height:544,max_frame_rate:20,min_frame_rate:15,max_bit_rate:896,min_bit_rate:640,adjust_bit_rate:1280},{band_width:448,width:640,height:368,max_frame_rate:20,min_frame_rate:15,max_bit_rate:640,min_bit_rate:448,adjust_bit_rate:900},{band_width:320,width:480,height:272,max_frame_rate:20,min_frame_rate:15,max_bit_rate:448,min_bit_rate:320,adjust_bit_rate:640},{band_width:192,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:320,min_bit_rate:32,adjust_bit_rate:400},{band_width:128,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:192,min_bit_rate:32,adjust_bit_rate:200},{band_width:64,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]}:{table_num:11,param_set:[{band_width:1984,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2304,min_bit_rate:448,adjust_bit_rate:900},{band_width:1856,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2176,min_bit_rate:448,adjust_bit_rate:900},{band_width:1472,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1792,min_bit_rate:448,adjust_bit_rate:900},{band_width:1408,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1728,min_bit_rate:448,adjust_bit_rate:900},{band_width:960,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1260,min_bit_rate:448,adjust_bit_rate:900},{band_width:704,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:896,min_bit_rate:448,adjust_bit_rate:900},{band_width:448,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:640,min_bit_rate:448,adjust_bit_rate:900},{band_width:320,width:480,height:270,max_frame_rate:20,min_frame_rate:15,max_bit_rate:448,min_bit_rate:320,adjust_bit_rate:640},{band_width:192,width:320,height:180,max_frame_rate:20,min_frame_rate:15,max_bit_rate:320,min_bit_rate:192,adjust_bit_rate:400},{band_width:128,width:176,height:98,max_frame_rate:20,min_frame_rate:15,max_bit_rate:192,min_bit_rate:32,adjust_bit_rate:200},{band_width:64,width:176,height:98,max_frame_rate:20,min_frame_rate:15,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]}):(E={is_video_bw_include_audio:1,is_video_bw_subduct_aux:1,is_h264_hp_same_with_bp:1,is_video_bw_subduct_aux_recv:0},h={table_num:11,param_set:[{band_width:1984,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:2304,min_bit_rate:896,adjust_bit_rate:2304},{band_width:1856,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:2176,min_bit_rate:896,adjust_bit_rate:2176},{band_width:1472,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1792,min_bit_rate:896,adjust_bit_rate:1792},{band_width:1408,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1728,min_bit_rate:896,adjust_bit_rate:1728},{band_width:960,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1280,min_bit_rate:896,adjust_bit_rate:1433},{band_width:704,width:960,height:540,max_frame_rate:30,min_frame_rate:22,max_bit_rate:896,min_bit_rate:640,adjust_bit_rate:900},{band_width:448,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:640,min_bit_rate:192,adjust_bit_rate:900},{band_width:320,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:512,min_bit_rate:192,adjust_bit_rate:640},{band_width:192,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:384,min_bit_rate:192,adjust_bit_rate:400},{band_width:128,width:512,height:288,max_frame_rate:15,min_frame_rate:10,max_bit_rate:192,min_bit_rate:96,adjust_bit_rate:200},{band_width:64,width:512,height:288,max_frame_rate:15,min_frame_rate:10,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]},C=window.localStorage.getItem("svc_video_level_tbl_id"),isNullOrEmpty(C)&&(C=0),(C<0||C>=3)&&(C=0),L=constant.SvcResolutionPCTable[C],window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(L=constant.SvcResolutionPCTable[constant.SVCResolutionLevel.STANDARD])),v.video_resolution_table=h,window.CLIENTCONFIG.ISBIGWIN||(v.svc_resolution_table=L),v.video_resolution_adj_num=4,v.fluid_control=I,v.bandwidth_calc_policy=E,T=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,v.video_hdaccelerate={hd_encoder:m,hd_decoder:T},window.CLIENTCONFIG.ISMOBILE?v.video_hdaccelerate={hd_encoder:m,hd_decoder:0}:(v.video_hdaccelerate={hd_encoder:m,hd_decoder:T},g.info("media:() media hard code:"+T)),g.info("media:() media =",(0,d.default)(v)),e.abrupt("return",v);case 61:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),C=function(){var e=window.CLIENTCONFIG,t=$getState().login,r=t.serverAddress,n=coreCommon.isHuaweiCloud(r),a=n?0:parseInt(e["Device.ComCfg.Media.VideoShaping"]),o={rtp_hdr_ext:1,video_ars:{ars:parseInt(e["Device.ComCfg.Media.VideoARS"]),ars_ctrl_framesize:parseInt(e["Device.ComCfg.Media.VideoARSFrameSize"]),ars_ctrl_framerate:parseInt(e["Device.ComCfg.Media.VideoARSFrameRate"]),ars_ctrl_bitrate:parseInt(e["Device.ComCfg.Media.VideoARSBitRate"]),ars_ctrl_fec:parseInt(e["Device.ComCfg.Media.VideoArsFec"]),ars_data_shaping:a}};return g.info("media: media =",(0,d.default)(o)),o},T=function(){var e={h264_quality_level_table:{param_setnumber:4,quality_level_param_set:[{codec_name:"",pt:105,profile_idc:66,packet_mode:1,level_asymmetry:1,priority:3},{codec_name:"",pt:106,profile_idc:66,packet_mode:0,level_asymmetry:1,priority:4},{codec_name:"",pt:107,profile_idc:100,packet_mode:1,level_asymmetry:1,priority:1},{codec_name:"",pt:108,profile_idc:100,packet_mode:0,level_asymmetry:1,priority:2}]}};return g.info("media:BP/HP media =",(0,d.default)(e)),e},N=(t.reConfigVideoAndDataSetting=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r,n,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,L();case 3:return t.media=e.sent,e.next=6,coreTup.getCallInstance();case 6:return r=e.sent,e.next=9,r.config(t);case 9:return e.next=11,E();case 11:return n=e.sent,e.next=14,r.config(n);case 14:"android"===window.CLIENTCONFIG.PLATFORM&&(a=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,g.info("android hard decoder enter 1",a),window.isHardDecodeToNative(a));case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.restoreMAAConfControl=function(){var e=(0,f.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return g.info("restoreMAAConfControl"),t={conf:{use_maa_confctrl:1}},e.next=6,coreTup.getCallInstance();case 6:r=e.sent,r.config(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=4096,r=window.netWorkType;return g.info("The current network type is: "+r+", bSupport Hdacc:"+e),r===constant.NETWORK_TYPE.TYPE_WIFI?t=parseInt(w["Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"]):r===constant.NETWORK_TYPE.TYPE_4G?t=parseInt(w["Device.ComCfg.Media.Mobile.4GTotalBandwidth"]):r===constant.NETWORK_TYPE.TYPE_3G&&(t=parseInt(w["Device.ComCfg.Media.Mobile.3GTotalBandwidth"])),t}),S=function(){g.info("getPFourbfcpLogic");try{var e=window.fs;if(e){var t=APP_DATA_PATH+"/ImpBfcpTLS",r=t+"/p4bfcp.txt";if(e.existsSync(r))return e.readFileSync(r).toString()}}catch(e){g.error("getPFourbfcpLogic",e.toString())}};t.serPointPickupCfg=function(){var e={service:{server_right:{type:7,active_accesscode:w["Device.ComCfg.Service.pointPickupActive"],deactive_accesscode:"",register:0,right:0}}};return g.info("serPointPickupCfg =",(0,d.default)(e)),e},t.serGroupPickupCfg=function(){var e={service:{server_right:{type:6,active_accesscode:w["Device.ComCfg.Service.groupPickupActive"],deactive_accesscode:"",register:0,right:0}}};return g.info("serGroupPickupCfg =",(0,d.default)(e)),e}},235:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildStg=t.startPortDetect=t.startFireWallDetect=t.checkStgReConnect=t.updateStgAuthInfo=t.portDetect=t.fireWallDetect=t.destroyStgTunnel=t.buildStgTunnel=t.updateFireWallAndSipInfo=t.updateStgInfo=t.stgTunnelDisconnected=void 0;var a=r(69),o=n(a),i=r(127),s=n(i),u=r(3),c=n(u),d=r(141),l=n(d),f=r(1),p=n(f),_=r(2),g=n(_),w=(t.startFireWallDetect=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a,o=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("[ startFireWallDetect ]  svnUri: "+t),e.next=3,(0,v.getLoginModel)();case 3:return r=e.sent,e.next=6,coreTup.getUportalInstance();case 6:return n=e.sent,a=new c.default(function(e,a){var i=function(){var t=(0,g.default)(p.default.mark(function t(n){var i;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=n.param,i&&0===i.result?(h.info("[ fireWallDetectResult ] success. The fireWall mode is  ",i.fire_wall_mode),r.fireWallDetectResult=i,e(i)):(h.error("[ fireWallDetectResult ] failed."),a((0,s.default)({},n,{result:!1,errorCode:v.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:v.ErrorType.uportal})));case 2:case"end":return t.stop()}},t,o)}));return function(e){return t.apply(this,arguments)}}();n.setNotifyFunc(360463,i),C(t)}),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.startPortDetect=function(){var e=(0,g.default)(p.default.mark(function e(t,r){var n,a,i,u=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("[ startPortDetect ] svnUri : "+t+", detectport"+r),e.next=3,(0,v.getLoginModel)();case 3:return n=e.sent,e.next=6,coreTup.getUportalInstance();case 6:return a=e.sent,i=new c.default(function(e,n){var i=function(){var t=(0,g.default)(p.default.mark(function t(r){var a;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:h.info("[ portDetectResult ]"),a=r.param,a?(h.info("portDetectResultdetect success. The fireWall mode is  "+(0,o.default)(a)),e(a)):(h.error("port detect failed."),n((0,s.default)({},r,{result:!1,errorCode:v.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:v.ErrorType.uportal})));case 3:case"end":return t.stop()}},t,u)}));return function(e){return t.apply(this,arguments)}}();a.setNotifyFunc(360475,i),T(t,r)}),e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),t.buildStg=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r,n,a,o,i,u,d,l,f,_;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getLoginModel)();case 2:if(t=e.sent,r=t.stgUri,n=t.stgAccount,a=t.useIM,o=t.fireWallMode,i=t.maaProxyAddress,u=t.isSupportProxy,!t.isHWUC){e.next=6;break}return e.abrupt("return",c.default.resolve());case 6:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.ISBIGWIN){e.next=8;break}return e.abrupt("return",c.default.resolve());case 8:if(!coreCommon.isMobile()){e.next=12;break}return h.info("[ buildStg ] mobile can not buildStg"),i&&!u&&(h.info("[ buildStg ] mobile use tls"),t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return",c.default.resolve());case 12:if(d=!1,void 0===r||""===r||";"===r||";;"===r||";;;"===r){e.next=38;break}if(h.info("[ buildStg ] uportal has stg stgUri;"),!u&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==o&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==o){e.next=33;break}return e.next=18,coreSecurity.getPasswordManager();case 18:return l=e.sent,e.next=21,l.getPassword("stgPassword");case 21:return f=e.sent,e.next=24,L({stgUri:r,stgAccount:n,stgPassword:f});case 24:if(_=e.sent,_.result){e.next=27;break}return e.abrupt("return",(0,v.LoginError)((0,s.default)({},_,{result:!1,errorCode:v.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:v.ErrorType.uportal})));case 27:return d=!0,t.socketMode=d?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!u&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return",_);case 33:t.socketMode=d?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!u&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),h.info("[ buildStg ]no need to buildStg, only build stg for im mode or fireWallMode is 0 or 1; useIM:"+a+" fireWallMode:"+o);case 36:e.next=42;break;case 38:return h.info("[ buildStg ]no stgUri, no need to buildStg"),t.socketMode=d?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!u&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return");case 42:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),v=r(164),E=r(220),h=coreLogger.getLogger("login")("stg"),I=t.stgTunnelDisconnected=function(){var e=(0,g.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("stgTunnelDisconnected"),e.next=3,(0,v.getLoginModel)();case 3:t=e.sent,t.set({isBuildStgSuc:!1}),window.dispatchEvent(new Event("stgTunnelDisconnected"));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),m=t.updateStgInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a,o,i,s,u,c,d,f,_,g,w,E,I,m;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("[ updateStgInfo ]"),e.next=3,(0,v.getLoginModel)();case 3:if(r=e.sent,n=t.address,a=0===t.result,o=r.stgUri,i=r.eserverStgUri,s=0,u="",!a){e.next=27;break}if(c=i.split(";"),d=o.split(";"),f=d.length,n){e.next=18;break}u=c[0],s=0,e.next=27;break;case 18:_=0;case 19:if(!(_<f)){e.next=27;break}if(-1===d[_].indexOf(n)){e.next=24;break}return u=c[_],s=_,e.abrupt("break",27);case 24:_++,e.next=19;break;case 27:return g=u.split(":"),w=(0,l.default)(g,2),E=w[0],I=w[1],m={stgUriUsed:n,currentNum:s,isBuildStgSuc:a,eServerAddress:E,eServerPort:parseInt(I)},r.set(m),e.abrupt("return",m);case 31:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),L=(t.updateFireWallAndSipInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a,o,i,s,u,c,d,f,_,g,w,E,I,m,L,C,T,N,S,O,R,y,x,b;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("[ updateFireWallAndSipInfo ]"),e.next=3,(0,v.getLoginModel)();case 3:r=e.sent,n=r.svnUri,a=r.sipStgUri,o=r.sipUri,i=n.split(";"),s=a.split(";"),u=o.split(";"),c="",c=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===t?s:constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN===t?i:u,d=c[0]?c[0].split(":"):["",0],f=(0,l.default)(d,2),_=f[0],g=f[1],w=c[1]?c[1].split(":"):["",0],E=(0,l.default)(w,2),I=E[0],m=E[1],L=c[2]?c[2].split(":"):["",0],C=(0,l.default)(L,2),T=C[0],N=C[1],S=c[3]?c[3].split(":"):["",0],O=(0,l.default)(S,2),R=O[0],y=O[1],x=!0,b={sipServerAddress:_,sipServerPort:parseInt(g),sipServerBackup1:I,sipServerPortBackup1:m,sipServerBackup2:T,sipServerPortBackup2:N,sipServerBackup3:R,sipServerPortBackup3:y,fireWallMode:t,isGetFirewallRes:x},r.set(b);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.buildStgTunnel=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a,o,i,s,u,c,d,f,_,g,w,L,C,T,N,S=t.stgUri,O=t.stgAccount,R=t.stgPassword;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(h.info("[ buildStgTunnel ]"),h.info("<account_login><5_build_stg>begin"),r=S.split(";"),n=r.length,a=new Array,o=0;o<n;o++)i=r[o].split(":"),s=(0,l.default)(i,2),u=s[0],c=s[1],d={server_uri:u,server_port:parseInt(c)},a.push(d);return f=window.EXEC_PATH,_={stg_num:n,stg_servers:a,user_name:O,password:R,ca_path:""},e.next=10,coreTup.getUportalInstance();case 10:return g=e.sent,g.setNotifyFunc(360466,I),w=PromiseObject(),e.next=15,(0,v.getLoginModel)();case 15:return L=e.sent,L.shouldBuildStg=!0,e.next=19,g.buildStgTunnel(_,function(e){w.resolve(e)});case 19:return e.next=21,w;case 21:if(C=e.sent,T=C.param,0!==T.result){e.next=35;break}return e.next=26,(0,E.stopLocalServer)();case 26:return e.next=28,m(T);case 28:return N=e.sent,L.set({isBuildStgSuc:!0}),h.info("<account_login><5_build_stg>end ok"),h.info("buildStg build success."),e.abrupt("return",{result:!0,stgInfo:N});case 35:return L.set({isBuildStgSuc:!1}),h.info("<account_login><5_build_stg>end failed"),h.error("buildStg build fail."),e.abrupt("return",{result:!1,errorCode:v.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR});case 39:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),C=(t.destroyStgTunnel=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r,n,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getLoginModel)();case 2:return t=e.sent,h.info("[ destroyStgTunnel ]"),e.next=6,coreTup.getUportalInstance();case 6:return r=e.sent,n=PromiseObject(),r.destroyStgTunnel(function(e){n.resolve(e)}),e.next=11,n;case 11:if(a=e.sent,o=a.param,0!==o.result){e.next=19;break}return t.set({isBuildStgSuc:!1}),h.info("destroyStgTunnel success."),e.abrupt("return",{result:!0});case 19:h.error("destroyStgTunnel fail.");case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.fireWallDetect=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("[ fireWallDetect ]"),r=N(t,0),e.next=4,coreTup.getUportalInstance();case 4:n=e.sent,n.fireWallDetect(r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),T=t.portDetect=function(){var e=(0,g.default)(p.default.mark(function e(t,r){var n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(t,r),e.next=3,coreTup.getUportalInstance();case 3:a=e.sent,a.portDetect(n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),N=function(e,t){for(var r=e.split(";"),n=r.length,a=new Array,o=0;o<n;o++){var i=r[o].split(":"),s=(0,l.default)(i,2),u=s[0],c=(s[1],{server_uri:u,server_port:t>0?t:0});a.push(c)}return{server_num:n,servers:a}};t.updateStgAuthInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a=t.account,o=t.password;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={user_name:a,password:o},e.next=3,coreTup.getUportalInstance();case 3:n=e.sent,n.updateStgAuthInfo(r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.checkStgReConnect=function(){var e=(0,g.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("checkStgReConnect "),e.next=3,(0,v.getLoginModel)();case 3:if(t=e.sent,t.isBuildStgSuc){e.next=15;break}return h.info("enter buildStg"),e.prev=6,e.next=9,w();case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(6),h.error("buildStg error"),"reconnect stg error";case 15:case"end":return e.stop()}},e,void 0,[[6,11]])}));return function(){return e.apply(this,arguments)}}()},241:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return B.info("[ checkHasProxyAndStgurl ]"),(0,b.getLoginModel)(function(e){return e.isSupportProxy&&!e.stgUri?(0,b.LoginError)({errorCode:A.UErrorCode.LOGIN_ERR_HAS_PROXY_NO_STG,errorType:constant.LOGIN_ERROR_TYPE.uportal}):s.default.resolve()})}function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];B.info("enableAutoLogin",e),window.CLIENTCONFIG.ISMOBILE?window.stroage.setFastLogin(e):remote.getGlobal("remoteVars").disable_auto_login=!e}Object.defineProperty(t,"__esModule",{value:!0}),t.checkShowPrivacy=t.ipLogin=t.checkForceSwtichAccount=t.initLoginInfo=t.reLogineServer=t.login=t.promiseToString=t.cancelLogin=t.makeLoginCancelable=t.loginPromise=void 0;var i=r(3),s=n(i),u=r(1),c=n(u),d=r(69),l=n(d),f=r(2),p=n(f),_=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r,n,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ initServices ]"),e.next=3,(0,b.getLoginModel)();case 3:if(t=e.sent,r=t.useIM,n=t.useSip,a=t.isMultiDeviceLogined,o=t.useEsight,i=t.isMobile,B.info("login success initServices: ",{useIM:r,useSip:n,isMultiDeviceLogined:a,isMobile:i,useEsight:o}),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=13;break}return e.next=13,(0,M.resetSipResumeFlag)();case 13:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=26;break}if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=19;break}return e.next=18,window.isFloatWindow;case 18:e.t0=e.sent;case 19:if(!(s=e.t0)){e.next=24;break}B.info("the window is float "),e.next=26;break;case 24:return B.error("has no activity, login err!!!!!"),e.abrupt("return",(0,b.LoginError)({result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common}));case 26:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ checkDuplicateLogin ]"),e.next=3,(0,b.getLoginModel)();case 3:if(t=e.sent,!t.loginDisable||t.isTempLogin){e.next=8;break}return e.abrupt("return",(0,b.LoginError)({errorCode:"duplicateLogin",errorType:constant.LOGIN_ERROR_TYPE.common}));case 8:return t.setLoginStatus(!0),e.abrupt("return",s.default.resolve(t));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r,n,a,i,u,d,l,f,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ prepareLogin ]"),B.info("<account_login><1_prepareLogin>begin"),window.mutiLanguage="FALSE",e.next=5,(0,b.getLoginModel)();case 5:if(t=e.sent,!t.isTempLogin){e.next=20;break}return B.info("prepareLogin: handle tempLogin info"),t.isTempLogin=!0,t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,r=$getState(),n=r.conf,a=n.confTempAcsAccount,i=n.confTempAcsUportalAddress,u=n.confTempAcsUportalPort,e.next=14,coreSecurity.getPasswordManager();case 14:return d=e.sent,e.next=17,d.getPassword("password");case 17:l=e.sent,t.set({account:a,displayAccount:a,password:l,serverAddress:i,serverPort:u}),t.set({password:l});case 20:if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,t.set({serverAddress:window.getLinkSmcUportalAddress,serverPort:window.getLinkSmcUportalPort})):(f=appService.getItUserInfo(),p=window.CLIENTCONFIG.DEFAULT_UPORTAL_SERVER,window.getUportalServer()&&(p=window.getUportalServer()),t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,t.set({loginAccount:f.contactsId,password:"*******",serverAddress:p,serverPort:8443}))),window.CLIENTCONFIG.ISMOBILE||o(!1),B.info("[ prepareLogin ] ok! "),B.info("<account_login><1_prepareLogin>end ok"),!window.CLIENTCONFIG.ISMOBILE){e.next=28;break}return e.abrupt("return",window.getCurrentNetWorkType());case 28:return e.abrupt("return",s.default.resolve(0));case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r,n,a,o,i,s,u,d,l,f,p,_,g,w;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B.info("[ checkLoginInfo ]"),B.info("<account_login><2_checkLoginInfo>begin"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,b.getLoginModel)();case 6:if(t=e.sent,1!==(r=t.authType)){e.next=12;break}return B.info("oAuth no need checkLoginInfo"),B.info("<account_login><2_checkLoginInfo>end ok"),e.abrupt("return");case 12:if(n=t.displayAccount,a=t.account,o=t.password,i=t.serverAddress,s=t.serverPort,u=t.isResume,d=t.isTempLogin,l=t.status,f=void 0,!u&&!l){e.next=22;break}return e.next=17,coreSecurity.getPasswordManager();case 17:return p=e.sent,e.next=20,p.getPassword("password");case 20:f=e.sent,t.password=f;case 22:if(window.CLIENTCONFIG.ISBIGWIN||window.isPluginEnv){e.next=30;break}if(_=f||t.password,n&&_){e.next=27;break}return B.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,b.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u}));case 27:if(-1===n.indexOf(" ")){e.next=30;break}return B.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,b.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_HAS_SPACE",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u}));case 30:if(coreUt.utConfigAccountInfo({configAccount:n}),i&&s){e.next=34;break}return B.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,b.LoginError)({result:!1,errorCode:"LOGIN_ADDRESS_OR_PORT_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u}));case 34:return t.isOAuth=!1,t.OAuthUrl="",t.serverPort=parseInt(s),e.next=39,coreSecurity.getPasswordManager();case 39:if(g=e.sent,e.t0=o,!e.t0){e.next=44;break}return e.next=44,g.setPassword("password",o);case 44:return e.next=46,coreHttp.initHttpTrans();case 46:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=60;break}if(e.t1=window.CLIENTCONFIG.ISMOBILE,!e.t1){e.next=52;break}return e.next=51,window.isFloatWindow;case 51:e.t1=e.sent;case 52:if(!(w=e.t1)){e.next=57;break}B.info("the window is float "),e.next=60;break;case 57:return B.error("has no activity, login err!!!"),B.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,b.LoginError)({result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common}));case 60:B.info("[ checkLoginInfo ] ok! "),B.info("<account_login><2_checkLoginInfo>end ok");case 62:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=3;break}return B.info("is big win can not doDetectFireWall"),e.abrupt("return");case 3:if(!coreCommon.isMobile()){e.next=6;break}return B.info("[ doDetectFireWall ] mobile can not doDetectFireWall"),e.abrupt("return");case 6:return B.info("[ doDetectFireWall ]"),B.info("<account_login><4_firewall>begin"),e.next=10,(0,b.getLoginModel)();case 10:return t=e.sent,t.isInDetectFireWall=!0,e.next=14,(0,O.checkDetectFireWall)();case 14:return r=e.sent,t.isInDetectFireWall=!1,coreCommon.dispatchModuleEvent("login",{event:"detectFirewall",code:0}),B.info("<account_login><4_firewall>end ok"),e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:return t=e.sent,t.isInBuildStg=!0,e.next=6,(0,y.buildStg)();case 6:return r=e.sent,t.isInBuildStg=!1,coreCommon.dispatchModuleEvent("login",{event:"buildStg",code:0}),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ loginSuccess ]"),e.next=3,(0,b.getLoginModel)();case 3:t=e.sent,window.retryUportalLoginTimes=0,window.shouldStopRertyLogin=!0,window.baseTimeInterval=0,t.sipLoginOnly||(B.info("[ loginSuccess ] not sipLoginOnly, enableautologin!"),o()),t.isTempLogin||(K(t.account,window.isHubEnv).then(function(){B.info("[maxhub] go into setLoginRecord"),(0,R.setLoginRecord)()}),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(r=window.getRoute(),isNullOrEmpty(window.handleJoinTempConfNoNameURL)),t.isMobile&&document.addEventListener("pause",P.storeAppCache,!1)),coreCommon.dispatchModuleEvent("login",{event:"uportal",code:0}),(0,P.storeAppCache)(),t.clearPassword(),coreIm.initChangeShowRecentInfo(),B.info("[ loginSuccess ] ok! "),t.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.FINISH;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,p.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=6;break}return B.info("[IT-Meeting] no need to loadConfigFromDB"),e.abrupt("return");case 6:return B.info("[ loadConfigFromDB ]"),t.isInLoadConfigFromDB=!0,e.next=10,(0,x.loadUserConfigFromDB)();case 10:t.isInLoadConfigFromDB=!1,window.CLIENTCONFIG.ISBIGWIN?(coreSetting.saveChrUploadState(!0),B.info("big win or maxhub chr is AUTO!")):window.isHubEnv&&coreSetting.saveChrUploadState(!0),B.info("[ loadConfigFromDB ] ok! ",handlePhoneNumber(t.account));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,p.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!t.isTempLogin){e.next=6;break}return B.info("[IT-Meeting] no need to initPrivateDB"),e.abrupt("return");case 6:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=9;break}return B.info("[bigwin] no need to initPrivateDB"),e.abrupt("return");case 9:return B.info("[ initPrivateDB ]"),t.isInInitPrivateDB=!0,e.next=13,coreDb.initSQLitePrivateDB({account:t.account});case 13:t.isInInitPrivateDB=!1,B.info("[ initPrivateDB ] ok! ",handlePhoneNumber(t.account));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,p.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:t=e.sent,window.CLIENTCONFIG.ISMOBILE&&(B.info("[ initMobileNative ]",handlePhoneNumber(t.account)),window.initMobileNative());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r,n,a,o,i,s,u,d,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:return t=e.sent,isNullOrEmpty(t.real_user_account)||isNullOrEmpty(t.authToken)||(0,F.checkUpgrade)(!1,t.authToken,t.real_user_account),B.info("[ serviceReadyLoadData ]"),B.info("serviceReadyLoadData, set isOffline false"),window.isOffline=!1,t.setLoginStatus(!1,!0),(0,P.storeAppCache)(),r={key:"confPageShowType",value:"true"},e.next=12,coreDb.saveUserConfig(r);case 12:return n=t.isSupportAS,a={key:"asInfo",value:(0,l.default)(n)},e.next=16,coreDb.saveUserConfig(a);case 16:return coreCommon.dispatchModuleEvent("login",{event:"total",code:0}),e.next=19,(0,b.getLoginModel)();case 19:return o=e.sent,i=handlePhoneNumber(o.displayAccount),s=handlePhoneNumber(o.show_account),u=handlePhoneNumber(o.account),d={displayAccount:"",showAccount:"",account:""},isNullOrEmpty(i)||(d.displayAccount=i),isNullOrEmpty(s)||(d.showAccount=s),isNullOrEmpty(u)||(d.account=u),appService.debugInfoPrint(d),e.next=30,coreDb.queryUserConfigList({key:"hasOpenPush"});case 30:return f=e.sent,(isNullOrEmpty(f)||"true"===f[0].value)&&C(),e.next=34,(0,M.registerResumeEvent)();case 34:return(0,P.storeAppCache)(),B.info("serviceReadyLoadData, status = "+t.status),window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv||$getState().login.sipLoginOnly||(0,G.checkHuaweiPhonePushSetting)(),B.info("[ serviceReadyLoadData ] ok! "),e.abrupt("return",{result:!0});case 39:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.enableAutoLogin=o;var N=r(211),S=r(228),O=r(220),R=r(166),y=r(235),x=r(408),b=r(136),A=r(164),k=r(289),P=r(185),M=r(221),U=r(293),G=(r(260),r(310),r(411)),D=r(229),F=r(292),B=coreLogger.getLogger("logic")("login"),W=t.loginPromise={loginPromise:null,sipLoginPromise:null,eserverLoginPromise:null,umserverLoginPromise:null},H=t.makeLoginCancelable=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.LOGIN_PROMISE_KEY.main_login;B.info("<account_login_cancel>track start:"+t);var n=new PromiseObject;switch(r){case constant.LOGIN_PROMISE_KEY.main_login:W.loginPromise=n;break;case constant.LOGIN_PROMISE_KEY.sip_login:W.sipLoginPromise=n;break;case constant.LOGIN_PROMISE_KEY.eserver_login:W.eserverLoginPromise=n;break;case constant.LOGIN_PROMISE_KEY.umserver_login:W.umserverLoginPromise=n}return e.then(function(e){(0,b.getLoginModel)().then(function(r){B.info("<account_login_cancel>track end -> name:"+t+", hasCanceled : "+r.hasLoginCanceled),r.hasLoginCanceled?n.reject({isCanceled:!0}):n.resolve(e)})}).catch(function(e){(0,b.getLoginModel)().then(function(r){B.info("<account_login_cancel>track end -> name:"+t+", hasCanceled : "+r.hasLoginCanceled),r.hasLoginCanceled?n.reject({isCanceled:!0}):n.reject(e)})}),n},V=(t.cancelLogin=function(){var e=(0,p.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:if(t=e.sent,t.hasLoginCanceled=!0,B.info("<account_login_cancel>do cancel start: "+V(W.loginPromise)+","+V(W.sipLoginPromise)+","+V(W.eserverLoginPromise)+","+V(W.umserverLoginPromise)),e.prev=5,isNullOrEmpty(W.loginPromise)){e.next=9;break}return e.next=9,W.loginPromise;case 9:if(isNullOrEmpty(W.sipLoginPromise)){e.next=12;break}return e.next=12,W.sipLoginPromise;case 12:if(isNullOrEmpty(W.eserverLoginPromise)){e.next=15;break}return e.next=15,W.eserverLoginPromise;case 15:if(isNullOrEmpty(W.umserverLoginPromise)){e.next=18;break}return e.next=18,W.umserverLoginPromise;case 18:B.info("<account_login_cancel>do cancel end"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),B.info("<account_login_cancel>do cancel end. "+(0,l.default)(e.t0));case 24:case"end":return e.stop()}},e,void 0,[[5,21]])}));return function(){return e.apply(this,arguments)}}(),t.promiseToString=function(e){return"("+!isNullOrEmpty(e)+","+(isNullOrEmpty(e)?"undefined":e.status)+")"});t.login=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:return t=e.sent,e.next=5,(0,b.getMyInfo)();case 5:return r=e.sent,t.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.LOGINING,t.isResume=i,t.isTempLogin=s,t.desc=u,n=(0,S.getUportalApi)().loginToUportal,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(n=(0,S.getUportalApi)().uportalAllonline,window.pcLoginState()&&(t.isMultiDeviceLogined=!0)),window.CLIENTCONFIG.ENABLE_IT_MEETING||((0,U.initService)("pre login"),!0===(o=r.isOffToLine)||i||coreUi.initAvatarMap()),e.abrupt("return",g().then(function(){return H(w(),"prepareLogin")}).then(function(){return H(v(),"checkLoginInfo")}).then(function(){return H(n(),"loginAuth")}).then(function(){return H(a(),"checkHasProxyAndStgurl")}).then(function(){return H(q(),"checkShowPrivacy")}).then(function(){return H(L(),"initPrivateDB")}).then(function(){return H(I(),"loginSuccess")}).then(function(){return H(E(),"doDetectFireWall")}).then(function(){return H(h(),"doBuildStg")}).then(function(){return H(m(),"loadConfigFromDB")}).then(function(){return H(_(),"initServices")}).then(function(){return H(T(),"serviceReadyLoadData")}).catch(k.handleLoginError));case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reLogineServer=function(){var e=(0,p.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:return t=e.sent,B.info("[ reLogineServer ]",handlePhoneNumber(t.account)),e.abrupt("return",coreIm.reLoginToeServer().then(function(){return coreIm.registerEvent()}).then(function(){return B.info("[ reLogineServer ] ok! ",handlePhoneNumber(t.account)),!0}).catch(function(e){return!1}));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.startCallout=(0,p.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.dealStartCall(),B.info("startCallout, set isOffline false"),window.isOffline=!1,window.webView.switchToFront();case 4:case"end":return e.stop()}},e,void 0)})),window.handlePluginOneKeyConf=function(){var e=(0,p.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.handleJoinTempConfNoName(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.handlePluginTempUserInfo=(0,p.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:B.info("deal temp get user info 10"),t="",r=JSON.parse(t),window.oneKeyConfTempUserInfo(r);case 5:case"end":return e.stop()}},e,void 0)})),window.oneKeyConfTempUserInfo=function(){var e=(0,p.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},!t||void 0===t.result&&void 0===t.reslut?r=t:(r.param=t,void 0!=t.reslut&&(r.param.result=t.reslut)),(0,D.handletempsipconfinfo)(r);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var K=function(){var e=(0,p.default)(c.default.mark(function e(t,r){var n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return B.info("start maxhub init"),n={isAutoLogin:!0,isRememberPassword:!0},e.next=5,(0,b.getLoginModel)();case 5:a=e.sent,a.set(n),coreConf.initAsPairServer();case 8:return e.abrupt("return",s.default.resolve(0));case 9:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),Y=(t.initLoginInfo=function(){var e=(0,p.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ initLoginInfo ]"),e.next=3,(0,R.loadLoginSetting)();case 3:return e.next=5,(0,R.loadLoginRecordList)();case 5:return t=e.sent,e.next=8,Y();case 8:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=12;break}if(!window.anonymousJoinConf){e.next=12;break}return e.next=12,coreConf.resumeDeviceInfo();case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkForceSwtichAccount=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r,n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.getLoginModel)();case 2:t=e.sent,r=t.switchAccount,isNullOrEmpty(r)||isNullOrEmpty(r.tempAccount)||(n={displayAccount:r.tempAccount,account:r.tempAccount,password:"",serverAddress:r.tempServerAddress,serverPort:r.tempServerPort},t.set(n),a={},t.switchAccount=a);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());window.handleSwitchAccount=function(){var e=(0,p.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.account,n=t.serverAddress,a=t.serverPort,o=t.noNeedLogout,e.next=3,(0,b.getLoginModel)();case 3:if(i=e.sent,window.anonymousJoinConf||o){e.next=7;break}return e.next=7,(0,U.logout)(!0,!0);case 7:B.info("handleSwitchAccount update login info"),s={account:r,displayAccount:r,password:"",serverAddress:n,serverPort:a},u={tempAccount:r,tempServerAddress:n,tempServerPort:a},i.set(s),i.switchAccount=u;case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var q=(t.ipLogin=function(){var e=(0,p.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("debug info ipLogin begin"),coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreCall.registerCallEvent(),e.next=7,(0,O.ipCallConfig)();case 7:throttle((0,p.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e,void 0)})),1e3)(),B.info("debug info ipLogin end");case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkShowPrivacy=function(){var e=(0,p.default)(c.default.mark(function e(){var t,r,n,a,o,i,s,u,d,l,f,p,_,g;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=PromiseObject(),!window.CLIENTCONFIG.ISMOBILE){e.next=14;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=8;break}return e.next=5,appService.isLaunchFromPush();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=!1;case 9:if(r=e.t0,!window.CLIENTCONFIG.ISMOBILE||!r){e.next=14;break}return B.info("[checkShowPrivacy] skip for isLaunchFromPush : "+r),t.resolve(!0),e.abrupt("return",t);case 14:return e.next=16,(0,b.getLoginModel)();case 16:if(n=e.sent,a=n.account,o=n.isCheckPrivacy,i=n.isTempLogin,s=n.privacy_version,!(window.isHubEnv||o||window.CLIENTCONFIG.ISBIGWIN||i||window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv)){e.next=22;break}return B.error("this is maxhub environment or resume, uncheck privacy"),t.resolve(!0),e.abrupt("return",t);case 22:return e.prev=22,B.info("[checkShowPrivacy] start"),n.set({isCheckPrivacy:!0}),e.next=27,coreDb.queryLoginSetting({key:"firstLoginAccount"});case 27:return u=e.sent.value,e.next=30,coreDb.queryLoginSetting({key:a+"_privacyVersion"});case 30:if(d=e.sent.value,l=!!d,d=d||"V01.00",s=s||"V01.00",f=d.split("V")[1],p=s.split("V")[1],_={oprEvent:constant.OPR_EVENT_TYPE.PRIVACY,privacyver:s},void 0!==u){e.next=46;break}return e.next=40,coreDb.saveLoginSetting({key:"firstLoginAccount",value:a});case 40:return e.next=42,coreDb.saveLoginSetting({key:a+"_privacyVersion",value:s});case 42:(0,N.recordPrivacy)(_),t.resolve(!0),e.next=47;break;case 46:u!==a&&!l||p>f?(B.info("[checkShowPrivacy] show privacy"),g=function(){(0,N.recordPrivacy)(_),n.setLoginStatus(!0),p>=f&&coreDb.saveLoginSetting({key:a+"_privacyVersion",value:s}),t.resolve(!0)},delegate(g,"onAgreePrivacy"),n.setLoginStatus(!1,!0),window.goRoute("firstLoginPrivacy")):t.resolve(!0);case 47:return e.abrupt("return",t);case 50:return e.prev=50,e.t1=e.catch(22),B.error("[checkShowPrivacy] error",e.t1.toString()),t.resolve(!0),e.abrupt("return",t);case 55:case"end":return e.stop()}},e,void 0,[[22,50]])}));return function(){return e.apply(this,arguments)}}())},260:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPush=t.unRegisterPush=t.DB_KEY_HAS_OPEN_PUSH=t.DB_KEY_APNS_CER_TYPE=t.DB_KEY_IOS_VOIP_TOKEN=t.DB_KEY_IOS_PUSH_TOKEN=t.DB_KEY_HW_PUSH_BADGE_CLASS_NAME=t.DB_KEY_HW_PUSH_TOKEN=void 0;var a=r(69),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),d=r(136),l=(r(166),r(310)),f=coreLogger.getLogger("login")("push"),p=t.DB_KEY_HW_PUSH_TOKEN="hwPushToken",_=t.DB_KEY_HW_PUSH_BADGE_CLASS_NAME="hwPushBadgeClassName",g=t.DB_KEY_IOS_PUSH_TOKEN="iosPushToken",w=t.DB_KEY_IOS_VOIP_TOKEN="voipToken",v=t.DB_KEY_APNS_CER_TYPE="apnsCerType",E=t.DB_KEY_HAS_OPEN_PUSH="hasOpenPush";window.registerHWPush=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.webView.getLocalIp()||"0.0.0.0",!isNullOrEmpty(a)){e.next=6;break}return e.next=4,coreDb.queryLoginSetting({key:p});case 4:r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)||(a=r.value);case 6:if(!isNullOrEmpty(o)){e.next=11;break}return e.next=9,coreDb.queryLoginSetting({key:_});case 9:n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)||(o=n.value);case 11:return e.next=13,h(2,1,a,o,"","",t);case 13:return e.next=15,(0,l.registerEServerClientPush)(2,1,a,o,"","",t);case 15:coreDb.saveLoginSetting({key:p,value:a}),coreDb.saveLoginSetting({key:_,value:o});case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterHWClientPush=function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.webView.getLocalIp()||"0.0.0.0",n=void 0,a=void 0,e.next=5,coreDb.queryLoginSetting({key:p});case 5:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(n=o.value),e.next=9,coreDb.queryLoginSetting({key:_});case 9:return i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(a=i.value),e.next=13,h(2,3,n,a,"","",r,"5",t);case 13:return e.next=15,(0,l.registerEServerClientPush)(2,3,n,a,"","",r);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.unRegisterPush=function(){var e=(0,c.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=5;break}return e.next=3,window.unRegisterHWClientPush(t);case 3:e.next=8;break;case 5:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=8;break}return e.next=8,window.unRegisterIosPush(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.registerIosPush=function(){var e=(0,c.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,c.default)(s.default.mark(function e(a){var o,i,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=5;break}return e.next=3,coreDb.queryLoginSetting({key:g});case 3:o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(t=o.value);case 5:if(!isNullOrEmpty(r)){e.next=10;break}return e.next=8,coreDb.queryLoginSetting({key:w});case 8:i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(r=i.value);case 10:if(!isNullOrEmpty(n)){e.next=15;break}return e.next=13,coreDb.queryLoginSetting({key:v});case 13:u=e.sent,isNullOrEmpty(u)||!u.hasOwnProperty("key")||!u.hasOwnProperty("value")||isNullOrEmpty(u.key)||isNullOrEmpty(u.value)||(n=u.value);case 15:return e.next=17,h(1,1,"","",t,r,a,n);case 17:return e.next=19,(0,l.registerEServerClientPush)(1,1,"","",t,r,a,n);case 19:coreDb.saveLoginSetting({key:g,value:t}),coreDb.saveLoginSetting({key:w,value:r});case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterIosPush=function(){var e=(0,c.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,c.default)(s.default.mark(function e(r){var n,a,o,i,u,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,a=void 0,o="5",e.next=5,coreDb.queryLoginSetting({key:g});case 5:return i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(n=i.value),e.next=9,coreDb.queryLoginSetting({key:w});case 9:return u=e.sent,isNullOrEmpty(u)||!u.hasOwnProperty("key")||!u.hasOwnProperty("value")||isNullOrEmpty(u.key)||isNullOrEmpty(u.value)||(a=u.value),e.next=13,coreDb.queryLoginSetting({key:v});case 13:return c=e.sent,isNullOrEmpty(c)||!c.hasOwnProperty("key")||!c.hasOwnProperty("value")||isNullOrEmpty(c.key)||isNullOrEmpty(c.value)||(o=c.value),e.next=17,h(1,3,"","",n,a,r,o,t);case 17:return e.next=19,(0,l.registerEServerClientPush)(1,3,"","",n,a,r,o);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var h=t.registerPush=function(){var e=(0,c.default)(s.default.mark(function e(t,r,n,a,i,u,c){var l,p,_,g,w,v,h,I,m,L,C,T,N,S,O,R,y,x,b,A,k=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5",P=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info(" [ registerPush ] "),e.next=3,(0,d.getLoginModel)();case 3:return l=e.sent,p=l.account,_=l.authToken,g=l.serverAddress,w=l.serverPort,v=l.pushgwUri,e.next=7,coreSecurity.getPasswordManager();case 7:return h=e.sent,e.next=10,h.getPassword("password");case 10:if(I=e.sent,m=1,L="00:00",C="00:00",!isNullOrEmpty(n)||!isNullOrEmpty(i)){e.next=17;break}return f.info(" [ registerPush ] androidToken and iosDeviceToken is null"),e.abrupt("return");case 17:return isNullOrEmpty(a)&&(a=""),T="",T=l.isSupportAS?"https://"+v+"/PushAgent/push/registerpush":"https://"+g+":"+w+"/pushAgent/registerpush",N={user:p,deviceToken:1===t?i:n,pushType:t,flag:r,clientIP:c,language:window.langShortName,noPushStartTime:L,noPushEndTime:C,apnsServerType:1,apnsCerType:k,pushByTimeSwitch:m,heart_beat_time:30,android_token:1===t?i:n,appId:"1",pushClassName:a,voipToken:u,appMode:1,push_mode:1,imPushMode:1,callPushMode:0,pushIMActive:"welink://welinksoftclient/h5page?page=imDetail",pushCallActive:"welink://welinksoftclient/h5page?page=call"},e.next=23,coreHttp.sendSyncRequest({url:T,type:constant.REQUEST_TYPE.POST,header:{Authorization:"Basic "+_,"Content-Type":"application/json"},body:(0,o.default)(N),cipherlist:[50331695,50331701,50331708,50331709]});case 23:if(S=e.sent,O=S.param,R=O.recv_body,y=O.resp_code,x=O.result,!y){e.next=43;break}if(200!==(b=parseInt(y))){e.next=39;break}if(R=JSON.parse(R),!R.error){e.next=32;break}return f.error(" [ registerPush ] failed, errorCode:"+R.error+", info:"+R.error_description),e.abrupt("return");case 32:A=!0,1===r?A=!0:3===r&&(A=!1),(3===r&&P||1===r)&&coreDb.saveUserConfigList({key:E,value:A.toString()}),$dispatch(coreUi.changeHasOpenPush(A)),f.info(" [ registerPush ] result:",R),e.next=41;break;case 39:return f.error(" [ registerPush ] failed, request error, status code: "+y+", result: "+x),e.abrupt("return");case 41:e.next=44;break;case 43:f.error(" [ registerPush ] failed, status code:"+y);case 44:case"end":return e.stop()}},e,this)}));return function(t,r,n,a,o,i,s){return e.apply(this,arguments)}}()},261:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCmptEvent=t.detectStopServer=t.detectStartServer=t.detectStopClientContinue=t.detectStartClientContinue=t.detectStopClient=t.detectStartClient=t.detectUnInit=t.detectInit=t.checkCertificateOverdue=t.verifyCertificate=void 0;var n=r(412),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);t.verifyCertificate=a.verifyCertificate,t.checkCertificateOverdue=a.checkCertificateOverdue,t.detectInit=a.detectInit,t.detectUnInit=a.detectUnInit,t.detectStartClient=a.detectStartClient,t.detectStopClient=a.detectStopClient,t.detectStartClientContinue=a.detectStartClientContinue,t.detectStopClientContinue=a.detectStopClientContinue,t.detectStartServer=a.detectStartServer,t.detectStopServer=a.detectStopServer,t.setCmptEvent=a.setCmptEvent},272:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MyInfo=t.resetMyInfo=t.getMyInfo=void 0;var a=r(119),o=n(a),i=r(4),s=n(i),u=r(5),c=n(u),d=r(120),l=n(d),f=r(121),p=n(f),_=r(1),g=n(_),w=r(2),v=n(w),E=void 0,h=(t.getMyInfo=function(){var e=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E||(E=new I(h)),e.abrupt("return",E);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetMyInfo=function(){E=null},{language:"",languageCode:"",isReminder:!0,closeAppWays:"minimizeApp",isAutoCollectLogs:!0,hasAllowCollectLogs:!1,isAutoAcceptConf:!1,isAutoStart:!1,statusDesc:"",statusOptions:[],selectIndex:1,signature:"",isAutoResponseConf:!1,isOffToLine:!1,isAutoLeave:!0,account:"",address:"",age:"",bind_no:"",birthday:"",compareAccount:"",dept_id:"",dept_name_cn:"",dept_name_en:"",desc:"",email:"",espacenumber:"",etag:"",fax:"",gender:0,home_phone:"",image_id:"",image_sync_time:"",ip_phone:"",is_security:0,mobile:"",modify_time:"",name:"",native_name:"",office_phone:"",office_phone2:"",old_account:"",other_mobiles:"",other_phone:"",other_phone2:"",postcode:"",q_pin_yin:"",result_code:"",short_phone:"",staff_id:0,staff_no:"",state:"0",status:1,title:"",type:"0",uri:"",user_type:"0",voip:"",website:"",selfUserUri:"",show_account:""}),I=t.MyInfo=function(e){function t(e){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"notifyChanged",value:function(e){$dispatch(coreUi.updateMyInfo(e)),e&&e.languageCode&&coreCommon.dispatchModuleEvent("changeLanguage",e.languageCode)}}]),t}(coreCommon.ModuleCache)},288:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sipLoginAtomicReset=t.sipLoginAtomic=t.sipserverLogin=t.loginToRegSipServer=t.loginToSipServer=void 0;var a=r(123),o=n(a),i=r(3),s=n(i),u=r(69),c=n(u),d=r(1),l=n(d),f=r(2),p=n(f),_=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.getCallInstance;case 2:t=e.sent,t.setNotifyFunc(98305,T);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.getCallInstance;case 2:t=e.sent,t.setNotifyFunc(98691,w);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,p.default)(l.default.mark(function e(t){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.param,coreUt.utHandleServerError({isLocalError:r.isLocalError,requestId:r.requestId,serverName:r.serverName,serverApiName:r.serverApiName,errorCode:r.errorCode,errorDescription:r.errorDescription});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),v=t.loginToSipServer=function(){var e=(0,p.default)(l.default.mark(function e(){var t,r,n,a,o,i,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L=s,m.info("[ loginToSipServer ] _ignoreSipResult "+s),m.info("<account_login><7_sip>begin"),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER]}),e.next=6,(0,E.getLoginModel)();case 6:if(t=e.sent,r=t.isMultiDeviceLogined,n=t.isMobile,a=t.stgUri,o=t.sipLoginOnly,(0,h.registerSipResultCallback)(),
//! SipeServerSipPC
m.info("[ loginToSipServer ] isMultiDeviceLogined:"+r+", isMobile:"+n+", sipLoginOnly:"+o),r&&n&&(m.info("[ loginToSipServer ] end login:"),t.setLoginStatus(!1,!0)),r&&n&&!o){e.next=24;break}return _(),e.next=15,C(t.isTempLogin);case 15:if(i=e.sent,m.info("[ confctrlInit ] start"),!t.useMetting||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=20;break}return e.next=20,coreConf.confctrlInit();case 20:return m.info("[ confctrlInit ] end"),e.abrupt("return",i);case 24:return e.abrupt("return",{result:!1});case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),E=(t.loginToRegSipServer=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _(),e.next=3,C(!1);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r(136)),h=r(185),I=r(230),m=coreLogger.getLogger("logic")("login/sipLogin"),L=!1,C=t.sipserverLogin=function(){var e=(0,p.default)(l.default.mark(function e(){var t,r,n,a,o,i,u,d,f,p,_,w,v,h,L,C,T,N,S,O,R,y,x,b,A,k,P,M,U,G,D,F,B,W,H,V,K,Y,q,j,$,X,z,J,Q,Z,ee,te,re,ne,ae=arguments.length>0&&void 0!==arguments[0]&&arguments[0],oe=arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(oe)){e.next=4;break}return e.next=3,(0,E.getLoginModel)();case 3:oe=e.sent;case 4:return t=oe,r=t.sipImpi,n=t.sipAccount,a=t.sipLoginOnly,o=t.serverAddress,i=t.serverPort,u=t.deployMode,d=t.tempsipserverAddress,f=t.tempsipserverPort,oe.isInSipLogin=!0,e.next=8,coreSecurity.getPasswordManager();case 8:return p=e.sent,_=p.getPassword("sipPassword"),a&&(o=d,i=f),(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)&&(window.isSupportiDo=!0),e.next=14,new coreTup.getCallInstance;case 14:return w=e.sent,e.next=17,g();case 17:if(window.CLIENTCONFIG.ISMOBILE&&(window.sendToTupConfig(),m.info("[bfcp] sendToTupConfig success")),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=37;break}m.info("[IT-Meeting] tup service multiuser model open"),e.next=24;break;case 24:return e.next=26,w.initForMultiuser();case 26:return e.next=28,w.setEnableMutiUsed(1);case 28:return v={account:{account_enable_sip:1}},e.next=31,w.config(v);case 31:return e.next=33,w.setAccountIdEnable(0);case 33:return e.next=35,w.registerProcessNotifyForAccount(0);case 35:return e.next=37,w.setTupCallLogParams(3,5e3,1,window.LOG_PATH);case 37:return e.next=39,(0,I.configHMELog)();case 39:h=e.sent,m.info("sip server login configHmeInfo=",h),w.setHMELog(h),e.next=45;break;case 45:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=119;break}return e.next=48,(0,I.configSip)(ae);case 48:return L=e.sent,e.next=51,w.config(L);case 51:return e.next=54,coreSetting.initMediaDevice();case 54:return C=(0,I.configCall)(),e.next=57,w.config(C);case 57:return T=(0,I.configRejectCallType)(),e.next=60,w.config(T);case 60:return N=(0,I.serPointPickupCfg)(),m.info("pointPickup + "+(0,c.default)(N)),e.next=64,w.config(N);case 64:return S=(0,I.serGroupPickupCfg)(),m.info("groupPickup + "+(0,c.default)(S)),e.next=68,w.config(S);case 68:return e.next=70,(0,I.configMKI)();case 70:return O=e.sent,e.next=73,w.config(O);case 73:return e.next=75,(0,I.configRTP)();case 75:return R=e.sent,e.next=78,w.config(R);case 78:return e.next=80,(0,I.configVideo)();case 80:return y=e.sent,e.next=83,w.config(y);case 83:return e.next=85,(0,I.configBFCP)();case 85:return x=e.sent,e.next=88,w.config(x);case 88:return"android"===window.CLIENTCONFIG.PLATFORM&&(b=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.isHardDecodeToNative(b)),m.info("debug info config bfcp sip config"),A=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),k=!1,A!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&A!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(k=!0),e.next=95,(0,I.configBFCPForTLS)({bForceTLSMode:k});case 95:return P=e.sent,e.next=98,w.configBFCPTLSParam(P);case 98:return e.next=100,(0,I.configSessionTimer)();case 100:return M=e.sent,e.next=103,w.config(M);case 103:return e.next=105,(0,I.configBandwidthLimit)();case 105:return U=e.sent,e.next=108,w.config(U);case 108:if(m.info("First issue CHR config to call"),ae){e.next=114;break}return e.next=112,coreSetting.issuedChrConfigToCall();case 112:return e.next=114,coreSetting.issuedTerminalConfig();case 114:m.info("sip server login sipAccount=",handlePhoneNumber(n)),-1!==n.indexOf("sip:")&&(n=n.substring(4)),window.CLIENTCONFIG.ISMOBILE&&(m.info("set capRotateCtrlMode"),w.setCapRotateCtrlMode(1)),e.next=182;break;case 119:return G=[],e.next=122,(0,I.configSip)(ae);case 122:return D=e.sent,G.push(w.config(D)),e.next=127,coreSetting.initMediaDevice();case 127:return F=(0,I.configVideo)(),B=(0,I.configBFCP)(),W=(0,I.configCall)(),G.push(w.config(W)),H=(0,I.configRejectCallType)(),G.push(w.config(H)),V=(0,I.serPointPickupCfg)(),m.info("pointPickup + "+(0,c.default)(V)),G.push(w.config(V)),K=(0,I.serGroupPickupCfg)(),m.info("groupPickup + "+(0,c.default)(K)),G.push(w.config(K)),e.next=141,(0,I.configMKI)();case 141:return Y=e.sent,G.push(w.config(Y)),e.next=145,(0,I.configRTP)();case 145:return q=e.sent,G.push(w.config(q)),e.next=149,F;case 149:return j=e.sent,G.push(w.config(j)),e.next=153,B;case 153:return $=e.sent,G.push(w.config($)),"android"===window.CLIENTCONFIG.PLATFORM&&(X=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.isHardDecodeToNative(X)),m.info("debug info config bfcp sip config"),z=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),J=!1,z!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&z!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(J=!0),e.next=162,(0,I.configBFCPForTLS)({bForceTLSMode:J});case 162:return Q=e.sent,e.next=165,w.configBFCPTLSParam(Q);case 165:return e.next=167,(0,I.configSessionTimer)();case 167:return Z=e.sent,G.push(w.config(Z)),e.next=171,(0,I.configBandwidthLimit)();case 171:if(ee=e.sent,G.push(w.config(ee)),m.info("First issue CHR config to call"),ae){e.next=177;break}return e.next=177,s.default.all([coreSetting.issuedChrConfigToCall(),coreSetting.issuedTerminalConfig()]);case 177:return m.info("sip server login sipAccount=",handlePhoneNumber(n)),-1!==n.indexOf("sip:")&&(n=n.substring(4)),window.CLIENTCONFIG.ISMOBILE&&(m.info("set capRotateCtrlMode"),w.setCapRotateCtrlMode(1)),e.next=182,s.default.all(G);case 182:if(window.confCtrlLoaded||!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=185;break}return e.next=185,coreConf.confctrlInit();case 185:return e.next=187,_;case 187:if(te=e.sent,m.info("sip server login"),re=void 0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=199;break}return ne={sip_account_id:0,account:{account_auth_sip:{account:n,user_name:r,passwd:te}}},e.next=194,w.config(ne);case 194:return e.next=196,w.registerForAccount(0);case 196:re=e.sent,e.next=202;break;case 199:return e.next=201,w.register(r,n,te);case 201:re=e.sent;case 202:if(m.info("hwTupCall.register sip",re),0!==re.result){e.next=209;break}return m.info("sip register execute success."),$dispatch(coreUi.changeDoSipReg(!0)),e.abrupt("return",{result:!0});case 209:return window.CLIENTCONFIG.ISBIGWIN?(coreConf.NotifyLoginFailedEx(1),m.info("big win login failed")):window.isHubEnv&&(coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_OTHER),m.info("maxhub sipserverLogin login failed")),m.error("sip register execute fail."),e.abrupt("return",{result:!1});case 212:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,p.default)(l.default.mark(function e(t){var r,n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("[sip register]"),e.next=3,(0,E.getLoginModel)();case 3:r=e.sent,window.dispatchEvent((0,o.default)(new Event("sipRegResultEvent"),{registerState:t.param.register_state,reasonCode:t.param.reason_code})),m.info("[sip register] is_deregister: "+t.param.is_deregister+"->0:login,1:logout; reason_code:"+t.param.reason_code),r.sipRegisterState=t.param.register_state,constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED===t.param.register_state&&0===t.param.reason_code?(m.info("[sip register] ok"),m.info("<account_login><7_sip>end ok"),r.setLoginStatus(!1,!0),coreConf.initTupPairClient(),r.isInSipLogin=!1,N.resolve(),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,resultParams:[1,r.isResume?1:0],isTrackTimeCosts:!0})):constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING===t.param.register_state?(m.info("[sip register] registering"),r.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING):(r.setLoginStatus(!1,!0),constant.SIP_REGISTER_STATE.SIP_REGISTER_BUTT!==t.param.register_state&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&0!==t.param.reason_code&&coreConf.sipRegisterFailed(t.param.reason_code),$getState().login.sipLoginOnly&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(n=r.loginHistoryList,a=r.loginRecordList,coreAccount.showLoginInfo({loginInfo:a[0],loginHistoryList:n,loginRecordList:a})):(r.displayAccount="",r.password="")),m.error("[sip register] sip register not oksip offline"),r.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER,0===t.param.is_deregister&&(m.info("<account_login><7_sip>end failed"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,resultParams:[0,t.param.reason_code,r.isResume?1:0],isTrackTimeCosts:!1}),L?(r.isInSipLogin=!1,N.resolve()):(r.isInSipLogin=!1,N.reject({errorType:constant.LOGIN_ERROR_TYPE.sip,errorCode:"register_fail"})))),coreCommon.dispatchModuleEvent("sipRegResultEvent",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),N=PromiseObject();t.sipLoginAtomic=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,E.getLoginModel)().then(function(t){if(m.debug("[sipLoginAtomic]  status:"+t.sipRegisterState+" status: "+N.status),t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED)m.debug("[sipLoginAtomic]  already registered ");else if(t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER)try{return N=PromiseObject(),m.debug("[sipLoginAtomic] do sip login "),v(e),m.debug("[sipLoginAtomic] finish sip login "),N}catch(e){m.error("[sipLoginAtomic] exception: "+e.toString())}else m.debug("[sipLoginAtomic]  already registering ");return N})},t.sipLoginAtomicReset=function(){N=PromiseObject()}},289:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorTips=t.handleLoginError=t.handleCommonLoginFailed=t.handleUportalLoginFailed=void 0;var a=r(69),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),d=r(195),l=r(221),f=r(290),p=coreLogger.getLogger("login")("uportal"),_=(coreLogger.getLogger("login")("sip"),coreLogger.getLogger("login")("eab"),coreLogger.getLogger("login")("common")),g=t.handleUportalLoginFailed=function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a,o,i,u,c,g=t.errorCode;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getLoginModel)();case 2:r=e.sent,n=r.isResume,_.info("handleUportalLoginFailed isResume "+n),a=function(e){return p.error((n?"Resume UportalLoginError":"UportalLoginError")+": ["+e+"]")},o=!1,i=!1,u=void 0,e.t0=g,e.next="LOGIN_ADDRESS_OR_PORT_EMPTY"===e.t0?11:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY"===e.t0?15:"LOGIN_ACCOUNT_HAS_SPACE"===e.t0?19:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT?23:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED?26:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR?29:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR?32:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SEARCH_SERVER_FAIL?35:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED?38:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR?43:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED?48:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR?52:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR?55:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR?58:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR?61:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_HAS_PROXY_NO_STG?64:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE?67:71;break;case 11:return u=language.LOGIN_ADDRESS_OR_PORT_EMPTY,a("LOGIN_ADDRESS_OR_PORT_EMPTY"),o=!0,e.abrupt("break",74);case 15:return u=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,a("LOGIN_ACCOUNT_OR_PASSWORD_EMPTY"),o=!0,e.abrupt("break",74);case 19:return u=language.LOGIN_ACCOUNT_HAS_SPACE,a("LOGIN_ACCOUNT_HAS_SPACE"),o=!0,e.abrupt("break",74);case 23:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 26:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_REQUEST_FAILED"),e.abrupt("break",74);case 29:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_DNS_ERROR"),e.abrupt("break",74);case 32:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_SERVICE_ERROR"),e.abrupt("break",74);case 35:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_SEARCH_SERVER_FAIL"),e.abrupt("break",74);case 38:return o=!0,i=!0,u=language.LOGIN_USERPWD_ERROR,a("LOGIN_ERR_AUTH_FAILED"),e.abrupt("break",74);case 43:return o=!0,i=!0,u=language.LOGIN_USERPWD_ERROR,a("LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR"),e.abrupt("break",74);case 48:return o=!0,u=language.LOGIN_ERR_ACCOUNT_LOCKED,a("LOGIN_ERR_ACCOUNT_LOCKED"),e.abrupt("break",74);case 52:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_STG_TUNNEL_BUILD_ERROR"),e.abrupt("break",74);case 55:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 58:return u=language.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR,a("LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR"),e.abrupt("break",74);case 61:return u=language.CALL_CALLING_FAILED,a("LOGIN_E_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 64:return u=language.LOGIN_E_ERR_AUTH_ERROR,a("LOGIN_ERR_HAS_PROXY_NO_STG"),e.abrupt("break",74);case 67:return o=!0,i=!0,u=language.RENEW_EXPIRED_REMINDER,a("LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE"),e.abrupt("break",74);case 71:return u=language.CALL_CALLING_FAILED,a("Unhandle errorCode:["+g+"]"),e.abrupt("break",74);case 74:if(_.info("logLoginError msg :",u),window.CLIENTCONFIG.ISMOBILE&&window.stroage.isFastLogin()&&!n&&(window.stroage.setFastLogin(!1),navigator.splashscreen&&navigator.splashscreen.hide(),window.goRoute("loginCtn")),o&&i&&(0,f.checkAndEndCall)().then(function(){_.info("up login check and end call ",i)}),!n||o){e.next=81;break}r.setLoginStatus(!1,!1),e.next=108;break;case 81:if(!n||i){e.next=87;break}return e.next=84,(0,l.stopResume)("handleUportalLoginFailed1");case 84:r.setLoginStatus(!1,!1),e.next=108;break;case 87:if(window.CLIENTCONFIG.ISBIGWIN){e.next=107;break}if(!window.isHubEnv){e.next=94;break}r.setLoginStatus(!1,!1),r.maxhubLoginError={serverType:0,errorCode:g},window.getRoute()&&"maxhubLogin"!==window.getRoute()&&delegate.logout(),e.next=105;break;case 94:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=99;break}c=u||"unknow error",window.itWeLinkNotifyCallEnded(0,c),e.next=105;break;case 99:if(r.setLoginStatus(!1,!1),_.info("handleUportalLoginFailed",u||"unknow error"),!n||!i){e.next=104;break}return e.next=104,(0,l.stopResume)("handleUportalLoginFailed2");case 104:alert(u||"unknow error").then(function(){_.info("resetDisableLogin"),window.getRoute()&&"login"!==window.getRoute()&&"login/joinConfSIPOnly"!==window.getRoute()&&"login/noLoginJoinConference"!==window.getRoute()&&!1===window.CLIENTCONFIG.ISMOBILE&&delegate.logout(),window.CLIENTCONFIG.ISMOBILE&&i&&window.getRoute()&&"loginCtn"!==window.getRoute()&&delegate.logout()});case 105:e.next=108;break;case 107:r.setLoginStatus(!1,!1);case 108:return e.abrupt("return",u);case 109:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),w=t.handleCommonLoginFailed=function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a,o=t.errorCode;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getLoginModel)();case 2:r=e.sent,n=r.isResume,a=function(e){return _.error((n?"Resume Login Error":"Login Error")+": "+e)},e.t0=o,e.next="duplicateLogin"===e.t0?8:"fistLoginReject"===e.t0?10:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?12:17;break;case 8:return a("[ DuplicateLogin ] login oper failed, there is a login oper now..."),e.abrupt("break",18);case 10:return a("[ FistLoginReject ] fist login rejected, after changepassword will relogin..."),e.abrupt("break",18);case 12:return a("[ IWB2MaxHub ] this is maxhub tegrate enviroument, the account is not iwb account"),r.setLoginStatus(!1,!1),r.maxhubLoginError={serverType:0,errorCode:o},window.getRoute()&&"maxhubLogin"!==window.getRoute()&&delegate.logout(),e.abrupt("break",18);case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.handleLoginError=function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.info("[ handleLoginError ]"+(0,o.default)(t)),_.info("<account_login><10_error>"+(0,o.default)(t)),e.next=4,(0,d.getLoginModel)();case 4:r=e.sent,$getState().login.sipLoginOnly&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(n=r.loginHistoryList,a=r.loginRecordList,coreAccount.showLoginInfo({loginInfo:a[0],loginHistoryList:n,loginRecordList:a})):(r.displayAccount="",r.password="")),r.clearInLoginState(),t&&t.errorType?(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r.isResume?_.info("[IT-Meeting] login failed, resume login."):(_.info("[IT-Meeting] login failed, go back."),window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))),t.errorType===constant.LOGIN_ERROR_TYPE.common?(window.CLIENTCONFIG.ISBIGWIN?coreConf.NotifyLoginFailedEx(1):window.isHubEnv&&("LOGIN_ERR_IWB_MAXHUB_ACCOUNT"===t.errorCode?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_ACC_OR_PAS):coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_NETWORK),_.info("maxhub handleLoginError LOGIN_ERROR_TYPE.common errcode: "+t.errorCode)),w(t)):t.errorType===constant.LOGIN_ERROR_TYPE.uportal?(g(t),r.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.INIT,window.CLIENTCONFIG.ISBIGWIN?(window.shouldStopRertyLogin=!1,window.bigwinReTryLogin()):window.isHubEnv&&(t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_BAD_ACCESS_DURING_UPGRADE||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_INVALID_URL?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_NETWORK):t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_USER_NOT_EXISTS||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_USER_NOT_EXISTS||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_ACC_OR_PAS):coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_OTHER),_.info("maxhub handleLoginError LOGIN_ERROR_TYPE.uportal errcode: "+t.errorCode))):(t.errorType,constant.LOGIN_ERROR_TYPE.eabserver),coreCommon.dispatchModuleEvent("login",{event:t.errorType,code:t.errorCode})):(_.error("no exact error handle",t),r.setLoginStatus(!1,!1));case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getErrorTips=function(){var e=(0,c.default)(s.default.mark(function e(t,r){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.info("get error tips, server=",t+", errorCode=",r),n="",0!==t){e.next=44;break}e.t0=r,e.next=e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY?6:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY?8:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT?10:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED?12:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR?14:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR?16:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SEARCH_SERVER_FAIL?18:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED?20:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR?22:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED?24:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR?26:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR?28:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR?30:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR?32:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_HAS_PROXY_NO_STG?34:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE?36:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?38:40;break;case 6:return n=language.LOGIN_ADDRESS_OR_PORT_EMPTY,e.abrupt("break",42);case 8:return n=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",42);case 10:case 12:case 14:case 16:case 18:return n=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 20:case 22:return n=language.LOGIN_USERPWD_ERROR,e.abrupt("break",42);case 24:return n=language.LOGIN_ERR_ACCOUNT_LOCKED,e.abrupt("break",42);case 26:case 28:return n=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 30:return n=language.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR,e.abrupt("break",42);case 32:return n=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 34:return n=language.LOGIN_E_ERR_AUTH_ERROR,e.abrupt("break",42);case 36:return n=language.RENEW_EXPIRED_REMINDER,e.abrupt("break",42);case 38:return n=language.MAXHUB_INVALID_ACCOUTN,e.abrupt("break",42);case 40:return n=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 42:e.next=74;break;case 44:if(1!==t){e.next=74;break}e.t1=r,e.next=e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY?48:e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY?50:e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_LOCALIP_GET_FAILED?52:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_TIMEOUT?54:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_PASSWORD_ERROR?56:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_FAILED?58:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_NOT_EXIST?60:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_NEED_NEW_VERSION?62:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_NOT_ACTIVE?64:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_SUSPEND?66:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_LOCKED?68:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_EXPIRE?70:72;break;case 48:return n=language.LOGIN_ADDRESS_OR_PORT_EMPTY,e.abrupt("break",74);case 50:return n=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",74);case 52:case 54:return n=language.CALL_CALLING_FAILED,e.abrupt("break",74);case 56:case 58:case 60:return n=language.LOGIN_USERPWD_ERROR,e.abrupt("break",74);case 62:return n=language.LOGIN_NEED_NEW_VERSION,e.abrupt("break",74);case 64:case 66:case 68:case 70:return n=language.LOGIN_ACCOUNT_ERROR,e.abrupt("break",74);case 72:return n=language.CALL_CALLING_FAILED,e.abrupt("break",74);case 74:return e.abrupt("return",n);case 75:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()},290:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.endCurrentCall=t.checkAndEndCall=t.checkBeforeSetOffline=t.checkBeforeLogout=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(136),c=coreLogger.getLogger("logic")("login/checkBeforeLogout"),d=(t.checkBeforeLogout=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.debug("checkBeforeLogout"),e.next=4,d(t);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",r);case 7:if(window.CLIENTCONFIG.ISMOBILE){e.next=20;break}return e.next=10,p(t);case 10:if(r=e.sent,c.info("checkResult checkFileTransFer"+r),r&&!1!==r.ret){e.next=14;break}return e.abrupt("return",!1);case 14:return e.next=16,f(t,n);case 16:if(r=e.sent,c.info("checkResult checkEditor :"+r),r){e.next=20;break}return e.abrupt("return",r);case 20:return e.abrupt("return",r);case 23:return e.prev=23,e.t0=e.catch(0),c.error("checkBeforeLogout",{type:t,e:e.t0.toJSON()}),e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,void 0,[[0,23]])}));return function(t){return e.apply(this,arguments)}}(),t.checkBeforeSetOffline=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.debug("checkBeforeSetOffline"),e.next=4,d(t,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",r);case 7:if(window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return e.next=10,p(t,n);case 10:if(r=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),c.error("checkBeforeSetOffline",{type:t,e:e.t0.toJSON()}),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,void 0,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getLoginModel)();case 2:if(t=e.sent,c.info(" checklogin : isInUportalLogin:"+t.isInUportalLogin+", isInInitPrivateDB:"+t.isInInitPrivateDB+", isInDetectFireWall:"+t.isInDetectFireWall+", isInLoadConfigFromDB:"+t.isInLoadConfigFromDB+", isInEserverLogin:"+t.isInEserverLogin+", isInSipLogin:"+t.isInSipLogin),!(t.isInUportalLogin||t.isInInitPrivateDB||t.isInDetectFireWall||t.isInLoadConfigFromDB||t.isInEserverLogin||t.isInSipLogin)){e.next=8;break}return r=language.COMMON_CHECK_LOGOUT_LOGINEXIST,alert(r),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c.info("checkCall"),!(coreCall.getCallCount()>0)){e.next=33;break}if(!(window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||window.isPluginEnv)){e.next=9;break}return e.next=6,l();case 6:window.endCallPromise=null,e.next=33;break;case 9:if(r="",n="LANG_NATIVE_CONFIRM_TITLE",t===constant.LOGOUT_TYPE.LOGOUT?r=language.COMMON_CHECK_LOGOUT_CALLEXIST:t===constant.LOGOUT_TYPE.EXIT?r=language.COMMON_CHECK_QUIT_CALLEXIST:t===constant.LOGOUT_TYPE.SETOFFLINE&&(r=language.COMMON_CHECK_QUIT_OFFLINE),!r){e.next=33;break}if(a=!1,!i){e.next=26;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=21;break}return e.next=18,window.confirm(r);case 18:a=e.sent,e.next=24;break;case 21:return e.next=23,window.confirm(r,n,!0);case 23:a=e.sent;case 24:e.next=27;break;case 26:a={ret:!0};case 27:if(!a.ret){e.next=32;break}return window.CLIENTCONFIG.ISMOBILE||appService.resetTrayMenu(),e.next=31,l();case 31:window.endCallPromise=null;case 32:return e.abrupt("return",a.ret);case 33:return"CALL_INCOMING"===$getState().call.callStatus&&coreUi.stopRing(),e.abrupt("return",!0);case 37:return e.prev=37,e.t0=e.catch(0),c.error("checkCall",{e:e.t0.toJSON()}),e.abrupt("return",!1);case 41:case"end":return e.stop()}},e,void 0,[[0,37]])}));return function(t){return e.apply(this,arguments)}}()),l=(t.checkAndEndCall=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c.info("checkAndEndCall"),!(coreCall.getCallCount()>0)){e.next=4;break}return e.abrupt("return",l());case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),c.error("checkAndEndCall",{e:e.t0.toJSON()}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,void 0,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),t.endCurrentCall=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.endCallPromise=new PromiseObject,setTimeout(function(){null!==window.endCallPromise&&window.endCallPromise.resolve()},5e3),t=$getState(),r=t.conf,n=r.confHandle,a=r.selfRole,i=t.call.callId,coreConf.isInConf()){e.next=9;break}return c.info("ConfrimNotify end call, callId=",i),e.next=7,coreCall.callHangup(i);case 7:e.next=12;break;case 9:return c.info("ConfrimNotify leave conf, confHandle=",n),e.next=12,coreConf.actionLeaveConf();case 12:return coreUi.selectBoxCancelDataNWin(),window.CLIENTCONFIG.ISMOBILE&&"mConfMemberPage"===(s=window.getRoute())&&window.goRoute("main/conference"),e.abrupt("return",window.endCallPromise);case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),f=function(e,t){try{var r=language.PRE_EXIT_CHECK_EDITOR,n=!0;return e===constant.LOGOUT_TYPE.LOGOUT&&(n=!0,r=language.PRE_LOGOUT_CHECK_EDITOR),t?coreIm.checkEditorBeforeLogout({showInfo:r,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:n}):coreIm.checkEditor({showInfo:r,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:n})}catch(e){return c.error("checkEditor check",{e:e.toJSON()}),!0}},p=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var r=language.PRE_EXIT_CHECK_FILE_TRANSFER;e===constant.LOGOUT_TYPE.LOGOUT&&(r=language.PRE_LOGOUT_CHECK_FILE_TRANSFER);return coreIm.checkFileTransFer({showInfo:r,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:!0,isShowAlert:t})}catch(e){return c.error("checkFileTransFer  check",{e:e.toJSON()}),!0}}},291:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.actionGetCorpResourceAtomic=t.getVerifyCodeAndSetUi=t.sendCaptchaResultAndSetUi=t.getCaptchaAndSetUi=t.getVerifyCode=t.sendCaptchaResult=t.getCaptcha=t.clearLocalDNSIp=t.setLocalDNSIp=t.getLocalDNSIp=t.frogetPassword=t.verifyVerificationCode=t.requestVerificationCode=t.queryUserAccount=t.recordPrivacy=t.actionGetUploadInfo=t.actionRefreshToken=t.changeLoginPassword=t.queryMediaXaddrFromServer=t.resumeUportalService=t.resetLoginInfo=void 0;var a=r(69),o=n(a),i=r(3),s=n(i),u=r(1),c=n(u),d=r(2),l=n(d),f=function(){var e=(0,l.default)(c.default.mark(function e(t,r,n){var a,o,i,s,u,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=encodeURIComponent(r),n=encodeURIComponent(n),a=n,e.next=5,(0,g.getLoginModel)();case 5:return o=e.sent,i=o.middleEndAddress,s=o.crypt_token,u="https://"+i+"/mcloud/mag/ProxyForText/wemiddle/api/v1/sso/personal_password_modify",I.info("change it pd url = :",u),e.next=12,coreHttp.sendSyncRequest({url:u,type:constant.REQUEST_TYPE.POST,header:{"Content-Type":"application/x-www-form-urlencoded",lang:"en",Cookie:"token="+s},body:"account="+t+"&oldPasswd="+r+"&newPasswd="+n+"&confirmPasswd="+a});case 12:return d=e.sent,e.abrupt("return",d);case 14:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),p=r(118),_=n(p),g=r(136),w=r(164),v=r(228),E=r(126),h=coreCommonComponent.Icon,I=coreLogger.getLogger("login")("uportal");window.refreshUportalToken=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nil;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},t.param={},t.param.result=0,t.param.refresh_token_result={},!window.webView||r){e.next=8;break}t.param.refresh_token_result.auth_token=window.webView.getImToken(),e.next=13;break;case 8:if(!(r&&r.indexOf("@")>0)){e.next=12;break}return e.next=11,coreSecurity.encode64(r);case 11:r=e.sent;case 12:t.param.refresh_token_result.auth_token=r;case 13:t.param.refresh_token_result.stg_account="",t.param.refresh_token_result.stg_pwd="",(0,v.getUportalApi)().refreshTokenCallback(t);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.resetLoginInfo=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={authToken:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerBackup2:"",sipServerPortBackup2:0,sipServerBackup3:"",sipServerPortBackup3:0,eabUri:"",groupServer:"",eServerAddressAll:"",eServerAddress:"",eServerPort:0,sipUri:"",svnUri:"",httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,smcUri:"",maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:""},e.next=3,coreSecurity.getPasswordManager();case 3:return r=e.sent,e.next=6,r.setPassword("stgPassword","");case 6:return e.next=8,r.setPassword("sipPassword","");case 8:return e.next=10,(0,g.getLoginModel)();case 10:n=e.sent,n.set(t);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resumeUportalService=function(){var e=(0,l.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:t=e.sent,t.setNotifyFunc(360459,(0,v.getUportalApi)().refreshTokenCallback);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.queryMediaXaddrFromServer=function(e,t){return new s.default(function(){var r=(0,l.default)(c.default.mark(function r(n,a){var o,i,s,u,d;return c.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.setNotifyFunc(360486,C),r.next=4,(0,g.getLoginModel)();case 4:o=r.sent,i=o.serverAddress,s=o.serverPort,u=function(e){if(e&&e.param&&0===e.param.result){if(isNullOrEmpty(e.param.mediax_result))return void n({result:1});var r=void 0,a=e.param.mediax_result.server_uri,o=e.param.mediax_result.cms_uri;if(a&&o)r=t?o:a,I.info("cmsAddr:",o,"mediaxAddr:",a,"is_cms_addr:",t);else if(a)r=a,t=0,I.info("mediaxAddr:",a);else{if(!o)return I.error("queryMediaXaddrFromServer mediaX address is empty!"),void n({result:1});r=o,t=1,I.info("cmsAddr:",o)}var s=r.split(":");I.info("queryMediaXaddrFromServer mediaX address success"),(0,g.getLoginModel)().then(function(e){e.tempMediaxAddress=s[0],e.tempMediaxPort=s[1]}),n({result:0,mediaxAddr:s[0],mediaxPort:parseInt(s[1]),isCmsAddr:t})}else e&&e.param&&e.param.result===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT&&T(i),I.error("queryMediaXaddrFromServer notify failed,errorcode:",e.param.result),n({result:1})},d=window.setTimeout(function(){I.error("queryMediaXaddrFromServer 6s time out"),n({result:1}),T(i)},6e3),L(i).then(function(t){isNullOrEmpty(t)||(i=t),e.getMediaxAccessAddr(i,parseInt(s),u).then(function(e){window.clearTimeout(d),e&&0!==e.result&&(I.error("queryMediaXaddrFromServer failed"),n({result:1}))})}),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(0),I.error("queryMediaXaddrFromServer",{e:r.t0.toJSON()}),n({result:1});case 16:case"end":return r.stop()}},r,void 0,[[0,12]])}));return function(e,t){return r.apply(this,arguments)}}())};window.getDnsResult=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r="",t&&(n=JSON.parse(t),n.loginOnCurrentDnsResult&&(r=n.loginOnCurrentDnsResult,C(r)));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var m=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,I.info("change [password] checkCall"),!$getState().call.showCallToolBar&&"VIDEO_OUT"!==$getState().call.callStatus&&"VIDEO_CONNECTED"!==$getState().call.callStatus){e.next=16;break}if(t="LANG_NATIVE_CONFIRM_TITLE",r=language.COMMON_CHECK_CHANGEPASSWORD_CALLEXIST,n=!1,!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=9,window.confirm(r);case 9:n=e.sent,e.next=15;break;case 12:return e.next=14,window.confirm(r,t,!0);case 14:n=e.sent;case 15:return e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(0),I.error("checkCall",{e:e.t0.toJSON()}),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,void 0,[[0,19]])}));return function(){return e.apply(this,arguments)}}();t.changeLoginPassword=function(){var e=(0,l.default)(c.default.mark(function e(t,r,n){var a,o,i,s,u,d,p,w,v,L,C,T;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:return a=e.sent,e.next=5,m();case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(window.navigator.onLine){e.next=11;break}return alert(language.LOGIN_RESUME_NETWORK_ERROR),e.abrupt("return");case 11:if(i=PromiseObject(),s=void 0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME){e.next=27;break}return u=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.param,I.info("change [pass]word result: "+r.result),s&&window.clearTimeout(s),r&&0===r.result?(coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),window.CLIENTCONFIG.ISMOBILE?window.alert(language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),i.resolve(!0)}):window.alert(language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),coreUi.showModal(_.default.createElement("div",{className:"loading-icon-bg"},_.default.createElement(h,{type:E.iconTypeMap.Loading,size:E.iconSizeMap.CLS_40,color:E.iconColorMap.COL_FFFFFF})),!1),i.resolve(!0)})):(n=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[n],2),i.resolve(!1));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setNotifyFunc(360449,u),e.next=18,(0,g.getLoginModel)();case 18:return d=e.sent,p=d.serverUportalAddress,w=d.serverUportalPort,e.next=23,a.changeLoginUportalPassword(t,r,n,p,w);case 23:v=e.sent,0!==v.result?(I.error("change lg in pd result:"+v.result),window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),i.resolve(!1)):s=window.setTimeout(function(){I.error("request  10s timeout"),i.resolve(!1)},1e4),e.next=31;break;case 27:return e.next=29,f(t,r,n);case 29:L=e.sent;try{L&&L.param&&L.param.recv_body?(C=JSON.parse(L.param.recv_body),I.info("change it pd result "+C.result+" errcode "+C.errorCode),"success"===C.result?(coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),window.alert(""+language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),i.resolve(!0)})):(T=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[C.errorCode]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[T],2),i.resolve(!1))):(I.error("change it pd callback is error"),window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),i.resolve(!1))}catch(e){window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),I.error("change it pd error. ",L)}case 31:return e.abrupt("return",i);case 32:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}();window.doingRefreshUportalToken=!1;var L=(t.actionRefreshToken=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("[ actionRefreshToken ]"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=5;break}window.refreshImToken(),e.next=20;break;case 5:return e.next=7,(0,g.getLoginModel)();case 7:if(t=e.sent,r=t.curPortalState,I.info("[ actionRefreshToken ] curPortalState = ",r),window.doingRefreshUportalToken||r===constant.CUR_PORTAL_LOGIN_STATE.LOGINING){e.next=19;break}return window.doingRefreshUportalToken=!0,e.next=14,coreTup.getUportalInstance();case 14:n=e.sent,n.refreshToken(),setTimeout(function(){window.doingRefreshUportalToken=!1},2e4),e.next=20;break;case 19:I.info("refreshing uportal token. return don't send");case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.actionGetUploadInfo=function(){var e=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("actionGetUploadInfo"),e.next=3,coreTup.getUportalInstance();case 3:return n=e.sent,a=PromiseObject(),o=function(){var e=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.param,0!==r.result?(I.error("get upload info fail, result:"+r.result),a.resolve(r)):a.resolve(r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),n.setNotifyFunc(360491,o),i={req_info:{file_name:t,file_type:r}},e.next=10,n.getUploadInfo(i);case 10:return s=e.sent,0!==s.result&&(I.error("actionGetUploadInfo fail, result:"+s.result),a.resolve("request failed")),setTimeout(function(){a.resolve("request timeout")},1e4),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),t.recordPrivacy=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,d,l,f,p=t.oprEvent,_=t.privacyver,w=t.chrtype;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("[ recordPrivacy ]"),e.next=3,(0,g.getLoginModel)();case 3:return r=e.sent,n=r.account,a=r.serverUportalAddress,o=r.serverUportalPort,e.next=7,coreTup.getUportalInstance();case 7:return i=e.sent,s=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,u=(new Date).format("yyyy-MM-dd hh:mm"),d={record_user:n,record_version:s,record_time:u,record_oprevent:p,server_url:a,port_num:parseInt(o),record_other:{}},_&&(d.record_other.privacyver=_),void 0!==w&&(d.record_other.chrtype=w),e.next=15,i.recordPrivacy(d);case 15:l=e.sent,0!==l.result&&I.error("record fail, result:"+l.result+"oprEvent:"+p),f=function(e){if(e&&0===e.param.result)return I.info("record success, oprEvent:"+p);I.error("record fail, result:"+e.param.result+"oprEvent:"+p)},i.setNotifyFunc(360481,f);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryUserAccount=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,n=r.serverPort,a=r.serverUportalAddress,e.next=7,coreTup.getUportalInstance();case 7:return o=e.sent,I.info("tup init"),e.next=11,(0,v.getUportalApi)().setLoginProxy(o);case 11:return i=PromiseObject(),r.forgetPwdAccount!==t&&(r.forgetPwdAccount=t,r.isFrogetRedriect=!1),s=function(){var e=(0,l.default)(c.default.mark(function e(s){var u,d,l,f,p,_,g,v;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=s.param,38!==u.result||""===u.query_result.redirect_url){e.next=20;break}if(r.isFrogetRedriect=!0,d=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(l=d.exec(u.query_result.redirect_url))){e.next=11;break}f=l[1],p=l[2],_=l[3],a=f||p,n=_&&_||0,e.next=12;break;case 11:return e.abrupt("return",(0,w.LoginError)({result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:isResume}));case 12:return r.FrogetPwdUrl=a,r.FrogetPwdUrlPort=n,g={query_user_info:{server_url:a,server_port:parseInt(n),user_account:t}},e.next=17,o.queryUserAccount(g);case 17:v=e.sent,e.next=21;break;case 20:0!==u.result?(I.error("query user account fail, result:"+u.result),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[u.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[u.result]],2):window.ToastNew(language.REQUEST_ERROR,2),i.resolve(u)):i.resolve(u);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setNotifyFunc(360482,s),u={query_user_info:{server_url:a,server_port:parseInt(n),user_account:t}},e.next=18,o.queryUserAccount(u);case 18:return d=e.sent,0!==d.result&&(I.error("query user account fail, result:"+d.result),window.ToastNew(language.REQUEST_ERROR,2),i.resolve("request failed")),setTimeout(function(){i.resolve("request timeout")},1e4),e.abrupt("return",i);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestVerificationCode=function(){var e=(0,l.default)(c.default.mark(function e(t,r,n){var a,o,i,u,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return a=e.sent,o=a.serverPort,i=a.serverUportalAddress,u=void 0,a.isFrogetRedriect&&(i=a.FrogetPwdUrl,o=a.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return d=e.sent,e.abrupt("return",new s.default(function(e,a){var s=function(){var t=(0,l.default)(c.default.mark(function t(r){var n;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=r.param,I.info("request verification code result: "+n.result),u&&window.clearTimeout(u),0!==n.result&&n.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_CHANGEPWD_INVALID_TOKEN&&n.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_RESEND_WITHIN_3MIN_NOT_ALLOWED?(void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(n)):e(n);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();d.setNotifyFunc(360483,s);var f=constant.USER_AGENT.MOBILE;window.CLIENTCONFIG.ISMOBILE||(f="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC);var p={req_info:{server_url:i,server_port:parseInt(o),user_account:t,user_agent:f,send_mode:r,lang_type:n}};d.requestVerificationCode(p).then(function(t){0!==t.result?(I.error("requestVerificationCode fail, result:"+t.result),window.ToastNew(language.REQUEST_ERROR,2),e("request failed")):u=window.setTimeout(function(){I.error("request verification 5s time out"),e("request timeout")},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),t.verifyVerificationCode=function(){var e=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return n=e.sent,a=n.serverPort,o=n.serverUportalAddress,i=void 0,n.isFrogetRedriect&&(o=n.FrogetPwdUrl,a=n.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return u=e.sent,e.abrupt("return",new s.default(function(e,n){var s=function(){var t=(0,l.default)(c.default.mark(function t(r){var n;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=r.param,I.info("verify verification code result: "+n.result),i&&window.clearTimeout(i),0!==n.result?(coreUi.hideModal(),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(n)):e(n);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();u.setNotifyFunc(360484,s);var d={verify_info:{server_url:o,server_port:parseInt(a),user_account:t,verification_code:r}};u.verifyVerificationCode(d).then(function(t){0!==t.result?(I.error("verify verification code fail, result:"+t.result),coreUi.hideModal(),window.ToastNew(language.REQUEST_ERROR,2),e("request failed")):i=window.setTimeout(function(){I.error("verify verification 10s time out"),e("request timeout")},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),t.frogetPassword=function(){var e=(0,l.default)(c.default.mark(function e(t,r,n,a,o){var i,u,d,f,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return i=e.sent,u=void 0,d=i.serverPort,f=i.serverUportalAddress,i.isFrogetRedriect&&(f=i.FrogetPwdUrl,d=i.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return p=e.sent,e.abrupt("return",new s.default(function(e,i){var s=function(){var t=(0,l.default)(c.default.mark(function t(r){var n;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=r.param,I.info("froget request listener result: "+n.result),u&&window.clearTimeout(u),0!==n.result?(coreUi.hideModal(),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(n)):e(n);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();p.setNotifyFunc(360485,s);var _={pwd_info:{server_url:f,server_port:parseInt(d),user_account:t,new_pwd:r,pwd_type:n,lang_type:a,token:o}};p.frogetPassword(_).then(function(t){0!==t.result?(I.error("froget request fail, result:"+t.result),coreUi.hideModal(),e("request failed")):u=window.setTimeout(function(){I.error("froget pass word 15s time out"),e("request timeout")},15e3)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),t.getLocalDNSIp=function(){var e=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return I.warn("getLocalDNSIp domain is null"),e.abrupt("return");case 3:return e.next=5,coreDb.queryLoginSetting({key:"DNS:"+t});case 5:if(!(r=e.sent)||!r.value){e.next=11;break}return I.info("getLocalDNSIp suc"),e.abrupt("return",r.value);case 11:return I.info("getLocalDNSIp fail"),e.abrupt("return","");case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),C=t.setLocalDNSIp=function(e){return e&&e.param&&0===e.param.result&&e.param.dns_result?isNullOrEmpty(e.param.dns_result.domain_addr)||isNullOrEmpty(e.param.dns_result.ip_addr)?void I.warn("setLocalDNSIp domain or ip is null"):(I.info("tup report setLocalDNSIp"),void coreDb.saveLoginSetting({key:"DNS:"+e.param.dns_result.domain_addr,value:e.param.dns_result.ip_addr})):void I.warn("dns result is null, res = "+(0,o.default)(e))},T=t.clearLocalDNSIp=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return I.warn("clearLocalDNSIp ip is null"),e.abrupt("return");case 3:return I.info("clearLocalDNSIp"),r=[],e.next=7,coreDb.queryAllLoginSetting();case 7:n=e.sent,n.forEach(function(e){e.value===t&&-1!==e.key.indexOf("DNS:")&&r.push(e.key)}),I.info("clearLocalDNSIp server addr length = "+r.length),r.length>0&&r.forEach(function(e){coreDb.saveLoginSetting({key:e,value:""})});case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,i,s,u,d,l,f,p=t.method,_=void 0===p?"post":p,w=t.path,v=void 0===w?"":w,E=t.body,h=void 0===E?{}:E;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,n=r.serverUportalAddress,a=r.serverUportalPort,i=r.isFrogetRedriect,s=r.FrogetPwdUrl,u=r.FrogetPwdUrlPort,d="https://"+n+":"+a+v,i&&(d="https://"+s+":"+u+v),l=constant.USER_AGENT.MOBILE,window.CLIENTCONFIG.ISMOBILE||(l="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC),f={url:d,type:"post"===_?constant.REQUEST_TYPE.POST:constant.REQUEST_TYPE.PUT,header:{"Content-Type":"application/json","User-Agent":l},body:(0,o.default)(h)},e.abrupt("return",f);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=t.getCaptcha=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("before getCaptcha"),r="/rest/usg/sso/v1/auth/slideverifycode/send",n=coreCommon.isMobile()?6:5,a=1,o={user:t,clientType:n,checkType:a},e.next=7,N({path:r,body:o});case 7:return i=e.sent,e.next=10,coreHttp.sendSyncRequest(i);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=t.sendCaptchaResult=function(){var e=(0,l.default)(c.default.mark(function e(t,r,n,a){var o,i,s,u,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("before sendCaptchaResult"),o="/rest/usg/sso/v1/auth/slideverifycode/check",i=coreCommon.isMobile()?6:5,s=1,u={user:t,clientType:i,token:r,pointX:n,slideTime:a,checkType:s},e.next=7,N({method:"put",path:o,body:u});case 7:return d=e.sent,e.next=10,coreHttp.sendSyncRequest(d);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),R=t.getVerifyCode=function(){var e=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("before getVerifyCode"),n="/rest/usg/ap/v1/verifycode/send",a="2052"===window.langcode?"zh-CN":"en-US",o={user:t,language:a,token:r},e.next=6,N({path:n,body:o});case 6:return i=e.sent,e.next=9,coreHttp.sendSyncRequest(i);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),y=(t.getCaptchaAndSetUi=function(){var e=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,d,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return window.ToastNew(language.PC_PHONE_NUMBER_OR_ACCOUNT_NUMBER_CAN_NOT_EMPTY,2),e.abrupt("return");case 3:return e.next=5,S(t);case 5:if((r=e.sent)&&0===r.result){e.next=9;break}return I.info("getCaptcha result, tup result : ",r&&r.result),e.abrupt("return");case 9:if(n=r.param,a=n.recv_body,o=n.resp_code,I.info("getCaptcha result, server resp_code : ",o),i=a&&JSON.parse(a),s=i.data,u=i.returnMessage,d=i.requestId,I.info("getCaptcha result, requestId: ",d,", returnMessage: ",u),200!==o){e.next=19;break}return s.sliderResult=!1,e.next=17,(0,g.getLoginModel)();case 17:l=e.sent,l.manMachineCode=s;case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.sendCaptchaResultAndSetUi=function(){var e=(0,l.default)(c.default.mark(function e(t,r,n,a,o,i,s){var u,d,l,f,p,_,w,v,E,h,m,L,C;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,r,n,a);case 2:if(u=e.sent,d=u.param,l=d.recv_body,f=d.resp_code,I.info("sendCaptcha result, tup result : ",u.result),I.info("sendCaptcha result, server resp_code : ",f),p=l&&JSON.parse(l),_=p.returnCode,w=p.returnMessage,v=p.requestId,E=p.data,I.info("sendCaptcha result, requestId: ",v,", returnMessage : ",w),200!==f){e.next=16;break}return h="000000000"===_,m="000000000"===_?E.token:"",L=!0,e.next=14,(0,g.getLoginModel)();case 14:C=e.sent,C.manMachineCode={verificationSuccess:h,sliderResult:L,shadowImage:o,cutImage:i,token:m,oldPointY:s};case 16:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a,o,i,s){return e.apply(this,arguments)}}(),t.getVerifyCodeAndSetUi=function(){var e=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i,s,u,d,l,f,p,_,w,v;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t,r);case 2:if(n=e.sent,a=n.param,o=a.recv_body,i=a.resp_code,I.info("getVerifyCode result, tup result : ",n.result),I.info("getVerifyCode result, server resp_code : ",i),s=o&&JSON.parse(o),u=s.returnCode,d=s.returnMessage,l=s.requestId,f=s.data,I.info("getVerifyCode result, requestId: ",l,", returnMessage : ",d),"000000000"!==u&&"206030004"!==u){e.next=19;break}return p=$getState().login.forgetPwdAccount,_=p.type===constant.FORGETPWDACCOUNTTYPE.ACCOUNT&&isNullOrEmpty(f.bindPhone),w={account:p.account,email:p.email,showaccount:_?f.bindEmail:p.showaccount,timeout:f.expire||f.sendLeftTime,type:_?constant.FORGETPWDACCOUNTTYPE.ACCOUNT_WITH_EMAL:p.type,useCaptcha:!0,bindPhone:f.bindPhone,bindEmail:f.bindEmail},e.next=14,(0,g.getLoginModel)();case 14:v=e.sent,v.forgetPwdAccount=w,window.CLIENTCONFIG.ISMOBILE?"SetNewPassword"!==window.getRoute()&&window.goRoute("/SetNewPassword"):"login/ResetPassword"!==window.getRoute()&&window.goRoute("/login/ResetPassword"),e.next=20;break;case 19:void 0!==constant.CLOUDUSG_ERROR_TIPS[u]?window.ToastNew(language[constant.CLOUDUSG_ERROR_TIPS[u]],2):window.ToastNew(language.REQUEST_ERROR,2);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("[ actionGetCorpResource ]"),t=void 0,e.next=4,coreTup.getUportalInstance();case 4:return r=e.sent,e.abrupt("return",new s.default(function(e,n){var a=function(){var r=(0,l.default)(c.default.mark(function r(n){var a,o;return c.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n||0!==n.param.result){r.next=10;break}return t&&window.clearTimeout(t),a=n.param,r.next=5,(0,g.getLoginModel)();case 5:o=r.sent,o.canRecordConf=a.corp_resource.conf_rec_right,e(coreCommon.ATOMIC_ACTION_RESULT.SUCCESS),r.next=12;break;case 10:I.error("actionGetCorpResource fail, result:"+n.param.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED);case 12:case"end":return r.stop()}},r,void 0)}));return function(e){return r.apply(this,arguments)}}();r.setNotifyFunc(360492,a),r.getCorpResource().then(function(r){0!==r.result?(I.error("actionGetCorpResource fail, result:"+r.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)):t=window.setTimeout(function(){I.error("actionGetCorpResource 10s time out"),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)},1e4)})}));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.actionGetCorpResourceAtomic=new coreCommon.AtomicAction("actionGetCorpResource",y)},292:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compareVersion=t.dealUpdateVersionClickEx=t.hideProgressBarModal=t.dealInstallFailed=t.startInstallNewVer=t.getInCallingState=t.clearBarPageSet=t.showUpdateHintsOrBar=t.clickConfirmUpdate=t.dealDownloadFailed=t.downloadProcessNotify=t.clearDownloadClick=t.checkUpgrade=t.reStartUpgrade=t.clearAllUpdataState=t.changeUpdataState=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(123),c=n(u),d=r(69),l=n(d),f=r(118),p=n(f),_=r(211),g=r(136),w=r(164),v=coreLogger.getLogger("login")("upgrade"),E={clickDownload:!1,clickTimer:null,downloadResume:!1},h=t.changeUpdataState=function(e){v.info("change updata state, obj=",(0,l.default)(e)),(0,c.default)(E,e),v.info("updataState=",(0,l.default)(E))},I=(t.clearAllUpdataState=function(){E.clickTimer&&clearTimeout(E.clickTimer),E={clickDownload:!1,clickTimer:null,downloadResume:!1},v.info("clear updata state, updataState=",(0,l.default)(E))},function(){var e=(0,s.default)(o.default.mark(function e(t,r){var n,a,i,u,c,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:return n=e.sent,a=PromiseObject(),i=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.param,360488===t.notify?N(r):360489===t.notify&&S(r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),n.setNotifyFunc(360488,i),n.setNotifyFunc(360489,i),u={download_info:{download_timeout:300,version_path:t,file_path:r,keep_download:d,local_file_size:l}},e.next=10,n.downloadUpgradeFile(u);case 10:return c=e.sent,0!==c.result&&(v.error("send downloadUpgradeFile fail, result:"+c.result),a.resolve("request failed")),setTimeout(function(){a.resolve("request timeout")},35e4),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),m=function(){return v.info("current platform is :win"),"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?"workplace-windows":"cloudlink-windows"},L=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,u,c,d,l,f,p,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,n=r.serverAddress,a=r.serverPort,i=r.serverUportalAddress,u=r.serverUportalPort,e.next=6,coreTup.getUportalInstance();case 6:return c=e.sent,v.info("[check upgrade]tup init"),e.next=10,(0,_.setLoginProxy)(c);case 10:return d=PromiseObject(),l=function(){var e=(0,s.default)(o.default.mark(function e(r){var i,s,u,l,f,p,_,g;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=r.param)||38!==i.result||!i.query_version_result||""===i.query_version_result.redirect_url){e.next=17;break}if(s=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(u=s.exec(i.query_version_result.redirect_url))){e.next=10;break}l=u[1],f=u[2],p=u[3],n=l||f,a=p&&p||0,e.next=11;break;case 10:return e.abrupt("return",(0,w.LoginError)({result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:isResume}));case 11:return _={query_ver_info:{server_url:n,server_port:parseInt(a),user_account:t,software_type:m(),current_version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE}},e.next=14,c.queryVersionInfo(_);case 14:g=e.sent,e.next=18;break;case 17:0!==i.result?(v.error("query version fail, result:"+i.result),d.resolve(i)):d.resolve(i);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),c.setNotifyFunc(360487,l),f={query_ver_info:{server_url:isNullOrEmpty(E)?isNullOrEmpty(h.server_url)?r.serverAddress:h.server_url:i,server_port:isNullOrEmpty(E)?isNullOrEmpty(h.port)?parseInt(r.serverPort):parseInt(h.port):parseInt(u),user_account:t,software_type:m(),current_version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,token:E}},v.info("[check upgrade] queryVersionInfo: "),e.next=17,c.queryVersionInfo(f);case 17:return p=e.sent,setTimeout(function(){d.resolve("request timeout")},1e4),e.abrupt("return",d);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),C=(t.reStartUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,r=t.isWaitUpgrade,n=t.isPortalAfterCallUpgrade,!0===r&&!0===n&&(v.info("Soft start to upgrade after call ended"),t.isPortalAfterCallUpgrade=!1,window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():F());case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("checkUpgrade"),r=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,s.default)(o.default.mark(function e(){var t,r,s,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("[check upgrade] start"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return v.info("the app is ENABLE_IT_MEETING is true, can not update by usg"),e.abrupt("return");case 4:if(!window.isHubEnv){e.next=6;break}return e.abrupt("return");case 6:if(!window.isPluginEnv){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,g.getLoginModel)();case 10:if(t=e.sent,isNullOrEmpty(a)||!t.sipLoginOnly){e.next=14;break}return v.info("[check upgrade] end: anonyumous join conference don't need deal non-forced upgrade"),e.abrupt("return");case 14:if(!window.webView||!window.IsGooglePlayPkg()){e.next=17;break}return v.info("[check upgrade] end: Android pkg check, the app is from google play, can not update by usg"),e.abrupt("return");case 17:if(!isNullOrEmpty(a)||t.isReqAddrChanged||n){e.next=20;break}return v.info("[check upgrade] end: addr not change, no need to query"),e.abrupt("return");case 20:if(!isNullOrEmpty(a)||!t.isAutoLogin){e.next=23;break}return v.info("[check upgrade] end: auto login no need to query"),e.abrupt("return");case 23:if(t.showContentType!==constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING){e.next=26;break}return v.info("[check upgrade] end: now is downloading, no need to query"),e.abrupt("return");case 26:return t.isReqAddrChanged=!1,e.next=29,L(i,a);case 29:if(r=e.sent,0===r.result){e.next=33;break}return v.info("[check upgrade] end: queryVersionInfo res",r),e.abrupt("return");case 33:if(s=r,!1===t.isPortalUpgrade&&(v.info("[check upgrade]isPortalUpgrade become true"),t.isPortalUpgrade=!0),!s.query_version_result.is_consistent){e.next=38;break}return v.info("[check upgrade] end: current version is the newest"),e.abrupt("return");case 38:if(Y(s.query_version_result.upgrading_version)){e.next=41;break}return v.info("[check upgrade] end: compareVersion false"),e.abrupt("return");case 41:t.isForceUpdate=s.query_version_result.is_force_upgrade,t.set({whatsNewCHN:s.query_version_result.version_description,whatsNewENG:s.query_version_result.version_description,downloadVersion:s.query_version_result.version_description,downloadUrl:s.query_version_result.version_path}),t.isForceUpdate?t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS:t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.WHATSNEWHINTS,isNullOrEmpty(a)||(t.isWaitUpgrade=!0),u=D(),u&&t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.FINISH&&t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.INIT?v.info("[check upgrade] end: User is in calling, not show hints"):(v.info("[check upgrade] end: User is not calling, start to show update hints"),A());case 47:case"end":return e.stop()}},e,void 0)})),r,null);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.clearDownloadClick=function(){v.info("clearDownloadClick in"),E.clickTimer&&clearTimeout(E.clickTimer),E.clickTimer=null,h({clickDownload:!1})}),T=function(){return!window.webView||!window.IsGooglePlayPkg()||(v.info("Android pkg check, the app is from google play, can not update by usg"),!1)},N=(function(){var e=(0,s.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("run at updateFileDownload"),!E.clickDownload){e.next=6;break}return v.info("userClick confirm download"),E.downloadResume?(G(t,!0),h({downloadResume:!1})):G(t),C(),e.abrupt("return");case 6:setTimeout(function(){v.info("start to show hints"),!1!==T()&&(0,g.getLoginModel)().then(function(e){e.isForceUpdate=r,e.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS,e.isWaitUpgrade=!0})},3e3);case 7:case"end":return e.stop()}},e,void 0)}))}(),t.downloadProcessNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v.info("start set download process ",(0,l.default)(t)),r=parseFloat(t.progress_info.total_file_size),n=parseFloat(t.progress_info.cur_file_size),!isNaN(r)&&!isNaN(n)){e.next=7;break}return v.error("size data error"),e.abrupt("return");case 7:return a=r<=0?0:parseInt(Math.round(n/r*1e4)/100),e.next=10,(0,g.getLoginModel)();case 10:i=e.sent,i.progressPercent=a,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v.error("downloadProcessNotify, error:",e.t0);case 17:case"end":return e.stop()}},e,void 0,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()),S=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("get download result, params",(0,l.default)(t)),e.next=3,(0,g.getLoginModel)();case 3:r=e.sent,0===t.result?(v.info("download update file success"),F()):(v.info("download update file failed, result=",t.result+", info=",t.FaultString),h({downloadResume:!1}),O());case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=t.dealDownloadFailed=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,t.isUpdateError=!0,t.isUpdateErrorEx=!0,t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,A();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),R=t.clickConfirmUpdate=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("userClick confirm download update version"),e.next=3,(0,g.getLoginModel)();case 3:t=e.sent,r=t.isUpdateErrorEx,n=t.showContentType,a=t.progressPercent,!r&&~a?(v.info("downloding, no need restart"),t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,A()):(i=t.downloadUrl,G(i));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().common.modalContent,v.info("modalContent : ",t),e.next=4,(0,g.getLoginModel)();case 4:if(r=e.sent,isNullOrEmpty(t)||"progressbar"===t.key){e.next=11;break}if(v.info("model is not empty, [key]=",t.key),"addConf"!==t.key){e.next=11;break}return e.next=10,coreConf.toggleChangeConfAcsPas("");case 10:coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN);case 11:n=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getProgressBar}),coreUi.showModal(p.default.createElement(n,{key:"progressbar"}),!0,"",!1);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),x=function(){appService.openUrl("itms-apps://itunes.apple.com/cn/app/%E5%8D%8E%E4%B8%BA%E4%BC%9A%E8%AE%AE/id1354340495?mt=8")},b=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,r=t.curPortalState===constant.CUR_PORTAL_LOGIN_STATE.FINISH?language.LOG_OUT:language.LANG_NATIVE_CONFIRM_CANCEL,t.isForceUpdate?coreCommon.isIos()?window.notifyIosUpdateAlert("VERSION_UPDATE_TITLE",{buttonText:language.UPDATE_NOW}).then(function(e){e.ret&&(x(),A())}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:r,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?R():(v.info("userClick exit download update version ",t.curPortalState),t.curPortalState===constant.CUR_PORTAL_LOGIN_STATE.FINISH&&delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:language.UPDATE_LATER,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?coreCommon.isIos()?x():R():v.info("userClick cancel download update version")});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),A=t.showUpdateHintsOrBar=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=4;break}y(),e.next=8;break;case 4:return e.next=6,(0,g.getLoginModel)();case 6:t=e.sent,constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING===t.showContentType?window.goRoute("mUpdateVersionInfo"):b();case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),k=function(e){try{if(window.fs){window.fs.readdirSync(e).forEach(function(t){var r=e+"/"+t;window.fs.statSync(r).isDirectory()||window.fs.unlinkSync(r)})}}catch(e){v.error("delete file error",e)}},P=function(e){var t=[];if(window.fs){window.fs.readdirSync(e).forEach(function(r){t.push(e+"/"+r)})}return t},M=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="",r="";if(window.fs)if(t=window.path.join(window.APP_DATA_PATH,"update/").replace(/\\/g,"/"),window.fs.existsSync(t))if(e){var n=P(t);r=Array.isArray(n)&&1===n.length&&n[0]||"",v.info("this is resume download, find old update file=",r),""===r&&(v.info("not found valid file, delete all files"),k(t))}else v.info("not resume download, delete old update files"),k(t);else v.info("creat new update file"),window.fs.mkdir(t);else window.webView&&(t=window.UPGRADE_APK_PATH,e&&(r=window.getProcessFileName(t)));return{upgradeDir:t,fileNamePath:r}},U=t.clearBarPageSet=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,t.isUpdateError=!1,t.isUpdateErrorEx=!1,t.progressPercent=-1;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,v.info("start update download, iskeep=",s),v.info("start request software version check"),n=M(s),a=n.upgradeDir,i=n.fileNamePath,v.info("confirm download, set update file path=",a),""!==a&&(""!==i?(v.info("get old file path=",i),coreCwmp.getComPressFileSize({filePath:i}).then(function(e){var r=e.fileSize;v.info("get old update file size=",r),I(t,a,!0,r)})):I(t,a)),e.next=10,U();case 10:r.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,A();case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),D=t.getInCallingState=function(){var e=$getState().call.callStatus;return"VIDEO_CONNECTED"===e||"VIDEO_OUT"===e||"CALL_OUT"===e||"CALL_CONNECTED"===e},F=t.startInstallNewVer=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=D()){e.next=6;break}v.info("User is not calling, start install soft version now"),setTimeout(function(){window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():B()},3e3),e.next=11;break;case 6:return e.next=8,(0,g.getLoginModel)();case 8:r=e.sent,v.info("User is in calling, save the state and wait for the call end"),r.isPortalAfterCallUpgrade=!0;case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),B=function(){if(window.fs){for(var e=window.path.join(window.APP_DATA_PATH,"update").replace(/\\/g,"/"),t=window.fs.readdirSync(e),r=0;r<t.length;r++){var n=t[r];if(-1!==(0,l.default)(n).indexOf(".exe")){v.info("start execute software upgrade file, upgrade file name=",n);return void H(e+"/"+n)}}v.info("software update file is not exist"),V(language.DID_NOT_FIND_THE_AVAILABLE_UPGRADE_FILE)}},W=function(e){var t=window.process.env.APPDATA+"\\CloudLink\\log\\language.txt";window.fs.writeFile(t,window.langcode,"utf8",function(t){t&&window.log("writeFile quiteInstallFile error =",t),window.spawn(e,["/verysilent","/suppressmsgboxes","/norestart"]).on("error",function(e){v.info("execute update file error, err=",e),V(language.PC_FILE_DAMAGE_DOWN_AGAIN)})})},H=function(e){try{var t=window.APP_DATA_PATH;appService.writeFile(t,"configfile.ini","language = "+window.langcode.toString()+"\r\npackageversion = "+window.CLIENTCONFIG.NEW_APP_NAME).then(function(r){v.info("set update tip language success, file=",r);var n=t+"/ShowInstallTip.exe";appService.isFileExist(n).then(function(r){if(r){v.info("execute ShowInstallTip");var n=t.slice(0,2),a=n+" && cd "+t+" && ShowInstallTip.exe";window.exec(a),W(e)}else v.info("update tip file does not exit"),W(e)})},function(t){v.info("set update tip language failed, err:"+t),W(e)})}catch(e){v.error("install update file error:",e),V(language.PC_FILE_DAMAGE_DOWN_AGAIN)}},V=t.dealInstallFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("intsall update file error, show download again prompt"),e.next=3,(0,g.getLoginModel)();case 3:r=e.sent,window.exec("taskkill /f /im ShowInstallTip.exe"),K(),r.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS,window.confirm(""+t,!0).then(function(e){e.ret&&(v.info("userClick to download update file again"),G(r.downloadUrl))});case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),K=t.hideProgressBarModal=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().common.modalContent,isNullOrEmpty(t)||"progressbar"!==t.key?v.info("not update model, [key]=",t.key):(v.info("hide update model"),coreUi.hideModal());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Y=(t.dealUpdateVersionClickEx=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("userClick, show soft update state btn"),e.next=3,(0,g.getLoginModel)();case 3:t=e.sent,!1===t.isWaitUpgrade?(v.info("this is the latest software version"),window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.SOFT_UPGRADE_LATEST,2):(r=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getSoftVersionHint}),coreUi.showModal(p.default.createElement(r,null)))):A();case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.compareVersion=function(e){var t=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,r=t.split("."),n=e.split("."),a=Math.max(r.length,n.length);if(t===e)return!1;for(var o=0;o<a;o++){var i=o>=n.length?0:parseInt(n[o],10),s=o>=r.length?0:parseInt(r[o],10);if(i>s)return!0;if(i<s)return!1}return!1})},293:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){k.info("hideAlertAndConfirm"),window.hideConfirm&&window.hideConfirm(),window.hideAlert&&window.hideAlert(),window.hideNotifyConfirm&&window.hideNotifyConfirm(),window.clearDialogQueue&&window.clearDialogQueue()}function o(){return(0,L.getLoginModel)().then(function(e){return e.isBuildStgSuc?(0,h.destroyStgTunnel)():s.default.resolve(0)})}Object.defineProperty(t,"__esModule",{value:!0}),t.deRegisterService=t.clearState=t.quickLogout=t.logout=t.setOffline=t.doLogout=t.resetAllAtomicAction=t.initService=void 0;var i=r(3),s=n(i),u=r(132),c=n(u),d=r(1),l=n(d),f=r(2),p=n(f),_=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("clearObserversAndEvents"),e.next=3,coreConf.unregisterConfEvent();case 3:coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(l.default.mark(function e(t){var r,n=t.isBackLogin,a=t.isClearLoginRecord;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("logout success"),e.next=3,(0,L.getLoginModel)();case 3:r=e.sent,coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable()),coreCommon.isMobile()&&(r.logoutDisable=!1),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),coreUt.utConfigAccountInfo({configAccount:""}),n&&(window.isConfLogOut=a,window.ifLogOut=!0,r.showPwd=!1,r.sipOnlyType=0,window.isLoadLoginRecord=!0,!window.CLIENTCONFIG.ISMOBILE&&delegate.winHide(),!window.CLIENTCONFIG.ISMOBILE&&(0,O.initImportCertificate)(),window.CLIENTCONFIG.ISMOBILE&&(0,O.initMImportCertificate)(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(k.info("[IT-Meeting] IS_LINK_IT_SMC_MEETING go main"),window.goRoute("callMain"),k.info("[IT-Meeting] shutDownTupServer"),window.shutDownTupServer()):window.goRoute(window.CLIENTCONFIG.ISMOBILE?"loginCtn":window.isHubEnv?"maxhubLogin":"login")),coreCommon.isMobile()&&(r.logoutDisable=!1),coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable());case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.error("logout failed"),e.next=3,(0,L.getLoginModel)();case 3:t=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,resultParams:[0],isTrackTimeCosts:!0}),coreUt.utConfigAccountInfo({configAccount:""}),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.goRoute(window.CLIENTCONFIG.ISMOBILE?"loginCtn":window.isHubEnv?"maxhubLogin":"login"),coreCommon.isMobile()&&(t.logoutDisable=!1),coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable());case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,p.default)(l.default.mark(function e(){var t,r,n,a,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("start deRegisterTupService"),e.next=3,(0,L.getLoginModel)();case 3:if(t=e.sent,window.CLIENTCONFIG.ISBIGWIN){e.next=11;break}return e.next=7,coreConf.endPairWithPeripherals();case 7:return e.next=9,coreConf.serverCloseAllPair();case 9:coreConf.uninitAsPairServer(),coreConf.handlePairClosed();case 11:if(!(r=t.isSupportAS)){e.next=15;break}return e.next=15,coreConf.unSubscribeConfList();case 15:return e.next=17,coreTup.getUportalInstance();case 17:return n=e.sent,e.next=20,n.uportalLogout();case 20:return e.next=22,coreConf.unInitConfCtrl();case 22:if(!window.CLIENTCONFIG.ISMOBILE){e.next=26;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=26;break}return e.next=26,(0,I.unEnableBFCP)();case 26:return e.next=28,(0,I.sipserverDeregister)();case 28:return e.next=30,coreCwmp.stopCwmpServerAndUnInit();case 30:return e.next=32,coreContact.eaddrUnint();case 32:if(o||!t.useIM){e.next=40;break}return a=$getState().recent.showRecentInfo.toString(),e.next=36,coreDb.saveUserConfig({key:"userInfoStatus",value:a});case 36:return e.next=38,coreIm.eserverLogout();case 38:return e.next=40,coreIm.umserverLogout();case 40:k.info("deRegisterTupService success");case 41:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),E=t.deRegisterService=function(){var e=(0,p.default)(l.default.mark(function e(){var t,r=(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k.info("start deRegisterService"),k.info("deRegisterService, set isOffline true"),window.isOffline=!0,window.CLIENTCONFIG.ISMOBILE){e.next=9;break}return e.next=7,coreSecurity.getHWTupSupport();case 7:t=e.sent,t.addCallBack({closeSupportSocket:function(){k.info(" closeSupportSocket set null")}});case 9:return window.isLoadLoginRecord=!1,(0,T.enableAutoLogin)(!1),e.next=13,v(r);case 13:return k.info("deRegisterService success"),e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(0),k.error("setOffline error",e.t0.toJSON&&e.t0.toJSON()),e.abrupt("return",s.default.resolve(!1));case 21:case"end":return e.stop()}},e,this,[[0,17]])}));return function(){return e.apply(this,arguments)}}(),h=r(211),I=r(220),m=r(229),L=r(136),C=r(290),T=r(185),N=r(221),S=r(361),O=r(166),R=r(260),y=r(272),x=r(230),b=r(288),A=r(241),k=coreLogger.getLogger("logic")("logout"),P=t.initService=function(e){coreIm.initImModelService(e),coreIm.initRecentService(e),coreIm.initOpenRecentData(e),coreContact.initTaskQueue({info:e}),coreIm.localTimeService.initLocalTimeService(e)},M=t.resetAllAtomicAction=function(){coreConf.getVmrInfoToDbAtomic().reset(),coreConf.getAsInfoToDbAtomic().reset(),(0,b.sipLoginAtomicReset)()},U=(t.doLogout=delegate(function(){var e=(0,p.default)(l.default.mark(function e(t){var r,n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("doLogout"),e.next=3,(0,A.cancelLogin)();case 3:return e.next=5,(0,L.getLoginModel)();case 5:return r=e.sent,coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),coreCommon.isMobile()&&(r.logoutDisable=!0),coreCommon.isPc()&&(0,m.clearFireWallStore)(),e.next=11,(0,C.checkBeforeLogout)(t);case 11:if(!(n=e.sent)){e.next=17;break}return e.next=15,(0,x.restoreMAAConfControl)();case 15:return e.next=17,U(a);case 17:return coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable()),coreCommon.isMobile()&&(r.logoutDisable=!1),r.isPortalUpgrade=!1,r.isReqAddrChanged=!1,e.abrupt("return",n);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),"doLogout"),t.setOffline=function(){var e=(0,p.default)(l.default.mark(function e(){var t,r,n,a,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("do setOffline"),e.next=3,(0,A.cancelLogin)();case 3:return e.next=5,(0,L.getLoginModel)();case 5:return t=e.sent,t.hasLoginCanceled=!1,e.next=9,(0,L.getMyInfo)();case 9:return r=e.sent,e.next=12,(0,C.checkBeforeSetOffline)(constant.LOGOUT_TYPE.SETOFFLINE,u);case 12:if(!0!==(n=e.sent)&&!0!==n.ret){e.next=34;break}return o&&(0,O.changeAutoLogin)(o),t.setAppState(constant.APP_STATE.DISCONNECTED),a=r.account,$dispatch(coreUi.updateContactStatusMap((0,c.default)({},a,{status:constant.ONLINE_STATUS.OFFLINE,desc:"",client_type:0}))),r.status=constant.ONLINE_STATUS.OFFLINE,$dispatch(coreUi.subscriptionAccountList([])),k.info("setOffline, change status is offline"),coreUi.clearLinkageStatusLogic(),e.next=24,_();case 24:return M(),e.next=27,(0,N.clearResumeService)();case 27:return e.next=29,(0,N.stopResume)("setOffline");case 29:return k.info("setOffline, set isOffline true"),window.isOffline=!0,e.abrupt("return",E(i));case 34:return e.abrupt("return",s.default.resolve(!1));case 35:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.logout=delegate(function(){var e=(0,p.default)(l.default.mark(function e(){var t,r,n,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.next=3,(0,L.getLoginModel)();case 3:return t=e.sent,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,params:[]}),r=$getState(),n=r.conf.confTempAcsAccount,isNullOrEmpty(n)||($dispatch(coreUi.changeConfTempAcsAccount("")),t.displayAccount=""),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),coreCommon.isMobile()&&(t.logoutDisable=!0),window.stroage.setFastLogin(!1),e.prev=10,k.info("[ logout ] isBackLogin:"+i+",isKickout:"+s),coreCommon.isPc()&&appService.resetTrayMenu(),window.CLIENTCONFIG.ISMOBILE&&appService.cancelAllNotification(),e.next=16,(0,R.unRegisterPush)(!1);case 16:return window.skipLogin=!1,e.next=19,(0,N.clearResumeService)();case 19:return e.next=21,(0,N.stopResume)("logout");case 21:return(0,S.getMiddleEndApi)().stopRefreshMiddleEndToken(),e.next=24,_();case 24:return coreCall.exitFullScreen(),M(),e.next=28,coreConf.unInit();case 28:h.actionGetCorpResourceAtomic.reset(),!s&&(0,T.storeAppCache)(),$dispatch(coreUi.toggleMobileNetTip(!0)),t.isMobile&&document.removeEventListener("pause",T.storeAppCache,!1),e.next=39;break;case 34:return e.prev=34,e.t0=e.catch(10),k.error("logout exception: "+e.t0.toString()),k.error("logout handle cache error:",e.t0),e.abrupt("return",w());case 39:return e.abrupt("return",E(!0,c).then((0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(),e.next=3,(0,h.resetLoginInfo)();case 3:return e.next=5,G();case 5:return e.abrupt("return",{isBackLogin:i,isClearLoginRecord:u});case 6:case"end":return e.stop()}},e,void 0)}))).then(g).catch(function(e){k.error("logout handle cache error:",e),w()}));case 40:case"end":return e.stop()}},e,void 0,[[10,34]])}));return function(){return e.apply(this,arguments)}}(),"logout")),G=(t.quickLogout=delegate((0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("[ quickLogout ]"),e.next=3,coreCwmp.stopCwmpServerAndUnInit();case 3:case"end":return e.stop()}},e,void 0)})),"quickLogout"),t.clearState=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:k.info("clearState"),coreSearch.clearGlobalData(),coreUi.clearReduxState(),P("logout clearState"),coreUi.initAvatarMap(),coreUi.hideModal(),(0,L.resetLoginModel)(),(0,y.resetMyInfo)();case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}())},308:function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function a(){return window.prompt({title:language.PROXY_TITLE,label:"Proxy UserName :",value:"username",inputAttrs:{type:"url"},type:"input"})}function o(){return window.prompt({title:language.PROXY_TITLE,label:"Proxy Password :",value:"password",inputAttrs:{type:"password"},type:"input"})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOAuthAccount=t.getOAuthTicket=void 0;var i=r(1),s=n(i),u=r(2),c=n(u),d=(function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getLoginModel)();case 2:return t=e.sent,e.next=5,a();case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,o();case 10:if(n=e.sent){e.next=13;break}return e.abrupt("return");case 13:return t.proxyAccount=r,e.next=16,coreSecurity.getPasswordManager();case 16:return i=e.sent,e.next=19,i.setPassword("proxyPassword",n);case 19:return e.next=21,(0,l.setProxyInfo)({isSupportProxy:!0,proxyAddress:t.proxyAddress,proxyPort:t.proxyPort,proxyAccount:r,proxyPassword:n});case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}},e,this)}))}(),r(136)),l=r(166),f=coreLogger.getLogger("login")("IT-ticket");t.getOAuthTicket=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n,a,o,i,u,c,l,p,_,g,w;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info(" [ getOAuthTicket ] "),t=PromiseObject(),e.next=4,(0,d.getLoginModel)();case 4:return r=e.sent,n=r.OAuthClinetID,a=r.OAuthUrl,o=r.account,e.next=9,coreSecurity.getPasswordManager();case 9:return i=e.sent,e.next=12,i.getPassword("password");case 12:return u=e.sent,u=encodeURIComponent(u),e.next=16,coreHttp.sendSyncRequest({url:a,type:constant.REQUEST_TYPE.POST,header:{"Content-Type":"application/x-www-form-urlencoded"},body:"username="+o+"&password="+u+"&grant_type=password&client_id="+n,cipherlist:[50331695,50331701,50331708,50331709]});case 16:return c=e.sent,l=c.param,p=l.recv_body,_=l.resp_code,g=l.result,_?(w=parseInt(_),200===w?(p=JSON.parse(p),p.error&&(f.error(" [ getOAuthTicket ] failed, errorCode:"+p.error+", info:"+p.error_description),t.reject({result:!1,errorCode:d.UErrorCode.LOGIN_ERR_AUTH_FAILED,errorType:d.ErrorType.uportal,isResume:r.isResume})),t.resolve(r.user_ticket=p.access_token),f.info(" [ getOAuthTicket ] result")):(f.error(" [ getOAuthTicket ] failed, request error, status code: "+_+", result: "+g),t.reject({result:!1,errorCode:d.UErrorCode.LOGIN_ERR_REQUEST_FAILED,errorType:d.ErrorType.uportal,isResume:r.isResume}))):t.reject({result:!1,errorCode:d.UErrorCode.LOGIN_ERR_REQUEST_FAILED,errorType:d.ErrorType.uportal,isResume:r.isResume}),e.abrupt("return",t);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getOAuthAccount=function(){var t=(0,c.default)(s.default.mark(function t(r){var n,a,o;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f.info(" [ getO[Auth]Account ] "),!((n=r.split("."))instanceof Array)){t.next=8;break}return a=JSON.parse(new e(n[1],"base64").toString()),f.info(" [ getO[Auth]Account ] result",a.preferred_username.length>4?a.preferred_username.substr(0,3)+"******"+a.preferred_username.substr(-4):"****"),t.abrupt("return",a.preferred_username);case 8:return o=PromiseObject(),t.abrupt("return",o.reject("server config error"));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}).call(t,r(131).Buffer)},309:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.firstTimeLoginChangePassword=t.firstLoginChangePassword=t.checkIsFirstLogin=t.setFistLoginInfo=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return r=e.sent,e.next=5,r.setPassword("password",t);case 5:return e.next=7,(0,c.getLoginModel)();case 7:n=e.sent,n.password=t;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c=r(195),d=r(166),l=coreLogger.getLogger("login")("firstLogin"),f={};t.setFistLoginInfo=function(e,t){f={is_first_login:e.uportal_authorize_result&&e.uportal_authorize_result.is_first_login,account:t,auth_token:e.uportal_authorize_result.auth_token}},t.checkIsFirstLogin=function(){return f.is_first_login},t.firstLoginChangePassword=function(){l.info("firstLoginChange[Password] enter."),window.CLIENTCONFIG.ISMOBILE?(window.goRoute("loginCtn"),navigator.splashscreen&&navigator.splashscreen.hide(),window.goRoute("/loginCtn/firstTimeChangePassword")):window.confirm(language.FIRST_LOGIN_CHANGE_PASSWORD,"SETTING_CHANGE_PASSWORD",!0).then(function(e){e.ret?coreSetting.showChangePassword(!0):coreDb.saveUserConfig({key:"isRemindNotNotify",value:"true"})})},t.firstTimeLoginChangePassword=function(){var e=(0,s.default)(o.default.mark(function e(t,r,n){var a,i,f,p,_,g;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.navigator.onLine){e.next=3;break}return alert(language.LOGIN_RESUME_NETWORK_ERROR),e.abrupt("return");case 3:return e.next=5,coreTup.getUportalInstance();case 5:return a=e.sent,i=PromiseObject(),f=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.param,l.info("change [pass]word result: "+r.result),!r||0!==r.result){e.next=13;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=7;break}window.alert(""+language.CHANGE_PASSWORD_SUCCESS_FIRST).then(function(e){u(n).then(function(){return i.resolve(!0)})}),e.next=11;break;case 7:return e.next=9,coreSecurity.getPasswordManager();case 9:a=e.sent,window.confirm(language.CHANGE_PASSWORD_SUCCESS_RELOGIN,!0).then(function(e){coreSetting.showChangePassword(!1),u(n).then(function(){e.ret?(l.info("[password] change success, reLogin"),i.resolve(!0)):(l.info("[password] change success, not login"),a.setPassword("password","").then(function(e){var t={isRememberPassword:!1,isAutoLogin:!1};(0,d.setLoginInfo)(t),(0,c.getLoginModel)().then(function(e){e.password=""}),document.getElementById("password").value="",i.resolve(!1)}))})});case 11:e.next=16;break;case 13:s=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[s],2),i.resolve(!1);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setNotifyFunc(360449,f),e.next=11,(0,c.getLoginModel)();case 11:return p=e.sent,_=p.serverUportalAddress,g=p.serverUportalPort,a.changeLoginUportalPassword(t,r,n,_,g),e.abrupt("return",i);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}()},310:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerEServerClientPush=void 0;var a=r(69),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),d=r(195),l=coreLogger.getLogger("push")("index");window.registerEServerHWPush=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.webView.getLocalIp()||"0.0.0.0",!isNullOrEmpty(a)){e.next=6;break}return e.next=4,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_TOKEN});case 4:r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)||(a=r.value);case 6:if(!isNullOrEmpty(o)){e.next=11;break}return e.next=9,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME});case 9:n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)||(o=n.value);case 11:return e.next=13,f(2,1,a,o,"","",t);case 13:coreDb.saveLoginSetting({key:DB_KEY_HW_PUSH_TOKEN,value:a}),coreDb.saveLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME,value:o});case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterEServerHWClientPush=(0,c.default)(s.default.mark(function e(){var t,r,n,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.webView.getLocalIp()||"0.0.0.0",r=void 0,n=void 0,e.next=5,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_TOKEN});case 5:return a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(r=a.value),e.next=9,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME});case 9:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(n=o.value),e.next=13,f(2,3,r,n,"","",t);case 13:case"end":return e.stop()}},e,void 0)})),window.registerEServerIosPush=function(){var e=(0,c.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,c.default)(s.default.mark(function e(n){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=5;break}return e.next=3,coreDb.queryLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN});case 3:a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(t=a.value);case 5:if(!isNullOrEmpty(r)){e.next=10;break}return e.next=8,coreDb.queryLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN});case 8:o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(r=o.value);case 10:return e.next=12,f(1,1,"","",t,r,n);case 12:coreDb.saveLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN,value:t}),coreDb.saveLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN,value:r});case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterEServerIosPush=(0,c.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,n=void 0,e.next=4,coreDb.queryLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN});case 4:return a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(r=a.value),e.next=8,coreDb.queryLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN});case 8:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(n=o.value),e.next=12,f(1,3,"","",r,iosVoipToken,t);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));var f=t.registerEServerClientPush=function(){var e=(0,c.default)(s.default.mark(function e(t,r,n,a,i,u,c){var f,p,_,g,w,v,E,h,I,m,L,C,T,N=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if(!isNullOrEmpty(n)||!isNullOrEmpty(i)){e.next=5;break}return l.info(" [ registerClientPush ] androidToken and iosDeviceToken is null"),e.abrupt("return");case 5:return isNullOrEmpty(a)&&(a=""),e.next=8,(0,d.getLoginModel)();case 8:return f=e.sent,p=f.account,_=f.authToken,g=f.serverAddress,w=f.serverPort,v=f.proxyAddress,E=f.proxyPort,h=f.proxyAccount,I=1,m="00:00",L="00:00",C={user:p,device_token:1===t?i:n,push_type:t,opt:r,client_ip:c,language:window.langShortName,no_push_start_time:m,no_push_end_time:L,apns_server:1,apns_cert:N,push_by_time_switch:I,heart_beat_time:30,android_token:1===t?i:n,app_id:"1",push_class_name:a,voip_token:u,app_mode:1,push_mode:1,im_push_mode:1,call_push_mode:0,push_im_active:"welink://welinksoftclient/h5page?page=imDetail",push_call_active:"welink://welinksoftclient/h5page?page=call"},l.info("registerClientPush","registerClientPush"),e.next=17,coreIm.registerPush(C);case 17:T=e.sent,l.info("registerClientPush","registerClientPush result : "+(0,o.default)(T));case 19:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a,o,i,s){return e.apply(this,arguments)}}();window.openConversationByMobile=function(){var e=(0,c.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreIm.openImDetailByUrl(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},311:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkLoginInfo=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=(t.checkLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("checkLoginInfo check"),e.next=3,c.getLoginModel();case 3:return t=e.sent,r=/[`~!#$^&*()+=|\\\[\]\{\}:;'\,<>\/?]|[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[^\x00-\xff]/g,n=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[^\x00-\xff]/g,e.abrupt("return",!(r.test(t.displayAccount)||n.test(t.password)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r(136)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),d=coreLogger.getLogger("logic")("login/loginPreCheck")},312:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.iosCursorDeal=t.checkOffLineIsInCall=t.getIsReminder=t.getCloseType=t.getCloseAppWays=t.setLocalOfflineStatus=t.publishStatus=t.loadEserverSignature=t.loadMyInfo=t.updateCurUser=t.checkLocalHasMyinfo=void 0;var a=r(132),o=n(a),i=r(69),s=n(i),u=r(127),c=n(u),d=r(129),l=n(d),f=r(1),p=n(f),_=r(2),g=n(_),w=r(185),v=r(195),E=r(363),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(E),I=r(136),m=coreLogger.getLogger("logic")("main/myInfo"),L=(t.checkLocalHasMyinfo=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r,n,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("start checkLocalHasMyinfo"),!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,(0,v.getLoginModel)();case 5:return t=e.sent,e.next=8,coreDb.queryLoginSetting({key:"myinfo"});case 8:if(r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)){e.next=20;break}if(n=r.value,isNullOrEmpty(n)){e.next=20;break}if(a=JSON.parse(n),isNullOrEmpty(a)||t.account!==a.compareAccount){e.next=20;break}return m.info(" checkLocalHasMyinfo : has local myinfo last copy"),e.next=17,(0,I.getMyInfo)();case 17:return o=e.sent,o.set(a),e.abrupt("return",!0);case 20:return m.info(" checkLocalHasMyinfo : no copy"),e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateCurUser=function(){var e=(0,g.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getMyInfo)();case 2:r=e.sent,t&&(r.name=t),r.set.apply(r,(0,l.default)(r));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.loadMyInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a,o,i,u,d,l,f,_,g,w,E,h;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getLoginModel)();case 2:return r=e.sent,e.next=5,(0,I.getMyInfo)();case 5:if(n=e.sent,m.info("loadMyInfo"),a=r.sipImpi,isNullOrEmpty(a)||-1!==(o=a.indexOf("@"))&&(a=a.slice(0,o)),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=26;break}return i=window.getUportalRes(),u={},u.account=i.param.uportal_authorize_result.real_user_account,e.next=15,coreContact.getUserInfo(u.account);case 15:if(d=e.sent,l=d.param,!isNullOrEmpty(l)){e.next=24;break}return m.error("myinfo is null"),f=u.account.split("@")[0],n.account=u.account,n.name=f,n.bind_no=a,e.abrupt("return");case 24:return n.set((0,c.default)({},l)),e.abrupt("return");case 26:return e.next=28,coreContact.getUserInfo(t);case 28:if(_=e.sent,g=_.param,!isNullOrEmpty(g)){e.next=37;break}return m.error("myinfo is null"),w=r.displayAccount.split("@")[0],n.account=t,n.name=n.name||w,n.bind_no=a,e.abrupt("return");case 37:r.isSupportAS&&(g.account=r.account),g.dept_name_cn=g.dept_name_cn.replace(/\*/g,"-"),g.dept_name_en=g.dept_name_cn.replace(/\*/g,"-"),E=(0,c.default)({},g,{compareAccount:t}),h=(0,s.default)(E),coreDb.saveLoginSetting({key:"myinfo",value:h}),n.set(E);case 44:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.loadEserverSignature=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("query eserver sig start"),e.next=3,coreContact.queryEserverSignature(t);case 3:if(r=e.sent,isNullOrEmpty(r)||1!==r.result){e.next=7;break}return m.info("query eserver sig-nature failed"),e.abrupt("return");case 7:return e.next=9,(0,I.getMyInfo)();case 9:n=e.sent,n.set(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),null),C=(t.publishStatus=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.getLoginModel)();case 3:return r=e.sent,e.next=6,(0,I.getMyInfo)();case 6:if(n=e.sent,r.useIM){e.next=10;break}return m.info("publishStatus, now is te mode,not do publishStatus"),e.abrupt("return");case 10:if(a=window.CLIENTCONFIG.ISMOBILE?1:0,m.info("publishStatus,status:",t,"desc:",handlePhoneNumber(i)),t!==constant.ONLINE_STATUS.OFFLINE){e.next=24;break}return e.next=15,(0,w.setOffline)();case 15:if(!(o=e.sent)){e.next=21;break}return S(),e.abrupt("return",!0);case 21:return e.abrupt("return",!1);case 22:e.next=35;break;case 24:if(!window.isOffline){e.next=34;break}if(!r.loginDisable){e.next=28;break}return m.info("publishStatus, now loginDisable,not do login again"),e.abrupt("return",!1);case 28:return t===constant.ONLINE_STATUS.ONLINE&&(n.isOffToLine=!0),$dispatch(coreUi.updateUnreadSystemBulletin(0)),e.next=32,(0,w.login)(!1,!1,t,i);case 32:n.isOffToLine=!1,h.checkStatusOptions();case 34:return e.abrupt("return",C(t,i,a));case 35:e.next=41;break;case 37:return e.prev=37,e.t0=e.catch(0),m.error("publishStatus",e.t0),e.abrupt("return",!1);case 41:case"end":return e.stop()}},e,void 0,[[0,37]])}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,g.default)(p.default.mark(function e(t,r,n){var a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!coreIm.checkEServerOnlineNoToast("publishStatus")){e.next=6;break}return e.next=3,T(t,r,n);case 3:return e.abrupt("return",e.sent);case 6:return coreIm.setUserLoginStatus({status:t,desc:r}),a=PromiseObject(),L&&(m.info("publishStatus remove pre _addedEServerLoginSuccessFunction"),window.removeEventListener("eServerLoginSuccess",L),L=null),L=function(){var e=(0,g.default)(p.default.mark(function e(){var o,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("publishStatus _addedEServerLoginSuccessFunction",(0,s.default)({status:t,desc:r})),window.removeEventListener("eServerLoginSuccess",L),L=null,o=coreIm.getUserLoginStatus(),e.next=6,T(o.status,o.desc,n);case 6:i=e.sent,a.resolve(i);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.addEventListener("eServerLoginSuccess",L),m.info("publishStatus add eServerLoginSuccess callback",(0,s.default)({status:t,desc:r})),setTimeout(function(){return a.resolve(!1)},35e3),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}()),T=function(){var e=(0,g.default)(p.default.mark(function e(t,r,n){var a,i,u,c;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getMyInfo)();case 2:if(a=e.sent,"number"!==Object.type(t)&&"string"!==Object.type(t)){e.next=19;break}return m.info("pushStatusToEServer",(0,s.default)({status:t,desc:r,client_type:n})),e.next=7,(0,v.getLoginModel)();case 7:return i=e.sent,e.next=10,coreIm.publishStatusToServer({status:t,desc:r});case 10:if(!(u=e.sent)||0!==u.result){e.next=19;break}return c=i.account,i.status=t,$dispatch(coreUi.updateContactStatusMap((0,o.default)({},c,{status:t,desc:r,client_type:n}))),a.status=t,a.statusDesc=r,N(t),e.abrupt("return",!0);case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),N=function(e){coreSetting.checkAutoLeave(e),$getState().setting.shouldResetTray&&appService.initMainTray()},S=t.setLocalOfflineStatus=function(){var e=(0,g.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("setLocalOfflineStatus"),e.next=3,(0,I.getMyInfo)();case 3:t=e.sent,t.status=constant.ONLINE_STATUS.OFFLINE,coreIm.dealOfflineFileSendOrReceiveFail(),t.statusDesc="",t.selectIndex=4,$dispatch(coreUi.cleanContactStatusMap());case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.getCloseAppWays=function(){var e=(0,g.default)(p.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("userClick  main page quit btn"),t?coreCommon.quickCloseApp():coreCommon.closeApp();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getCloseType=function(){return window.localStorage.getItem("closeWays")},t.getIsReminder=function(){return window.localStorage.getItem("isReminder")},t.checkOffLineIsInCall=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m.info("click OffLint for checkAndEndCall"),t=$getState().call,r=t.showCallToolBar,n=t.callStatus,!r&&"VIDEO_CONNECTED"!==n&&"VIDEO_OUT"!==n&&"CALL_OUT"!==n&&"CALL_CONNECTED"!==n){e.next=7;break}return a=language.COMMON_EXIT_THE_PROMPT,window.CLIENTCONFIG.ISMOBILE||window.alert(a),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),m.error("click OffLint for checkAndEndCall"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),t.iosCursorDeal=function(){var e=(0,g.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"ios"===window.CLIENTCONFIG.PLATFORM&&0===t.target.value.length&&(r=document.activeElement,"input"===r.nodeName.toLocaleLowerCase()&&setTimeout(function(){""===r.style.textShadow?r.style.textShadow="rgba(0, 0, 0, 0) 0 0 0":r.style.textShadow=""},20));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},359:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.storeAppCache=t.recoverAppCache=void 0;var a=r(127),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),d=r(360),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),f={myInfo:!0,menu:!0},p=(t.recoverAppCache=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.sysLogger.info("[ recoverAppCache ]"),e.next=3,l.get("reduxState");case 3:if(!(t=e.sent)){e.next=12;break}window.sysLogger.info("recoverAppCache 1");try{for(r in t)t.hasOwnProperty(r)&&f[r]&&($getState()[r]=t[r],"myInfo"===r&&(t[r].languageCode=window.langcode))}catch(e){window.sysLogger.info("recoverAppCache error")}return window.sysLogger.info("recoverAppCache 2"),window.sysLogger.info("[ recoverAppCache ] success"),e.abrupt("return",!0);case 12:return window.sysLogger.info("[ recoverAppCache ] no app cache"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.storeAppCache=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.sysLogger.info("[ storeAppCache ]"),t=$getState(),r={},n=p(t);for(a in n)n.hasOwnProperty(a)&&f[a]&&(r[a]=n[a]);return e.next=6,l.set("reduxState",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=(0,o.default)({},e);return t&&t.myInfo&&(t.myInfo.statusDesc=""),t&&t.setting&&(t.setting.shouldResetTray=!0),t&&t.menu&&(t.menu.rightMenuStyle.left="-9999px",t.menu.rightMenuStyle.top="-9999px"),t})},360:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.set=t.get=void 0;var a=r(69),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),d=r(136),l=coreLogger.getLogger("account")("appCache"),f=t.get=function(){var e=(0,c.default)(s.default.mark(function e(t,r){var n,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getLoginModel)();case 2:return n=e.sent,e.next=5,coreDb.queryLoginSetting({key:r?t:n.account+"_"+t});case 5:return a=e.sent,e.prev=6,e.abrupt("return",JSON.parse(a.value));case 10:e.prev=10,e.t0=e.catch(6),l.error("query login sertting parse error",e.t0);case 13:case"end":return e.stop()}},e,void 0,[[6,10]])}));return function(t,r){return e.apply(this,arguments)}}(),p=t.set=function(){var e=(0,c.default)(s.default.mark(function e(t,r,n){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getLoginModel)();case 2:return a=e.sent,e.next=5,coreDb.saveLoginSetting({key:n?t:a.account+"_"+t,value:(0,o.default)(r)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),_=t.remove=function(){var e=(0,c.default)(s.default.mark(function e(t,r){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getLoginModel)();case 2:return n=e.sent,e.next=5,coreDb.saveLoginSetting({key:r?t:n.account+"_"+t,value:""});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}();window.appCache={get:f,set:p,remove:_}},361:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMiddleEndApi=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(119),c=n(u),d=r(4),l=n(d),f=r(120),p=n(f),_=r(121),g=n(_),w=r(136),v=r(410),E=n(v),h=coreLogger.getLogger("login")("MiddleEnd"),I=function(e){function t(){var e,r,n,a,i=this;(0,l.default)(this,t);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(d))),n.requestIDVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("requestIDVerificationCode"),e.next=3,(0,w.getLoginModel)();case 3:return r=e.sent,a=r.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/v1/users/login/"+t+"/code",u=constant.REQUEST_TYPE.GET,e.abrupt("return",n._sendSyncRequest({url:s,type:u}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.requestTenantUserList=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s,u,c=t.phoneNumber,d=t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("requestTenantUserList"),e.next=3,(0,w.getLoginModel)();case 3:return r=e.sent,a=r.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/wemiddle/api/v1/mdmservice/pusers?phoneNumber="+c+"&vercode="+d,u=constant.REQUEST_TYPE.GET,e.abrupt("return",n._sendSyncRequest({url:s,type:u}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.ssoLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s,u,c,d,l,f=t.loginName,p=t.password,_=t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.loginName=f,n.password=encodeURIComponent(p),n.tenantid=_,h.info("ssoLogin"),e.next=6,(0,w.getLoginModel)();case 6:return r=e.sent,a=r.middleEndAddress,s="WeLink-meeting",window.isHubEnv&&(a="cloudlinkworkplace-api.huaweicloud.com",s=constant.USER_AGENT.MAXHUB_WORKPLACE),u="https://"+a+"/mcloud/mag/LoginAutoReg",h.info("ssoLogin user_agent=",s),c={"User-Agent":s,"Content-Type":"application/x-www-form-urlencoded"},d="loginName="+f+"&password="+n.password+"&publicKeyFlag=df",isNullOrEmpty(_)||(d+="&tenantid="+_),l=constant.REQUEST_TYPE.POST,e.abrupt("return",n._sendSyncRequest({url:u,type:l,header:c,body:d}).then(function(e){if(e.result){var t=e.recv_body.refresh_expires_in,r=isNullOrEmpty(t)?7200:parseInt(t);n.startRefreshMiddleEndToken(.5*r)}return e}));case 17:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n._sendSyncRequest=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreHttp.sendSyncRequest(t);case 2:if(!(r=e.sent)||128!==r.result){e.next=12;break}return e.next=6,coreAccount.switchProxy();case 6:return e.next=8,coreHttp.sendSyncRequest(t);case 8:if(0===(r=e.sent)){e.next=12;break}return e.next=12,coreAccount.resetProxy();case 12:return e.abrupt("return",n.dealWithRequestResult(r));case 13:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.startRefreshMiddleEndToken=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.stopRefreshMiddleEndToken(),h.info("start refresh middle-end [token], interval:",t),n.refreshTokenTimer=setInterval((0,s.default)(o.default.mark(function e(){var t,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.ssoLogin({loginName:n.loginName,password:n.password,tenantid:n.tenantid});case 2:if(t=e.sent,!t.result||!t.recv_body.access_token){e.next=14;break}return e.next=6,(0,w.getLoginModel)();case 6:return r=e.sent,r.user_ticket=t.recv_body.access_token||r.user_ticket,r.crypt_token=t.recv_body.crypt_token||r.crypt_token,h.info("refresh um crypttoken"),e.next=12,coreTup.getOfflineFileInstance();case 12:a=e.sent,a.refreshToken(r.crypt_token);case 14:case"end":return e.stop()}},e,i)})),1e3*t);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.stopRefreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("stop refresh middle-end [token]"),n.refreshTokenTimer&&(clearInterval(n.refreshTokenTimer),n.refreshTokenTimer=null);case 2:case"end":return e.stop()}},e,i)})),n.requestOauthUrl=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,a,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=u.company,d=void 0===c?"":c,l=u.account,f=void 0===l?"":l,p=u.clientType,_=void 0===p?1:p;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("requestOauthUrl"),e.next=3,(0,w.getLoginModel)();case 3:return t=e.sent,r=t.serverAddress,a="https://"+r+"/rest/usg/sso/v1/auth/authorizeInfo?domain="+d+"&username="+f+"&clientType="+_,s=constant.REQUEST_TYPE.GET,e.abrupt("return",coreHttp.sendSyncRequest({url:a,type:s}).then(function(e){return n.dealWithCloudPortalOauth(e)}));case 8:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.oAuthLogin=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.domain,a=r.userTicket,s=r.serverAddress,u=r.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("oAuthLogin"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,t.serverAddress=s,t.serverPort=u,t.domain=n,t.userTicket=a,t.authType=1,coreAccount.login({});case 10:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.getUrlHost=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=2;break}return e.abrupt("return","");case 2:return r=document.createElement("a"),r.href=t,e.abrupt("return",r.hostname||t);case 5:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.dealWithRequestResult=function(e){var t=0,r="",n=!1,a={};try{if(0===e.result)switch(e.param.resp_code){case 200:a=JSON.parse(e.param.recv_body),t=a.code||a.errorCode||0;break;case 302:t=302;break;default:t=-1}else t=-1;h.info("dealWithRequestResult: resp_code="+(e.param&&e.param.resp_code)+",result="+e.result)}catch(e){h.error("dealWithRequestResult",e.toString()),t=-1}switch(parseInt(t)){case-1:r=language.CALL_CALLING_FAILED;break;case 0:case 200:case 302:n=!0;break;case 1024:r=language.VERIFICATION_CODE_ERROR_SERVER;break;case 1101:r=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY;break;case 1103:r=language.LOGIN_USERPWD_ERROR;break;case 1146:r=language.LOGIN_ERR_ACCOUNT_LOCKED;break;case 2e3:case 2030:r=language.VERIFICATION_CODE_ERROR_SERVER;break;case 3005:r=language.VERIFICATION_CODE_ERROR_FREQUENTLY;break;case 3007:r=language.VERIFICATION_CODE_ERROR_SMS_FAILED;break;case 3010:r=language.VERIFICATION_CODE_ERROR_NUMBER_INCORRECT;break;case 3008:r=language.VERIFICATION_CODE_ERROR;break;case 10005:r=language.VERIFICATION_CODE_ERROR_NUMBER_DISABLED;break;case 10008:r=language.LOGIN_E_ERR_USER_NOT_EXISTS;break;default:r=language.CALL_CALLING_FAILED}return h.info("dealWithRequestResult: code="+t+",message="+(a.message||a.errorMessage)),{code:t,result:n,message:r,recv_body:a}},n.dealWithCloudPortalOauth=function(e){var t=0,r="",n=!1,a={};try{if(0===e.result)switch(e.param.resp_code){case 200:a=JSON.parse(e.param.recv_body),t=parseInt(a.returnCode)||0;break;case 302:t=302;break;default:t=-1}else t=-1;h.info("dealWithCloudPortalOauth: resp_code="+(e.param&&e.param.resp_code)+",result="+e.result)}catch(e){h.error("dealWithCloudPortalOauth",e.toString()),t=-1}switch(t){case-1:r=language.CALL_CALLING_FAILED;break;case 0:r=language.EADDR_SUCCESS,n=!0;break;case 1:r=language.REQUEST_ERROR;break;case 2:r=language.INNER_ERROR;break;case 3:r=language.WITHDRAW_PARAMETER_ERROR;break;case 4:r=language.REQUEST_ILLEGAL;break;case 5:r=language.FORGET_PWD_E_ERR_BAD_ACCESS_DURING_UPGRADE;break;case 206010014:case 206010023:r=language.COMPANY_NO_EXIT;break;case 20603e4:r=language.USER_DOES_NOT_EXIST;break;default:r=language.CALL_CALLING_FAILED}return h.info("dealWithCloudPortalOauth: code="+t+",message="+a.returnMessage),{code:t,result:n,message:r,recv_body:a}},a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(E.default),m=void 0;t.getMiddleEndApi=function(){return isNullOrEmpty(m)&&(m=new I),m}},362:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(){A.info("userClick  showSettingMenu  login setting");var e=window.remote.Menu,t=[{label:language.MOBILE_BASIC_SETTINGS,type:"normal",click:i},{label:language.COLLECT_LOG_FILES,type:"normal",click:s},{label:language.SOFT_COPYRIGHT_DESCRIPTION,type:"normal",click:u},{label:language.PRIVACY_TITLE,type:"normal",click:c}];window.CLIENTCONFIG.ISWIN&&t.push({label:language.NET_DETECT,type:"normal",click:m}),e.buildFromTemplate(t).popup(remote.getCurrentWindow())}function i(){A.info("goToLoginSetting"),window.goRoute("login/loginSetting")}function s(){A.info("collectLogsAndOpen"),coreLog.collectLogsAndOpen()}function u(){A.info("goToLoginCopyright"),window.goRoute("login/LoginCopyright")}function c(){A.info("goToLoginPrivacy"),window.goRoute("login/LoginPrivacy")}function d(){A.info("userClick click minimize btn"),appService.minimize()}function l(e,t){(0,b.getSyncLoginModel)().loginDisable||y.changeLoginInfo((0,g.default)({},e,t))}function f(e,t){t.target&&l(e,t.target.value||"")}function p(e){var t=$getState(),r=t.common,n=r.isShowModal,a=r.isShowNotifyModal,o=t.setting.isShowChangePassword,i=t.dialogModal.isShowDialog;e.altKey&&115===e.keyCode&&((0,O.getCloseAppWays)(),reactStopPropagation(e),e.preventDefault()),a||n||i||13!==e.keyCode||"login"!==window.getRoute()||o||I()}Object.defineProperty(t,"__esModule",{value:!0}),t.removeKeyDownListener=t.addKeyDownListener=t.forgetPwd=t.noLoginJoinConference=t.doLogin=void 0;var _=r(132),g=a(_),w=r(1),v=a(w),E=r(2),h=a(E),I=t.doLogin=function(){var e=(0,h.default)(v.default.mark(function e(){var t,r,n,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("userClick  doLogin  login btn"),e.next=3,(0,b.getLoginModel)();case 3:if(t=e.sent,!(r=t.loginDisable)){e.next=8;break}return A.info("doLogin loginDisable",r),e.abrupt("return");case 8:return e.next=10,C.checkLoginInfo();case 10:if(n=e.sent,document.activeElement.blur(),!n){e.next=19;break}return t.authType=0,e.next=16,N.login();case 16:return e.abrupt("return",e.sent);case 19:a=language.ERROR_ACCOUNT_PWD,window.isHubEnv?t.maxhubLoginError={serverType:0,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR}:window.alert(language.ERROR_ACCOUNT_PWD);case 21:throw"";case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,h.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.initNetDetect)();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:window.goRoute("login/NetDetection");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.noLoginJoinConference=function(){var e=(0,h.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("userClick noLoginJoinConference  login page join conf"),e.next=3,(0,S.getNickName)();case 3:return e.next=5,coreConf.getConfInfoFromDb();case 5:return e.next=7,coreConf.changeConfInfoCardState(!1);case 7:window.goRoute("login/noLoginJoinConference");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.forgetPwd=function(){var e=(0,h.default)(v.default.mark(function e(){var t,r,n,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.info("userCLick  forgetPwd  login page forget xx"),e.next=3,(0,b.getLoginModel)();case 3:t=e.sent,r=t.serverAddress,n=t.serverPort,a=r+":"+n,y.cannotLogin(a);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.addKeyDownListener=function(){var e=(0,h.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:k=t,document.addEventListener("keydown",p);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.removeKeyDownListener=function(){var e=(0,h.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:k=Noop,document.removeEventListener("keydown",p);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.showSettingMenu=o,t.miniApp=d,t.valueChange=l,t.inputValueChange=f;var L=r(311),C=n(L),T=r(185),N=n(T),S=r(229),O=r(312),R=r(166),y=n(R),x=r(364),b=r(164),A=coreLogger.getLogger("logic")("login/uiController"),k=Noop},363:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkStatusOptions=t.SaveSigInfoAndQuit=t.saveUserInfo=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(136),c=coreLogger.getLogger("logic")("main/myInfo"),d=(t.saveUserInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.info("saveUserInfo"),e.abrupt("return",d(t));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.SaveSigInfoAndQuit=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.info("userClick  tap myInfo signature save btn"),d(t),window.history.back();case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getMyInfo)();case 2:if(r=e.sent,t!==r.signature){e.next=5;break}return e.abrupt("return");case 5:return n=["account","staff_no","name","native_name","q_pin_yin","gender","birthday","age","bind_no","mobile","home_phone","office_phone","short_phone","other_phone","voip","ip_phone","fax","email","website","signature","desc","address","image_id","postcode","is_security","title","dept_id","dept_name_en","dept_name_cn","image_sync_time","old_account","state","modify_time","other_phone2","other_mobiles"],a={},n.forEach(function(e){a[e]=isNullOrEmpty(r[e])?"":r[e]}),a.signature=t,e.next=11,(0,u.getLoginModel)();case 11:if(i=e.sent,!(s=i.isSupportAS)){e.next=19;break}return e.next=16,coreContact.uploadUserInfo({signature:t});case 16:e.t0=e.sent,e.next=22;break;case 19:return e.next=21,coreIm.setUserInfo(a);case 21:e.t0=e.sent;case 22:c=e.t0,(c&&c.result===constant.ERROR_CODE.Success||s&&c)&&(r.signature=t,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME&&coreContact.setSign(t));case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.checkStatusOptions=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getMyInfo)();case 2:return t=e.sent,e.next=5,coreDb.queryUserConfig({key:"CustomStatus"});case 5:r=e.sent,isNullOrEmpty(r)||(n=JSON.parse(r.value),t.statusOptions=n,c.info("check Status Options from storage sucess!"));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},364:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleClearData=t.startDetect=t.stopDetect=t.handleDetectDataNotify=t.initNetDetect=t.updataBtns=void 0;var a=r(123),o=n(a),i=r(69),s=n(i),u=r(1),c=n(u),d=r(2),l=n(d),f=r(261),p=r(261),_=coreLogger.getLogger("logic")("login/loginNetDetect"),g=t.updataBtns=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.BTN_STATUS.START,r=!1,n={cancel:{visible:!1,disabled:!1,class:"btn-cancel"},detect:{visible:!1,disabled:!1,class:"btn-detect"},retry:{visible:!1,disabled:!1,class:"btn-detect"},stop:{visible:!1,disabled:!1,class:"btn-stop"},done:{visible:!1,disabled:!1,class:"btn-detect"}};switch(t){case constant.BTN_STATUS.START:n.cancel.visible=!0,n.cancel.disabled=!1,n.detect.visible=!0,n.detect.disabled=!e,r=!0;break;case constant.BTN_STATUS.DETECTING:n.cancel.visible=!0,n.cancel.disabled=!0,n.stop.visible=!0,n.stop.disabled=!1,r=!0;break;case constant.BTN_STATUS.DONE:n.retry.visible=!0,n.retry.disabled=!1,n.done.visible=!0,n.done.disabled=!1,r=!0}r&&$dispatch(coreUi.setDetectBtns(n))},w=(t.initNetDetect=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.info("initNetDetect"),e.next=3,(0,f.detectInit)();case 3:if(t=e.sent,0===t.result){e.next=10;break}return _.info("initNetDetect detectInitRet ERR = "+t.result),e.next=8,(0,p.detectUnInit)();case 8:return L(t.result),e.abrupt("return",!1);case 10:return e.next=12,(0,f.setCmptEvent)({OnDetectDataNotify:v});case 12:return r={server_port:10100},e.next=15,(0,f.detectStartServer)(r);case 15:if(n=e.sent,0===n.result){e.next=24;break}return _.info("initNetDetect detectStartServerRet ERR = "+n.result),e.next=20,(0,p.detectStopServer)();case 20:return e.next=22,(0,p.detectUnInit)();case 22:return L(n.result,r.server_port),e.abrupt("return",!1);case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),-1),v=t.handleDetectDataNotify=function(e){_.info("handleDetectDataNotify data = "+(0,s.default)(e));var t=e.param,r=t.avg_delay_time,n=t.avg_jitter_time,a=t.avg_recv_loss_rate,o=t.avg_send_loss_rate,i=t.current_level,u=t.max_delay_time,c=t.max_jitter_time,d=t.max_recv_cont_loss_pkts,l=t.max_recv_loss_rate,f=t.max_send_cont_loss_pkts,p=t.max_send_loss_rate,v=(t.total_level,t.total_recv_pkt_loss_seconds),I=t.total_send_pkt_loss_seconds,m=$getState().common,L=m.curResLevel,C=m.ipDetectResList,T=m.netdetectMode,N=m.bandwidth,S=m.maxDelay,O=m.maxLoss,R=m.maxContinuousLoss,y=m.maxJitter,x=[].concat(C),b=T===constant.NET_DETECT_MODE.ADVANCED_MODE;if(b){u&&u>S&&(S=u,$dispatch(coreUi.setMaxDelay(S))),c&&c>y&&(y=c,$dispatch(coreUi.setMaxJitter(y)));var A=Math.max(f,d);A&&A>R&&(R=A,$dispatch(coreUi.setMaxContinuousLoss(R)));var k=Math.max(l,p);k&&k>O&&(O=k,$dispatch(coreUi.setMaxLoss(O)))}var P="  "+language.CALL_MEDIA_INFO_LOST+"(%):"+language.NET_DETECT_INFO_AVG+Math.max(a,o)+", "+language.NET_DETECT_INFO_MAX+Math.max(l,p)+" "+(b?"("+O+")":"")+"\n  "+language.LANG_QOS_DELAY+"  (ms):"+language.NET_DETECT_INFO_AVG+n+", "+language.NET_DETECT_INFO_MAX+c+" "+(b?"("+y+")":"")+"\n  "+language.LANG_QOS_JIITER+"  (ms):"+language.NET_DETECT_INFO_AVG+r+", "+language.NET_DETECT_INFO_MAX+u+" "+(b?"("+S+")":"")+"\n  "+language.NET_DETECT_INFO_MAX_CONTINUOUS_LOSS+": "+Math.max(d,f)+" "+(b?"("+R+")":"")+"\n  "+language.NET_DETECT_INFO_TOTAL_LOSS_CNT+": "+Math.max(v,I);if(T===constant.NET_DETECT_MODE.ADVANCED_MODE)clearTimeout(w),x[0].col=1,x[0].level=N,x[0].cont=P,$dispatch(coreUi.setIpDetectResList(x)),h=100,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+h+"%)")),w=setTimeout(function(){_.info("timeoutTimer curResLevel = "+L),E(!0)},2e4);else if(++L===i){clearTimeout(w),$dispatch(coreUi.setCurResLevel(i));for(var M=0;M<x.length;M++)if(x[M].level===i){if(x[M].cont===language.NET_DETECT_INFO_NOT_DETECT)return void _.info("");5!==i&&(x[M+1].cont=language.NET_DETECT_INFO_DETECTING+"...",x[M+1].col=1),x[M].cont=P,x[M].col=1;break}$dispatch(coreUi.setIpDetectResList(x)),5===i?(g(!0,constant.BTN_STATUS.DONE),$dispatch(coreUi.setDisableIPInput(!1)),$dispatch(coreUi.setipDetectTipCont(language.PROMPT_OPEN_NETDETECT))):w=setTimeout(function(){_.info("timeoutTimer curResLevel = "+L),E(!0)},2e4)}},E=t.stopDetect=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n,a,o,i,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.info("stopDetect detectStopClient"),t=$getState().common,r=t.curResLevel,n=t.ipDetectResList,a=t.netdetectMode,o=[].concat(n),clearTimeout(w),clearInterval(I),a!==constant.NET_DETECT_MODE.ADVANCED_MODE){e.next=11;break}return e.next=8,(0,p.detectStopClientContinue)();case 8:o[0].level!==r&&(o[0].cont=language.NET_DETECT_INFO_NOT_DETECT,o[0].col=0),e.next=15;break;case 11:if(a!==constant.NET_DETECT_MODE.NORMAL_MODE){e.next=15;break}return e.next=14,(0,p.detectStopClient)();case 14:for(i=0;i<o.length;i++)s&&i===r?(o[i].cont=language.NET_DETECT_INFO_TIME_OUT,o[i].col=2):i>=r&&(o[i].cont=language.NET_DETECT_INFO_NOT_DETECT,o[i].col=0);case 15:$dispatch(coreUi.setIpDetectResList(o)),g(!0,constant.BTN_STATUS.START),$dispatch(coreUi.setipDetectTipCont(language.PROMPT_OPEN_NETDETECT)),$dispatch(coreUi.setDisableIPInput(!1));case 19:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=0,I=-1,m=(t.startDetect=function(){var e=(0,l.default)(c.default.mark(function e(){var t,r,n,a,i,u,d,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().common,r=t.ipValue,n=t.packetLen,a=t.bandwidth,i=t.netdetectMode,u={str_server_ip:r,server_port:10100,client_port:10102},i===constant.NET_DETECT_MODE.ADVANCED_MODE&&(u=(0,o.default)(u,{pkt_len:parseInt(n),level:parseInt(a)})),_.info("startDetect param = "+(0,s.default)(u)),d=-1,i!==constant.NET_DETECT_MODE.ADVANCED_MODE){e.next=11;break}return e.next=8,(0,p.detectStartClientContinue)(u);case 8:d=e.sent,e.next=15;break;case 11:if(i!==constant.NET_DETECT_MODE.NORMAL_MODE){e.next=15;break}return e.next=14,(0,p.detectStartClient)(u);case 14:d=e.sent;case 15:if(0===d.result){e.next=22;break}return _.info("startDetect detectStartClientRet ERR = "+d.result),e.next=19,(0,p.detectStopClient)();case 19:return l=u.client_port,L(d.result,l+"|"+(l+1)+"|"+(l+2)),e.abrupt("return",!1);case 22:clearTimeout(w),w=setTimeout(function(){var e=$getState().common.curResLevel;_.info("timeoutTimer curResLevel = "+e),0===e&&E(!0)},2e4),i===constant.NET_DETECT_MODE.ADVANCED_MODE?($dispatch(coreUi.setMaxDelay(0)),$dispatch(coreUi.setMaxJitter(0)),$dispatch(coreUi.setMaxLoss(0)),$dispatch(coreUi.setMaxContinuousLoss(0)),h=0,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+h+"%)")),I=setInterval(function(){h<99?$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+ ++h+"%)")):h>=100&&(h=0,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+ ++h+"%)")))},100)):i===constant.NET_DETECT_MODE.NORMAL_MODE&&$dispatch(coreUi.setipDetectTipCont("")),g(!0,constant.BTN_STATUS.DETECTING),$dispatch(coreUi.setCurResLevel(0)),$dispatch(coreUi.setIpDetectResList(m())),$dispatch(coreUi.setDisableIPInput(!0)),$dispatch(coreUi.setMaxDelay(0)),$dispatch(coreUi.setMaxLoss(0));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState().common,t=e.netdetectMode,r=e.bandwidth;if(t===constant.NET_DETECT_MODE.ADVANCED_MODE){var n=1===r?"0.5M:":2===r?"1M:":3===r?"1.5M:":4===r?"2M:":5===r?"4M:":"8M:",a=r+1;return $dispatch(coreUi.setCurResLevel(r)),[{title:n,cont:"",col:1,level:a}]}for(var o=[],i=1;i<6;i++){var s="",u=language.NET_DETECT_INFO_PENDING_DETECT,c=i,d=0;5!==i?1===i?(s="512 Kbit/s:",u=language.NET_DETECT_INFO_DETECTING+"...",d=1):s=512*i+" Kbit/s:":s="4096 Kbit/s:",o.push({title:s,cont:u,col:d,level:c})}return o}),L=(t.handleClearData=function(){var e=(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.detectStopClient)();case 2:return e.next=4,(0,p.detectStopServer)();case 4:return e.next=6,(0,p.detectUnInit)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="";switch(e){case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_UNINIT_ERROR:r=language.DETECT_UNINIT_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_THREAD_ERROR:r=language.DETECT_THREAD_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_STARTED_ERROR:r=language.DETECT_STARTED_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_ERROR:r=language.DETECT_SOCKET_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_CONN_ERROR:r=language.DETECT_SOCKET_CONN_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_BIND_ERROR:r=language.DETECT_SOCKET_BIND_ERROR_INFO+t;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_TIMEOUT_ERROR:r=language.DETECT_TIMEOUT_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SRVBUSY_ERROR:r=language.DETECT_SRVBUSY_ERROR_INFO;break;default:r=language.DETECT_THREAD_ERROR_DEFOULT}window.alert(r)})},405:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(119),c=n(u),d=r(4),l=n(d),f=r(120),p=n(f),_=r(121),g=n(_),w=function(e){function t(){var e,r,n,a,i=this;(0,l.default)(this,t);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(d))),n.loginToUportal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.refreshTokenCallback=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setLoginProxy=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.uportalAllonline=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.switchProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.resetProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=w},406:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handlesipconfinfo=t.setloginNotifyFunc=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=(coreLogger.getLogger("model")("model/callService/index"),t.setloginNotifyFunc=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:t=e.sent,t.setNotifyFunc(360474,u);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handlesipconfinfo=function(e){coreCommon.Observer.publish("TempSipConfInfo",e)})},407:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.startLoginDownLoadCaCert=void 0;var a=r(1),o=n(a),i=r(69),s=n(i),u=r(3),c=n(u),d=r(142),l=n(d),f=r(2),p=n(f),_=coreLogger.getLogger("login")("caCert");t.startLoginDownLoadCaCert=function(){var e=(0,p.default)(o.default.mark(function e(t){var r,n,a,i,u,d,f,p=t.account,g=t.password,w=t.serverAddress,v=t.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.info("startLoginDownLoadCaCert port is:",v),_.info("startLoginDownLoadCaCert port type is:",void 0===v?"undefined":(0,l.default)(v)),v&&v instanceof String&&(v=parseInt(v)),r={auth_type:0,user_agent:window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC,user_tiket:"1",auth_info:{user_name:p,password:g},auth_server:{server_type:0,server_url:w,server_port:v,server_version:"V6R6C00"}},n=window.EXEC_PATH,a={file_path:n,server_port:v,server_addr:w},e.next=8,coreTup.getUportalInstance();case 8:return i=e.sent,u=new c.default(function(e,t){i.downLoadCaCert(a,r,function(t){_.info("download ca cert files, ret=",(0,s.default)(t)),e(t)})}),e.next=12,u;case 12:return d=e.sent,f=d.param,e.abrupt("return",f);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserConfigFromDB=void 0;var n=r(409),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);t.loadUserConfigFromDB=a.loadUserConfigFromDB},409:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserConfigFromDB=void 0;var a=r(1),o=n(a),i=r(123),s=n(i),u=r(2),c=n(u),d=r(136),l=coreLogger.getLogger("logic")("login");t.loadUserConfigFromDB=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,coreSecurity.getPasswordManager();case 3:r=e.sent,coreDb.queryUserConfigList({all:""}).then(function(e){var n={};-1===e.findIndex(function(e){return"confPageShowType"===e.key})&&(l.info("db can not find the value of confPageShowType"),$dispatch(coreUi.changeConfPageShowType(!1))),e.forEach(function(e){if(0===e.key.indexOf("Device.ComCfg")&&(n[e.key]=e.value,t++),0===e.key.indexOf("Device.UICfg")&&coreCwmp.dealWithUICfgParam({paramName:e.key,paramValue:e.value}),"CHRPassword"===e.key){var a=JSON.parse(e.value);a.cipher&&a.salt&&r.setCipherPassword(e.key,a.cipher,a.salt)}if("experienceConfInfo"===e.key){var o=JSON.parse(e.value);o.cipher&&o.salt&&r.setCipherPassword("experienceConfPwd",o.cipher,o.salt),$dispatch(coreUi.changeExperienceConfId(o.confid))}if("isRemindNotNotify"===e.key&&("true"===e.value?$dispatch(coreUi.isNotNotifyChangePassword(!0)):$dispatch(coreUi.isNotNotifyChangePassword(!1))),"isOpenShock"===e.key&&("true"===e.value?$dispatch(coreUi.bOpenShock(!0)):$dispatch(coreUi.bOpenShock(!1))),"isIMRecieveRing"===e.key&&("true"===e.value?$dispatch(coreUi.bIMRecieveRing(!0)):$dispatch(coreUi.bIMRecieveRing(!1))),"isCallCommingRing"===e.key&&("true"===e.value?$dispatch(coreUi.bCallCommingRing(!0)):$dispatch(coreUi.bCallCommingRing(!1))),"checkedLanguage"===e.key&&$dispatch(coreUi.languageChooseValue(2===parseInt(e.value)?1:parseInt(e.value))),"hasOpenPush"===e.key&&("true"===e.value?$dispatch(coreUi.changeHasOpenPush(!0)):$dispatch(coreUi.changeHasOpenPush(!1))),"cmdkey"===e.key){var i=JSON.parse(e.value);void 0!==i[0]&&void 0!==i[1]&&void 0!==i[0].RPCName&&void 0!==i[1].RPCName&&(i[0].RPCName="Download",i[1].RPCName="Upload",$dispatch(coreUi.updateCmdKey(i)))}if("isAutoCollectLogs"===e.key){var s=coreSetting.stringToBoolean(e.value);(0,d.getMyInfo)().then(function(e){e.isAutoCollectLogs=s})}if("hasAllowCollectLogs"===e.key){var u=coreSetting.stringToBoolean(e.value);(0,d.getMyInfo)().then(function(e){e.hasAllowCollectLogs=u})}if("isAutoAcceptConf"===e.key){var c=coreSetting.stringToBoolean(e.value);(0,d.getMyInfo)().then(function(e){e.isAutoAcceptConf=c})}if("enableDoubleScreen"===e.key){var f=coreSetting.stringToBoolean(e.value);$dispatch(coreUi.changeEnableDoubleScreen(f))}"confPageShowType"===e.key&&(l.info("the value of confPageShowType is",e.value),$dispatch(coreUi.changeConfPageShowType(e.value)))}),t>0&&(0,s.default)(window.CLIENTCONFIG,n)});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},410:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(119),c=n(u),d=r(4),l=n(d),f=r(120),p=n(f),_=r(121),g=n(_),w=function(e){function t(){var e,r,n,a,i=this;(0,l.default)(this,t);for(var u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(d))),n.requestIDVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.requestTenantUserList=function(){var e=(0,s.default)(o.default.mark(function e(t){t.phoneNumber,t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.ssoLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){t.loginName,t.password,t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.startRefreshMiddleEndToken=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.stopRefreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.requestOauthUrl=function(){var e=(0,s.default)(o.default.mark(function e(t){t.company,t.account;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.oAuthLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){t.domain,t.code,t.serverAddress,t.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.getUrlHost=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=w},411:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=this,r=l.default.createElement("div",{className:"upgrade-window-content-text-wrap"},l.default.createElement("ul",{className:"upgrade-window-content-text-detail-ul"},l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_1),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_2),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_3)));window.confirm(r,"EMUI_COME_CALL_NOTIFY_TITLE",!0,{leftButton:language.BTN_ENSURE_TO_SKIP,rightButton:language.BTN_ENSURE_TO_SET}).then(function(){var r=(0,c.default)(s.default.mark(function r(n){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=n.ret,a?(coreDb.saveLoginSetting({key:f,value:"1"}),window.webView.goToSystemCloudLinkSetting()):(e+=1,coreDb.saveLoginSetting({key:p,value:e.toString()}));case 2:case"end":return t.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}())}function o(e){var t=this,r=l.default.createElement("div",{className:"upgrade-window-content-text-wrap"},l.default.createElement("ul",{className:"upgrade-window-content-text-detail-ul"},l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_1),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_2),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_3)));window.confirm(r,"EMUI_COME_CALL_NOTIFY_TITLE",!0,{leftButton:language.BTN_ENSURE_TO_SKIP,rightButton:language.BTN_ENSURE_TO_SET}).then(function(){var r=(0,c.default)(s.default.mark(function r(n){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=n.ret,a?(coreDb.saveLoginSetting({key:f,value:"1"}),window.webView.goToSystemCloudLinkSetting()):(e+=1,coreDb.saveLoginSetting({key:p,value:e.toString()}));case 2:case"end":return t.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}())}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHuaweiPhonePushSetting=t.DB_KEY_SKIP_SETTING_COUNT=t.DB_KEY_HAS_SHOW_SETTING_DIALOG=void 0;var i=r(1),s=n(i),u=r(2),c=n(u),d=r(118),l=n(d),f=t.DB_KEY_HAS_SHOW_SETTING_DIALOG="has_show_setting_dialog",p=t.DB_KEY_SKIP_SETTING_COUNT="has_skip_setting_count";t.checkHuaweiPhonePushSetting=function(){coreDb.queryLoginSetting({key:f}).then(function(e){var t="0";isNullOrEmpty(e)||!e.hasOwnProperty("key")||!e.hasOwnProperty("value")||isNullOrEmpty(e.key)||isNullOrEmpty(e.value)||(t=e.value),"1"!==t&&coreDb.queryLoginSetting({key:p}).then(function(e){var t=0;isNullOrEmpty(e)||isNullOrEmpty(e.key)||isNullOrEmpty(e.value)||(t=parseInt(e.value)),t<2&&appService.getEMUI().then(function(e){""!==e&&(e.includes("5.")?o(t):a(t))})})})}},412:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setCmptEvent=t.detectStopServer=t.detectStartServer=t.detectStopClientContinue=t.detectStartClientContinue=t.detectStopClient=t.detectStartClient=t.detectUnInit=t.detectInit=t.checkCertificateOverdue=t.verifyCertificate=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=coreLogger.getLogger("logic")("login/cmpt");t.verifyCertificate=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&u.info("verifyCertificate param error!"),e.next=3,coreTup.getCmptInstance();case 3:return r=e.sent,e.next=6,r.verifyCertificate(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.checkCertificateOverdue=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&u.info("checkCertificateOverdue param error!"),e.next=3,coreTup.getCmptInstance();case 3:return r=e.sent,e.next=6,r.checkCertificateOverdue(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectInit=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectInit();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectUnInit=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectUnInit();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartClient=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return r=e.sent,e.next=5,r.detectStartClient(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopClient=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopClient();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartClientContinue=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return r=e.sent,e.next=5,r.detectStartClientContinue(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopClientContinue=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopClientContinue();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartServer=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return r=e.sent,e.next=5,r.detectStartServer(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopServer=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopServer();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setCmptEvent=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return r=e.sent,e.next=5,r.setCmptEvent(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},413:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return-1===window.CLIENTCONFIG.MENU_LIST.findIndex(function(t){return t===e})?0:1},a=[{route:"recent",isShow:n("recent"),enabled:1,dataTestid:"recentinfo000123"},{route:"conference",isShow:n("conference"),enabled:1,dataTestid:"conferenceinfo000123"},{route:"contactGroups",isShow:n("contactGroups"),enabled:1,dataTestid:"contactgpinfo000123"},{route:"work",isShow:n("work"),enabled:1,dataTestid:"work000123"}];t.setAppConfigList=function(){if(window.navBarConfiglist=a.concat(),!window.CLIENTCONFIG.USE_IM){var e=window.navBarConfiglist.findIndex(function(e){return"recent"===e.route});window.navBarConfiglist.splice(e,1);var t=window.navBarConfiglist[0];window.navBarConfiglist[1]=window.navBarConfiglist[1],window.navBarConfiglist[0]=t}if(!window.CLIENTCONFIG.USE_MEETING){var r=window.navBarConfiglist.findIndex(function(e){return"conference"===e.route});window.navBarConfiglist.splice(r,1)}};window.navBarConfiglist=a},69:function(e,t,r){e.exports={default:r(70),__esModule:!0}},70:function(e,t,r){var n=r(8),a=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}}});