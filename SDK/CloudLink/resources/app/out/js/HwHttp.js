webpackJsonp([21],{101:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.HwHttpSdk=void 0;var o=r(120),a=n(o),u=r(4),s=n(u),i=r(1801),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),c=r(1345),d=n(c);e.HwHttpSdk=function t(){(0,s.default)(this,t),(0,a.default)(this,p),this.hwTupHttpTransSdk=d.default}},114:function(t,e,r){t.exports=r(0)(0)},120:function(t,e,r){t.exports=r(0)(277)},123:function(t,e,r){t.exports={default:r(155),__esModule:!0}},132:function(t,e,r){t.exports={default:r(192),__esModule:!0}},134:function(t,e,r){t.exports=r(0)(155)},1345:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(132),a=n(o),u=r(123),s=n(u),i=r(1),p=n(i),c=r(120),d=n(c),f=r(2),l=n(f),_=r(3),h=n(_),y=r(4),v=n(y),w=r(5),m=n(w),x=window.Logger("tup")("httptrans"),g=coreCommon.getTupProtocolClass(),P=function(){function t(e){var r=this;return(0,v.default)(this,t),new h.default(function(){var t=(0,l.default)(p.default.mark(function t(n,o){var a;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={key:constant.TupModuleKey.httptrans,moduleName:"tup_httptrans_service_protocol",webSocketUri:""},(0,d.default)(a,e),t.next=4,new g(a);case 4:r.tupProtocol=t.sent,n(r);case 6:case"end":return t.stop()}},t,r)}));return function(e,r){return t.apply(this,arguments)}}())}return(0,m.default)(t,[{key:"sendMessage",value:function(t){var e=this;return new h.default(function(r,n){var o={resolve:r,data:t,timeoutTime:3e4};e.tupProtocol.setRspFuncsAndSendMessage(o)})}},{key:"setNotifyFunc",value:function(t,e){this.tupProtocol.setNotifyFunc(t,e)}},{key:"httpTransInit",value:function(t){x.info("start tup_httptrans_init");var e={description:"tup_http_init",cmd:1376257};return this.sendMessage(e)}},{key:"httpTransUninit",value:function(){x.info("start tup_httptrans_uninit");var t={description:"tup_http_uninit",cmd:1376258};return this.sendMessage(t)}},{key:"httpForceUninit",value:function(t){x.info("start tup_http_forced_uninit");var e={description:"tup_http_forced_uninit",cmd:1376264};return this.sendMessage(e)}},{key:"httpUploadFile",value:function(t,e,r,n,o,a){var u={description:"tup_http_upload_file",cmd:1376260,param:{url:t,auth_info:{mode:1,username:e,password:r},config_param:{proxy_param:{ip:a.proxyAddress,port:parseInt(a.proxyPort),auth_info:{username:a.proxyAccount,password:a.proxyPassword}}},file_path:n,mult_part:{key:"Account",content:(0,s.default)(o)}}},i=$getState().myInfo.account;return-1!==n.indexOf(i)&&(n=n.replace(i,"***")),x.info("tup_http_upload_file_params, url=",t),x.info("tup_http_upload_file_params, filePath=",n),this.sendMessage(u)}},{key:"sendSyncRequest",value:function(t){var e=t.url,r=t.type,n=t.body,o=t.header,u=void 0===o?{}:o,s=t.proxyInfo,i=t.cipherlist,p={description:"tup_http_syn_send",cmd:1376263,param:{req_param:{url:e,type:r,body:n,header:(0,a.default)(u).map(function(t){return{name:t,value:u[t]}}),auth_info:{mode:0,username:"",password:""}},config_param:{proxy_param:{ip:s.proxyAddress,port:parseInt(s.proxyPort)||0,auth_info:{username:s.proxyAccount,password:s.proxyPassword}},tls_param:{ca_cert_path:"",client_cert_path:"",client_key_path:"",tls_mode:0,vertfy_server_mode:0},cipherlist:i,tcp_timeout:5,req_timeout:30}}};return this.sendMessage(p)}},{key:"httpDownloadFile",value:function(t,e,r,n,o,u,s){x.info("start tup_http_download_file");var i={description:"tup_http_download_file",cmd:1376265,param:{url:t,body:r,header:(0,a.default)(n).map(function(t){return{name:t,value:n[t]}}),auth_info:{mode:1,username:o,password:u},config_param:{proxy_param:{ip:s.proxyAddress,port:parseInt(s.proxyPort),auth_info:{username:s.proxyAccount,password:s.proxyPassword}},tls_param:{ca_cert_path:"",client_cert_path:"",client_key_path:"",tls_mode:0,vertfy_server_mode:0},cipherlist:[50331695,50331701,50331708,50331709],tcp_timeout:5,req_timeout:5},keep_download:2,file_path:e}};return this.sendMessage(i)}}]),t}();e.default=P},142:function(t,e,r){var n=r(10),o=r(8),a=r(144);t.exports=function(t,e){var r=(o.Object||{})[t]||Object[t],u={};u[t]=e(r),n(n.S+n.F*a(function(){r(1)}),"Object",u)}},144:function(t,e,r){t.exports=r(0)(51)},155:function(t,e,r){var n=r(8),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},179:function(t,e,r){t.exports=r(0)(63)},1801:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.handleUploadChrFile=e.uninitHttpTrans=e.initHttpTrans=e.forceUninitHttp=void 0;var o=r(1),a=n(o),u=r(123),s=n(u),i=r(2),p=n(i),c=r(114),d=(n(c),r(1345)),f=n(d),l=window.Logger("logic")("httptrans"),_=null,h=function(t){var e=t.param.rsp_body.rsp_code;200!==e?l.info("tup upload chr files to server failed, rsp_code=",e):l.info("tup upload chr files to server success, rsp_code=",e)};e.forceUninitHttp=function(){var t=(0,p.default)(a.default.mark(function t(){var e;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("ios"!==window.CLIENTCONFIG.PLATFORM||window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=8;break}return t.next=3,new f.default;case 3:return _=t.sent,t.next=6,_.httpForceUninit();case 6:e=t.sent,0!==e.result?l.info("force uninit tup http trans failed for ios, res=",(0,s.default)(e)):l.info("force uninit tup http trans success for ios");case 8:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}(),e.initHttpTrans=function(){var t=(0,p.default)(a.default.mark(function t(){var e;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new f.default;case 2:return _=t.sent,t.next=5,_.httpTransInit();case 5:e=t.sent,0!==e.result?l.info("init tup http trans failed, res=",(0,s.default)(e)):(l.info("init tup http trans success",(0,s.default)(e)),_.setNotifyFunc(1376289,h));case 7:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}(),e.uninitHttpTrans=function(){var t=(0,p.default)(a.default.mark(function t(){var e;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new f.default;case 2:return _=t.sent,t.next=5,_.httpTransUninit();case 5:e=t.sent,0!==e.result?l.info("uninit tup http trans failed, res=",(0,s.default)(e)):l.info("uninit tup http trans success",(0,s.default)(e));case 7:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}(),e.handleUploadChrFile=function(){var t=(0,p.default)(a.default.mark(function t(e){var r,n,o,u,s,i,p,c,d,h,y,v,w,m,x,g,P,C,k,A,N,T;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=window.CLIENTCONFIG["Device.ComCfg.CHR.CHRAddress"],n=window.CLIENTCONFIG["Device.ComCfg.CHR.CHRName"],t.next=4,coreSecurity.PasswordManager.getPassword("CHRPassword");case 4:if(o=t.sent,u=e.path,s=isNullOrEmpty(u),i=isNullOrEmpty(r),p=isNullOrEmpty(n),c=isNullOrEmpty(o),!(s||i||p||c)){t.next=13;break}return l.info("CHR basci info is null, address=",i+", userName=",p+", [psd]=",c),t.abrupt("return");case 13:if(d="TRUE"===window.CLIENTCONFIG["Device.ComCfg.CHR.enableCHR"]?1:0,0!==(h=coreSetting.getChrEnableValue(d))){t.next=18;break}return l.info("CHR file upload is closed, server data is:"+d),t.abrupt("return");case 18:return y="/chrFile/",v=window.APP_DATA_PATH+y+u,window.fs&&(v=window.path.join(window.APP_DATA_PATH,y,u)),w=void 0,m=$getState(),x=m.login,g=x.account,P=x.real_user_account,isNullOrEmpty(P)?w=g:(w=P,l.info("use real_user_account")),C={Account:w},k={proxyAddress:"",proxyPort:0,proxyAccount:"",proxyPassword:""},A=$getState().login,t.next=29,coreSecurity.PasswordManager.getPassword("proxyPassword");case 29:return N=t.sent,A.isSupportProxy&&(k.proxyAddress=A.proxyAddress,k.proxyPort=A.proxyPort,k.proxyAccount=A.proxyAccount,k.proxyPassword=N),t.next=33,new f.default;case 33:return _=t.sent,t.next=36,_.httpUploadFile(r,n,o,v,C,k);case 36:T=t.sent,0!==T.result?l.info("set tup upload file chr failed, result=",T.result):l.info("set tup upload chr file success");case 38:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}()},192:function(t,e,r){r(193),t.exports=r(8).Object.keys},193:function(t,e,r){var n=r(134),o=r(179);r(142)("keys",function(){return function(t){return o(n(t))}})}});