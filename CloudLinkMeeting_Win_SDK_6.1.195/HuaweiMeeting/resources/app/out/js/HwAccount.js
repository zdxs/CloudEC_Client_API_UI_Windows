webpackJsonp([14],{106:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwAccountSdk=void 0;var a=r(132),o=n(a),i=r(4),s=n(i),u=r(1665),c=n(u),f=r(647),d=r(1666),l=r(1668),p=r(270);t.HwAccountSdk=function e(){(0,s.default)(this,e),this.getAccountApi=l.getAccountApi,(0,o.default)(this,c.default),(0,o.default)(this,(0,f.getMiddleEndApi)().getApiList()),(0,o.default)(this,d.verification.getApiList()),(0,o.default)(this,(0,l.getAccountApi)().getApiList()),(0,l.getAccountApi)().getLinkSSOLoginService(),(0,o.default)(this,(0,p.getUportalApi)().getApiList())}},127:function(e,t,r){e.exports=r(0)(0)},128:function(e,t,r){e.exports={default:r(151),__esModule:!0}},129:function(e,t,r){e.exports=r(0)(45)},130:function(e,t,r){e.exports=r(0)(47)},132:function(e,t,r){e.exports=r(0)(562)},135:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=coreCommonComponent.Icon,a=n.iconSizeMap,o=n.iconColorMap,i=n.iconHoverMap,s=n.iconTypeMap;t.default=n,t.iconSizeMap=a,t.iconColorMap=o,t.iconHoverMap=i,t.iconTypeMap=s},136:function(e,t,r){e.exports=r(0)(57)},138:function(e,t,r){"use strict";t.__esModule=!0;var n=r(157),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,a.default)(e)}},139:function(e,t,r){e.exports=r(0)(238)},140:function(e,t,r){"use strict";(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return i(this,e,t,r)}function i(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?l(e,t,r,n):"string"==typeof t?f(e,t,r):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return s(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}function c(e,t){if(s(t),e=a(e,t<0?0:0|_(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|w(t,r);e=a(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function d(e,t){var r=t.length<0?0:0|_(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function l(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=d(e,t),e}function p(e,t){if(o.isBuffer(t)){var r=0|_(t.length);return e=a(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?a(e,0):d(e,t);if("Buffer"===t.type&&Q(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function w(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(n)return K(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,r);case"utf8":case"utf-8":return N(this,t,r);case"ascii":return y(this,t,r);case"latin1":case"binary":return b(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function E(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function h(e,t,r,n,a){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,a);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,a){function o(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}var i=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,s/=2,u/=2,r/=2}var c;if(a){var f=-1;for(c=r;c<s;c++)if(o(e,c)===o(t,-1===f?0:c-f)){if(-1===f&&(f=c),c-f+1===u)return f*i}else-1!==f&&(c-=c-f),f=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var d=!0,l=0;l<u;l++)if(o(e,c+l)!==o(t,l)){d=!1;break}if(d)return c}return-1}function I(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[r+i]=s}return i}function C(e,t,r,n){return $(K(t,e.length-r),e,r,n)}function L(e,t,r,n){return $(Y(t),e,r,n)}function T(e,t,r,n){return L(e,t,r,n)}function S(e,t,r,n){return $(q(t),e,r,n)}function O(e,t,r,n){return $(j(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?z.fromByteArray(e):z.fromByteArray(e.slice(t,r))}function N(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var o=e[a],i=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s<=r){var u,c,f,d;switch(s){case 1:o<128&&(i=o);break;case 2:u=e[a+1],128==(192&u)&&(d=(31&o)<<6|63&u)>127&&(i=d);break;case 3:u=e[a+1],c=e[a+2],128==(192&u)&&128==(192&c)&&(d=(15&o)<<12|(63&u)<<6|63&c)>2047&&(d<55296||d>57343)&&(i=d);break;case 4:u=e[a+1],c=e[a+2],f=e[a+3],128==(192&u)&&128==(192&c)&&128==(192&f)&&(d=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f)>65535&&d<1114112&&(i=d)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),a+=s}return R(n)}function R(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function y(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function b(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function k(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",o=t;o<r;++o)a+=V(e[o]);return a}function A(e,t,r){for(var n=e.slice(t,r),a="",o=0;o<n.length;o+=2)a+=String.fromCharCode(n[o]+256*n[o+1]);return a}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,a,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-r,2);a<o;++a)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-r,4);a<o;++a)e[r+a]=t>>>8*(n?a:3-a)&255}function G(e,t,r,n,a,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,a){return a||G(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,a){return a||G(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function H(e){if(e=W(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||1/0;for(var r,n=e.length,a=null,o=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&o.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function j(e,t){for(var r,n,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,a=r%256,o.push(a),o.push(n);return o}function q(e){return z.toByteArray(H(e))}function $(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function X(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var z=r(231),J=r(232),Q=r(214);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return i(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return u(null,e,t,r)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var i=e[r];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a),a+=i.length}return n},o.byteLength=w,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?N(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,a){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;for(var i=a-n,s=r-t,u=Math.min(i,s),c=this.slice(n,a),f=e.slice(t,r),d=0;d<u;++d)if(c[d]!==f[d]){i=c[d],s=f[d];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return h(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return h(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return I(this,e,t,r);case"utf8":case"utf-8":return C(this,e,t,r);case"ascii":return L(this,e,t,r);case"latin1":case"binary":return T(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var a=t-e;n=new o(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],a=1,o=0;++o<t&&(a*=256);)n+=this[e+o]*a;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},o.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],a=1,o=0;++o<t&&(a*=256);)n+=this[e+o]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=t,a=1,o=this[e+--n];n>0&&(a*=256);)o+=this[e+--n]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);M(this,e,t,r,a-1,-a)}var o=r-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a,i=n-r;if(this===e&&r<t&&t<n)for(a=i-1;a>=0;--a)e[a+t]=this[a+r];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=o.isBuffer(e)?e:K(new o(e,n).toString()),u=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(148))},141:function(e,t,r){e.exports=r(0)(620)},144:function(e,t,r){var n=r(10),a=r(8),o=r(146);e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",i)}},145:function(e,t,r){e.exports={default:r(165),__esModule:!0}},146:function(e,t,r){e.exports=r(0)(59)},148:function(e,t,r){e.exports=r(0)(86)},149:function(e,t,r){e.exports=r(0)(84)},150:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.resetMyInfo=t.getMyInfo=t.UErrorCode=t.LoginInfo=t.LoginError=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.EAErrorCode=t.registerLoginEvent=void 0;var a=r(209),o=n(a),i=r(556),s=n(i);t.registerLoginEvent=o.UErrorCode,t.EAErrorCode=o.EAErrorCode,t.getLoginModel=o.getLoginModel,t.getSyncLoginModel=o.getSyncLoginModel,t.resetLoginModel=o.resetLoginModel,t.LoginError=o.LoginError,t.LoginInfo=o.LoginInfo,t.UErrorCode=o.UErrorCode,t.getMyInfo=s.getMyInfo,t.resetMyInfo=s.resetMyInfo},151:function(e,t,r){r(152),e.exports=r(8).Object.getPrototypeOf},152:function(e,t,r){var n=r(139),a=r(153);r(144)("getPrototypeOf",function(){return function(e){return a(n(e))}})},153:function(e,t,r){e.exports=r(0)(585)},155:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(182),o=n(a),i=r(145),s=n(i);t.default=function(){function e(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=(0,s.default)(e);!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},157:function(e,t,r){e.exports={default:r(171),__esModule:!0}},165:function(e,t,r){r(23),r(22),e.exports=r(166)},166:function(e,t,r){var n=r(9),a=r(26);e.exports=r(8).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},1665:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=r(1),o=n(a),i=r(69),s=n(i),u=r(2),c=n(u),f=function(){var e=(0,c.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.event,e.next="eserver"===e.t0?3:"total"===e.t0?15:30;break;case 3:if(e.prev=3,!window.CLIENTCONFIG.ISMOBILE){e.next=7;break}return e.next=7,E();case 7:return e.next=9,(0,w.makeLoginCancelable)(h(),"loadEserverSignature",constant.LOGIN_PROMISE_KEY.sip_login);case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(3),v.error("<account_login>10_end "+(0,s.default)(e.t1));case 14:return e.abrupt("break",31);case 15:return e.prev=15,e.next=18,(0,p.getLoginModel)();case 18:if(r=e.sent,r.useIM&&window.CLIENTCONFIG.ISMOBILE){e.next=22;break}return e.next=22,E();case 22:return e.next=24,(0,w.makeLoginCancelable)((0,_.loadMyInfo)(r.account),"loadMyInfo",constant.LOGIN_PROMISE_KEY.sip_login);case 24:e.next=29;break;case 26:e.prev=26,e.t2=e.catch(15),v.error("<account_login>10_end "+(0,s.default)(e.t2));case 29:case 30:return e.abrupt("break",31);case 31:case"end":return e.stop()}},e,this,[[3,11],[15,26]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.ENABLE_IT_MEETING||!window.sipUseByOther){e.next=8;break}window.sipUseByOther=!1,v.info("[ initSipService ] cur user sip kick by other mobile."),e.next=22;break;case 8:if(!t.useSip||t.isMultiDeviceLogined&&t.isMobile){e.next=20;break}if(t.isResume){e.next=15;break}return v.info("[ initSipService ]",handlePhoneNumber(t.account)),e.next=13,(0,g.sipLoginAtomic)(!0).then(function(){v.info("[ initSipService ] ok! ",handlePhoneNumber(t.account)),window.CLIENTCONFIG.ENABLE_IT_MEETING||(window.isHubEnv?(coreConf.initTupPairServer(),window.maxhubShareAppParam=null):window.CLIENTCONFIG.ISBIGWIN||coreConf.initTupPairClient())});case 13:e.next=18;break;case 15:return v.info("[ initSipService ] doSipResume ",handlePhoneNumber(t.account)),e.next=18,coreAccount.sipResume({message:"Resume, initSipService"});case 18:e.next=22;break;case 20:v.info("[ initSipService ] end login:"),coreCommon.dispatchModuleEvent("sipMultiDeviceLogined");case 22:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=44;break}if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=31;break}return e.next=26,window.getMeetingDomain();case 26:return r=e.sent,e.next=29,window.parserIPAddress(r);case 29:n=e.sent,n?coreDb.saveLoginSetting({key:r,value:n}):v.info("get host name ip fail");case 31:if(coreConf.getRegisterConfEventAtomic().wait(),!t.useMetting||t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED){e.next=35;break}return e.next=35,coreConf.initializeDataConf();case 35:if(window.confCtrlLoaded){e.next=38;break}return e.next=38,coreConf.confctrlInit();case 38:if(a=$getState().login.sipLoginOnly,a||window.CLIENTCONFIG.ISBIGWIN||coreConf.getVRMList(),isNullOrEmpty(window.handleJoinTempConfNoNameURL)){e.next=44;break}return e.next=43,window.handleJoinTempConfNoName(window.handleJoinTempConfNoNameURL);case 43:window.handleJoinTempConfNoNameURL=null;case 44:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getLoginModel)();case 2:if(t=e.sent,!t.useEab){e.next=9;break}return v.info("[ prepareEabService ]",handlePhoneNumber(t.account)),e.next=7,(0,_.checkLocalHasMyinfo)();case 7:r=e.sent,v.info("[ prepareEabService ] ok! local has last myinfo copy:",r);case 9:return e.abrupt("return",0);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),p=r(150),_=r(301),g=r(358),w=r(330),v=coreLogger.getLogger("account")("moduleMessager");coreCommon.registeModuleListener("login",f);var E=function(){return(0,w.makeLoginCancelable)(l(),"prepareEabService",constant.LOGIN_PROMISE_KEY.sip_login).then(function(){(0,w.makeLoginCancelable)(d(),"initSipService",constant.LOGIN_PROMISE_KEY.sip_login)})},h=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("start loadEserverSignature upon eserver login event"),e.next=3,(0,p.getLoginModel)();case 3:if(t=e.sent,r=t.isSupportAS){e.next=9;break}return e.next=8,(0,_.loadEserverSignature)(t.account);case 8:return e.abrupt("return",e.sent);case 9:v.info("isSupportAS is true, do not load sig-nature from eserver");case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},1666:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.verification=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(128),c=n(u),f=r(4),d=n(f),l=r(129),p=n(l),_=r(130),g=n(_),w=r(249),v=r(1667),E=n(v),h=coreLogger.getLogger("login")("IDVerification"),m=function(e){function t(){var e,r,n,a,i=this;(0,d.default)(this,t);for(var u=arguments.length,f=Array(u),l=0;l<u;l++)f[l]=arguments[l];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(f))),n.dealWithVerificationInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,s,u,c,f,d,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("The user lists length",t.length),!(t.length<=0)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,w.getLoginModel)();case 5:r=e.sent,n=r.loginRecordList,n=n.slice(0),a=0;case 9:if(!(a<n.length)){e.next=16;break}return s=n[a].account,e.next=13,coreAccount.deleteLoginInfo(s);case 13:a++,e.next=9;break;case 16:for(u=[],c=[],f=0;f<t.length;f++)d=t[f],l={account:d.welinkAccount||d.loginName,display_account:d.loginName,tenantcn:d.tenantCn,tenanten:d.tenantEn,thirdaccount:d.loginName,tenantid:d.tenantId,thirdcertype:d.thirdCerType,time_stamp:(new Date).getTime()},u.push(l),c.push(l.display_account),coreDb.saveLoginRecord(l);coreAccount.showLoginInfo({loginInfo:u[0],loginHistoryList:c,loginRecordList:u});case 19:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.startCountdown=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.startCount,a=void 0===r?60:r,s=t.interval,u=void 0===s?1e3:s,c=t.callback,f=void 0===c?n.callback:c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.currentCount=a,n.callback=f,n.timer&&clearInterval(n.timer),n.timer=setInterval(function(){n.currentCount>0?(n.currentCount--,n.callback&&n.callback(n.currentCount)):(clearInterval(n.timer),n.timer=null)},u);case 4:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setCountdownCallback=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.callback=t,e.abrupt("return",n.currentCount);case 2:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.resetCountdown=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.currentCount=0,n.callback=null,n.timer&&clearInterval(n.timer);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(E.default);t.verification=new m},1667:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(128),c=n(u),f=r(4),d=n(f),l=r(129),p=n(l),_=r(130),g=n(_),w=function(e){function t(){var e,r,n,a,i=this;(0,d.default)(this,t);for(var u=arguments.length,f=Array(u),l=0;l<u;l++)f[l]=arguments[l];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(f))),n.dealWithVerificationInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.startCountdown=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=(t.startCount,t.interval,t.callback);void 0===r&&n.callback;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setCountdownCallback=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.resetCountdown=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=w},1668:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AccountImpl=t.getAccountApi=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(128),c=n(u),f=r(4),d=n(f),l=r(129),p=n(l),_=r(130),g=n(_),w=r(150),v=r(650),E=r(290),h=r(249),m=r(361),I=r(229),C=r(228),L=r(271),T=r(359),S=r(267),O=r(301),x=r(362),N=r(363),R=r(360),y=r(302),b=r(645),k=r(249),A=r(272),P=r(1669),M=r(364),U=r(648),D=r(646),G=r(301),F=r(644),B=r(649),H=r(1670),W=n(H),V=r(268),K=r(330),Y=void 0,j=(t.getAccountApi=function(){return isNullOrEmpty(Y)&&(Y=new j),Y},t.AccountImpl=function(e){function t(){var e,r,n,a,i=this;(0,d.default)(this,t);for(var u=arguments.length,f=Array(u),l=0;l<u;l++)f[l]=arguments[l];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(f))),n.initCallLog=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=7;break}return e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,r={log_path:window.LOG_PATH,enable_json_log:window.CLIENTCONFIG.TUP_ENABLE_JSON_LOG||0},e.next=7,t.config(r);case 7:case"end":return e.stop()}},e,i)})),n.getLoginModel=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getSyncLoginModel=function(){return(0,w.getSyncLoginModel)()},n.getMyInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getMyInfo)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getLocalDNSIp=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.domain;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getLocalDNSIp)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.getNickName=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.getNickName)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.noLoginJoinConference=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.noLoginJoinConference)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.login=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.isResume,n=void 0!==r&&r,a=t.isTempLogin,s=void 0!==a&&a,u=t.desc,c=void 0===u?"":u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.login)(n,s,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.makeLoginCancelable=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.promise,n=t.name,a=t.loginPromiseKey,s=void 0===a?constant.LOGIN_PROMISE_KEY.main_login:a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,K.makeLoginCancelable)(r,n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.sipResume=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.forceInitRetryTime,n=void 0===r||r,a=t.message,s=void 0===a?"":a,u=t.shouldUpdateResumeState,c=void 0!==u&&u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.sipResume)({forceInitRetryTime:n,message:s,shouldUpdateResumeState:c});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.deleteLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.deleteLoginInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.showLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.loginInfo,n=t.loginHistoryList,a=t.loginRecordList;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.showLoginInfo)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.showUpdateHintsOrBar=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.showUpdateHintsOrBar)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.checkUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.isFirstIn,n=void 0!==r&&r,a=t.token,s=void 0===a?"":a,u=t.userAccount,c=void 0===u?"":u,f=t.shouldRetry,d=void 0!==f&&f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.checkUpgrade)(n,s,c,d);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.publishStatus=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.status,n=t.desc,a=void 0===n?"":n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.publishStatus)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.pushStatusToEServer=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.status,n=t.desc,a=void 0===n?"":n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.pushStatusToEServer)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.registerResumeEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.registerResumeEvent)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearResumeService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.clearResumeService)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.reStartUpgrade=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.reStartUpgrade)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.checkAndEndCall=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.checkAndEndCall)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.setOffline=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.cancelAutoLogin,n=void 0!==r&&r,a=t.isShowAlert,s=void 0===a||a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.setOffline)(n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.changeAutoLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.changeAutoLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearState=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.clearState)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.meetinghwSipEnableToLogout=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.meetinghwSipEnableToLogout)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.resetSipResumeFlag=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.resetSipResumeFlag)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.actionRefreshToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.actionRefreshToken)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.initLoginInfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.initLoginInfo)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.recoverAppCache=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.recoverAppCache)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.resume=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.message;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.resume)({message:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.stopSipRefresh=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.stopSipRefresh)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.startSipRefresh=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.startSipRefresh)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.updateCurUser=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.name;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.updateCurUser)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.verificationCertificateLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.url;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.verificationCertificateLogic)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.initImportCertificate=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.initImportCertificate)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.setInitSelectCertificateLogic=function(){var e=(0,s.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.setInitSelectCertificateLogic)(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),n.dbInitCertificateLogic=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.dbInitCertificateLogic)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.recordPrivacy=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.oprEvent,n=t.privacyver,a=t.chrtype;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.recordPrivacy)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.sipserverDeregister=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.sipserverDeregister)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearnsipinfo=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.clearnsipinfo)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.stopResume=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.stopResume)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.logout=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.isBackLogin,n=void 0===r||r,a=t.isKickout,s=void 0!==a&&a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.logout)(n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.queryMediaXaddrFromServer=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.uportalService,n=t.is_cms_addr;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.queryMediaXaddrFromServer)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.registerLoginEvent=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.registerLoginEvent)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getResumeEnable=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.getResumeEnable)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.updateTempSipNick=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.name;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.updateTempSipNick)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.endCurrentCall=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.endCurrentCall)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.deRegisterService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.deRegisterService)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.get=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.key,n=t.isPublic;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.get)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.set=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.key,n=t.value,a=t.isPublic;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.set)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.remove=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.key,n=t.isPublic;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.remove)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.doLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.doLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.setIsCACertCheckSupport=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,I.setIsCACertCheckSupport)(t));case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.updateTempSipAccount=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.updateTempSipAccount)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.updateTempSipPwd=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.data;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.updateTempSipPwd)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setServerAddress=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.serverAddress,n=t.serverPort,a=t.middleEndAddress;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.setServerAddress)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.buildStgTunnel=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.stgUri,n=t.stgAccount,a=t.stgPassword;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,V.buildStgTunnel)({stgUri:r,stgAccount:n,stgPassword:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.initVideoHardCodeParam=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.initVideoHardCodeParam)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.configBFCPForTLS=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.bForceTLSMode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.configBFCPForTLS)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.configRTP=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.configRTP)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.initVideoSettingParam=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.initVideoSettingParam)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.configBFCP=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.configBFCP)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.doSipResumeAndEserverDetect=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.message,n=t.shouldUpdateResumeState,a=void 0!==n&&n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.doSipResumeAndEserverDetect)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.refreshIsMultiDeviceLogined=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.bMultiDeviceLogined;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.refreshIsMultiDeviceLogined)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.handleMultiDeviceMsg=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.handleMultiDeviceMsg)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setLocalOfflineStatus=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.info;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.setLocalOfflineStatus)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.unRegisterPush=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.isOperate;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.unRegisterPush)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.configMKI=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.configMKI)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.configSessionTimer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.configSessionTimer)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.configBandwidthLimit=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.configBandwidthLimit)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.hideProgressBarModal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.hideProgressBarModal)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clickConfirmUpdate=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.clickConfirmUpdate)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.inputValueChange=function(e){var t=e.type,r=e.event;return(0,U.inputValueChange)(t,r)},n.getErrorTips=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.server,n=t.errorCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.getErrorTips)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.handleKickPcSuc=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.handleKickPcSuc)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.saveNickName=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.data;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.saveNickName)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.iosCursorDeal=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.value;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.iosCursorDeal)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.firstTimeLoginChangePassword=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.account,n=t.oldPassword,a=t.newPassword;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.firstTimeLoginChangePassword)(r,n,a));case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setMSelectItLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.selectProve;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.setMSelectItLogic)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.clearImptZipUrlDataLogic=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.clearImptZipUrlDataLogic)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.mobileImptProveLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.pwd,n=t.mProveUrl,a=t.mkeysUrl;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.mobileImptProveLogic)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.setLoginInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.openInAppBrowserMobile=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.url,n=void 0===r?"":r,a=t.opts,s=void 0===a?"register":a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.openInAppBrowserMobile)(n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.changeLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.changeLoginInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setTempMediaxInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.setTempMediaxInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setProxyInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.setProxyInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.selectAccount=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.selectAccount)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.ipLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ipLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.updateTempSipGetState=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.updateTempSipGetState)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.dealUpdateVersionClickEx=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.dealUpdateVersionClickEx)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearBarPageSet=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.clearBarPageSet)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.changeLoginPassword=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.account,n=t.oldPass,a=t.newPass;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.changeLoginPassword)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.checkBeforeLogout=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.type,n=t.isLogout,a=void 0===n||n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.checkBeforeLogout)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.SaveSigInfoAndQuit=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.SaveSigInfoAndQuit)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.initNetDetect=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.initNetDetect)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getCaptchaAndSetUi=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getCaptchaAndSetUi)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setImportCertificate=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.setImportCertificate)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.hideServerAddress=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.hideServerAddress)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getCloseAppWays=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getCloseAppWays)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.setCertificateCheckLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.setCertificateCheckLogic)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.getVerifyCodeAndSetUi=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.user,n=t.token;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getVerifyCodeAndSetUi)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.sendCaptchaResultAndSetUi=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.user,n=t.token,a=t.pointX,s=t.slideTime,u=t.shadowImage,c=t.cutImage,f=t.oldPointY;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.sendCaptchaResultAndSetUi)(r,n,a,s,u,c,f);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.updateTempMediaxAddress=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.updateTempMediaxAddress)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.updateTempMediaxPort=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.updateTempMediaxPort)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.valueChange=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.type,n=t.value;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.valueChange)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.addKeyDownListener=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.addKeyDownListener)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.isAccountAutoLogin=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.isAccountAutoLogin)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.initPcFirstPage=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.initPcFirstPage)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.actionGetUploadInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.fileName,n=t.fileType,a=t.isLogin;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.actionGetUploadInfo)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.configHMELog=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.configHMELog)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.queryUserAccount=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.userAccount;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.queryUserAccount)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.verifyVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.userAccount,n=t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.verifyVerificationCode)(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.frogetPassword=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.userAccount,n=t.newPassword,a=t.passwordType,s=t.languageType,u=t.tokenInfo;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.frogetPassword)(r,n,a,s,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.requestVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.userAccount,n=t.sendMode,a=t.languageType;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.requestVerificationCode)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.isInLoginRecordList=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.displayaccount;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.isInLoginRecordList)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.removeKeyDownListener=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.removeKeyDownListener)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getLinkSSOLoginService=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new W.default);case 1:case"end":return e.stop()}},e,i)})),n.settingPageSetLoginRecord=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.settingPageSetLoginRecord)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.forgetPwd=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.forgetPwd)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.saveUserInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.saveUserInfo)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.hideImportCertificateModal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.hideImportCertificateModal)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.clearSelectCertificateOrkeysLogic=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.clearSelectCertificateOrkeysLogic)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.saveImportCertificateLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.certificateUrl,n=t.keysUrl,a=t.pwd;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.saveImportCertificateLogic)(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.saveBeforeLogic=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.certificateUrl,n=void 0===r?"":r,a=t.keysUrl,s=void 0===a?"":a,u=t.inputDom;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.saveBeforeLogic)(n,s,u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.uploadCertificateFile=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.type;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.uploadCertificateFile)(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.handleClearData=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.handleClearData)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.startDetect=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.startDetect)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.stopDetect=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.isTimeout,n=void 0!==r&&r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.stopDetect)(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.showImportCertificateContact=function(){var e=(0,s.default)(o.default.mark(function e(t){var r=t.content,n=t.isShowModalMask,a=void 0===n||n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.showImportCertificateContact)(r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.checkOffLineIsInCall=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.checkOffLineIsInCall)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),n.getCorpResource=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.actionGetCorpResourceAtomic.wait();case 2:return e.next=4,(0,w.getLoginModel)();case 4:return t=e.sent,e.abrupt("return",t.canRecordConf);case 6:case"end":return e.stop()}},e,i)})),n.stopLocalServer=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.stopLocalServer)();case 2:case"end":return e.stop()}},e,i)})),n.checkStgReConnect=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,V.checkStgReConnect)();case 2:case"end":return e.stop()}},e,i)})),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(coreLazyLoad.AccountApi))},1669:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleRefreshTokenSuc=t.handleKickPcSuc=t.handleMultiDeviceMsg=t.refreshIsMultiDeviceLogined=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(290),c=r(269),f=r(150),d=coreLogger.getLogger("logic")("login/bridge"),l=t.refreshIsMultiDeviceLogined=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d.info("refreshIsMultiDeviceLogined ","bMultiDeviceLogined:"+t),(0,f.getLoginModel)().then(function(e){e.isMultiDeviceLogined=t});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.handleMultiDeviceMsg=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("handleMultiDeviceMsg"),window.CLIENTCONFIG.ISMOBILE){e.next=4;break}return d.debug("no deal"),e.abrupt("return");case 4:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=7;break}return d.info("it welink no deal"),e.abrupt("return");case 7:return e.next=9,(0,f.getMyInfo)();case 9:return r=e.sent,n=r.account,e.next=13,(0,f.getLoginModel)();case 13:if(a=e.sent,i=a.isMultiDeviceLogined,t.param.user!==n){e.next=29;break}if(1!==t.param.event_type){e.next=22;break}return e.next=19,l(!0);case 19:(0,u.dealPcLogin)(),e.next=29;break;case 22:if(i){e.next=25;break}return d.info("not multi devices, return"),e.abrupt("return");case 25:return e.next=27,l(!1);case 27:return e.next=29,(0,u.dealPcLogout)();case 29:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.refreshRegister=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.sipUseByOther=!1,e.next=3,(0,c.registerResumeEvent)();case 3:(0,u.dealPcLogout)();case 4:case"end":return e.stop()}},e,void 0)})),window.stopRegister=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,u.sipserverDeregister)(),d.info("stopRegister, set isOffline true"),window.isOffline=!0;case 3:case"end":return e.stop()}},e,void 0)}));t.handleKickPcSuc=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("handleKickPcSuc"),e.next=3,(0,f.getLoginModel)();case 3:if(t=e.sent,window.CLIENTCONFIG.ISMOBILE){e.next=7;break}return d.debug("no deal"),e.abrupt("return");case 7:if(r=t.isMultiDeviceLogined){e.next=11;break}return d.info("not multi devices, return"),e.abrupt("return");case 11:return e.next=13,l(!1);case 13:return e.next=15,(0,u.dealPcLogout)();case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handleRefreshTokenSuc=function(){coreCall.callAfterPCKickout()}},1670:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(4),c=n(u),f=coreLogger.getLogger("LOGIN")("LINKLOGIN"),d=null,l=function e(){var t=this;return(0,c.default)(this,e),this.init=function(){f.info("link sso login init"),window.handleSSOLoginByLink=t.handleSSOLoginByLink},this.handleSSOLoginUrl=function(){var e=(0,s.default)(o.default.mark(function e(r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:f.info("handleSSOLoginUrl"),t.handleSSOLoginByLink(r);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleSSOLoginByLink=function(e){if(f.info("handleSSOLoginByLink"),isNullOrEmpty(e))return void f.error("handleSSOLoginUrl error: url is null");t.shouldSSOLoginByLink=!0,t.checkSSOLoginByLink(e)},this.checkSSOLoginByLink=function(){var e=(0,s.default)(o.default.mark(function e(r){var n,a,i,s,u,c,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.info("checkSSOLoginByLink"),!t.checkHasProvicyPageShow()){e.next=4;break}return f.info("checkProvicyPageShow"),e.abrupt("return");case 4:t.checkHasUportalLogin()?(f.info("uportal has login"),window.alert(language.HAS_ACCOUNT_LOGINING)):(f.info("no account login"),n=coreCommon.getUrlVars(r),a=n.server_url,i=void 0===a?"cloudec.huawei.com":a,s=n.port,u=void 0===s?"8443":s,c=n.domain,d=n.code,coreAccount.oAuthLogin({serverAddress:i,serverPort:u,userTicket:d,domain:c})),t.resetData();case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.resetData=function(){t.url=null,t.shouldSSOLoginByLink=!1},this.checkHasProvicyPageShow=function(){var e=window.localStorage.getItem("isFirstInstall");return window.CLIENTCONFIG.PRIVACY_VERSION_VALUE!==e&&!window.CLIENTCONFIG.ENABLE_IT_MEETING&&(f.info("[checkProvicyPageShow] local has First install before license, enter conf after access license"),!0)},this.checkHasUportalLogin=function(){var e=$getState(),t=e.login.uportalLoginState;return constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS===t},d||(d=this,this.url=null,this.shouldSSOLoginByLink=!1,this.init()),d};t.default=l},171:function(e,t,r){r(22),r(172),e.exports=r(8).Array.from},172:function(e,t,r){"use strict";var n=r(11),a=r(10),o=r(139),i=r(31),s=r(32),u=r(27),c=r(173),f=r(26);a(a.S+a.F*!r(33)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,d,l=o(e),p="function"==typeof this?this:Array,_=arguments.length,g=_>1?arguments[1]:void 0,w=void 0!==g,v=0,E=f(l);if(w&&(g=n(g,_>2?arguments[2]:void 0,2)),void 0==E||p==Array&&s(E))for(t=u(l.length),r=new p(t);t>v;v++)c(r,v,w?g(l[v],v):l[v]);else for(d=E.call(l),r=new p;!(a=d.next()).done;v++)c(r,v,w?i(d,g,[a.value,v],!0):a.value);return r.length=v,r}})},173:function(e,t,r){"use strict";var n=r(25),a=r(174);e.exports=function(e,t,r){t in e?n.f(e,t,a(0,r)):e[t]=r}},174:function(e,t,r){e.exports=r(0)(79)},182:function(e,t,r){e.exports={default:r(183),__esModule:!0}},183:function(e,t,r){r(23),r(22),e.exports=r(184)},184:function(e,t,r){var n=r(16),a=r(6)("iterator"),o=r(17);e.exports=r(8).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||o.hasOwnProperty(n(t))}},209:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return w.default.reject(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginInfo=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.EAErrorCode=t.UErrorCode=void 0;var o=r(128),i=n(o),s=r(4),u=n(s),c=r(5),f=n(c),d=r(129),l=n(d),p=r(130),_=n(p),g=r(3),w=n(g),v=r(1),E=n(v),h=r(2),m=n(h);t.LoginError=a;var I=(t.UErrorCode=constant.UPORTAL_LOGIN_ERROR,t.EAErrorCode=constant.EADDR_LOGIN_ERROR,coreLogger.getLogger("logic")("login/model/login")),C=void 0,L=(t.getLoginModel=function(){var e=(0,m.default)(E.default.mark(function e(){return E.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C||(C=new T(L)),e.abrupt("return",C);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getSyncLoginModel=function(){return C||(C=new T(L)),C},t.resetLoginModel=function(){C=null,I.info("<account_login>12_reset_loginmodel")},{shouldExitApp:"true",userSelectOffline:!1,displayAccount:"",account:"",tenantid:"",verificationNumber:"",verificationCode:"",loadPwd:!1,folder:!0,showPwd:!1,showLangSet:!1,isSaveLangChange:!1,oldLangCode:"",isSaveAddress:!1,middleEndAddress:"",serverAddress:"",serverPort:"",_serverUportalAddress:"",_serverUportalPort:"",uportalLoginState:0,sipRegisterState:0,authToken:"",isRememberPassword:window.CLIENTCONFIG.ISMOBILE,isAutoLogin:!1,loginHistoryList:[],loginRecordList:[],isLoading:!1,loginDisable:!1,isResume:!1,logoutDisable:!1,isCapslock:!1,isOffline:!1,passwordType:"",eabUri:"",groupServer:"",sipUri:"",svnUri:"",currentNum:0,mainSiteSum:0,httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,isFreeUser:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerLocal:"",sipServerPortLocal:0,eServerAddressAll:"",eServerAddress:"",eServerPort:0,socketMode:0,isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1,maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",shouldBuildStg:!1,isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,appstate:constant.APP_STATE.DISCONNECTED,funcType:0,deployMode:0,lastDeployMode:0,tmsServer:"",tmsAccount:"",tmsPwd:"",sipLoginOnly:!1,sipLoginissiptls:0,sipLoginissrtp:1,pushgwUri:"",sipOnlyType:0,isMultiDeviceLogined:!1,switchAccount:{},tempsipinfo:{},tempConfInfo:{},tempsipserverAddress:"",tempsipserverPort:"",tempMediaxAddress:"",tempMediaxPort:"",tempNoNameMediaxAddress:"",tempNoNameMediaxPort:"",tempSipAccount:"",tempSipNick:"",tempsipPassword:"",tempsipGetState:0,sipOnlyurlInfo:{},isSupportCACertCheck:!0,isShowShareRecommendationCircle:!0,sipTransMode:0,sipWhiteList:null,srtpMode:0,smcUri:"",certificateUrl:"",keysUrl:"",certificateName:"",selectCertificate:!0,mProveUrl:"",mkeysUrl:"",mProveName:"",mSelectProve:!0,mZipUrl:"",isIwb:!1,maxhubLoginError:{},euaServer:"",whetherInLoginRecordList:!1,showPullRecordList:!1,isCloudec:!1,isOAuth:!1,OAuthUrl:"",OAuthAccountUrl:"",changeItPasswordUrl:"",FrogetPwdUrl:"",FrogetPwdUrlPort:0,isFrogetRedriect:!1,forgetPwdAccount:"",sysProxyAddress:"",sysProxyPort:0,isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:"",proxyPort:"",proxyAccount:"",proxyPassword:"",real_user_account:"",itOAuthUrl:"",itSignedUrl:"",itUploadHeadImgUrl:"",isPortalUpgrade:!1,isWaitUpgrade:!1,isPortalAfterCallUpgrade:!1,progressPercent:-1,isUpdateError:!1,whatsNewCHN:"",whatsNewENG:"",showContentType:0,isForceUpdate:!1,downloadVersion:"",downloadUrl:"",isReqAddrChanged:!1,isSupportAS:!1,show_account:"",curPortalState:0,manMachineCode:{},isObsCfgParams:!1,isUserClickUploadComplaints:!1,canRecordConf:!1,ctdServerUri:"",confctrlUri:"",ssoLoginTypeCheckedValue:0,authType:0}),T=t.LoginInfo=function(e){function t(e){var r=this;(0,u.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.localIpFromUportal="",n.hasLoginCanceled=!1,n.useSip=!0,n.useEsight=!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,n.corpId="",n.checkSipState=(0,m.default)(E.default.mark(function e(){var t;return E.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isSipRegSuc()){e.next=2;break}return e.abrupt("return");case 2:return t=n,I.info("checkSipState: sip is not registered."),n.prepareSipForCallOrConf=!0,e.abrupt("return",new w.default(function(e){var r=10,n=setInterval(function(){(r<1||t.isSipRegSuc())&&(t.prepareSipForCallOrConf=!1,clearInterval(n),e()),r-=1,I.info("checkSipState: retry: "+(10-r))},1e3)}));case 6:case"end":return e.stop()}},e,r)})),n}return(0,_.default)(t,e),(0,f.default)(t,[{key:"notifyChanged",value:function(e){coreCommon.dispatchModuleEvent("login_model",e)}},{key:"isSipRegSuc",value:function(){return this.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED}},{key:"setLoginStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];I.info("[ setLoginStatus ] flag:"+e+", result:"+t+", isResume:"+this.isResume);var r=void 0;e?r=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECTING:!0===t?r=constant.APP_STATE.ONLINE:!1===t&&(r=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECT_FAILED),this.set({loginDisable:e,appstate:r})}},{key:"setAppState",value:function(e){I.info("[ appstate ]",e),this.appstate=e}},{key:"getstate",value:function(e){return e?$getState().login[e]:$getState().login}},{key:"clearInLoginState",value:function(){this.set({isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1})}},{key:"update",value:function(e){this.dispatch(e)}},{key:"clearPassword",value:function(){this.password="",this.proxyPassword="",this.sipPassword=""}},{key:"serverUportalAddress",get:function(){return this._serverUportalAddress||this.serverAddress},set:function(e){this._serverUportalAddress=e}},{key:"serverUportalPort",get:function(){return this._serverUportalPort||this.serverPort},set:function(e){this._serverUportalPort=e}},{key:"loginType",get:function(){return window.SERVERCONFIG.HWUC},set:function(e){window.SERVERCONFIG.HWUC=e}},{key:"isMobile",get:function(){return window.CLIENTCONFIG.ISMOBILE},set:function(e){window.CLIENTCONFIG.ISMOBILE=e}},{key:"isHWUC",get:function(){return window.SERVERCONFIG.HWUC===constant.LOGIN_TYPE.HWUC},set:function(e){}},{key:"useIM",get:function(){return!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&window.CLIENTCONFIG.USE_IM},set:function(e){window.CLIENTCONFIG.USE_IM=e}},{key:"useMetting",get:function(){return window.CLIENTCONFIG.USE_MEETING},set:function(e){window.CLIENTCONFIG.USE_MEETING=e}},{key:"useEab",get:function(){return window.SERVERCONFIG.HWUC!==constant.LOGIN_TYPE.HWUC&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&!this.sipLoginOnly},set:function(e){}},{key:"asAddress",get:function(){return $getState().conf.asAddress}},{key:"OAuthClinetID",get:function(){return window.CLIENTCONFIG.IT_WELINK_CLIENT_ID},set:function(e){window.CLIENTCONFIG.IT_WELINK_CLIENT_ID=e}},{key:"defaultRoute",get:function(){if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)return"callMain";var e=coreCommon.isHuaweiCloudWeLink();return $getState().menu.menuList&&$getState().menu.menuList instanceof Array&&$getState().menu.menuList[0]?!e&&$getState().menu.menuList.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+$getState().menu.menuList[0]:window.CLIENTCONFIG.MOBILE_MENU_LIST&&window.CLIENTCONFIG.MOBILE_MENU_LIST instanceof Array&&window.CLIENTCONFIG.MOBILE_MENU_LIST[0]?!e&&window.CLIENTCONFIG.MOBILE_MENU_LIST.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+window.CLIENTCONFIG.MOBILE_MENU_LIST[0]:e?"main/"+window.navMobileConfiglist[0].route:"main/"+window.navMobileConfiglist[1].route},set:function(e){}}]),t}(coreCommon.ModuleCache)},214:function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},228:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.unRegisterPush=t.registerPush=t.showUpdateHintsOrBar=t.reStartUpgrade=t.downloadUpgradeFile=t.queryVersionInfo=t.checkUpgrade=t.resumeUportalService=t.actionGetCorpResourceAtomic=t.actiongetOBSConfigInfo=t.actionGetUploadInfo=t.uportalLogout=t.clearLocalDNSIp=t.frogetPassword=t.verifyVerificationCode=t.getVerifyCode=t.sendCaptchaResult=t.getCaptcha=t.requestVerificationCode=t.queryUserAccount=t.recordPrivacy=t.queryMediaXaddrFromServer=t.setLoginProxy=t.resetLoginInfo=t.refreshTokenCallback=t.changeLoginPassword=t.actionRefreshToken=t.startLoginDownLoadCaCert=t.checkIsFirstLogin=t.firstTimeLoginChangePassword=t.firstLoginChangePassword=t.setFistLoginInfo=void 0;var a=r(557),o=n(a),i=r(650),s=n(i),u=r(753),c=n(u),f=r(558),d=(n(f),r(364)),l=n(d),p=r(561),_=n(p),g=r(270);t.setFistLoginInfo=o.setFistLoginInfo,t.firstLoginChangePassword=o.firstLoginChangePassword,t.firstTimeLoginChangePassword=o.firstTimeLoginChangePassword,t.checkIsFirstLogin=o.checkIsFirstLogin,t.startLoginDownLoadCaCert=c.startLoginDownLoadCaCert,t.actionRefreshToken=s.actionRefreshToken,t.changeLoginPassword=s.changeLoginPassword,t.refreshTokenCallback=s.refreshTokenCallback,t.resetLoginInfo=s.resetLoginInfo,t.setLoginProxy=(0,g.getUportalApi)().setLoginProxy,t.queryMediaXaddrFromServer=s.queryMediaXaddrFromServer,t.recordPrivacy=s.recordPrivacy,t.queryUserAccount=s.queryUserAccount,t.requestVerificationCode=s.requestVerificationCode,t.getCaptcha=s.getCaptcha,t.sendCaptchaResult=s.sendCaptchaResult,t.getVerifyCode=s.getVerifyCode,t.verifyVerificationCode=s.verifyVerificationCode,t.frogetPassword=s.frogetPassword,t.clearLocalDNSIp=s.clearLocalDNSIp,t.uportalLogout=s.uportalLogout,t.actionGetUploadInfo=s.actionGetUploadInfo,t.actiongetOBSConfigInfo=s.actiongetOBSConfigInfo,t.actionGetCorpResourceAtomic=s.actionGetCorpResourceAtomic,t.resumeUportalService=s.resumeUportalService,t.checkUpgrade=l.checkUpgrade,t.queryVersionInfo=l.queryVersionInfo,t.downloadUpgradeFile=l.downloadUpgradeFile,t.reStartUpgrade=l.reStartUpgrade,t.showUpdateHintsOrBar=l.showUpdateHintsOrBar,t.registerPush=_.registerPush,t.unRegisterPush=_.unRegisterPush},229:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){window.InAppBrowserRef.executeScript({code:'document.body.style.overflow="hidden"'}),/.*inappbrowserref_close_url.*/.test(e.url)&&(C.info("openInAppBrowserMobile close_url"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i)),/.*inappbrowserref_success_url.*/.test(e.url)&&(window.InAppBrowserRef.close(),window.alertRegisterSuccess("REGISTER_TITLE"),C.info("register account success"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i))}function o(e){window.InAppBrowserRef.executeScript({code:'document.body.style.overflow="hidden"'}),/.*inappbrowserref_close_url.*/.test(e.url)&&(C.info("openInAppBrowserMobile close_url"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i)),/.*inappbrowserref_success_url.*/.test(e.url)&&(window.InAppBrowserRef.close(),window.ToastNew(language.CHANGE_PASSWORD_SUCCESS_FIRST,2),C.info("change [password] success"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i))}function i(){O({loadPwd:!1}),alert(language.LOGIN_RESUME_NETWORK_ERROR),C.info("openInAppBrowserMobile loaderror"),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i),window.InAppBrowserRef.close()}function s(){window.InAppBrowserRef.show(),window.setTimeout(function(){return O({loadPwd:!1})},500),clearTimeout(window.openBrowerTimer)}Object.defineProperty(t,"__esModule",{value:!0}),t.initPcFirstPage=t.isAccountAutoLogin=t.isPcFirstInstall=t.isInLoginRecordList=t.initMImportCertificate=t.clearImptZipUrlDataLogic=t.cancelImpSelectDone=t.mobileImptProveLogic=t.setMSelectItLogic=t.setMProveNameAndSelectItLogic=t.setMSaveZipUrlLogic=t.setMProveAndKeyLogic=t.probeImportCertificateLogic=t.loginforverificationCertificateLogic=t.dbInitCertificateLogic=t.verificationCertificateLogic=t.setInitSelectCertificateLogic=t.initImportCertificate=t.setImportCertificate=t.setCertificateCheckLogic=t.saveSelectCertificateNameLogic=t.saveBeforeLogic=t.saveImportCertificateLogic=t.clearSelectCertificateOrkeysLogic=t.updateKeysUrlLogic=t.updateCertificateUrlLogic=t.uploadCertificateFile=t.hideImportCertificateModal=t.showImportCertificateContact=t.changeAutoLogin=t.deleteLoginInfo=t.setProxyInfo=t.setTempProxyInfo=t.setTempMediaxInfo=t.setServerAddress=t.setIsCACertCheckSupport=t.changeLoginInfo=t.renewFolderState=t.deleteLoginPWD=t.setLoginInfoSync=t.setLoginInfo=t.settingPageSetLoginRecord=t.setLoginRecord=t.openInAppBrowserMobile=t.cannotLogin=t.selectAccount=t.loadLoginSetting=t.initLoginStateFromConsole=t.showLoginInfo=t.loadLoginRecordList=t.hideServerAddress=t.showServerAddress=void 0;var u=r(145),c=n(u),f=r(3),d=n(f),l=r(132),p=n(l),_=r(1),g=n(_),w=r(2),v=n(w),E=r(127),h=(n(E),r(249)),m=r(150),I=r(329),C=coreLogger.getLogger("logic")("loginset"),L=(t.showServerAddress=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];C.info("userClick setAddressAndPort menu"),$dispatch(coreUi.showModal(e,t))},t.hideServerAddress=function(){var e=(0,v.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreLogger.getLogger("Click")("ServerAddress"),t.info("userClick cancel ServerAddress setting"),U(),window.goRoute("login");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.loadLoginRecordList=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return");case 5:if(r=[],t.forEach(function(e){var t=e.display_account;r.push(t)}),n=t[0].isAutoLogin,a=t[0].isMaxhubWorkplace,o=t[0].maxhubMiddleEndAddress,C.info("loadLoginRecordList isMaxhubWorkplace:",a,"maxhubMiddleEndAddress:",o),1!==a||!window.isHubEnv){e.next=18;break}return C.info("set window.CLIENTCONFIG.NEW_APP_NAME true for maxhub workplace login"),window.CLIENTCONFIG.NEW_APP_NAME="WeLink",e.next=16,coreAccount.getLoginModel();case 16:i=e.sent,i.set({middleEndAddress:o});case 18:return e.next=20,L(t[0],r,t);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showLoginInfo=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i,s,u,c,f,d,l,_,w;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:return a=e.sent,o=t.display_account,i=t.account,s=t.tenantid,u=t.encryptPassword,c=t.strUserRandom,f=t.isRememberPassWord,d=t.isAutoLogin,e.next=6,coreSecurity.decrypt({cipher:u,strSalt:c});case 6:return l=e.sent,a.password=l,_={displayAccount:o,account:i,tenantid:s,isRememberPassword:f,isAutoLogin:d,strUserRandom:c,encryptPassword:u},r&&(_.loginHistoryList=r),n&&(_.loginRecordList=n),w=isNullOrEmpty(l),(0,p.default)(_,{showPwd:w}),e.next=15,O(_);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}()),T=t.initLoginStateFromConsole=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCommon.getConsoleUrlVars();case 2:return t=e.sent,e.next=5,(0,h.getLoginModel)();case 5:if(r=e.sent,isNullOrEmpty(t)){e.next=15;break}if(n=t.page,isNullOrEmpty(n)||"login"!==n){e.next=15;break}return a=t.account,o=t.serverAddress,i=parseInt(t.serverPort),s={displayAccount:a,serverAddress:o,serverPort:i},r.set(s),e.abrupt("return",{serverAddress:o,serverPort:i});case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),S=(t.loadLoginSetting=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,f,d,l,p,_,w,v,E,h,m,I,L,S,x,N,R,y,b,k,A,P,M,U,D,G,F,B,H;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,e.next=3,T();case 3:return s=e.sent,e.next=6,coreCommon.getSystemProxySetting();case 6:if(u=e.sent,isNullOrEmpty(s)){e.next=13;break}t=s.serverAddress,r=s.middleEndAddress||window.SERVERCONFIG.MIDDLE_END_ADDRESS,n=s.serverPort,e.next=71;break;case 13:return e.next=15,coreDb.queryAllLoginSetting();case 15:return c=e.sent,f=c.find(function(e){return"serverAddress"===e.key}),d=c.find(function(e){return"middleEndAddress"===e.key}),l=c.find(function(e){return"serverPort"===e.key}),t=f?f.value:window.SERVERCONFIG.LOGIN_ADDRESS,r=d?d.value:window.SERVERCONFIG.MIDDLE_END_ADDRESS,n=l?l.value:window.SERVERCONFIG.LOGIN_PORT,p=c.find(function(e){return"tempMediaxAddress"===e.key}),_=c.find(function(e){return"tempMediaxPort"===e.key}),a=p?p.value:window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS,o=_?_.value:window.CLIENTCONFIG.TEMP_MEDIAX_PORT,w=c.find(function(e){return"lastDeployMode"===e.key}),i=w?parseInt(w.value):0,e.next=30,O({serverAddress:t,middleEndAddress:r,serverPort:n,tempMediaxAddress:a,tempMediaxPort:o,lastDeployMode:i});case 30:if(v=void 0,E=void 0,h=void 0,m=void 0,I=void 0,L=void 0,S=void 0,x=void 0,N=c.find(function(e){return"isSupportProxy"===e.key}),R=c.find(function(e){return"isUseSysProxy"===e.key}),y=c.find(function(e){return"proxyAddress"===e.key}),b=c.find(function(e){return"proxyPort"===e.key}),k=c.find(function(e){return"proxyAccount"===e.key}),A=c.find(function(e){return"proxyPassword"===e.key}),P=c.find(function(e){return"prxoyRandom"===e.key}),v=N?N.value:"0",E=R?R.value:"0",h=y?y.value:"",m=b?b.value:"",I=k?k.value:"",L=A?A.value:"",S=P?P.value:"",M=c.find(function(e){return"isSupportCACertCheck"===e.key}),U=M?M.value:"1",D=c.find(function(e){return"setIsShowShareRecommendationCircle"===e.key}),G=D?D.value:"1",C.info("loadLoginSetting [decrypt]"),""===L){e.next=58;break}return e.next=53,coreSecurity.getPasswordManager();case 53:return F=e.sent,B=F.setCipherPassword("proxyPassword",L,S),e.next=57,B.decryptPassword();case 57:L=e.sent;case 58:if(C.info("loadLoginSetting end [decrypt]"),C.info("systemProxySetting111: "),C.info("isUseSysProxyValue: ",E),"1"!==v||"1"!==E||isNullOrEmpty(u)){e.next=69;break}return h=u.proxyServer,m=u.proxyPort,v="1",E="1",H=[{key:"proxyAddress",value:h},{key:"proxyPort",value:m},{key:"isSupportProxy",value:v},{key:"isUseSysProxy",value:E}],e.next=69,coreDb.saveLoginSettings({args:H});case 69:return e.next=71,O({isSupportProxy:"1"===v,isUseSysProxy:"1"===E,proxyAddress:h,proxyPort:m,sysProxyAddress:isNullOrEmpty(u)?"":u.proxyServer,sysProxyPort:isNullOrEmpty(u)?"":u.proxyPort,proxyAccount:I,isSupportCACertCheck:"1"===U,isShowShareRecommendationCircle:window.CLIENTCONFIG.NEW_FUNCTION_RECOMMENDATION&&"1"===G});case 71:window.SERVERCONFIG.MIDDLE_END_ADDRESS=r,window.SERVERCONFIG.LOGIN_ADDRESS=t,window.SERVERCONFIG.LOGIN_PORT=n,window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS=a,window.CLIENTCONFIG.TEMP_MEDIAX_PORT=o,window.SERVERCONFIG.HWUC=0;case 77:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.selectAccount=function(){var e=(0,v.default)(g.default.mark(function e(t){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginRecord({display_account:t});case 2:return r=e.sent,e.next=5,L(r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cannotLogin=function(e){C.info("login click forgetbutton ,open uportal from browser.");var t=1036===window.langcode?"fr_FR":1033===window.langcode?"en_US":"zh_CN",r="https://"+e+"/portal/forgetPassword.sraction?language="+t;appService.openUrl(r)},t.openInAppBrowserMobile=function(){var e=(0,v.default)(g.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"register";return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.openBrowerTimer&&clearTimeout(window.openBrowerTimer),window.openBrowerTimer=setTimeout(function(){O({loadPwd:!1}),window.InAppBrowserRef&&window.InAppBrowserRef.close(),alert(language.LOGIN_RESUME_NETWORK_ERROR)},2e4),C.info("openInAppBrowserMobile url="+t.substr(0,20)),window.offline?(C.info("openInAppBrowserMobile,network is unreachable"),alert(language.LOGIN_RESUME_NETWORK_ERROR)):(window.InAppBrowserRef=cordova.InAppBrowser.open(t,"_blank","location=no,zoom=no,useWideViewPort=no,toolbar=no,hidden=yes"),"register"===r?window.InAppBrowserRef.addEventListener("loadstart",a):"fogetPassword"===r&&window.InAppBrowserRef.addEventListener("loadstart",o),window.InAppBrowserRef.addEventListener("loadstop",s),window.InAppBrowserRef.addEventListener("loaderror",i)),C.info("openInAppBrowserMobile over");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setLoginRecord=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,f,d,l,_,w,v,E,m,I,L,T,S,O;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:return t=e.sent,r=t.displayAccount,n=t.account,a=t.tenantid,o=t.isRememberPassword,i=t.isAutoLogin,s=t.serverAddress,u=t.serverPort,c=t.deployMode,f=t.loginRecordList,d=t.middleEndAddress,e.next=15,coreSecurity.getPasswordManager();case 15:return l=e.sent,e.next=18,l.getPassword("password");case 18:if(_=e.sent,w=void 0,v=void 0,!(o=o||window.CLIENTCONFIG.ISMOBILE)){e.next=27;break}return e.next=24,coreSecurity.saveUserWithCrypt({strUserPwd:_,strAccount:n});case 24:E=e.sent,w=E.res,v=E.realRandom;case 27:return m={},f.forEach(function(e){e.tenantid!==a||isNullOrEmpty(a)||(m=e)}),e.next=31,coreDb.queryLoginRecord({account:n});case 31:if(I=e.sent,L=0,T=void 0,window.isHubEnv&&((coreCommon.isHuaweiCloudWeLink()||!isNullOrEmpty(I)&&I.isMaxhubWorkplace)&&(L=1),"WeLink"===window.CLIENTCONFIG.NEW_APP_NAME?T=d:!isNullOrEmpty(I)&&I.maxhubMiddleEndAddress&&(T=I.maxhubMiddleEndAddress)),C.info("setLoginRecord isMaxhubWorkplace:",L),S={display_account:r,account:n,tenantcn:m.tenantcn||"",tenanten:m.tenanten||"",thirdaccount:m.thirdaccount||"",tenantid:a,thirdcertype:m.thirdcertype||!1,encryptPassword:o?w:"",strUserRandom:o?v:"",isRememberPassWord:o,isAutoLogin:i,time_stamp:(new Date).getTime(),isMaxhubWorkplace:L,maxhubMiddleEndAddress:T},isNullOrEmpty(m.account)||m.account===n){e.next=40;break}return e.next=40,coreDb.deleteLoginRecord({account:m.account});case 40:return e.next=42,coreDb.saveLoginRecord((0,p.default)(I,S));case 42:return O=[{key:"serverAddress",value:s},{key:"serverPort",value:u},{key:"lastDeployMode",value:c}],e.next=45,coreDb.saveLoginSettings({args:O});case 45:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.settingPageSetLoginRecord=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,f,d;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:return t=e.sent,r=t.account,n=t.isRememberPassword,a=t.isAutoLogin,e.next=8,coreSecurity.getPasswordManager();case 8:return o=e.sent,e.next=11,o.getPassword("password");case 11:if(i=e.sent,s=void 0,u=void 0,!n){e.next=19;break}return e.next=16,coreSecurity.saveUserWithCrypt({strUserPwd:i,strAccount:r});case 16:c=e.sent,s=c.res,u=c.realRandom;case 19:return f={encryptPassword:n?s:"",strUserRandom:n?u:"",isRememberPassWord:n,isAutoLogin:a,time_stamp:(new Date).getTime()},e.next=22,coreDb.queryLoginRecord({account:r});case 22:return d=e.sent,e.next=25,coreDb.saveLoginRecord((0,p.default)(d,f));case 25:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.saveLoginRecord=function(){S(),window.stroage.setFastLogin(!0)};var O=t.setLoginInfo=function(e){(0,h.getLoginModel)().then(function(t){t.set(e)})},x=t.setLoginInfoSync=function(e){(0,h.getSyncLoginModel)().set(e)},N=(t.deleteLoginPWD=function(e){e={password:""},(0,h.getLoginModel)().then(function(t){t.set(e)})},t.renewFolderState=function(e){(0,h.getLoginModel)().then(function(t){t.set(e)})},t.changeLoginInfo=function(e){var t=(0,h.getSyncLoginModel)(),r=e,n=r.displayAccount,a=r.isAutoLogin,o=r.isRememberPassword,i=(0,h.getSyncLoginModel)(),s=i.displayAccount,u=i.loginHistoryList,c=i.isRememberPassword,f=(0,h.getSyncLoginModel)(),d=f.showPwd;if(void 0===n&&!1===d&&void 0===a&&void 0===o&&(""===t.password||""===s&&""!==e.password)){(0,p.default)(e,{showPwd:!0})}if(void 0!==n&&n!==s){if(u.findIndex(function(e){return e===n})>-1)return e={displayAccount:n,account:window.SERVERCONFIG.HWUC?n.toLowerCase():n},void x(e);e={displayAccount:n,account:window.SERVERCONFIG.HWUC?n.toLowerCase():n,password:"",isRememberPassword:"",isAutoLogin:"",showPwd:""!==n},t.password=""}else a?e.isRememberPassword=!0:o||void 0===o||c===o||(e.isAutoLogin=!1);delete e.password,x(e)},t.setIsCACertCheckSupport=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isSupportCACertCheck,n=[{key:"isSupportCACertCheck",value:r?"1":"0"}],e.next=4,coreDb.bulkPutLoginSetting({settinglist:n});case 4:return e.next=6,O({isSupportCACertCheck:r});case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),void 0);window.getSystemProxy=function(){return N=new PromiseObject,window.electron.ipcRenderer.send("getSystemProxy-event"),d.default.race([N,sleep(1e4)])},window.updateSystemProxy=function(e){if(isNullOrEmpty(e))return void(N&&N.reject());var t=void 0;t="mac"===window.CLIENTCONFIG.PLATFORM?e.split("\n"):e.split(":");var r=void 0,n=void 0;if(!isNullOrEmpty(t))return t.length>=2?(r=t[0],n=t[1]):1===t.length?(r=t[1],n=""):(r="",n=""),O({sysProxyAddress:r,sysProxyPort:n}),void(N&&N.resolve({sysProxyAddress:r,sysProxyPort:n}));N&&N.reject()};var R=(t.setServerAddress=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:return a=e.sent,a.serverAddress===t&&a.serverPort===r||(C.info("entity.isReqAddrChanged in"),a.isReqAddrChanged=!0),o=[],i={},window.isHubEnv&&(i.serverAddress=t),isNullOrEmpty(t)||(o.push({key:"serverAddress",value:t}),i.serverAddress=t),isNullOrEmpty(r)||(o.push({key:"serverPort",value:r}),i.serverPort=r),isNullOrEmpty(n)||(o.push({key:"middleEndAddress",value:n}),i.middleEndAddress=n),e.next=12,coreDb.bulkPutLoginSetting({settinglist:o});case 12:return e.next=14,O(i);case 14:window.SERVERCONFIG.MIDDLE_END_ADDRESS=n||window.SERVERCONFIG.MIDDLE_END_ADDRESS,window.SERVERCONFIG.LOGIN_ADDRESS=t,window.SERVERCONFIG.LOGIN_PORT=r,window.SERVERCONFIG.HWUC=0,coreCommon.sha512(t)===constant.SERVER_ADDRESS_SHA512.HWUC?window.SERVERCONFIG.HWUC=1:window.SERVERCONFIG.HWUC=0;case 19:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),t.setTempMediaxInfo=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tempMediaxAddress,n=t.tempMediaxPort,e.next=3,O({tempMediaxAddress:r,tempMediaxPort:n});case 3:window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS=r,window.CLIENTCONFIG.TEMP_MEDIAX_PORT=n,coreConf.saveTempMediaxInfo();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setTempProxyInfo=function(){var e=(0,v.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({proxyAddress:t.proxyAddress,proxyPort:t.proxyPort});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setProxyInfo=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a,o,i,s,u,c,f,d,l;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isSupportProxy,n=t.isUseSysProxy,a=t.proxyAddress,o=t.proxyPort,i=t.proxyAccount,s=t.proxyPassword,e.next=3,coreSecurity.getPasswordManager();case 3:return u=e.sent,e.next=6,u.getPassword("proxyPassword");case 6:return c=e.sent,e.next=9,u.setPassword("proxyPassword",s);case 9:return f=e.sent,e.next=12,(0,h.getLoginModel)();case 12:return d=e.sent,d.isSupportProxy===r&&d.proxyAddress===a&&d.proxyPort===o&&d.proxyAccount===i&&c===s||(C.info("entity.isReqAddrChanged in here"),d.isReqAddrChanged=!0),l=[{key:"isSupportProxy",value:r?"1":"0"},{key:"isUseSysProxy",value:n?"1":"0"},{key:"proxyAddress",value:a},{key:"proxyPort",value:o},{key:"proxyAccount",value:i},{key:"proxyPassword",value:f.cipher},{key:"prxoyRandom",value:f.salt}],e.next=17,coreDb.bulkPutLoginSetting({settinglist:l});case 17:return e.next=19,O({isSupportProxy:r,isUseSysProxy:n,proxyAddress:a,proxyPort:o,proxyAccount:i});case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteLoginInfo=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a,o,i,s,u;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:if(r=e.sent,n=r.displayAccount,a=r.loginHistoryList,o=r.loginRecordList,i=o.find(function(e){return e.display_account===t}),isNullOrEmpty(i)){e.next=33;break}return e.next=10,coreDb.deleteLoginRecord({account:i.account});case 10:if(s=a.filter(function(e){return e!==t}),u=o.filter(function(e){return e.display_account!==t}),n!==t){e.next=18;break}return C.info("delete login account is some"),e.next=16,O({tenantid:"",displayAccount:"",account:"",password:"",isRememberPassword:"",isAutoLogin:"",loginHistoryList:s,loginRecordList:u});case 16:e.next=21;break;case 18:return C.info("delete login account is not some"),e.next=21,O({loginHistoryList:s,loginRecordList:u});case 21:return e.next=23,coreDb.releaseSQliteDBHandler();case 23:return e.prev=23,e.next=26,appService.deleteUserDir(i.account);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(23),C.error("deleteUserDir",e.t0);case 31:e.next=34;break;case 33:C.error("delete account failed");case 34:case"end":return e.stop()}},e,void 0,[[23,28]])}));return function(t){return e.apply(this,arguments)}}(),t.changeAutoLogin=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s,u,c,f,d,l,_,w,v,E,h;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return");case 5:return r=[],t.forEach(function(e){var t=e.display_account;r.push(t)}),n=t[0],a=n.display_account,o=n.account,i=n.tenantid,s=n.encryptPassword,u=n.strUserRandom,c=n.isRememberPassWord,f=n.isAutoLogin,C.info("取消自动登录"),d=!1,l={display_account:a,account:o,tenantid:i,encryptPassword:"",strUserRandom:u,isRememberPassWord:!1,isAutoLogin:d,time_stamp:(new Date).getTime()},e.next=13,coreDb.queryLoginRecord({account:o});case 13:return _=e.sent,e.next=16,coreDb.saveLoginRecord((0,p.default)(_,l));case 16:return e.next=18,coreDb.queryAllLoginRecord();case 18:if(w=e.sent,0!==w.length){e.next=21;break}return e.abrupt("return");case 21:return v=[],w.forEach(function(e){var t=e.display_account;v.push(t)}),E={displayAccount:a,account:o,password:"",loginHistoryList:v,isRememberPassword:c,isAutoLogin:d,status:void 0},window.ifLogOut=!1,e.next=27,coreSecurity.getPasswordManager();case 27:return h=e.sent,h.setPassword("password",""),e.next=31,O(E);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showImportCertificateContact=function(){var e=(0,v.default)(g.default.mark(function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("userClick showImportCertificateContact menu"),$dispatch(coreUi.showModal(t,r));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.hideImportCertificateModal=function(){var e=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("userClick hideImportCertificateModal menu"),coreUi.hideModal();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),y=(t.uploadCertificateFile=function(){var e=(0,v.default)(g.default.mark(function e(t){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("uploadCertificateFile 选择证书上传"),r={},r.properties=["openFile"];try{window.electron.remote.dialog.showOpenDialog(r,function(e){if(!isNullOrEmpty(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=(0,c.default)(e);!(n=(i=s.next()).done);n=!0){var u=i.value;r.push(u)}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}t===constant.IMPORT_CERTIFICATE_TYPE.CERTIFICATE_TYPE?y(1===r.length&&r[0]||[]):t===constant.IMPORT_CERTIFICATE_TYPE.KEYS_TYPE&&b(1===r.length&&r[0]||[])}})}catch(e){C.error("uploadCertificateFile",e.toString())}case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateCertificateUrlLogic=function(e){(0,h.getLoginModel)().then(function(t){t.certificateUrl=e})}),b=t.updateKeysUrlLogic=function(e){(0,h.getLoginModel)().then(function(t){t.keysUrl=e})},k=t.clearSelectCertificateOrkeysLogic=function(){var e=(0,v.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:t=e.sent,t.certificateUrl="",t.keysUrl="";case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),A=(t.saveImportCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i,s,u,c,f,d,l,p,_,w,v;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("saveImportCertificateLogic 导入证书"),e.prev=1,a=window.fs,o=window.path,i="",s="",u="",c="",o&&(i=o.win32.basename(t),s=o.win32.basename(r)),""!==i&&""!==s){e.next=9;break}return alert(language.CERTIFICATE_NAME_OR_KEY_NAME_CANNOT_BE_NULL),e.abrupt("return",!1);case 9:if(u=o.extname(i),c=o.extname(s),".pem"===u&&".pem"===c){e.next=14;break}return alert(language.ILLEGAL_CERTIFICATE_FORMAT_PLEASE_RESELECT),e.abrupt("return",!1);case 14:return e.next=16,G(t);case 16:if(f=e.sent){e.next=20;break}return alert(language.INCORRECT_OR_INVALID_CERTIFICATE),e.abrupt("return",!1);case 20:if(!a){e.next=34;break}return d=APP_DATA_PATH+"/ImpBfcpTLS",l=d+"/"+i,p=d+"/"+s,_=d+"/p4bfcp.txt",a.existsSync(d)?(w=a.readdirSync(d),w.forEach(function(e){a.unlinkSync(d+"/"+e)})):a.mkdirSync(d),e.next=28,A(t,l);case 28:return e.next=30,A(r,p);case 30:return e.next=32,coreSecurity.encryptKMC(n);case 32:v=e.sent,0===v.result&&a.writeFile(_,v.param.CiperText,function(e){if(e)throw e});case 34:return e.abrupt("return",!0);case 37:e.prev=37,e.t0=e.catch(1),C.error("saveImportCertificateLogic",e.t0.toString());case 40:case"end":return e.stop()}},e,void 0,[[1,37]])}));return function(t,r,n){return e.apply(this,arguments)}}(),function(){var e=(0,v.default)(g.default.mark(function e(t,r){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("readeContentToWriteFile 开始读写");try{fs.readFile(t,function(e,t){if(e)throw e;fs.writeFile(r,t,function(e){if(e)throw e})})}catch(e){C.error("readeContentToWriteFile",e.toString())}case 2:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),P=(t.saveBeforeLogic=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments[2];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=window.fs,r=window.path,n="",a="",o="p4bfcp.txt",r&&(n=r.win32.basename(s),a=r.win32.basename(u)),t&&(i=APP_DATA_PATH+"/ImpBfcpTLS",t.readdir(i,function(e,t){t.includes(n)&&t.includes(a)&&t.includes(o)?window.alert(language.IMPORT_DEVICE_CERTIFICATE_SUCCESSFULLY).then(function(e){e.ret&&(k(),c.value="",R(),P(n),M(!1))}):window.alert(language.FAILED_IMPORT_DEVICE_CERTIFICATE_PLEASE_RE_IMPORT).then(function(e){e.ret&&(k(),c.value="")})}))}catch(e){C.error("saveBeforeLogic",e.toString())}case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.saveSelectCertificateNameLogic=function(e){C.info("saveSelectCertificateNameLogic",e),(0,h.getLoginModel)().then(function(t){t.certificateName=e})}),M=t.setCertificateCheckLogic=function(){var e=(0,v.default)(g.default.mark(function e(t){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("setCertificateCheckLogic",t),e.next=3,(0,h.getLoginModel)();case 3:r=e.sent,r.selectCertificate=t;case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),U=(t.setImportCertificate=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a,o,i,s,u,c;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("setImportCertificate"),r=t.selectCertificate,n=t.certificateName,e.next=4,coreDb.queryLoginSetting({key:"importCertificate"});case 4:return a=e.sent,e.next=7,coreDb.queryLoginSetting({key:"certificateName"});case 7:if(o=e.sent,"{}"===a&&(a=null),"{}"===o&&(o=null),isNullOrEmpty(a)||isNullOrEmpty(o)){e.next=25;break}if(o.value===n){e.next=16;break}return i=[{key:"certificateName",value:n}],e.next=15,coreDb.saveLoginSettings({args:i});case 15:P(n);case 16:if((s="true"===a.value)===r){e.next=23;break}return u=[{key:"importCertificate",value:r}],e.next=21,coreDb.saveLoginSettings({args:u});case 21:return e.next=23,M(r);case 23:e.next=30;break;case 25:return c=[{key:"importCertificate",value:r},{key:"certificateName",value:n}],e.next=28,coreDb.saveLoginSettings({args:c});case 28:return e.next=30,D(r,n);case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initImportCertificate=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("initImportCertificate"),e.prev=1,e.next=4,coreDb.queryLoginSetting({key:"importCertificate"});case 4:return t=e.sent,e.next=7,coreDb.queryLoginSetting({key:"certificateName"});case 7:if(r=e.sent,C.debug("initImportCertificate",t,r),"{}"===t&&(t=null),"{}"===r&&(r=null),C.debug("new initImportCertificate",t,r),isNullOrEmpty(t)||isNullOrEmpty(r)){e.next=16;break}if(""===r.value){e.next=16;break}return e.next=16,D("true"===t.value,r.value);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),C.error("initImportCertificate",e.t0.toString());case 21:case"end":return e.stop()}},e,void 0,[[1,18]])}));return function(){return e.apply(this,arguments)}}()),D=t.setInitSelectCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(t,r){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("setInitSelectCertificateLogic"),e.next=3,(0,h.getLoginModel)();case 3:n=e.sent,n.selectCertificate=t,n.certificateName=r;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),G=t.verificationCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("verificationCertificateLogic"),e.prev=1,e.next=4,(0,I.verifyCertificate)(t);case 4:if(r=e.sent,0===r.result){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,(0,I.checkCertificateOverdue)(t);case 11:if(n=e.sent,a=n.param&&n.param.expire_time,o=a.ulUTCSec+"000",i=(new Date).getTime,!(0===n.result&&i-o>0)){e.next=17;break}return e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 20:e.prev=20,e.t0=e.catch(1),C.error("verificationCertificateLogic",e.t0.toString());case 23:case"end":return e.stop()}},e,void 0,[[1,20]])}));return function(t){return e.apply(this,arguments)}}(),F=t.dbInitCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("dbInitCertificateLogic"),t=[{key:"importCertificate",value:""},{key:"certificateName",value:""}],e.next=4,coreDb.saveLoginSettings({args:t});case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.loginforverificationCertificateLogic=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r,n,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("loginforverificationCertificateLogic"),e.prev=1,t=window.fs,r=!0,!t){e.next=29;break}if(n=APP_DATA_PATH+"/ImpBfcpTLS",a=n+"/server.pem",t.existsSync(n)){e.next=12;break}C.debug("用户文档下没有了设备证书目录"),r=!1,e.next=29;break;case 12:if(o=t.readdirSync(n),!(o.includes("server.pem")&&o.includes("server_key.pem")&&o.includes("p4bfcp.txt"))){e.next=27;break}return e.next=16,G(a);case 16:if(i=e.sent){e.next=25;break}return C.debug("导入的证书不正确或者证书已经失效，自动使用默认证书"),e.next=21,D(!0,"");case 21:r=!1,o.forEach(function(e){t.unlinkSync(n+"/"+e)}),t.rmdirSync(n),F();case 25:e.next=29;break;case 27:C.debug("ImpBfcpTLS目录下没有文件"),r=!1;case 29:return e.abrupt("return",r);case 32:e.prev=32,e.t0=e.catch(1),C.error("loginforverificationCertificateLogic",e.t0.toString());case 35:case"end":return e.stop()}},e,void 0,[[1,32]])}));return function(){return e.apply(this,arguments)}}();window.handleJoinImpVcName=function(e){if(!window.isOffline)return void alert(language.IN_CASE_ONLINE_YOU_CANNOT_IMPORT_CERTIFICATE);isNullOrEmpty(e)?window.ToastNew(language.FAILED_TO_IMPORT_THE_CERTIFICATE,2):(window.goRoute("loginCtn"),Y(),window.confirm(language.DOES_THE_DETECTION_ATTACHMENT_HAVE_CERTIFICATE).then(function(t){if(t.ret){window.MLoad(language.DURING_THE_SURVEY_PLEASE_WAIT,!0,"probeLoad");var r=null;clearTimeout(r),r=setTimeout(function(){appService.unzipOfZipPackage(e)},2e3)}}))},window.setProbeZipPackageResult=function(e){B(e)};var B=function(e){switch(window.removeMLoad(),e.resultCode){case constant.PROBE_COMPRESSED_PACKAGE.PROBE_NOT_EXIST:alert(language.IMPORTED_FILE_DOES_NOT_EXIST);break;case constant.PROBE_COMPRESSED_PACKAGE.PROBE_NO_CERTIFICATE_EXIST:alert(language.CERTIFICATE_DOES_NOT_EXIST);break;case constant.PROBE_COMPRESSED_PACKAGE.PROBE_CERTIFICATE_EXIST:H(e);break;default:window.ToastNew(language.PROBE_FAILED,2)}},H=t.probeImportCertificateLogic=function(e){new d.default(function(t){window.MLoad(language.SUCCESSFUL_DETECTION_IMPORT,!0,"probeLoad"),W(e.serverPem,e.serverKeyPem),V(e.zipUrl),t("OK")}).then(function(e){if("OK"===e){new d.default(function(e){window.MLoad(language.AUTOMATIC_MATCHING_COMPLETED,!1,"probeLoad"),e("Y")}).then(function(e){if("Y"===e){var t=null;clearTimeout(t),t=setTimeout(function(){window.goRoute("mLoginMoreSet"),window.goRoute("mImportCertificate"),window.goRoute("mSelectImpCertPage"),window.removeMLoad()},1e3)}})}})},W=t.setMProveAndKeyLogic=function(e,t){C.info("setMProveAndKeyLogic"),(0,h.getLoginModel)().then(function(r){r.mProveUrl=e,r.mkeysUrl=t})},V=t.setMSaveZipUrlLogic=function(e){C.info("setMSaveZipUrlLogic"),(0,h.getLoginModel)().then(function(t){t.mZipUrl=e})},K=t.setMProveNameAndSelectItLogic=function(e,t){C.info("setMProveNameAndSelectItLogic"),(0,h.getLoginModel)().then(function(r){r.mProveName=e,r.mSelectProve=t})};t.setMSelectItLogic=function(){var e=(0,v.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("setMSelectItLogic"),(0,h.getLoginModel)().then(function(e){e.mSelectProve=t});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.mobileImptProveLogic=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.encryptKMC(t);case 2:if(a=e.sent,0!==a.result){e.next=9;break}return e.next=6,(0,h.getLoginModel)();case 6:o=e.sent,i=o.mZipUrl,appService.mImptProve(a.param.CiperText,r,n,i);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}();window.sendSetInitialValueToProbeResult=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(t)||""===t.serverPem){e.next=8;break}return r=window.EXEC_PATH+"/"+t.imptPath,n=r+"/"+t.serverPem,e.next=5,G(n);case 5:a=e.sent,C.info("sendSetInitialValueToProbeResult 证书校验: ",a),a?K(t.serverPem,!1):C.info(language.INCORRECT_OR_INVALID_CERTIFICATE);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.sendIsImportSuccessfulResult=function(e){if("200"===e.imptResultCode&&""!==e.serverName){C.info("导入证书成功"),window.MLoad(language.IMPORT_CERTIFICATE_SUCCESSFULLY,!1,"probeLoad");var t=null;clearTimeout(t),t=setTimeout(function(){window.history.back(),K(e.serverName,!1),window.removeMLoad()},1e3)}else alert(language.IMPORT_FAILED_PLEASE_TRY_AGAIN)};var Y=(t.cancelImpSelectDone=function(){C.info("userClick  back btn"),window.goRoute("mImportCertificate")},t.clearImptZipUrlDataLogic=function(){var e=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:W("",""),V("");case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.initMImportCertificate=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getLoginModel)();case 2:t=e.sent,r=t.mSelectProve,appService.logoutAndFreeLoginInitProve(r);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.actionLogoutAndFreeloginHandler=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(t)||""===t.serverPem){e.next=8;break}return r=window.EXEC_PATH+"/"+t.imptPath,n=r+"/"+t.serverPem,e.next=5,G(n);case 5:a=e.sent,C.info("sendSetInitialValueToProbeResult 证书校验: ",a),a?K(t.serverPem,!1):C.info("证书不正确或证书已经失效");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.unzipOfZipPackageResult=function(e,t,r,n){B({serverPem:e||"",serverKeyPem:t||"",resultCode:r||"0",zipUrl:""})},window.mImptProveResult=function(e,t){if("200"===t&&""!==e){C.info("导入证书成功"),window.MLoad(language.IMPORT_CERTIFICATE_SUCCESSFULLY,!1,"probeLoad");var r=null;clearTimeout(r),r=setTimeout(function(){window.history.back(),K(e,!1),window.removeMLoad()},1e3)}else alert(language.IMPORT_FAILED_PLEASE_TRY_AGAIN)},window.initJudgeDirExistProveResult=function(){var e=(0,v.default)(g.default.mark(function e(t,r,n){var a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=8;break}return a=window.EXEC_PATH+"/"+r,o=a+"/"+t,e.next=5,G(o);case 5:i=e.sent,C.info("sendSetInitialValueToProbeResult 证书校验: ",i),i?K(t,!1):C.info(language.INCORRECT_OR_INVALID_CERTIFICATE);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}();t.isInLoginRecordList=function(){var e=(0,v.default)(g.default.mark(function e(t){var r,n,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:return r=e.sent,n=r.some(function(e){return e.account===t}),e.next=6,(0,h.getLoginModel)();case 6:a=e.sent,a.whetherInLoginRecordList=n;case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.isPcFirstInstall=function(){var e=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.getItem("");case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isAccountAutoLogin=function(){var e=(0,v.default)(g.default.mark(function e(){var t,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return",!1);case 5:return r=t[0].isAutoLogin,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initPcFirstPage=function(){var e=(0,v.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.CLIENTCONFIG.PRIVACY_VERSION_VALUE,window.CLIENTCONFIG.ISBIGWIN||(t=window.localStorage.getItem("isFirstInstall")),"2052"===window.langcode&&(window.document.title=window.CLIENTCONFIG.NEW_APP_CHINEASE_NAME),!window.isHubEnv){e.next=10;break}delegate(function(){(0,m.getMyInfo)().then(function(e){e.languageCode=window.langcode})},"updateLanguage"),window.goRoute("maxhubLogin"),coreCommon.verificationCertificate(),coreConf.NotifyAppStared(0),e.next=31;break;case 10:if(!window.isPluginEnv){e.next=16;break}return e.next=13,coreCommon.initLogin(!1);case 13:C.info("init plugin first page"),e.next=31;break;case 16:if(window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===t){e.next=26;break}return C.info("First install or privacy statement updated"),appService.showMainWindow(!1),e.next=21,appService.initLoginTray();case 21:return e.next=23,window.setLoginSize();case 23:window.CLIENTCONFIG.ISBIGWIN?window.goRoute("login"):(window.goRoute("firstLoginPrivacy"),appService.showMainWindow(!0)),e.next=31;break;case 26:if(window.CLIENTCONFIG.ISBIGWIN){e.next=29;break}return e.next=29,window.setLoginSize();case 29:window.goRoute("login"),coreCommon.verificationCertificate();case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},231:function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function a(e){var t=n(e),r=t[0],a=t[1];return 3*(r+a)/4-a}function o(e,t,r){return 3*(t+r)/4-r}function i(e){for(var t,r=n(e),a=r[0],i=r[1],s=new l(o(e,a,i)),u=0,c=i>0?a-4:a,f=0;f<c;f+=4)t=d[e.charCodeAt(f)]<<18|d[e.charCodeAt(f+1)]<<12|d[e.charCodeAt(f+2)]<<6|d[e.charCodeAt(f+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===i&&(t=d[e.charCodeAt(f)]<<2|d[e.charCodeAt(f+1)]>>4,s[u++]=255&t),1===i&&(t=d[e.charCodeAt(f)]<<10|d[e.charCodeAt(f+1)]<<4|d[e.charCodeAt(f+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function s(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function u(e,t,r){for(var n,a=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(s(n));return a.join("")}function c(e){for(var t,r=e.length,n=r%3,a=[],o=0,i=r-n;o<i;o+=16383)a.push(u(e,o,o+16383>i?i:o+16383));return 1===n?(t=e[r-1],a.push(f[t>>2]+f[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),a.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=c;for(var f=[],d=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,g=p.length;_<g;++_)f[_]=p[_],d[p.charCodeAt(_)]=_;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},232:function(e,t){t.read=function(e,t,r,n,a){var o,i,s=8*a-n-1,u=(1<<s)-1,c=u>>1,f=-7,d=r?a-1:0,l=r?-1:1,p=e[t+d];for(d+=l,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[t+d],d+=l,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=n;f>0;i=256*i+e[t+d],d+=l,f-=8);if(0===o)o=1-c;else{if(o===u)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,n),o-=c}return(p?-1:1)*i*Math.pow(2,o-n)},t.write=function(e,t,r,n,a,o){var i,s,u,c=8*o-a-1,f=(1<<c)-1,d=f>>1,l=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,_=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=f):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),t+=i+d>=1?l/u:l*Math.pow(2,1-d),t*u>=2&&(i++,u/=2),i+d>=f?(s=0,i=f):i+d>=1?(s=(t*u-1)*Math.pow(2,a),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),i=0));a>=8;e[r+p]=255&s,p+=_,s/=256,a-=8);for(i=i<<a|s,c+=a;c>0;e[r+p]=255&i,p+=_,i/=256,c-=8);e[r+p-_]|=128*g}},249:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteLoginInfo=t.selectAccount=t.inputValueChange=t.valueChange=t.forgetPwd=t.miniApp=t.removeKeyDownListener=t.noLoginJoinConference=t.showSettingMenu=t.doLogin=t.checkLoginInfo=t.getSyncLoginModel=t.getLoginModel=t.recoverAppCache=t.storeAppCache=t.setOffline=t.resume=t.registerResumeEvent=t.logout=t.login=t.ipLogin=t.doLogout=t.clearResumeService=t.checkForceSwtichAccount=void 0;var a=r(269),o=n(a),i=r(150),s=n(i),u=r(563),c=n(u),f=r(648),d=n(f),l=r(229),p=n(l);t.checkForceSwtichAccount=o.checkForceSwtichAccount,t.clearResumeService=o.clearResumeService,t.doLogout=o.doLogout,t.ipLogin=o.ipLogin,t.login=o.login,t.logout=o.logout,t.registerResumeEvent=o.registerResumeEvent,t.resume=o.resume,t.setOffline=o.setOffline,t.storeAppCache=o.storeAppCache,t.recoverAppCache=o.recoverAppCache,t.getLoginModel=s.getLoginModel,t.getSyncLoginModel=s.getSyncLoginModel,t.checkLoginInfo=c.checkLoginInfo,t.doLogin=d.doLogin,t.showSettingMenu=d.showSettingMenu,t.noLoginJoinConference=d.noLoginJoinConference,t.removeKeyDownListener=d.removeKeyDownListener,t.miniApp=d.miniApp,t.forgetPwd=d.forgetPwd,t.valueChange=d.valueChange,t.inputValueChange=d.inputValueChange,t.selectAccount=p.selectAccount,t.deleteLoginInfo=p.deleteLoginInfo},267:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){_.info("<account_resume>"+e),window.console.warn(e)}function o(e){_.info("<account_resume_sip>"+e),window.console.warn(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setResumeEnable=t.getResumeEnable=t.setAppResumeState=t.cleraQosMediaInfo=t.promiseToString=t.portDetect=t.fireWallDetect=t.saveFireWall=void 0;var i=r(155),s=n(i),u=r(1),c=n(u),f=r(69),d=n(f),l=r(2),p=n(l);t.saveFireWall=function(){var e=(0,p.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,coreDb.queryLoginSetting({key:"firewall"});case 3:return r=e.sent,e.next=6,window.updateLocalIp();case 6:return n=e.sent,e.next=9,coreAccount.getLoginModel();case 9:a=e.sent,o=a.serverUportalAddress,i=a.serverUportalPort,s=[],isNullOrEmpty(r)||isNullOrEmpty(r.value)||(s=JSON.parse(r.value),s.length?s.length>10&&s.pop():s=[],s.unshift({id:o+i+n,mode:t})),u=(0,d.default)(s),_.info("saveFireWall save "+(0,d.default)({ip:handleIp(n),fireWallMode:t})),coreDb.saveLoginSetting({key:"firewall",value:u}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),_.error("saveFireWall",e.t0);case 22:case"end":return e.stop()}},e,this,[[0,19]])}));return function(t){return e.apply(this,arguments)}}(),t.setAppResumeState=function(){var e=(0,p.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:r=e.sent,a("<0_Info> setAppResumeState, resume_status:"+t),t===constant.APP_STATE.ONLINE?(window.isOffline=!1,window.dispatchEvent(new Event("CloudLinkonline")),r.setAppState(t)):(window.isOffline=!0,window.dispatchEvent(new Event("CloudLinkoffline")),r.setAppState(t),r.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.resumelogger=a,t.sipResumelogger=o;var _=coreLogger.getLogger("login")("libs"),g=(t.fireWallDetect=function(){var e=(0,p.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.info("[ fireWallDetect ]"),r=g(t,0),e.next=4,coreTup.getUportalInstance();case 4:n=e.sent,n.fireWallDetect(r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.portDetect=function(){var e=(0,p.default)(c.default.mark(function e(t,r){var n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(t,r),e.next=3,coreTup.getUportalInstance();case 3:a=e.sent,a.portDetect(n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),function(e,t){for(var r=e.split(";"),n=r.length,a=[],o=0;o<n;o++){var i=r[o].split(":"),u=(0,s.default)(i,1),c=u[0],f={server_uri:c,server_port:t>0?t:0};a.push(f)}return{server_num:n,servers:a}});t.promiseToString=function(e){return"("+!isNullOrEmpty(e)+","+(isNullOrEmpty(e)?"undefined":e.status)+")"},t.cleraQosMediaInfo=function(){var e={audio:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}},video:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}},bfcp:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}}};$dispatch(coreUi.changeCallMediaInfo(e))};window.handleSwitchAccount=function(){var e=(0,p.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.account,n=t.serverAddress,a=t.serverPort,o=t.noNeedLogout,e.next=3,coreAccount.getLoginModel();case 3:if(i=e.sent,window.anonymousJoinConf||o){e.next=7;break}return e.next=7,coreAccount.logout({isBackLogin:!0,isKickout:!0});case 7:_.info("handleSwitchAccount update login info"),s={account:r,displayAccount:r,password:"",serverAddress:n,serverPort:a},u={tempAccount:r,tempServerAddress:n,tempServerPort:a},i.set(s),i.switchAccount=u;case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.startCallout=(0,p.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.dealStartCall(),_.info("startCallout, set isOffline false"),window.isOffline=!1,window.webView.switchToFront();case 4:case"end":return e.stop()}},e,void 0)})),window.handlePluginOneKeyConf=function(){var e=(0,p.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.handleJoinTempConfNoName(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.handlePluginTempUserInfo=(0,p.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_.info("deal temp get user info 10"),t="",r=JSON.parse(t),window.oneKeyConfTempUserInfo(r);case 5:case"end":return e.stop()}},e,void 0)})),window.handleResumeLogin=(0,p.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=window.getRoute(),"main/conference"===t&&(window.noactivity=!1,window.showPageLoading(!1),"function"==typeof window.resumeGetConfInterval&&window.resumeGetConfInterval()),""===t&&window.goRoute("main/conference");case 3:case"end":return e.stop()}},e,void 0)}));var w=!1;t.getResumeEnable=function(){return w},t.setResumeEnable=function(e){_.info("setResumeEnable "+e),w=e}},268:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildStg=t.doBuildStg=t.checkStgReConnect=t.updateStgAuthInfo=t.destroyStgTunnel=t.buildStgTunnel=void 0;var a=r(136),o=n(a),i=r(3),s=n(i),u=r(155),c=n(u),f=r(1),d=n(f),l=r(2),p=n(l),_=(t.doBuildStg=function(){var e=(0,p.default)(d.default.mark(function e(){var t,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:return t=e.sent,t.isInBuildStg=!0,e.next=6,_();case 6:return r=e.sent,t.isInBuildStg=!1,coreCommon.dispatchModuleEvent("login",{event:"buildStg",code:0}),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.buildStg=function(){var e=(0,p.default)(d.default.mark(function e(){var t,r,n,a,i,u,c,f,l,p,_;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,r=t.stgUri,n=t.stgAccount,a=t.useIM,i=t.fireWallMode,u=t.maaProxyAddress,c=t.isSupportProxy,!t.isHWUC){e.next=6;break}return e.abrupt("return",s.default.resolve());case 6:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.ISBIGWIN){e.next=8;break}return e.abrupt("return",s.default.resolve());case 8:if(!coreCommon.isMobile()){e.next=12;break}return v.info("[ buildStg ] mobile can not buildStg"),u&&!c&&(v.info("[ buildStg ] mobile use tls"),t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return",s.default.resolve());case 12:if(f=!1,!coreCommon.checkStgUriExist(r)){e.next=38;break}if(v.info("[ buildStg ] uportal has stg stgUri;"),!c&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==i&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==i){e.next=33;break}return e.next=18,coreSecurity.getPasswordManager();case 18:return l=e.sent,e.next=21,l.getPassword("stgPassword");case 21:return p=e.sent,e.next=24,m({stgUri:r,stgAccount:n,stgPassword:p});case 24:if(_=e.sent,_.result){e.next=27;break}return e.abrupt("return",(0,g.LoginError)((0,o.default)({},_,{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:constant.LOGIN_ERROR_TYPE.uportal})));case 27:return f=!0,t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,u&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return",_);case 33:t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,u&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),v.info("[ buildStg ]no need to buildStg, only build stg for im mode or fireWallMode is 0 or 1; useIM:"+a+" fireWallMode:"+i);case 36:e.next=41;break;case 38:v.info("[ buildStg ]no stgUri, no need to buildStg"),t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,u&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS);case 41:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),g=r(209),w=r(150),v=coreLogger.getLogger("login")("stg"),E=function(){var e=(0,p.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("stgTunnelDisconnected"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,t.set({isBuildStgSuc:!1}),window.dispatchEvent(new Event("stgTunnelDisconnected"));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,p.default)(d.default.mark(function e(t){var r,n,a,o,i,s,u,f,l,p,_,g,w,E,h,m;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("[ updateStgInfo ]"),e.next=3,coreAccount.getLoginModel();case 3:if(r=e.sent,n=t.address,a=0===t.result,o=r.stgUri,i=r.eserverStgUri,s=0,u="",!a){e.next=27;break}if(f=i.split(";"),l=o.split(";"),p=l.length,n){e.next=18;break}u=f[0],s=0,e.next=27;break;case 18:_=0;case 19:if(!(_<p)){e.next=27;break}if(-1===l[_].indexOf(n)){e.next=24;break}return u=f[_],s=_,e.abrupt("break",27);case 24:_++,e.next=19;break;case 27:return g=u.split(":"),w=(0,c.default)(g,2),E=w[0],h=w[1],m={stgUriUsed:n,currentNum:s,isBuildStgSuc:a,eServerAddress:E,eServerPort:parseInt(h)},r.set(m),e.abrupt("return",m);case 31:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),m=t.buildStgTunnel=function(){var e=(0,p.default)(d.default.mark(function e(t){var r,n,a,o,i,s,u,f,l,p,_,g,w,m,I,C,L=t.stgUri,T=t.stgAccount,S=t.stgPassword;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(v.info("[ buildStgTunnel ]"),v.info("<account_login><5_build_stg>begin"),r=L.split(";"),n=r.length,a=new Array,o=0;o<n;o++)i=r[o].split(":"),s=(0,c.default)(i,2),u=s[0],f=s[1],l={server_uri:u,server_port:parseInt(f)},a.push(l);return p={stg_num:n,stg_servers:a,user_name:T,password:S,ca_path:""},e.next=9,coreTup.getUportalInstance();case 9:return _=e.sent,_.setNotifyFunc(360466,E),g=PromiseObject(),e.next=14,coreAccount.getLoginModel();case 14:return w=e.sent,w.shouldBuildStg=!0,e.next=18,_.buildStgTunnel(p,function(e){g.resolve(e)});case 18:return e.next=20,g;case 20:if(m=e.sent,I=m.param,0!==I.result){e.next=34;break}return e.next=25,coreAccount.stopLocalServer();case 25:return e.next=27,h(I);case 27:return C=e.sent,w.set({isBuildStgSuc:!0}),v.info("<account_login><5_build_stg>end ok"),v.info("buildStgTunnel build success."),e.abrupt("return",{result:!0,stgInfo:C});case 34:return w.set({isBuildStgSuc:!1}),v.info("<account_login><5_build_stg>end failed"),v.error("buildStg build fail."),e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR});case 38:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=(t.destroyStgTunnel=function(){var e=(0,p.default)(d.default.mark(function e(){var t,r,n,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,v.info("[ destroyStgTunnel ]"),e.next=6,coreTup.getUportalInstance();case 6:return r=e.sent,n=PromiseObject(),r.destroyStgTunnel(function(e){n.resolve(e)}),e.next=11,n;case 11:if(a=e.sent,o=a.param,0!==o.result){e.next=19;break}return t.set({isBuildStgSuc:!1}),v.info("destroyStgTunnel success."),e.abrupt("return",{result:!0});case 19:v.error("destroyStgTunnel fail.");case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateStgAuthInfo=function(){var e=(0,p.default)(d.default.mark(function e(t){var r,n,a=t.account,o=t.password;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={user_name:a,password:o},e.next=3,coreTup.getUportalInstance();case 3:n=e.sent,n.updateStgAuthInfo(r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),null),C=(t.checkStgReConnect=function(){return I?v.info("checkStgReConnect now is running,wait the result"):(v.info("checkStgReConnect "),I=C()),I},function(){var e=(0,p.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,v.info("doCheckStgReConnect isBuildStgSuc:"+t.isBuildStgSuc),t.isBuildStgSuc){e.next=16;break}return v.info("doCheckStgReConnect enter buildStg"),e.prev=6,e.next=9,_();case 9:e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(6),v.error("doCheckStgReConnect buildStg error"),I=null,"doCheckStgReConnect reconnect stg error";case 16:I=null;case 17:case"end":return e.stop()}},e,void 0,[[6,11]])}));return function(){return e.apply(this,arguments)}}())},269:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.resume=t.registerResumeEvent=t.clearResumeService=t.logout=t.setOffline=t.doLogout=t.enableAutoLogin=t.login=t.ipLogin=t.checkForceSwtichAccount=t.recoverAppCache=t.storeAppCache=void 0;var a=r(360),o=n(a),i=r(361),s=n(i),u=r(363),c=n(u),f=r(271),d=n(f);t.storeAppCache=o.storeAppCache,t.recoverAppCache=o.recoverAppCache,t.checkForceSwtichAccount=s.checkForceSwtichAccount,t.ipLogin=s.ipLogin,t.login=s.login,t.enableAutoLogin=s.enableAutoLogin,t.doLogout=c.doLogout,t.setOffline=c.setOffline,t.logout=c.logout,t.clearResumeService=d.clearResumeService,t.registerResumeEvent=d.registerResumeEvent,t.resume=d.resume},270:function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUportalApi=void 0;var a=r(132),o=n(a),i=r(155),s=n(i),u=r(149),c=n(u),f=r(128),d=n(f),l=r(129),p=n(l),_=r(130),g=n(_),w=r(69),v=n(w),E=r(1),h=n(E),m=r(2),I=n(m),C=r(4),L=n(C),T=r(744),S=n(T),O=r(150),x=r(209),N=r(558),R=r(268),y=r(557),b=r(228),k=r(745),A=r(374),P=coreLogger.getLogger("logic")("login/uportal"),M=window.CLIENTCONFIG,U=new Array,D=function e(){var t=this;(0,L.default)(this,e),this.loadLastUportalInfoFromDB=(0,I.default)(h.default.mark(function e(){var r,n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"LastUportalLoginIP"});case 2:r=e.sent,n=r&&r.value&&JSON.parse(r.value)||{},t.value=n.value||"",t.serverKey=n.serverKey||"";case 6:case"end":return e.stop()}},e,t)})),this.loadLastUportalInfo=function(){var e=(0,I.default)(h.default.mark(function e(r){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isFirstLoad){e.next=4;break}return t.isFirstLoad=!1,e.next=4,t.loadLastUportalInfoFromDB();case 4:t.serverKey!==r&&(t.value=""),t.serverKey=r;case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.saveLastUportalInfo=function(){var e=(0,I.default)(h.default.mark(function e(r,n){var a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.serverKey!==r||t.value!==n){e.next=2;break}return e.abrupt("return",!0);case 2:return t.serverKey=r,t.value=n,a={serverKey:t.serverKey,value:t.value},e.abrupt("return",coreDb.saveLoginSetting({key:"LastUportalLoginIP",value:(0,v.default)(a)}));case 6:case"end":return e.stop()}},e,t)}));return function(t,r){return e.apply(this,arguments)}}(),this.value="",this.serverKey="",this.isFirstLoad=!0},G=function e(){var t=this;(0,L.default)(this,e),this.switchProxy=(0,I.default)(h.default.mark(function e(){var r,n,a,o,i,s,u,c;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P.info("[ ProxyUtil ] switchProxy"),!t.switchingPromise){e.next=6;break}return P.info("[ ProxyUtil ] is switching proxy."),e.abrupt("return",t.switchingPromise);case 6:t.switchingPromise=new PromiseObject;case 7:return e.prev=7,e.next=10,coreAccount.getLoginModel();case 10:return r=e.sent,n=r.isSupportProxy,a=r.isUseSysProxy,o=r.proxyAddress,i=r.proxyPort,s=r.proxyAccount,e.next=18,coreSecurity.getPasswordManager();case 18:return u=e.sent,e.next=21,u.getPassword("proxyPassword");case 21:if(c=e.sent,t.lastProxyInfo={isSupportProxy:n,isUseSysProxy:a},!n){e.next=28;break}return e.next=26,coreAccount.setProxyInfo({isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:o,proxyPort:i,proxyAccount:s,proxyPassword:c});case 26:e.next=30;break;case 28:return e.next=30,t.useSystemProxy();case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(7),P.error("[ ProxyUtil ]",e.t0);case 35:t.switchingPromise.resolve(),t.switchingPromise=null;case 37:case"end":return e.stop()}},e,t,[[7,32]])})),this.resetProxy=(0,I.default)(h.default.mark(function e(){var r,n,a,o,i,s,u,c,f;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P.info("[ ProxyUtil ] resetProxy"),!t.lastProxyInfo){e.next=17;break}return e.next=4,coreAccount.getLoginModel();case 4:return r=e.sent,n=r.proxyAddress,a=r.proxyPort,o=r.proxyAccount,e.next=10,coreSecurity.getPasswordManager();case 10:return i=e.sent,e.next=13,i.getPassword("proxyPassword");case 13:return s=e.sent,u=t.lastProxyInfo,c=u.isSupportProxy,f=u.isUseSysProxy,e.next=17,coreAccount.setProxyInfo({isSupportProxy:c,isUseSysProxy:f,proxyAddress:n,proxyPort:a,proxyAccount:o,proxyPassword:s});case 17:t.lastProxyInfo=null;case 18:case"end":return e.stop()}},e,t)})),this.replaceProxyAddress=(0,I.default)(h.default.mark(function e(){var r,n,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:r=e.sent,n=r.isSupportProxy,a=r.proxyAddress,n&&-1!==a.indexOf("huawei.com")&&(r.proxyAddress="proxycn2.huawei.com");case 5:case"end":return e.stop()}},e,t)})),this.useSystemProxy=(0,I.default)(h.default.mark(function e(){var r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.getSystemProxy();case 3:if(r=e.sent,P.info("[ ProxyUtil ] useSystemProxy：",r),!r){e.next=8;break}return e.next=8,coreAccount.setProxyInfo({isSupportProxy:!0,isUseSysProxy:!0,proxyAddress:r.sysProxyAddress||"",proxyPort:r.sysProxyPort||"",proxyAccount:"",proxyPassword:""});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),P.error("[ ProxyUtil ]",e.t0);case 13:case"end":return e.stop()}},e,t,[[0,10]])})),this.lastProxyInfo=null,this.switchingPromise=null};window.isRepeateCall=!1;var F=function(t){function r(){var t=this;(0,L.default)(this,r);var n=(0,p.default)(this,(r.__proto__||(0,d.default)(r)).call(this));return n.queryPlatformInfo=function(){return P.info("current platform is :win"),"WeLink"===window.CLIENTCONFIG.NEW_APP_NAME?"WeLink-windows":"cloudlink-windows"},n.getUportalLoginInfo=function(){var e=(0,I.default)(h.default.mark(function e(r,a,o,i){var s,u,c,f,d,l,p,_,g,w,v,E;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:if(s=e.sent,u=s.isOAuth,c=s.account,f=s.user_ticket,d=s.userTicket,l=s.authType,p=s.domain,1!==l){e.next=6;break}return e.abrupt("return",{auth_type:constant.AUTH_TYPE.TICKET,user_agent:window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:constant.USER_AGENT.PC,short_ticket:d,domain:p,auth_info:{user_name:"",password:""},auth_server:{server_type:0,server_url:o,server_port:parseInt(i),server_version:"V6R6C00",proxy_url:""}});case 6:return _="",r.indexOf("@")<0?(_="mobile",P.info("lgn acc is ",handlePhoneNumber(r))):r.length>4&&P.info("lgn acc is",r.length>4?r.substr(0,3)+"******"+r.substr(-4):"****"),P.info("login user_name_type =",_),g="",w="",s.isOAuth&&(f.length>40?g=f:w=f),e.next=13,window.isAnonymous();case 13:return v=e.sent,window.CLIENTCONFIG.ENABLE_IT_MEETING&&v&&(u=0),E=window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:window.isHubEnv?constant.USER_AGENT.MAXHUB:coreCommon.isHuaweiCloudWeLink()?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC,P.info("uportal user_agent=",E),e.abrupt("return",{auth_type:u?constant.AUTH_TYPE.TICKET_WITH_USERNAME:constant.AUTH_TYPE.NORMAL,user_agent:E,user_tiket:g,short_ticket:w,software_type:n.queryPlatformInfo(),user_name_type:_,src_of_psw:1,auth_info:{user_name:u?c:r,password:a},auth_server:{server_type:0,server_url:o,server_port:parseInt(i),server_version:"V6R6C00",proxy_url:""}});case 18:case"end":return e.stop()}},e,t)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.uportalLogin=function(){var e=(0,I.default)(h.default.mark(function e(r){var a,o,i,s,u,c,f,d,l,p,_=r.loginAccount,g=r.password,w=r.serverAddress,v=r.serverPort;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:return a=e.sent,a.set({isInUportalLogin:!0,uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING}),e.next=6,coreTup.getUportalInstance();case 6:if(o=e.sent,o.setNotifyFunc(360459,n.refreshTokenCallback),o.setNotifyFunc(360498,n.dealWithServerSetParamNotify),i=a.isSupportCACertCheck,s=window.EXEC_PATH,i?window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.loginSetTlsParamsEx(s,1):o.loginSetTlsParams(s,1):window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.loginSetTlsParamsEx(s,0):o.loginSetTlsParams(s,0),window.CLIENTCONFIG.ISBIGWIN){e.next=15;break}return e.next=15,n.setLoginProxy(o);case 15:return u=void 0,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER]}),e.next=19,n.getUportalLoginInfo(_,g,w,v);case 19:if(c=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=28;break}return e.next=23,o.loginAuthorizeEx(c);case 23:f=e.sent,d=f.param,u=d,e.next=33;break;case 28:return e.next=30,o.loginAuthorize(c);case 30:l=e.sent,p=l.param,u=p;case 33:return(0,y.setFistLoginInfo)(u,_),n.loggerUportalLogin(u),e.abrupt("return",u);case 36:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.loggerUportalLogin=function(){var e=(0,I.default)(h.default.mark(function e(r){var a,o,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,v.default)(r),o=JSON.parse(a),i=new Array("server_port","server_uri","server_num","auth_mode","corp_id","deploy_mode","display_name","dms_server","eab_server","expire","ItLoginAutoReg","ItPasswordModifyUrl","ItSignedUrl","ItUploadHeadImgUrl","group_server","is_first_login","is_free_user","left_days_of_pwd","media_type","num_of_site","onebox_app_id","onebox_server_addr","onebox_server_type","password_type","privacy_version","redirect_url","register_server","sip_domain","androidpush_uri","conf_type","conf_uri","eab_uri","eserver_uri","eserver_uri_backup","eua_server","http_proxy_uri","httpsproxy_uri","is_mainsite","is_siptls","is_srtp","maa_drproxy_uri","maa_proxy_uri","maa_uri","maa_uri_backup","ms_param_path_uri","ms_param_uri","onebox_address_uri","priority","prophoto_uri","push_gateway","server_name","sip_tls_uri","sip_uri","account","eserver_stg_uri","eserver_stg_uri_backup","maa_stg_uri","maa_stg_uri_backup","sip_stg_uri","stg_uri","svn_uri","tms_server","num_of_server","sbc_domain","site_name","tms_account","terminal_func_type","terminal_scene","user_id","result","user_type"),n.paraseJson(o,i),P.info("uportal login result:",o);case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.paraseJson=function(){var e=(0,I.default)(h.default.mark(function e(r,a){var o,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o in r)i=r[o],"object"===(void 0===i?"undefined":(0,c.default)(i))?n.paraseJson(i,a):-1===a.indexOf(o)&&(r[o]="******");case 1:case"end":return e.stop()}},e,t)}));return function(t,r){return e.apply(this,arguments)}}(),n.updateSiteInfo=function(){var e=(0,I.default)(h.default.mark(function e(r){var n,a,o,i,u,c,f,d,l,p,_,g,w,v,E,m,I,C,L,T,S,x,N,R,y,b,A,M,U,D,G,F,B,H,W,V,K,Y,j,q,$,X,z,J,Q,Z,ee,te,re,ne,ae,oe,ie,se,ue,ce,fe,de,le,pe,_e,ge,we,ve,Ee,he,me,Ie,Ce,Le,Te,Se,Oe,xe,Ne,Re,ye,be,ke,Ae,Pe,Me,Ue,De,Ge,Fe,Be,He,We,Ve,Ke,Ye,je,qe,$e,Xe,ze,Je,Qe,Ze,et,tt,rt,nt,at,ot,it,st,ut,ct,ft,dt,lt,pt,_t,gt,wt,vt,Et,ht,mt,It,Ct;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:for(n=e.sent,a=r.uportal_authorize_result.terminal_func_type,o=!0,i=r.uportal_authorize_result.terminal_scene,u=!!i&&"room"===i,c=r.uportal_authorize_result.local_ip,(window.CLIENTCONFIG.ENABLE_IT_MEETING||u)&&(a=5),f="",-1!==a?(n.funcType=a,1===a?(f="soft mode",window.CLIENTCONFIG.USE_MEETING=!1,window.CLIENTCONFIG.USE_IM=!1,window.CLIENTCONFIG.USE_CALL=!0,window.CLIENTCONFIG.DEFAULT_MENU="contactGroups",window._currentRoute="/main/contactGroups",$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["contactGroups","myInfo"]):5===a?(f="te mode",window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!1,window.CLIENTCONFIG.USE_CALL=!0,window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference",$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["conference","contactGroups","myInfo"]):7===a&&(f="uc mode",window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!0,window.CLIENTCONFIG.USE_CALL=!0,coreCommon.isHuaweiCloudWeLink()?(window.CLIENTCONFIG.DEFAULT_MENU="recent",window._currentRoute="/main/recent"):(window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference"),d=$getState().menu.currentNav,window.CLIENTCONFIG.DEFAULT_MENU!==d&&"nav"!==d&&d?coreCommon.switchNav(d):$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["recent","conference","contactGroups","myInfo"]),(0,k.setAppConfigList)(),P.info("functype == "+a+" "+f)):(window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!0,window.CLIENTCONFIG.USE_CALL=!0,coreCommon.isHuaweiCloudWeLink()?(window.CLIENTCONFIG.DEFAULT_MENU="recent",window._currentRoute="/main/recent"):(window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference"),l=$getState().menu.currentNav,window.CLIENTCONFIG.DEFAULT_MENU!==l&&"nav"!==l?coreCommon.switchNav(l):$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["conference","recent","contactGroups","myInfo"],P.info("functype == -1")),p=r.uportal_authorize_result.all_sip_server.server_info,_=p.length<window.CLIENTCONFIG.CALL_D_MAX_IP_WHITE_LIST_COUNT?p.length:window.CLIENTCONFIG.CALL_D_MAX_IP_WHITE_LIST_COUNT,g=new Array,w=0;w<_;w++)v={server_address:p[w].server_uri,server_port:p[w].server_port},g.push(v);if($dispatch(coreUi.updateMenuInfo({menuList:window.CLIENTCONFIG.MOBILE_MENU_LIST})),!(E=r.uportal_authorize_result.site_info)||!E[0]){e.next=134;break}m=E[0],I=m.num_of_server,C=m.access_server,L=m.tms_account,T="",S="",x="",N="",R="",y="",b="",A="",M="",U="",D="",G="",F="",B="",H="",W="",V="",K="",Y="",j="",q=C[0].conf_uri,$=C[0].conf_type,$&&"CMS"===$&&!isNullOrEmpty(q)?(P.info("new conf AS is supported"),n.isSupportAS=!0,$dispatch(coreUi.changeAsAddress(q))):(P.info("new conf AS is not supported"),n.isSupportAS=!1),X=C[0].http_proxy_uri,isNullOrEmpty(X)||(n.ctdServerUri=X,n.confctrlUri=X,P.info("http_proxy_uri:"+X)),z=C[0].onebox_address_uri,J="CloudEC",coreCommon.isHuaweiCloudWeLink()&&(J="espace"),"supportRest"===L&&(o=!1),window.CLIENTCONFIG.ISBIGWIN&&(o=!0),Q=0,Z=0;case 35:if(!(Z<I)){e.next=60;break}if(C&&C[Z]){e.next=38;break}return e.abrupt("continue",57);case 38:T+=C[Z].sip_uri,S+=C[Z].sip_tls_uri,x+=C[Z].svn_uri,M+=C[Z].stg_info.stg_uri,G+=C[Z].stg_info.sip_stg_uri,F+=C[Z].stg_info.eserver_stg_uri,B+=C[Z].stg_info.eserver_stg_uri_backup,H+=C[Z].maa_proxy_uri,W+=C[Z].maa_drproxy_uri,y+=C[Z].eserver_uri,b+=C[Z].eserver_uri_backup,N+=C[Z].httpsproxy_uri,U=C[0].stg_info.account,D=C[0].stg_info.password,isNullOrEmpty(z)&&!isNullOrEmpty(C[Z].onebox_address_uri)&&(z=C[Z].onebox_address_uri),K||(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(C[Z].tms_uri&&(K=C[Z].tms_uri),C[Z].tms_server&&(K=C[Z].tms_server)):K=C[Z].tms_server),Y||(Y=C[Z].ms_param_uri),j||(j=C[Z].eua_server),Z<I-1&&(T+=";",S+=";",x+=";",M+=";",G+=";",F+=";",B+=";",H+=";",y+=";",b+=";",N+=";");case 57:Z++,e.next=35;break;case 60:if(P.info("sipUri:"+T+" sipTlsUri:"+S),ee=r.uportal_authorize_result.corp_id||"",z&&coreIm.setOfflineFileConfig(!0,{onebox_app_id:J,onebox_server_addr:z,corp_id:ee}),Q=I,F+=";",F+=B,y+=";",y+=b,H+=";",H+=W,window.isSupportiDo=o,P.info("uportal isSupportiDo: "+window.isSupportiDo),te=r.uportal_authorize_result,re=te.auth_token,ne=te.sip_account,ae=te.sip_impi,oe=te.sip_password,ie=te.password_type,se=te.eab_server,ue=te.group_server,ce=te.deploy_mode,fe=te.sip_domain,de=te.auth_serinfo,le=te.is_free_user,pe=te.privacy_version,_e=te.user_type,ge=r.uportal_authorize_result,we=ge.extra_parameters,ve=ge.all_extra_parameter,isNullOrEmpty(we)&&!isNullOrEmpty(ve)){Ee={};for(he in ve)Ee[ve[he].parameter_name]=ve[he].parameter_value;we=Ee}isNullOrEmpty(we)||j||(j=we.eua_server),me=ce,Ie="",Ce="",Le="",Te="",we&&(we.ItPasswordModifyUrl&&(Ie=we.ItPasswordModifyUrl),we.ItLoginAutoReg&&(Ce=we.ItLoginAutoReg),we.ItSignedUrl&&(Le=we.ItSignedUrl),we.ItLoginAutoReg&&(Te=we.ItUploadHeadImgUrl)),me=0===ce?constant.MEETING_NET_TYPE.USM_MEETING:1===ce?constant.MEETING_NET_TYPE.SMC_MEETING:constant.MEETING_NET_TYPE.MEDIAX_MEETING,P.info("uportal get deploy_mode is "+ce+",envtype is "+me),Se=y.split(";"),Oe=N.split(";"),xe=H.split(";").filter(function(e){return!!e}),P.info("updateSiteInfo eserverUriList.length: "+Se.length+", httpsProxyList.length: "+Oe.length+", maaProxyUrlList.length: "+xe.length),Se.length>0&&(A=Se[0]),Oe.length>0&&(R=Oe[0]),xe.length>0&&(V=xe[0]),Ne=0,Re=A.split(":"),ye=(0,s.default)(Re,2),be=ye[0],ke=ye[1],Ae=V.split(":"),Pe=(0,s.default)(Ae,2),Me=Pe[0],Ue=Pe[1],De=T.split(";"),Ge=De[0]?De[0].split(":"):["",0],Fe=(0,s.default)(Ge,2),Be=Fe[0],He=Fe[1],We=De[1]?De[1].split(":"):["",0],Ve=(0,s.default)(We,2),Ke=Ve[0],Ye=Ve[1],je=De[2]?De[2].split(":"):["",0],qe=(0,s.default)(je,2),$e=qe[0],Xe=qe[1],ze=De[3]?De[3].split(":"):["",0],Je=(0,s.default)(ze,2),Qe=Je[0],Ze=Je[1],et=S.split(";"),tt=et[0]?et[0].split(":"):["",0],rt=(0,s.default)(tt,2),nt=rt[0],at=rt[1],ot=et[1]?et[1].split(":"):["",0],it=(0,s.default)(ot,2),st=it[0],ut=it[1],ct=et[2]?et[2].split(":"):["",0],ft=(0,s.default)(ct,2),dt=ft[0],lt=ft[1],pt=et[3]?et[3].split(":"):["",0],_t=(0,s.default)(pt,2),gt=_t[0],wt=_t[1],vt="",e.t0=h.default.keys(E[0].access_server);case 106:if((e.t1=e.t0()).done){e.next=114;break}if(Et=e.t1.value,isNullOrEmpty(E[0].access_server[Et].push_gateway)){e.next=112;break}return P.info("push_gateway:",E[0].access_server[Et].push_gateway),vt=E[0].access_server[Et].push_gateway,e.abrupt("break",114);case 112:e.next=106;break;case 114:return ht={authToken:re,sipAccount:ne,sipImpi:ae,sipPasswordType:ie,eabUri:se,groupServer:ue,mainSiteSum:Q,currentNum:Ne,eServerAddressAll:y,eServerAddress:be,eServerPort:parseInt(ke),sipServerAddress:Be,sipServerPort:parseInt(He),sipTlsServerAddress:nt,sipTlsPort:parseInt(at),sipTlsServerBackup1:st,sipTlsPortBackup1:parseInt(ut),sipTlsServerBackup2:dt,sipTlsPortBackup2:parseInt(lt),sipTlsServerBackup3:gt,sipTlsPortBackup3:parseInt(wt),sipDomain:fe,sipServerBackup1:Ke,sipServerPortBackup1:parseInt(Ye),sipServerBackup2:$e,sipServerPortBackup2:parseInt(Xe),sipServerBackup3:Qe,sipServerPortBackup3:parseInt(Ze),sipUri:T,svnUri:x,httpsProxyAll:N,httpsProxy:R,stgUri:M,stgAccount:U,sipStgUri:G,eserverStgUri:F,deployMode:me,funcType:a,tmsServer:K,changeItPasswordUrl:Ie,itOAuthUrl:Ce,itSignedUrl:Le,itUploadHeadImgUrl:Te,sipWhiteList:g,serverUportalAddress:de.server_uri,serverUportalPort:de.server_port,sipLoginissiptls:E[0].access_server[0].is_siptls,sipLoginissrtp:E[0].access_server[0].is_srtp,pushgwUri:vt,smcUri:Y,isIwb:u,privacy_version:pe,euaServer:j,maaProxyUrlAll:H,maaProxyAddress:Me,maaProxyPort:Ue,real_user_account:r.uportal_authorize_result.real_user_account,localIpFromUportal:c},ht.isFreeUser=_e!==constant.REGISTER_USER_TYPE.FREE?0:1,P.info("isFreeUser: "+ht.isFreeUser),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&ae.indexOf("@")&&(mt=ae.split("@")[0],window.sendSipNoToProto(mt)),ht.show_account=n.account,(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||n.isSupportAS)&&(It=r.uportal_authorize_result.real_user_account,ht.show_account=n.account,ht.account=It),coreUt.utConfigAccountInfo({configAccount:ht.show_account,configUuid:ht.account}),e.next=123,coreSecurity.getPasswordManager();case 123:if(Ct=e.sent,e.t2=D,!e.t2){e.next=128;break}return e.next=128,Ct.setPassword("stgPassword",D);case 128:if(e.t3=oe,!e.t3){e.next=132;break}return e.next=132,Ct.setPassword("sipPassword",oe);case 132:return n.set(ht),e.abrupt("return",ht);case 134:return e.abrupt("return",{});case 135:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.uportalAllonline=(0,I.default)(h.default.mark(function e(){var r,a,o,i,s;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.getUportalRes(),a=r.param,e.next=4,(0,O.getLoginModel)();case 4:return o=e.sent,i=o.loginAccount,o.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,account:a.uportal_authorize_result.user_name||i}),e.next=9,n.updateSiteInfo(a);case 9:return s=e.sent,s&&s.serverUportalAddress&&n.IP.value!==s.serverUportalAddress&&(window.CLIENTCONFIG.ISBIGWIN||n.IP.saveLastUportalInfo(s.serverUportalAddress,s.serverUportalAddress),P.info("uportalAddrUpdate")),e.abrupt("return",{result:!0,loginInfo:s});case 12:case"end":return e.stop()}},e,t)})),n.setLoginProxy=function(){var e=(0,I.default)(h.default.mark(function e(r){var n,a,o,i,s,u,c,f;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:return n=e.sent,a=n.isSupportProxy,o=n.proxyAddress,i=n.proxyPort,s=n.proxyAccount,e.next=9,coreSecurity.getPasswordManager();case 9:return u=e.sent,e.next=12,u.getPassword("proxyPassword");case 12:if(c=e.sent,a||(o="",i="0",s="",c=""),f={server_port:parseInt(i),server_uri:o,user_name:s,password:c},P.info("setLoginProxy proxyAddress: "+o),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=21;break}return e.next=19,r.setLoginProxy(f);case 19:e.next=23;break;case 21:return e.next=23,r.setLoginProxyEx(f);case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.dealWithUICfgParam=function(e,t){if(e.indexOf("Device.UICfg.cert.sync")?P.info("set ui config, name="+e+", value=",t):P.info("set ui config, name="+e),"Device.UICfg.IM.mutiLanguage"===e)window.mutiLanguage=t;else if("Device.UICfg.IM.enableISH"===e)$dispatch(coreUi.changeSecurityHintsShow(t));else if("Device.UICfg.IM.chineseISH"===e)$dispatch(coreUi.changeSecurityHintsChinese(t));else if("Device.UICfg.IM.setFont"===e)$dispatch(coreUi.changeImSetFontEnable(t));else if("Device.UICfg.IM.stgDisableSendFile"===e)$dispatch(coreUi.changeStgDisableSendFile("1"===t));else if("Device.UICfg.IM.englishISH"===e)$dispatch(coreUi.changeSecurityHintsEnglish(t));else if("Device.UICfg.Conf.Coordination"===e)$dispatch(coreUi.changeShowPiar(parseInt(t)));else if(0===e.indexOf("Device.UICfg.Call.ConfRefreshTime"))window.confRefreshTime=t;else if(0===e.indexOf("Device.UICfg.Call.isMultiStream"))window.isMultiStream=t,P.info("dealWithUICfgParam isMultiStream: "+window.isMultiStream);else if("Device.UICfg.Conf.EnableDocShare"===e)window.enableDocShare=t;else if(0===e.indexOf("Device.UICfg.FunctionConfig.PersonalManagementPlatform")){if(!window.CLIENTCONFIG.ISMOBILE){var r=parseInt(t);$getState().displayInfo.showPersonalManagement!==r&&($dispatch(coreUi.changeShowPersonalManagement(r)),appService.initMainTray())}}else if(0===e.indexOf("Device.UICfg.FunctionConfig.ChineseHelpUrl")){var n=t;$getState().displayInfo.chineseHelpUrl!==n&&$dispatch(coreUi.changeChineseHelpUrl(n))}else if(0===e.indexOf("Device.UICfg.FunctionConfig.OtherLanguagesHelpUrl")){var a=t;$getState().displayInfo.otherLanguagesHelpUrl!==a&&$dispatch(coreUi.changeOtherLanguagesHelpUrl(a))}else if(0===e.indexOf("Device.UICfg.Conf.TransferChairman"))"1"===t?$dispatch(coreUi.toggleTransferChairman(!0)):$dispatch(coreUi.toggleTransferChairman(!1));else if(0===e.indexOf("Device.UICfg.Conf.CreateMeetingPassword"))P.info("esight config createMeetingPOption(0 NO 1 YES 2 DIS):"+t),"1"===t?($dispatch(coreUi.changeCreateMeetingPassword(!0)),$dispatch(coreUi.changeCreateMeetingPasswordDefault(!0))):"0"===t?($dispatch(coreUi.changeCreateMeetingPassword(!1)),$dispatch(coreUi.changeCreateMeetingPasswordDefault(!1))):($dispatch(coreUi.changeCreateMeetingPasswordOption(!1)),$dispatch(coreUi.changeCreateMeetingPassword(!0)),$dispatch(coreUi.changeCreateMeetingPasswordDefault(!0)));else if("Device.UICfg.PC.CTD.callback.flag"===e)(window.CLIENTCONFIG.ISWIN||"mac"===window.CLIENTCONFIG.PLATFORM)&&("1"===t?$dispatch(coreUi.changeCTDcallbackToPC(!0)):$dispatch(coreUi.changeCTDcallbackToPC(!1)));else if(0===e.indexOf("Device.UICfg.FunctionConfig.enableCHRColPro"))$dispatch(coreUi.changeShowChrCollectPrompt(parseInt(t)));else if(0===e.indexOf("Device.UICfg.Conf.BoardQRMode")){var o=parseInt(t);$getState().synergismInfo.QRMode!==o&&($dispatch(coreUi.changeQRMode(parseInt(t))),coreConf.requestPairCode())}else 0===e.indexOf("Device.UICfg.Conf.BoardQRScheme")?$dispatch(coreUi.changeQRScheme(t)):"Device.UICfg.IM.enableMDXSelfContact"===e?$dispatch(coreUi.changeImMDXSelfContactEnable(t)):"Device.ComCfg.IM.groupNumberLimit"===e?$dispatch(coreUi.setGroupNumberLimit(t)):"Device.ComCfg.Conf.meetingNumberLimit"===e&&$dispatch(coreUi.setMeetingNumberLimit(t))},n.beginDealOBSConfigParams=function(){var e=(0,I.default)(h.default.mark(function e(r){var a,i,s;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P.info("the configParam length is: "+U.length),!(U.length>0)){e.next=17;break}return e.next=4,coreAccount.getLoginModel();case 4:return a=e.sent,e.next=7,coreDb.saveUserConfigList(U);case 7:if(i=$getState().call.callStatus,!(s=!("VIDEO_CONNECTED"===i||"VIDEO_OUT"===i||"CALL_OUT"===i||"CALL_CONNECTED"===i))){e.next=14;break}return e.next=12,n.configParamToTup(U);case 12:e.next=16;break;case 14:P.info("start calling status."),$dispatch(coreUi.isWaitUpdateConfigTUP(!0));case 16:(0,o.default)(window.CLIENTCONFIG,r);case 17:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.configParamToTup=function(){var e=(0,I.default)(h.default.mark(function e(r){var n,a,i,s,u,c,f,d,l,p,_,g,w,E,m,I,C,L,T,S,O,x,N,R,y,b,k,A,M,U,D,G,F,B,H;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.isWaitUpdateConfigTUP(!1)),n=window.CLIENTCONFIG,a={media:{}},i={esightChrEnable:0,esightChrPer:300,esightChrColPer:60},s=!1,u=0,c=0,f=0,d=0,l=0,p="",_=-1,g=-1,w=-1,E=-1,m=-1,I=-1,C=-1,L=-1,T="",S="",e.next=11,coreTup.getCallInstance();case 11:O=e.sent,x=0;case 13:if(!(x<r.length)){e.next=154;break}if(0!==r[x].key.indexOf("Device.ComCfg.Media.")||""===r[x].value){e.next=150;break}if(n.hasOwnProperty(r[x].key)&&r[x].value===n[r[x].key]){e.next=148;break}if(p=r[x].value,"Device.ComCfg.Media.DataArq"!==r[x].key){e.next=21;break}O.config({media:{data_arq:parseInt(p)}}),e.next=148;break;case 21:if("Device.ComCfg.Media.DataHarq"!==r[x].key){e.next=25;break}O.config({media:{data_harq:parseInt(p)}}),e.next=148;break;case 25:if("Device.ComCfg.Media.VideoArq"!==r[x].key){e.next=29;break}O.config({media:{video_arq:parseInt(p)}}),e.next=148;break;case 29:if("Device.ComCfg.Media.VideoHarq"!==r[x].key){e.next=33;break}O.config({media:{video_harq:parseInt(p)}}),e.next=148;break;case 33:if("Device.ComCfg.Media.EcPktInRtp"!==r[x].key){e.next=37;break}O.config({media:{ec_pkt_in_rtp:parseInt(p)}}),e.next=148;break;case 37:if("Device.ComCfg.Media.VideoNetRat"!==r[x].key){e.next=41;break}O.config({media:{net_lossrate:parseInt(p)}}),e.next=148;break;case 41:if("Device.ComCfg.Media.VideoKeyFrameIntervalNetRat"!==r[x].key){e.next=45;break}O.config({media:{keyframe_interval:parseInt(p)}}),e.next=148;break;case 45:if("Device.ComCfg.Media.TmmbrControl"!==r[x].key){e.next=49;break}O.config({media:{fluid_control:parseInt(p)}}),e.next=148;break;case 49:if("Device.ComCfg.Media.VideoARS"!==r[x].key){e.next=53;break}O.config({media:{video_ars:{ars:parseInt(p)}}}),e.next=148;break;case 53:if("Device.ComCfg.Media.VideoARSFrameSize"!==r[x].key){e.next=57;break}O.config({media:{video_ars:{ars_ctrl_framesize:parseInt(p)}}}),e.next=148;break;case 57:if("Device.ComCfg.Media.VideoARSFrameRate"!==r[x].key){e.next=61;break}O.config({media:{video_ars:{ars_ctrl_framerate:parseInt(p)}}}),e.next=148;break;case 61:if("Device.ComCfg.Media.VideoARSBitRate"!==r[x].key){e.next=65;break}O.config({media:{video_ars:{ars_ctrl_bitrate:parseInt(p)}}}),e.next=148;break;case 65:if("Device.ComCfg.Media.VideoArsFec"!==r[x].key){e.next=69;break}O.config({media:{video_ars:{ars_ctrl_fec:parseInt(p)}}}),e.next=148;break;case 69:if("Device.ComCfg.Media.VideoShaping"!==r[x].key){e.next=73;break}O.config({media:{video_ars:{ars_data_shaping:parseInt(p)}}}),e.next=148;break;case 73:if("Device.ComCfg.Media.DataARS"!==r[x].key){e.next=77;break}O.config({media:{data_ars:{ars:parseInt(p)}}}),e.next=148;break;case 77:if("Device.ComCfg.Media.DataARSFrameSize"!==r[x].key){e.next=81;break}O.config({media:{data_ars:{ars_ctrl_framesize:parseInt(p)}}}),e.next=148;break;case 81:if("Device.ComCfg.Media.DataARSFrameRate"!==r[x].key){e.next=85;break}O.config({media:{data_ars:{ars_ctrl_framerate:parseInt(p)}}}),e.next=148;break;case 85:if("Device.ComCfg.Media.DataARSBitRate"!==r[x].key){e.next=89;break}O.config({media:{data_ars:{ars_ctrl_bitrate:parseInt(p)}}}),e.next=148;break;case 89:if("Device.ComCfg.Media.DataArsFec"!==r[x].key){e.next=93;break}O.config({media:{data_ars:{ars_ctrl_fec:parseInt(p)}}}),e.next=148;break;case 93:if("Device.ComCfg.Media.DataShaping"!==r[x].key){e.next=97;break}O.config({media:{data_ars:{ars_data_shaping:parseInt(p)}}}),e.next=148;break;case 97:if("Device.ComCfg.Media.BfcpKeepaliveTime"!==r[x].key){e.next=101;break}O.config({call:{bfcp_keepalive_time:parseInt(p)}}),e.next=148;break;case 101:if("Device.ComCfg.Media.TotalBandwidth"!==r[x].key){e.next=107;break}c=parseInt(p),n["Device.ComCfg.Media.TotalBandwidth"]=c+"",P.info("Device.ComCfg.Media.TotalBandwidth is",c),e.next=148;break;case 107:if("Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"!==r[x].key){e.next=113;break}l=parseInt(p),n["Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"]=l+"",P.info("Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth is",l),e.next=148;break;case 113:if("Device.ComCfg.Media.Mobile.4GTotalBandwidth"!==r[x].key){e.next=119;break}d=parseInt(p),n["Device.ComCfg.Media.Mobile.4GTotalBandwidth"]=d+"",P.info("Device.ComCfg.Media.Mobile.4GTotalBandwidth is",d),e.next=148;break;case 119:if("Device.ComCfg.Media.Mobile.3GTotalBandwidth"!==r[x].key){e.next=125;break}f=parseInt(p),n["Device.ComCfg.Media.Mobile.3GTotalBandwidth"]=f+"",P.info("Device.ComCfg.Media.Mobile.3GTotalBandwidth is",f),e.next=148;break;case 125:if("Device.ComCfg.Media.BFCPMode"!==r[x].key){e.next=138;break}return P.info("esight bfcp trans_mode: "+parseInt(p)),n["Device.ComCfg.Media.BFCPMode"]=p,N={media:{bfcp_param:{floor_ctrl:3,setup:3,trans_type:2===parseInt(p)?1:parseInt(p)}}},O.config(N),R=!1,parseInt(p)!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&parseInt(p)!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(R=!0),e.next=134,coreAccount.configBFCPForTLS({bForceTLSMode:R});case 134:y=e.sent,O.configBFCPTLSParam(y),e.next=148;break;case 138:if("Device.ComCfg.Media.priorityRtp"!==r[x].key){e.next=147;break}return n["Device.ComCfg.Media.priorityRtp"]=p,e.next=142,coreAccount.configRTP();case 142:return b=e.sent,e.next=145,O.config(b);case 145:e.next=148;break;case 147:"Device.ComCfg.Media.EncryptCalloutUseMKI"===r[x].key&&O.config({media:{srtp_mki:parseInt(p)}});case 148:e.next=151;break;case 150:0===r[x].key.indexOf("Device.ComCfg.Sip")?"Device.ComCfg.Sip.LocalPort"===r[x].key?E=parseInt(r[x].value):"Device.ComCfg.Sip.enableSessionTimer"===r[x].key?m=parseInt(r[x].value):"Device.ComCfg.Sip.SessionTime"===r[x].key?I=parseInt(r[x].value):"Device.ComCfg.Sip.sipKeepaliveTime"===r[x].key?(P.info("esight Device.ComCfg.Sip.sipKeepaliveTime = "+parseInt(r[x].value)),O.config({call:{sip_keepalive_time:parseInt(r[x].value)}})):"Device.ComCfg.Sip.RegistExpires"===r[x].key&&(P.info("esight Device.ComCfg.Sip.RegistExpires = "+parseInt(r[x].value)),O.config({call:{regist_timeout:parseInt(r[x].value)}})):0===r[x].key.indexOf("Device.ComCfg.CHR.")?(s=!0,p=r[x].value,"Device.ComCfg.CHR.enableCHR"===r[x].key?i.esightChrEnable="TRUE"===p?1:0:"Device.ComCfg.CHR.CHRPer"===r[x].key?i.esightChrPer=parseInt(p):"Device.ComCfg.CHR.CHRColPer"===r[x].key&&(i.esightChrColPer=parseInt(p))):0===r[x].key.indexOf("Device.ComCfg.Service.")&&("Device.ComCfg.Service.pointPickupActive"===r[x].key?T=r[x].value:"Device.ComCfg.Service.groupPickupActive"===r[x].key&&(S=r[x].value));case 151:x++,e.next=13;break;case 154:if(!s){e.next=161;break}return P.info("get CHR server config, esightChrConfig=",(0,v.default)(i)),e.next=158,coreSetting.packageChrConfigValue(i.esightChrEnable,i.esightChrPer,i.esightChrColPer);case 158:return k=e.sent,e.next=161,O.config(k);case 161:if(0===c&&0===f&&0===d&&0===l){e.next=174;break}return A={},e.next=165,coreAccount.initVideoSettingParam();case 165:return A.media=e.sent,e.next=168,O.config(A);case 168:return e.next=170,coreAccount.configBFCP();case 170:return M=e.sent,e.next=173,O.config(M);case 173:"android"===window.CLIENTCONFIG.PLATFORM&&(U=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,P.info("android hard decoder enter 2",U),window.isHardDecodeToNative(U));case 174:if(D={},G=0,-1!==E&&E!==parseInt(n["Device.ComCfg.Sip.LocalPort"])&&(D.hasOwnProperty("network")||(D.network={}),F={network:{local_sip_port:E}},D.network=(0,o.default)(D.network,F.network),G++),-1!==m&&m!==parseInt(n["Device.ComCfg.Sip.enableSessionTimer"])&&(D.hasOwnProperty("sip")||(D.sip={}),B={sip:{sessiontimer_enable:m}},D.sip=(0,o.default)(D.sip,B.sip),G++),-1!==I&&I!==parseInt(n["Device.ComCfg.Sip.SessionTime"])&&1===m&&(D.hasOwnProperty("sip")||(D.sip={}),H={sip:{session_time:I}},D.sip=(0,o.default)(D.sip,H.sip),G++),""===T||T===n["Device.ComCfg.Service.pointPickupActive"]){e.next=183;break}return P.info("Device.ComCfg.Service.pointPickupActive : "+n["Device.ComCfg.Service.pointPickupActive"]),e.next=183,O.config({service:{server_right:{type:7,active_accesscode:T,deactive_accesscode:"",register:0,right:0}}});case 183:if(""===S||S===n["Device.ComCfg.Service.groupPickupActive"]){e.next=187;break}return P.info("Device.ComCfg.Service.groupPickupActive : "+n["Device.ComCfg.Service.groupPickupActive"]),e.next=187,O.config({service:{server_right:{type:6,active_accesscode:S,deactive_accesscode:"",register:0,right:0}}});case 187:if(!(G>0)){e.next=191;break}return P.info("the configSipInfo is "+(0,v.default)(D)),e.next=191,O.config(D);case 191:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.dealWithServerSetParamNotify=function(){var e=(0,I.default)(h.default.mark(function e(r){var a,o,i,s,u,c,f,d,l,p,_,g,w,E,m,I,C,L,T,S,x,N,R,y,b,k,D,G,F,B,H;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r.Result){e.next=3;break}return P.info("get obs setting config params error!"),e.abrupt("return");case 3:return e.next=5,(0,O.getLoginModel)();case 5:return a=e.sent,a.isObsCfgParams=!0,o=r.param,P.info("get obs setting params data length="+o.length),i=null,s={},e.next=13,coreTup.getCallInstance();case 13:u=e.sent,c={isSTUNParamChanged:!1,isCPEParamChanged:!1,paraCPE:[]},f=new Array,U.splice(0,U.length),$dispatch(coreUi.clearSvcConfEsightResolutionConfig()),d=0;case 19:if(!(d<o.length)){e.next=106;break}if(l=o[d]["ParameterValueStruct.Name"],p=o[d]["ParameterValueStruct.Value"],0!==l.indexOf("Device.ComCfg.Conf.Svc")){e.next=61;break}if(""!==p){e.next=25;break}return e.abrupt("continue",103);case 25:if(l!==M.SVC_Mobile_Conf_HdDecoder){e.next=33;break}if(window.isConfHardCode=p,P.info("get ui config from esight is hard code:"+window.isConfHardCode),!window.CLIENTCONFIG.ISMOBILE){e.next=33;break}return _=coreAccount.initVideoHardCodeParam(),e.next=32,u.configCallHardCodeParam(_);case 32:"android"===window.CLIENTCONFIG.PLATFORM&&(g=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,P.info("android hard decoder enter 0",g),window.isHardDecodeToNative(g));case 33:if(l===M.SVC_AUTOMATIC_ACCEPT_VIDEO_CONF&&P.info("bAutomaticAcceptVideoConf= ",p),l===M.SVC_START_SHARE_BFCP&&(P.info("SVC_START_SHARE_BFCP = ",p),$dispatch(coreUi.changeSwitchShareBfcp(!1))),"Device.ComCfg.Conf.Svc.IsEnableExperieceConf"===l&&(P.info("ENABLE_EXPERIENCE_CONF = "+p),"1"===p?$dispatch(coreUi.changeIsEnableExperienceVedioConf(!0)):$dispatch(coreUi.changeIsEnableExperienceVedioConf(!1))),"Device.ComCfg.Conf.Svc.Conf.ExperienceConfID"===l&&(P.info("EXPERIENCE CONF ID = "+p),$dispatch(coreUi.changeExperienceVedioConfId(p))),"Device.ComCfg.Conf.Svc.Conf.ExperienceConfTimes"===l&&(P.info("EXPERIENCE CONF TIMES = "+p),$dispatch(coreUi.changeExperienceShowTimes(parseInt(p)))),l===M.ENABLE_HISTORY_CONF_LIST&&(P.info("ENABLE_HISTORY_CONF_LIST = ",p),"1"===p?$dispatch(coreUi.changeIsEnableHistoryConfList(!0)):$dispatch(coreUi.changeIsEnableHistoryConfList(!1))),l!==M.SVC_CONF_HME_LOG_SIZE_MB){e.next=47;break}return window.hmeLogSizeMb=parseInt(p),e.next=43,coreAccount.configHMELog();case 43:return w=e.sent,P.info("eSight set configHmeInfo=",w),e.next=47,u.setHMELog(w);case 47:l===M.SVC_DESKTOP_MAX_ENCODE&&(E=parseInt(p),$dispatch(coreUi.changeSvcDesktopMaxEncode(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[E])),m=$getState().conf.svcDesktopMaxEncode,P.info("Svc_OBS_Config get SVC_DESKTOP_MAX_ENCODE esight setting params= ",m)),l===M.SVC_DESKTOP_SPEAKER_BIG_MAX_LOOK&&(I=parseInt(p),$dispatch(coreUi.changeSvcDesktopSpeakerBigMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[I])),P.info("Svc_OBS_Config get SVC_DESKTOP_SPEAKER_BIG_MAX_LOOK esight setting params= ",$getState().conf.svcDesktopSpeakerBigMaxLook)),l===M.SVC_DESKTOP_SPEAKER_SMALL_MAX_LOOK&&(C=parseInt(p),$dispatch(coreUi.changeSvcDesktopSpeakerModeSmallMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[C])),P.info("Svc_OBS_Config get SVC_DESKTOP_SPEAKER_SMALL_MAX_LOOK esight setting params= ",$getState().conf.svcDesktopSpeakerModeSmallMaxLook)),l===M.SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_2_6&&(L=parseInt(p),$dispatch(coreUi.changeSvcDesktopDivideModeMaxLook2_6(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[L])),P.info("Svc_OBS_Config get SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_2_6vesight setting params= ",$getState().conf.svcDesktopDivideModeMaxLook2_6)),l===M.SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_7_16&&(T=parseInt(p),$dispatch(coreUi.changeSvcDesktopDivideModeMaxLook7_16(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[T])),P.info("Svc_OBS_Config get SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_7_16 esight setting params= ",$getState().conf.svcDesktopDivideModeMaxLook7_16)),l===M.SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_17_24&&(S=parseInt(p),$dispatch(coreUi.changeSvcDesktopDivideModeMaxLook17_24(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[S])),P.info("Svc_OBS_Config get SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_17_24 esight setting params= ",$getState().conf.svcDesktopDivideModeMaxLook17_24)),l===M.SVC_MOBILE_SOFT_ENCODE&&(x=parseInt(p),$dispatch(coreUi.changeSvcMobileMaxSoftEncode(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[x])),P.info("Svc_OBS_Config get SVC_MOBILE_SOFT_ENCODE esight setting params= ",$getState().conf.svcMobileMaxSoftEncode)),l===M.SVC_MOBILE_HARD_ENCODE&&(N=parseInt(p),$dispatch(coreUi.changeSvcMobileMaxHardEncode(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[N])),P.info("Svc_OBS_Config get SVC_MOBILE_HARD_ENCODE esight setting params= ",$getState().conf.svcMobileMaxHardEncode)),l===M.SVC_MOBILE_SPEAKERMODE_MAX_LOOK&&(R=parseInt(p),$dispatch(coreUi.changeSvcMobileSpeakerModeMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[R])),P.info("Svc_OBS_Config get SVC_MOBILE_SPEAKERMODE_MAX_LOOK esight setting params= ",$getState().conf.svcMobileSpeakerModeMaxLook)),l===M.SVC_MOBILE_DIVIDEMODE_MAX_LOOK&&(y=parseInt(p),$dispatch(coreUi.changeSvcMobileDivideModeMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[y])),P.info("Svc_OBS_Config get SVC_MOBILE_DIVIDEMODE_MAX_LOOK esight setting params= ",$getState().conf.svcMobileDivideModeMaxLook)),l===M.SVC_HIGHPERFORMANCE_MOBILE_SPEAKERMODE_MAX_LOOK&&(b=parseInt(p),$dispatch(coreUi.changeSvcHighPerformanceMobileSpeakerModeMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[b])),P.info("Svc_OBS_Config get SVC_HIGHPERFORMANCE_MOBILE_SPEAKERMODE_MAX_LOOK esight setting params= ",$getState().conf.svcHighPerformanceMobileSpeakerModeMaxLook)),l===M.SVC_HIGHPERFORMANCE_MOBILE_DIVIDEMODE_MAX_LOOK&&(k=parseInt(p),$dispatch(coreUi.changeSvcHighPerformanceMobileDivideModeMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[k])),P.info("Svc_OBS_Config get SVC_HIGHPERFORMANCE_MOBILE_DIVIDEMODE_MAX_LOOK esight setting params= ",$getState().conf.svcHighPerformanceMobileDivideModeMaxLook)),e.next=103;break;case 61:if(0!==l.indexOf("Device.ComCfg")){e.next=79;break}if(""!==p){e.next=64;break}return e.abrupt("continue",103);case 64:if(0===l.indexOf("Device.ComCfg.CHR.CHRPas")){e.next=70;break}i={key:l,value:p},s[l]=p,U.push(i),e.next=77;break;case 70:return e.next=72,coreSecurity.getPasswordManager();case 72:return D=e.sent,e.next=75,D.setPassword("CHRPassword",p);case 75:G=e.sent,G&&G.salt&&G.cipher&&(p={salt:G.salt,cipher:G.cipher},i={key:"CHRPassword",value:(0,v.default)(p)},coreDb.saveUserConfig(i));case 77:e.next=103;break;case 79:if(0!==l.indexOf("Device.UICfg")){e.next=103;break}if(0!==l.indexOf("Device.UICfg.Conf.ExperienceConferenceID")){e.next=99;break}if(F=coreConf.getExperienceConferenceInfo(p),P.info("ExperienceConferenceID confId: ",F.confId),isNullOrEmpty(F.confPwd)){e.next=93;break}return e.next=86,coreSecurity.getPasswordManager();case 86:return B=e.sent,e.next=89,B.setPassword("experienceConfPwd",F.confPwd);case 89:H=e.sent,H&&H.salt&&H.cipher&&(p={salt:H.salt,cipher:H.cipher,confid:F.confId},i={key:"experienceConfInfo",value:(0,v.default)(p)},coreDb.saveUserConfig(i)),e.next=96;break;case 93:p={salt:"",cipher:"",confid:F.confId},i={key:"experienceConfInfo",value:(0,v.default)(p)},coreDb.saveUserConfig(i);case 96:$dispatch(coreUi.changeExperienceConfId(F.confId)),e.next=103;break;case 99:i={key:l,value:p},f.push(i),n.dealWithUICfgParam(l,p),window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||0===l.indexOf("Device.UICfg.FunctionConfig.enableCHRColPro")&&coreSetting.initChrUpload();case 103:d++,e.next=19;break;case 106:return e.next=108,n.beginDealOBSConfigParams(s);case 108:if(!(f.length>0)){e.next=112;break}return P.info("save ui config to database"),e.next=112,coreDb.saveUserConfigList(f);case 112:return e.next=114,(0,A.syncCertificate)(o);case 114:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.refreshTokenCallback=function(){var r=(0,I.default)(h.default.mark(function r(n){var a,o,i,s,u,c,f,d;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,O.getLoginModel)();case 2:if(a=t.sent,!((o=n.param)&&0===o.result&&o.refresh_token_result&&o.refresh_token_result.auth_token)){t.next=34;break}if(P.info("refreshTokenSuccess"),$dispatch(coreUi.changeuportalTokenErr(!1)),coreCommon.dispatchModuleEvent("login",{event:"tokenUpdate",code:0,data:o.refresh_token_result.auth_token}),a.set({authToken:o.refresh_token_result.auth_token}),P.info("[check upgrade] for refresh [token]"),coreAccount.checkUpgrade({isFirstIn:!1,token:o.refresh_token_result.auth_token}),"WeLink"===window.CLIENTCONFIG.NEW_APP_NAME||window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=17;break}return t.next=14,coreTup.getOfflineFileInstance();case 14:i=t.sent,s=new e(o.refresh_token_result.auth_token,"base64").toString(),i.refreshToken(s);case 17:if(P.info("refreshToken update stg info"),u=o.refresh_token_result.stg_account,c=o.refresh_token_result.stg_pwd,!u||!c){t.next=30;break}return a.set({stgAccount:u}),t.next=24,coreSecurity.getPasswordManager();case 24:if(f=t.sent,t.t0=c,!t.t0){t.next=29;break}return t.next=29,f.setPassword("stgPassword",c);case 29:(0,R.updateStgAuthInfo)({account:u,password:c});case 30:a.isHWUC||coreContact.refreshTocken(),coreCwmp.cwmpConfigToken().then(function(){P.info("refresh cwmp [token] sucess")},function(){P.info("refresh cwmp [token] failed")}),t.next=40;break;case 34:if(P.info("refresh failed "+o.result+" isRepeateCall"+window.isRepeateCall),!window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=38;break}return P.info("it welink refresh [token] no use here"),t.abrupt("return");case 38:d=9===o.result&&!0||!1,coreConf.UportalTokenErr(d);case 40:case"end":return t.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}(),n.switchProxy=(0,I.default)(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.proxyUtil.switchProxy());case 1:case"end":return e.stop()}},e,t)})),n.useSystemProxy=(0,I.default)(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.proxyUtil.useSystemProxy());case 1:case"end":return e.stop()}},e,t)})),n.resetProxy=(0,I.default)(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.proxyUtil.resetProxy());case 1:case"end":return e.stop()}},e,t)})),n.loginToUportal=(0,I.default)(h.default.mark(function e(){var r,a,o,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(r=e.sent,a=r.isResume,o=r.authType,!a||1!==o){e.next=8;break}return P.info("<account_login><3_uportal>OauthType skip resume"),e.abrupt("return");case 8:return e.next=10,n.innerLoginToUportal();case 10:if(i=e.sent,!i.result){e.next=13;break}return e.abrupt("return");case 13:if(i.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||i.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED){e.next=15;break}return e.abrupt("return",(0,x.LoginError)(i));case 15:if(!a){e.next=17;break}return e.abrupt("return",(0,x.LoginError)(i));case 17:if(!coreCommon.isMobile()){e.next=19;break}return e.abrupt("return",(0,x.LoginError)(i));case 19:return e.next=21,n.switchProxy();case 21:return e.next=23,n.innerLoginToUportal();case 23:if(i=e.sent,i.result){e.next=28;break}return e.next=27,n.resetProxy();case 27:return e.abrupt("return",(0,x.LoginError)(i));case 28:case"end":return e.stop()}},e,t)})),n.innerLoginToUportal=(0,I.default)(h.default.mark(function e(){var r,a,o,i,s,u,c,f,d,l,p,_,g,w,v,E,m,I,C,L;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:return r=e.sent,a=r.account,o=r.displayAccount,i=r.serverUportalAddress,s=r.serverUportalPort,u=r.isResume,c=r.tenantid,f=r.loginRecordList,d=r.sipLoginOnly,l=r.password,P.info("<account_login><3_uportal>begin"),e.next=7,coreSecurity.getPasswordManager();case 7:if(p=e.sent,window.isHubEnv){e.next=12;break}return e.next=11,p.getPassword("password");case 11:l=e.sent;case 12:if(P.info("[ loginToUportal ] sipLoginOnly:"+d+", tenantid.length:"+c.length+", loginRecordList.length:"+f.length),!coreCommon.isHuaweiCloudWeLink()||d){e.next=56;break}_=void 0,g=0;case 16:if(!(g<f.length)){e.next=23;break}if(c!==f[g].tenantid){e.next=20;break}return _=f[g],e.abrupt("break",23);case 20:g++,e.next=16;break;case 23:if(isNullOrEmpty(_)&&window.isHubEnv&&(_={account:a},o=a),!_){e.next=56;break}return w=_.thirdcertype?_.tenantid:"",P.info("sso login,tenantcn:"+handlePhoneNumber(_.tenantcn)+",thirdcertype:"+_.thirdcertype),e.next=29,coreAccount.ssoLogin({loginName:o,tenantid:w});case 29:if(v=e.sent,r.crypt_token=v&&v.recv_body.crypt_token,!v.result||!v.recv_body.crypt_token){e.next=42;break}if(r.user_ticket=v.recv_body.crypt_token,o=_.account,isNullOrEmpty(v.recv_body.meetingurl)){e.next=39;break}return e.next=37,coreAccount.getUrlHost(v.recv_body.meetingurl);case 37:i=e.sent,r.serverUportalAddress=i;case 39:r.isOAuth=!0,e.next=56;break;case 42:E=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,e.t0=parseInt(v.code),e.next=1101===e.t0?46:1103===e.t0?48:1146===e.t0?50:52;break;case 46:return E=constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",54);case 48:return E=constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR,e.abrupt("break",54);case 50:return E=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED,e.abrupt("break",54);case 52:return E=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,e.abrupt("break",54);case 54:return P.info("<account_login><3_uportal>end ok/failed"),e.abrupt("return",{result:!1,errorCode:E,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u});case 56:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=61;break}o=window.getLinkSmcUportalAccount?window.getLinkSmcUportalAccount:window.linkSmcW3Acc,l=window.getLinkSmcUportalPassword?window.getLinkSmcUportalPassword:window.linkSmcW3Pas,e.next=64;break;case 61:if(window.CLIENTCONFIG.ISBIGWIN){e.next=64;break}return e.next=64,n.IP.loadLastUportalInfo(i);case 64:m=i,n.IP.value.length>0&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&(P.info("[ loginToUportal ] login replace ip"),m=n.IP.value),I=void 0,C=2;case 68:if(!(C>0)){e.next=122;break}return P.info("[ loginToUportal ] login serverAddress:"+m+", serverPort:"+s),e.next=72,n.uportalLogin({loginAccount:o,password:l,serverAddress:m,serverPort:s});case 72:if(L=e.sent,P.info("[ loginToUportal ] result:"+L.result+";reloginCount:"+C),L.result!==constant.UPORTAL_LOGIN_ERROR.SUCCESS){e.next=81;break}return e.next=77,n.dealWithUportalLoginSuccess(L,m,o);case 77:return I=e.sent,e.abrupt("break",122);case 81:if(L.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_CA_VERIFY_FAILED){e.next=92;break}return e.next=84,n.dealWithUportalLoginFailed(L,o);case 84:return e.next=86,n.dealWithUportalLoginFailedAuth(a,l,m,s);case 86:if(I=e.sent,I.result){e.next=90;break}return P.info("[ loginToUportal ] download ca failed, exit login loop"),e.abrupt("break",122);case 90:e.next=120;break;case 92:if(L.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED){e.next=101;break}return C--,e.next=96,n.dealWithUportalLoginFailed(L,o);case 96:return I=e.sent,P.info("[ loginToUportal ] user or password wrong, exit login loop"),e.abrupt("break",122);case 101:if(L.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_SERVER_REDIRECT){e.next=114;break}return e.next=104,n.dealWithUportalLoginFailedRedirect(L,a,l);case 104:if(I=e.sent,!I.result||!I.serverInfo){e.next=110;break}m=I.serverInfo.address||m,s=I.serverInfo.port||s,e.next=112;break;case 110:return P.info("[ loginToUportal ] 302 failed, exit login loop"),e.abrupt("break",122);case 112:e.next=120;break;case 114:return e.next=116,n.dealWithUportalLoginFailed(L,o);case 116:I=e.sent,m=i,C--,P.info("[ loginToUportal ] reloginCount:"+C);case 120:e.next=68;break;case 122:return P.info("<account_login><3_uportal>end",I.result),e.abrupt("return",I);case 124:case"end":return e.stop()}},e,t)})),n.dealWithUportalLoginSuccess=function(){var e=(0,I.default)(h.default.mark(function e(r,a,o){var i,s,u,c,f,d,l,p,_,g,w;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:if(i=e.sent,s=i.sipLoginOnly,u=i.isOAuth,c=i.isResume,s||u||!coreCommon.isHuaweiCloudWeLink()||window.isHubEnv){e.next=6;break}return e.abrupt("return",n.dealWithAccountMutex());case 6:return b.actionGetCorpResourceAtomic.reset(),b.actionGetCorpResourceAtomic.wait(),f=r.uportal_authorize_result,d=f.user_name,l=f.onebox_app_id,p=f.onebox_server_addr,_=f.corp_id,p&&(_=_||"",coreIm.setOfflineFileConfig(!0,{onebox_app_id:l,onebox_server_addr:p,corp_id:_})),i.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,account:d||(u?i.account:o),corpId:_}),e.next=14,n.updateSiteInfo(r);case 14:if(g=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,resultParams:[1,c?1:0],isTrackTimeCosts:!0}),i.isInUportalLogin=!1,g&&g.serverUportalAddress&&n.IP.value!==g.serverUportalAddress&&(window.CLIENTCONFIG.ISBIGWIN||n.IP.saveLastUportalInfo(a,g.serverUportalAddress),P.info("uportalAddrUpdate")),window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||window.isPluginEnv){e.next=22;break}if(!(0,y.checkIsFirstLogin)()||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=22;break}return(0,y.firstLoginChangePassword)(),e.abrupt("return",{result:!1,errorCode:"fistLoginReject",errorType:constant.LOGIN_ERROR_TYPE.common,isResume:c});case 22:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=35;break}if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=28;break}return e.next=27,window.isFloatWindow;case 27:e.t0=e.sent;case 28:if(!(w=e.t0)){e.next=33;break}P.info("the window is float "),e.next=35;break;case 33:return P.error("has no activity, login err!!!"),e.abrupt("return",{result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common});case 35:if(!window.isHubEnv||i.isIwb){e.next=37;break}return e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT,errorType:constant.LOGIN_ERROR_TYPE.common,isResume:c});case 37:return e.abrupt("return",{result:!0});case 38:case"end":return e.stop()}},e,t)}));return function(t,r,n){return e.apply(this,arguments)}}(),n.dealWithUportalLoginFailedRedirect=function(){var e=(0,I.default)(h.default.mark(function e(r,a,o){var i,s,u,c,f,d,l,p,_,g;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:if(i=e.sent,s=r.uportal_authorize_result.redirect_url,i.OAuthUrl=s,P.info("[ O[Auth] ] enter the third ticket [auth], url:",desensitive(s)),"Huawei Meeting"!==window.CLIENTCONFIG.NEW_APP_NAME||-1!==s.indexOf("cloudportal")||window.isHubEnv){e.next=8;break}return e.abrupt("return",n.dealWithAccountMutex());case 8:if(i.isOAuth=!0,u=void 0,c=void 0,-1===s.indexOf("cloudportal")){e.next=23;break}if(f=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(d=f.exec(s))){e.next=19;break}l=d[1],p=d[2],_=d[3],u=l||p,c=_&&_||0,e.next=20;break;case 19:return e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:i.isResume});case 20:i.isOAuth=!1,e.next=30;break;case 23:return e.next=25,(0,N.getOAuthTicket)(a,o);case 25:return g=e.sent,e.next=28,(0,N.getOAuthAccount)(g);case 28:i.account=e.sent,i.user_ticket=g;case 30:return e.abrupt("return",{result:!0,serverInfo:{address:u,port:c}});case 31:case"end":return e.stop()}},e,t)}));return function(t,r,n){return e.apply(this,arguments)}}(),n.dealWithUportalLoginFailedAuth=function(){var e=(0,I.default)(h.default.mark(function e(r,n,a,o){var i,s,u,c,f;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,s="",u=!1,e.next=5,(0,O.getLoginModel)();case 5:if(c=e.sent,f=function(){var e=(0,I.default)(h.default.mark(function e(s){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.ret){e.next=5;break}return P.info("userClick to start login download cacert"),e.next=4,(0,b.startLoginDownLoadCaCert)({account:r,password:n,serverAddress:a,serverPort:o});case 4:i=e.sent;case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=10,window.confirm(language.CA_CERT_IS_NOT_TRUSTED).then(f);case 10:e.next=14;break;case 12:return e.next=14,window.confirm(language.CA_CERT_IS_NOT_TRUSTED,!0).then(f);case 14:return null===i?(P.info("user cancel download cacert files"),u=!1,s="USER_CANCEL_DOWNLOAD_CA_CERT"):i&&0===i.result?(P.info("Download cacert success, re-login to uportal"),u=!0,s=""):(P.info("download cacert files failed"),u=!1,s=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR),e.abrupt("return",{result:u,errorCode:s,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c.isResume});case 16:case"end":return e.stop()}},e,t)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.dealWithUportalLoginFailed=function(){var e=(0,I.default)(h.default.mark(function e(r,a){var o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:return o=e.sent,window.CLIENTCONFIG.ISBIGWIN||n.IP.saveLastUportalInfo("",""),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,resultParams:[0,r.result,o.isResume?1:0],isTrackTimeCosts:!0}),o.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_FAILED,account:o.isOAuth?o.account:a}),P.error("baseLogin:loginUportal result=",r.result),o.isInUportalLogin=!1,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.uportalLoginFailed(r.result),e.abrupt("return",{result:!1,errorCode:r.result,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:o.isResume});case 10:case"end":return e.stop()}},e,t)}));return function(t,r){return e.apply(this,arguments)}}(),n.dealWithAccountMutex=(0,I.default)(h.default.mark(function e(){var r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLoginModel)();case 2:return r=e.sent,r.isInUportalLogin=!1,P.info("[ loginToUportal ] login fail. workplace account can not login on huawe meeting"),alert(language.LOGIN_ERR_DISTINGUISH_HUAWEIMEETING_OR_WORKPLACE),e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DISTINGUISH_HUAWEIMEETING_OR_WORKPLACE,errorType:constant.LOGIN_ERROR_TYPE.common,isResume:r.isResume});case 7:case"end":return e.stop()}},e,t)})),n.IP=new D,n.proxyUtil=new G,n}return(0,g.default)(r,t),r}(S.default),B=void 0;t.getUportalApi=function(){return isNullOrEmpty(B)&&(B=new F),B}}).call(t,r(140).Buffer)},271:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){(0,g.resumelogger)("<0_Info> pcSuspend, waiting pcResume"),i("pcSuspend")}function o(){navigator.onLine?((0,g.resumelogger)("<0_Info> pcResume,now is online"),l("pcResume")):(0,g.resumelogger)("<0_Info> pcResume,now is offline,when online do resume")}function i(e){Object.type(e)!==Object.type.STRING&&(e="pcOffline"),(0,g.resumelogger)("<0_Info> "+e),(0,g.setAppResumeState)(constant.APP_STATE.NETWORK_ERROR),coreCommon.setIsNetworkOk({flag:!1,info:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.doSipResumeAndEserverDetect=t.clearResumeService=t.registerResumeEvent=t.stopResume=t.resume=void 0;var s=r(1),u=n(s),c=r(2),f=n(c),d=function(){var e=(0,f.default)(u.default.mark(function e(t){var r,n,a,o,i,s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:r=e.sent,e.t0=t.netType,e.next=e.t0===constant.NETWORK_TYPE.TYPE_NONE?6:e.t0===constant.NETWORK_TYPE.TYPE_WIFI?11:e.t0===constant.NETWORK_TYPE.TYPE_2G?11:e.t0===constant.NETWORK_TYPE.TYPE_3G?11:e.t0===constant.NETWORK_TYPE.TYPE_4G?11:e.t0===constant.NETWORK_TYPE.TYPE_5G?11:e.t0===constant.NETWORK_TYPE.TYPE_ETHERNET?11:35;break;case 6:return(0,g.resumelogger)("<0_Info> mobileNetworkChange -> offline"),(0,g.setAppResumeState)(constant.APP_STATE.NETWORK_ERROR),coreCommon.setIsNetworkOk({flag:!1,info:"mobileNetworkChange,no network"}),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(w.info(" xhx_se change local qos level setMicValue Zero"),$dispatch(coreUi.changeCallLocalQoslevel(0)),(0,g.cleraQosMediaInfo)()),e.abrupt("break",36);case 11:if((0,g.resumelogger)("<0_Info> mobileNetworkChange -> online"),coreCommon.setIsNetworkOk({flag:!0,info:"mobileNetworkChange,has network"}),!t.newIp||"0.0.0.0"===t.newIp||O===t.newIp){e.next=19;break}n=r.sipLoginOnly,n?((0,g.setAppResumeState)(constant.APP_STATE.RECONNECTING),coreAccount.sipResume({message:"mobileNetworkChange, sipLoginOnly, e:"+t})):C({message:"mobileNetworkChange, e:"+t}),O=t.newIp,e.next=34;break;case 19:if(!t.newIp||"0.0.0.0"===t.newIp){e.next=31;break}return e.next=22,x(t,!0);case 22:O=t.newIp,a=r.isSipRegSuc(),o=$getState().conf.confHandle,i=void 0===o||""===o,s=$getState().call.callStatus,c=!("VIDEO_CONNECTED"===s||"VIDEO_OUT"===s||"CALL_OUT"===s||"CALL_CONNECTED"===s),a&&c&&i&&(0,_.reConfigVideoAndDataSetting)(),e.next=34;break;case 31:return(0,g.resumelogger)("<0_Info> mobileNetworkChange -> offline, e:"+t),(0,g.setAppResumeState)(constant.APP_STATE.NETWORK_ERROR),e.abrupt("break",36);case 34:case 35:return e.abrupt("break",36);case 36:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,f.default)(u.default.mark(function e(t){var r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object.type(t)!==Object.type.STRING&&(t="pcOnline"),(0,g.resumelogger)("<0_Info> pcOnline"),e.next=4,window.updateLocalIp();case 4:return e.next=6,coreAccount.getLoginModel();case 6:r=e.sent,n=r.sipLoginOnly,coreCommon.setIsNetworkOk({flag:!0,info:t}),n?coreAccount.sipResume({message:t+", sipLoginOnly"}):C({message:t+", ip:"+handleIp(window.localIp)});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,f.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:t=e.sent,t.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER,coreAccount.stopLocalServer(),t.sipLoginOnly?coreAccount.sipResume({message:"StgDisConnected"}):C({message:"StgDisConnected, ip:"+handleIp(window.localIp)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=r(290),g=r(267),w=coreLogger.getLogger("login")("resume"),v=new coreCommon.Timer({name:"willResumeTimer",describe:"resume"}),E=null,h=function(e){return e&&e.result||!window.isOffline},m=function(){L("resumeSuccess"),(0,g.resumelogger)("<3_Success>"),(0,g.setAppResumeState)(constant.APP_STATE.ONLINE)},I=function(e){(0,g.resumelogger)("<4_Fail> resumeError "+e)},C=t.resume=function(e){var t=e.message;E?(0,g.resumelogger)("<0_check> now is resuming,not do again, message:"+t):((0,g.resumelogger)("<0_check> message:"+t+",start doResume"),E=new coreCommon.TimerTask({task:function(e){return T({message:t,resumeCount:e})},name:"resume"}),v.scheduleAtFixedRate(E,1e3,!0))},L=(t.stopResume=function(){var e=(0,f.default)(u.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,g.resumelogger)("<6_StopResume> reason:"+t),L("stopResume");case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";E&&(w.info("cancelResumeTimer "+e),E.cancel(),v.cancel(),E=null)}),T=function(){var e=(0,f.default)(u.default.mark(function e(t){var r,n,a=t.message,o=t.resumeCount,i=void 0===o?0:o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,coreCommon.getIsNetworkOk()){e.next=5;break}return(0,g.resumelogger)("<1_Start> now _networkIsOk is false ,not do resume, message:"+a+",resumeCount:"+i),L("now _networkIsOk is false"),e.abrupt("return");case 5:return e.next=7,coreAccount.getLoginModel();case 7:if(r=e.sent,!r.userSelectOffline||!window.CLIENTCONFIG.USE_IM){e.next=12;break}return(0,g.resumelogger)("<1_Start> now user has select offline, not do resume,wait user click online, message:"+a+",resumeCount:"+i),L("now user has select offline"),e.abrupt("return");case 12:if((0,g.resumelogger)("<1_Start> message:"+a+",resumeCount:"+i),window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=16;break}e.next=20;break;case 16:if((0,g.getResumeEnable)()){e.next=20;break}return(0,g.resumelogger)("<5_Stop> isResumeEnable=false, stop do resume"),L("isResumeEnable=false"),e.abrupt("return");case 20:if(!r.loginDisable){e.next=24;break}return(0,g.resumelogger)("<2_DoResume> loginDisable is true"),L("loginDisable is true"),e.abrupt("return");case 24:return window.dispatchEvent(new Event("CloudLinkresume")),(0,g.setAppResumeState)(constant.APP_STATE.RECONNECTING),e.next=28,coreAccount.login({isResume:!0});case 28:n=e.sent,h(n)?m():I("login error"),e.next=37;break;case 32:e.prev=32,e.t0=e.catch(0),w.error("<account_resume><4_Fail> error:",e.t0),I("catch error"),L("catch error");case 37:case"end":return e.stop()}},e,void 0,[[0,32]])}));return function(t){return e.apply(this,arguments)}}(),S=(t.registerResumeEvent=function(){var e=(0,f.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:(0,g.setResumeEnable)(!0),(0,g.resumelogger)("<0_Info> RegisterResumeEvent"),window.CLIENTCONFIG.ISMOBILE?window.addEventListener("networkchange",d):(window.addEventListener("suspend",a),window.addEventListener("resume",o),window.addEventListener("offline",i),window.addEventListener("online",l),window.addEventListener("stgTunnelDisconnected",p));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.clearResumeService=function(){var e=(0,f.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,g.resumelogger)("<0_Info> ClearResumeService"),(0,g.setResumeEnable)(!1),window.CLIENTCONFIG.ISMOBILE?window.removeEventListener("networkchange",d):(window.removeEventListener("suspend",a),window.removeEventListener("resume",o),window.removeEventListener("offline",i),window.removeEventListener("online",l),window.removeEventListener("stgTunnelDisconnected",p));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),O=null,x=t.doSipResumeAndEserverDetect=function(){var e=(0,f.default)(u.default.mark(function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:r=e.sent,(0,g.resumelogger)("<0_Info> doSipResumeAndEserverDetect ,message:"+t),window.CLIENTCONFIG.ISMOBILE&&r.isMultiDeviceLogined?x&&(0,g.setAppResumeState)(constant.APP_STATE.ONLINE):coreAccount.sipResume({message:"doSipResumeAndEserverDetect",shouldUpdateResumeState:n}),r.useIM&&(0,g.getResumeEnable)()&&coreIm.checkEServerIsOnline();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},272:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.serGroupPickupCfg=t.serPointPickupCfg=t.restoreMAAConfControl=t.reConfigVideoAndDataSetting=t.initVideoSettingParam=t.initVideoHardCodeParam=t.configBFCPForTLS=t.configBandwidthLimit=t.configSessionTimer=t.configBFCP=t.configVideo=t.configRTP=t.configMKI=t.configRejectCallType=t.configCall=t.configSip=t.configIPCallServer=t.configHMELog=void 0;var a=r(3),o=(n(a),r(132)),i=n(o),s=r(1),u=n(s),c=r(69),f=n(c),d=r(2),l=n(d),p=r(229),_=coreLogger.getLogger("logic")("common/sipCallConfig"),g=window.CLIENTCONFIG,w=(t.configHMELog=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=10,1===window.CLIENTCONFIG.IS_HME_DEBUG&&(t=200),window.hmeLogSizeMb&&(t=window.hmeLogSizeMb),r={audio_log_level:3,audio_max_size:10,video_log_level:3,video_max_size:t},_.info("HMEConfig =",(0,f.default)(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configIPCallServer=function(){return{log_path:window.LOG_PATH,network:{local_ipv4:window.localIp,user_agent:"WeLink-Mobile"},audio:{audio_codec:"112,9,8,0,98,18",dtmf_mode:1,net_ate_level:2,audio_rfc2198:{switch:1,red_pt:121,red_level:3}},sip:{user_type:1,tls_rootcertpath:"",tls_server_certpath:"",tls_anonymous_enable:0,trans_mode:0}}},t.configSip=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r,n,a,o,i,s,c,f,d,l,p,v,E,h,m,I,C,L,T,S,O,x,N,R,y,b,k,A,P,M,U,D,G,F,B,H,W,V,K,Y,j,q,$,X,z,J,Q,Z,ee,te,re=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,r=t.sipServerAddress,n=t.sipServerPort,a=t.sipTlsServerAddress,o=t.sipTlsPort,i=t.sipTlsServerBackup1,s=t.sipTlsPortBackup1,c=t.sipTlsServerBackup2,f=t.sipTlsPortBackup2,d=t.sipTlsServerBackup3,l=t.sipTlsPortBackup3,p=t.sipServerBackup1,v=t.sipServerPortBackup1,E=t.sipServerBackup2,h=t.sipServerPortBackup2,m=t.sipServerBackup3,I=t.sipServerPortBackup3,C=t.sipPasswordType,L=t.sipOutgoingAccCode,T=t.fireWallMode,S=t.sipDomain,O=t.serverUportalAddress,x=t.sipLoginissiptls,N=t.sipLoginOnly,R=t.tempSipNick,y=t.sipTransMode,b=t.isSupportCACertCheck,k=t.sipWhiteList,A=t.deployMode,P=t.localIpFromUportal,_.info("config sip param",r,n,p,v,E,h,m,I,a,o,i,s,c,f,d,l,desensitive(C),L,T,S,O),M=$getState().conf,U=M.confTempAcsNick,D=M.confTempAcsAccount,G=constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_LINE,F=window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:constant.USER_AGENT.PC,G=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===T?constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG:constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN===T?constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_INNERSVN:constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_LINE,_.info("config sip stgModeForCall "+G+", 0:sbc,1:stg,2:svn,3:butt"),window.CLIENTCONFIG.USE_IM||(F=window.CLIENTCONFIG.ISMOBILE?"Huawei TE Mobile":"Huawei TE Desktop"),_.info("config sip deployMode "+A),A===constant.MEETING_NET_TYPE.SMC_MEETING&&(F="CloudLink SoftClient"),1===window.SERVERCONFIG.HWUC&&(S=r),_.info("serverUportalAddress ="+O+", sipServerAddress ="+r+", sipDomain"+S+", isForTempLogin = "+re),B=coreCommon.isHuaweiCloud(O),re&&(B=!0),N&&(B=1===x),H={account_pwd_type:parseInt(C)||0,account_label_name:isNullOrEmpty($getState().myInfo.name)?$getState().myInfo.account:$getState().myInfo.name},_.info("config sip account_label_name default "+isNullOrEmpty(H.account_label_name)+" "+isNullOrEmpty($getState().myInfo.name)+" "+isNullOrEmpty($getState().myInfo.account)),re&&(_.info("config sip account_label_name forTempLogin "),H={account_pwd_type:parseInt(C)||0,account_label_name:isNullOrEmpty(U)?D:U}),N&&!isNullOrEmpty(R)&&(_.info("config sip account_label_name sipLoginOnly "),H={account_pwd_type:parseInt(C)||0,account_label_name:R}),!isNullOrEmpty(H.account_label_name)||N){e.next=29;break}return _.info("config sip account_label_name from contactModule "),e.next=25,coreContact.getContactByAccount(t.account);case 25:W=e.sent,_.info("config sip account_label_name from contactModule success"),H.account_label_name=getContactName(W),_.info("config sip account_label_name from util function");case 29:if(V="",isNullOrEmpty(H.account_label_name)||(V=H.account_label_name.length<=2?H.account_label_name.substr(0,1)+"**":H.account_label_name.substr(0,1)+"**"+H.account_label_name.substr(-1)),_.info("esight config siptls is null,use uportal siptlsmode is "+x+",account_label_name = "+V),B=1===x,G===constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG&&(B=!1),K=0,window.CLIENTCONFIG.ENABLE_IT_MEETING&&(B=!0,K=1),0===y&&(b=!1),Y=B?1:y||0,_.info("config sip trans_mode : "+Y+" , 1: tls: 0: udp"),j="",q="",$="",X="",z="",J="",Q="",Z="",o>0&&x&&G!==constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG?(j=a,q=o,$=i,X=s,z=c,J=f,Q=d,Z=l):(j=r,q=B?5061:n||5060,$=p,X=B?5061:v||5060,z=E,J=B?5061:h||5060,Q=m,Z=B?5061:I||5060),_.info("sipTlsServerAddress , sipLoginissiptls : "+x+" realSipServerAddress:"+j+" , realSipServerPort : "+q),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=56;break}return _.info("[IT-Meeting] update local IP before sip register."),K=0,e.next=54,window.updateLocalIp(!0);case 54:e.next=59;break;case 56:return _.info("config sip update local IP before sip register."),e.next=59,window.updateLocalIp(!0);case 59:if(_.info("config sip update local IP : "+handleIp(window.localIp)),ee=window.localIp,isNullOrEmpty(P)){e.next=67;break}ee=P,_.info("config sip update local IP from uportal : "+handleIp(ee)),t.localIpFromUportal="",e.next=71;break;case 67:if(window.CLIENTCONFIG.ISBIGWIN){e.next=71;break}return e.next=70,w(j,q);case 70:ee=e.sent;case 71:return te={log_path:window.LOG_PATH,network:{sip_svr_addr:S,sip_svr_port:q,backup1_addr:isNullOrEmpty($)?"":S,backup1_port:q,backup2_addr:isNullOrEmpty(z)?"":S,backup2_port:q,backup3_addr:isNullOrEmpty(Q)?"":S,backup3_port:q,local_ipv4:ee,local_sip_port:parseInt(g["Device.ComCfg.Sip.LocalPort"]),user_agent:F,force_dereg_disconnect_tls:1,net_environment:1===window.SERVERCONFIG.HWUC?8:0,proxy_addr:j,proxy_port:parseInt(q),proxy_backup1_addr:$,proxy_backup1_port:parseInt(X),proxy_backup2_addr:z,proxy_backup2_port:parseInt(J),proxy_backup3_addr:Q,proxy_backup3_port:parseInt(Z)},account:H,call:{param_outgoingcode:L,cfg_firewall_mode:G,cfg_welink_symbol:window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?1:0,call_anonymous_enable:B?1:b?1:0,call_ipcall_enable:0,sip_keepalive_time:parseInt(g["Device.ComCfg.Sip.sipKeepaliveTime"]),bfcp_keepalive_time:parseInt(g["Device.ComCfg.Media.BfcpKeepaliveTime"])},sip:{audvie_mode:1,user_type:window.SERVERCONFIG.HWUC?0:1,trans_mode:Y,tls_anonymous_enable:K,root_cert_path:window.EXEC_PATH+"\\",tls_version:7,regist_timeout:window.CLIENTCONFIG.ISBIGWIN?600:parseInt(g["Device.ComCfg.Sip.RegistExpires"]),white_list:k||"",white_list_count:k&&k.length>0?k.length:0,pai_priority:1,check_cseq:window.CLIENTCONFIG.ISBIGWIN?0:1},conf:{use_maa_confctrl:0,enable_ms_dataconf:1,ido_over_bfcp_version:parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.IsIdoBfcpRetransmission"])}},_.info("sip ido retransmission flag bit",parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.IsIdoBfcpRetransmission"])),e.abrupt("return",te);case 74:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t,r){var n,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.localIp,!window.CLIENTCONFIG.ISWIN&&!window.CLIENTCONFIG.ISMAC){e.next=10;break}return _.info("checkLocalIpAddr for win and mac, use tup api"),e.next=5,coreTup.getToolInstance();case 5:return a=e.sent,e.next=8,a.tupToolGetLocalIp(t,r,!1);case 8:o=e.sent,0===o.result&&""!==o.param.local_ip?(_.info("checkLocalIpAddr:tup ret:"+handleIp(o.param.local_ip)),"0.0.0.0"===o.param.local_ip||"127.0.0.1"===o.param.local_ip||o.param.local_ip.startsWith("169.254.")?(n=window.localIp,_.info("checkLocalIpAddr: tup ret invalide, user nodejs:"+handleIp(n))):(n=o.param.local_ip,_.info("checkLocalIpAddr: use tup:"+handleIp(n)))):(n=window.localIp,_.info("checkLocalIpAddr: user nodejs:"+handleIp(n)));case 10:return _.info("checkLocalIpAddr: "+handleIp(n)),e.abrupt("return",n);case 12:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),v=(t.configCall=function(){var e=Number($getState().setting.micAgc),t=parseInt(g["Device.ComCfg.Media.StreamAutomaticallyHangUp"]),r=window.CLIENTCONFIG.ISMOBILE?window.DEFAULT_CAMERA_IMG_PATH:window.VIDEO_DEFAULT_IMG+"default_camera.bmp",n=Number($getState().call.cameraNum),a={audio:{audio_codec:"112,9,8,0,98,18",dtmf_mode:1,net_ate_level:2,send_empty_audio_pkt:1,netate_redpt_switch:0,audio_pkt_red_num_in_stg:{opus_repeat_num:1,other_repeat_num:2},audio_rfc2198:{switch:1,red_pt:121,red_level:3},audio_anr:3,audio_aec:1,audio_agc:e,ilbcmode:20,audio_band_limit:{lowest_band_width:64,lowest_audio_codec:"112,98,18",lower_band_width:384,lower_audio_codec:"112,98,18,9,8,0"},audio_port_range:{min_port:10002,max_port:65528}},media:{video_preview_type:0===n?0:2,lowbandwidth_ability:1,loose_port_nego:1,chan_upd_dyn:1,video_default_image:0===n?r:"",enable_audio_bfcp:window.isSupportiDo?1:0},call:{stream_detect_enable:t,stream_detect_inrval:5}};return _.info("configCallInfo =",(0,f.default)(a)),a},t.configRejectCallType=function(){var e={sip:{reject_type:2}};return _.info("config[sip][reject_type] = ",e),e},t.configMKI=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(g["Device.ComCfg.Media.EncryptCalloutUseMKI"]),r={media:{srtp_mki:t}},_.info("configMKIInfo =",(0,f.default)(r)),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configRTP=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r,n,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,r=t.sipLoginissrtp,n=t.sipLoginOnly,a=t.srtpMode,o=a,o=""!==g["Device.ComCfg.Media.priorityRtp"]?parseInt(g["Device.ComCfg.Media.priorityRtp"]):1===r?1:0,i=2,0===o&&(i=1),n&&(o=1===r?1:0),s={media:{srtp_mode:o,rtp_priority:i,merge_srtp_rtp:1,support_ec_direction:1}},_.info("configRTPInfo =",(0,f.default)(s)),e.abrupt("return",s);case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configVideo=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r,n,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,I();case 3:return t.media=e.sent,r={},r.media=m(),n={},n.media=C(),a={},a.media=L(),o={media:{}},o.media=(0,i.default)({},t.media,r.media,n.media,a.media),_.info("configVideoInfo =",(0,f.default)(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configBFCP=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,E();case 3:return t.media=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),E=(t.configSessionTimer=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(g["Device.ComCfg.Sip.enableSessionTimer"]),r=parseInt(g["Device.ComCfg.Sip.SessionTime"]),n={sip:{sessiontimer_enable:t,session_time:r}},_.info("config[Session]TimerInfo =",desensitive(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configBandwidthLimit=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(g["Device.ComCfg.Media.BandwidthLimit"]),r={media:{video_bitrate_limited:t}},_.info("configBandwidthLimitInfo =",r),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(){var t,r,n,a,o,i,s,c,f,d,l,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,s=void 0,e.next=3,coreAccount.getLoginModel();case 3:if(s=e.sent,t=g.DATA_CONFIG_MEDIA_LEVEL,r=g.DATA_CONFIG_MEDIA_MAX_MBPS,n=g.DATA_CONFIG_MEDIA_MAX_BR,a=g.DATA_CONFIG_MEDIA_MAX_FS,o=4096,i=0,!window.CLIENTCONFIG.ISMOBILE){e.next=26;break}return e.next=13,coreTup.getCallInstance();case 13:if(c=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=21;break}return e.next=17,c.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 17:f=e.sent,0===f.result?(_.info("[IT-Meeting] mediaGetHdaccelerate success, hdencoder = "+f.param.hdaccelerate.hdencoder),i=f.param.hdaccelerate.hdencoder):_.error("[IT-Meeting] mediaGetHdaccelerate failed, result = "+f.result),e.next=25;break;case 21:return e.next=23,c.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 23:d=e.sent,0===d.result?(_.info("mediaGetHdaccelerate success, hdencoder = "+d.param.hd_accelerate.hdencoder),i=d.param.hd_accelerate.hdencoder):_.error("mediaGetHdaccelerate failed, result = "+d.result);case 25:o=T(i);case 26:return _.info("The default bandWidth is: "+o),l=void 0,window.CLIENTCONFIG.ISMOBILE?(o>=384?(t=22,r=27e3,n=g.DATA_CONFIG_MEDIA_MAX_BR,a=9e3):(t=20,r=10800,n=g.DATA_CONFIG_MEDIA_MAX_BR,a=3600),l={table_num:4,param_set:[{band_width:300,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:300,min_bit_rate:32},{band_width:192,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]}):(t=31,r=9e4,n=g.DATA_CONFIG_MEDIA_MAX_BR,a=9e3,l={table_num:6,param_set:[{band_width:512,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:512,min_bit_rate:32},{band_width:384,width:1920,height:1080,max_frame_rate:3,min_frame_rate:1,max_bit_rate:384,min_bit_rate:32},{band_width:256,width:1920,height:1080,max_frame_rate:2,min_frame_rate:1,max_bit_rate:256,min_bit_rate:32},{band_width:192,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]},window.CLIENTCONFIG.ISBIGWIN&&(t=40,r=246e3,n=g.DATA_CONFIG_MEDIA_MAX_BR,a=8192,l={table_num:8,param_set:[{band_width:1536,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:1536,min_bit_rate:32},{band_width:1152,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:1152,min_bit_rate:32},{band_width:512,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:512,min_bit_rate:32},{band_width:384,width:1920,height:1080,max_frame_rate:3,min_frame_rate:1,max_bit_rate:384,min_bit_rate:32},{band_width:256,width:1920,height:1080,max_frame_rate:2,min_frame_rate:1,max_bit_rate:256,min_bit_rate:32},{band_width:192,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]})),p=512,p=o<384?o/2:o<512?192:o<768?256:o<1152?384:o<2048?512:o<2880?768:o<3840?1536:o<5760?1920:o/2,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===s.fireWallMode&&(window.CLIENTCONFIG.ISMOBILE?p=o>=384?192:o/2:o>=768&&o<1024?p=192:o>=1024&&o<=4096&&(p=256)),e.abrupt("return",h(s,t,a,r,p,l));case 33:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),h=function(e,t,r,n,a,o){var i=window.CLIENTCONFIG,s=parseInt(i["Device.ComCfg.Media.BFCPMode"]);2===s&&(s=1);var u=coreCommon.isHuaweiCloud(e.serverUportalAddress),c=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===e.fireWallMode,d=parseInt(i["Device.ComCfg.Media.DataNetRat"]),l=parseInt(i["Device.ComCfg.Media.DataKeyFrameIntervalNetRat"]);window.CLIENTCONFIG.ISMOBILE&&(d=5,l=0);var p=c?0:parseInt(i["Device.ComCfg.Media.DataHarq"]),g=u?0:parseInt(i["Device.ComCfg.Media.DataARS"]),w=u?0:parseInt(i["Device.ComCfg.Media.DataARSFrameSize"]),v=u?0:parseInt(i["Device.ComCfg.Media.DataARSFrameRate"]),E=u?0:parseInt(i["Device.ComCfg.Media.DataARSBitRate"]),h=u?0:parseInt(i["Device.ComCfg.Media.DataArsFec"]),m=u?0:parseInt(i["Device.ComCfg.Media.DataShaping"]),I=c?512:384,C={enable_bfcp:1,enable_data:1,aux_fir_response_interval:500,bfcp_param:{floor_ctrl:3,setup:3,trans_type:s},bfcp_port_range:{min_port:5070,max_port:5090,ulTlsPort:5071},data_framesize:{decode_framesize:16,framesize:3},data_framerate:{frame_rate:3,min_frame_rate:1},data_port_range:{min_port:10006,max_port:65532},data_level:{level:t,max_fs:r,max_mbps:n},data_datarate:{max_bw:a},tmmbr_threshold:{data_limit:I,min_data_bandwidth:64,min_video_bandwidth:64},data_codec:"106",data_arq:parseInt(i["Device.ComCfg.Media.DataArq"]),data_harq:p,data_errorcorrecting:i.DATA_CONFIG_MEDIA_DATA_ERRORCORRECTING,data_net_lossrate:d,data_keyframe_interval:l,data_ars:{ars:g,ars_ctrl_framesize:w,ars_ctrl_framerate:v,ars_ctrl_bitrate:E,ars_ctrl_fec:h,ars_data_shaping:m},data_h264_quality_level_table:{param_setnumber:4,quality_level_param_set:[{codec_name:"",pt:105,profile_idc:66,packet_mode:1,level_asymmetry:1,priority:3},{codec_name:"",pt:106,profile_idc:66,packet_mode:0,level_asymmetry:1,priority:4},{codec_name:"",pt:107,profile_idc:100,packet_mode:1,level_asymmetry:1,priority:1},{codec_name:"",pt:108,profile_idc:100,packet_mode:0,level_asymmetry:1,priority:2}]}};return C.data_resolution_table=o,_.info("media:BFCP参数 media =",(0,f.default)(C)),C},m=(t.configBFCPForTLS=function(){var e=(0,l.default)(u.default.mark(function e(t){var r,n,a,o,i,s,c,f,d,l,g,w,v,E,h,m,I,C,L,T,O,x,N,R,y,b,k;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.decryptKMC(window.bfcpp);case 2:if(r=e.sent,n=r&&r.param&&r.param.PlainText||"",_.info("configBFCPForTLS mode : "+t+" path: "+window.EXEC_PATH),_.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===n?"failed":"success")),a=window.EXEC_PATH+"/BfcpTLS/",o=window.EXEC_PATH+"/BfcpTLS/server.pem",i=window.EXEC_PATH+"/BfcpTLS/server_key.pem","win"!==window.CLIENTCONFIG.PLATFORM&&"bigwin"!==window.CLIENTCONFIG.PLATFORM||(a=window.EXEC_PATH+"\\BfcpTLS\\",o=window.EXEC_PATH+"\\BfcpTLS\\server.pem",i=window.EXEC_PATH+"\\BfcpTLS\\server_key.pem"),window.CLIENTCONFIG.ISMOBILE){e.next=53;break}return e.next=13,coreDb.queryLoginSetting({key:"importCertificate"});case 13:return s=e.sent,e.next=16,coreDb.queryLoginSetting({key:"certificateName"});case 16:return c=e.sent,"{}"===s&&(s=null),"{}"===c&&(c=null),_.info("_importCertificate : "+s+" _certificateName: "+c),e.next=22,(0,p.loginforverificationCertificateLogic)();case 22:if(f=e.sent,_.info("是否存在:"+f),!f||isNullOrEmpty(s)||isNullOrEmpty(c)){e.next=40;break}if("false"!==s.value||""===c.value){e.next=38;break}return d=S(),e.next=29,coreSecurity.decryptKMC(d);case 29:r=e.sent,n=r&&r.param&&r.param.PlainText||"",_.info("使用导入的证书"),_.info("configBFCPForTLS mode : "+t+" path: "+APP_DATA_PATH),_.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===n?"failed":"success")),a=APP_DATA_PATH+"/ImpBfcpTLS/",o=APP_DATA_PATH+"/ImpBfcpTLS/server.pem",i=APP_DATA_PATH+"/ImpBfcpTLS/server_key.pem","win"!==window.CLIENTCONFIG.PLATFORM&&"bigwin"!==window.CLIENTCONFIG.PLATFORM||(a=APP_DATA_PATH+"\\ImpBfcpTLS\\",o=APP_DATA_PATH+"\\ImpBfcpTLS\\server.pem",i=APP_DATA_PATH+"\\ImpBfcpTLS\\server_key.pem");case 38:e.next=53;break;case 40:if("mac"!==window.CLIENTCONFIG.PLATFORM){e.next=53;break}if(l=window.path.join(window.APP_DATA_PATH,"deviceCertificate"),!fs.existsSync(l)||!fs.lstatSync(l).isDirectory()){e.next=53;break}if(g=window.path.join(l,"p4bfcp.txt"),w=window.path.join(l,"server.pem"),v=window.path.join(l,"server_key.pem"),!(fs.existsSync(g)&&fs.existsSync(w)&&fs.existsSync(v))){e.next=53;break}return E=fs.readFileSync(g).toString(),e.next=50,coreSecurity.decryptKMC(E);case 50:h=e.sent,m=h&&h.param&&h.param.PlainText||"",m&&(_.info("using refreshing device certificate"),n=m,a=l,o=w,i=v);case 53:if(!window.CLIENTCONFIG.ISMOBILE){e.next=83;break}if(_.info(" mobile 使用导入的证书"),I=$getState().login,C=I.mProveName,L=I.mSelectProve,L||""===C){e.next=83;break}return T=window.EXEC_PATH+"/impBfcpTLS",O=window.EXEC_PATH+"/impBfcpTLS/server.pem",e.next=61,(0,p.verificationCertificateLogic)(O);case 61:if(x=e.sent,_.info(" mobile login for is impt vc vcFlag: ",x),!x){e.next=83;break}_.info(" prove is ok "),N=void 0,e.next=72;break;case 69:N=e.sent,e.next=73;break;case 72:N=appService.mReadImptP4BFCP(T+"/p4bfcp.txt");case 73:return e.next=75,coreSecurity.decryptKMC(N);case 75:r=e.sent,n=r&&r.param&&r.param.PlainText||"",_.info("mobile 使用导入的证书"),_.info("configBFCPForTLS mode : "+t+" path: "+T),_.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===n?"failed":"success")),a=window.EXEC_PATH+"/impBfcpTLS/",o=window.EXEC_PATH+"/impBfcpTLS/server.pem",i=window.EXEC_PATH+"/impBfcpTLS/server_key.pem";case 83:return R=t?1:0,y=6,b=0,k={bfcp_tls_param:{bfcp_tls_ctrl_mode:R,tls_version:y,tls_verify_mode:b,root_cert_path:a,srv_cert_file:o,srv_private_kfile:i,srv_private_kfile_pw:n,clt_cert_file:o,clt_private_kfile:i,clt_private_kfile_pw:n}},e.abrupt("return",k);case 88:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=window.CLIENTCONFIG,t=$getState().login,r=t.fireWallMode,n=!1;constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===r&&(n=!0);var a=parseInt(e["Device.ComCfg.Media.VideoNetRat"]),o=parseInt(e["Device.ComCfg.Media.VideoKeyFrameIntervalNetRat"]),i=n?0:parseInt(e["Device.ComCfg.Media.VideoHarq"]);window.CLIENTCONFIG.ISMOBILE&&(a=20,o=150);var s={video_errorcorrecting:e.VIDEO_CONFIG_MEDIA_VIDEO_ERRORCORRECTING,video_arq:parseInt(e["Device.ComCfg.Media.VideoArq"]),video_harq:i,ec_pkt_in_rtp:parseInt(e["Device.ComCfg.Media.EcPktInRtp"]),net_lossrate:a,keyframe_interval:o};return _.info(" media:视频抗丢包配置参数 media =",(0,f.default)(s)),s}),I=(t.initVideoHardCodeParam=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r,n,a,o,i,s,c,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,r=void 0,t=0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=14;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=6,coreTup.getCallInstance();case 6:return n=e.sent,e.next=9,n.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 9:a=e.sent,0===a.result?(_.info("hard code mediaGetHdaccelerate success, hdencoder = "+a.param.hdaccelerate.hdencoder),t=a.param.hdaccelerate.hdencoder):_.error("hard code mediaGetHdaccelerate failed, result = "+a.result),r=T(t);case 12:e.next=23;break;case 14:if(!window.CLIENTCONFIG.ISMOBILE){e.next=23;break}return e.next=17,coreTup.getCallInstance();case 17:return o=e.sent,e.next=20,o.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 20:i=e.sent,0===i.result?(_.info("hard code mediaGetHdaccelerate success, hdencoder = "+i.param.hd_accelerate.hdencoder),t=i.param.hd_accelerate.hdencoder):_.error("hard code mediaGetHdaccelerate failed, result = "+i.result),r=T(t);case 23:return s={},c=0,window.CLIENTCONFIG.ISMOBILE&&1===t&&r>256&&(c=1),d=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.CLIENTCONFIG.ISMOBILE?s.video_hdaccelerate={hd_encoder:c,hd_decoder:0}:(s.video_hdaccelerate={hd_encoder:c,hd_decoder:d},_.info("media:is hddecoder:"+d)),_.info("media:is hdencoder:"+c),_.info("media: media =",(0,f.default)(s)),e.abrupt("return",s);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initVideoSettingParam=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r,n,a,o,i,s,c,d,l,p,g,w,v,E,h,m,I,C,L,S,O;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,s=void 0,e.next=3,coreAccount.getLoginModel();case 3:if(c=e.sent,t=coreCommon.isHuaweiCloud(c.serverUportalAddress),r=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_LEVEL,n=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_MBPS,a=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_BR,o=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_FS,i=4096,s=0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=24;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=21;break}return e.next=15,coreTup.getCallInstance();case 15:return d=e.sent,e.next=18,d.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 18:l=e.sent,0===l.result?(_.info("[IT-Meeting] mediaGetHdaccelerate success, hdencoder = "+l.param.hdaccelerate.hdencoder),s=l.param.hdaccelerate.hdencoder):_.error("[IT-Meeting] mediaGetHdaccelerate failed, result = "+l.result),i=T(s);case 21:_.info("The default bandWidth is: "+i),e.next=34;break;case 24:if(!window.CLIENTCONFIG.ISMOBILE){e.next=33;break}return e.next=27,coreTup.getCallInstance();case 27:return p=e.sent,e.next=30,p.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 30:g=e.sent,0===g.result?(_.info("mediaGetHdaccelerate success, hdencoder = "+g.param.hd_accelerate.hdencoder),s=g.param.hd_accelerate.hdencoder):_.error("mediaGetHdaccelerate failed, result = "+g.result),i=T(s);case 33:_.info("The default bandWidth is: "+i);case 34:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(i<1e3||window.netWorkType===constant.NETWORK_TYPE.TYPE_2G)&&(window.linkSmcIsVideo=!1,_.info("[IT-Meeting] bandwidth < 1000, join conference in audio",window.linkSmcIsVideo)),w=1500,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===$getState().login.fireWallMode&&(w=1280),!window.CLIENTCONFIG.ISMOBILE&&i>=1024&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==$getState().login.fireWallMode&&(r=40),!window.CLIENTCONFIG.ISWIN){e.next=48;break}return r=40,e.next=42,coreConf.registerNativeWndEvent();case 42:return e.next=44,coreConf.getNativeInterface().notifyGetSystemInfo();case 44:return v=e.sent,e.next=47,coreConf.unregisterNativeWndEvent();case 47:v&&(window.cpu_core_num=v.cpu_core_num,window.cpu_proc_num=v.cpu_proc_num,window.cpu_freq_mhz=v.cpu_freq_mhz,2===window.cpu_core_num&&(2===window.cpu_proc_num||window.cpu_freq_mhz<2e3)?(r=21,n=18400,o=920):2===window.cpu_core_num&&4===window.cpu_proc_num&&(r=32),_.info("set decode level by cpu cores and cpu freq:",r));case 48:return window.CLIENTCONFIG.ISMOBILE&&(r=30,n=72e3,o=3600,(t||window.CLIENTCONFIG.ENABLE_IT_MEETING)&&(r=21,n=18400,o=920)),E={video_level:{level:r,max_mbps:n,max_br:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_BR,max_fs:o},sdp_ct:i,video_svc_enable:window.CLIENTCONFIG.USE_MEETING?1:0,data_video_svc_cap:{pktmode:2},video_mtu:w,video_datarate:{max_bw:i},clarity_fluency_enable:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_CLARITY_FLUENCY_ENABLE,video_tatic:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_VIDEO_TATIC,video_h264_force_single_pt:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_H264_FORCE_SINGLE_PT,sec_version:{sec10:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec20:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec21:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec30:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION},video_port_range:{min_port:10004,max_port:65530}},h=void 0,m=void 0,I=void 0,C=void 0,L=void 0,I=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.TmmbrControl"]),C=0,window.CLIENTCONFIG.ISMOBILE?(h={is_video_bw_include_audio:1,is_video_bw_subduct_aux:1,is_h264_hp_same_with_bp:1,is_video_bw_subduct_aux_recv:0},1===s&&i>256&&(C=1),m=C?{table_num:11,param_set:[{band_width:1984,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2304,min_bit_rate:896,adjust_bit_rate:2304},{band_width:1856,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2176,min_bit_rate:896,adjust_bit_rate:2176},{band_width:1472,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1792,min_bit_rate:896,adjust_bit_rate:1792},{band_width:1408,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1728,min_bit_rate:896,adjust_bit_rate:1728},{band_width:960,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1260,min_bit_rate:896,adjust_bit_rate:1433},{band_width:704,width:960,height:544,max_frame_rate:20,min_frame_rate:15,max_bit_rate:896,min_bit_rate:640,adjust_bit_rate:1280},{band_width:448,width:640,height:368,max_frame_rate:20,min_frame_rate:15,max_bit_rate:640,min_bit_rate:448,adjust_bit_rate:900},{band_width:320,width:480,height:272,max_frame_rate:20,min_frame_rate:15,max_bit_rate:448,min_bit_rate:320,adjust_bit_rate:640},{band_width:192,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:320,min_bit_rate:32,adjust_bit_rate:400},{band_width:128,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:192,min_bit_rate:32,adjust_bit_rate:200},{band_width:64,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]}:{table_num:11,param_set:[{band_width:1984,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2304,min_bit_rate:448,adjust_bit_rate:900},{band_width:1856,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2176,min_bit_rate:448,adjust_bit_rate:900},{band_width:1472,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1792,min_bit_rate:448,adjust_bit_rate:900},{band_width:1408,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1728,min_bit_rate:448,adjust_bit_rate:900},{band_width:960,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1260,min_bit_rate:448,adjust_bit_rate:900},{band_width:704,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:896,min_bit_rate:448,adjust_bit_rate:900},{band_width:448,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:640,min_bit_rate:448,adjust_bit_rate:900},{band_width:320,width:480,height:270,max_frame_rate:20,min_frame_rate:15,max_bit_rate:448,min_bit_rate:320,adjust_bit_rate:640},{band_width:192,width:320,height:180,max_frame_rate:20,min_frame_rate:15,max_bit_rate:320,min_bit_rate:192,adjust_bit_rate:400},{band_width:128,width:176,height:98,max_frame_rate:20,min_frame_rate:15,max_bit_rate:192,min_bit_rate:32,adjust_bit_rate:200},{band_width:64,width:176,height:98,max_frame_rate:20,min_frame_rate:15,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]}):(h={is_video_bw_include_audio:1,is_video_bw_subduct_aux:1,is_h264_hp_same_with_bp:1,is_video_bw_subduct_aux_recv:0},m={table_num:11,param_set:[{band_width:1984,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:2304,min_bit_rate:896,adjust_bit_rate:2304},{band_width:1856,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:2176,min_bit_rate:896,adjust_bit_rate:2176},{band_width:1472,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1792,min_bit_rate:896,adjust_bit_rate:1792},{band_width:1408,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1728,min_bit_rate:896,adjust_bit_rate:1728},{band_width:960,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1280,min_bit_rate:896,adjust_bit_rate:1433},{band_width:704,width:960,height:540,max_frame_rate:30,min_frame_rate:22,max_bit_rate:896,min_bit_rate:640,adjust_bit_rate:900},{band_width:448,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:640,min_bit_rate:192,adjust_bit_rate:900},{band_width:320,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:512,min_bit_rate:192,adjust_bit_rate:640},{band_width:192,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:384,min_bit_rate:192,adjust_bit_rate:400},{band_width:128,width:512,height:288,max_frame_rate:15,min_frame_rate:10,max_bit_rate:192,min_bit_rate:96,adjust_bit_rate:200},{band_width:64,width:512,height:288,max_frame_rate:15,min_frame_rate:10,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]},S=window.localStorage.getItem("svc_video_level_tbl_id"),isNullOrEmpty(S)&&(S=0),(S<0||S>=3)&&(S=0),L=constant.SvcResolutionPCTable[S],window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(L=constant.SvcResolutionPCTable[constant.SVCResolutionLevel.STANDARD])),E.video_resolution_table=m,window.CLIENTCONFIG.ISBIGWIN||(E.svc_resolution_table=L),E.video_resolution_adj_num=4,E.fluid_control=I,E.bandwidth_calc_policy=h,O=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,E.video_hdaccelerate={hd_encoder:C,hd_decoder:O},window.CLIENTCONFIG.ISMOBILE?E.video_hdaccelerate={hd_encoder:C,hd_decoder:0}:(E.video_hdaccelerate={hd_encoder:C,hd_decoder:O},_.info("media:视频配置参数(设置降档表相关) media hard code:"+O)),_.info("media:视频配置参数(设置降档表相关) media =",(0,f.default)(E)),e.abrupt("return",E);case 64:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),C=function(){var e=window.CLIENTCONFIG,t=coreAccount.getSyncLoginModel(),r=coreCommon.isHuaweiCloud(t.serverUportalAddress),n=r?0:parseInt(e["Device.ComCfg.Media.VideoShaping"]),a={rtp_hdr_ext:1,video_ars:{ars:parseInt(e["Device.ComCfg.Media.VideoARS"]),ars_ctrl_framesize:parseInt(e["Device.ComCfg.Media.VideoARSFrameSize"]),ars_ctrl_framerate:parseInt(e["Device.ComCfg.Media.VideoARSFrameRate"]),ars_ctrl_bitrate:parseInt(e["Device.ComCfg.Media.VideoARSBitRate"]),ars_ctrl_fec:parseInt(e["Device.ComCfg.Media.VideoArsFec"]),ars_data_shaping:n}};return _.info("media:自动降速配置参数 media =",(0,f.default)(a)),a},L=function(){var e={h264_quality_level_table:{param_setnumber:4,quality_level_param_set:[{codec_name:"",pt:105,profile_idc:66,packet_mode:1,level_asymmetry:1,priority:3},{codec_name:"",pt:106,profile_idc:66,packet_mode:0,level_asymmetry:1,priority:4},{codec_name:"",pt:107,profile_idc:100,packet_mode:1,level_asymmetry:1,priority:1},{codec_name:"",pt:108,profile_idc:100,packet_mode:0,level_asymmetry:1,priority:2}]}};return _.info("media:BP/HP参数 media =",(0,f.default)(e)),e},T=(t.reConfigVideoAndDataSetting=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r,n,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,I();case 3:return t.media=e.sent,e.next=6,coreTup.getCallInstance();case 6:return r=e.sent,e.next=9,r.config(t);case 9:return e.next=11,v();case 11:return n=e.sent,e.next=14,r.config(n);case 14:"android"===window.CLIENTCONFIG.PLATFORM&&(a=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,_.info("android hard decoder enter 1",a),window.isHardDecodeToNative(a));case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.restoreMAAConfControl=function(){var e=(0,l.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return _.info("restoreMAAConfControl"),t={conf:{use_maa_confctrl:1}},e.next=6,coreTup.getCallInstance();case 6:r=e.sent,r.config(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=4096,r=window.netWorkType;return _.info("The current network type is: "+r+", bSupport Hdacc:"+e),r===constant.NETWORK_TYPE.TYPE_WIFI?t=parseInt(g["Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"]):r===constant.NETWORK_TYPE.TYPE_5G?t=parseInt(g["Device.ComCfg.Media.Mobile.4GTotalBandwidth"]):r===constant.NETWORK_TYPE.TYPE_4G?t=parseInt(g["Device.ComCfg.Media.Mobile.4GTotalBandwidth"]):r===constant.NETWORK_TYPE.TYPE_3G?t=parseInt(g["Device.ComCfg.Media.Mobile.3GTotalBandwidth"]):constant.NETWORK_TYPE.TYPE_ETHERNET&&(t=parseInt(g["Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"])),t}),S=function(){_.info("getPFourbfcpLogic");try{var e=window.fs;if(e){var t=APP_DATA_PATH+"/ImpBfcpTLS",r=t+"/p4bfcp.txt";if(e.existsSync(r))return e.readFileSync(r).toString()}}catch(e){_.error("getPFourbfcpLogic",e.toString())}};t.serPointPickupCfg=function(){var e={service:{server_right:{type:7,active_accesscode:g["Device.ComCfg.Service.pointPickupActive"],deactive_accesscode:"",register:0,right:0}}};return _.info("serPointPickupCfg =",(0,f.default)(e)),e},t.serGroupPickupCfg=function(){var e={service:{server_right:{type:6,active_accesscode:g["Device.ComCfg.Service.groupPickupActive"],deactive_accesscode:"",register:0,right:0}}};return _.info("serGroupPickupCfg =",(0,f.default)(e)),e}},290:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNickName=t.stopSipRefresh=t.startSipRefresh=t.dealPcLogout=t.dealPcLogin=t.ipCallConfig=t.unEnableBFCP=t.clearnsipinfo=t.registerLoginEvent=t.sipserverDeregister=t.reLoginSipserver=t.reConfigVideoAndDataSetting=void 0;var n=r(272);Object.defineProperty(t,"reConfigVideoAndDataSetting",{enumerable:!0,get:function(){return n.reConfigVideoAndDataSetting}});var a=r(302);Object.defineProperty(t,"reLoginSipserver",{enumerable:!0,get:function(){return a.reLoginSipserver}}),Object.defineProperty(t,"sipserverDeregister",{enumerable:!0,get:function(){return a.sipserverDeregister}}),Object.defineProperty(t,"registerLoginEvent",{enumerable:!0,get:function(){return a.registerLoginEvent}}),Object.defineProperty(t,"clearnsipinfo",{enumerable:!0,get:function(){return a.clearnsipinfo}}),Object.defineProperty(t,"unEnableBFCP",{enumerable:!0,get:function(){return a.unEnableBFCP}}),Object.defineProperty(t,"ipCallConfig",{enumerable:!0,get:function(){return a.ipCallConfig}}),Object.defineProperty(t,"dealPcLogin",{enumerable:!0,get:function(){return a.dealPcLogin}}),Object.defineProperty(t,"dealPcLogout",{enumerable:!0,get:function(){return a.dealPcLogout}}),Object.defineProperty(t,"startSipRefresh",{enumerable:!0,get:function(){return a.startSipRefresh}}),Object.defineProperty(t,"stopSipRefresh",{enumerable:!0,get:function(){return a.stopSipRefresh}}),Object.defineProperty(t,"getNickName",{enumerable:!0,get:function(){return a.getNickName}});!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(a)},301:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.iosCursorDeal=t.checkOffLineIsInCall=t.getIsReminder=t.getCloseType=t.getCloseAppWays=t.setLocalOfflineStatus=t.pushStatusToEServer=t.publishStatus=t.loadEserverSignature=t.loadMyInfo=t.updateCurUser=t.checkLocalHasMyinfo=void 0;var a=r(141),o=n(a),i=r(69),s=n(i),u=r(136),c=n(u),f=r(138),d=n(f),l=r(1),p=n(l),_=r(2),g=n(_),w=r(644),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(w),E=r(150),h=coreLogger.getLogger("logic")("main/myInfo"),m=(t.checkLocalHasMyinfo=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r,n,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("start checkLocalHasMyinfo"),!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,coreAccount.getLoginModel();case 5:return t=e.sent,e.next=8,coreDb.queryLoginSetting({key:"myinfo"});case 8:if(r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)){e.next=20;break}if(n=r.value,isNullOrEmpty(n)){e.next=20;break}if(a=JSON.parse(n),isNullOrEmpty(a)||t.account!==a.compareAccount){e.next=20;break}return h.info(" checkLocalHasMyinfo : has local myinfo last copy"),e.next=17,(0,E.getMyInfo)();case 17:return o=e.sent,o.set(a),e.abrupt("return",!0);case 20:return h.info(" checkLocalHasMyinfo : no copy"),e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateCurUser=function(){var e=(0,g.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.getMyInfo)();case 2:r=e.sent,t&&(r.name=t),r.set.apply(r,(0,d.default)(r));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.loadMyInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a,o,i,u,f,d,l,_,g,w,v,m;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return r=e.sent,e.next=5,(0,E.getMyInfo)();case 5:if(n=e.sent,h.info("loadMyInfo"),a=r.sipImpi,isNullOrEmpty(a)||-1!==(o=a.indexOf("@"))&&(a=a.slice(0,o)),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=26;break}return i=window.getUportalRes(),u={},u.account=i.param.uportal_authorize_result.real_user_account,e.next=15,coreContact.getUserInfo(u.account);case 15:if(f=e.sent,d=f.param,!isNullOrEmpty(d)){e.next=24;break}return h.error("myinfo is null"),l=u.account.split("@")[0],n.account=u.account,n.name=l,n.bind_no=a,e.abrupt("return");case 24:return n.set((0,c.default)({},d)),e.abrupt("return");case 26:return e.next=28,coreContact.getUserInfo(t);case 28:if(_=e.sent,g=_.param,!isNullOrEmpty(g)){e.next=37;break}return h.error("myinfo is null"),w=r.displayAccount.split("@")[0],n.account=t,n.name=n.name||w,n.bind_no=a,e.abrupt("return");case 37:r.isSupportAS&&(g.account=r.account),g.dept_name_cn=g.dept_name_cn.replace(/\*/g,"-"),g.dept_name_en=g.dept_name_cn.replace(/\*/g,"-"),v=(0,c.default)({},g,{compareAccount:t}),m=(0,s.default)(v),coreDb.saveLoginSetting({key:"myinfo",value:m}),n.set(v);case 44:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.loadEserverSignature=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("query eserver sig start"),e.next=3,coreContact.queryEserverSignature(t);case 3:if(r=e.sent,isNullOrEmpty(r)||1!==r.result){e.next=7;break}return h.info("query eserver sig-nature failed"),e.abrupt("return");case 7:return e.next=9,(0,E.getMyInfo)();case 9:n=e.sent,n.set(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),null),I=(t.publishStatus=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,coreAccount.getLoginModel();case 3:if(r=e.sent,r.useIM){e.next=7;break}return h.info("publishStatus, now is te mode,not do publishStatus"),e.abrupt("return");case 7:if(h.info("publishStatus,status:",t,"desc:",handlePhoneNumber(n)),t!==constant.ONLINE_STATUS.OFFLINE){e.next=15;break}return r.userSelectOffline=!0,e.next=12,coreAccount.setOffline({});case 12:return e.abrupt("return",e.sent);case 15:if(!window.isOffline){e.next=23;break}if(!r.loginDisable){e.next=19;break}return h.info("publishStatus, now loginDisable,not do login again"),e.abrupt("return",!1);case 19:return $dispatch(coreUi.updateUnreadSystemBulletin(0)),e.next=22,coreAccount.login({isResume:!0,desc:n});case 22:v.checkStatusOptions();case 23:return r.userSelectOffline&&(r.userSelectOffline=!1),e.abrupt("return",I(t,n));case 25:e.next=31;break;case 27:return e.prev=27,e.t0=e.catch(0),h.error("publishStatus",e.t0),e.abrupt("return",!1);case 31:case"end":return e.stop()}},e,void 0,[[0,27]])}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,g.default)(p.default.mark(function e(t,r){var n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!coreIm.checkEServerOnlineNoToast("publishStatus")){e.next=6;break}return e.next=3,C(t,r);case 3:return e.abrupt("return",e.sent);case 6:return coreIm.setUserLoginStatus({status:t,desc:r}),n=PromiseObject(),m&&(h.info("publishStatus remove pre _addedEServerLoginSuccessFunction"),window.removeEventListener("eServerLoginSuccess",m),m=null),m=function(){var e=(0,g.default)(p.default.mark(function e(){var a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("publishStatus _addedEServerLoginSuccessFunction",(0,s.default)({status:t,desc:r})),window.removeEventListener("eServerLoginSuccess",m),m=null,a=coreIm.getUserLoginStatus(),e.next=6,C(a.status,a.desc);case 6:o=e.sent,n.resolve(o);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.addEventListener("eServerLoginSuccess",m),h.info("publishStatus add eServerLoginSuccess callback",(0,s.default)({status:t,desc:r})),setTimeout(function(){return n.resolve(!1)},35e3),e.abrupt("return",n);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),C=t.pushStatusToEServer=function(){var e=(0,g.default)(p.default.mark(function e(t,r){var n,a,i,u,c,f;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(n=e.sent,n.useIM){e.next=6;break}return h.info("pushStatusToEServer, now is te mode,not do publishStatus"),e.abrupt("return");case 6:return a=window.CLIENTCONFIG.ISMOBILE?1:0,e.next=9,coreAccount.getMyInfo();case 9:if(i=e.sent,"number"!==Object.type(t)&&"string"!==Object.type(t)){e.next=26;break}return h.info("pushStatusToEServer",(0,s.default)({status:t,desc:r,client_type:a})),e.next=14,coreAccount.getLoginModel();case 14:return u=e.sent,e.next=17,coreIm.publishStatusToServer({status:t,desc:r});case 17:if(!(c=e.sent)||0!==c.result){e.next=26;break}return f=u.account,u.status=t,$dispatch(coreUi.updateContactStatusMap((0,o.default)({},f,{status:t,desc:r,client_type:a}))),i.status=t,i.statusDesc=r,L(t),e.abrupt("return",!0);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),L=function(e){coreSetting.checkAutoLeave(e),$getState().setting.shouldResetTray&&appService.initMainTray()};t.setLocalOfflineStatus=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("setLocalOfflineStatus "+r),e.next=3,coreAccount.getMyInfo();case 3:t=e.sent,t.status=constant.ONLINE_STATUS.OFFLINE,t.statusDesc="",t.selectIndex=4,$dispatch(coreUi.cleanContactStatusMap()),$dispatch(coreUi.subscriptionAccountList([])),coreIm.dealOfflineFileSendOrReceiveFail();case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getCloseAppWays=function(){var e=(0,g.default)(p.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("userClick  main page quit btn"),t?coreCommon.quickCloseApp():coreCommon.closeApp();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getCloseType=function(){return window.localStorage.getItem("closeWays")},t.getIsReminder=function(){return window.localStorage.getItem("isReminder")},t.checkOffLineIsInCall=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r,n,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h.info("click OffLint for checkAndEndCall"),t=$getState().call,r=t.showCallToolBar,n=t.callStatus,!r&&"VIDEO_CONNECTED"!==n&&"VIDEO_OUT"!==n&&"CALL_OUT"!==n&&"CALL_CONNECTED"!==n){e.next=7;break}return a=language.COMMON_EXIT_THE_PROMPT,window.CLIENTCONFIG.ISMOBILE||window.alert(a),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),h.error("click OffLint for checkAndEndCall"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),t.iosCursorDeal=function(){var e=(0,g.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"ios"===window.CLIENTCONFIG.PLATFORM&&0===t.length&&(r=document.activeElement,"input"===r.nodeName.toLocaleLowerCase()&&setTimeout(function(){""===r.style.textShadow?r.style.textShadow="rgba(0, 0, 0, 0) 0 0 0":r.style.textShadow=""},20));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},302:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTempMediaxPort=t.updateTempMediaxAddress=t.updateTempSipGetState=t.updateTempSipPwd=t.getNickName=t.saveNickName=t.updateTempSipNick=t.updateTempSipAccount=t.updateTempSipPort=t.updateTempSipServer=t.resumeAllSipService=t.stopSipRefresh=t.startSipRefresh=t.dealPcLogout=t.dealPcLogin=t.ipCallConfig=t.stopLocalServer=t.reLoginSipserver=t.unEnableBFCP=t.sipserverDeregister=t.clearnsipinfo=t.getStgInfo=t.handleSipOnlyJoinConf=t.handleAccountJoinConf=t.prepareHandletempsipconfinfo=t.registerLoginEvent=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=(t.resumeAllSipService=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return coreCall.registerCallEvent(),coreCall.registerVideoEvent(),coreConf.getRegisterConfEventAtomic().wait(),e.next=5,coreConf.initializeDataConf();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r(743)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),f=r(358),d=r(228),l=r(209),p=r(272),_=r(562),g=coreLogger.getLogger("logic")("login/sipServer"),w=(t.registerLoginEvent=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.setloginNotifyFunc(),g.info("registerLoginEvent, Observer subscribe TempSipConfInfo"),coreCommon.Observer.subscribe("TempSipConfInfo",v);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.prepareHandletempsipconfinfo=function(e){return 34===e.param.result?(window.ToastNew(language.GET_SIP_FAILED_INVALIDE_CONF,2),0):36===e.param.result?(window.ToastNew(language.END_CONFERENCE,2),0):37===e.param.result?(window.ToastNew(language.GET_SIP_FAILED_INPUT_TOO_MUCH_ERROR_PWD,2),0):35===e.param.result?(x(""),0):2===e.param.result?(x(""),0):3===e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):7===e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):33===e.param.result?(window.ToastNew(language.CALL_FAILED_OFFLINE,2),0):40===e.param.result?(window.ToastNew(language.THE_VMR_MEETING_HAS_NOT_YET_STARTED,2),0):39===e.param.result?(window.ToastNew(language.THE_MEETING_HAS_BEEN_LOCKED_DOWN,2),0):46===e.param.result?(window.ToastNew(language.UNSUCCESSFUL_JOIN_TIME,2),0):32===e.param.result?(window.ToastNew(language.CA_CERT_IS_NOT_TRUSTED_CONNECT_FAILED,2),0):0!==e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):1}),v=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,u,c,f,p,_,v,m;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("handletempsipconfinfo",t.param.result),e.next=3,(0,l.getLoginModel)();case 3:if(r=e.sent,0===t.param.result){e.next=22;break}if($dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),t.param.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT){e.next=22;break}if(g.info("handletempsipconfinfo timeout,clear dns ip"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=21;break}return e.next=12,window.getMeetingDomain();case 12:return n=e.sent,a="",e.next=16,coreDb.queryLoginSetting({key:n});case 16:i=e.sent,i&&i.value&&(a=i.value),a&&(coreDb.saveLoginSetting({key:n,value:""}),coreConf.gettempuserinfo()),e.next=22;break;case 21:(0,d.clearLocalDNSIp)(r.urlOfGetSipInfo);case 22:return e.next=24,N(t.param.result);case 24:if(0!==w(t)){e.next=28;break}return x(""),coreCommon.dispatchModuleEvent("joinMeetingAnonymousNotify",{code:t.param.result,msg:"get temp sipInfo failed!"}),e.abrupt("return");case 28:if(!(t.param.tempuser_info_result.length<=1)){e.next=32;break}return window.isPluginEnv||alert(language.GET_SIP_NOTHING),coreCommon.dispatchModuleEvent("joinMeetingAnonymousNotify",{code:t.param.result,msg:"get temp sipInfo result is illegal!"}),e.abrupt("return");case 32:return u=r.sipOnlyType,c=t.param.tempuser_info_result,f=c.conf_id.length,p=r.isSupportAS,e.next=38,window.isAnonymous();case 38:if(_=e.sent,constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP!==u&&(!window.CLIENTCONFIG.ENABLE_IT_MEETING||_)){e.next=58;break}if(!(f!==constant.MEDIA_X_ID_LENGTH&&!p||f===constant.MEDIA_X_ID_LENGTH&&p)){e.next=44;break}return window.isPluginEnv||window.confirm(language.CONF_NOT_IN_SAME_DEPARTMENT_AUTO).then(function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=18;break}return e.next=3,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT);case 3:if(!window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return n={tempSipAccount:c.conf_id},r.set(n),e.next=8,O();case 8:return e.next=10,coreConf.getConfInfoFromDb();case 10:window.goRoute("noLoginJoinConference"),e.next=16;break;case 13:a={tempSipAccount:c.conf_id},r.set(a),coreAccount.noLoginJoinConference();case 16:e.next=19;break;case 18:$dispatch(coreUi.changeEnterConfState(!1));case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),coreCommon.dispatchModuleEvent("joinMeetingAnonymousNotify",{code:t.param.result,msg:"get temp sip info id length is illeggal!"}),e.abrupt("return");case 44:return $dispatch(coreUi.changeConfAcsNum(c.access_code)),$dispatch(coreUi.changeConfAcsId(c.conf_id)),e.next=48,coreConf.toggleChangeConfAcsPas(c.conf_pwd);case 48:return $dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),v={tempConfInfo:{chairman_pwd:c.chairman_pwd,user_role:c.user_role}},r.set(v),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),window.CLIENTCONFIG.ISMOBILE?$dispatch(coreUi.changeCurConfPage("mEnterConfPage")):$dispatch(coreUi.changeCurConfPage("Join")),coreConf.oneKeyEnterConf(c.access_code,c.conf_id,c.conf_pwd,!0),e.abrupt("return");case 58:m=c.account_info,isNullOrEmpty(m.account)?h(c):E(c);case 60:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),E=t.handleAccountJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,s,u,c,f,d,p,_,w;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.account_info,n={conf_id:t.conf_id,access_code:t.access_code,conf_pwd:t.conf_pwd,user_role:t.user_role,chairman_pwd:t.chairman_pwd},a={tempConfInfo:n,sipLoginOnly:!0},e.next=5,(0,l.getLoginModel)();case 5:return i=e.sent,i.set(a),s=t.user_role,window.isPluginEnv||1===s&&window.ToastNew(language.CONF_NO_INVITE_PEMISSIOM_TIP),u=$getState(),c=u.login,f=c.serverAddress,d=c.serverPort,isNullOrEmpty(f)&&(f=$getState().login.tempNoNameMediaxAddress,d="8443"),p=r.access_url,isNullOrEmpty(r.second_access_url)||(isNullOrEmpty(p)?p=r.second_access_url:p+=","+r.second_access_url),isNullOrEmpty(p)&&(p=f),$dispatch(coreUi.changeConfTempAcsAccount(r.account)),e.next=17,coreSecurity.getPasswordManager();case 17:return _=e.sent,e.next=20,_.setPassword("password",r.password);case 20:return $dispatch(coreUi.changeTempAcsUportalAddress(p)),$dispatch(coreUi.changetempAcsUportalPort(d)),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),e.next=26,coreAccount.login({isResume:!1,isTempLogin:!0});case 26:w=e.sent,w&&w.result||(g.warn("handleAccountJoinConf login failed!"),coreCommon.dispatchModuleEvent("joinMeetingAnonymousNotify",{code:constant.SIP_LOGIN_ERR_GENERAL,msg:"account login failed!"})),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h=t.handleSipOnlyJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,s,u,c,d,p,w,v,E,h,C,T;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,e.next=3,m(t.site_info);case 3:return n=e.sent,e.next=6,(0,l.getLoginModel)();case 6:return a=e.sent,i={conf_id:t.conf_id,access_code:t.access_code,conf_pwd:t.conf_pwd},"supportRest"===t.site_info[0].tms_account&&(r=!1),window.CLIENTCONFIG.ISBIGWIN&&(r=!0),s={sipAccount:t.sip_account,sipDomain:t.sip_domain,sipImpi:t.sip_impi,sipPasswordType:t.password_type,sipServerAddress:t.site_info[0].access_server[0].sip_uri.split(":")[0],sipServerPort:parseInt(t.site_info[0].access_server[0].sip_uri.split(":")[1]),sipTlsServerAddress:isNullOrEmpty(t.site_info[0].access_server[0].sip_tls_uri)?"":t.site_info[0].access_server[0].sip_tls_uri.split(":")[0],sipTlsPort:isNullOrEmpty(t.site_info[0].access_server[0].sip_tls_uri)?"0":parseInt(t.site_info[0].access_server[0].sip_tls_uri.split(":")[1]),sipStgUri:t.site_info[0].access_server[0].stg_info.sip_stg_uri,sipUri:t.site_info[0].access_server[0].sip_uri,svnUri:n.svnUri,stgUri:n.stgUri,stgAccount:n.stgAccount,tempsipinfo:t,tempConfInfo:i,sipLoginOnly:!0,deployMode:3,sipLoginissiptls:t.site_info[0].access_server[0].is_siptls,sipLoginissrtp:t.site_info[0].access_server[0].is_srtp},t.uportal_uri.indexOf(":")>=0?(s.tempsipserverAddress=t.uportal_uri.split(":")[0],s.tempsipserverPort=parseInt(t.uportal_uri.split(":")[1])):(s.tempsipserverAddress=t.uportal_uri,s.tempsipserverPort=8443),window.isSupportiDo=r,g.info("handletempsipconfinfo isSupportiDo: "+window.isSupportiDo),a.set(s),e.next=17,coreSecurity.getPasswordManager();case 17:if(u=e.sent,e.t0=t.sip_password,!e.t0){e.next=22;break}return e.next=22,u.setPassword("sipPassword",t.sip_password);case 22:if(window.CLIENTCONFIG.ISMOBILE){e.next=72;break}if(c=n.svnUri,d=n.stgUri,!coreCommon.checkStgUriExist(d)||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=67;break}return e.next=27,(0,_.startFireWallDetect)(c);case 27:if(!(p=e.sent)||void 0===p.fire_wall_mode){e.next=58;break}if(coreConf.setFireWallModeType(p.fire_wall_mode),constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==p.fire_wall_mode){e.next=33;break}return e.next=33,L();case 33:if((0,_.updateFireWallAndSipInfo)(p.fire_wall_mode),constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==p.fire_wall_mode&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==p.fire_wall_mode){e.next=55;break}return w=n.stgUri,v=n.stgAccount,e.next=38,coreSecurity.getPasswordManager();case 38:return E=e.sent,e.next=41,E.getPassword("stgPassword");case 41:return h=e.sent,g.info("TE mode need buildStgTunnel， building"),e.next=45,coreAccount.buildStgTunnel({stgUri:w,stgAccount:v,stgPassword:h});case 45:if(C=e.sent,C.result){e.next=53;break}return I(),alert(language.CALL_CALLING_FAILED),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),coreCommon.dispatchModuleEvent("joinMeetingAnonymousNotify",{code:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,msg:"LOGIN_ERR_STG_TUNNEL_BUILD_ERROR"}),e.abrupt("return");case 53:e.next=56;break;case 55:g.info("firewall result is ok, no need to buildStgTunnel");case 56:e.next=65;break;case 58:return g.error("firewall detect failed"),I(),alert(language.CALL_CALLING_FAILED),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),coreCommon.dispatchModuleEvent("joinMeetingAnonymousNotify",{code:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,msg:"LOGIN_ERR_STG_TUNNEL_BUILD_ERROR"}),e.abrupt("return");case 65:e.next=70;break;case 67:g.info("reSetFireWallModeType"),coreConf.reSetFireWallModeType(),(0,_.updateFireWallAndSipInfo)(3);case 70:e.next=73;break;case 72:g.info("handleSipOnlyJoinConf mobile no need to fireWallDetect");case 73:return T={result:!1},e.prev=74,e.next=77,(0,f.loginToSipServer)();case 77:T=e.sent,e.next=84;break;case 80:e.prev=80,e.t1=e.catch(74),g.error("handleSipOnlyJoinConf loginToSipServer try catch error = "+e.t1),coreCommon.dispatchModuleEvent("joinMeetingAnonymousNotify",{code:constant.SIP_LOGIN_ERROR.SIP_LOGIN_ERR_GENERAL,msg:"login to sip server failed!"});case 84:T&&!1===T.result&&($dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),window.ToastNew(language.ENTER_CONF_FAIL,2),g.info("handleSipOnlyJoinConf loginToSipServer fail exit sipLoginOnly"),coreCommon.dispatchModuleEvent("joinMeetingAnonymousNotify",{code:constant.SIP_LOGIN_ERROR.SIP_LOGIN_ERR_GENERAL,msg:"login to sip server failed!"}));case 85:case"end":return e.stop()}},e,void 0,[[74,80]])}));return function(t){return e.apply(this,arguments)}}(),m=t.getStgInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,s,u,c,f,d,l,p,_,g,w;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",n="",a="",i="",s="",u="",c="",f="",d="",!t||!t[0]){e.next=27;break}l=t[0],p=l.num_of_server,_=l.access_server,g=p-1;case 4:if(!(g>=0)){e.next=20;break}if(_&&_[g]){e.next=7;break}return e.abrupt("continue",17);case 7:r+=_[g].sip_uri,n+=_[g].svn_uri,s+=_[g].stg_info.stg_uri,f+=_[g].stg_info.sip_stg_uri,d+=_[g].stg_info.eserver_stg_uri,u=_[0].stg_info.account,c=_[0].stg_info.password,i||(i=_[g].eserver_uri,a=_[g].httpsproxy_uri),a||(a=_[g].httpsproxy_uri),0!==g&&(r+=";",n+=";",s+=";",f+=";",d+=";");case 17:g--,e.next=4;break;case 20:return e.next=22,coreSecurity.getPasswordManager();case 22:if(w=e.sent,e.t0=c,!e.t0){e.next=27;break}return e.next=27,w.setPassword("stgPassword",c);case 27:return e.abrupt("return",{sipUri:r,svnUri:n,httpsProxy:a,eserverUri:i,stgUri:s,stgAccount:u,stgPassword:c,sipStgUri:f,eserverStgUri:d});case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=t.clearnsipinfo=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("clearsipinfo"),t={sipAccount:"",sipDomain:"",sipImpi:"",sipPassword:"",sipPasswordType:"",sipServerAddress:"",sipServerPort:"",sipStgUri:"",sipUri:"",tempsipinfo:"",tempConfInfo:"",sipLoginOnly:!1,deployMode:"",tempsipserverAddress:"",tempsipserverPort:"",tempSipAccount:"",tempsipPassword:"",sipLoginissiptls:0,sipLoginissrtp:1,tempSipNick:""},e.next=4,(0,l.getLoginModel)();case 4:return r=e.sent,r.set(t),g.info("clearsipinfo finished"),e.next=9,coreSecurity.getPasswordManager();case 9:return n=e.sent,e.next=12,n.setPassword("sipPassword","");case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),C=t.sipserverDeregister=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getLoginModel)();case 2:return t=e.sent,r=t.sipImpi,g.info("sipserverDeregister"),e.next=7,coreTup.getCallInstance();case 7:if(n=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=13;break}return e.next=11,n.deRegisterForAccount(0);case 11:e.next=15;break;case 13:return e.next=15,n.deRegister(r);case 15:window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(window.setSipState("0"),a=window.pcLoginState(),t.isMultiDeviceLogined=a,g.info("isMultiDeviceLogined = "+a)),$dispatch(coreUi.changeDoSipReg(!1));case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),L=(t.unEnableBFCP=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("[ unEnableBFCP ]"),t={media:{enable_bfcp:0}},e.next=4,coreTup.getCallInstance();case 4:return r=e.sent,e.next=7,r.config(t);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reLoginSipserver=function(){try{return g.info("[ reLoginSipserver ]"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(0,f.loginToSipServer)():C().then(f.loginToSipServer)}catch(e){return g.error("[ reLoginSipserver ]",e),{}}},t.stopLocalServer=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("stop local server."),e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,e.next=6,t.stopLocalServer();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.ipCallConfig=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.skipLogin){e.next=2;break}return e.abrupt("return");case 2:return t=(0,p.configIPCallServer)(),e.next=5,coreTup.getCallInstance();case 5:return r=e.sent,e.next=8,r.config(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.dealPcLogin=function(){g.info("multi devices, deal pc login "),S().then(function(e){0===e.result&&(g.info("stop sip refresh success"),C())}),coreCommon.dispatchModuleEvent("sipOtherPCLogin"),coreConf.endPairWithPeripherals({tips:language.PAIR_CLOSED})};window.onlyInitHme=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:return t=e.sent,e.next=5,(0,p.configHMELog)();case 5:return r=e.sent,g.info("sip server login configHmeInfo=",r),e.next=9,t.setHMELog(r);case 9:case"end":return e.stop()}},e,void 0)})),window.onlyDoSipRegister=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.info("only do sip register."),!window.dontUnregister){e.next=10;break}if(g.info("sim call finish resume sip service."),!window.isOffline){e.next=8;break}return e.next=6,C();case 6:e.next=10;break;case 8:return g.info("sim call finish resume sip service."),e.abrupt("return");case 10:return e.next=12,(0,f.loginToRegSipServer)();case 12:g.info("relogin sipserverLogin end");case 13:case"end":return e.stop()}},e,void 0)}));var T=(t.dealPcLogout=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),r=t.call,n=r.saveCalleeInfo,a=r.isDoSipReg,g.info("multi devices, deal pc logout ","isDoSipReg:"+a),window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,!0){e.next=8;break}return e.next=5,S();case 5:return e.next=7,T();case 7:return e.abrupt("return");case 8:return coreAccount.sipResume({message:"PcLogout"}),isNullOrEmpty(n)&&window.ToastNew(language.MULTIDEVICE_PC_QUIT,3),e.next=12,coreConf.confctrlInit();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.startSipRefresh=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("start sip refresh."),e.next=3,(0,l.getLoginModel)();case 3:return t=e.sent,r=t.sipImpi,e.next=7,coreTup.getCallInstance();case 7:if(n=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.abrupt("return",n.refreshRegisterForAccount(0));case 10:return e.abrupt("return",n.startRefreshRegister(r));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),S=t.stopSipRefresh=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("stop sip refresh."),e.next=3,(0,l.getLoginModel)();case 3:return t=e.sent,r=t.sipImpi,e.next=7,coreTup.getCallInstance();case 7:if(n=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.abrupt("return",n.stopReForAccount(0));case 10:return e.abrupt("return",n.stopRefreshRegister(r));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),O=(t.updateTempSipServer=function(e){(0,l.getLoginModel)().then(function(t){t.tempsipserverAddress=e})},t.updateTempSipPort=function(e){(0,l.getLoginModel)().then(function(t){t.tempsipserverPort=e})},t.updateTempSipAccount=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getLoginModel)();case 2:r=e.sent,r.tempSipAccount=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateTempSipNick=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getLoginModel)();case 2:r=e.sent,r.tempSipNick=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveNickName=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={key:"noLoginNickName",value:t},coreDb.saveLoginSetting(r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getNickName=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"noLoginNickName"});case 2:return t=e.sent,e.next=5,(0,l.getLoginModel)();case 5:r=e.sent,isNullOrEmpty(t)||isNullOrEmpty(t.key)||isNullOrEmpty(t.value)?r.tempSipNick="":r.tempSipNick=t.value;case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),x=t.updateTempSipPwd=function(e){(0,l.getLoginModel)().then(function(t){t.tempsipPassword=e})},N=t.updateTempSipGetState=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getLoginModel)();case 2:r=e.sent,r.tempsipGetState=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.updateTempMediaxAddress=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getLoginModel)();case 2:r=e.sent,r.tempMediaxAddress=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateTempMediaxPort=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getLoginModel)();case 2:r=e.sent,r.tempMediaxPort=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.oneKeyConfTempUserInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},!t||void 0===t.result&&void 0===t.reslut?r=t:(r.param=t,void 0!=t.reslut&&(r.param.result=t.reslut)),v(r);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},329:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCmptEvent=t.detectStopServer=t.detectStartServer=t.detectStopClientContinue=t.detectStartClientContinue=t.detectStopClient=t.detectStartClient=t.detectUnInit=t.detectInit=t.checkCertificateOverdue=t.verifyCertificate=void 0;var n=r(746),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);t.verifyCertificate=a.verifyCertificate,t.checkCertificateOverdue=a.checkCertificateOverdue,t.detectInit=a.detectInit,t.detectUnInit=a.detectUnInit,t.detectStartClient=a.detectStartClient,t.detectStopClient=a.detectStopClient,t.detectStartClientContinue=a.detectStartClientContinue,t.detectStopClientContinue=a.detectStopClientContinue,t.detectStartServer=a.detectStartServer,t.detectStopServer=a.detectStopServer,t.setCmptEvent=a.setCmptEvent},330:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.cancelLogin=t.makeLoginCancelable=void 0;var a=r(1),o=n(a),i=r(69),s=n(i),u=r(2),c=n(u),f=r(267),d=coreLogger.getLogger("logic")("cancelLogin"),l={loginPromise:null,sipLoginPromise:null,eserverLoginPromise:null,umserverLoginPromise:null};t.makeLoginCancelable=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.LOGIN_PROMISE_KEY.main_login;d.info("<account_login_cancel>track start:"+t);var n=new PromiseObject;switch(r){case constant.LOGIN_PROMISE_KEY.main_login:l.loginPromise=n;break;case constant.LOGIN_PROMISE_KEY.sip_login:l.sipLoginPromise=n;break;case constant.LOGIN_PROMISE_KEY.eserver_login:l.eserverLoginPromise=n;break;case constant.LOGIN_PROMISE_KEY.umserver_login:l.umserverLoginPromise=n}return e.then(function(e){coreAccount.getLoginModel().then(function(r){d.info("<account_login_cancel>track end -> name:"+t+", hasCanceled : "+r.hasLoginCanceled),r.hasLoginCanceled?n.reject({isCanceled:!0}):n.resolve(e)})}).catch(function(e){coreAccount.getLoginModel().then(function(r){d.info("<account_login_cancel>track end -> name:"+t+", hasCanceled : "+r.hasLoginCanceled),r.hasLoginCanceled?n.reject({isCanceled:!0}):n.reject(e)})}),n},t.cancelLogin=function(){var e=(0,c.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,t.hasLoginCanceled=!0,d.info("<account_login_cancel>do cancel start: "+(0,f.promiseToString)(l.loginPromise)+","+(0,f.promiseToString)(l.sipLoginPromise)+","+(0,f.promiseToString)(l.eserverLoginPromise)+","+(0,f.promiseToString)(l.umserverLoginPromise)),e.prev=5,isNullOrEmpty(l.loginPromise)){e.next=9;break}return e.next=9,l.loginPromise;case 9:if(isNullOrEmpty(l.sipLoginPromise)){e.next=12;break}return e.next=12,l.sipLoginPromise;case 12:if(isNullOrEmpty(l.eserverLoginPromise)){e.next=15;break}return e.next=15,l.eserverLoginPromise;case 15:if(isNullOrEmpty(l.umserverLoginPromise)){e.next=18;break}return e.next=18,l.umserverLoginPromise;case 18:d.info("<account_login_cancel>do cancel end"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),d.error("<account_login_cancel>do cancel end. "+(0,s.default)(e.t0));case 24:case"end":return e.stop()}},e,void 0,[[5,21]])}));return function(){return e.apply(this,arguments)}}()},358:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sipLoginAtomicReset=t.sipLoginAtomic=t.sipserverLogin=t.loginToRegSipServer=t.loginToSipServer=void 0;var a=r(132),o=n(a),i=r(3),s=n(i),u=r(69),c=n(u),f=r(1),d=n(f),l=r(2),p=n(l),_=function(){var e=(0,p.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.getCallInstance;case 2:t=e.sent,t.setNotifyFunc(98305,T);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.getCallInstance;case 2:t=e.sent,t.setNotifyFunc(98691,w);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,p.default)(d.default.mark(function e(t){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.param,coreUt.utHandleServerError({isLocalError:r.isLocalError,requestId:r.requestId,serverName:r.serverName,serverApiName:r.serverApiName,errorCode:r.errorCode,errorDescription:r.errorDescription});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),v=t.loginToSipServer=function(){var e=(0,p.default)(d.default.mark(function e(){var t,r,n,a,o,i,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C=s,I.info("[ loginToSipServer ] _ignoreSipResult "+s),I.info("<account_login><7_sip>begin"),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER]}),e.next=6,(0,E.getLoginModel)();case 6:if(t=e.sent,r=t.isMultiDeviceLogined,n=t.isMobile,a=t.stgUri,o=t.sipLoginOnly,(0,h.registerSipResultCallback)(),
//! 移动端因为存在多终端登录场景，不在这里进行Sip注册了，在eServer登录完成后，获取到多终端登录的通知后，进行Sip注册；PC端不变；
I.info("[ loginToSipServer ] isMultiDeviceLogined:"+r+", isMobile:"+n+", sipLoginOnly:"+o),r&&n&&I.info("[ loginToSipServer ] end login:"),r&&n&&!o){e.next=24;break}return _(),e.next=15,L(t.isTempLogin);case 15:if(i=e.sent,I.info("[ confctrlInit ] start"),!t.useMetting||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=20;break}return e.next=20,coreConf.confctrlInit();case 20:return I.info("[ confctrlInit ] end"),e.abrupt("return",i);case 24:return e.abrupt("return",{result:!1});case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),E=(t.loginToRegSipServer=function(){var e=(0,p.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _(),e.next=3,L(!1);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r(150)),h=r(359),m=r(272),I=coreLogger.getLogger("logic")("login/sipLogin"),C=!1,L=t.sipserverLogin=function(){var e=(0,p.default)(d.default.mark(function e(){var t,r,n,a,o,i,u,f,l,p,_,w,v,h,C,L,T,S,O,x,N,R,y,b,k,A,P,M,U,D,G,F,B,H,W,V,K,Y,j,q,$,X,z,J,Q,Z,ee,te,re,ne,ae=arguments.length>0&&void 0!==arguments[0]&&arguments[0],oe=arguments[1];return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(oe)){e.next=4;break}return e.next=3,(0,E.getLoginModel)();case 3:oe=e.sent;case 4:return t=oe,r=t.sipImpi,n=t.sipAccount,a=t.sipLoginOnly,o=t.serverAddress,i=t.serverPort,u=t.deployMode,f=t.tempsipserverAddress,l=t.tempsipserverPort,oe.isInSipLogin=!0,e.next=8,coreSecurity.getPasswordManager();case 8:return p=e.sent,_=p.getPassword("sipPassword"),a&&(o=f,i=l),(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)&&(window.isSupportiDo=!0),e.next=14,new coreTup.getCallInstance;case 14:return w=e.sent,e.next=17,g();case 17:if(window.CLIENTCONFIG.ISMOBILE&&(window.sendToTupConfig(),I.info("[bfcp] sendToTupConfig success")),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=37;break}I.info("[IT-Meeting] tup service multiuser model open"),e.next=24;break;case 24:return e.next=26,w.initForMultiuser();case 26:return e.next=28,w.setEnableMutiUsed(1);case 28:return v={account:{account_enable_sip:1}},e.next=31,w.config(v);case 31:return e.next=33,w.setAccountIdEnable(0);case 33:return e.next=35,w.registerProcessNotifyForAccount(0);case 35:return e.next=37,w.setTupCallLogParams(3,5e3,1,window.LOG_PATH);case 37:return e.next=39,(0,m.configHMELog)();case 39:h=e.sent,I.info("sip server login configHmeInfo=",h),w.setHMELog(h),e.next=45;break;case 45:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=119;break}return e.next=48,(0,m.configSip)(ae);case 48:return C=e.sent,e.next=51,w.config(C);case 51:return e.next=54,coreSetting.initMediaDevice();case 54:return L=(0,m.configCall)(),e.next=57,w.config(L);case 57:return T=(0,m.configRejectCallType)(),e.next=60,w.config(T);case 60:return S=(0,m.serPointPickupCfg)(),I.info("pointPickup + "+(0,c.default)(S)),e.next=64,w.config(S);case 64:return O=(0,m.serGroupPickupCfg)(),I.info("groupPickup + "+(0,c.default)(O)),e.next=68,w.config(O);case 68:return e.next=70,(0,m.configMKI)();case 70:return x=e.sent,e.next=73,w.config(x);case 73:return e.next=75,(0,m.configRTP)();case 75:return N=e.sent,e.next=78,w.config(N);case 78:return e.next=80,(0,m.configVideo)();case 80:return R=e.sent,e.next=83,w.config(R);case 83:return e.next=85,(0,m.configBFCP)();case 85:return y=e.sent,e.next=88,w.config(y);case 88:return"android"===window.CLIENTCONFIG.PLATFORM&&(b=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.isHardDecodeToNative(b)),I.info("debug info config bfcp sip config"),k=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),A=!1,k!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&k!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(A=!0),e.next=95,(0,m.configBFCPForTLS)({bForceTLSMode:A});case 95:return P=e.sent,e.next=98,w.configBFCPTLSParam(P);case 98:return e.next=100,(0,m.configSessionTimer)();case 100:return M=e.sent,e.next=103,w.config(M);case 103:return e.next=105,(0,m.configBandwidthLimit)();case 105:return U=e.sent,e.next=108,w.config(U);case 108:if(I.info("First issue CHR config to call"),ae){e.next=114;break}return e.next=112,coreSetting.issuedChrConfigToCall();case 112:return e.next=114,coreSetting.issuedTerminalConfig();case 114:I.info("sip server login sipAccount=",handlePhoneNumber(n)),-1!==n.indexOf("sip:")&&(n=n.substring(4)),window.CLIENTCONFIG.ISMOBILE&&(I.info("set capRotateCtrlMode"),w.setCapRotateCtrlMode(1)),e.next=184;break;case 119:return D=[],e.next=122,(0,m.configSip)(ae);case 122:return G=e.sent,D.push(w.config(G)),e.next=127,coreSetting.initMediaDevice();case 127:return F=(0,m.configVideo)(),B=(0,m.configBFCP)(),H=(0,m.configCall)(),D.push(w.config(H)),W=(0,m.configRejectCallType)(),D.push(w.config(W)),V=(0,m.serPointPickupCfg)(),I.info("pointPickup + "+(0,c.default)(V)),D.push(w.config(V)),K=(0,m.serGroupPickupCfg)(),I.info("groupPickup + "+(0,c.default)(K)),D.push(w.config(K)),e.next=141,(0,m.configMKI)();case 141:return Y=e.sent,D.push(w.config(Y)),e.next=145,(0,m.configRTP)();case 145:return j=e.sent,D.push(w.config(j)),e.next=149,F;case 149:return q=e.sent,D.push(w.config(q)),e.next=153,B;case 153:return $=e.sent,D.push(w.config($)),"android"===window.CLIENTCONFIG.PLATFORM&&(X=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.isHardDecodeToNative(X)),I.info("debug info config bfcp sip config"),z=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),J=!1,z!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&z!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(J=!0),e.next=162,(0,m.configBFCPForTLS)({bForceTLSMode:J});case 162:return Q=e.sent,e.next=165,w.configBFCPTLSParam(Q);case 165:return e.next=167,(0,m.configSessionTimer)();case 167:return Z=e.sent,D.push(w.config(Z)),e.next=171,(0,m.configBandwidthLimit)();case 171:if(ee=e.sent,D.push(w.config(ee)),I.info("First issue CHR config to call"),ae){e.next=177;break}return e.next=177,coreSetting.issuedChrConfigToCall();case 177:return e.next=179,coreSetting.issuedTerminalConfig();case 179:return I.info("sip server login sipAccount=",handlePhoneNumber(n)),-1!==n.indexOf("sip:")&&(n=n.substring(4)),window.CLIENTCONFIG.ISMOBILE&&(I.info("set capRotateCtrlMode"),w.setCapRotateCtrlMode(1)),e.next=184,s.default.all(D);case 184:if(window.confCtrlLoaded||!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=187;break}return e.next=187,coreConf.confctrlInit();case 187:return e.next=189,_;case 189:if(te=e.sent,I.info("sip server login"),re=void 0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=201;break}return ne={sip_account_id:0,account:{account_auth_sip:{account:n,user_name:r,passwd:te}}},e.next=196,w.config(ne);case 196:return e.next=198,w.registerForAccount(0);case 198:re=e.sent,e.next=204;break;case 201:return e.next=203,w.register(r,n,te);case 203:re=e.sent;case 204:if(I.info("hwTupCall.register sip",re),0!==re.result){e.next=211;break}return I.info("sip register execute success."),$dispatch(coreUi.changeDoSipReg(!0)),e.abrupt("return",{result:!0});case 211:return window.CLIENTCONFIG.ISBIGWIN?(coreConf.NotifyLoginFailedEx(1),I.info("big win login failed")):window.isHubEnv&&(coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_OTHER),I.info("maxhub sipserverLogin login failed")),I.error("sip register execute fail."),e.abrupt("return",{result:!1});case 214:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,p.default)(d.default.mark(function e(t){var r,n,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("[sip register]"),e.next=3,(0,E.getLoginModel)();case 3:r=e.sent,window.dispatchEvent((0,o.default)(new Event("sipRegResultEvent"),{registerState:t.param.register_state,reasonCode:t.param.reason_code})),I.info("[sip register] is_deregister: "+t.param.is_deregister+"->0:login,1:logout; reason_code:"+t.param.reason_code),r.sipRegisterState=t.param.register_state,constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED===t.param.register_state&&0===t.param.reason_code?(I.info("[sip register] ok"),I.info("<account_login><7_sip>end ok"),coreConf.initTupPairClient(),r.isInSipLogin=!1,S.resolve(),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,resultParams:[1,r.isResume?1:0],isTrackTimeCosts:!0})):constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING===t.param.register_state?(I.info("[sip register] registering"),r.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING):(constant.SIP_REGISTER_STATE.SIP_REGISTER_BUTT!==t.param.register_state&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&0!==t.param.reason_code&&coreConf.sipRegisterFailed(t.param.reason_code),$getState().login.sipLoginOnly&&(coreCommon.isHuaweiCloudWeLink()?(n=r.loginHistoryList,a=r.loginRecordList,coreAccount.showLoginInfo({loginInfo:a[0],loginHistoryList:n,loginRecordList:a})):(r.displayAccount="",r.password="")),I.error("[sip register] sip register not ok，sip offline"),r.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER,0===t.param.is_deregister&&(I.info("<account_login><7_sip>end failed"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,resultParams:[0,t.param.reason_code,r.isResume?1:0],isTrackTimeCosts:!1}),C?(r.isInSipLogin=!1,S.resolve()):(r.isInSipLogin=!1,S.reject({errorType:constant.LOGIN_ERROR_TYPE.sip,errorCode:"register_fail"})))),coreCommon.dispatchModuleEvent("sipRegResultEvent",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=PromiseObject();t.sipLoginAtomic=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,E.getLoginModel)().then(function(t){if(I.debug("[sipLoginAtomic]  status:"+t.sipRegisterState+" status: "+S.status),t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED)I.debug("[sipLoginAtomic]  already registered ");else if(t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER)try{return S=PromiseObject(),I.debug("[sipLoginAtomic] do sip login "),v(e),I.debug("[sipLoginAtomic] finish sip login "),S}catch(e){I.error("[sipLoginAtomic] exception: "+e.toString())}else I.debug("[sipLoginAtomic]  already registering ");return S})},t.sipLoginAtomicReset=function(){S=PromiseObject()}},359:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerSipResultCallback=t.sipResume=t.resetSipResumeFlag=t.meetinghwSipEnableToLogout=void 0;var a=r(3),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),f=function(){var e=(0,c.default)(s.default.mark(function e(t){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:r=e.sent,t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING&&g?((0,d.sipResumelogger)("<0_Info> sipRegisterNotify, registering"),r.useIM||(0,d.setAppResumeState)(constant.APP_STATE.RECONNECTING)):t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER||t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED&&0!==t.reasonCode?((0,d.sipResumelogger)("<0_Info> sipRegisterNotify, unregister"),coreConf.isInReCall()||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&0===t.reasonCode||N({forceInitRetryTime:!1,message:"sipRegisterNotify, reason:"+t.reasonCode})):t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED&&0===t.reasonCode&&((0,d.sipResumelogger)("<0_Info> sipRegisterNotify, registered"),r.useIM||((0,d.setAppResumeState)(constant.APP_STATE.ONLINE),O=!1));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d=r(267),l=r(268),p=r(302),_=coreLogger.getLogger("login")("sipResume"),g=!1,w=0,v=10,E=1e3,h=1e4,m=!1,I=!1,C=!1,L=null,T=null,S=0,O=!1;window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(v=15,h=2e3,E=0);var x=t.meetinghwSipEnableToLogout=function(){var e=(0,c.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_.info("[IT-Meeting] meetinghwSipEnableToLogout"),window.itWeLinkNotifyCallEnded(0,language.EADDR_FAIL_CONNECT),$getState().conf.confSubject?coreConf.actionLeaveConf():(window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),N=(t.resetSipResumeFlag=function(){var e=(0,c.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g=!1;case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.sipResume=function(e){var t=e.forceInitRetryTime,r=void 0===t||t,n=e.message,a=void 0===n?"":n,i=e.shouldUpdateResumeState,u=void 0!==i&&i;u&&(O=u);var f=function(){var e=(0,c.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w=0,g=!1,window.CLIENTCONFIG.USE_IM&&!O||(O=!1,(0,d.setAppResumeState)(constant.APP_STATE.ONLINE)),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=6;break}return e.next=6,coreConf.confctrlInit();case 6:(0,d.sipResumelogger)("<4_Success>"),b.resolve();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),N=function(){return(0,d.getResumeEnable)()?(I=!1,w>=v?m?(w=0,(0,d.sipResumelogger)("<5_Fail> reset retrytime: max times tried"),g=!1,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!coreConf.isInReCall()&&(window.itWeLinkNotifyCallEnded(0,language.EADDR_FAIL_CONNECT),window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT)),coreAccount.getLoginModel().then(function(e){e.useIM||(0,d.setAppResumeState)(constant.APP_STATE.RECONNECT_FAILED)}),void b.reject("max times tried")):(w=0,(0,d.sipResumelogger)("<5_Fail> reset retrytime: disaster recovery"),E=1e3,m=!0,g=!1,void coreAccount.resume({message:"sip resume max time failed,do resume"})):((0,d.sipResumelogger)("<5_Fail> will retry again..."),void y())):((0,d.sipResumelogger)("<5_Fail> resume is unEnable, break resume"),void(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&x()))},R=function(e){return C=!0,new o.default(function(t,r){coreAccount.getLoginModel().then(function(n){var a=e/500,o=0;(0,d.sipResumelogger)("<3_Check> start, sip state:"+n.sipRegisterState+", count:"+a),T=setInterval(function(){o++,o>a?(o=0,clearInterval(T),C=!1,(0,d.sipResumelogger)("<3_Check> end, sip state :"+n.sipRegisterState),r()):((0,d.sipResumelogger)("<3_Check> sip state :"+n.sipRegisterState),n.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED?(o=0,clearInterval(T),C=!1,t()):n.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING&&(o=0))},500)})})},y=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.sipResumelogger)("<2_DoResume>"),e.next=3,coreAccount.getLoginModel();case 3:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=24;break}if(r=(0,d.getResumeEnable)()){e.next=8;break}return e.abrupt("return");case 8:if(!t.userSelectOffline||!window.CLIENTCONFIG.USE_IM){e.next=11;break}return(0,d.sipResumelogger)("<6_Stop> now user has select offline, not do resume,wait user click online"),e.abrupt("return");case 11:if(window.localIp&&"0.0.0.0"!==window.localIp){e.next=19;break}return(0,d.sipResumelogger)("<6_Stop> none network1"),S=0,window.meetingWHGetLocalIp(),setTimeout(function(){y()},500),e.abrupt("return");case 19:if(!window.localIp||"0.0.0.0"===window.localIp){e.next=24;break}if(1===S){e.next=24;break}return(0,d.sipResumelogger)("<2_DoResume> doSipResume again after 1s"),setTimeout(function(){S=1,y()},1e3),e.abrupt("return");case 24:return e.next=26,window.updateLocalIp(!0);case 26:if(!window.localIp||"0.0.0.0"!==window.localIp){e.next=31;break}return(0,d.sipResumelogger)("<6_Stop> none network2"),window.CLIENTCONFIG.USE_IM||(0,d.setAppResumeState)(constant.APP_STATE.NETWORK_ERROR),g=!1,e.abrupt("return");case 31:if(t.sipRegisterState!==constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED){e.next=38;break}return w=0,(0,d.sipResumelogger)("<6_Stop> reset retrytime: already registered"),g=!1,e.abrupt("return");case 38:if(t.sipRegisterState!==constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING){e.next=43;break}return w=0,(0,d.sipResumelogger)("<6_Stop> reset retrytime: registering"),g=!1,e.abrupt("return");case 43:if(!window.resumeFromShut||!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isOffline){e.next=49;break}return(0,d.setAppResumeState)(constant.APP_STATE.ONLINE),O=!1,window.resumeFromShut=!1,g=!1,e.abrupt("return");case 49:if(!/^login/.test(window.getRoute())){e.next=54;break}return w=0,(0,d.sipResumelogger)("<6_Stop> reset retrytime: user logout/in the login page"),g=!1,e.abrupt("return");case 54:g=!0,w++,(0,d.sipResumelogger)("<2_DoResume> retrytime: "+w),(0,l.checkStgReConnect)().then(p.reLoginSipserver).then(function(e){return _.info("doSipResume reLoginSipserver result",e),e&&!e.result?o.default.reject(e):R(h).then(f)}).catch(function(e){_.error("doSipResume catch error",e),(0,d.sipResumelogger)("<5_Fail> retrytime: "+w+", error:"+e),I=!0,L=setTimeout(N,Math.abs(w*E))});case 58:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();if((0,d.sipResumelogger)("<0_Info> message:"+a+", forceInitRetryTime:"+r+"(true:reset retrytime, false:TUP send (data.notify=98305) message)"),!(0,d.getResumeEnable)())return(0,d.sipResumelogger)("<6_Stop> current is logout or kickout"),void(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&x());if(r&&(w=0,coreAccount.getLoginModel().then(function(e){e.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER})),g){if((0,d.sipResumelogger)("<0_Info> currentInErrorSetTimeoutFlag:"+I+", currentInSipResultCheck:"+C),!I)return(0,d.sipResumelogger)("<0_Info> sipResume is excuting, no need to do again");I=!1,clearTimeout(L)}var b=PromiseObject();return(0,d.sipResumelogger)("<1_Start>"),g=!0,window.CLIENTCONFIG.USE_IM&&!O||(0,d.setAppResumeState)(constant.APP_STATE.RECONNECTING),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(S=0,window.meetingWHGetLocalIp(),setTimeout(function(){_.info("[IT-Meeting] meetinghw to do sipserverDeregister"),coreAccount.sipserverDeregister(),_.info("[IT-Meeting] meetinghw to do doSipResume"),y()},1e3)):y(),coreAccount.getLoginModel().then(function(e){if(!e.useIM)return b})});t.registerSipResultCallback=function(){window.removeEventListener("sipRegResultEvent",f),window.addEventListener("sipRegResultEvent",f)}},360:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.storeAppCache=t.recoverAppCache=void 0;var a=r(136),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),f=r(645),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(f),l={myInfo:!0,menu:!0},p=(t.recoverAppCache=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.sysLogger.info("[ recoverAppCache ]"),e.next=3,d.get("reduxState");case 3:if(!(t=e.sent)){e.next=12;break}window.sysLogger.info("recoverAppCache 1");try{for(r in t)t.hasOwnProperty(r)&&l[r]&&($getState()[r]=t[r],"myInfo"===r&&(t[r].languageCode=window.langcode))}catch(e){window.sysLogger.info("recoverAppCache error")}return window.sysLogger.info("recoverAppCache 2"),window.sysLogger.info("[ recoverAppCache ] success"),e.abrupt("return",!0);case 12:return window.sysLogger.info("[ recoverAppCache ] no app cache"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.storeAppCache=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.sysLogger.info("[ storeAppCache ]"),t=$getState(),r={},n=p(t);for(a in n)n.hasOwnProperty(a)&&l[a]&&(r[a]=n[a]);return e.next=6,d.set("reduxState",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=(0,o.default)({},e);return t&&t.myInfo&&(t.myInfo.statusDesc=""),t&&t.setting&&(t.setting.shouldResetTray=!0),t&&t.menu&&(t.menu.rightMenuStyle.left="-9999px",t.menu.rightMenuStyle.top="-9999px"),t})},361:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return P.info("[ checkHasProxyAndStgurl ]"),(0,I.getLoginModel)().then(function(e){return e.isSupportProxy&&!e.stgUri?(0,I.LoginError)({errorCode:C.UErrorCode.LOGIN_ERR_HAS_PROXY_NO_STG,errorType:constant.LOGIN_ERROR_TYPE.uportal}):s.default.resolve()})}function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];P.info("enableAutoLogin",e),window.CLIENTCONFIG.ISMOBILE?window.stroage.setFastLogin(e):remote.getGlobal("remoteVars").disable_auto_login=!e}Object.defineProperty(t,"__esModule",{value:!0}),t.ipLogin=t.checkForceSwtichAccount=t.initLoginInfo=t.login=void 0;var i=r(3),s=n(i),u=r(1),c=n(u),f=r(2),d=n(f),l=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.info("[ initServices ]"),e.next=3,(0,I.getLoginModel)();case 3:if(t=e.sent,r=t.useIM,n=t.useSip,a=t.isMultiDeviceLogined,o=t.useEsight,i=t.isMobile,P.info("login success initServices: ",{useIM:r,useSip:n,isMultiDeviceLogined:a,isMobile:i,useEsight:o}),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=13;break}return e.next=13,(0,S.resetSipResumeFlag)();case 13:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=26;break}if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=19;break}return e.next=18,window.isFloatWindow;case 18:e.t0=e.sent;case 19:if(!(s=e.t0)){e.next=24;break}P.info("the window is float "),e.next=26;break;case 24:return P.error("has no activity, login err!!!!!"),e.abrupt("return",(0,I.LoginError)({result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common}));case 26:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.info("[ checkDuplicateLogin ]"),e.next=3,(0,I.getLoginModel)();case 3:if(t=e.sent,!t.loginDisable||t.isTempLogin){e.next=6;break}return e.abrupt("return",(0,I.LoginError)({errorCode:"duplicateLogin",errorType:constant.LOGIN_ERROR_TYPE.common}));case 6:return e.abrupt("return",s.default.resolve(t));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.info("[ loginSuccess ]"),e.next=3,(0,I.getLoginModel)();case 3:t=e.sent,window.retryUportalLoginTimes=0,window.shouldStopRertyLogin=!0,window.baseTimeInterval=0,t.sipLoginOnly||window.isPluginEnv||(P.info("[ loginSuccess ] not sipLoginOnly, enableautologin!"),o()),t.isTempLogin||(M(t.account,window.isHubEnv).then(function(){P.info("[maxhub] go into setLoginRecord"),(0,E.setLoginRecord)()}),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(r=window.getRoute(),isNullOrEmpty(window.handleJoinTempConfNoNameURL)),t.isMobile&&document.addEventListener("pause",T.storeAppCache,!1)),coreCommon.dispatchModuleEvent("login",{event:"uportal",code:0}),(0,T.storeAppCache)(),t.clearPassword(),coreIm.initChangeShowRecentInfo(),P.info("[ loginSuccess ] ok! "),t.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.FINISH;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=6;break}return P.info("[IT-Meeting] no need to loadConfigFromDB"),e.abrupt("return");case 6:return P.info("[ loadConfigFromDB ]"),t.isInLoadConfigFromDB=!0,e.next=10,(0,m.loadUserConfigFromDB)();case 10:t.isInLoadConfigFromDB=!1,window.CLIENTCONFIG.ISBIGWIN?(coreSetting.saveChrUploadState(!0),P.info("big win or maxhub chr is AUTO!")):window.isHubEnv&&coreSetting.saveChrUploadState(!0),P.info("[ loadConfigFromDB ] ok! ",handlePhoneNumber(t.account)),window.CLIENTCONFIG.ENABLE_IT_MEETING||t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.FINISH||(r=1,(0,A.actiongetOBSConfigInfo)(r));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!t.isTempLogin){e.next=6;break}return P.info("[IT-Meeting] no need to initPrivateDB"),e.abrupt("return");case 6:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=9;break}return P.info("[bigwin] no need to initPrivateDB"),e.abrupt("return");case 9:return P.info("[ initPrivateDB ]"),t.isInInitPrivateDB=!0,e.next=13,coreDb.initSQLitePrivateDB({account:t.account});case 13:t.isInInitPrivateDB=!1,P.info("[ initPrivateDB ] ok! ",handlePhoneNumber(t.account));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.enableAutoLogin=o;var v=r(270),E=r(229),h=r(268),m=r(747),I=r(150),C=r(209),L=r(646),T=r(269),S=(r(271),r(359)),O=r(290),x=(r(560),r(363)),N=(r(364),r(562)),R=r(330),y=r(559),b=r(751),k=r(752),A=r(228),P=coreLogger.getLogger("account")("login"),M=(t.login=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:return t=e.sent,t.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.LOGINING,t.isResume=o,t.isTempLogin=i,t.desc=s,t.sipLoginOnly=i,r=(0,v.getUportalApi)().loginToUportal,e.next=11,window.isAnonymous();case 11:return n=e.sent,!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||n||(r=(0,v.getUportalApi)().uportalAllonline,window.pcLoginState()&&(t.isMultiDeviceLogined=!0)),window.CLIENTCONFIG.ENABLE_IT_MEETING||(0,x.initService)("pre login"),e.abrupt("return",p().then(function(){return(0,R.makeLoginCancelable)((0,b.preLogin)(),"prepareLogin")}).then(function(){return(0,R.makeLoginCancelable)((0,b.checkLoginInfo)(),"checkLoginInfo")}).then(function(){return(0,R.makeLoginCancelable)(r(),"loginAuth")}).then(function(){return(0,R.makeLoginCancelable)(a(),"checkHasProxyAndStgurl")}).then(function(){return(0,R.makeLoginCancelable)((0,y.checkShowPrivacy)(),"checkShowPrivacy")}).then(function(){return(0,R.makeLoginCancelable)(w(),"initPrivateDB")}).then(function(){return(0,R.makeLoginCancelable)(_(),"loginSuccess")}).then(function(){return(0,R.makeLoginCancelable)((0,N.doDetectFireWall)(),"doDetectFireWall")}).then(function(){return(0,R.makeLoginCancelable)((0,h.doBuildStg)(),"doBuildStg")}).then(function(){return(0,R.makeLoginCancelable)(g(),"loadConfigFromDB")}).then(function(){return(0,R.makeLoginCancelable)(l(),"initServices")}).then(function(){return(0,R.makeLoginCancelable)((0,k.serviceReadyLoadData)(),"serviceReadyLoadData")}).catch(L.handleLoginError));case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,d.default)(c.default.mark(function e(t,r){var n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return P.info("start maxhub init"),n={isAutoLogin:!0,isRememberPassword:!0},e.next=5,(0,I.getLoginModel)();case 5:a=e.sent,a.set(n),coreConf.initAsPairServer();case 8:return e.abrupt("return",s.default.resolve(0));case 9:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),U=(t.initLoginInfo=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.info("[ initLoginInfo ]"),e.next=3,(0,E.loadLoginSetting)();case 3:return e.next=5,(0,E.loadLoginRecordList)();case 5:return t=e.sent,e.next=8,U();case 8:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=12;break}if(!window.anonymousJoinConf){e.next=12;break}return e.next=12,coreConf.resumeDeviceInfo();case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkForceSwtichAccount=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:t=e.sent,r=t.switchAccount,isNullOrEmpty(r)||isNullOrEmpty(r.tempAccount)||(n={displayAccount:r.tempAccount,account:r.tempAccount,password:"",serverAddress:r.tempServerAddress,serverPort:r.tempServerPort},t.set(n),t.switchAccount={});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.ipLogin=function(){var e=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.info("debug info ipLogin begin"),coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreCall.registerCallEvent(),e.next=7,(0,O.ipCallConfig)();case 7:throttle((0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e,void 0)})),1e3)(),P.info("debug info ipLogin end");case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},362:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.endCurrentCall=t.checkAndEndCall=t.checkBeforeSetOffline=t.checkBeforeLogout=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(559),c=coreLogger.getLogger("logic")("login/checkBeforeLogout"),f=(t.checkBeforeLogout=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.info("checkBeforeLogout,type="+t),e.next=4,(0,u.checkShowPrivacyLogout)("checkBeforeLogout");case 4:return e.next=6,f(t);case 6:if(r=e.sent){e.next=9;break}return e.abrupt("return",r);case 9:if(window.CLIENTCONFIG.ISMOBILE){e.next=22;break}return e.next=12,p(t);case 12:if(r=e.sent,c.info("checkResult checkFileTransFer"+r),r&&!1!==r.ret){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,l(t,n);case 18:if(r=e.sent,c.info("checkResult checkEditor :"+r),r){e.next=22;break}return e.abrupt("return",r);case 22:return e.abrupt("return",r);case 25:return e.prev=25,e.t0=e.catch(0),c.error("checkBeforeLogout",{type:t,e:e.t0.toJSON()}),e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,void 0,[[0,25]])}));return function(t){return e.apply(this,arguments)}}(),t.checkBeforeSetOffline=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.debug("checkBeforeSetOffline type ="+t),e.next=4,f(t,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",r);case 7:if(window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return e.next=10,p(t,n);case 10:if(r=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),c.error("checkBeforeSetOffline",{type:t,e:e.t0.toJSON()}),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,void 0,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,c.info(" checklogin : isInUportalLogin:"+t.isInUportalLogin+", isInInitPrivateDB:"+t.isInInitPrivateDB+", isInDetectFireWall:"+t.isInDetectFireWall+", isInLoadConfigFromDB:"+t.isInLoadConfigFromDB+", isInEserverLogin:"+t.isInEserverLogin+", isInSipLogin:"+t.isInSipLogin),!(t.isInUportalLogin||t.isInInitPrivateDB||t.isInDetectFireWall||t.isInLoadConfigFromDB||t.isInEserverLogin||t.isInSipLogin)){e.next=8;break}return r=language.COMMON_CHECK_LOGOUT_LOGINEXIST,alert(r),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c.info("checkCall,type="+t),!(coreCall.getCallCount()>0)){e.next=40;break}if(!(window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||window.isPluginEnv)){e.next=9;break}return e.next=6,d();case 6:window.endCallPromise=null,e.next=40;break;case 9:if(r="",n="LANG_NATIVE_CONFIRM_TITLE",t===constant.LOGOUT_TYPE.LOGOUT?r=language.COMMON_CHECK_LOGOUT_CALLEXIST:t===constant.LOGOUT_TYPE.EXIT?r=language.COMMON_CHECK_QUIT_CALLEXIST:t===constant.LOGOUT_TYPE.SETOFFLINE&&(r=language.COMMON_CHECK_QUIT_OFFLINE),!r){e.next=40;break}if(a=!1,!s){e.next=26;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=21;break}return e.next=18,window.confirm(r);case 18:a=e.sent,e.next=24;break;case 21:return e.next=23,window.confirm(r,n,!0);case 23:a=e.sent;case 24:e.next=27;break;case 26:a={ret:!0};case 27:if(!a.ret){e.next=39;break}return window.CLIENTCONFIG.ISMOBILE||appService.resetTrayMenu(),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),e.next=32,coreAccount.getLoginModel();case 32:return i=e.sent,coreCommon.isMobile()&&(i.logoutDisable=!0),e.next=36,d();case 36:window.endCallPromise=null,coreCommon.isPc()&&setTimeout(function(){$dispatch(coreUi.dragSetEnable())},500),coreCommon.isMobile()&&(i.logoutDisable=!1);case 39:return e.abrupt("return",a.ret);case 40:return"CALL_INCOMING"===$getState().call.callStatus&&coreUi.stopRing(),e.abrupt("return",!0);case 44:return e.prev=44,e.t0=e.catch(0),c.error("checkCall",{e:e.t0.toJSON()}),e.abrupt("return",!1);case 48:case"end":return e.stop()}},e,void 0,[[0,44]])}));return function(t){return e.apply(this,arguments)}}()),d=(t.checkAndEndCall=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c.info("checkAndEndCall"),!(coreCall.getCallCount()>0)){e.next=4;break}return e.abrupt("return",d());case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),c.error("checkAndEndCall",{e:e.t0.toJSON()}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,void 0,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),t.endCurrentCall=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.endCallPromise=new PromiseObject,setTimeout(function(){null!==window.endCallPromise&&window.endCallPromise.resolve()},5e3),t=$getState(),r=t.conf,n=r.confHandle,a=r.selfRole,i=t.call.callId,coreConf.isInConf()){e.next=9;break}return c.info("ConfrimNotify end call, callId=",i),e.next=7,coreCall.callHangup(i);case 7:e.next=12;break;case 9:return c.info("ConfrimNotify leave conf, confHandle=",n),e.next=12,coreConf.actionLeaveConf();case 12:return coreUi.selectBoxCancelDataNWin(),window.CLIENTCONFIG.ISMOBILE&&"mConfMemberPage"===(s=window.getRoute())&&window.goRoute("main/conference"),e.abrupt("return",window.endCallPromise);case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),l=function(e,t){try{c.info("checkEditor type="+e);var r=language.PRE_EXIT_CHECK_EDITOR,n=!0;return e===constant.LOGOUT_TYPE.LOGOUT&&(n=!0,r=language.PRE_LOGOUT_CHECK_EDITOR),t?coreIm.checkEditorBeforeLogout({showInfo:r,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:n}):coreIm.checkEditor({showInfo:r,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:n})}catch(e){return c.error("checkEditor check异常，强制通过",{e:e.toJSON()}),!0}},p=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{c.info("checkFileTransFer type="+e);var r=language.PRE_EXIT_CHECK_FILE_TRANSFER;e===constant.LOGOUT_TYPE.LOGOUT&&(r=language.PRE_LOGOUT_CHECK_FILE_TRANSFER);return coreIm.checkFileTransFer({showInfo:r,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:!0,isShowAlert:t})}catch(e){return c.error("checkFileTransFer  check异常，强制通过",{e:e.toJSON()}),!0}}},363:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){k.info("hideAlertAndConfirm"),window.hideConfirm&&window.hideConfirm(),window.hideAlert&&window.hideAlert(),window.hideNotifyConfirm&&window.hideNotifyConfirm(),window.clearDialogQueue&&window.clearDialogQueue()}function o(){return(0,h.getLoginModel)().then(function(e){return e.isBuildStgSuc?(0,y.destroyStgTunnel)():s.default.resolve(0)})}Object.defineProperty(t,"__esModule",{value:!0}),t.deRegisterService=t.clearState=t.quickLogout=t.logout=t.setOffline=t.doLogout=t.resetAllAtomicAction=t.initService=void 0;var i=r(3),s=n(i),u=r(1),c=n(u),f=r(2),d=n(f),l=function(){var e=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("clearObserversAndEvents"),e.next=3,coreConf.unregisterConfEvent();case 3:coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n=t.isBackLogin;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("logout success"),e.next=3,(0,h.getLoginModel)();case 3:r=e.sent,r.hasLoginCanceled=!1,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),coreUt.utConfigAccountInfo({configAccount:"",configUuid:""}),n&&(window.ifLogOut=!0,r.showPwd=!1,r.sipOnlyType=0,!window.CLIENTCONFIG.ISMOBILE&&delegate.winHide(),!window.CLIENTCONFIG.ISMOBILE&&(0,T.initImportCertificate)(),window.CLIENTCONFIG.ISMOBILE&&(0,T.initMImportCertificate)(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(k.info("[IT-Meeting] IS_LINK_IT_SMC_MEETING go main"),window.goRoute("callMain"),k.info("[IT-Meeting] shutDownTupServer"),window.shutDownTupServer()):window.goRoute(window.CLIENTCONFIG.ISMOBILE?"loginCtn":window.isHubEnv?"maxhubLogin":"login")),coreCommon.isMobile()&&(r.logoutDisable=!1),coreCommon.isPc()&&setTimeout(function(){$dispatch(coreUi.dragSetEnable())},500);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.error("logout failed"),e.next=3,(0,h.getLoginModel)();case 3:t=e.sent,t.hasLoginCanceled=!1,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,resultParams:[0],isTrackTimeCosts:!0}),coreUt.utConfigAccountInfo({configAccount:"",configUuid:""}),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.goRoute(window.CLIENTCONFIG.ISMOBILE?"loginCtn":window.isHubEnv?"maxhubLogin":"login"),coreCommon.isMobile()&&(t.logoutDisable=!1),coreCommon.isPc()&&setTimeout(function(){$dispatch(coreUi.dragSetEnable())},500);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("start deRegisterTupService"),e.next=3,(0,h.getLoginModel)();case 3:if(t=e.sent,window.CLIENTCONFIG.ISBIGWIN){e.next=11;break}return e.next=7,coreConf.endPairWithPeripherals();case 7:return e.next=9,coreConf.serverCloseAllPair();case 9:coreConf.uninitAsPairServer(),coreConf.handlePairClosed();case 11:if(!(r=t.isSupportAS)){e.next=15;break}return e.next=15,coreConf.unSubscribeConfList();case 15:return e.next=17,coreTup.getUportalInstance();case 17:return n=e.sent,e.next=20,n.uportalLogout();case 20:return e.next=22,coreConf.unInitConfCtrl();case 22:if(!window.CLIENTCONFIG.ISMOBILE){e.next=26;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=26;break}return e.next=26,(0,E.unEnableBFCP)();case 26:return e.next=28,coreAccount.sipserverDeregister();case 28:return e.next=30,coreCwmp.stopCwmpServerAndUnInit();case 30:return e.next=32,coreContact.eaddrUnint();case 32:if(!t.useIM){e.next=40;break}return a=$getState().recent.showRecentInfo.toString(),e.next=36,coreDb.saveUserConfig({key:"userInfoStatus",value:a});case 36:return e.next=38,coreIm.eserverLogout();case 38:return e.next=40,coreIm.umserverLogout();case 40:k.info("deRegisterTupService success");case 41:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=t.deRegisterService=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k.info("start deRegisterService"),k.info("deRegisterService, set isOffline true"),window.isOffline=!0,window.CLIENTCONFIG.ISMOBILE){e.next=9;break}return e.next=7,coreSecurity.getHWTupSupport();case 7:t=e.sent,t.addCallBack({closeSupportSocket:function(){k.info(" closeSupportSocket set null")}});case 9:return(0,I.enableAutoLogin)(!1),e.next=12,g();case 12:return k.info("deRegisterService success"),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(0),k.error("setOffline error",e.t0),e.abrupt("return",s.default.resolve(!1));case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),v=r(228),E=r(290),h=r(150),m=r(362),I=r(269),C=r(271),L=r(647),T=r(229),S=r(561),O=r(556),x=r(272),N=r(358),R=r(301),y=r(268),b=r(330),k=coreLogger.getLogger("logic")("logout"),A=t.initService=function(e){coreIm.initImModelService(e),coreIm.initRecentService(e),coreIm.initOpenRecentData(e),coreContact.initTaskQueue({info:e}),coreIm.localTimeService.initLocalTimeService(e)},P=t.resetAllAtomicAction=function(){coreConf.getVmrInfoToDbAtomic().reset(),coreConf.getAsInfoToDbAtomic().reset(),(0,N.sipLoginAtomicReset)()},M=(t.doLogout=delegate(function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("doLogout"),e.next=3,(0,m.checkBeforeLogout)(t);case 3:if(!(r=e.sent)){e.next=21;break}return e.next=7,(0,h.getLoginModel)();case 7:return n=e.sent,coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),coreCommon.isMobile()&&(n.logoutDisable=!0),e.next=12,(0,b.cancelLogin)();case 12:return e.next=14,(0,x.restoreMAAConfControl)();case 14:return e.next=16,M(a);case 16:coreCommon.isPc()&&setTimeout(function(){$dispatch(coreUi.dragSetEnable())},500),coreCommon.isMobile()&&(n.logoutDisable=!1),n.isPortalUpgrade=!1,n.isObsCfgParams=!1,n.isReqAddrChanged=!1;case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),"doLogout"),t.setOffline=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("setOffline,cancelAutoLogin is "+n+",isShowAlert is "+a),e.next=3,(0,m.checkBeforeSetOffline)(constant.LOGOUT_TYPE.SETOFFLINE,a);case 3:if(t=e.sent,k.info("setOffline,checkBeforeSetOffline result is",t),!0!==t&&!0!==t.ret){e.next=28;break}return e.next=8,(0,b.cancelLogin)();case 8:return e.next=10,(0,h.getLoginModel)();case 10:return r=e.sent,r.hasLoginCanceled=!1,n&&(0,T.changeAutoLogin)(n),r.setAppState(constant.APP_STATE.DISCONNECTED),(0,R.setLocalOfflineStatus)("setOffline"),coreUi.clearLinkageStatusLogic(),e.next=18,l();case 18:return P(),e.next=21,(0,C.clearResumeService)();case 21:return e.next=23,(0,C.stopResume)("setOffline");case 23:return k.info("setOffline, set isOffline true"),window.isOffline=!0,e.abrupt("return",w());case 28:return e.abrupt("return",s.default.resolve(!1));case 29:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.logout=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a(),e.t0=coreCommon.isMobile(),!e.t0){e.next=5;break}return e.next=5,(0,T.changeAutoLogin)();case 5:return e.next=7,(0,h.getLoginModel)();case 7:return t=e.sent,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,params:[]}),r=$getState(),n=r.conf.confTempAcsAccount,isNullOrEmpty(n)||($dispatch(coreUi.changeConfTempAcsAccount("")),t.displayAccount=""),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),coreCommon.isMobile()&&(t.logoutDisable=!0),window.stroage.setFastLogin(!1),e.prev=14,k.info("[ logout ] isBackLogin:"+i+",isKickout:"+s),coreCommon.isPc()&&appService.resetTrayMenu(),window.CLIENTCONFIG.ISMOBILE&&appService.cancelAllNotification(),e.next=20,(0,S.unRegisterPush)(!1);case 20:return window.skipLogin=!1,e.next=23,(0,C.clearResumeService)();case 23:return e.next=25,(0,C.stopResume)("logout");case 25:return(0,L.getMiddleEndApi)().stopRefreshMiddleEndToken(),e.next=28,l();case 28:return coreCall.exitFullScreen(),P(),e.next=32,coreConf.unInit();case 32:v.actionGetCorpResourceAtomic.reset(),!s&&(0,I.storeAppCache)(),$dispatch(coreUi.toggleMobileNetTip(!0)),t.isMobile&&document.removeEventListener("pause",I.storeAppCache,!1),e.next=43;break;case 38:return e.prev=38,e.t1=e.catch(14),k.error("logout exception: "+e.t1.toString()),k.error("logout handle cache error:",e.t1),e.abrupt("return",_());case 43:return e.abrupt("return",w().then((0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(),e.next=3,(0,v.resetLoginInfo)();case 3:return e.next=5,U();case 5:return e.abrupt("return",{isBackLogin:i});case 6:case"end":return e.stop()}},e,void 0)}))).then(p).catch(function(e){k.error("logout handle cache error:",e),_()}));case 44:case"end":return e.stop()}},e,void 0,[[14,38]])}));return function(){return e.apply(this,arguments)}}()),U=(t.quickLogout=delegate((0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("[ quickLogout ]"),e.next=3,coreCwmp.stopCwmpServerAndUnInit();case 3:case"end":return e.stop()}},e,void 0)})),"quickLogout"),t.clearState=function(){var e=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:k.info("clearState"),coreCommon.dispatchModuleEvent("logout",{event:"clearState"}),coreSearch.clearGlobalData(),coreUi.clearReduxState(),A("logout clearState"),coreUi.initAvatarMap(),coreUi.hideModal(),(0,h.resetLoginModel)(),(0,O.resetMyInfo)();case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}())},364:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compareVersion=t.dealUpdateVersionClickEx=t.hideProgressBarModal=t.dealInstallFailed=t.startInstallNewVer=t.getInCallingState=t.clearBarPageSet=t.showUpdateHintsOrBar=t.clickConfirmUpdate=t.dealDownloadFailed=t.downloadProcessNotify=t.clearDownloadClick=t.checkUpgrade=t.reStartUpgrade=t.clearAllUpdataState=t.changeUpdataState=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(132),c=n(u),f=r(69),d=n(f),l=r(127),p=n(l),_=r(228),g=r(150),w=r(209),v=coreLogger.getLogger("login")("upgrade"),E={clickDownload:!1,clickTimer:null,downloadResume:!1},h=t.changeUpdataState=function(e){v.info("change updata state, obj=",(0,d.default)(e)),(0,c.default)(E,e),v.info("updataState=",(0,d.default)(E))},m=(t.clearAllUpdataState=function(){E.clickTimer&&clearTimeout(E.clickTimer),E={clickDownload:!1,clickTimer:null,downloadResume:!1},v.info("clear updata state, updataState=",(0,d.default)(E))},function(){var e=(0,s.default)(o.default.mark(function e(t,r){var n,a,i,u,c,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:return n=e.sent,a=PromiseObject(),i=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.param,360488===t.notify?O(r):360489===t.notify&&x(r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),n.setNotifyFunc(360488,i),n.setNotifyFunc(360489,i),u={download_info:{download_timeout:300,version_path:t,file_path:r,keep_download:f,local_file_size:d}},e.next=10,n.downloadUpgradeFile(u);case 10:return c=e.sent,0!==c.result&&(v.error("send downloadUpgradeFile fail, result:"+c.result),a.resolve("request failed")),setTimeout(function(){a.resolve("request timeout")},35e4),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()),I=function(){return v.info("current platform is :win"),coreCommon.isHuaweiCloudWeLink()?"WeLink-windows":"cloudlink-windows"},C=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,u,c,f,d,l,p,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,n=r.serverAddress,a=r.serverPort,i=r.serverUportalAddress,u=r.serverUportalPort,e.next=6,coreTup.getUportalInstance();case 6:return c=e.sent,v.info("[check upgrade]tup init"),e.next=10,(0,_.setLoginProxy)(c);case 10:return f=PromiseObject(),d=function(){var e=(0,s.default)(o.default.mark(function e(r){var i,s,u,d,l,p,_,g;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=r.param)||38!==i.result||!i.query_version_result||""===i.query_version_result.redirect_url){e.next=17;break}if(s=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(u=s.exec(i.query_version_result.redirect_url))){e.next=10;break}d=u[1],l=u[2],p=u[3],n=d||l,a=p&&p||0,e.next=11;break;case 10:return e.abrupt("return",(0,w.LoginError)({result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:isResume}));case 11:return _={query_ver_info:{server_url:n,server_port:parseInt(a),user_account:t,software_type:I(),current_version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE}},e.next=14,c.queryVersionInfo(_);case 14:g=e.sent,e.next=18;break;case 17:0!==i.result?(v.error("query version fail, result:"+i.result),f.resolve(i)):f.resolve(i);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),c.setNotifyFunc(360487,d),l={query_ver_info:{server_url:isNullOrEmpty(E)?isNullOrEmpty(h.server_url)?r.serverAddress:h.server_url:i,server_port:isNullOrEmpty(E)?isNullOrEmpty(h.port)?parseInt(r.serverPort):parseInt(h.port):parseInt(u),user_account:t,software_type:I(),current_version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,token:E}},v.info("[check upgrade] queryVersionInfo: "),e.next=17,c.queryVersionInfo(l);case 17:return p=e.sent,setTimeout(function(){f.resolve("request timeout")},1e4),e.abrupt("return",f);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),L=(t.reStartUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,r=t.isWaitUpgrade,n=t.isPortalAfterCallUpgrade,!0===r&&!0===n&&(v.info("Soft start to upgrade after call ended"),t.isPortalAfterCallUpgrade=!1,window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():B());case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("checkUpgrade"),r=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,s.default)(o.default.mark(function e(){var t,r,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("[check upgrade] start"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return v.info("the app is ENABLE_IT_MEETING is true, can not update by usg"),e.abrupt("return");case 4:if(!window.isHubEnv){e.next=6;break}return e.abrupt("return");case 6:if(!window.isPluginEnv){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,g.getLoginModel)();case 10:if(t=e.sent,isNullOrEmpty(a)||!t.sipLoginOnly){e.next=14;break}return v.info("[check upgrade] end: anonyumous join conference don't need deal non-forced upgrade"),e.abrupt("return");case 14:if(!window.webView||!window.IsGooglePlayPkg()){e.next=17;break}return v.info("[check upgrade] end: Android pkg check, the app is from google play, can not update by usg"),e.abrupt("return");case 17:if(!isNullOrEmpty(a)||t.isReqAddrChanged||n){e.next=20;break}return v.info("[check upgrade] end: addr not change, no need to query"),e.abrupt("return");case 20:if(!isNullOrEmpty(a)||!t.isAutoLogin){e.next=23;break}return v.info("[check upgrade] end: auto login no need to query"),e.abrupt("return");case 23:if(t.showContentType!==constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING){e.next=26;break}return v.info("[check upgrade] end: now is downloading, no need to query"),e.abrupt("return");case 26:return t.isReqAddrChanged=!1,e.next=29,C(i,a);case 29:if(r=e.sent,!(coreCommon.isPc()&&u&&r)||8!==r.result&&3!==r.result){e.next=40;break}return v.info("[check upgrade] switchProxy queryVersionInfo again"),e.next=34,coreAccount.switchProxy();case 34:return e.next=36,C(i,a);case 36:if(r=e.sent,0===r.result){e.next=40;break}return e.next=40,coreAccount.resetProxy();case 40:if(0===r.result){e.next=43;break}return v.info("[check upgrade] end: queryVersionInfo res",r),e.abrupt("return");case 43:if(s=r,!1===t.isPortalUpgrade&&(v.info("[check upgrade]isPortalUpgrade become true"),t.isPortalUpgrade=!0),!s.query_version_result.is_consistent){e.next=48;break}return v.info("[check upgrade] end: current version is the newest"),e.abrupt("return");case 48:if(j(s.query_version_result.upgrading_version)){e.next=51;break}return v.info("[check upgrade] end: compareVersion false"),e.abrupt("return");case 51:t.isForceUpdate=s.query_version_result.is_force_upgrade,t.set({whatsNewCHN:s.query_version_result.version_description,whatsNewENG:s.query_version_result.version_description,downloadVersion:s.query_version_result.version_description,downloadUrl:s.query_version_result.version_path}),t.isForceUpdate?t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS:t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.WHATSNEWHINTS,isNullOrEmpty(a)||(t.isWaitUpgrade=!0),c=F(),c&&t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.FINISH&&t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.INIT?v.info("[check upgrade] end: User is in calling, not show hints"):(v.info("[check upgrade] end: User is not calling, start to show update hints"),A());case 57:case"end":return e.stop()}},e,void 0)})),r,c);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),T=t.clearDownloadClick=function(){v.info("clearDownloadClick in"),E.clickTimer&&clearTimeout(E.clickTimer),E.clickTimer=null,h({clickDownload:!1})},S=function(){return!window.webView||!window.IsGooglePlayPkg()||(v.info("Android pkg check, the app is from google play, can not update by usg"),!1)},O=(function(){var e=(0,s.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.info("run at updateFileDownload"),!E.clickDownload){e.next=6;break}return v.info("userClick confirm download"),E.downloadResume?(G(t,!0),h({downloadResume:!1})):G(t),T(),e.abrupt("return");case 6:setTimeout(function(){v.info("start to show hints"),!1!==S()&&(0,g.getLoginModel)().then(function(e){e.isForceUpdate=r,e.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS,e.isWaitUpgrade=!0})},3e3);case 7:case"end":return e.stop()}},e,void 0)}))}(),t.downloadProcessNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v.info("start set download process ",(0,d.default)(t)),r=parseFloat(t.progress_info.total_file_size),n=parseFloat(t.progress_info.cur_file_size),!isNaN(r)&&!isNaN(n)){e.next=7;break}return v.error("size data error"),e.abrupt("return");case 7:return a=r<=0?0:parseInt(Math.round(n/r*1e4)/100),e.next=10,(0,g.getLoginModel)();case 10:i=e.sent,i.progressPercent=a,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v.error("downloadProcessNotify, error:",e.t0);case 17:case"end":return e.stop()}},e,void 0,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()),x=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("get download result, params",(0,d.default)(t)),e.next=3,(0,g.getLoginModel)();case 3:r=e.sent,0===t.result?(v.info("download update file success"),B()):(v.info("download update file failed, result=",t.result+", info=",t.FaultString),h({downloadResume:!0}),N());case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),N=t.dealDownloadFailed=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,t.isUpdateError=!0,t.isUpdateErrorEx=!0,t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,A();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),R=t.clickConfirmUpdate=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("userClick confirm download update version"),e.next=3,(0,g.getLoginModel)();case 3:t=e.sent,r=t.isUpdateErrorEx,n=t.showContentType,a=t.progressPercent,v.info("isUpdateErrorEx: "+r+", progressPercent: "+a),!r&&~a?(v.info("downloding, no need restart"),t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,A()):(i=t.downloadUrl,E.downloadResume?(G(i,!0),h({downloadResume:!1})):G(i));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().common.modalContent,v.info("modalContent : ",t),e.next=4,(0,g.getLoginModel)();case 4:if(r=e.sent,isNullOrEmpty(t)||"progressbar"===t.key){e.next=11;break}if(v.info("model is not empty, [key]=",t.key),"addConf"!==t.key){e.next=11;break}return e.next=10,coreConf.toggleChangeConfAcsPas("");case 10:coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN);case 11:n=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getProgressBar}),coreUi.showModal(p.default.createElement(n,{key:"progressbar"}),!0,"",!1);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),b=function(){appService.openUrl("itms-apps://itunes.apple.com/cn/app/%E5%8D%8E%E4%B8%BA%E4%BC%9A%E8%AE%AE/id1354340495?mt=8")},k=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:t=e.sent,r=t.curPortalState===constant.CUR_PORTAL_LOGIN_STATE.FINISH?language.LOG_OUT:language.LANG_NATIVE_CONFIRM_CANCEL,t.isForceUpdate?coreCommon.isIos()?window.notifyIosUpdateAlert("VERSION_UPDATE_TITLE",{buttonText:language.UPDATE_NOW}).then(function(e){e.ret&&(b(),A())}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:r,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?R():(v.info("userClick exit download update version ",t.curPortalState),t.curPortalState===constant.CUR_PORTAL_LOGIN_STATE.FINISH&&delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:language.UPDATE_LATER,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?coreCommon.isIos()?b():R():v.info("userClick cancel download update version")});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),A=t.showUpdateHintsOrBar=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=4;break}y(),e.next=8;break;case 4:return e.next=6,(0,g.getLoginModel)();case 6:t=e.sent,constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING===t.showContentType?window.goRoute("mUpdateVersionInfo"):k();case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),P=function(e){try{if(window.fs){window.fs.readdirSync(e).forEach(function(t){var r=e+"/"+t;window.fs.statSync(r).isDirectory()||window.fs.unlinkSync(r)})}}catch(e){v.error("delete file error",e)}},M=function(e){var t=[];if(window.fs){window.fs.readdirSync(e).forEach(function(r){t.push(e+"/"+r)})}return t},U=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="",r="";if(window.fs)if(t=window.path.join(window.APP_DATA_PATH,"update/").replace(/\\/g,"/"),window.fs.existsSync(t))if(e){var n=M(t);if(r=Array.isArray(n)&&1===n.length&&n[0]||"",v.info("this is resume download, find old update file=",r),""===r){v.info("not found valid file, delete all files");var a=coreAccount.getSyncLoginModel();a.set({progressPercent:0}),P(t)}}else v.info("not resume download, delete old update files"),P(t);else v.info("creat new update file"),window.fs.mkdir(t);else window.webView&&(t=window.UPGRADE_APK_PATH,e&&(r=window.getProcessFileName(t)));return{upgradeDir:t,fileNamePath:r}},D=t.clearBarPageSet=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:r=e.sent,r.isUpdateError=!1,r.isUpdateErrorEx=!1,!t&&(r.progressPercent=-1);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,v.info("start update download, iskeep=",s),v.info("start request software version check"),n=U(s),a=n.upgradeDir,i=n.fileNamePath,v.info("confirm download, set update file path=",a),""!==a&&(""!==i?(v.info("get old file path=",i),coreCwmp.getComPressFileSize({filePath:i}).then(function(e){var r=e.fileSize;v.info("get old update file size=",r),m(t,a,!0,r)})):(v.info("old file path is empty"),sleep(800).then(function(){return m(t,a)}))),e.next=10,D(s);case 10:r.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,A();case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),F=t.getInCallingState=function(){var e=$getState().call.callStatus;return"VIDEO_CONNECTED"===e||"VIDEO_OUT"===e||"CALL_OUT"===e||"CALL_CONNECTED"===e},B=t.startInstallNewVer=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=F()){e.next=6;break}v.info("User is not calling, start install soft version now"),setTimeout(function(){window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():H()},3e3),e.next=11;break;case 6:return e.next=8,(0,g.getLoginModel)();case 8:r=e.sent,v.info("User is in calling, save the state and wait for the call end"),r.isPortalAfterCallUpgrade=!0;case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),H=function(){if(window.fs){for(var e=window.path.join(window.APP_DATA_PATH,"update").replace(/\\/g,"/"),t=window.fs.readdirSync(e),r=0;r<t.length;r++){var n=t[r];if(-1!==(0,d.default)(n).indexOf(".exe")){v.info("start execute software upgrade file, upgrade file name=",n);return void V(e+"/"+n)}}v.info("software update file is not exist"),K(language.DID_NOT_FIND_THE_AVAILABLE_UPGRADE_FILE)}},W=function(e){var t=coreCommon.isHuaweiCloudWeLink()?window.process.env.APPDATA+"\\WeLink\\log\\language.txt":window.process.env.APPDATA+"\\HuaweiMeeting\\log\\language.txt";window.fs.writeFile(t,window.langcode,"utf8",function(t){t&&window.log("writeFile quiteInstallFile error =",t),window.spawn(e,["/verysilent","/suppressmsgboxes","/norestart"]).on("error",function(e){v.info("execute update file error, err=",e),K(language.PC_FILE_DAMAGE_DOWN_AGAIN)})})},V=function(e){try{var t=window.APP_DATA_PATH;appService.writeFile(t,"configfile.ini","language = "+window.langcode.toString()+"\r\npackageversion = "+window.CLIENTCONFIG.NEW_APP_NAME).then(function(r){v.info("set update tip language success, file=",r);var n=t+"/ShowInstallTip.exe";appService.isFileExist(n).then(function(r){if(r){v.info("execute ShowInstallTip");var n=t.slice(0,2),a=n+" && cd "+t+" && ShowInstallTip.exe";coreCommon.isHuaweiCloudWeLink()?a+=" /WeLink":a+=" /HuaweiMeeting",window.exec(a),W(e)}else v.info("update tip file does not exit"),W(e)})},function(t){v.info("set update tip language failed, err:"+t),W(e)})}catch(e){v.error("install update file error:",e),K(language.PC_FILE_DAMAGE_DOWN_AGAIN)}},K=t.dealInstallFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("intsall update file error, show download again prompt"),e.next=3,(0,g.getLoginModel)();case 3:r=e.sent,window.exec("taskkill /f /im ShowInstallTip.exe"),Y(),r.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS,window.confirm(""+t,!0).then(function(e){e.ret&&(v.info("userClick to download update file again"),G(r.downloadUrl))});case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Y=t.hideProgressBarModal=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().common.modalContent,isNullOrEmpty(t)||"progressbar"!==t.key?v.info("not update model, [key]=",t.key):(v.info("hide update model"),coreUi.hideModal());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),j=(t.dealUpdateVersionClickEx=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.info("userClick, show soft update state btn"),e.next=3,(0,g.getLoginModel)();case 3:if(t=e.sent,r=t.authToken,!1!==t.isWaitUpgrade){e.next=10;break}return e.next=8,L(!1,r,"",!1,function(){if(!1===t.isWaitUpgrade)if(v.info("this is the latest software version"),window.CLIENTCONFIG.ISMOBILE)window.ToastNew(language.SOFT_UPGRADE_LATEST,2);else{var e=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getSoftVersionHint});coreUi.showModal(p.default.createElement(e,null))}});case 8:e.next=11;break;case 10:A();case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.compareVersion=function(e){var t=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,r=t.split("."),n=e.split("."),a=Math.max(r.length,n.length);if(t===e)return!1;for(var o=0;o<a;o++){var i=o>=n.length?0:parseInt(n[o],10),s=o>=r.length?0:parseInt(r[o],10);if(i>s)return!0;if(i<s)return!1}return!1})},374:function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.syncCertificate=void 0;var a=r(145),o=n(a),i=r(3),s=n(i),u=r(1),c=n(u),f=r(2),d=n(f),l=coreLogger.getLogger("logic")("syncCertificate"),p="",_="",g="",w="",v="",E="",h="",m="",I=function(){var e=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p=window.EXEC_PATH,_=window.EXEC_PATH+"/BfcpTLS",g=window.EXEC_PATH+"/BfcpTLS/server.pem",w=window.EXEC_PATH+"/BfcpTLS/server_key.pem",v=window.EXEC_PATH+"/kmc/p4bfcp.txt",window.fs&&(p=window.path.join(window.EXEC_PATH),_=window.path.join(window.EXEC_PATH,"BfcpTLS"),g=window.path.join(window.EXEC_PATH,"BfcpTLS","server.pem"),w=window.path.join(window.EXEC_PATH,"BfcpTLS","server_key.pem"),v=window.path.join(window.APP_DATA_PATH,"p4bfcp.txt")),"mac"===window.CLIENTCONFIG.PLATFORM&&(p=window.path.join(window.EXEC_PATH)),"win"===window.CLIENTCONFIG.PLATFORM&&(v=window.path.join(window.EXEC_PATH,"BfcpTLS","p4bfcp.txt")),E=window.APP_DATA_PATH+"/deviceCertificate_cacert.pem",h=window.APP_DATA_PATH+"/deviceCertificate.tar.gz",m=window.APP_DATA_PATH+"/deviceCertificate",window.fs&&(E=window.path.join(window.APP_DATA_PATH,"deviceCertificate_cacert.pem"),h=window.path.join(window.APP_DATA_PATH,"deviceCertificate.tar.gz"),m=window.path.join(window.APP_DATA_PATH,"deviceCertificate"));case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=7;break}if(fs.existsSync(t)){e.next=4;break}return l.info("failed to Read file: "+t),e.abrupt("return","");case 4:return e.abrupt("return",fs.readFileSync(t).toString());case 7:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=14;break}if(window.webView.isFileExist(t)){e.next=11;break}return l.info("failed to Read file: "+t),e.abrupt("return","");case 11:return e.abrupt("return",window.webView.readP4BFCP(t));case 14:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=22;break}return r=function(){var e=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var r=function(t){e(t)},n=function(){e("")};window.cordova.exec(r,n,"OCJSBridge","readFile",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),e.next=18,r(t);case 18:return n=e.sent,e.abrupt("return",n);case 22:l.info("Unown Platform.");case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),L=function(){var t=(0,d.default)(c.default.mark(function t(r){var n,a;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.fs){t.next=6;break}if(!fs.existsSync(r)){t.next=4;break}return n=fs.readFileSync(r),t.abrupt("return",new e(n).toString("base64"));case 4:t.next=19;break;case 6:if("android"!==window.CLIENTCONFIG.PLATFORM){t.next=10;break}return t.abrupt("return",window.webView.readBytesToBase64(r));case 10:if("ios"!==window.CLIENTCONFIG.PLATFORM){t.next=17;break}return a=function(){var e=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var r=function(t){e(t)},n=function(){e("")};window.cordova.exec(r,n,"OCJSBridge","readBytesToBase64",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.next=14,a(r);case 14:return t.abrupt("return",t.sent);case 17:return l.info("Unown PlatForm."),t.abrupt("return","");case 19:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}(),T=function(){var e=(0,d.default)(c.default.mark(function e(t,r){var n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=4;break}try{fs.writeFileSync(t,r)}catch(e){l.error("failed to write file: "+t)}e.next=20;break;case 4:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=8;break}return e.abrupt("return",window.webView.writeStringToFile(t,r));case 8:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=18;break}return n=t.lastIndexOf("/"),a=t.slice(0,n),o=t.slice(n+1),i=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var a=function(t){e(t)},o=function(){e("")};window.cordova.exec(a,o,"OCJSBridge","writeFile",[t,r,n])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),e.next=15,i(a,o,r);case 15:return e.abrupt("return",e.sent);case 18:return l.info("Unown Platform."),e.abrupt("return",null);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),S=function(){var e=(0,d.default)(c.default.mark(function e(t,r){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=T,e.t1=r,e.next=4,C(t);case 4:return e.t2=e.sent,e.next=7,(0,e.t0)(e.t1,e.t2);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=(0,d.default)(c.default.mark(function e(t,r){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=T,e.t1=r,e.next=4,C(t);case 4:return e.t2=e.sent,e.next=7,(0,e.t0)(e.t1,e.t2);case 7:return e.next=9,N(t);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,i,u,f,p,_,g,w;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=28;break}if(!fs.existsSync(t)){e.next=27;break}if(!fs.lstatSync(t).isDirectory()){e.next=26;break}for(r=fs.readdirSync(t),n=!0,a=!1,i=void 0,e.prev=7,u=(0,o.default)(r);!(n=(f=u.next()).done);n=!0)p=f.value,_=window.path.join(t,p),fs.unlinkSync(_);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),a=!0,i=e.t0;case 15:e.prev=15,e.prev=16,!n&&u.return&&u.return();case 18:if(e.prev=18,!a){e.next=21;break}throw i;case 21:return e.finish(18);case 22:return e.finish(15);case 23:fs.rmdirSync(t),e.next=27;break;case 26:fs.unlinkSync(t);case 27:fs.mkdirSync(m);case 28:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=32;break}window.webView.makeNewDir(m),e.next=40;break;case 32:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=40;break}return g=function(){var e=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var r=function(t){e(t)},n=function(){e([])};window.cordova.exec(r,n,"OCJSBridge","makeNewDir",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),e.next=36,g(m);case 36:if(w=e.sent){e.next=40;break}return l.info("failed to create directory."),e.abrupt("return");case 40:case"end":return e.stop()}},e,void 0,[[7,11,15,23],[16,,18,22]])}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=4;break}fs.existsSync(t)&&(fs.lstatSync(t).isDirectory()?fs.rmdirSync(t):fs.unlinkSync(t)),e.next=17;break;case 4:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=8;break}return e.abrupt("return",window.webView.deleteFile(t));case 8:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=16;break}return r=function(){var e=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var r=function(t){e(t)},n=function(){e("")};window.cordova.exec(r,n,"OCJSBridge","deleteFile",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),e.next=12,r(t);case 12:return n=e.sent,e.abrupt("return",n);case 16:l.info("Unown Platform.");case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,d.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=9;break}if(!fs.existsSync(t)){e.next=7;break}if(!fs.lstatSync(t).isDirectory()){e.next=6;break}return e.next=5,fs.readdirSync(t);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",null);case 7:e.next=18;break;case 9:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=13;break}return e.abrupt("return",JSON.parse(window.webView.getFileList(t)));case 13:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=18;break}return r=function(){var e=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var r=function(t){e(t)},n=function(){e([])};window.cordova.exec(r,n,"OCJSBridge","getFileList",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),e.next=17,r(t);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,f,d,l,p,_,g,w,v,E,h;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},n=t.length,a=0,o=512,i=o,s=100,u=8,f=8,d=8,l=12,p=4;case 11:if(!(a+p<n)){e.next=25;break}if(t.substr(a,p).replaceAll("\0","")){e.next=14;break}return e.abrupt("break",25);case 14:_=a,g=a+s+u+f+d,w=t.substr(_,s).replaceAll("\0",""),v=parseInt(t.substr(g,l),8),E=a+i,h=t.substr(E,+v),a=E+v,v%o&&(a+=o-v%o),r[w]=h,e.next=11;break;case 25:return e.abrupt("return",r);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.info("Begin refreshBFCPP"),"ios"===window.CLIENTCONFIG.PLATFORM?window.readBfcpp(window.KMC_PATH+"/p4bfcp.txt"):"android"===window.CLIENTCONFIG.PLATFORM?window.bfcpp=window.webView.readP4BFCP(window.KMC_PATH+"/p4bfcp.txt"):(t=window.path.join(window.KMC_PATH,"p4bfcp.txt"),"win"===window.CLIENTCONFIG.PLATFORM&&(t=window.path.join(window.EXEC_PATH,"BfcpTLS","p4bfcp.txt")),fs.existsSync(t)?window.bfcpp=fs.readFileSync(t).toString():window.bfcpp=fs.readFileSync(window.path.join(window.EXEC_PATH,"p4bfcp.txt")).toString()),l.info("refreshBFCPP: succeed.");case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("Begin refreshBFCPForTLS"),t=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),r=!1,t!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&t!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(r=!0),l.info("refreshBFCPForTLS: "+r),e.next=7,b();case 7:return e.next=9,coreAccount.configBFCPForTLS({bForceTLSMode:r});case 9:return n=e.sent,e.next=12,coreTup.getCallInstance().configBFCPTLSParam(n);case 12:l.info("refreshBFCPForTLS succeed.");case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a,i,s,u,f,d,I,C,L,T,x,y,b,A;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("Begin refreshDeviceCertificate"),t="password.txt",r="private"+$getState().login.account.toUpperCase()+".pem",n=$getState().login.account.toUpperCase()+".pem",a=m+"/"+n,i=m+"/"+r,s=m+"/"+t,window.fs&&(a=window.path.join(m,n),i=window.path.join(m,r),s=window.path.join(m,t)),"mac"!==window.CLIENTCONFIG.PLATFORM){e.next=17;break}return e.next=11,O(a,window.path.join(m,"server.pem"));case 11:return e.next=13,O(i,window.path.join(m,"server_key.pem"));case 13:return e.next=15,O(s,window.path.join(m,"p4bfcp.txt"));case 15:e.next=23;break;case 17:return e.next=19,O(a,g);case 19:return e.next=21,O(i,w);case 21:return e.next=23,O(s,v);case 23:return u=[],u="mac"===window.CLIENTCONFIG.PLATFORM?["server.pem","server_key.pem","p4bfcp.txt"]:[t,r,n],e.next=27,R(m);case 27:f=e.sent,d=!0,I=!1,C=void 0,e.prev=31,L=(0,o.default)(f);case 33:if(d=(T=L.next()).done){e.next=47;break}if(x=T.value,-1!==u.indexOf(x)){e.next=44;break}return y=window.fs?window.path.join(m,x):m+"/"+x,b=window.fs?window.path.join(p,x):p+"/"+x,A=window.fs?window.path.join(_,x):_+"/"+x,e.next=41,S(y,b);case 41:if("mac"===window.CLIENTCONFIG.PLATFORM){e.next=44;break}return e.next=44,O(y,A);case 44:d=!0,e.next=33;break;case 47:e.next=53;break;case 49:e.prev=49,e.t0=e.catch(31),I=!0,C=e.t0;case 53:e.prev=53,e.prev=54,!d&&L.return&&L.return();case 56:if(e.prev=56,!I){e.next=59;break}throw C;case 59:return e.finish(56);case 60:return e.finish(53);case 61:if("mac"===window.CLIENTCONFIG.PLATFORM){e.next=64;break}return e.next=64,N(m);case 64:return e.next=66,N(E);case 66:return e.next=68,N(h);case 68:return e.next=70,k();case 70:l.info("refreshDeviceCertificate: Refresh Device Certificate Succeed.");case 71:case"end":return e.stop()}},e,void 0,[[31,49,53,61],[54,,56,60]])}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=m+"/private"+$getState().login.account.toUpperCase()+".pem",window.fs&&(t=window.path.join(m,"private"+$getState().login.account.toUpperCase()+".pem")),e.next=4,coreSecurity.getHWTupSupport();case 4:return r=e.sent,e.next=7,r.isPlainPrivatePem({privatePemPath:t});case 7:return n=e.sent,e.abrupt("return",n.param.isplaintext);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin isValidPrivateKey"),t=m+"/private"+$getState().login.account.toUpperCase()+".pem",r=m+"password.txt",window.fs&&(t=window.path.join(m,"private"+$getState().login.account.toUpperCase()+".pem"),r=window.path.join(m,"password.txt")),e.next=6,C(r);case 6:return n=e.sent,e.next=9,coreSecurity.getHWTupSupport();case 9:return a=e.sent,e.next=12,a.getinstance().isCipherValid({privatePemPath:t,password:n});case 12:return o=e.sent,e.abrupt("return",o.param.passwordvalid);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a,o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin encryptPrivatePemFile"),t="private"+$getState().login.account.toUpperCase()+".pem",r=m+"/"+t,n=m+"/password.txt",window.fs&&(r=window.path.join(m,t),n=window.path.join(m,"password.txt")),e.next=7,C(n);case 7:if(a=e.sent){e.next=13;break}return o=16,e.next=12,coreSecurity.getRealRandom(o);case 12:a=e.sent;case 13:return e.next=15,coreSecurity.getHWTupSupport();case 15:return i=e.sent,e.next=18,i.getinstance().encryptPrivateKey({privatePemPath:r,password:a,privateEncryptPemPath:r});case 18:if(s=e.sent,0===s.result){e.next=22;break}return l.info("failed to encrypt pem file."),e.abrupt("return");case 22:return e.next=24,coreSecurity.encryptKMC(a);case 24:return u=e.sent,f=u.param.CiperText,e.next=28,T(n,f);case 28:return e.next=30,A();case 30:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("before encryptPrivatePem"),e.next=3,P();case 3:if(!(t=e.sent)){e.next=9;break}l.info("isPlainPem: true"),U(),e.next=31;break;case 9:return l.info("isPlainPem: false"),e.next=12,M();case 12:if(!(r=e.sent)){e.next=29;break}return l.info("isValid: true"),n=m+"/password.txt",window.fs&&(n=window.path.join(m,"password.txt")),e.next=19,C(n);case 19:return a=e.sent,e.next=22,coreSecurity.encryptKMC(a);case 22:return o=e.sent,i=o.param.CiperText,e.next=26,T(n,i);case 26:A(),e.next=31;break;case 29:return l.info("isValid: false"),e.abrupt("return");case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin unArchiveDeviceCertificate"),e.next=3,L(h);case 3:return t=e.sent,r=coreCommon.unZip(t),e.next=7,y(r);case 7:if(n=e.sent){e.next=11;break}return l.info("failed to resolve certificate package."),e.abrupt("return");case 11:return e.next=13,x(m);case 13:e.t0=c.default.keys(n);case 14:if((e.t1=e.t0()).done){e.next=20;break}return a=e.t1.value,e.next=18,T(m+"/"+a,n[a]);case 18:e.next=14;break;case 20:l.info("unArchiveDeviceCertificate: Done!"),D();case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n,a){var o,i,s,u,f,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin syncDeviceCertificate"),o="https://"+t+":"+r+"/capf/equcertificate/"+$getState().login.account+".tar.gz",i=h,e.next=5,C(E);case 5:if(s=e.sent){e.next=9;break}return l.info("failed to read ca certificate file information."),e.abrupt("return");case 9:return s=s.replace(/\n/g,"").replace(/^.*-----BEGIN CERTIFICATE-----/,"").replace(/-----END CERTIFICATE-----$/,""),u="<root><sn>"+$getState().login.account+"</sn><factorycertificate>"+s+"</factorycertificate></root>",f={"Content-Type":"text/xml;"},d=function(e){0===e.param.ret&&200===e.param.rsp_body.rsp_code?(l.info("syncDeviceCertificate: succeed."),G()):0!==e.param.ret?l.info("syncDeviceCertificate failed(tup): "+e.param.ret):l.info("syncDeviceCertificate failed(http): "+e.param.rsp_body.rsp_code)},e.next=15,coreHttp.downloadFile({params:{url:o,filePath:i,body:u,header:f,userName:n,password:a},resultCallback:d});case 15:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),B=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n,a){var o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin syncCACertificate"),e.next=3,I();case 3:return o="https://"+t+":"+r+"/capf/rootcertificate/root.pem",i=E,s=null,u={},f=function(e){0===e.param.ret&&200===e.param.rsp_body.rsp_code?(l.info("syncCACertificate: succeed."),F(t,r,n,a)):0!==e.param.ret?l.info("syncCACertificate failed(tup): "+e.param.ret):l.info("syncCACertificate failed(http): "+e.param.rsp_body.rsp_code)},e.next=10,coreHttp.downloadFile({params:{url:o,filePath:i,body:s,header:u,userName:n,password:a},resultCallback:f});case 10:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a){return e.apply(this,arguments)}}();t.syncCertificate=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,f,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.some(function(e){return"Device.UICfg.cert.autoSyncCert"===e["ParameterValueStruct.Name"]&&("1"===e["ParameterValueStruct.Value"]?(l.info("begin syncCertificate"),!0):(l.info("No Need To Sync Certificate!"),!1))})){e.next=3;break}return e.abrupt("return");case 3:if(n=t.filter(function(e){return"Device.UICfg.cert.syncAddress"===e["ParameterValueStruct.Name"]}),a=n.length>0?n[0]["ParameterValueStruct.Value"]:"",o=t.filter(function(e){return"Device.UICfg.cert.syncPort"===e["ParameterValueStruct.Name"]}),i=o.length>0?o[0]["ParameterValueStruct.Value"]:0,s=t.filter(function(e){return"Device.UICfg.cert.syncName"===e["ParameterValueStruct.Name"]}),u=s.length>0?s[0]["ParameterValueStruct.Value"]:"",f=t.filter(function(e){return"Device.UICfg.cert.syncCode"===e["ParameterValueStruct.Name"]}),d=f.length>0?f[0]["ParameterValueStruct.Value"]:"",!(a&&i&&u&&d)){e.next=16;break}return e.next=14,B(a,i,u,d);case 14:e.next=17;break;case 16:l.info("syncCertificate: Invalid Sync Information!");case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()}).call(t,r(140).Buffer)},556:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MyInfo=t.resetMyInfo=t.getMyInfo=void 0;var a=r(128),o=n(a),i=r(4),s=n(i),u=r(5),c=n(u),f=r(129),d=n(f),l=r(130),p=n(l),_=r(1),g=n(_),w=r(2),v=n(w),E=void 0,h=(t.getMyInfo=function(){var e=(0,v.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E||(E=new m(h)),e.abrupt("return",E);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetMyInfo=function(){E=null},{language:"",languageCode:"",isReminder:!0,closeAppWays:"minimizeApp",isAutoCollectLogs:!0,hasAllowCollectLogs:!1,isAutoAcceptConf:!1,isAutoStart:!1,statusDesc:"",statusOptions:[],selectIndex:1,signature:"",isAutoResponseConf:!1,isAutoLeave:!0,account:"",address:"",age:"",bind_no:"",birthday:"",compareAccount:"",dept_id:"",dept_name_cn:"",dept_name_en:"",desc:"",email:"",espacenumber:"",etag:"",fax:"",gender:0,home_phone:"",image_id:"",image_sync_time:"",ip_phone:"",is_security:0,mobile:"",modify_time:"",name:"",native_name:"",office_phone:"",office_phone2:"",old_account:"",other_mobiles:"",other_phone:"",other_phone2:"",postcode:"",q_pin_yin:"",result_code:"",short_phone:"",staff_id:0,staff_no:"",state:"0",status:1,title:"",type:"0",uri:"",user_type:"0",voip:"",website:"",selfUserUri:"",show_account:""}),m=t.MyInfo=function(e){function t(e){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"notifyChanged",value:function(e){$dispatch(coreUi.updateMyInfo(e)),e&&e.languageCode&&coreCommon.dispatchModuleEvent("changeLanguage",e.languageCode)}}]),t}(coreCommon.ModuleCache)},557:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.firstTimeLoginChangePassword=t.firstLoginChangePassword=t.checkIsFirstLogin=t.setFistLoginInfo=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return r=e.sent,e.next=5,r.setPassword("password",t);case 5:return e.next=7,(0,c.getLoginModel)();case 7:n=e.sent,n.password=t;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c=r(249),f=r(229),d=coreLogger.getLogger("login")("firstLogin"),l={};t.setFistLoginInfo=function(e,t){l={is_first_login:e.uportal_authorize_result&&e.uportal_authorize_result.is_first_login,account:t,auth_token:e.uportal_authorize_result.auth_token}},t.checkIsFirstLogin=function(){return l.is_first_login},t.firstLoginChangePassword=function(){d.info("firstLoginChange[Password] enter."),window.CLIENTCONFIG.ISMOBILE?(window.goRoute("loginCtn"),navigator.splashscreen&&navigator.splashscreen.hide(),window.goRoute("/loginCtn/firstTimeChangePassword")):window.confirm(language.FIRST_LOGIN_CHANGE_PASSWORD,"SETTING_CHANGE_PASSWORD",!0).then(function(e){e.ret?coreSetting.showChangePassword(!0):coreDb.saveUserConfig({key:"isRemindNotNotify",value:"true"})})},t.firstTimeLoginChangePassword=function(){var e=(0,s.default)(o.default.mark(function e(t,r,n){var a,i,l,p,_,g;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.navigator.onLine){e.next=3;break}return alert(language.LOGIN_RESUME_NETWORK_ERROR),e.abrupt("return");case 3:return e.next=5,coreTup.getUportalInstance();case 5:return a=e.sent,i=PromiseObject(),l=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.param,d.info("change [pass]word result: "+r.result),!r||0!==r.result){e.next=13;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=7;break}window.alert(""+language.CHANGE_PASSWORD_SUCCESS_FIRST).then(function(e){u(n).then(function(){return i.resolve(!0)})}),e.next=11;break;case 7:return e.next=9,coreSecurity.getPasswordManager();case 9:a=e.sent,window.confirm(language.CHANGE_PASSWORD_SUCCESS_RELOGIN,!0).then(function(e){coreSetting.showChangePassword(!1),u(n).then(function(){e.ret?(d.info("[password] change success, reLogin"),i.resolve(!0)):(d.info("[password] change success, not login"),a.setPassword("password","").then(function(e){var t={isRememberPassword:!1,isAutoLogin:!1};(0,f.setLoginInfo)(t),(0,c.getLoginModel)().then(function(e){e.password=""}),i.resolve(!1)}))})});case 11:e.next=16;break;case 13:s=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[s],2),i.resolve(!1);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setNotifyFunc(360449,l),e.next=11,(0,c.getLoginModel)();case 11:return p=e.sent,_=p.serverUportalAddress,g=p.serverUportalPort,a.changeLoginUportalPassword(t,r,n,_,g),e.abrupt("return",i);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}()},558:function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOAuthAccount=t.getOAuthTicket=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(150),c=coreLogger.getLogger("login")("IT-ticket");t.getOAuthTicket=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,a,i,s,f,d,l,p,_,g,w;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.info(" [ getOAuthTicket ] "),t=PromiseObject(),e.next=4,(0,u.getLoginModel)();case 4:return r=e.sent,n=r.OAuthClinetID,a=r.OAuthUrl,i=r.account,e.next=9,coreSecurity.getPasswordManager();case 9:return s=e.sent,e.next=12,s.getPassword("password");case 12:return f=e.sent,f=encodeURIComponent(f),e.next=16,coreHttp.sendSyncRequest({url:a,type:constant.REQUEST_TYPE.POST,header:{"Content-Type":"application/x-www-form-urlencoded"},body:"username="+i+"&password="+f+"&grant_type=password&client_id="+n,cipherlist:[50331695,50331701,50331708,50331709]});case 16:return d=e.sent,l=d.param,p=l.recv_body,_=l.resp_code,g=l.result,_?(w=parseInt(_),200===w?(p=JSON.parse(p),p.error&&(c.error(" [ getOAuthTicket ] failed, errorCode:"+p.error+", info:"+p.error_description),t.reject({result:!1,errorCode:u.UErrorCode.LOGIN_ERR_AUTH_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:r.isResume})),t.resolve(r.user_ticket=p.access_token),c.info(" [ getOAuthTicket ] result")):(c.error(" [ getOAuthTicket ] failed, request error, status code: "+_+", result: "+g),t.reject({result:!1,errorCode:u.UErrorCode.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:r.isResume}))):t.reject({result:!1,errorCode:u.UErrorCode.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:r.isResume}),e.abrupt("return",t);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getOAuthAccount=function(){var t=(0,s.default)(o.default.mark(function t(r){var n,a,i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c.info(" [ getO[Auth]Account ] "),!((n=r.split("."))instanceof Array)){t.next=8;break}return a=JSON.parse(new e(n[1],"base64").toString()),c.info(" [ getO[Auth]Account ] result",a.preferred_username.length>4?a.preferred_username.substr(0,3)+"******"+a.preferred_username.substr(-4):"****"),t.abrupt("return",a.preferred_username);case 8:return i=PromiseObject(),t.abrupt("return",i.reject("server config error"));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}).call(t,r(140).Buffer)},559:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkShowPrivacyLogout=t.checkShowPrivacy=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(228),c=coreLogger.getLogger("account")("login"),f=null,d=(t.checkShowPrivacy=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,a,i,s,l,p,_,g,w;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.info("checkShowPrivacy start"),e.next=4,coreAccount.getLoginModel();case 4:if(t=e.sent,r=t.account,n=t.isCheckPrivacy,a=t.isTempLogin,i=t.privacy_version,!coreCommon.isMobile()){e.next=18;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=13;break}return e.next=10,appService.isLaunchFromPush();case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=!1;case 14:if(!(s=e.t0)){e.next=18;break}return c.info("checkShowPrivacy skip for isLaunchFromPush : "+s),e.abrupt("return",!0);case 18:if(!(window.isHubEnv||n||window.CLIENTCONFIG.ISBIGWIN||a||window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv)){e.next=21;break}return c.error("checkShowPrivacy,this is maxhub environment or resume, uncheck privacy"),e.abrupt("return",!0);case 21:return t.set({isCheckPrivacy:!0}),e.next=24,coreDb.queryLoginSetting({key:"firstLoginAccount"});case 24:return l=e.sent.value,e.next=27,coreDb.queryLoginSetting({key:r+"_privacyVersion"});case 27:if(p=e.sent.value,p=p||"V01.00",i=i||"V01.00",_=p.split("V")[1],g=i.split("V")[1],void 0!==l){e.next=41;break}return w={oprEvent:constant.OPR_EVENT_TYPE.PRIVACY,privacyver:i},e.next=36,coreDb.saveLoginSetting({key:"firstLoginAccount",value:r});case 36:return e.next=38,coreDb.saveLoginSetting({key:r+"_privacyVersion",value:i});case 38:(0,u.recordPrivacy)(w),e.next=48;break;case 41:if(!(l!==r&&!p||g>_)){e.next=48;break}return c.info("[checkShowPrivacy] show privacy"),t.setLoginStatus(!1,!0),f=PromiseObject(),delegate(d,"onAgreePrivacy"),window.goRoute("firstLoginPrivacy"),e.abrupt("return",f);case 48:return e.abrupt("return",!0);case 51:return e.prev=51,e.t1=e.catch(0),c.error("[checkShowPrivacy] error",e.t1.toString()),e.abrupt("return",!0);case 55:case"end":return e.stop()}},e,void 0,[[0,51]])}));return function(){return e.apply(this,arguments)}}(),t.checkShowPrivacyLogout=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.info("checkShowPrivacyLogout "+t+" hasPrivacyPromise "+isNullOrEmpty(f)),f&&(f.reject(" checkShowPrivacyLogout "+t),f=null);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(){var t,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.info("agreePrivacy"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,r=t.privacy_version,r=r||"V01.00",coreAccount.recordPrivacy({oprEvent:constant.OPR_EVENT_TYPE.PRIVACY,privacyver:r}),t.setLoginStatus(!0),coreDb.saveLoginSetting({key:t.account+"_privacyVersion",value:r}),f.resolve(!0),f=null;case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}())},560:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=this,r=d.default.createElement("div",{className:"upgrade-window-content-text-wrap"},d.default.createElement("ul",{className:"upgrade-window-content-text-detail-ul"},d.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_1),d.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_2),d.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_3)));window.confirm(r,"EMUI_COME_CALL_NOTIFY_TITLE",!0,{leftButton:language.BTN_ENSURE_TO_SKIP,rightButton:language.BTN_ENSURE_TO_SET}).then(function(){var r=(0,c.default)(s.default.mark(function r(n){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=n.ret,a?(coreDb.saveLoginSetting({key:l,value:"1"}),window.webView.goToSystemCloudLinkSetting()):(e+=1,coreDb.saveLoginSetting({key:p,value:e.toString()}));case 2:case"end":return t.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}())}function o(e){var t=this,r=d.default.createElement("div",{className:"upgrade-window-content-text-wrap"},d.default.createElement("ul",{className:"upgrade-window-content-text-detail-ul"},d.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_1),d.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_2),d.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_3)));window.confirm(r,"EMUI_COME_CALL_NOTIFY_TITLE",!0,{leftButton:language.BTN_ENSURE_TO_SKIP,rightButton:language.BTN_ENSURE_TO_SET}).then(function(){var r=(0,c.default)(s.default.mark(function r(n){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=n.ret,a?(coreDb.saveLoginSetting({key:l,value:"1"}),window.webView.goToSystemCloudLinkSetting()):(e+=1,coreDb.saveLoginSetting({key:p,value:e.toString()}));case 2:case"end":return t.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}())}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHuaweiPhonePushSetting=t.DB_KEY_SKIP_SETTING_COUNT=t.DB_KEY_HAS_SHOW_SETTING_DIALOG=void 0;var i=r(1),s=n(i),u=r(2),c=n(u),f=r(127),d=n(f),l=t.DB_KEY_HAS_SHOW_SETTING_DIALOG="has_show_setting_dialog",p=t.DB_KEY_SKIP_SETTING_COUNT="has_skip_setting_count";t.checkHuaweiPhonePushSetting=function(){coreDb.queryLoginSetting({key:l}).then(function(e){var t="0";isNullOrEmpty(e)||!e.hasOwnProperty("key")||!e.hasOwnProperty("value")||isNullOrEmpty(e.key)||isNullOrEmpty(e.value)||(t=e.value),"1"!==t&&coreDb.queryLoginSetting({key:p}).then(function(e){var t=0;isNullOrEmpty(e)||isNullOrEmpty(e.key)||isNullOrEmpty(e.value)||(t=parseInt(e.value)),t<2&&appService.getEMUI().then(function(e){""!==e&&(e.includes("5.")?o(t):a(t))})})})}},561:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPush=t.pushRegisterUt=t.unRegisterPush=t.DB_KEY_HAS_OPEN_PUSH=t.DB_KEY_APNS_CER_TYPE=t.DB_KEY_IOS_VOIP_TOKEN=t.DB_KEY_IOS_PUSH_TOKEN=t.DB_KEY_HW_PUSH_BADGE_CLASS_NAME=t.DB_KEY_HW_PUSH_TOKEN=void 0;var a=r(69),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),f=r(150),d=r(750),l=coreLogger.getLogger("login")("push"),p=t.DB_KEY_HW_PUSH_TOKEN="hwPushToken",_=t.DB_KEY_HW_PUSH_BADGE_CLASS_NAME="hwPushBadgeClassName",g=t.DB_KEY_IOS_PUSH_TOKEN="iosPushToken",w=t.DB_KEY_IOS_VOIP_TOKEN="voipToken",v=t.DB_KEY_APNS_CER_TYPE="apnsCerType",E=t.DB_KEY_HAS_OPEN_PUSH="hasOpenPush";window.registerHWPush=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.webView.getLocalIp()||"0.0.0.0",!isNullOrEmpty(a)){e.next=6;break}return e.next=4,coreDb.queryLoginSetting({key:p});case 4:r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)||(a=r.value);case 6:if(!isNullOrEmpty(o)){e.next=11;break}return e.next=9,coreDb.queryLoginSetting({key:_});case 9:n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)||(o=n.value);case 11:return e.next=13,m(2,1,a,o,"","",t);case 13:return e.next=15,(0,d.registerEServerClientPush)(2,1,a,o,"","",t);case 15:coreDb.saveLoginSetting({key:p,value:a}),coreDb.saveLoginSetting({key:_,value:o});case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterHWClientPush=function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.webView.getLocalIp()||"0.0.0.0",n=void 0,a=void 0,e.next=5,coreDb.queryLoginSetting({key:p});case 5:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(n=o.value),e.next=9,coreDb.queryLoginSetting({key:_});case 9:return i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(a=i.value),e.next=13,m(2,3,n,a,"","",r,"5",t);case 13:return e.next=15,(0,d.registerEServerClientPush)(2,3,n,a,"","",r);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.unRegisterPush=function(){var e=(0,c.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=5;break}return e.next=3,window.unRegisterHWClientPush(t);case 3:e.next=8;break;case 5:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=8;break}return e.next=8,window.unRegisterIosPush(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.registerIosPush=function(){var e=(0,c.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,c.default)(s.default.mark(function e(a){var o,i,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=5;break}return e.next=3,coreDb.queryLoginSetting({key:g});case 3:o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(t=o.value);case 5:if(!isNullOrEmpty(r)){e.next=10;break}return e.next=8,coreDb.queryLoginSetting({key:w});case 8:i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(r=i.value);case 10:if(!isNullOrEmpty(n)){e.next=15;break}return e.next=13,coreDb.queryLoginSetting({key:v});case 13:u=e.sent,isNullOrEmpty(u)||!u.hasOwnProperty("key")||!u.hasOwnProperty("value")||isNullOrEmpty(u.key)||isNullOrEmpty(u.value)||(n=u.value);case 15:return e.next=17,m(1,1,"","",t,r,a,n);case 17:return e.next=19,(0,d.registerEServerClientPush)(1,1,"","",t,r,a,n);case 19:coreDb.saveLoginSetting({key:g,value:t}),coreDb.saveLoginSetting({key:w,value:r});case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterIosPush=function(){var e=(0,c.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,c.default)(s.default.mark(function e(r){var n,a,o,i,u,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,a=void 0,o="5",e.next=5,coreDb.queryLoginSetting({key:g});case 5:return i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(n=i.value),e.next=9,coreDb.queryLoginSetting({key:w});case 9:return u=e.sent,isNullOrEmpty(u)||!u.hasOwnProperty("key")||!u.hasOwnProperty("value")||isNullOrEmpty(u.key)||isNullOrEmpty(u.value)||(a=u.value),e.next=13,coreDb.queryLoginSetting({key:v});case 13:return c=e.sent,isNullOrEmpty(c)||!c.hasOwnProperty("key")||!c.hasOwnProperty("value")||isNullOrEmpty(c.key)||isNullOrEmpty(c.value)||(o=c.value),e.next=17,m(1,3,"","",n,a,r,o,t);case 17:return e.next=19,(0,d.registerEServerClientPush)(1,3,"","",n,a,r,o);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var h=t.pushRegisterUt=function(){var e=(0,c.default)(s.default.mark(function e(t){var r=t.errorCode,n=t.errorDescription;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreUt.utHandleServerError({isLocalError:0,requestId:"",serverName:"pushGw",serverApiName:"registerpush",errorCode:r,errorDescription:n});case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),m=t.registerPush=function(){var e=(0,c.default)(s.default.mark(function e(t,r,n,a,o,i,u){var c,d,p,_=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5",g=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(n)||!isNullOrEmpty(o)){e.next=3;break}return l.info(" [ registerPush ] androidToken and iosDeviceToken is null"),e.abrupt("return");case 3:return e.next=5,(0,f.getLoginModel)();case 5:if(c=e.sent,!(d=c.isSupportAS)){e.next=20;break}if(p=1===r?"1":"0",!coreCommon.isIos()){e.next=16;break}return e.next=12,C(p,o,0);case 12:return e.next=14,C(p,i,1);case 14:e.next=18;break;case 16:return e.next=18,C(p,n,0);case 18:e.next=21;break;case 20:I(t,r,n,a,o,i,u,_,g);case 21:case"end":return e.stop()}},e,this)}));return function(t,r,n,a,o,i,s){return e.apply(this,arguments)}}(),I=function(){var e=(0,c.default)(s.default.mark(function e(t,r,n,a,i,u,c){var d,p,_,g,w,v,m,I,C,L,T,S,O,x,N,R,y,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5",k=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return d=e.sent,p=d.account,_=d.authToken,g=d.serverAddress,w=d.serverPort,v=1,m="00:00",I="00:00",isNullOrEmpty(a)&&(a=""),C="",C="https://"+g+":"+w+"/pushAgent/registerpush",L={user:p,deviceToken:1===t?i:n,pushType:t,flag:r,clientIP:c,language:window.langShortName,noPushStartTime:m,noPushEndTime:I,apnsServerType:1,apnsCerType:b,pushByTimeSwitch:v,heart_beat_time:30,android_token:1===t?i:n,appId:"1",pushClassName:a,voipToken:u,appMode:1,push_mode:1,imPushMode:1,callPushMode:0,pushIMActive:"welink://welinksoftclient/h5page?page=imDetail",pushCallActive:"welink://welinksoftclient/h5page?page=call"},e.next=13,coreHttp.sendSyncRequest({url:C,type:constant.REQUEST_TYPE.POST,header:{Authorization:"Basic "+_,"Content-Type":"application/json"},body:(0,o.default)(L),cipherlist:[50331695,50331701,50331708,50331709]});case 13:if(T=e.sent,S=T.param,O=S.recv_body,x=S.resp_code,N=S.result,!x){e.next=42;break}if(200!==(R=parseInt(x))){e.next=37;break}if(e.prev=18,O=JSON.parse(O),!O.error){e.next=24;break}return l.error(" [ registerPush ] failed, errorCode:"+O.error+", info:"+O.error_description),h({errorCode:O.error,errorDescription:O.error_description}),e.abrupt("return");case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(18),l.error("[registerPush] failed, ret is not json: "+O),h({errorCode:x,errorDescription:""});case 30:y=!0,1===r?y=!0:3===r&&(y=!1),(3===r&&k||1===r)&&coreDb.saveUserConfigList({key:E,value:y.toString()}),$dispatch(coreUi.changeHasOpenPush(y)),l.info(" [ registerPush ] result:",O),e.next=40;break;case 37:return l.error(" [ registerPush ] failed, request error, status code: "+x+", result: "+N),h({errorCode:x,errorDescription:""}),e.abrupt("return");case 40:e.next=44;break;case 42:l.error(" [ registerPush ] failed, status code:"+x),h({errorCode:x,errorDescription:""});case 44:case"end":return e.stop()}},e,this,[[18,26]])}));return function(t,r,n,a,o,i,s){return e.apply(this,arguments)}}(),C=function(){var e=(0,c.default)(s.default.mark(function e(t,r,n){var a,i,u,c,d,p,_,g,w,v,E,h;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return a=e.sent,i=a.account,u=a.authToken,c=a.pushgwUri,d=a.serverAddress,e.next=9,appService.osVersion();case 9:return p=e.sent,e.next=12,appService.getPushInfo();case 12:return _=e.sent,e.next=15,appService.getPackageName();case 15:if(g=e.sent,!isNullOrEmpty(_)){e.next=19;break}return l.error("pushInfo is null",_),e.abrupt("return");case 19:_=JSON.parse(_),w=coreCommon.sha512(d.toLowerCase()),e.t0=w,e.next=e.t0===constant.SERVER_ADDRESS_SHA512.CLOUDEC?24:e.t0===constant.SERVER_ADDRESS_SHA512.BCLOUDEC?26:28;break;case 24:return _=_.Production,e.abrupt("break",30);case 26:return _=_.Prepare,e.abrupt("break",30);case 28:return _=_.Development,e.abrupt("break",30);case 30:return r=r.replaceAll("|HW_PUSH_DTM",""),v={w3Account:i,packageName:g,pushId:r,osType:coreCommon.isIos()?"0":"1",timeZone:(-(new Date).getTimezoneOffset()/60).toString(),appLanguage:"2052"===window.langcode?"zh":"en",deviceUUID:window.device.uuid,manufacturer:window.device.manufacturer,pushType:coreCommon.isIos()?"0":"1",osVersion:p,appVersionName:window.CLIENTCONFIG.NEW_APP_NAME,sdkVersionName:"W1.2.0",pushSwitch:t,isVoip:n,supportVoip:0,imPushMode:"1",voipPushMode:"0"},E="https://"+c+"/pushdevice/v1/devices/"+_.appId,e.next=35,coreHttp.sendSyncRequest({url:E,type:constant.REQUEST_TYPE.POST,header:{Authorization:u,"Content-Type":"application/json"},body:(0,o.default)(v)});case 35:return h=e.sent,l.info("registerW3Push:, "+(0,o.default)(h&&h.param&&h.param.recv_body)),e.abrupt("return",h);case 38:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}()},562:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.startPortDetect=t.updateFireWallAndSipInfo=t.startFireWallDetect=t.checkDetectFireWall=t.doDetectFireWall=void 0;var a=r(69),o=n(a),i=r(155),s=n(i),u=r(136),c=n(u),f=r(3),d=n(f),l=r(1),p=n(l),_=r(2),g=n(_),w=(t.doDetectFireWall=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=3;break}return I.info("is big win can not doDetectFireWall"),e.abrupt("return");case 3:if(!coreCommon.isMobile()){e.next=6;break}return I.info("[ doDetectFireWall ] mobile can not doDetectFireWall"),e.abrupt("return");case 6:return I.info("[ doDetectFireWall ]"),I.info("<account_login><4_firewall>begin"),e.next=10,coreAccount.getLoginModel();case 10:return t=e.sent,t.isInDetectFireWall=!0,e.next=14,w();case 14:return r=e.sent,t.isInDetectFireWall=!1,coreCommon.dispatchModuleEvent("login",{event:"detectFirewall",code:0}),I.info("<account_login><4_firewall>end ok"),e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.checkDetectFireWall=function(){var e=(0,g.default)(p.default.mark(function e(){var t,r,n,a,o,i,s;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.updateLocalIp();case 2:return t=e.sent,I.info("start checkDetectFireWall "),e.next=6,coreDb.queryLoginSetting({key:"firewall"});case 6:if(r=e.sent,isNullOrEmpty(r)||isNullOrEmpty(r.value)){e.next=21;break}if(n=JSON.parse(r.value),!n.length){e.next=21;break}return e.next=12,coreAccount.getLoginModel();case 12:if(a=e.sent,o=a.serverUportalAddress,i=a.serverUportalPort,!(s=n.query({id:o+i+t}))||!constant.FIREWALL_MODE_LIST.includes(s.mode)){e.next=21;break}return I.info("checkDetectFireWall local has store for ip :"+handleIp(t)),e.next=20,h(s.mode);case 20:return e.abrupt("return");case 21:return I.info("checkDetectFireWall local has no store for ip :"+handleIp(t)),e.next=24,E();case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),v=t.startFireWallDetect=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("startFireWallDetect  svnUri: "+t),e.next=3,coreAccount.getLoginModel();case 3:return r=e.sent,e.next=6,coreTup.getUportalInstance();case 6:return n=e.sent,e.abrupt("return",new d.default(function(e,o){var i=function(){var t=(0,g.default)(p.default.mark(function t(n){var i;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=n.param,i&&0===i.result?(I.info("fireWallDetectResult success. The fireWall mode is  ",i.fire_wall_mode),r.fireWallDetectResult=i,e(i)):(I.error("fireWallDetectResult failed."),o((0,c.default)({},n,{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:constant.LOGIN_ERROR_TYPE.uportal})));case 2:case"end":return t.stop()}},t,a)}));return function(e){return t.apply(this,arguments)}}();n.setNotifyFunc(360463,i),(0,m.fireWallDetect)(t)}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),E=(t.startPortDetect=function(){var e=(0,g.default)(p.default.mark(function e(t,r){var n,a=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("[ startPortDetect ] svnUri : "+t+", detectport"+r),e.next=3,coreTup.getUportalInstance();case 3:return n=e.sent,e.abrupt("return",new d.default(function(e,i){var s=function(){var t=(0,g.default)(p.default.mark(function t(r){var n;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:I.info("[ portDetectResult ]"),n=r.param,n?(I.info("portDetectResultdetect success. The fireWall mode is  "+(0,o.default)(n)),e(n)):(I.error("port detect failed."),i((0,c.default)({},r,{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:constant.LOGIN_ERROR_TYPE.uportal})));case 3:case"end":return t.stop()}},t,a)}));return function(e){return t.apply(this,arguments)}}();n.setNotifyFunc(360475,s),(0,m.portDetect)(t,r)}));case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),function(){var e=(0,g.default)(p.default.mark(function e(){var t,r,n,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,r=t.svnUri,n=t.stgUri,!coreCommon.checkStgUriExist(n)||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=25;break}if(a=void 0,!(o=t.isSupportProxy)){e.next=11;break}a={fire_wall_mode:0,result:0},e.next=14;break;case 11:return e.next=13,v(r);case 13:a=e.sent;case 14:if(I.info("detectFireWall isSupportProxy:",o),!a||void 0===a.fire_wall_mode){e.next=22;break}return e.next=18,h(a.fire_wall_mode);case 18:return e.next=20,(0,m.saveFireWall)(a.fire_wall_mode);case 20:e.next=23;break;case 22:I.error("firewall detect failed");case 23:e.next=28;break;case 25:I.info("reSetFireWallModeType"),coreConf.reSetFireWallModeType(),C(3);case 28:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),h=function(){var e=(0,g.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.setFireWallModeType(t),constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==t){e.next=4;break}return e.next=4,coreAccount.stopLocalServer();case 4:C(t);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),m=r(267),I=coreLogger.getLogger("login")("step"),C=t.updateFireWallAndSipInfo=function(){var e=(0,g.default)(p.default.mark(function e(t){var r,n,a,o,i,u,c,f,d,l,_,g,w,v,E,h,m,C,L,T,S,O,x,N,R,y;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("updateFireWallAndSipInfo"),e.next=3,coreAccount.getLoginModel();case 3:r=e.sent,n=r.svnUri,a=r.sipStgUri,o=r.sipUri,i=n.split(";"),u=a.split(";"),c=o.split(";"),f="",f=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===t?u:constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN===t?i:c,d=f[0]?f[0].split(":"):["",0],l=(0,s.default)(d,2),_=l[0],g=l[1],w=f[1]?f[1].split(":"):["",0],v=(0,s.default)(w,2),E=v[0],h=v[1],m=f[2]?f[2].split(":"):["",0],C=(0,s.default)(m,2),L=C[0],T=C[1],S=f[3]?f[3].split(":"):["",0],O=(0,s.default)(S,2),x=O[0],N=O[1],R=!0,y={sipServerAddress:_,sipServerPort:parseInt(g),sipServerBackup1:E,sipServerPortBackup1:h,sipServerBackup2:L,sipServerPortBackup2:T,sipServerBackup3:x,sipServerPortBackup3:N,fireWallMode:t,isGetFirewallRes:R},r.set(y);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},563:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkLoginInfo=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=(t.checkLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("checkLoginInfo 登录前check"),e.next=3,c.getLoginModel();case 3:return t=e.sent,r=/[`~!#$^&*()+=|\\\[\]\{\}:;'\,<>\/?]|[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[^\x00-\xff]/g,n=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[^\x00-\xff]/g,e.abrupt("return",!(r.test(t.displayAccount)||n.test(t.password)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r(150)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),f=coreLogger.getLogger("logic")("login/loginPreCheck")},644:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkStatusOptions=t.SaveSigInfoAndQuit=t.saveUserInfo=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(150),c=coreLogger.getLogger("logic")("main/myInfo"),f=(t.saveUserInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.info("saveUserInfo"),e.abrupt("return",f(t));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.SaveSigInfoAndQuit=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.info("userClick  tap myInfo signature save btn"),f(t),window.history.back();case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(t){var r,n,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getMyInfo)();case 2:if(r=e.sent,(t=coreCommon.filterSensitiveWord(t))!==r.signature){e.next=6;break}return e.abrupt("return");case 6:return n=["account","staff_no","name","native_name","q_pin_yin","gender","birthday","age","bind_no","mobile","home_phone","office_phone","short_phone","other_phone","voip","ip_phone","fax","email","website","signature","desc","address","image_id","postcode","is_security","title","dept_id","dept_name_en","dept_name_cn","image_sync_time","old_account","state","modify_time","other_phone2","other_mobiles"],a={},n.forEach(function(e){a[e]=isNullOrEmpty(r[e])?"":r[e]}),a.signature=t,e.next=12,(0,u.getLoginModel)();case 12:if(i=e.sent,!(s=i.isSupportAS)){e.next=20;break}return e.next=17,coreContact.uploadUserInfo({signature:t});case 17:e.t0=e.sent,e.next=23;break;case 20:return e.next=22,coreIm.setUserInfo(a);case 22:e.t0=e.sent;case 23:c=e.t0,(c&&c.result===constant.ERROR_CODE.Success||s&&c)&&(r.signature=t,coreCommon.isHuaweiCloudWeLink()&&coreContact.setSign(t));case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.checkStatusOptions=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getMyInfo)();case 2:return t=e.sent,e.next=5,coreDb.queryUserConfig({key:"CustomStatus"});case 5:r=e.sent,isNullOrEmpty(r)||(n=JSON.parse(r.value),t.statusOptions=n,c.info("check Status Options from storage sucess!"));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},645:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.set=t.get=void 0;var a=r(69),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),f=r(150),d=coreLogger.getLogger("account")("appCache"),l=t.get=function(){var e=(0,c.default)(s.default.mark(function e(t,r){var n,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return n=e.sent,e.next=5,coreDb.queryLoginSetting({key:r?t:n.account+"_"+t});case 5:return a=e.sent,e.prev=6,e.abrupt("return",JSON.parse(a.value));case 10:e.prev=10,e.t0=e.catch(6),d.error("query login sertting parse error",e.t0);case 13:case"end":return e.stop()}},e,void 0,[[6,10]])}));return function(t,r){return e.apply(this,arguments)}}(),p=t.set=function(){var e=(0,c.default)(s.default.mark(function e(t,r,n){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return a=e.sent,e.next=5,coreDb.saveLoginSetting({key:n?t:a.account+"_"+t,value:(0,o.default)(r)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),_=t.remove=function(){var e=(0,c.default)(s.default.mark(function e(t,r){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return n=e.sent,e.next=5,coreDb.saveLoginSetting({key:r?t:n.account+"_"+t,value:""});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}();window.appCache={get:l,set:p,remove:_}},646:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorTips=t.handleLoginError=void 0;var a=r(69),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),f=r(249),d=r(271),l=r(362),p=coreLogger.getLogger("login")("uportal"),_=coreLogger.getLogger("login")("common"),g=function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a,o,i,u,c,g,w=t.errorCode;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:r=e.sent,n=r.isResume,_.info("handleUportalLoginFailed isResume "+n),a=function(e){return p.error((n?"Resume":"")+" UportalLoginError: ["+e+"]")},o=!1,i=!1,u=void 0,e.t0=w,e.next="LOGIN_ADDRESS_OR_PORT_EMPTY"===e.t0?11:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY"===e.t0?15:"LOGIN_ACCOUNT_HAS_SPACE"===e.t0?19:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT?23:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED?26:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR?29:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR?32:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SEARCH_SERVER_FAIL?35:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED?38:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR?43:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED?48:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR?52:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR?55:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR?58:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR?61:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_HAS_PROXY_NO_STG?64:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE?67:71;break;case 11:return u=language.LOGIN_ADDRESS_OR_PORT_EMPTY,a("LOGIN_ADDRESS_OR_PORT_EMPTY"),o=!0,e.abrupt("break",74);case 15:return u=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,a("LOGIN_ACCOUNT_OR_PASSWORD_EMPTY"),o=!0,e.abrupt("break",74);case 19:return u=language.LOGIN_ACCOUNT_HAS_SPACE,a("LOGIN_ACCOUNT_HAS_SPACE"),o=!0,e.abrupt("break",74);case 23:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 26:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_REQUEST_FAILED"),e.abrupt("break",74);case 29:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_DNS_ERROR"),e.abrupt("break",74);case 32:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_SERVICE_ERROR"),e.abrupt("break",74);case 35:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_SEARCH_SERVER_FAIL"),e.abrupt("break",74);case 38:return o=!0,i=!0,u=r.sipLoginOnly?language.ENTER_CONF_NO_FOUND:language.LOGIN_USERPWD_ERROR,a("LOGIN_ERR_AUTH_FAILED"),e.abrupt("break",74);case 43:return o=!0,i=!0,u=language.LOGIN_USERPWD_ERROR,a("LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR"),e.abrupt("break",74);case 48:return o=!0,u=language.LOGIN_ERR_ACCOUNT_LOCKED,a("LOGIN_ERR_ACCOUNT_LOCKED"),e.abrupt("break",74);case 52:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_STG_TUNNEL_BUILD_ERROR"),e.abrupt("break",74);case 55:return u=language.CALL_CALLING_FAILED,a("LOGIN_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 58:return u=language.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR,a("LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR"),e.abrupt("break",74);case 61:return u=language.CALL_CALLING_FAILED,a("LOGIN_E_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 64:return u=language.LOGIN_E_ERR_AUTH_ERROR,a("LOGIN_ERR_HAS_PROXY_NO_STG"),e.abrupt("break",74);case 67:return o=!0,i=!0,u=language.RENEW_EXPIRED_REMINDER,a("LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE"),e.abrupt("break",74);case 71:return u=language.CALL_CALLING_FAILED,a("Unhandle errorCode:["+w+"]"),e.abrupt("break",74);case 74:if(_.info("logLoginError msg :",u),!window.CLIENTCONFIG.ISMOBILE||!window.stroage.isFastLogin()||n){e.next=83;break}return window.stroage.setFastLogin(!1),navigator.splashscreen&&navigator.splashscreen.hide(),e.next=80,(0,f.getLoginModel)();case 80:c=e.sent,c.clearPassword(),window.goRoute("loginCtn");case 83:if(o&&i&&(0,l.checkAndEndCall)().then(function(){_.info("up login check and end call ",i)}),n&&!o){e.next=106;break}if(!n||i){e.next=90;break}return e.next=88,(0,d.stopResume)("handleUportalLoginFailed1");case 88:e.next=106;break;case 90:if(window.CLIENTCONFIG.ISBIGWIN){e.next=106;break}if(!window.isHubEnv){e.next=96;break}r.maxhubLoginError={serverType:0,errorCode:w},window.getRoute()&&"maxhubLogin"!==window.getRoute()&&coreAccount.logout({}),e.next=106;break;case 96:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=101;break}g=u||"unknow error",window.itWeLinkNotifyCallEnded(0,g),e.next=106;break;case 101:if(_.info("handleUportalLoginFailed",u||"unknow error"),!n||!i){e.next=105;break}return e.next=105,(0,d.stopResume)("handleUportalLoginFailed2");case 105:alert(u||"unknow error",[constant.DIALOG_LOG_CODE.LOG_UPORTAL_LOGIN_FAILED]).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.ret&&!e.isClickClose)return void _.info("handleUportalLoginFailed, now is not user click the alert,do nothing");_.info("resetDisableLogin"),window.getRoute()&&"login"!==window.getRoute()&&"login/joinConfSIPOnly"!==window.getRoute()&&"login/noLoginJoinConference"!==window.getRoute()&&!1===window.CLIENTCONFIG.ISMOBILE&&coreAccount.logout({}),window.CLIENTCONFIG.ISMOBILE&&i&&window.getRoute()&&"loginCtn"!==window.getRoute()&&"noLoginJoinConference"!==window.getRoute()&&"mJoinConfSIPOnly"!==window.getRoute()&&coreAccount.logout({}),"noLoginJoinConference"!==window.getRoute()&&"mJoinConfSIPOnly"!==window.getRoute()||($dispatch(coreUi.changeEnterConfState(!1)),r.sipLoginOnly=!1,_.info("noLoginJoinConference fail"))});case 106:return e.abrupt("return",u);case 107:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a,o=t.errorCode;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:r=e.sent,n=r.isResume,a=function(e){return _.error((n?"Resume Login Error":"Login Error")+": "+e)},e.t0=o,e.next="duplicateLogin"===e.t0?8:"fistLoginReject"===e.t0?10:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?12:16;break;case 8:return a("[ DuplicateLogin ] login oper failed, there is a login oper now..."),e.abrupt("break",17);case 10:return a("[ FistLoginReject ] fist login rejected, after changepassword will relogin..."),e.abrupt("break",17);case 12:return a("[ IWB2MaxHub ] this is maxhub tegrate enviroument, the account is not iwb account"),r.maxhubLoginError={serverType:0,errorCode:o},window.getRoute()&&"maxhubLogin"!==window.getRoute()&&coreAccount.logout({}),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.handleLoginError=function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.info("[ handleLoginError ]"+(0,o.default)(t)),_.info("<account_login><10_error>"+(0,o.default)(t)),e.next=4,(0,f.getLoginModel)();case 4:r=e.sent,r.sipLoginOnly&&(coreCommon.isHuaweiCloudWeLink()?(n=r.loginHistoryList,a=r.loginRecordList,coreAccount.showLoginInfo({loginInfo:a[0],loginHistoryList:n,loginRecordList:a})):(r.displayAccount="",r.password="")),r.clearInLoginState(),r.setLoginStatus(!1,!1),t&&t.errorType?(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r.isResume?_.info("[IT-Meeting] login failed, resume login."):(_.info("[IT-Meeting] login failed, go back."),window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))),t.errorType===constant.LOGIN_ERROR_TYPE.common?(window.CLIENTCONFIG.ISBIGWIN?coreConf.NotifyLoginFailedEx(1):window.isHubEnv&&("LOGIN_ERR_IWB_MAXHUB_ACCOUNT"===t.errorCode?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_ACC_OR_PAS):coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_NETWORK),_.info("maxhub handleLoginError LOGIN_ERROR_TYPE.common errcode: "+t.errorCode)),w(t)):t.errorType===constant.LOGIN_ERROR_TYPE.uportal&&(g(t),r.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.INIT,window.CLIENTCONFIG.ISBIGWIN?(window.shouldStopRertyLogin=!1,window.bigwinReTryLogin()):window.isHubEnv&&(t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_BAD_ACCESS_DURING_UPGRADE||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_INVALID_URL?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_NETWORK):t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_USER_NOT_EXISTS||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_USER_NOT_EXISTS||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_ACC_OR_PAS):coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_OTHER),_.info("maxhub handleLoginError LOGIN_ERROR_TYPE.uportal errcode: "+t.errorCode))),coreCommon.dispatchModuleEvent("login",{event:t.errorType,code:t.errorCode})):_.error("no exact error handle",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getErrorTips=function(){var e=(0,c.default)(s.default.mark(function e(t,r){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.info("get error tips, server=",t+", errorCode=",r),n="",0!==t){e.next=44;break}e.t0=r,e.next=e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY?6:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY?8:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT?10:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED?12:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR?14:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR?16:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SEARCH_SERVER_FAIL?18:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED?20:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR?22:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED?24:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR?26:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR?28:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR?30:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR?32:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_HAS_PROXY_NO_STG?34:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE?36:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?38:40;break;case 6:return n=language.LOGIN_ADDRESS_OR_PORT_EMPTY,e.abrupt("break",42);case 8:return n=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",42);case 10:case 12:case 14:case 16:case 18:return n=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 20:case 22:return n=language.LOGIN_USERPWD_ERROR,e.abrupt("break",42);case 24:return n=language.LOGIN_ERR_ACCOUNT_LOCKED,e.abrupt("break",42);case 26:case 28:return n=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 30:return n=language.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR,e.abrupt("break",42);case 32:return n=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 34:return n=language.LOGIN_E_ERR_AUTH_ERROR,e.abrupt("break",42);case 36:return n=language.RENEW_EXPIRED_REMINDER,e.abrupt("break",42);case 38:return n=language.MAXHUB_INVALID_ACCOUTN,e.abrupt("break",42);case 40:return n=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 42:e.next=74;break;case 44:if(1!==t){e.next=74;break}e.t1=r,e.next=e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY?48:e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY?50:e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_LOCALIP_GET_FAILED?52:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_TIMEOUT?54:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_PASSWORD_ERROR?56:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_FAILED?58:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_NOT_EXIST?60:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_NEED_NEW_VERSION?62:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_NOT_ACTIVE?64:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_SUSPEND?66:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_LOCKED?68:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_EXPIRE?70:72;break;case 48:return n=language.LOGIN_ADDRESS_OR_PORT_EMPTY,e.abrupt("break",74);case 50:return n=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",74);case 52:case 54:return n=language.CALL_CALLING_FAILED,e.abrupt("break",74);case 56:case 58:case 60:return n=language.LOGIN_USERPWD_ERROR,e.abrupt("break",74);case 62:return n=language.LOGIN_NEED_NEW_VERSION,e.abrupt("break",74);case 64:case 66:case 68:case 70:return n=language.LOGIN_ACCOUNT_ERROR,e.abrupt("break",74);case 72:return n=language.CALL_CALLING_FAILED,e.abrupt("break",74);case 74:return e.abrupt("return",n);case 75:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}()},647:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMiddleEndApi=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(128),c=n(u),f=r(4),d=n(f),l=r(129),p=n(l),_=r(130),g=n(_),w=r(150),v=r(749),E=n(v),h=coreLogger.getLogger("login")("MiddleEnd"),m=function(e){function t(){var e,r,n,a,i=this;(0,d.default)(this,t);for(var u=arguments.length,f=Array(u),l=0;l<u;l++)f[l]=arguments[l];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(f))),n.requestIDVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("requestIDVerificationCode",handlePhoneNumber(t)),e.next=3,(0,w.getLoginModel)();case 3:return r=e.sent,a=r.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/v1/users/login/"+t+"/code",u=constant.REQUEST_TYPE.GET,e.abrupt("return",n._sendSyncRequest({url:s,type:u}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.requestTenantUserList=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s,u,c=t.phoneNumber,f=t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("requestTenantUserList"),e.next=3,(0,w.getLoginModel)();case 3:return r=e.sent,a=r.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/wemiddle/api/v1/mdmservice/pusers?phoneNumber="+c+"&vercode="+f,u=constant.REQUEST_TYPE.GET,e.abrupt("return",n._sendSyncRequest({url:s,type:u}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.requestTenantUserListWithToken=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s,u,c=t.phoneNumber,f=t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("requestTenantUserListWithToken"),e.next=3,(0,w.getLoginModel)();case 3:return r=e.sent,a=r.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/wemiddle/api/v2/mdmservice/pusers?phoneNumber="+c+"&vercode="+f,u=constant.REQUEST_TYPE.GET,e.abrupt("return",n._sendSyncRequest({url:s,type:u}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.ssoLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s,u,c,f,d,l,p,_,g,v=t.loginName,E=t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(r=e.sent,a=r.password,window.isHubEnv){e.next=11;break}return e.next=7,coreSecurity.getPasswordManager();case 7:return s=e.sent,e.next=10,s.getPassword("password");case 10:a=e.sent;case 11:return a=encodeURIComponent(a),n.loginName=v,n.tenantid=E,h.info("ssoLogin"),e.next=17,(0,w.getLoginModel)();case 17:if(u=e.sent,c=u.middleEndAddress,f="WeLink-meeting",!window.isHubEnv){e.next=27;break}if(f=constant.USER_AGENT.MAXHUB_WORKPLACE,-1==c.indexOf("cloudlink-alpha")){e.next=27;break}return e.next=25,coreAccount.getLoginModel();case 25:d=e.sent,d.set({isSupportCACertCheck:!1});case 27:return l="https://"+c+"/mcloud/mag/LoginAutoReg",h.info("ssoLogin user_agent=",f),p={"User-Agent":f,"Content-Type":"application/x-www-form-urlencoded"},_="loginName="+v+"&password="+a+"&publicKeyFlag=df",isNullOrEmpty(E)||(_+="&tenantid="+E),g=constant.REQUEST_TYPE.POST,e.abrupt("return",n._sendSyncRequest({url:l,type:g,header:p,body:_}).then(function(e){if(e.result){var t=e.recv_body.refresh_expires_in,r=isNullOrEmpty(t)?7200:parseInt(t);n._startRefreshToken(.5*r)}return e}));case 34:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.loginSetPassword=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,a,s,u,c,f,d=t.loginName,l=t.setPasswordToken,p=t.password,_=t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p=encodeURIComponent(p),n.loginName=d,n.tenantid=_,h.info("loginSetPassword"),e.next=6,(0,w.getLoginModel)();case 6:return r=e.sent,a=r.middleEndAddress,s="https://"+a+"/mcloud/mag/LoginAutoPReg",u={setPasswordToken:l},c="loginName="+d+"&password="+p+"&publicKeyFlag=df",isNullOrEmpty(_)||(c+="&tenantid="+_),f=constant.REQUEST_TYPE.POST,e.next=15,n._sendSyncRequest({url:s,type:f,header:u,body:c});case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n._sendSyncRequest=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreHttp.sendSyncRequest(t);case 2:if(!(r=e.sent)||128!==r.result&&107!==r.result){e.next=12;break}return e.next=6,coreAccount.switchProxy();case 6:return e.next=8,coreHttp.sendSyncRequest(t);case 8:if((r=e.sent)&&0===r.result){e.next=12;break}return e.next=12,coreAccount.resetProxy();case 12:return e.abrupt("return",n.dealWithRequestResult(r));case 13:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.refreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){var t,r,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.refreshPromise){e.next=5;break}return h.info("refreshMiddleEndToken,now is refreshing token,not do again."),e.abrupt("return",n.refreshPromise);case 5:h.info("refreshMiddleEndToken"),n.refreshPromise=new PromiseObject;case 7:return t=!1,e.prev=8,e.next=11,n.ssoLogin({loginName:n.loginName,tenantid:n.tenantid});case 11:if(r=e.sent,!r.result||!r.recv_body.crypt_token){e.next=24;break}return e.next=15,(0,w.getLoginModel)();case 15:return a=e.sent,a.user_ticket=r.recv_body.access_token||a.user_ticket,a.crypt_token=r.recv_body.crypt_token||a.crypt_token,h.info("refresh um crypttoken"),e.next=21,coreTup.getOfflineFileInstance();case 21:s=e.sent,s.refreshToken(a.crypt_token),t=!0;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(8),h.error("refresh error:",e.t0.toString());case 29:return n.refreshPromise.resolve(t),n.refreshPromise=null,e.abrupt("return",t);case 32:case"end":return e.stop()}},e,i,[[8,26]])})),n._startRefreshToken=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.stopRefreshMiddleEndToken(),h.info("start refresh middle-end [token], interval:",t),n.refreshTokenTimer=setInterval(n.refreshMiddleEndToken,1e3*t);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.stopRefreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("stop refresh middle-end [token]"),n.refreshTokenTimer&&(clearInterval(n.refreshTokenTimer),n.refreshTokenTimer=null);case 2:case"end":return e.stop()}},e,i)})),n.requestOauthUrl=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,a,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=u.company,f=void 0===c?"":c,d=u.account,l=void 0===d?"":d,p=u.clientType,_=void 0===p?1:p;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("requestOauthUrl"),e.next=3,(0,w.getLoginModel)();case 3:return t=e.sent,r=t.serverAddress,a="https://"+r+"/rest/usg/sso/v1/auth/authorizeInfo?domain="+f+"&username="+l+"&clientType="+_,s=constant.REQUEST_TYPE.GET,e.abrupt("return",coreHttp.sendSyncRequest({url:a,type:s}).then(function(e){return n.dealWithCloudPortalOauth(e)}));case 8:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.oAuthLogin=function(){var e=(0,s.default)(o.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.domain,a=r.userTicket,s=r.serverAddress,u=r.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("oAuthLogin"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,t.serverAddress=s,t.serverPort=u,t.domain=n,t.userTicket=a,t.authType=1,coreAccount.login({});case 10:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),n.getUrlHost=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=2;break}return e.abrupt("return","");case 2:return r=document.createElement("a"),r.href=t,e.abrupt("return",r.hostname||t);case 5:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.dealWithRequestResult=function(e){var t=0,r="",n=!1,a={};try{if(0===e.result)switch(e.param.resp_code){case 200:a=JSON.parse(e.param.recv_body),t=a.code||a.errorCode||0;break;case 302:t=302;break;default:t=-1}else t=-1;h.info("dealWithRequestResult: resp_code="+(e.param&&e.param.resp_code)+",result="+e.result)}catch(e){h.error("dealWithRequestResult",e.toString()),t=-1}switch(parseInt(t)){case-1:r=language.CALL_CALLING_FAILED;break;case 0:case 200:case 302:n=!0;break;case 1024:r=language.VERIFICATION_CODE_ERROR_SERVER;break;case 1101:r=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY;break;case 1103:r=language.LOGIN_USERPWD_ERROR;break;case 1146:r=language.LOGIN_ERR_ACCOUNT_LOCKED;break;case 2e3:case 2030:r=language.VERIFICATION_CODE_ERROR_SERVER;break;case 3005:r=language.VERIFICATION_CODE_ERROR_FREQUENTLY;break;case 3007:r=language.VERIFICATION_CODE_ERROR_SMS_FAILED;break;case 3010:r=language.VERIFICATION_CODE_ERROR_NUMBER_INCORRECT;break;case 3008:r=language.VERIFICATION_CODE_ERROR;break;case 10005:r=language.VERIFICATION_CODE_ERROR_NUMBER_DISABLED;break;case 10008:r=language.LOGIN_E_ERR_USER_NOT_EXISTS;break;default:r=language.CALL_CALLING_FAILED}return h.info("dealWithRequestResult: code="+t+",message="+(a.message||a.errorMessage)),{code:t,result:n,message:r,recv_body:a}},n.dealWithCloudPortalOauth=function(e){var t=0,r="",n=!1,a={};try{if(0===e.result)switch(e.param.resp_code){case 200:a=JSON.parse(e.param.recv_body),t=parseInt(a.returnCode)||0;break;case 302:t=302;break;default:t=-1}else t=-1;h.info("dealWithCloudPortal: resp_code="+(e.param&&e.param.resp_code)+",result="+e.result)}catch(e){h.error("dealWithCloudPortal",e.toString()),t=-1}switch(t){case-1:r=language.CALL_CALLING_FAILED;break;case 0:r=language.EADDR_SUCCESS,n=!0;break;case 1:r=language.REQUEST_ERROR;break;case 2:r=language.INNER_ERROR;break;case 3:r=language.WITHDRAW_PARAMETER_ERROR;break;case 4:r=language.REQUEST_ILLEGAL;break;case 5:r=language.FORGET_PWD_E_ERR_BAD_ACCESS_DURING_UPGRADE;break;case 206010014:case 206010023:r=language.COMPANY_NO_EXIT;break;case 20603e4:r=language.USER_DOES_NOT_EXIST;break;default:r=language.CALL_CALLING_FAILED}return h.info("dealWithCloudPortalOauth: code="+t+",message="+a.returnMessage),{code:t,result:n,message:r,recv_body:a}},a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(E.default),I=void 0;t.getMiddleEndApi=function(){return isNullOrEmpty(I)&&(I=new m),I}},648:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(){k.info("userClick  showSettingMenu  login setting");var e=window.remote.Menu,t=[{label:language.MOBILE_BASIC_SETTINGS,type:"normal",click:i},{label:language.COLLECT_LOG_FILES,type:"normal",click:s},{label:language.SOFT_COPYRIGHT_DESCRIPTION,type:"normal",click:u},{label:language.PRIVACY_TITLE,type:"normal",click:c}];window.CLIENTCONFIG.ISWIN&&t.push({label:language.NET_DETECT,type:"normal",click:I}),e.buildFromTemplate(t).popup(remote.getCurrentWindow())}function i(){k.info("goToLoginSetting"),window.goRoute("login/loginSetting")}function s(){k.info("collectLogsAndOpen"),coreLog.collectLogsAndOpen()}function u(){k.info("goToLoginCopyright"),window.goRoute("login/LoginCopyright")}function c(){k.info("goToLoginPrivacy"),window.goRoute("login/LoginPrivacy")}function f(){k.info("userClick click minimize btn"),appService.minimize()}function d(e,t){(0,b.getSyncLoginModel)().loginDisable||R.changeLoginInfo((0,g.default)({},e,t))}function l(e,t){t.target&&d(e,t.target.value||"")}function p(e){var t=$getState(),r=t.common,n=r.isShowModal,a=r.isShowNotifyModal,o=t.setting.isShowChangePassword,i=t.dialogModal.isShowDialog;e.altKey&&115===e.keyCode&&((0,x.getCloseAppWays)(),reactStopPropagation(e),e.preventDefault()),a||n||i||13!==e.keyCode||"login"!==window.getRoute()||o||m()}Object.defineProperty(t,"__esModule",{value:!0}),t.removeKeyDownListener=t.addKeyDownListener=t.forgetPwd=t.noLoginJoinConference=t.doLogin=void 0;var _=r(141),g=a(_),w=r(1),v=a(w),E=r(2),h=a(E),m=t.doLogin=function(){var e=(0,h.default)(v.default.mark(function e(){var t,r,n,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("userClick  doLogin  login btn"),e.next=3,(0,b.getLoginModel)();case 3:if(t=e.sent,!(r=t.loginDisable)){e.next=8;break}return k.info("doLogin loginDisable",r),e.abrupt("return");case 8:return e.next=10,L.checkLoginInfo();case 10:if(n=e.sent,document.activeElement.blur(),!n){e.next=19;break}return t.authType=0,e.next=16,S.login();case 16:return e.abrupt("return",e.sent);case 19:a=language.ERROR_ACCOUNT_PWD,window.isHubEnv?t.maxhubLoginError={serverType:0,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR}:window.alert(language.ERROR_ACCOUNT_PWD);case 21:throw"";case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,h.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.initNetDetect)();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:window.goRoute("login/NetDetection");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.noLoginJoinConference=function(){var e=(0,h.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("userClick noLoginJoinConference  login page join conf"),e.next=3,(0,O.getNickName)();case 3:return e.next=5,coreConf.getConfInfoFromDb();case 5:return e.next=7,coreConf.changeConfInfoCardState(!1);case 7:window.goRoute("login/noLoginJoinConference");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.forgetPwd=function(){var e=(0,h.default)(v.default.mark(function e(){var t,r,n,a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.info("userCLick  forgetPwd  login page forget xx"),e.next=3,(0,b.getLoginModel)();case 3:t=e.sent,r=t.serverAddress,n=t.serverPort,a=r+":"+n,R.cannotLogin(a);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.addKeyDownListener=function(){var e=(0,h.default)(v.default.mark(function e(t){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:A=t,document.addEventListener("keydown",p);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.removeKeyDownListener=function(){var e=(0,h.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:A=Noop,document.removeEventListener("keydown",p);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.showSettingMenu=o,t.miniApp=f,t.valueChange=d,t.inputValueChange=l;var C=r(563),L=n(C),T=r(269),S=n(T),O=r(302),x=r(301),N=r(229),R=n(N),y=r(649),b=r(209),k=coreLogger.getLogger("logic")("login/uiController"),A=Noop},649:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleClearData=t.startDetect=t.stopDetect=t.handleDetectDataNotify=t.initNetDetect=t.updataBtns=void 0;var a=r(132),o=n(a),i=r(69),s=n(i),u=r(1),c=n(u),f=r(2),d=n(f),l=r(329),p=r(329),_=coreLogger.getLogger("logic")("login/loginNetDetect"),g=t.updataBtns=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.BTN_STATUS.START,r=!1,n={cancel:{visible:!1,disabled:!1,class:"btn-cancel"},detect:{visible:!1,disabled:!1,class:"btn-detect"},retry:{visible:!1,disabled:!1,class:"btn-detect"},stop:{visible:!1,disabled:!1,class:"btn-stop"},done:{visible:!1,disabled:!1,class:"btn-detect"}};switch(t){case constant.BTN_STATUS.START:n.cancel.visible=!0,n.cancel.disabled=!1,n.detect.visible=!0,n.detect.disabled=!e,r=!0;break;case constant.BTN_STATUS.DETECTING:n.cancel.visible=!0,n.cancel.disabled=!0,n.stop.visible=!0,n.stop.disabled=!1,r=!0;break;case constant.BTN_STATUS.DONE:n.retry.visible=!0,n.retry.disabled=!1,n.done.visible=!0,n.done.disabled=!1,r=!0}r&&$dispatch(coreUi.setDetectBtns(n))},w=(t.initNetDetect=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.info("initNetDetect"),e.next=3,(0,l.detectInit)();case 3:if(t=e.sent,0===t.result){e.next=10;break}return _.info("initNetDetect detectInitRet ERR = "+t.result),e.next=8,(0,p.detectUnInit)();case 8:return C(t.result),e.abrupt("return",!1);case 10:return e.next=12,(0,l.setCmptEvent)({OnDetectDataNotify:v});case 12:return r={server_port:10100},e.next=15,(0,l.detectStartServer)(r);case 15:if(n=e.sent,0===n.result){e.next=24;break}return _.info("initNetDetect detectStartServerRet ERR = "+n.result),e.next=20,(0,p.detectStopServer)();case 20:return e.next=22,(0,p.detectUnInit)();case 22:return C(n.result,r.server_port),e.abrupt("return",!1);case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),-1),v=t.handleDetectDataNotify=function(e){_.info("handleDetectDataNotify data = "+(0,s.default)(e));var t=e.param,r=t.avg_delay_time,n=t.avg_jitter_time,a=t.avg_recv_loss_rate,o=t.avg_send_loss_rate,i=t.current_level,u=t.max_delay_time,c=t.max_jitter_time,f=t.max_recv_cont_loss_pkts,d=t.max_recv_loss_rate,l=t.max_send_cont_loss_pkts,p=t.max_send_loss_rate,v=(t.total_level,t.total_recv_pkt_loss_seconds),m=t.total_send_pkt_loss_seconds,I=$getState().common,C=I.curResLevel,L=I.ipDetectResList,T=I.netdetectMode,S=I.bandwidth,O=I.maxDelay,x=I.maxLoss,N=I.maxContinuousLoss,R=I.maxJitter,y=[].concat(L),b=T===constant.NET_DETECT_MODE.ADVANCED_MODE;if(b){u&&u>O&&(O=u,$dispatch(coreUi.setMaxDelay(O))),c&&c>R&&(R=c,$dispatch(coreUi.setMaxJitter(R)));var k=Math.max(l,f);k&&k>N&&(N=k,$dispatch(coreUi.setMaxContinuousLoss(N)));var A=Math.max(d,p);A&&A>x&&(x=A,$dispatch(coreUi.setMaxLoss(x)))}var P="  "+language.CALL_MEDIA_INFO_LOST+"(%):"+language.NET_DETECT_INFO_AVG+Math.max(a,o)+", "+language.NET_DETECT_INFO_MAX+Math.max(d,p)+" "+(b?"("+x+")":"")+"\n  "+language.LANG_QOS_DELAY+"(ms):"+language.NET_DETECT_INFO_AVG+n+", "+language.NET_DETECT_INFO_MAX+c+" "+(b?"("+R+")":"")+"\n  "+language.LANG_QOS_JIITER+"(ms):"+language.NET_DETECT_INFO_AVG+r+", "+language.NET_DETECT_INFO_MAX+u+" "+(b?"("+O+")":"")+"\n  "+language.NET_DETECT_INFO_MAX_CONTINUOUS_LOSS+": "+Math.max(f,l)+" "+(b?"("+N+")":"")+"\n  "+language.NET_DETECT_INFO_TOTAL_LOSS_CNT+": "+Math.max(v,m);if(T===constant.NET_DETECT_MODE.ADVANCED_MODE)clearTimeout(w),y[0].col=1,y[0].level=S,y[0].cont=P,$dispatch(coreUi.setIpDetectResList(y)),h=100,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+h+"%)")),w=setTimeout(function(){_.info("timeoutTimer curResLevel = "+C),E(!0)},2e4);else if(++C===i){clearTimeout(w),$dispatch(coreUi.setCurResLevel(i));for(var M=0;M<y.length;M++)if(y[M].level===i){if(y[M].cont===language.NET_DETECT_INFO_NOT_DETECT)return void _.info("停止检测后收到数据");5!==i&&(y[M+1].cont=language.NET_DETECT_INFO_DETECTING+"...",y[M+1].col=1),y[M].cont=P,y[M].col=1;break}$dispatch(coreUi.setIpDetectResList(y)),5===i?(g(!0,constant.BTN_STATUS.DONE),$dispatch(coreUi.setDisableIPInput(!1)),$dispatch(coreUi.setipDetectTipCont(language.PROMPT_OPEN_NETDETECT))):w=setTimeout(function(){_.info("timeoutTimer curResLevel = "+C),E(!0)},2e4)}},E=t.stopDetect=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a,o,i,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.info("stopDetect detectStopClient"),t=$getState().common,r=t.curResLevel,n=t.ipDetectResList,a=t.netdetectMode,o=[].concat(n),clearTimeout(w),clearInterval(m),a!==constant.NET_DETECT_MODE.ADVANCED_MODE){e.next=11;break}return e.next=8,(0,p.detectStopClientContinue)();case 8:o[0].level!==r&&(o[0].cont=language.NET_DETECT_INFO_NOT_DETECT,o[0].col=0),e.next=15;break;case 11:if(a!==constant.NET_DETECT_MODE.NORMAL_MODE){e.next=15;break}return e.next=14,(0,p.detectStopClient)();case 14:for(i=0;i<o.length;i++)s&&i===r?(o[i].cont=language.NET_DETECT_INFO_TIME_OUT,o[i].col=2):i>=r&&(o[i].cont=language.NET_DETECT_INFO_NOT_DETECT,o[i].col=0);case 15:$dispatch(coreUi.setIpDetectResList(o)),g(!0,constant.BTN_STATUS.START),$dispatch(coreUi.setipDetectTipCont(language.PROMPT_OPEN_NETDETECT)),$dispatch(coreUi.setDisableIPInput(!1));case 19:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=0,m=-1,I=(t.startDetect=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a,i,u,f,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().common,r=t.ipValue,n=t.packetLen,a=t.bandwidth,i=t.netdetectMode,u={str_server_ip:r,server_port:10100,client_port:10102},i===constant.NET_DETECT_MODE.ADVANCED_MODE&&(u=(0,o.default)(u,{pkt_len:parseInt(n),level:parseInt(a)})),_.info("startDetect param = "+(0,s.default)(u)),f=-1,i!==constant.NET_DETECT_MODE.ADVANCED_MODE){e.next=11;break}return e.next=8,(0,p.detectStartClientContinue)(u);case 8:f=e.sent,e.next=15;break;case 11:if(i!==constant.NET_DETECT_MODE.NORMAL_MODE){e.next=15;break}return e.next=14,(0,p.detectStartClient)(u);case 14:f=e.sent;case 15:if(0===f.result){e.next=22;break}return _.info("startDetect detectStartClientRet ERR = "+f.result),e.next=19,(0,p.detectStopClient)();case 19:return d=u.client_port,C(f.result,d+"|"+(d+1)+"|"+(d+2)),e.abrupt("return",!1);case 22:clearTimeout(w),w=setTimeout(function(){var e=$getState().common.curResLevel;_.info("timeoutTimer curResLevel = "+e),0===e&&E(!0)},2e4),i===constant.NET_DETECT_MODE.ADVANCED_MODE?($dispatch(coreUi.setMaxDelay(0)),$dispatch(coreUi.setMaxJitter(0)),$dispatch(coreUi.setMaxLoss(0)),$dispatch(coreUi.setMaxContinuousLoss(0)),h=0,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+h+"%)")),m=setInterval(function(){h<99?$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+ ++h+"%)")):h>=100&&(h=0,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+ ++h+"%)")))},100)):i===constant.NET_DETECT_MODE.NORMAL_MODE&&$dispatch(coreUi.setipDetectTipCont("")),g(!0,constant.BTN_STATUS.DETECTING),$dispatch(coreUi.setCurResLevel(0)),$dispatch(coreUi.setIpDetectResList(I())),$dispatch(coreUi.setDisableIPInput(!0)),$dispatch(coreUi.setMaxDelay(0)),$dispatch(coreUi.setMaxLoss(0));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState().common,t=e.netdetectMode,r=e.bandwidth;if(t===constant.NET_DETECT_MODE.ADVANCED_MODE){var n=1===r?"0.5M:":2===r?"1M:":3===r?"1.5M:":4===r?"2M:":5===r?"4M:":"8M:",a=r+1;return $dispatch(coreUi.setCurResLevel(r)),[{title:n,cont:"",col:1,level:a}]}for(var o=[],i=1;i<6;i++){var s="",u=language.NET_DETECT_INFO_PENDING_DETECT,c=i,f=0;5!==i?1===i?(s="512 Kbit/s:",u=language.NET_DETECT_INFO_DETECTING+"...",f=1):s=512*i+" Kbit/s:":s="4096 Kbit/s:",o.push({title:s,cont:u,col:f,level:c})}return o}),C=(t.handleClearData=function(){var e=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.detectStopClient)();case 2:return e.next=4,(0,p.detectStopServer)();case 4:return e.next=6,(0,p.detectUnInit)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="";switch(e){case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_UNINIT_ERROR:r=language.DETECT_UNINIT_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_THREAD_ERROR:r=language.DETECT_THREAD_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_STARTED_ERROR:r=language.DETECT_STARTED_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_ERROR:r=language.DETECT_SOCKET_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_CONN_ERROR:r=language.DETECT_SOCKET_CONN_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_BIND_ERROR:r=language.DETECT_SOCKET_BIND_ERROR_INFO+t;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_TIMEOUT_ERROR:r=language.DETECT_TIMEOUT_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SRVBUSY_ERROR:r=language.DETECT_SRVBUSY_ERROR_INFO;break;default:r=language.DETECT_THREAD_ERROR_DEFOULT}window.alert(r)})},650:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.actionGetCorpResourceAtomic=t.getVerifyCodeAndSetUi=t.sendCaptchaResultAndSetUi=t.getCaptchaAndSetUi=t.getVerifyCode=t.sendCaptchaResult=t.getCaptcha=t.clearLocalDNSIp=t.setLocalDNSIp=t.getLocalDNSIp=t.frogetPassword=t.verifyVerificationCode=t.requestVerificationCode=t.queryUserAccount=t.recordPrivacy=t.actiongetOBSConfigInfo=t.actionGetUploadInfo=t.actionRefreshToken=t.changeLoginPassword=t.queryMediaXaddrFromServer=t.resumeUportalService=t.resetLoginInfo=void 0;var a=r(69),o=n(a),i=r(3),s=n(i),u=r(1),c=n(u),f=r(2),d=n(f),l=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n){var a,o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=encodeURIComponent(r),n=encodeURIComponent(n),a=n,e.next=5,(0,g.getLoginModel)();case 5:return o=e.sent,i=o.middleEndAddress,s=o.crypt_token,u="https://"+i+"/mcloud/mag/ProxyForText/wemiddle/api/v1/sso/personal_password_modify",m.info("change it pd url = :",u),e.next=12,coreHttp.sendSyncRequest({url:u,type:constant.REQUEST_TYPE.POST,header:{"Content-Type":"application/x-www-form-urlencoded",lang:"en",Cookie:"token="+s},body:"account="+t+"&oldPasswd="+r+"&newPasswd="+n+"&confirmPasswd="+a});case 12:return f=e.sent,e.abrupt("return",f);case 14:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),p=r(127),_=n(p),g=r(150),w=r(209),v=r(270),E=r(135),h=coreCommonComponent.Icon,m=coreLogger.getLogger("login")("uportal");window.refreshUportalToken=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nil;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},t.param={},t.param.result=0,t.param.refresh_token_result={},!window.webView||r){e.next=8;break}t.param.refresh_token_result.auth_token=window.webView.getImToken(),e.next=13;break;case 8:if(!(r&&r.indexOf("@")>0)){e.next=12;break}return e.next=11,coreSecurity.encode64(r);case 11:r=e.sent;case 12:t.param.refresh_token_result.auth_token=r;case 13:t.param.refresh_token_result.stg_account="",t.param.refresh_token_result.stg_pwd="",(0,v.getUportalApi)().refreshTokenCallback(t);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.resetLoginInfo=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={authToken:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerBackup2:"",sipServerPortBackup2:0,sipServerBackup3:"",sipServerPortBackup3:0,eabUri:"",groupServer:"",eServerAddressAll:"",eServerAddress:"",eServerPort:0,sipUri:"",svnUri:"",httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,smcUri:"",maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:""},e.next=3,coreSecurity.getPasswordManager();case 3:return r=e.sent,e.next=6,r.setPassword("stgPassword","");case 6:return e.next=8,r.setPassword("sipPassword","");case 8:return e.next=10,(0,g.getLoginModel)();case 10:n=e.sent,n.set(t);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resumeUportalService=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:t=e.sent,t.setNotifyFunc(360459,(0,v.getUportalApi)().refreshTokenCallback);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.queryMediaXaddrFromServer=function(e,t){return new s.default(function(){var r=(0,d.default)(c.default.mark(function r(n,a){var o,i,s,u,f;return c.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.setNotifyFunc(360486,L),r.next=4,(0,g.getLoginModel)();case 4:o=r.sent,i=o.serverAddress,s=o.serverPort,u=function(e){if(e&&e.param&&0===e.param.result){if(isNullOrEmpty(e.param.mediax_result))return void n({result:1});var r=void 0,a=e.param.mediax_result.server_uri,o=e.param.mediax_result.cms_uri;if(a&&o)r=t?o:a,m.info("cmsAddr:",o,"mediaxAddr:",a,"is_cms_addr:",t);else if(a)r=a,t=0,m.info("mediaxAddr:",a);else{if(!o)return m.error("queryMediaXaddrFromServer mediaX address is empty!"),void n({result:1});r=o,t=1,m.info("cmsAddr:",o)}var s=r.split(":");m.info("queryMediaXaddrFromServer mediaX address success"),(0,g.getLoginModel)().then(function(e){e.tempMediaxAddress=s[0],e.tempMediaxPort=s[1]}),n({result:0,mediaxAddr:s[0],mediaxPort:parseInt(s[1]),isCmsAddr:t})}else e&&e.param&&e.param.result===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT&&T(i),m.error("queryMediaXaddrFromServer notify failed,errorcode:",e.param.result),n({result:1})},f=window.setTimeout(function(){m.error("queryMediaXaddrFromServer 6s time out"),n({result:1}),T(i)},6e3),C(i).then(function(t){isNullOrEmpty(t)||(i=t),e.getMediaxAccessAddr(i,parseInt(s),u).then(function(e){window.clearTimeout(f),e&&0!==e.result&&(m.error("queryMediaXaddrFromServer failed"),n({result:1}))})}),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(0),m.error("queryMediaXaddrFromServer",{e:r.t0.toJSON()}),n({result:1});case 16:case"end":return r.stop()}},r,void 0,[[0,12]])}));return function(e,t){return r.apply(this,arguments)}}())};window.getDnsResult=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r="",t&&(n=JSON.parse(t),n.loginOnCurrentDnsResult&&(r=n.loginOnCurrentDnsResult,L(r)));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var I=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m.info("change [password] checkCall"),!$getState().call.showCallToolBar&&"VIDEO_OUT"!==$getState().call.callStatus&&"VIDEO_CONNECTED"!==$getState().call.callStatus){e.next=16;break}if(t="LANG_NATIVE_CONFIRM_TITLE",r=language.COMMON_CHECK_CHANGEPASSWORD_CALLEXIST,n=!1,!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=9,window.confirm(r);case 9:n=e.sent,e.next=15;break;case 12:return e.next=14,window.confirm(r,t,!0);case 14:n=e.sent;case 15:return e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(0),m.error("checkCall",{e:e.t0.toJSON()}),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,void 0,[[0,19]])}));return function(){return e.apply(this,arguments)}}();t.changeLoginPassword=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n){var a,o,i,s,u,f,p,w,v,C,L,T;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:return a=e.sent,e.next=5,I();case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(window.navigator.onLine){e.next=11;break}return alert(language.LOGIN_RESUME_NETWORK_ERROR),e.abrupt("return");case 11:if(i=PromiseObject(),s=void 0,"WeLink"===window.CLIENTCONFIG.NEW_APP_NAME){e.next=27;break}return u=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.param,m.info("change [pass]word result: "+r.result),s&&window.clearTimeout(s),r&&0===r.result?(coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),window.CLIENTCONFIG.ISMOBILE?window.alert(language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),i.resolve(!0)}):window.alert(language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),coreUi.showModal(_.default.createElement("div",{className:"loading-icon-bg"},_.default.createElement(h,{type:E.iconTypeMap.Loading,size:E.iconSizeMap.CLS_40,color:E.iconColorMap.COL_FFFFFF})),!1),i.resolve(!0)})):(n=constant.HUAWEI_MEETING_CHANGE_PASSWORD_ERROR_INFO[r.result]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[n],2),i.resolve(!1));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setNotifyFunc(360449,u),e.next=18,(0,g.getLoginModel)();case 18:return f=e.sent,p=f.serverUportalAddress,w=f.serverUportalPort,e.next=23,a.changeLoginUportalPassword(t,r,n,p,w);case 23:v=e.sent,0!==v.result?(m.error("change lg in pd result:"+v.result),window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),i.resolve(!1)):s=window.setTimeout(function(){m.error("request  10s timeout"),i.resolve(!1)},1e4),e.next=31;break;case 27:return e.next=29,l(t,r,n);case 29:C=e.sent;try{C&&C.param&&C.param.recv_body?(L=JSON.parse(C.param.recv_body),m.info("change it pd result "+L.result+" errcode "+L.errorCode),"success"===L.result?(coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),window.alert(""+language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),i.resolve(!0)})):(T=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[L.errorCode]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[T],2),i.resolve(!1))):(m.error("change it pd callback is error"),window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),i.resolve(!1))}catch(e){window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),m.error("change it pd error. ",C)}case 31:return e.abrupt("return",i);case 32:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}();window.doingRefreshUportalToken=!1;var C=(t.actionRefreshToken=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("[ actionRefresh[Token] ]"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=5;break}window.refreshImToken(),e.next=20;break;case 5:return e.next=7,(0,g.getLoginModel)();case 7:if(t=e.sent,r=t.curPortalState,m.info("[ actionRefresh[Token] ] curPortalState = ",r),window.doingRefreshUportalToken||r===constant.CUR_PORTAL_LOGIN_STATE.LOGINING){e.next=19;break}return window.doingRefreshUportalToken=!0,e.next=14,coreTup.getUportalInstance();case 14:n=e.sent,n.refreshToken(),setTimeout(function(){window.doingRefreshUportalToken=!1},2e4),e.next=20;break;case 19:m.info("refreshing uportal token. return don't send");case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.actionGetUploadInfo=function(){var e=(0,d.default)(c.default.mark(function e(t,r){var n,a,o,i,s,u,f,l,p,_,w,v,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return n=e.sent,a=n.account,o=void 0===a?"":a,i=n.serverUportalAddress,s=n.serverUportalPort,u="",f="",m.info("actionGetUploadInfo"),e.next=9,coreTup.getUportalInstance();case 9:return l=e.sent,p=PromiseObject(),_=function(){var e=(0,d.default)(c.default.mark(function e(n){var a,i,s,d,_,g,w,v;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=n.param)||38!==a.result||!a.upload_info_result||""===a.upload_info_result.redirect_url){e.next=18;break}if(i=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(s=i.exec(a.upload_info_result.redirect_url))){e.next=15;break}return d=s[1],_=s[2],g=s[3],u=d||_,f=g&&g||0,w={req_info:{file_name:t,file_type:r,is_logined:E,user_id:o,server_addr:u,server_port:parseInt(f)}},e.next=11,l.getUploadInfo(w);case 11:v=e.sent,0!==v.result&&(m.error("actionGetUploadInfo redirect fail, result:"+v.result),p.resolve("request failed")),e.next=16;break;case 15:m.error("actionGetUploadInfo redirect url is wrong");case 16:e.next=19;break;case 18:0!==a.result?(m.error("get upload info fail, result:"+a.result),p.resolve(a)):p.resolve(a);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),l.setNotifyFunc(360491,_),w={req_info:{file_name:t,file_type:r,is_logined:E,user_id:o,server_addr:i,server_port:parseInt(s)}},e.next=16,l.getUploadInfo(w);case 16:return v=e.sent,0!==v.result&&(m.error("actionGetUploadInfo fail, result:"+v.result),p.resolve("request failed")),setTimeout(function(){p.resolve("request timeout")},1e4),e.abrupt("return",p);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),t.actiongetOBSConfigInfo=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("actiongetOBSConfigInfo"),e.next=3,coreTup.getUportalInstance();case 3:return r=e.sent,n=PromiseObject(),r.setNotifyFunc(360498,(0,v.getUportalApi)().dealWithServerSetParamNotify),a={req_info:{is_logined:t}},m.info("actiongetOBSConfigInfo param",a),e.next=10,r.getOBSConfigInfo(a);case 10:return o=e.sent,0!==o.result&&(m.error("getOBSConfigInfo fail, result:"+o.result),n.resolve("request failed")),setTimeout(function(){n.resolve("request timeout")},1e4),e.abrupt("return",n);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.recordPrivacy=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,f,d,l,p=t.oprEvent,_=t.privacyver,w=t.chrtype;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("[ recordPrivacy ]"),e.next=3,(0,g.getLoginModel)();case 3:return r=e.sent,n=r.account,a=r.serverUportalAddress,o=r.serverUportalPort,e.next=7,coreTup.getUportalInstance();case 7:return i=e.sent,s=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,u=(new Date).format("yyyy-MM-dd hh:mm"),f={record_user:n,record_version:s,record_time:u,record_oprevent:p,server_url:a,port_num:parseInt(o),record_other:{}},_&&(f.record_other.privacyver=_),void 0!==w&&(f.record_other.chrtype=w),e.next=15,i.recordPrivacy(f);case 15:d=e.sent,0!==d.result&&m.error("record fail, result:"+d.result+"oprEvent:"+p),l=function(e){if(e&&0===e.param.result)return m.info("record success, oprEvent:"+p);m.error("record fail, result:"+e.param.result+"oprEvent:"+p)},i.setNotifyFunc(360481,l);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryUserAccount=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,n=r.serverPort,a=r.serverUportalAddress,e.next=7,coreTup.getUportalInstance();case 7:return o=e.sent,m.info("tup init"),e.next=11,(0,v.getUportalApi)().setLoginProxy(o);case 11:return i=PromiseObject(),r.forgetPwdAccount!==t&&(r.forgetPwdAccount=t,r.isFrogetRedriect=!1),s=function(){var e=(0,d.default)(c.default.mark(function e(s){var u,f,d,l,p,_,g,v;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=s.param,38!==u.result||""===u.query_result.redirect_url){e.next=20;break}if(r.isFrogetRedriect=!0,f=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(d=f.exec(u.query_result.redirect_url))){e.next=11;break}l=d[1],p=d[2],_=d[3],a=l||p,n=_&&_||0,e.next=12;break;case 11:return e.abrupt("return",(0,w.LoginError)({result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:isResume}));case 12:return r.FrogetPwdUrl=a,r.FrogetPwdUrlPort=n,g={query_user_info:{server_url:a,server_port:parseInt(n),user_account:t}},e.next=17,o.queryUserAccount(g);case 17:v=e.sent,e.next=21;break;case 20:0!==u.result?(m.error("query user account fail, result:"+u.result),i.resolve(u)):i.resolve(u);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setNotifyFunc(360482,s),u={query_user_info:{server_url:a,server_port:parseInt(n),user_account:t}},e.next=18,o.queryUserAccount(u);case 18:return f=e.sent,0!==f.result&&(m.error("query user account fail, result:"+f.result),window.ToastNew(language.REQUEST_ERROR,2),i.resolve("request failed")),setTimeout(function(){i.resolve("request timeout")},1e4),e.abrupt("return",i);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestVerificationCode=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n){var a,o,i,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return a=e.sent,o=a.serverPort,i=a.serverUportalAddress,u=void 0,a.isFrogetRedriect&&(i=a.FrogetPwdUrl,o=a.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return f=e.sent,e.abrupt("return",new s.default(function(e,a){var s=function(){var t=(0,d.default)(c.default.mark(function t(r){var n;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=r.param,m.info("request verification code result: "+n.result),u&&window.clearTimeout(u),0!==n.result&&n.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_CHANGEPWD_INVALID_TOKEN&&n.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_RESEND_WITHIN_3MIN_NOT_ALLOWED?(void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(n)):e(n);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();f.setNotifyFunc(360483,s);var l=constant.USER_AGENT.MOBILE;window.CLIENTCONFIG.ISMOBILE||(l=coreCommon.isHuaweiCloudWeLink()?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC);var p={req_info:{server_url:i,server_port:parseInt(o),user_account:t,user_agent:l,send_mode:r,lang_type:n}};f.requestVerificationCode(p).then(function(t){0!==t.result?(m.error("requestVerificationCode fail, result:"+t.result),window.ToastNew(language.REQUEST_ERROR,2),e("request failed")):u=window.setTimeout(function(){m.error("request verification 5s time out"),e("request timeout")},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r,n){return e.apply(this,arguments)}}(),t.verifyVerificationCode=function(){var e=(0,d.default)(c.default.mark(function e(t,r){var n,a,o,i,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return n=e.sent,a=n.serverPort,o=n.serverUportalAddress,i=void 0,n.isFrogetRedriect&&(o=n.FrogetPwdUrl,a=n.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return u=e.sent,e.abrupt("return",new s.default(function(e,n){var s=function(){var t=(0,d.default)(c.default.mark(function t(r){var n;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=r.param,m.info("verify verification code result: "+n.result),i&&window.clearTimeout(i),0!==n.result?(coreUi.hideModal(),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(n)):e(n);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();u.setNotifyFunc(360484,s);var f={verify_info:{server_url:o,server_port:parseInt(a),user_account:t,verification_code:r}};u.verifyVerificationCode(f).then(function(t){0!==t.result?(m.error("verify verification code fail, result:"+t.result),coreUi.hideModal(),window.ToastNew(language.REQUEST_ERROR,2),e("request failed")):i=window.setTimeout(function(){m.error("verify verification 10s time out"),e("request timeout")},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}(),t.frogetPassword=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n,a,o){var i,u,f,l,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return i=e.sent,u=void 0,f=i.serverPort,l=i.serverUportalAddress,i.isFrogetRedriect&&(l=i.FrogetPwdUrl,f=i.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return p=e.sent,e.abrupt("return",new s.default(function(e,i){var s=function(){var t=(0,d.default)(c.default.mark(function t(r){var n;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=r.param,m.info("froget request listener result: "+n.result),u&&window.clearTimeout(u),0!==n.result?(coreUi.hideModal(),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(n)):e(n);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();p.setNotifyFunc(360485,s);var _={pwd_info:{server_url:l,server_port:parseInt(f),user_account:t,new_pwd:r,pwd_type:n,lang_type:a,token:o}};p.frogetPassword(_).then(function(t){0!==t.result?(m.error("froget request fail, result:"+t.result),coreUi.hideModal(),e("request failed")):u=window.setTimeout(function(){m.error("froget pass word 15s time out"),e("request timeout")},15e3)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),t.getLocalDNSIp=function(){var e=(0,d.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return m.warn("getLocalDNSIp domain is null"),e.abrupt("return");case 3:return e.next=5,coreDb.queryLoginSetting({key:"DNS:"+t});case 5:if(!(r=e.sent)||!r.value){e.next=11;break}return m.info("getLocalDNSIp suc"),e.abrupt("return",r.value);case 11:return m.info("getLocalDNSIp fail"),e.abrupt("return","");case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),L=t.setLocalDNSIp=function(e){return e&&e.param&&0===e.param.result&&e.param.dns_result?isNullOrEmpty(e.param.dns_result.domain_addr)||isNullOrEmpty(e.param.dns_result.ip_addr)?void m.warn("setLocalDNSIp domain or ip is null"):(m.info("tup report setLocalDNSIp"),void coreDb.saveLoginSetting({key:"DNS:"+e.param.dns_result.domain_addr,value:e.param.dns_result.ip_addr})):void m.warn("dns result is null, res = "+(0,o.default)(e))},T=t.clearLocalDNSIp=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return m.warn("clearLocalDNSIp ip is null"),e.abrupt("return");case 3:return m.info("clearLocalDNSIp"),r=[],e.next=7,coreDb.queryAllLoginSetting();case 7:n=e.sent,n.forEach(function(e){e.value===t&&-1!==e.key.indexOf("DNS:")&&r.push(e.key)}),m.info("clearLocalDNSIp server addr length = "+r.length),r.length>0&&r.forEach(function(e){coreDb.saveLoginSetting({key:e,value:""})});case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,i,s,u,f,d,l,p=t.method,_=void 0===p?"post":p,w=t.path,v=void 0===w?"":w,E=t.body,h=void 0===E?{}:E;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.getLoginModel)();case 2:return r=e.sent,n=r.serverUportalAddress,a=r.serverUportalPort,i=r.isFrogetRedriect,s=r.FrogetPwdUrl,u=r.FrogetPwdUrlPort,f="https://"+n+":"+a+v,i&&(f="https://"+s+":"+u+v),d=constant.USER_AGENT.MOBILE,window.CLIENTCONFIG.ISMOBILE||(d=coreCommon.isHuaweiCloudWeLink()?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC),l={url:f,type:"post"===_?constant.REQUEST_TYPE.POST:constant.REQUEST_TYPE.PUT,header:{"Content-Type":"application/json","User-Agent":d},body:(0,o.default)(h)},e.abrupt("return",l);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=t.getCaptcha=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("before getCaptcha"),r="/rest/usg/sso/v1/auth/slideverifycode/send",n=coreCommon.isMobile()?6:5,a=1,o={user:t,clientType:n,checkType:a},e.next=7,S({path:r,body:o});case 7:return i=e.sent,e.next=10,coreHttp.sendSyncRequest(i);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),x=t.sendCaptchaResult=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n,a){var o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("before sendCaptchaResult"),o="/rest/usg/sso/v1/auth/slideverifycode/check",i=coreCommon.isMobile()?6:5,s=1,u={user:t,clientType:i,token:r,pointX:n,slideTime:a,checkType:s},e.next=7,S({method:"put",path:o,body:u});case 7:return f=e.sent,e.next=10,coreHttp.sendSyncRequest(f);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),N=t.getVerifyCode=function(){var e=(0,d.default)(c.default.mark(function e(t,r){var n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("before getVerifyCode"),n="/rest/usg/ap/v1/verifycode/send",a="2052"===window.langcode?"zh-CN":"en-US",o={user:t,language:a,token:r},e.next=6,S({path:n,body:o});case 6:return i=e.sent,e.next=9,coreHttp.sendSyncRequest(i);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}();t.getCaptchaAndSetUi=function(){var e=(0,d.default)(c.default.mark(function e(t){var r,n,a,o,i,s,u,f,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return window.ToastNew(language.PC_PHONE_NUMBER_OR_ACCOUNT_NUMBER_CAN_NOT_EMPTY,2),e.abrupt("return");case 3:return e.next=5,O(t);case 5:if((r=e.sent)&&0===r.result){e.next=9;break}return m.info("getCaptcha result, tup result : ",r&&r.result),e.abrupt("return");case 9:if(n=r.param,a=n.recv_body,o=n.resp_code,m.info("getCaptcha result, server resp_code : ",o),i=a&&JSON.parse(a),s=i.data,u=i.returnMessage,f=i.requestId,m.info("getCaptcha result, requestId: ",f,", returnMessage: ",u),200!==o){e.next=19;break}return s.sliderResult=!1,e.next=17,(0,g.getLoginModel)();case 17:d=e.sent,d.manMachineCode=s;case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.sendCaptchaResultAndSetUi=function(){var e=(0,d.default)(c.default.mark(function e(t,r,n,a,o,i,s){var u,f,d,l,p,_,w,v,E,h,I,C,L;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,r,n,a);case 2:if(u=e.sent,f=u.param,d=f.recv_body,l=f.resp_code,m.info("sendCaptcha result, tup result : ",u.result),m.info("sendCaptcha result, server resp_code : ",l),p=d&&JSON.parse(d),_=p.returnCode,w=p.returnMessage,v=p.requestId,E=p.data,m.info("sendCaptcha result, requestId: ",v,", returnMessage : ",w),200!==l){e.next=16;break}return h="000000000"===_,I="000000000"===_?E.token:"",C=!0,e.next=14,(0,g.getLoginModel)();case 14:L=e.sent,L.manMachineCode={verificationSuccess:h,sliderResult:C,shadowImage:o,cutImage:i,token:I,oldPointY:s};case 16:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a,o,i,s){return e.apply(this,arguments)}}(),t.getVerifyCodeAndSetUi=function(){var e=(0,d.default)(c.default.mark(function e(t,r){var n,a,o,i,s,u,f,d,l,p,_,w,v;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,r);case 2:if(n=e.sent,a=n.param,o=a.recv_body,i=a.resp_code,m.info("getVerifyCode result, tup result : ",n.result),m.info("getVerifyCode result, server resp_code : ",i),s=o&&JSON.parse(o),u=s.returnCode,f=s.returnMessage,d=s.requestId,l=s.data,m.info("getVerifyCode result, requestId: ",d,", returnMessage : ",f),"000000000"!==u&&"206030004"!==u){e.next=19;break}return p=$getState().login.forgetPwdAccount,_=p.type===constant.FORGETPWDACCOUNTTYPE.ACCOUNT&&isNullOrEmpty(l.bindPhone),w={account:p.account,email:p.email,showaccount:_?l.bindEmail:p.showaccount,timeout:l.expire||l.sendLeftTime,type:_?constant.FORGETPWDACCOUNTTYPE.ACCOUNT_WITH_EMAL:p.type,useCaptcha:!0,bindPhone:l.bindPhone,bindEmail:l.bindEmail},e.next=14,(0,g.getLoginModel)();case 14:v=e.sent,v.forgetPwdAccount=w,window.CLIENTCONFIG.ISMOBILE?"SetNewPassword"!==window.getRoute()&&window.goRoute("/SetNewPassword"):"login/ResetPassword"!==window.getRoute()&&window.goRoute("/login/ResetPassword"),e.next=20;break;case 19:void 0!==constant.CLOUDUSG_ERROR_TIPS[u]?window.ToastNew(language[constant.CLOUDUSG_ERROR_TIPS[u]],2):window.ToastNew(language.REQUEST_ERROR,2);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,r){return e.apply(this,arguments)}}();window.getCorpResourceResult=function(){var e=(0,d.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.param||0!==t.param.result){e.next=10;break}return y&&window.clearTimeout(y),m.info("actionGetCorpResource success"),e.next=5,(0,g.getLoginModel)();case 5:r=e.sent,r.canRecordConf=t.param.corp_resource.conf_rec_right,R.resolve(coreCommon.ATOMIC_ACTION_RESULT.SUCCESS),e.next=12;break;case 10:R.resolve(coreCommon.ATOMIC_ACTION_RESULT.FAILED),m.error("actionGetCorpResource fail, result:"+t.param.result);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var R=PromiseObject(),y=void 0,b=function(){var e=(0,d.default)(c.default.mark(function e(){var t,r,n,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("[ actionGetCorpResource ]"),e.next=3,window.isAnonymous();case 3:if(t=e.sent,!window.CLIENTCONFIG.ENABLE_IT_MEETING||t){e.next=12;break}return R=PromiseObject(),R.resolve(coreCommon.ATOMIC_ACTION_RESULT.SUCCESS),e.next=9,(0,g.getLoginModel)();case 9:return r=e.sent,r.canRecordConf=0,e.abrupt("return",R);case 12:return n=void 0,e.next=15,coreTup.getUportalInstance();case 15:return a=e.sent,e.next=18,(0,g.getLoginModel)();case 18:if(o=e.sent,o.isSupportAS){e.next=23;break}return e.abrupt("return",new s.default(function(e,t){var r=function(){var t=(0,d.default)(c.default.mark(function t(r){var a;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r&&0===r.param.result?(n&&window.clearTimeout(n),a=r.param,o.canRecordConf=a.corp_resource.conf_rec_right,e(coreCommon.ATOMIC_ACTION_RESULT.SUCCESS)):(m.error("actionGetCorpResource fail, result:"+r.param.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED));case 1:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();a.setNotifyFunc(360492,r),a.getCorpResource().then(function(t){0!==t.result?(m.error("actionGetCorpResource fail, result:"+t.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)):n=window.setTimeout(function(){m.error("actionGetCorpResource 10s time out"),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)},1e4)})}));case 23:return e.abrupt("return",new s.default(function(e,t){var r=function(){var t=(0,d.default)(c.default.mark(function t(r){var a;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n&&window.clearTimeout(n),r&&0===r.param.result?(a=r.param,coreCommon.setSensitiveWordList(a.sensitive_word),o.canRecordConf=a.enable_record_capability,e(coreCommon.ATOMIC_ACTION_RESULT.SUCCESS)):(m.error("getMemberCorpResource fail, result:"+r.param.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED));case 2:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();a.setNotifyFunc(360496,r),a.getMemberCorpResource().then(function(t){0!==t.result?(m.error("actionGetMemberCorpResource fail, result:"+t.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)):n=window.setTimeout(function(){m.error("actionGetMemberCorpResource 10s time out"),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)},1e4)})}));case 24:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.actionGetCorpResourceAtomic=new coreCommon.AtomicAction("actionGetCorpResource",b)},69:function(e,t,r){e.exports={default:r(70),__esModule:!0}},70:function(e,t,r){var n=r(8),a=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},743:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handlesipconfinfo=t.setloginNotifyFunc=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=(coreLogger.getLogger("model")("model/callService/index"),t.setloginNotifyFunc=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:t=e.sent,t.setNotifyFunc(360474,u);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handlesipconfinfo=function(e){coreCommon.Observer.publish("TempSipConfInfo",e)})},744:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(128),c=n(u),f=r(4),d=n(f),l=r(129),p=n(l),_=r(130),g=n(_),w=function(e){function t(){var e,r,n,a,i=this;(0,d.default)(this,t);for(var u=arguments.length,f=Array(u),l=0;l<u;l++)f[l]=arguments[l];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(f))),n.loginToUportal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.refreshTokenCallback=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.setLoginProxy=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.uportalAllonline=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.switchProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.resetProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.useSystemProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=w},745:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return-1===window.CLIENTCONFIG.MENU_LIST.findIndex(function(t){return t===e})?0:1},a=[{route:"recent",isShow:n("recent"),enabled:1,dataTestid:"recentinfo000123"},{route:"conference",isShow:n("conference"),enabled:1,dataTestid:"conferenceinfo000123"},{route:"contactGroups",isShow:n("contactGroups"),enabled:1,dataTestid:"contactgpinfo000123"},{route:"work",isShow:n("work"),enabled:1,dataTestid:"work000123"}];t.setAppConfigList=function(){if(window.navBarConfiglist=a.concat(),!window.CLIENTCONFIG.USE_IM){var e=window.navBarConfiglist.findIndex(function(e){return"recent"===e.route});window.navBarConfiglist.splice(e,1);var t=window.navBarConfiglist[0];window.navBarConfiglist[1]=window.navBarConfiglist[1],window.navBarConfiglist[0]=t}if(!window.CLIENTCONFIG.USE_MEETING){var r=window.navBarConfiglist.findIndex(function(e){return"conference"===e.route});window.navBarConfiglist.splice(r,1)}};window.navBarConfiglist=a},746:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setCmptEvent=t.detectStopServer=t.detectStartServer=t.detectStopClientContinue=t.detectStartClientContinue=t.detectStopClient=t.detectStartClient=t.detectUnInit=t.detectInit=t.checkCertificateOverdue=t.verifyCertificate=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=coreLogger.getLogger("logic")("login/cmpt");t.verifyCertificate=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&u.info("verifyCertificate param error!"),e.next=3,coreTup.getCmptInstance();case 3:return r=e.sent,e.next=6,r.verifyCertificate(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.checkCertificateOverdue=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&u.info("checkCertificateOverdue param error!"),e.next=3,coreTup.getCmptInstance();case 3:return r=e.sent,e.next=6,r.checkCertificateOverdue(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectInit=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectInit();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectUnInit=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectUnInit();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartClient=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return r=e.sent,e.next=5,r.detectStartClient(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopClient=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopClient();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartClientContinue=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return r=e.sent,e.next=5,r.detectStartClientContinue(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopClientContinue=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopClientContinue();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartServer=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return r=e.sent,e.next=5,r.detectStartServer(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopServer=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopServer();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setCmptEvent=function(){var e=(0,s.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return r=e.sent,e.next=5,r.setCmptEvent(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},747:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserConfigFromDB=void 0;var n=r(748),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);t.loadUserConfigFromDB=a.loadUserConfigFromDB},748:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserConfigFromDB=void 0;var a=r(1),o=n(a),i=r(132),s=n(i),u=r(2),c=n(u),f=r(150),d=coreLogger.getLogger("logic")("login");t.loadUserConfigFromDB=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,coreSecurity.getPasswordManager();case 3:return r=e.sent,e.next=6,coreAccount.getLoginModel();case 6:if(n=e.sent,!0!==n.isObsCfgParams){e.next=10;break}return d.info("Has been configed from obs, jump this step "),e.abrupt("return");case 10:coreDb.queryUserConfigList({all:""}).then(function(e){var n={};-1===e.findIndex(function(e){return"confPageShowType"===e.key})&&(d.info("db can not find the value of confPageShowType"),$dispatch(coreUi.changeConfPageShowType(!1))),e.forEach(function(e){if(0===e.key.indexOf("Device.ComCfg")&&(n[e.key]=e.value,t++),0===e.key.indexOf("Device.UICfg")&&coreCwmp.dealWithUICfgParam({paramName:e.key,paramValue:e.value}),"CHRPassword"===e.key){var a=JSON.parse(e.value);a.cipher&&a.salt&&r.setCipherPassword(e.key,a.cipher,a.salt)}if("experienceConfInfo"===e.key){var o=JSON.parse(e.value);o.cipher&&o.salt&&r.setCipherPassword("experienceConfPwd",o.cipher,o.salt),$dispatch(coreUi.changeExperienceConfId(o.confid))}if("isRemindNotNotify"===e.key&&("true"===e.value?$dispatch(coreUi.isNotNotifyChangePassword(!0)):$dispatch(coreUi.isNotNotifyChangePassword(!1))),"isOpenShock"===e.key&&("true"===e.value?$dispatch(coreUi.bOpenShock(!0)):$dispatch(coreUi.bOpenShock(!1))),"isIMRecieveRing"===e.key&&("true"===e.value?$dispatch(coreUi.bIMRecieveRing(!0)):$dispatch(coreUi.bIMRecieveRing(!1))),"isCallCommingRing"===e.key&&("true"===e.value?$dispatch(coreUi.bCallCommingRing(!0)):$dispatch(coreUi.bCallCommingRing(!1))),"checkedLanguage"===e.key&&$dispatch(coreUi.languageChooseValue(2===parseInt(e.value)?1:parseInt(e.value))),"hasOpenPush"===e.key&&("true"===e.value?$dispatch(coreUi.changeHasOpenPush(!0)):$dispatch(coreUi.changeHasOpenPush(!1))),"ExperiencedTimes"===e.key){var i=JSON.parse(e.value);$dispatch(coreUi.changeCurrenExperienceTimes(i))}if("cmdkey"===e.key){var s=JSON.parse(e.value);void 0!==s[0]&&void 0!==s[1]&&void 0!==s[0].RPCName&&void 0!==s[1].RPCName&&(s[0].RPCName="Download",s[1].RPCName="Upload",$dispatch(coreUi.updateCmdKey(s)))}if("isAutoCollectLogs"===e.key){var u=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.isAutoCollectLogs=u})}if("hasAllowCollectLogs"===e.key){var c=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.hasAllowCollectLogs=c})}if("isAutoAcceptConf"===e.key){var l=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.isAutoAcceptConf=l})}if("enableDoubleScreen"===e.key){var p=coreSetting.stringToBoolean(e.value);$dispatch(coreUi.changeEnableDoubleScreen(p))}"confPageShowType"===e.key&&(d.info("mobile conf page Show type is",e.value),$dispatch(coreUi.changeConfPageShowType(e.value)))}),t>0&&(0,s.default)(window.CLIENTCONFIG,n)});case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},749:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1),o=n(a),i=r(2),s=n(i),u=r(128),c=n(u),f=r(4),d=n(f),l=r(129),p=n(l),_=r(130),g=n(_),w=function(e){function t(){var e,r,n,a,i=this;(0,d.default)(this,t);for(var u=arguments.length,f=Array(u),l=0;l<u;l++)f[l]=arguments[l];return r=n=(0,p.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(f))),n.requestIDVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.requestTenantUserList=function(){var e=(0,s.default)(o.default.mark(function e(t){t.phoneNumber,t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.requestTenantUserListWithToken=function(){var e=(0,s.default)(o.default.mark(function e(t){t.phoneNumber,t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.ssoLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){t.loginName,t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.loginSetPassword=function(){var e=(0,s.default)(o.default.mark(function e(t){t.loginName,t.setPasswordToken,t.password,t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.startRefreshMiddleEndToken=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.stopRefreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),n.requestOauthUrl=function(){var e=(0,s.default)(o.default.mark(function e(t){t.company,t.account;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.oAuthLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){t.domain,t.code,t.serverAddress,t.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.getUrlHost=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=r,(0,p.default)(n,a)}return(0,g.default)(t,e),t}(coreCommon.Interface);t.default=w},750:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerEServerClientPush=void 0;var a=r(69),o=n(a),i=r(1),s=n(i),u=r(2),c=n(u),f=r(249),d=coreLogger.getLogger("push")("index");window.registerEServerHWPush=function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.webView.getLocalIp()||"0.0.0.0",!isNullOrEmpty(a)){e.next=6;break}return e.next=4,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_TOKEN});case 4:r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)||(a=r.value);case 6:if(!isNullOrEmpty(o)){e.next=11;break}return e.next=9,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME});case 9:n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)||(o=n.value);case 11:return e.next=13,l(2,1,a,o,"","",t);case 13:coreDb.saveLoginSetting({key:DB_KEY_HW_PUSH_TOKEN,value:a}),coreDb.saveLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME,value:o});case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterEServerHWClientPush=(0,c.default)(s.default.mark(function e(){var t,r,n,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.webView.getLocalIp()||"0.0.0.0",r=void 0,n=void 0,e.next=5,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_TOKEN});case 5:return a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(r=a.value),e.next=9,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME});case 9:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(n=o.value),e.next=13,l(2,3,r,n,"","",t);case 13:case"end":return e.stop()}},e,void 0)})),window.registerEServerIosPush=function(){var e=(0,c.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,c.default)(s.default.mark(function e(n){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=5;break}return e.next=3,coreDb.queryLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN});case 3:a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(t=a.value);case 5:if(!isNullOrEmpty(r)){e.next=10;break}return e.next=8,coreDb.queryLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN});case 8:o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(r=o.value);case 10:return e.next=12,l(1,1,"","",t,r,n);case 12:coreDb.saveLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN,value:t}),coreDb.saveLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN,value:r});case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterEServerIosPush=(0,c.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,c.default)(s.default.mark(function e(t){var r,n,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,n=void 0,e.next=4,coreDb.queryLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN});case 4:return a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(r=a.value),e.next=8,coreDb.queryLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN});case 8:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(n=o.value),e.next=12,l(1,3,"","",r,iosVoipToken,t);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));var l=t.registerEServerClientPush=function(){var e=(0,c.default)(s.default.mark(function e(t,r,n,a,i,u,c){var l,p,_,g,w,v,E,h,m,I,C,L,T,S=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if(!isNullOrEmpty(n)||!isNullOrEmpty(i)){e.next=5;break}return d.info(" [ registerClientPush ] androidToken and iosDeviceToken is null"),e.abrupt("return");case 5:return isNullOrEmpty(a)&&(a=""),e.next=8,(0,f.getLoginModel)();case 8:return l=e.sent,p=l.account,_=l.authToken,g=l.serverAddress,w=l.serverPort,v=l.proxyAddress,E=l.proxyPort,h=l.proxyAccount,m=1,I="00:00",C="00:00",L={user:p,device_token:1===t?i:n,push_type:t,opt:r,client_ip:c,language:window.langShortName,no_push_start_time:I,no_push_end_time:C,apns_server:1,apns_cert:S,push_by_time_switch:m,heart_beat_time:30,android_token:1===t?i:n,app_id:"1",push_class_name:a,voip_token:u,app_mode:1,push_mode:1,im_push_mode:1,call_push_mode:0,push_im_active:"welink://welinksoftclient/h5page?page=imDetail",push_call_active:"welink://welinksoftclient/h5page?page=call"},d.info("registerClientPush","registerClientPush"),e.next=17,coreIm.registerPush(L);case 17:T=e.sent,d.info("registerClientPush","registerClientPush result : "+(0,o.default)(T));case 19:case"end":return e.stop()}},e,void 0)}));return function(t,r,n,a,o,i,s){return e.apply(this,arguments)}}();window.openConversationByMobile=function(){var e=(0,c.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreIm.openImDetailByUrl(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},751:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkLoginInfo=t.preLogin=void 0;var a=r(1),o=n(a),i=r(3),s=n(i),u=r(2),c=n(u),f=(t.preLogin=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r,n,a,i,u,c,d,p,_,g;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,l.info("<account_login><1_prepareLogin>begin userSelectOffline="+t.userSelectOffline+" isResume="+t.isResume),window.mutiLanguage="FALSE",t.userSelectOffline||t.isResume||coreUi.initAvatarMap(),t.setLoginStatus(!0),t.userSelectOffline=!1,!t.isTempLogin){e.next=22;break}return l.info("prepareLogin: handle tempLogin info"),t.isTempLogin=!0,t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,r=$getState(),n=r.conf,a=n.confTempAcsAccount,i=n.confTempAcsUportalAddress,u=n.confTempAcsUportalPort,e.next=16,coreSecurity.getPasswordManager();case 16:return c=e.sent,e.next=19,c.getPassword("password");case 19:d=e.sent,t.set({account:a,displayAccount:a,password:d,serverAddress:i,serverPort:u}),t.set({password:d});case 22:return e.next=24,window.isAnonymous();case 24:if(p=e.sent,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!p&&(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,t.set({serverAddress:window.getLinkSmcUportalAddress,serverPort:window.getLinkSmcUportalPort})):(_=appService.getItUserInfo(),g=window.CLIENTCONFIG.DEFAULT_UPORTAL_SERVER,window.getUportalServer()&&(g=window.getUportalServer()),t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,t.set({loginAccount:_.contactsId,password:"*******",serverAddress:g,serverPort:8443}))),window.CLIENTCONFIG.ISMOBILE||(0,f.enableAutoLogin)(!1),l.info("<account_login><1_prepareLogin>end ok"),!window.CLIENTCONFIG.ISMOBILE){e.next=32;break}return e.abrupt("return",window.getCurrentNetWorkType());case 32:return e.abrupt("return",s.default.resolve(0));case 33:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.checkLoginInfo=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r,n,a,i,s,u,c,f,p,_,g,w;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("[ checkLoginInfo ]"),l.info("<account_login><2_checkLoginInfo>begin"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,coreAccount.getLoginModel();case 6:if(t=e.sent,1!==(r=t.authType)){e.next=12;break}return l.info("oAuth no need checkLoginInfo"),l.info("<account_login><2_checkLoginInfo>end ok"),e.abrupt("return");case 12:if(n=t.displayAccount,a=t.password,i=t.serverAddress,s=t.serverPort,u=t.isResume,c=t.status,f=void 0,!u&&!c){e.next=22;break}return e.next=17,coreSecurity.getPasswordManager();case 17:return p=e.sent,e.next=20,p.getPassword("password");case 20:f=e.sent,t.password=f;case 22:if(window.CLIENTCONFIG.ISBIGWIN||window.isPluginEnv){e.next=36;break}if(_=f||t.password,!coreCommon.isMobile()||window.stroage.isFastLogin()||t.isTempLogin){e.next=30;break}if(n&&window.getUiPassword&&window.getUiPassword()){e.next=28;break}return l.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,d.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u}));case 28:e.next=33;break;case 30:if(n&&_){e.next=33;break}return l.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,d.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u}));case 33:if(-1===n.indexOf(" ")){e.next=36;break}return l.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,d.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_HAS_SPACE",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u}));case 36:if(coreUt.utConfigAccountInfo({configAccount:n,configUuid:""}),i&&s){e.next=40;break}return l.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,d.LoginError)({result:!1,errorCode:"LOGIN_ADDRESS_OR_PORT_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u}));case 40:return t.isOAuth=!1,t.OAuthUrl="",t.serverPort=parseInt(s),e.next=45,coreSecurity.getPasswordManager();case 45:if(g=e.sent,e.t0=a,!e.t0){e.next=50;break}return e.next=50,g.setPassword("password",a);case 50:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=64;break}if(e.t1=window.CLIENTCONFIG.ISMOBILE,!e.t1){e.next=56;break}return e.next=55,window.isFloatWindow;case 55:e.t1=e.sent;case 56:if(!(w=e.t1)){e.next=61;break}l.info("the window is float "),e.next=64;break;case 61:return l.error("has no activity, login err!!!"),l.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,d.LoginError)({result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common}));case 64:l.info("[ checkLoginInfo ] ok! "),l.info("<account_login><2_checkLoginInfo>end ok");case 66:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r(361)),d=r(150),l=coreLogger.getLogger("account")("login")},752:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.serviceReadyLoadData=void 0;var a=r(1),o=n(a),i=r(69),s=n(i),u=r(2),c=n(u),f=(t.serviceReadyLoadData=function(){var e=(0,c.default)(o.default.mark(function e(){var t,r,n,a,i,u,c,g,w,v;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getLoginModel)();case 2:return t=e.sent,t.setLoginStatus(!1,!0),e.next=6,coreAccount.registerResumeEvent();case 6:return isNullOrEmpty(t.real_user_account)||isNullOrEmpty(t.authToken)||coreAccount.checkUpgrade({isFirstIn:!1,token:t.authToken,userAccount:t.real_user_account}),_.info("[ serviceReadyLoadData ]"),_.info("serviceReadyLoadData, set isOffline false"),window.isOffline=!1,(0,l.storeAppCache)(),r={key:"confPageShowType",value:"true"},e.next=14,coreDb.saveUserConfig(r);case 14:return n=t.isSupportAS,a={key:"asInfo",value:(0,s.default)(n)},e.next=18,coreDb.saveUserConfig(a);case 18:return coreCommon.dispatchModuleEvent("login",{event:"total",code:0}),e.next=21,(0,d.getLoginModel)();case 21:return i=e.sent,u=handlePhoneNumber(i.displayAccount),c=handlePhoneNumber(i.show_account),g=handlePhoneNumber(i.account),w={displayAccount:"",showAccount:"",account:""},isNullOrEmpty(u)||(w.displayAccount=u),isNullOrEmpty(c)||(w.showAccount=c),isNullOrEmpty(g)||(w.account=g),appService.debugInfoPrint(w),e.next=32,coreDb.queryUserConfigList({key:"hasOpenPush"});case 32:return v=e.sent,(isNullOrEmpty(v)||"true"===v[0].value)&&f(),(0,l.storeAppCache)(),_.info("serviceReadyLoadData, status = "+t.status),window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv||$getState().login.sipLoginOnly||(0,p.checkHuaweiPhonePushSetting)(),_.info("[ serviceReadyLoadData ] ok! "),e.abrupt("return",{result:!0});case 39:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,c.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getLoginModel)();case 2:t=e.sent,window.CLIENTCONFIG.ISMOBILE&&(_.info("[ initMobileNative ]",handlePhoneNumber(t.account)),window.initMobileNative());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),d=r(150),l=r(360),p=r(560),_=coreLogger.getLogger("account")("login")},753:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.startLoginDownLoadCaCert=void 0;var a=r(1),o=n(a),i=r(69),s=n(i),u=r(3),c=n(u),f=r(149),d=n(f),l=r(2),p=n(l),_=coreLogger.getLogger("login")("caCert");t.startLoginDownLoadCaCert=function(){var e=(0,p.default)(o.default.mark(function e(t){var r,n,a,i,u,f,l,p=t.account,g=t.password,w=t.serverAddress,v=t.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.info("startLoginDownLoadCaCert port is:",v),_.info("startLoginDownLoadCaCert port type is:",void 0===v?"undefined":(0,d.default)(v)),v&&v instanceof String&&(v=parseInt(v)),r={auth_type:0,user_agent:window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:coreCommon.isHuaweiCloudWeLink()?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC,user_tiket:"1",auth_info:{user_name:p,password:g},auth_server:{server_type:0,server_url:w,server_port:v,server_version:"V6R6C00"}},n=window.EXEC_PATH,a={file_path:n,server_port:v,server_addr:w},e.next=8,coreTup.getUportalInstance();case 8:return i=e.sent,u=new c.default(function(e,t){i.downLoadCaCert(a,r,function(t){_.info("download ca cert files, ret=",(0,s.default)(t)),e(t)})}),e.next=12,u;case 12:return f=e.sent,l=f.param,e.abrupt("return",l);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()}});