webpackJsonp([30],{132:function(e,t,n){e.exports=n(0)(562)},1660:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwLogSdk=void 0;var i=n(132),a=r(i),o=n(4),c=r(o),u=n(1661);t.HwLogSdk=function e(){(0,c.default)(this,e),this.getLogApi=u.getLogApi,(0,a.default)(this,(0,u.getLogApi)().getApiList())}},1661:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LogImpl=t.getLogApi=void 0;var i=n(1),a=r(i),o=n(2),c=r(o),u=n(128),l=r(u),s=n(4),f=r(s),d=n(129),p=r(d),g=n(130),w=r(g),h=n(908),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),_=n(1663),k=(coreLogger.getLogger("log")("LogImpl"),void 0),x=(t.getLogApi=function(){return isNullOrEmpty(k)&&(k=new x),k},t.LogImpl=function(e){function t(){var e=this;(0,f.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return n.collectLogs=function(){var t=(0,c.default)(a.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.isOpen;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.collectLogs(r));case 1:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.zipFeedbackFile=function(){var t=(0,c.default)(a.default.mark(function t(n){var r=n.value,i=n.isUploadLog,o=n.imgList,c=n.isLogin;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.zipFeedbackFile)(r,i,o,c));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.quickZipFeedbackFile=function(){var t=(0,c.default)(a.default.mark(function t(n){var r=n.value,i=n.keyWords,o=n.crashList;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.quickZipFeedbackFile)(r,i,o));case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.collectLogsAndOpen=(0,c.default)(a.default.mark(function t(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.collectLogsAndOpen());case 1:case"end":return e.stop()}},t,e)})),n.collectLogCuts=function(){var t=(0,c.default)(a.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.logName;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.collectLogCuts(r));case 1:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n}return(0,w.default)(t,e),t}(coreLazyLoad.LogApi))},1662:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCrashLogMac=void 0;var i=n(3),a=r(i),o=n(1),c=r(o),u=n(2),l=r(u),s=coreLogger.getLogger("log")("crashClean"),f=function(){var e=(0,l.default)(c.default.mark(function e(t,n){var r,i,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=window.fs.readdirSync(t),i=0;case 2:if(!(i<r.length)){e.next=11;break}if(a=r[i],!a.startsWith("CloudLink")&&!a.startsWith("WeLinkSdk")){e.next=8;break}return o=window.path.join(t,a),e.next=8,appService.copyFile(o,n);case 8:i++,e.next=2;break;case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();t.getCrashLogMac=function(){var e=(0,l.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.info("cleanCrashLogMac start"),t=window.process.env.HOME,n=window.path.join(window.LOG_PATH,"fr_exception"),window.fs.existsSync(n)&&(appService.deleteFileDir(n),s.info("cleanCrashLogMac delete old dir")),e.abrupt("return",new a.default(function(e,r){var i=this;appService.makeDir(n).then((0,l.default)(c.default.mark(function r(){var a;return c.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=window.path.join(t,"Library/Logs/DiagnosticReports"),!window.fs.existsSync(a)){r.next=6;break}return r.next=4,f(a,n);case 4:r.next=7;break;case 6:s.info("cleanCrashLogMac system crash dir not exist");case 7:e();case 8:case"end":return r.stop()}},r,i)})),function(){s.info("cleanCrashLogMac make dir failed"),r()})}));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},1663:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="",n=e.length,r=Math.round(n/4),i=n-r;if(n<=2)return e[0]+"x";for(var a=0;a<i-r;a++)t+="x";return e.substring(0,r)+t+e.substring(i,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.quickZipFeedbackFile=t.zipFeedbackFile=void 0;var a=n(1),o=r(a),c=n(3),u=r(c),l=n(2),s=r(l),f=n(910),d=n(908),p=n(909),g=coreLogger.getLogger("log")("feedback");t.zipFeedbackFile=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){var a,c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("zipFeedbackFile start"),a=new u.default(function(){var e=(0,s.default)(o.default.mark(function e(a,l){var w,h,v,_,k,x,F;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w=[],!t&&0===r.length){e.next=12;break}return e.prev=2,e.next=5,appService.makeDir(window.FEEDBACK_PATH);case 5:t&&(t=t.replaceAll("\n","\r\n"),g.info("zipFeedbackFile write content"),h=appService.writeFile(window.FEEDBACK_PATH,"feedback.txt",t),w.push(h)),0!==r.length&&r.map(function(e){g.info("zipFeedbackFile copy img path=",e);var t=appService.copyFile(e,window.FEEDBACK_PATH);w.push(t)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),g.error("zipFeedbackFile makeDir error=",e.t0);case 12:if(v=[],!n){e.next=21;break}return g.info("zipFeedbackFile add log"),_=window.LOG_PATH,k=[],e.next=19,(0,d.filterFileSuffix)(_,k);case 19:x=e.sent,!0===x&&k.length>0?(g.info("collectLogs list length =",k.length),v=k):v.push(_);case 21:F=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,u,s,d,w,h,v,_;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<=0)){e.next=5;break}g.info("zipFeedbackFile failed, list is null"),l(),e.next=16;break;case 5:return n=window.getZipLogPath(),e.next=8,coreAccount.getLoginModel();case 8:r=e.sent,u=r.isSupportAS,s=r.show_account,d=r.tempSipNick,w=(new Date).format("yyyy_MM_dd_hh_mm_ss"),h=p.LOG_FEEDBACK_ZIP_FILE_NAME,-1===s.indexOf("Anonymous")||isNullOrEmpty(d)||(s="Anonymous_"+i(d)),u?h=s+"_"+w+".zip":c||(v=d||"Anonymous",h=v+"_"+w+".zip"),_=n+"/"+h,(0,f.dealZip)(t,_).then(function(e){appService.deleteFileDir(window.FEEDBACK_PATH),g.info("zipFeedbackFile zip success"),a(e)},function(){appService.deleteFileDir(window.FEEDBACK_PATH),g.info("zipFeedbackFile failed"),l()});case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),w.length>0?(g.info("zipFeedbackFile start promiseArr"),u.default.all(w).then(function(){v.push(window.FEEDBACK_PATH),F(v)},function(){F(v)})):F(v);case 23:case"end":return e.stop()}},e,void 0,[[2,9]])}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",a);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.quickZipFeedbackFile=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("quickZipFeedbackFile start ,value is:",t,"[key] words is:",desensitive(n)),e.abrupt("return",new u.default(function(){var e=(0,s.default)(o.default.mark(function e(a,c){var l,w,h,v,_,k,x;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],e.prev=1,e.next=4,appService.makeDir(window.FEEDBACK_PATH);case 4:return t&&(t="content:"+t+" keywords:"+n,g.info("quickZipFeedbackFile write content"),w=appService.writeFile(window.FEEDBACK_PATH,"feedback.txt",t),l.push(w)),h=r,g.info("quickZipFeedbackFile add log"),v=(new Date).format("yyyyMMdd_hhmmss"),_="logMini_win_"+v+"_"+n+".zip",e.next=11,(0,d.collectLogCuts)(_);case 11:if(k=e.sent,h.push(k),x=function(){var e=(0,s.default)(o.default.mark(function e(t){var r,u,l,s,d,w,h,v;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<=0)){e.next=5;break}g.info("quickZipFeedbackFile failed, list is null"),c("startZipFile length error"),e.next=17;break;case 5:return r=window.getZipLogPath(),e.next=8,coreAccount.getLoginModel();case 8:return u=e.sent,l=u.isSupportAS,s=u.show_account,d=u.tempSipNick,w=(new Date).format("yyyy_MM_dd_hh_mm_ss"),h=p.LOG_FEEDBACK_ZIP_FILE_NAME,-1===s.indexOf("Anonymous")||isNullOrEmpty(d)||(s="Anonymous_"+i(d)),l&&(h=s+"_"+n+"_"+w+".zip"),v=r+"/"+h,e.next=17,(0,f.dealZip)(t,v).then(function(e){appService.deleteFileDir(window.FEEDBACK_PATH),g.info("quickZipFeedbackFile zip success"),a(e)},function(){appService.deleteFileDir(window.FEEDBACK_PATH),g.info("quickZipFeedbackFile failed"),c("startZipFile zip error")});case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),!(l.length>0)){e.next=31;break}return g.info("quickZipFeedbackFile start promiseArr"),e.prev=16,e.next=19,u.default.all(l);case 19:return h.push(window.FEEDBACK_PATH),e.next=22,x(h);case 22:e.next=29;break;case 24:return e.prev=24,e.t0=e.catch(16),e.next=28,x(h);case 28:g.error("quickZipFeedbackFile promiseArr error=",e.t0);case 29:e.next=33;break;case 31:return e.next=33,x(h);case 33:e.next=39;break;case 35:e.prev=35,e.t1=e.catch(1),g.error("quickZipFeedbackFile error=",e.t1),c(e.t1);case 39:case"end":return e.stop()}},e,void 0,[[1,35],[16,24]])}));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()},908:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.collectLogCuts=t.collectLogsAndOpen=t.collectLogs=t.filterFileSuffix=t.getCrashLogPathUt=t.getCrashLogPath=void 0;var i=n(1),a=r(i),o=n(3),c=r(o),u=n(2),l=r(u),s=n(909),f=(n(1662),n(910)),d=coreLogger.getLogger("log")("collect"),p=function(){var e=(0,l.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new c.default(function(e,n){t.file(function(t){e(t.lastModifiedDate)},function(t){d.info("getMobileFileStats, fail=",t),e()})}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,l.default)(a.default.mark(function e(t,n){var r,i,o,c,u,l,s,f,w,h,v,_,k,x;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d.info("getAllFilesPathAndMTimeInDir begin"),!window.CLIENTCONFIG.ISMOBILE){e.next=27;break}return e.next=5,window.getDirEntries(t);case 5:r=e.sent,i=0;case 7:if(!(i<r.length)){e.next=25;break}if(o=r[i],c=o.toURL(),c=decodeURIComponent(c),u=getFileName(c),l=t+"/"+u,!o.isDirectory){e.next=18;break}return e.next=16,g(l,n);case 16:e.next=22;break;case 18:return e.next=20,p(o);case 20:s=e.sent,n.push({filePath:l,time:s});case 22:i++,e.next=7;break;case 25:e.next=44;break;case 27:f=window.fs.readdirSync(t),w=0;case 29:if(!(w<f.length)){e.next=44;break}if(h=f[w],v=t+"/"+h,_=window.fs.statSync(v),!_.isDirectory()){e.next=38;break}return e.next=36,g(v,n);case 36:e.next=41;break;case 38:k=window.fs.statSync(v),x=k.mtime.getTime(),n.push({filePath:v,time:x});case 41:w++,e.next=29;break;case 44:e.next=49;break;case 46:e.prev=46,e.t0=e.catch(0),d.error("getAllFilesPathAndMTimeInDir error=",e.t0);case 49:case"end":return e.stop()}},e,void 0,[[0,46]])}));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,l.default)(a.default.mark(function e(){var t,n,r,i,o,c,u,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("deleteOldLog start"),t=window.LOG_PATH,n=[],e.next=5,g(t,n);case 5:for(r=0;r<n.length;r++)i=n[r],o=(new Date).getTime(),c=Math.floor(o-i.time),u=1296e6,c>u&&(l=i.filePath,d.info("deleteOldLog, file path=",l+", interval=",c),appService.deleteFile(l));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,l.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("moduleInit start"),e.prev=1,e.next=4,w();case 4:t=window.getZipLogPath(),appService.deleteFileDir(t),appService.deleteFileDir(t.replace("outputFile","log_for_send")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),d.error("moduleInit error=",e.t0);case 12:case"end":return e.stop()}},e,void 0,[[1,9]])}));return function(){return e.apply(this,arguments)}}();window.CLIENTCONFIG.ENABLE_IT_MEETING||h();var v=t.getCrashLogPath=function(){return window.LOG_PATH+"/fr_exception/Local"},_=t.getCrashLogPathUt=function(){return window.LOG_PATH+"/fr_exception/local_tracked"},k=function(){var e=(0,l.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),x=function(e){var t=!1;return s.LOG_SUFFIX_LIST.forEach(function(n){-1!==e.indexOf(n)&&(t=!0)}),t},F=t.filterFileSuffix=function(){var e=(0,l.default)(a.default.mark(function e(t,n){var r,i,o,c,u,l,s,f,p,g,w;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,e.prev=1,d.info("filterFileSuffix dirPath=",t),i=void 0,!window.CLIENTCONFIG.ISMOBILE){e.next=26;break}return e.next=7,window.getDirEntries(t);case 7:i=e.sent,o=0;case 9:if(!(o<i.length)){e.next=24;break}if(c=i[o],u=c.toURL(),u=decodeURIComponent(u),l=getFileName(u),s=t+"/"+l,!c.isDirectory){e.next=20;break}return e.next=18,F(s,n);case 18:e.next=21;break;case 20:!0===x(l)?n.push(s):(d.info("filterFileSuffix find invalid suffix, filename=",l),r=!0);case 21:o++,e.next=9;break;case 24:e.next=41;break;case 26:i=window.fs.readdirSync(t),f=0;case 28:if(!(f<i.length)){e.next=41;break}if(p=i[f],g=t+"/"+p,w=window.fs.statSync(g),!w.isDirectory()){e.next=37;break}return e.next=35,F(g,n);case 35:e.next=38;break;case 37:!0===x(p)?n.push(g):(d.info("filterFileSuffix invalid, filename=",p),r=!0);case 38:f++,e.next=28;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(1),d.error("filterFileSuffix error=",e.t0);case 46:return e.abrupt("return",r);case 47:case"end":return e.stop()}},e,void 0,[[1,43]])}));return function(t,n){return e.apply(this,arguments)}}(),L=t.collectLogs=function(){var e=(0,l.default)(a.default.mark(function e(t){var n,r,i,o,u,l,s,p,g;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("collectLogs start, isOpen=",t),e.next=3,k();case 3:return n=(new Date).format("yyyyMMdd_hhmmss"),r="logFull_win_"+n+".zip",i=window.LOG_PATH,o=[i],u=[],e.next=10,F(i,u);case 10:return l=e.sent,!0===l&&u.length>0&&(d.info("collectLogs list length =",u.length),o=u),s=window.getZipLogPath(),p=s+"/"+r,t&&(p=p.replace("outputFile","log_for_send")),g=new c.default(function(e,n){(0,f.dealZip)(o,p).then(function(n){t&&appService.openFolder(n),d.info("collectLogs zip log success"),e(n)},function(){d.info("collectLogs zip log failed"),n()})}),e.abrupt("return",g);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),m=(t.collectLogsAndOpen=function(){d.info("collectLogsAndOpen start"),window.alert(""+language.LOG_COMPRESS_PROMPT),L(!0).then(function(){window.clearDialogQueue&&window.clearDialogQueue()},function(){window.clearDialogQueue&&window.clearDialogQueue(),window.ToastNew(language.FAILED_TO_COLLECT_LOGS,2)})},function(e){var t=!1;return s.LOG_CUT_LIST.forEach(function(n){0===e.indexOf(n)&&(t=!0)}),t}),b=function(){var e=(0,l.default)(a.default.mark(function e(t,n){var r,i,o,c,u,l,s,f,p,g;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("getCutList logPath=",t),r=void 0,!window.CLIENTCONFIG.ISMOBILE){e.next=24;break}return e.next=5,window.getDirEntries(t);case 5:r=e.sent,i=0;case 7:if(!(i<r.length)){e.next=22;break}if(o=r[i],c=o.toURL(),c=decodeURIComponent(c),u=getFileName(c),l=t+"/"+u,!o.isDirectory){e.next=18;break}return e.next=16,b(l,n);case 16:e.next=19;break;case 18:m(u)&&n.push(l);case 19:i++,e.next=7;break;case 22:e.next=39;break;case 24:r=window.fs.readdirSync(t),s=0;case 26:if(!(s<r.length)){e.next=39;break}if(f=r[s],p=t+"/"+f,g=window.fs.statSync(p),!g.isDirectory()){e.next=35;break}return e.next=33,b(p,n);case 33:e.next=36;break;case 35:m(f)&&n.push(p);case 36:s++,e.next=26;break;case 39:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){if(e.length>0){for(var t=0;t<e.length-1;t++)for(var n=t+1;n<e.length;n++)if(e[t].time<e[n].time){var r=e[t];e[t]=e[n],e[n]=r}return e}return[]},A=function(){var e=(0,l.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("sortLogFileByEditTime, path=",t),n=[],e.next=4,g(t,n);case 4:return r=y(n),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].filePath,i=getFileName(r);0!==i.indexOf("dataconf")&&0!==i.indexOf("HuaweiMeeting_")||0===i.indexOf("dataconf_oper_0.log")||0===i.indexOf("dataconf_agent_0.log")||t.push(e[n])}return t},P=function(){var e=(0,l.default)(a.default.mark(function e(t,n){var r,i,o,c,u,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("getDataConfLogCutList start, limit=",t),r=window.LOG_PATH+"/dataconf",e.next=4,A(r);case 4:for(i=e.sent,o=S(i),c=o.length>t?t:o.length,u=0;u<c;u++)l=o[u].filePath,n.push(l);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].filePath;getFileName(r).indexOf(".zip")>=0&&t.push(e[n])}return t},O=function(){var e=(0,l.default)(a.default.mark(function e(t,n){var r,i,o,c,u,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("getCrashLogCutList start, limit=",t),""===(r=v())){e.next=9;break}return e.next=5,A(r);case 5:for(i=e.sent,o=E(i),c=o.length>t?t:o.length,u=0;u<c;u++)l=o[u].filePath,n.push(l);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=(0,l.default)(a.default.mark(function e(t,n){var r,i,o,c,u,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("getCrashLogCutListUt start, limit=",t),""===(r=_())){e.next=9;break}return e.next=5,A(r);case 5:for(i=e.sent,o=E(i),c=o.length>t?t:o.length,u=0;u<c;u++)l=o[u].filePath,n.push(l);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();t.collectLogCuts=function(){var e=(0,l.default)(a.default.mark(function e(t){var n,r,i,o,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(n=(new Date).format("yyyyMMdd_hhmmss"),t="logMini_win_"+n+".zip"),d.info("collectLogCuts start, logName=",t),e.next=4,k();case 4:return r=[],i=window.LOG_PATH,o=window.getZipLogPath(),e.next=9,b(i,r);case 9:return e.next=11,P(1,r);case 11:return e.next=14,O(2,r);case 14:return e.next=16,C(2,r);case 16:return u=new c.default(function(e,n){var i=o+"/"+t;r.length>0?(0,f.dealZip)(r,i).then(function(t){d.info("collectLogCuts zip log success"),e(t)},function(){d.info("collectLogCuts zip log failed"),n()}):(d.info("collectLogCuts no cut file"),n())}),e.abrupt("return",u);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},909:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CRASH_FILE_TIME_LIMIT=2592e5,t.LOG_FEEDBACK_ZIP_FILE_NAME="feedback.zip",t.LOG_CUT_LIST=["CloudLink.log","CloudLink_1.log","____cloudlink_time.txt","Setup Log 20","debugInfo_","nativewnd.log","nativewnd_1.log","fr_trace.log","fr_fun.log","version.ini","dataconf_oper_0.log","Status.log","db.log","db_1.log","tup_audio.log","tup_audio_1.log","tup_bfcpservice.log","tup_bfcpservice_1.log","tup_call.log","tup_call_1.log","tup_confctrl.log","tup_confctrl_1.log","tup_cui.log","tup_cui_1.log","tup_eaddr.log","tup_eaddr_1.log","tup_http.log","tup_http_1.log","tup_im_service.log","tup_im_service_1.log","tup_login.log","tup_login_1.log","tup_mediaservice.log","tup_mediaservice_1.log","tup_offlinefile.log","tup_offlinefile_1.log","tup_video.log","tup_video_1.log","tupService.log","tupService_1.log"],t.LOG_SUFFIX_LIST=[".log",".log_bak",".txt",".ini",".zip",".dmp",".exc",".idx","keystore","keystoreBak"]},910:function(e,t,n){"use strict";function r(e,t){return new o.default(function(n,r){var i=getFileName(t),a=t.replace(i,"");window.fs.existsSync(a)||(window.fs.mkdirSync(a),c.info("dealZipPc make output path success, outPath=",a));var o=setTimeout(function(){r("dealZipPc zip timeout")},1e5),u=window.require(window.__dirname+"/../node_extends/archiver")("zip",{zlib:{level:9}}),l=window.fs.createWriteStream(t);u.on("error",function(e){c.error("dealZipPc, err=",e),r(e)}),u.on("finish",function(){c.info("dealZipPc zip success")}),l.on("close",function(){o&&clearTimeout(o),c.info("dealZipPc file descriptor closed, size = "+u.pointer()+" bytes"),n(t)}),u.pipe(l),s(u,e),u.finalize(),c.info("dealZipPc start zipLog")})}function i(e,t){return c.info("dealZipMobile list =",e),new o.default(function(n,r){var i=getFileName(t),a=t.replace(i,"");window.comPressDirOrFile(e,a,i,function(e){isNullOrEmpty(e)||isNullOrEmpty(e.zipPath)||!e.result?(c.info("dealZipMobile: compress files failed"),r()):(c.info("dealZipMobile: compress files success"),n(e.zipPath))})})}Object.defineProperty(t,"__esModule",{value:!0}),t.dealZip=void 0;var a=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.dealZipPc=r,t.dealZipMobile=i;var c=coreLogger.getLogger("log")("zip"),u=function e(t,n){try{for(var r=window.fs.readdirSync(n),i=0;i<r.length;i++){var a=r[i],o=n+"/"+a,u=window.fs.statSync(o);if(u.isFile())try{var l=window.fs.readFileSync(o);t.append(l,{name:a})}catch(e){c.error("addFilesToArchiver readFileSync error=",e)}else u.isDirectory()&&e(t,o)}}catch(e){c.error("addFilesToArchiver error=",e)}},l=function e(t){var n=!1;try{for(var r=window.fs.readdirSync(t),i=0;i<r.length;i++){var a=r[i],o=t+"/"+a,u=window.fs.statSync(o);if(u.isFile())try{window.fs.readFileSync(o)}catch(e){c.error("checkDirFiles file = ",a+", error=",e),n=!0;break}else u.isDirectory()&&e(o)}}catch(e){c.error("checkDirFiles error=",e),n=!0}return n},s=function(e,t){try{for(var n=0;n<t.length;n++){var r=t[n],i=window.fs.statSync(r);if(i.isDirectory())l(r)?(c.info("addItemsToArchiver checkDirFiles is true"),u(e,r)):e.directory(r,getFileName(r));else if(i.isFile()){var a=getFileName(r);try{var o=window.fs.readFileSync(r);e.append(o,{name:a})}catch(e){c.error("addItemsToArchiver file = ",a+", error=",e)}}}}catch(e){c.error("addItemsToArchiver error=",e)}};t.dealZip=function(e,t){return window.CLIENTCONFIG.ISMOBILE?i(e,t):r(e,t)}}});